<html>
<head>
<title>(68K) Programming Palm OS in a Nutshell | Palm OS&#174; Programmer's Companion</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:43:06">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="995796"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="CompanionTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CompanionAbout.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="AppStartupAndStop.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CompanionIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">1 &nbsp;&nbsp;
Programming Palm OS in a Nutshell</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's Companion</p>
<p class="SubTitle">Volume I </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1"><a href="Nutshell.html">1  Programming Palm OS in a Nutshell</a></h1>

   <h2 class="SideTOC2"><a href="#995827">
   Why Programming for Palm OS Is Different</a></h2>

      <h3 class="SideTOC3"><a href="#995831">
      Screen Size</a></h3>

      <h3 class="SideTOC3"><a href="#995835">
      Quick Turnaround Expected</a></h3>

      <h3 class="SideTOC3"><a href="#995843">
      PC Connectivity</a></h3>

      <h3 class="SideTOC3"><a href="#995849">
      Input Methods</a></h3>

      <h3 class="SideTOC3"><a href="#995854">
      Power</a></h3>

      <h3 class="SideTOC3"><a href="#995857">
      Memory</a></h3>

      <h3 class="SideTOC3"><a href="#995861">
      File System</a></h3>

      <h3 class="SideTOC3"><a href="#995865">
      Backward Compatibility</a></h3>

   <h2 class="SideTOC2"><a href="#995872">
   Palm OS Programming Concepts</a></h2>

      <h3 class="SideTOC3"><a href="#995914">
      API Naming Conventions</a></h3>

      <h3 class="SideTOC3"><a href="#995945">
      Integrating Programs with the Palm OS Environment</a></h3>

      <h3 class="SideTOC3"><a href="#996002">
      Writing Robust Code</a></h3>

   <h2 class="SideTOC2"><a href="#996041">
   Assigning a Database Type and Creator ID</a></h2>

   <h2 class="SideTOC2"><a href="#996057">
   Making Your Application Run on Different Devices</a></h2>

      <h3 class="SideTOC3"><a href="#996073">
      Running New Applications on an Older Device</a></h3>

      <h3 class="SideTOC3"><a href="#996095">
      Backward Compatibility with PalmOSGlue</a></h3>

      <h3 class="SideTOC3"><a href="#996113">
      Compiling Older Applications with the Latest SDK</a></h3>

   <h2 class="SideTOC2"><a href="#996128">
   Programming Tools</a></h2>

      <h3 class="SideTOC3"><a href="#997693">
      Palm OS Developer Suite</a></h3>

      <h3 class="SideTOC3"><a href="#997700">
      CodeWarrior</a></h3>

      <h3 class="SideTOC3"><a href="#997709">
      Palm OS Emulator</a></h3>

      <h3 class="SideTOC3"><a href="#997716">
      Palm OS Simulator</a></h3>

   <h2 class="SideTOC2"><a href="#996144">
   Where to Go from Here</a></h2>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="995797"> </a>This chapter is the place to start if you're new to Palm<sup>&#8482;</sup> programming. It summarizes what's unique about writing applications for Palm Powered<sup>&#8482;</sup> handhelds and tells you where to go for more in-depth information. It covers:</p>
<ul type="disc">
  <li><a name="995804"> </a><a href="Nutshell.html#995827"></a><a href="Nutshell.html#995827">Why Programming for Palm OS Is Different</a>
  <li><a name="995808"> </a><a href="Nutshell.html#995872">Palm OS Programming Concepts</a>
  <li><a name="995812"> </a><a href="Nutshell.html#996041">Assigning a Database Type and Creator ID</a>
  <li><a name="995816"> </a><a href="Nutshell.html#996057">Making Your Application Run on Different Devices</a>
  <li><a name="995820"> </a><a href="Nutshell.html#996128">Programming Tools</a>
  <li><a name="995824"> </a><a href="Nutshell.html#996144">Where to Go from Here</a>
</ul>

<p><a name="995825"> </a>Read this chapter for a high-level introduction to Palm programming. The rest of this book provides the details.</p>

<h2 class="haH2">
  <a name="995827"> </a>Why Programming for Palm OS Is Different <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="995828"> </a>Like most programmers, you have probably written a desktop application&#8212;an application that is run on a desktop computer such as a PC or a Macintosh computer. Writing applications for handhelds, specifically Palm Powered handhelds, is a bit different from writing desktop applications because the Palm Powered handheld is designed differently than a desktop computer. Also, users simply interact with the handheld differently than they do desktop computers. </p>

<p><a name="995829"> </a>This section describes how these differences affect the design of a Palm OS<sup>&#174;</sup> application. </p>
<h3 class="hbH3">
  <a name="995831"> </a>Screen Size <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995832"> </a>Most Palm Powered handheld screens are only 160x160 pixels, so the amount of information you can display at one time is limited. </p>

<p><a name="995833"> </a>For this reason, you must design your user interface carefully with different priorities and goals than are used for large screens. Strive for a balance between providing enough information and overcrowding the screen. See the book <i>Palm OS User Interface Guidelines</i> for more detailed guidelines on designing the user interface. </p>

<p><a name="995834"> </a>Note that screen sizes of future Palm Powered handhelds may vary. The Sony Clie already has a different screen resolution (320 X 320 pixels) than other Palm Powered handhelds although its screen is still the same size as other handhelds. The HandEra 330 has introduced the ability to rotate the display and the ability to collapse the input area. If the user collapses the input area, there is more space available to the application. </p>
<h3 class="hbH3">
  <a name="995835"> </a>Quick Turnaround Expected <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995836"> </a>On a PC, users don't mind waiting a few seconds while an application loads because they plan to use the application for an extended amount of time. </p>

<p><a name="995837"> </a>By contrast, the average handheld user uses a handheld application 15 to 20 times per day for much briefer periods of time, usually just a few seconds. Speed is therefore a critical design objective for handhelds and is not limited to execution speed of the code. The total time needed to navigate, select, and execute commands can have a big impact on overall efficiency. (Also consider that Palm OS does not provide a wait cursor.)</p>

<p><a name="995840"> </a>To maximize performance, the user interface should minimize navigation between windows, opening of dialogs, and so on. The layout of application screens needs to be simple so that the user can pick up the product and use it effectively after a short time. It's especially helpful if the user interface of your application is consistent with other applications on the handheld so users work with familiar patterns. </p>

<p><a name="995841"> </a>The Palm OS development team has put together a set of design guidelines that were used as the basis for the applications resident on the handheld (Memo Pad, Address Book, and so on). These guidelines are summarized in the book <i>Palm OS User Interface Guidelines</i>. </p>
<h3 class="hbH3">
  <a name="995843"> </a>PC Connectivity <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995845"> </a>PC connectivity is an integral component of the Palm Powered handheld. The handheld comes with a cradle that connects to a desktop PC and with software for the PC that provides "one-button" backup and synchronization of all data on the handheld with the user's PC. </p>

<p><a name="995846"> </a>Many Palm OS applications have a corresponding application on the desktop. To share data between the handheld's application and the desktop's application, you must write a <b>conduit</b>. A conduit is a plug-in to the HotSync<sup>&#174;</sup> technology that runs when you press the HotSync button. A conduit synchronizes data between the application on the desktop and the application on the handheld. To write a conduit, you use the Conduit SDK, which provides its own documentation. </p>
<h3 class="hbH3">
  <a name="995849"> </a>Input Methods <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995850"> </a>Most users of Palm Powered handhelds don't have a keyboard or mouse. Users enter data into the handheld using a pen. They can either write characters in the input area or use the keyboard dialog provided on the handheld. </p>

<p><a name="995851"> </a>While Graffiti<sup>&#174;</sup> or Graffiti<sup>&#174;</sup> 2 strokes and the keyboard dialog are useful ways of entering data, they are not as convenient as using the full-sized desktop computer with its keyboard and mouse. Therefore, you should not require users to enter a lot of data on the handheld itself. </p>

<p><a name="995852"> </a>Many Palm Powered handhelds support external keyboards, which are sold separately. Do not rely on your users having an external keyboard. </p>
<h3 class="hbH3">
  <a name="995854"> </a>Power <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995855"> </a>Palm Powered handhelds run on batteries and thus do not have the same processing power as a desktop PC. The handheld is intended as a satellite viewer for corresponding desktop applications. </p>

<p><a name="995856"> </a>If your application needs to perform a computationally intensive task, you should implement that task in the desktop application instead of the handheld application. </p>
<h3 class="hbH3">
  <a name="995857"> </a>Memory <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995858"> </a>Palm Powered handhelds have limited heap space and storage space. Different versions of the handheld have between 512K and 8MB total of dynamic memory and storage available. The handheld does not have a disk drive or PCMCIA support.</p>

<p><a name="995860"> </a>Because of the limited space and power, optimization is critical. To make your application as fast and efficient as possible, optimize for heap space first, speed second, code size third.</p>
<h3 class="hbH3">
  <a name="995861"> </a>File System <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995862"> </a>Because of the limited storage space, and to make synchronization with the desktop computer more efficient, Palm OS does not use a traditional file system. You store data in memory chunks called <b>records</b>, which are grouped into <b>databases</b>. A database is analogous to a file. The difference is that data is broken down into multiple records instead of being stored in one contiguous chunk. To save space, you edit a database in place in memory instead of creating it in RAM and then writing it out to storage. </p>
<h3 class="hbH3">
  <a name="995865"> </a>Backward Compatibility <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995866"> </a>Different versions of Palm Powered handhelds are available, and each runs a different version of Palm OS. Users are not expected to upgrade their versions of Palm OS as rapidly as they would an operating system on a desktop computer. Updates to the OS are designed in such a way that you can easily maintain backward compatibility with previous versions of the OS, and thus, your application is available to more users. See <a href="Nutshell.html#996057">"Making Your Application Run on Different Devices"</a> for details. </p>

<h2 class="haH2">
  <a name="995872"> </a>Palm OS Programming Concepts <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="995875"> </a>Palm OS applications are generally single-threaded, event-driven programs. Only one program runs at a time. To successfully build a Palm OS application, you have to understand how the system itself is structured and how to structure your application. </p>
<ul type="disc">
  <li><a name="995880"> </a>Each application has a <a href="../PalmOSReference/SystemManager.html#1077030"><code>PilotMain</code></a> function that is equivalent to <code>main</code> in C programs. To launch an application, the system calls <code>PilotMain</code> and sends it a <b>launch code</b>. The launch code may specify that the application is to become active and display its user interface (called a normal launch), or it may specify that the application should simply perform a small task and exit without displaying its user interface. 
   <p><a name="995881"> </a>The sole purpose of the <code>PilotMain</code> function is to receive launch codes and respond to them. (See <a href="AppStartupAndStop.html#997517">Chapter 2, "Application Startup and Stop."</a>)</p>
  <li><a name="995885"> </a>Palm OS is an event-based operating system, so Palm OS applications contain an event loop; however, this event loop is only started in response to the normal launch. Your application may perform work outside the event loop in response to other launch codes. <a href="EventLoop.html#1004923">Chapter 3, "Event Loop,"</a> describes the main event loop.
  <li><a name="995889"> </a>Most Palm OS applications contain a user interface made up of <b>forms</b>, which are analogous to windows in a desktop application. The user interface may contain both predefined UI elements (sometimes referred to as <b>UI objects</b>), and custom UI elements. (See <a href="UserInterface.html#1007614">Chapter 4, "User Interface."</a>)
  <li><a name="995895"> </a>All applications should use the memory and data management facilities provided by the system. (See <a href="Memory.html#1025850">Chapter 5, "Memory,"</a> and <a href="FilesAndDatabases.html#1029258">Chapter 6, "Files and Databases."</a>)
  <li><a name="995902"> </a>You implement an application's features by calling Palm OS functions. Palm OS consists of several managers, which are groups of functions that work together to implement a feature. As a rule, all functions that belong to one manager use the same prefix and work together to implement a certain aspect of functionality. 
   <p><a name="995903"> </a>Managers are available to, for example, generate sounds, send alarms, perform network communication, and beam information through an infrared port. A good way to find out the capabilities of the Palm OS is to scan the <a href="CompanionTOC.html#21895">Table of Contents</a> of both this book and <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. </p>
</ul>

<div><hr>
  <a name="995911"> </a> <b>IMPORTANT: </b> The ANSI C libraries are not part of the Palm development platform. In many cases, you can perform the same function using a Palm OS API call as you can with a call to a ANSI C function. For example, the Palm OS provides a string manager that performs many of the string functions you'd expect to be able to perform in an ANSI C program. If you do use a standard C function, the code for the function is linked into your application and results in a bigger executable.
<hr>
</div>
<h3 class="hbH3">
  <a name="995914"> </a>API Naming Conventions <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995916"> </a>The following conventions are used throughout the Palm OS API:</p>
<ul type="disc">
  <li><a name="995918"> </a>Functions start with a capital letter.
  <li><a name="995919"> </a>All functions belonging to a particular manager start with a two- or three-letter prefix, such as "Ctl" for control functions or "Ftr" for functions that are part of the Feature Manager.
  <li><a name="995921"> </a>Events and other constants start with a lowercase letter.
  <li><a name="995923"> </a>Structure elements start with a lowercase letter. 
  <li><a name="995924"> </a>Global variables start with a capital letter. 
  <li><a name="995925"> </a>Typedefs start with a capital letter and end with "Type" (for example, <code>DateFormatType</code>, found in <code>DateTime.h</code>).
  <li><a name="995927"> </a>Macintosh ResEdit resource types usually start with a lowercase letter followed by three capital letters, for example tSTR or tTBL. (Customized Macintosh resources provided with your developer package are all uppercase, for example, MENU. Some resources, such as Talt, don't follow the conventions.)
  <li><a name="995928"> </a>Members of an enumerated type start with a lowercase prefix followed by a name starting with a capital letter, as follows:

<div class="CodeRule"><hr></div><pre class="CodeBlock">
enum formObjects {<a name="995929"> </a>
      frmFieldObj,<a name="995930"> </a>
      frmControlObj,<a name="995931"> </a>
      frmListObj,<a name="995932"> </a>
      frmTableObj,<a name="995933"> </a>
      frmBitmapObj,<a name="995934"> </a>
      frmLineObj,<a name="995935"> </a>
      frmFrameObj,<a name="995936"> </a>
      frmRectangleObj,<a name="995937"> </a>
      frmLabelObj,<a name="995938"> </a>
      frmTitleObj,<a name="995939"> </a>
      frmPopupObj,<a name="995940"> </a>
      frmGraffitiStateObj,<a name="995941"> </a>
      frmGadgetObj<a name="995942"> </a>
};<a name="997920"> </a>
typedef enum formObjects FormObjectKind;<a name="995943"> </a>
</pre><div class="CodeRule"><hr></div>

</ul>
<h3 class="hbH3">
  <a name="995945"> </a>Integrating Programs with the Palm OS Environment <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995946"> </a>When users work with a Palm OS application, they expect to be able to switch to other applications, have access to Graffiti or Graffiti 2 power writing software and the onscreen keyboard, access information with the global find, receive alarms, and so on. Your application will integrate well with others if you follow the guidelines in this section. Integrate with the system software as follows:</p>
<ul type="disc">
  <li><a name="995948"> </a>Handle <code>sysAppLaunchCmdNormalLaunch</code>
  <li><a name="995950"> </a>Handle or ignore other application launch codes as appropriate. For more information, see the next chapter, <a href="AppStartupAndStop.html#997517">Chapter 2, "Application Startup and Stop."</a>
  <li><a name="995955"> </a>Handle system preferences properly. System preferences determine the display of 
  <ul type="disc">
    <li><a name="995956"> </a>Date formats
    <li><a name="995957"> </a>Time formats
    <li><a name="995958"> </a>Number formats
    <li><a name="995959"> </a>First day of week (Sunday or Monday)
   <p><a name="995960"> </a>Be sure your application uses the system preferences for numeric formats, date, time, and start day of week. See <a href="SystemFeatures.html#1045663">"Accessing System Preferences"</a> for instructions on how to do so. </p>
  </ul>
  <li><a name="995965"> </a>Allow the system to post these messages:
  <ul type="disc">
    <li><a name="995966"> </a>alarms
    <li><a name="995967"> </a>low-battery warnings
    <li><a name="995968"> </a>system messages during synchronization 
   <p><a name="995969"> </a>The normal event loop used by virtually all Palm OS applications allows ample time for the system to post messages and handle necessary events. You only need to take special care if your application performs a lengthy computational task. For example, if your application has a large database with greater than 20,000 records and it must search through each of these database records, you might want to check for system events every so often during this loop. </p>
  </ul>
  <li><a name="995970"> </a>Be sure your application does not obscure or change the input area, input area icons, and power button.
  <li><a name="995971"> </a>Don't obscure shift indicators. 
</ul>

<p><a name="995972"> </a>In addition, follow these rules:</p>
<ul type="disc">
  <li><a name="995974"> </a>Store state information in the application preferences database, not in the application record database. See <a href="SystemFeatures.html#1045772">"Setting Application-Specific Preferences"</a> for more information. 
  <li><a name="995980"> </a>If your application uses the serial port, be sure to close the port when you no longer need it so that the HotSync application can use it. 
  <li><a name="995982"> </a>Ensure that your application properly handles the global find. Generally, searches and sorts aren't case sensitive. 
  <li><a name="995984"> </a>If your application supports private records, be sure they are unavailable to the global find when they should be hidden.
  <li><a name="995985"> </a>Integrate with the Launcher application by providing an application name, two application icons, and a version string as described in <a href="UserInterface.html#1011190">"Application Launcher"</a>.
  <li><a name="995990"> </a>Follow the guidelines detailed in the book <i>Palm OS User Interface Guidelines</i>.
  <li><a name="995991"> </a>Ensure that your application properly handles system messages during and after synchronization.
  <li><a name="995994"> </a>Ensure that deleted records are not displayed.
  <li><a name="995995"> </a>Ensure that your application doesn't exceed the maximum number of categories: 15 categories and the obligatory category "Unfiled" for a total of 16.
  <li><a name="995997"> </a>Ensure that your application uses a consistent default state when the user enters it: 
  <ul type="disc">
    <li><a name="995998"> </a>Some applications have a fixed default; for example, the Date Book always displays the current day when launched. 
    <li><a name="995999"> </a>Other applications return to the place the user exited last. In that case, remember to provide a default if that place is no longer available. Because of HotSync operations and Preferences, don't assume the application data is the same as it was when the user looked at it last. 
  </ul>
  <li><a name="996000"> </a>If your application uses sounds, be sure it uses the Warning and Confirmation sounds properly.
</ul>
<h3 class="hbH3">
  <a name="996002"> </a>Writing Robust Code <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996003"> </a>To make your programs more robust and to increase their compatibility with the next generation of Palm OS products, it is strongly recommended that you follow the guidelines and practices outlined in this section. </p>
<ul type="disc">
  <li><a name="996004"> </a>Check assumptions
   <p><a name="996005"> </a>You can write defensive code by adding frequent calls to the <a href="../PalmOSReference/ErrorManager.html#1027946"><code>ErrNonFatalDisplayIf</code></a> function, which enables your debug builds to check assumptions. Many bugs are caught in this way, and these "extra" calls don't weigh down your shipping application. You can keep more important checks in the release builds by using the <a href="../PalmOSReference/ErrorManager.html#1027916"><code>ErrFatalDisplayIf</code></a> function.</p>
  <li><a name="996012"> </a>Avoid continual polling
   <p><a name="996013"> </a>To conserve the battery, avoid continual polling. If your application is in a wait loop, poll at short intervals (for example, every tenth of a second) instead. The event loop of the Hardball example application included with your Palm OS SDK illustrates how to do this. </p>
  <li><a name="996015"> </a>Avoid reading and writing to <code>NULL</code> (or low memory) 
   <p><a name="996021"> </a>When calling functions that allocate memory (<a href="../PalmOSReference/MemoryManager.html#1017344"><code>MemSet</code></a>, <a href="../PalmOSReference/MemoryManager.html#1016995"><code>MemMove</code></a> and similar functions) make sure that the pointers they return are non-<code>NULL</code>. (If you can do better validation than that, so much the better.) Also check that pointers your code obtains from structures or other function calls are not <code>NULL</code>. Consider adding to your debug build a <code>#define</code> that overrides <a href="../PalmOSReference/MemoryManager.html#1016995"><code>MemMove</code></a> (and similar functions) with a version that validates the arguments passed to it.</p>
  <li><a name="996026"> </a>Use dynamic heap space frugally
   <p><a name="996027"> </a>It is important not to use the extra dynamic heap space available on Palm units running 2.0 and higher unless it is truly necessary to do so. Wasteful use of heap space may limit your application to running only on the latest handhelds&#8212;which prevents it from running on the very large number of units already in the marketplace.</p>
   <p><a name="996028"> </a>Note that some system services, such as the IrDA stack or the Find window, can require additional memory while your application is running; for example, if the unit starts to receive a beam or other external input, the system may need to allocate additional heap space for the incoming data. Don't use all available dynamic memory just because it's there; instead, consider using the storage heap for working with large amounts of temporary data.</p>
  <li><a name="996029"> </a>Check result codes when allocating memory
   <p><a name="996030"> </a>Because future handhelds may have larger or smaller amounts of available memory, it is always a good idea to check result codes carefully when allocating memory. It's also good practice to use the storage heap (and possibly file streams) to work with large objects.</p>
  <li><a name="996031"> </a>Avoid allocating zero-length objects
   <p><a name="996032"> </a>It's not valid to allocate a zero-byte buffer, or to resize a buffer to zero bytes. Palm OS 2.0 and previous releases allowed this practice, but later revisions of the OS do not permit zero-length objects.</p>
  <li><a name="996033"> </a>Avoid making assumptions about the screen
   <p><a name="996034"> </a>The location of the screen buffer, its size, and the number of pixels per bit aren't set in stone&#8212;they might well change. Don't hack around the windowing and drawing functions. If you are going to hack the hardware to circumvent the APIs, save the state and return the system to that saved state when you quit.</p>
  <li><a name="996035"> </a>Don't access globals or hardware directly
   <p><a name="996036"> </a>Global variables and their locations can change; to avoid mishaps, use the documented API functions and disable your application if it is run on anything but a tested version of the OS. Future handhelds might run on a different processor than the current one.</p>
   <p><a name="996037"> </a>Similarly, don't hardcode references to cards. Although current Palm OS hardware provides only a single card slot, this may not always be the case. Thus, when calling functions that manipulate cards, such as Data Manager and file streaming functions, pass a variable that references the target card, rather than passing a hardcoded reference to card 0.</p>
  <li><a name="996038"> </a>Built-in applications can change
   <p><a name="996039"> </a>The format and size of the preferences (and data) for the built-in applications is subject to change. Write your code defensively, and consider disabling your application if it is run on an untested version of the OS.</p>
</ul>

<h2 class="haH2">
  <a name="996041"> </a>Assigning a Database Type and Creator ID <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="996043"> </a>Each Palm OS application is uniquely identified by a four-byte creator ID. Assigning this same creator ID to all of the databases related to an application associates those databases with the application. The OS takes advantage of this; for instance, the launcher's Info panel uses the creator ID to calculate the total memory used by each application.</p>

<p><a name="996045"> </a>Each database on the Palm Powered handheld has a type as well as a creator ID. The database type allows applications and the OS to distinguish among multiple databases with the same creator ID. For applications, set the database type to <code>sysFileTApplication</code> (<code>'appl'</code>). For each database associated with an application, set the database type to any other value (as long as it isn't composed entirely of lowercase letters, since those are reserved by Palm). Certain predefined types&#8212;such as <code>'appl'</code> (application) or <code>'libr'</code> (library)&#8212;have special meaning to Palm OS. For instance, the launcher looks at the database type to determine which databases are applications.</p>

<p><a name="996046"> </a>Types and creator IDs are case-sensitive, and are composed of four ASCII characters in the range 32-126 (decimal). Types and creator IDs consisting of all lowercase letters are reserved for use by Palm Inc., so any type or creator ID that you choose must contain at least one uppercase letter, digit, or symbol<a href="#996049"><sup>1</sup></a>.</p>

<p><a name="996050"> </a>To protect your application from conflicting with others, you need to register your creator ID with Palm, which maintains a database of registered IDs. To choose and register a creator ID, see this web page:</p>

<p><a name="996052"> </a><a href="http://www.palmos.com/dev/creatorid/">http://www.palmos.com/dev/creatorid/</a></p>

<p><a name="996053"> </a>Note that you don't need to register database types as you do creator IDs. Each creator ID in effect defines a new space of types, so there is no connection between two databases with type 'Data' but with different creator IDs.</p>

<div><hr>
  <a name="996054"> </a> <b>IMPORTANT: </b> Applications with identical creator IDs cannot coexist on the same handheld; during installation the new application will replace the existing application that possesses the same creator ID. Further, the new application could well corrupt any databases that were associated with the preexisting application. For this reason, all applications should have their own unique creator ID.
<hr>
</div>

<p><a name="996055"> </a>Finally, creator IDs aren't used only to identify databases. They are also used, among other things, when getting or setting application preferences, to register for notifications, and to identify features.</p>

<h2 class="haH2">
  <a name="996057"> </a>Making Your Application Run on Different Devices <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="996058"> </a>There are many different handhelds that run Palm OS, and each may have a different version of the OS installed on it. Users are not expected to upgrade the Palm OS as frequently as they would an OS on a desktop computer. This fact makes backward compatibility more crucial for Palm OS applications. </p>

<p><a name="996059"> </a>This section describes how to make sure your application runs on as many handhelds as possible by discussing:</p>
<ul type="disc">
  <li><a name="996063"> </a><a href="Nutshell.html#996073">Running New Applications on an Older Device</a>
  <li><a name="996067"> </a><a href="Nutshell.html#996095">Backward Compatibility with PalmOSGlue</a>
  <li><a name="996071"> </a><a href="Nutshell.html#996113">Compiling Older Applications with the Latest SDK</a>
</ul>
<h3 class="hbH3">
  <a name="996073"> </a>Running New Applications on an Older Device <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996074"> </a>Releases of the Palm OS are binary compatible with each other. If you write a brand new application today, it can run on all versions of the operating system provided the application doesn't use any new features. In other words, if you write your application using only features available in Palm OS 1.0, then your application runs on all handhelds. If you use 2.0 features, your application won't run on the earliest Palm Powered handhelds, but it will run on all others, and so on. </p>

<p><a name="996075"> </a>How can you tell which features are available in each version of the operating system? There are a couple of way to do so:</p>
<ul type="disc">
  <li><a name="996081"> </a>The <i>Palm OS Programmer's API Reference</i> has a <a href="../PalmOSReference/CompatibilityApdx.html#992643">"Compatibility Guide"</a> appendix. This guide lists the features and functions introduced in each operating system version greater than 1.0. 
  <li><a name="996085"> </a>The header file <code>SysTraps.h</code> (or <code>CoreTraps.h</code> on Palm OS 3.5 and higher) lists all of the system traps available. Traps are listed in the order in which they were introduced to the system, and comments in the file clearly mark where each operating system version begins. 
</ul>

<p><a name="996086"> </a>Programmatically, you can use the Feature Manager to determine which features are available on the system the application is running on. Note that you can't always rely on the operating system version number to guarantee that a feature exists. For example, Palm OS version 3.2 introduces wireless support, but not all Palm Powered handhelds have that capability. Thus, checking that the system version is 3.2 does not guarantee that wireless support exists. Consult the <a href="../PalmOSReference/CompatibilityApdx.html#992643">"Compatibility Guide"</a> in the <i>Palm OS Programmer's API Reference</i> to learn how to check for the existence of each specific feature. </p>
<h3 class="hbH3">
  <a name="996095"> </a>Backward Compatibility with PalmOSGlue <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996096"> </a>The PalmOSGlue library can help you maintain backward compatibility with earlier releases while still allowing you to use the latest set of APIs. PalmOSGlue provides backward compatibility for some of the user interface manager calls and the managers that enable localization and internationalization. </p>

<p><a name="996097"> </a>PalmOSGlue can be used in any application that runs on Palm OS 2.0 and later. The library provides the latest support for localization features and for accessing internal UI data structures. Link your application with the library PalmOSGlue (<code>PalmOSGlue.lib</code> or <code>libPalmOSGlue.a</code>). </p>

<p><a name="996100"> </a>When you use PalmOSGlue, you use the functions in the same way as described in the <i>Palm OS Programmer's API Reference</i>, but their names are different. For example, <code>TxtFindString</code> is named <code>TxtGlueFindString</code> in PalmOSGlue. When you make a call to a glue function (for example, <code>TxtGlue</code><!-PS02-><span style="color: #000000;  font-style: italic; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">Func</span>, <code>FntGlue</code><!-PS02-><span style="color: #000000;  font-style: italic; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">Func</span>, or <code>WinGlue</code><!-PS02-><span style="color: #000000;  font-style: italic; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">Func</span>), the code in PalmOSGlue either uses the appropriate function found in the ROM or, if the function don't exist, executes a simple equivalent of the function.</p>

<p><a name="996104"> </a>To see a complete list of functions in PalmOSGlue, see the chapter <a href="../PalmOSReference/PalmOSGlueLib.html#1030875">"PalmOSGlue Library"</a> of the <i>Palm OS Programmer's API Reference</i>. </p>

<p><a name="996111"> </a>PalmOSGlue is a linkable library that is bound to your project at link time. It is not a shared library. PalmOSGlue will increase your application's code size. The exact amount by which your code size increases depends on the number of library functions you call; the linker strips any unused routines and data. </p>
<h3 class="hbH3">
  <a name="996113"> </a>Compiling Older Applications with the Latest SDK <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996114"> </a>As a rule, all Palm OS applications developed with an earlier version of the Palm OS platform SDK should run error-free on the latest release. </p>

<p><a name="996115"> </a>If you want to compile your older application under the latest release, you need to look out for functions with a changed API. For any of these functions, the old function still exists with an extension noting the release that supports it, such as V10 or V20.</p>

<p><a name="996116"> </a>You can choose one of two options:</p>
<ul type="disc">
  <li><a name="996117"> </a>Change the function name to keep using the old API. Your application will then run error free on the newer handhelds.
  <li><a name="996118"> </a>Update your application to use the new API. The application will then run error free and have access to some new functionality; however, it will no longer run on older handhelds that use prior releases of the OS.
</ul>

<div><hr>
  <a name="996119"> </a> <b>NOTE: </b> If you want to compile a legacy application with the Palm OS 3.5 or later SDK, note that some header file names have changed, and the names used for basic types have changed. For example, parameters previously declared as <code>Word</code> are now <code>UInt16</code> or <code>Int16</code>. To compile existing applications, you'll need to make these changes in your code or include the header file <code>PalmOSCompatibility.h</code>. See the <a href="../PalmOSReference/CompatibilityApdx.html#992643">"Compatibility Guide"</a> in the <i>Palm OS Programmer's API Reference</i> for further details. 
<hr>
</div>

<h2 class="haH2">
  <a name="996128"> </a>Programming Tools <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="997741"> </a>Several tools are available that help you build, test, and debug Palm OS applications. </p>
<h3 class="hbH3">
  <a name="997693"> </a>Palm OS Developer Suite <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997696"> </a>Palm OS Developer Suite is an Eclipse-based integrated tool chain that provides Palm OS software developers with an easy and fast path for creating Palm OS applications. Palm OS Developer Suite enables development of both ARM-native Palm OS Protein applications and legacy 68K applications, all within a single IDE. Palm OS Developer Suite can be freely downloaded from the PalmSource, Inc. website, at <a href="http://www.palmos.com/dev/tools/dev_suite.html">http://www.palmos.com/dev/tools/dev_suite.html</a>.</p>
<h3 class="hbH3">
  <a name="997700"> </a>CodeWarrior <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997703"> </a>CodeWarrior Development Studio for Palm OS Platform is one of the industry's most complete programming tools. It is available for Windows and Mac OS platforms. For more information, see the Metrowerks website at <a href="http://www.metrowerks.com/MW/Develop/Desktop/PalmOS/Default.htm">http://www.metrowerks.com/MW/Develop/Desktop/PalmOS/Default.htm</a>.</p>
<h3 class="hbH3">
  <a name="997709"> </a>Palm OS Emulator <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997712"> </a>The Palm OS Emulator is software that emulates the hardware of the various models of Palm OS platform devices on Windows or Mac OS computers. Palm OS Emulator simulates Palm Powered devices running Palm OS 4.x and earlier only.</p>
<h3 class="hbH3">
  <a name="997716"> </a>Palm OS Simulator <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997719"> </a>The Palm OS Simulator is Palm OS Cobalt or Palm OS Garnet running native on a Windows machine. Currently it is the easiest and best way to test your application for Palm OS Cobalt or Palm OS Garnet compatibilty. It is available as part of the Palm OS Developer Suite download and as a stand alone download via the PalmSource, Inc. web page.</p>

<p><a name="997809"> </a><a href="http://www.palmos.com/dev/tools/">See </a>http://www.palmos.com/dev/tools/ for information about these and other development tools.</p>

<h2 class="haH2">
  <a name="996144"> </a>Where to Go from Here <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="996145"> </a>This chapter provided you only with a general outline of the issues involved in writing a Palm OS application. To learn the specifics, refer to the following resources: </p>
<ul type="disc">
  <li><a name="996146"> </a>This book
   <p><a name="996147"> </a>The rest of this book provides details on how to implement common application features using the Palm OS SDK. If you're new to Palm OS programming, you need to read the next two chapters to learn the principles of Palm OS application design, how to implement the main function, and how to implement the standard event loop. The remaining chapters you can read on an as-needed basis. </p>
  <li><a name="996148"> </a>Example applications
   <p><a name="996149"> </a>The actual source code for the applications on the Palm Powered handheld is included with your SDK as examples. The code can be a valuable aid when you develop your own program. The software development kit provides a royalty-free license that permits you to use any or all of the source code from the examples in your application. </p>
  <li><a name="996153"> </a><i>Palm OS Programming Development Tools Guide</i>
   <p><a name="996157"> </a>The <i>Palm OS Programming Development Tools Guide</i> provides more details on using the tools to debug programs. (You might also be interested in the <a href="DebuggingStrats.html#1055446">"Debugging Strategies"</a> chapter in this book, which describes programmatic debugging solutions.) </p>
  <li><a name="996164"> </a><i>Palm OS Programmer's API Reference</i> 
   <p><a name="996165"> </a>The reference book provides the details on all of the public data structures and API calls. </p>
  <li><a name="996166"> </a><i>Palm OS User Interface Guidelines</i> 
   <p><a name="996167"> </a>The <i>Palm OS User Interface Guidelines</i> provides detailed guidelines for creating a user interface that conforms to Palm standards. You should read this book before you begin designing your application's interface. </p>
  <li><a name="996168"> </a>Conduit Development Kits and documentation
   <p><a name="996169"> </a>If you need to write a conduit for your application, see the documentation provided with the Conduit Development Kits. </p>
</ul>

<p><a name="996170"> </a></p>
 

<hr> 
<p class="FNFootnote">
<a name="996049"> </a><a href="#996046">1</a>. Palm has also reserved <code>'pqa '</code>.</p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Companion_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="CompanionTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CompanionAbout.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="AppStartupAndStop.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CompanionIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>