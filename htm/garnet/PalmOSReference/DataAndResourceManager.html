<html>
<head>
<title>(68K) Data and Resource Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:17">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1008042"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CharacterAttributes.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="DebugMgr.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">30 &nbsp;&nbsp;
Data and Resource Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="DataAndResourceManager.html">30  Data and Resource Manager</a></h1>

   <h2 class="SideTOC2"><a href="#1008072">
   Data Manager Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1008074">
      DmOpenRef</a></h3>

      <h3 class="SideTOC3"><a href="#1008086">
      DmResID</a></h3>

      <h3 class="SideTOC3"><a href="#1008094">
      DmResType</a></h3>

      <h3 class="SideTOC3"><a href="#1008103">
      SortRecordInfoType</a></h3>

   <h2 class="SideTOC2"><a href="#1008142">
   Data Manager Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1008143">
      Category Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1008189">
      Record Attribute Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1008258">
      Database Attribute Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1008351">
      Error Codes</a></h3>

      <h3 class="SideTOC3"><a href="#1008538">
      Open Mode Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1008587">
      Miscellaneous Constants</a></h3>

   <h2 class="SideTOC2"><a href="#1008605">
   Data Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1008608">
      DmArchiveRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1008665">
      DmAttachRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1008739">
      DmAttachResource</a></h3>

      <h3 class="SideTOC3"><a href="#1008802">
      DmCloseDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1008861">
      DmCreateDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1008948">
      DmCreateDatabaseFromImage</a></h3>

      <h3 class="SideTOC3"><a href="#1008974">
      DmDatabaseInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1009055">
      DmDatabaseProtect</a></h3>

      <h3 class="SideTOC3"><a href="#1009109">
      DmDatabaseSize</a></h3>

      <h3 class="SideTOC3"><a href="#1009150">
      DmDeleteCategory</a></h3>

      <h3 class="SideTOC3"><a href="#1009196">
      DmDeleteDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1009291">
      DmDeleteRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1009348">
      DmDetachRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1009409">
      DmDetachResource</a></h3>

      <h3 class="SideTOC3"><a href="#1009460">
      DmFindDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1009493">
      DmFindRecordByID</a></h3>

      <h3 class="SideTOC3"><a href="#1009528">
      DmFindResource</a></h3>

      <h3 class="SideTOC3"><a href="#1009580">
      DmFindResourceType</a></h3>

      <h3 class="SideTOC3"><a href="#1009628">
      DmFindSortPosition</a></h3>

      <h3 class="SideTOC3"><a href="#1009676">
      DmFindSortPositionV10</a></h3>

      <h3 class="SideTOC3"><a href="#1009718">
      DmGetAppInfoID</a></h3>

      <h3 class="SideTOC3"><a href="#1009742">
      DmGetDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1009780">
      DmGetDatabaseLockState</a></h3>

      <h3 class="SideTOC3"><a href="#1009808">
      DmGetLastErr</a></h3>

      <h3 class="SideTOC3"><a href="#1009928">
      DmGetNextDatabaseByTypeCreator</a></h3>

      <h3 class="SideTOC3"><a href="#1010008">
      DmGetRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1010054">
      DmGetResource</a></h3>

      <h3 class="SideTOC3"><a href="#1010093">
      DmGetResourceIndex</a></h3>

      <h3 class="SideTOC3"><a href="#1010139">
      DmGet1Resource</a></h3>

      <h3 class="SideTOC3"><a href="#1010176">
      DmInsertionSort</a></h3>

      <h3 class="SideTOC3"><a href="#1010217">
      DmMoveCategory</a></h3>

      <h3 class="SideTOC3"><a href="#1010264">
      DmMoveRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1010311">
      DmNewHandle</a></h3>

      <h3 class="SideTOC3"><a href="#1010335">
      DmNewRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1010379">
      DmNewResource</a></h3>

      <h3 class="SideTOC3"><a href="#1010419">
      DmNextOpenDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1010445">
      DmNextOpenResDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1010477">
      DmNumDatabases</a></h3>

      <h3 class="SideTOC3"><a href="#1010506">
      DmNumRecords</a></h3>

      <h3 class="SideTOC3"><a href="#1010539">
      DmNumRecordsInCategory</a></h3>

      <h3 class="SideTOC3"><a href="#1010587">
      DmNumResources</a></h3>

      <h3 class="SideTOC3"><a href="#1010606">
      DmOpenDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1010696">
      DmOpenDatabaseByTypeCreator</a></h3>

      <h3 class="SideTOC3"><a href="#1010749">
      DmOpenDatabaseInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1010783">
      DmOpenDBNoOverlay</a></h3>

      <h3 class="SideTOC3"><a href="#1010840">
      DmPositionInCategory</a></h3>

      <h3 class="SideTOC3"><a href="#1010883">
      DmQueryNextInCategory</a></h3>

      <h3 class="SideTOC3"><a href="#1010935">
      DmQueryRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1010961">
      DmQuickSort</a></h3>

      <h3 class="SideTOC3"><a href="#1011009">
      DmRecordInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1011051">
      DmReleaseRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1011087">
      DmReleaseResource</a></h3>

      <h3 class="SideTOC3"><a href="#1011116">
      DmRemoveRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1011171">
      DmRemoveResource</a></h3>

      <h3 class="SideTOC3"><a href="#1011227">
      DmRemoveSecretRecords</a></h3>

      <h3 class="SideTOC3"><a href="#1011281">
      DmResizeRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1011307">
      DmResizeResource</a></h3>

      <h3 class="SideTOC3"><a href="#1011331">
      DmResourceInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1011378">
      DmSearchRecord</a></h3>

      <h3 class="SideTOC3"><a href="#1011408">
      DmSearchResource</a></h3>

      <h3 class="SideTOC3"><a href="#1011450">
      DmSeekRecordInCategory</a></h3>

      <h3 class="SideTOC3"><a href="#1011500">
      DmSet</a></h3>

      <h3 class="SideTOC3"><a href="#1011529">
      DmSetDatabaseInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1011610">
      DmSetRecordInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1011668">
      DmSetResourceInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1011701">
      DmStrCopy</a></h3>

      <h3 class="SideTOC3"><a href="#1054640">
      DmSync</a></h3>

      <h3 class="SideTOC3"><a href="#1053148">
      DmSyncDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#1052867">
      DmWrite</a></h3>

      <h3 class="SideTOC3"><a href="#1011763">
      DmWriteCheck</a></h3>

   <h2 class="SideTOC2"><a href="#1011788">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1011791">
      DmComparF</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1008046"> </a>This chapter describes the data manager and the resource manager API declared in the header file <code>DataMgr.h</code>. It discusses the following topics:</p>
<ul type="disc">
  <li><a name="1008051"> </a><a href="DataAndResourceManager.html#1008072">Data Manager Data Structures</a>
  <li><a name="1008055"> </a><a href="DataAndResourceManager.html#1008142">Data Manager Constants</a>
  <li><a name="1008059"> </a><a href="DataAndResourceManager.html#1008605">Data Manager Functions</a>
  <li><a name="1008063"> </a><a href="DataAndResourceManager.html#1011788">Application-Defined Functions</a>
</ul>

<p><a name="1008064"> </a>For more information on the data and resource managers, see the chapter <a href="../PalmOSCompanion/FilesAndDatabases.html#1029258">"Files and Databases"</a> in the <i>Palm OS Programmer's Companion</i>, vol. I. </p>

<h2 class="haH2">
  <a name="1008072"> </a>Data Manager Data Structures <a href="#1008042"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1008074"> </a>DmOpenRef Typedef <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008076"> </a>Purpose 
</h4>

<p><a name="1008078"> </a>The <code>DmOpenRef</code> type defines a pointer to an open database. The database pointer is created and returned by <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a>. It is used in any function that requires access to an open database. </p>
<h4>
  <a name="1008082"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008083"></a>typedef void *DmOpenRef;
</pre>

<h3 class="hbH3">
  <a name="1008086"> </a>DmResID Typedef <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008088"> </a>Purpose 
</h4>

<p><a name="1008090"> </a>The <code>DmResID</code> type defines a resource identifier. You assign each resource an ID at creation time. Note that resource IDs greater than or equal to 10000 are reserved for system use. </p>
<h4>
  <a name="1008091"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008092"></a>typedef UInt16 DmResID;
</pre>

<h3 class="hbH3">
  <a name="1008094"> </a>DmResType Typedef <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008096"> </a>Purpose 
</h4>

<p><a name="1008098"> </a>The <code>DmResType</code> type defines the type of a resource. The resource type is a four-character code such as <code>'Tbmp'</code> for bitmap resources. </p>
<h4>
  <a name="1008099"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008100"></a>typedef UInt32 DmResType;
</pre>

<h3 class="hbH3">
  <a name="1008103"> </a>SortRecordInfoType Struct <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008105"> </a>Purpose 
</h4>

<p><a name="1008107"> </a>The <code>SortRecordInfoType</code> structure specifies information that can be used to sort a record. The database sorting functions (<a href="DataAndResourceManager.html#1010176"><code>DmInsertionSort()</code></a> and <a href="DataAndResourceManager.html#1010961"><code>DmQuickSort()</code></a>) pass this structure to your comparison callback function (of type <a href="DataAndResourceManager.html#1011791"><code>DmComparF()</code></a>), where you can use the information therein to help when comparing two records. To create this structure, you can call <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a>, which returns these values for a given record. </p>
<h4>
  <a name="1008120"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008121"></a>typedef struct {
  UInt8 attributes;
  UInt8 uniqueID[3];
} SortRecordInfoType;
</pre>
<pre class="proto"><a name="1051282"></a>typedef SortRecordInfoType *SortRecordInfoPtr;
</pre>
<h4>
  <a name="1051245"> </a>Fields 
</h4>

<dl>
<dt><a name="1008130"> </a><code><code>attributes</code> </code></dt>
<dd><a name="1008134"> </a>The record's attributes. See <a href="DataAndResourceManager.html#1008189">"Record Attribute Constants."</a></dd>

<dt><a name="1008137"> </a><code><code>uniqueID</code> </code></dt>
<dd><a name="1008139"> </a>The unique identifier for the record. </dd>

</dl>

<h2 class="haH2">
  <a name="1008142"> </a>Data Manager Constants <a href="#1008042"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1008143"> </a>Category Constants <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1008144"> </a>The following constants are used to specify information about categories:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1008147"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Constant</span></b></p>
    </th>
    <th><p class="tt"><a name="1008149"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1008151"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008154"> </a><code>dmAllCategories</code> </p>
    </td>
    <td><p class="tt"><a name="1008156"> </a>0xFF</p>
    </td>
    <td><p class="tt"><a name="1008158"> </a>A mask used to represent all categories. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008161"> </a><code>dmCategoryLength</code> </p>
    </td>
    <td><p class="tt"><a name="1008163"> </a>16</p>
    </td>
    <td><p class="tt"><a name="1008165"> </a>The length of a category name. Currently, this is 16 bytes, which includes the null terminator. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008168"> </a><code>dmRecAttrCategoryMask</code> </p>
    </td>
    <td><p class="tt"><a name="1008170"> </a>0x0F</p>
    </td>
    <td><p class="tt"><a name="1008172"> </a>A mask used to retrieve the category information from the record's attributes field.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008175"> </a><code>dmRecNumCategories</code> </p>
    </td>
    <td><p class="tt"><a name="1008177"> </a>16</p>
    </td>
    <td><p class="tt"><a name="1008179"> </a>The number of categories allowed. Currently, this is 16, which includes the "Unfiled" category. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008182"> </a><code>dmUnfiledCategory</code> </p>
    </td>
    <td><p class="tt"><a name="1008184"> </a>0</p>
    </td>
    <td><p class="tt"><a name="1008186"> </a>A mask used to indicate the Unfiled category.</p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1008189"> </a>Record Attribute Constants <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1008190"> </a>The following constants specify a database record's attributes. </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1008193"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1008195"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1008197"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008200"> </a><code>dmMaxRecordIndex</code> </p>
    </td>
    <td><p class="tt"><a name="1008202"> </a>0xFFFF</p>
    </td>
    <td><p class="tt"><a name="1008204"> </a>Indicates the highest record index allowed.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008207"> </a><code>dmAllRecAttrs</code> </p>
    </td>
    <td><p class="tt"><a name="1008209"> </a>0xF0</p>
    </td>
    <td><p class="tt"><a name="1008211"> </a>A mask used to specify all record attributes. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008214"> </a><code>dmRecAttrBusy</code> </p>
    </td>
    <td><p class="tt"><a name="1008216"> </a>0x20</p>
    </td>
    <td><p class="tt"><a name="1008218"> </a>Busy (the application has locked access to this record). A call to <a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a> fails on a record that has this bit set, otherwise it sets this bit. Call <a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a> to release the record and clear this bit. The <a href="DataAndResourceManager.html#1011610"><code>DmSetRecordInfo()</code></a> function cannot be used to alter the state of <code>dmRecAttrBusy</code>.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008230"> </a><code>dmRecAttrDelete</code> </p>
    </td>
    <td><p class="tt"><a name="1008232"> </a>0x80</p>
    </td>
    <td><p class="tt"><a name="1008234"> </a>Deleted</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008237"> </a><code>dmRecAttrDirty</code> </p>
    </td>
    <td><p class="tt"><a name="1008239"> </a>0x40</p>
    </td>
    <td><p class="tt"><a name="1008241"> </a>Dirty (has been modified since last sync)</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008244"> </a><code>dmRecAttrSecret</code> </p>
    </td>
    <td><p class="tt"><a name="1008246"> </a>0x10</p>
    </td>
    <td><p class="tt"><a name="1008248"> </a>Private</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008251"> </a><code>dmSysOnlyRecAttrs</code> </p>
    </td>
    <td><p class="tt"><a name="1008253"> </a>0x20</p>
    </td>
    <td><p class="tt"><a name="1008255"> </a>A mask used to specify record attributes that only the system can change. (In other words, the busy attribute.)</p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1008258"> </a>Database Attribute Constants <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1008259"> </a>The following constants define a database's attributes:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1008262"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1008264"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008267"> </a><code>dmAllHdrAttrs</code> </p>
    </td>
    <td><p class="tt"><a name="1008269"> </a>A mask used to specify all header attributes. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008272"> </a><code>dmHdrAttrAppInfoDirty</code> </p>
    </td>
    <td><p class="tt"><a name="1008274"> </a>The application info block is dirty (has been modified since the last sync). </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008277"> </a><code>dmHdrAttrBackup</code> </p>
    </td>
    <td><p class="tt"><a name="1008279"> </a>The database should be backed up to the desktop computer if no application-specific conduit is available. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008282"> </a><code>dmHdrAttrBundle</code> </p>
    </td>
    <td><p class="tt"><a name="1008284"> </a>The database is bundled with its application during a beam. That is, if the user chooses to beam the application from the Launcher, the Launcher beams this database along with the application's resource database and overlay database. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008286"> </a></p>
    </td>
    <td><p class="tt"><a name="1008288"> </a>This attribute applies to Palm OS<sup>&#174;</sup> 4.0 and higher. Note that overlay databases are automatically beamed with the application database on Palm OS 4.0 and higher. You do not need to set this bit in overlay databases. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008291"> </a><code>dmHdrAttrCopyPrevention</code> </p>
    </td>
    <td><p class="tt"><a name="1008293"> </a>Prevents the database from being copied by methods such as IR beaming.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008296"> </a><code>dmHdrAttrHidden</code> </p>
    </td>
    <td><p class="tt"><a name="1008298"> </a>This database should be hidden from view. For example, this attribute is set to hide some applications in the launcher's main view. You can set it on record databases to have the launcher disregard the database's records when showing a count of records.</p>
<p class="tt"><a name="1008299"> </a></p>
<p class="tt"><a name="1008303"> </a>This attribute applies to Palm OS version 3.2 and higher. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008306"> </a><code>dmHdrAttrLaunchableData</code> </p>
    </td>
    <td><p class="tt"><a name="1008308"> </a>This database is a data database but it can be "launched" from the launcher. For example, this attribute is set in Palm Query Applications (PQAs) launched by the Web Clipping Application Viewer application. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008311"> </a><code>dmHdrAttrOpen</code> </p>
    </td>
    <td><p class="tt"><a name="1008313"> </a>The database is open.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008316"> </a><code>dmHdrAttrOKToInstallNewer</code> </p>
    </td>
    <td><p class="tt"><a name="1008318"> </a>The backup conduit can install a newer version of this database with a different name if the current database is open. This mechanism is used to update the Graffiti<sup>&#174;</sup> and Graffiti 2 Shortcuts databases, for example. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008321"> </a><code>dmHdrAttrReadOnly</code> </p>
    </td>
    <td><p class="tt"><a name="1008323"> </a>The database is a read-only database.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008325"> </a><code>dmHdrAttrRecyclable</code> </p>
    </td>
    <td><p class="tt"><a name="1008327"> </a>The database is recyclable. Recyclable databases are deleted when they are closed or upon a system reset. </p>
<p class="tt"><a name="1008328"> </a></p>
<p class="tt"><a name="1008329"> </a>This attribute applies to Palm OS 4.0 and higher. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008332"> </a><code>dmHdrAttrResDB</code> </p>
    </td>
    <td><p class="tt"><a name="1008334"> </a>The database is a resource database.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008337"> </a><code>dmHdrAttrResetAfterInstall</code> </p>
    </td>
    <td><p class="tt"><a name="1008339"> </a>The device must be reset after this database is installed. That is, the HotSync<sup>&#174;</sup> application forces a reset after installing this database. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008342"> </a><code>dmHdrAttrStream</code> </p>
    </td>
    <td><p class="tt"><a name="1008344"> </a>The database is a file stream.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008347"> </a><code>dmSysOnlyHdrAttrs</code> </p>
    </td>
    <td><p class="tt"><a name="1008349"> </a>A mask specifying the attributes that only the system can change (open and resource database).</p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1008351"> </a>Error Codes <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1008353"> </a>The following constants define error codes that are returned by the data manager and resource manager functions. Several functions return a failure value such as <code>NULL</code> or 0 instead of an error code. In many cases, you can call <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> upon receiving this value and receive a more descriptive error code. </p>

<p><a name="1008357"> </a>Also, note that on releases prior to Palm OS release 3.5, many data manager functions display a fatal error message using the <a href="ErrorManager.html#1027916"><code>ErrFatalDisplayIf()</code></a> macro if certain error conditions are true. Because the Palm OS ROMs are usually shipped with error checking set to partial, you receive the fatal error message. If a ROM is built with error checking set to none, the function returns one of the error codes listed here. (Note that Palm<sup>&#8482;</sup> has never released a ROM with error checking set to none and has no plans to do so.)</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1008363"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1008365"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008368"> </a><code>dmErrAlreadyExists</code> </p>
    </td>
    <td><p class="tt"><a name="1008370"> </a>Another database with the same name already exists in RAM store.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008372"> </a><code>dmErrAlreadyOpenForWrites</code> </p>
    </td>
    <td><p class="tt"><a name="1008374"> </a>The database is already open with write access.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008377"> </a><code>dmErrCantFind</code> </p>
    </td>
    <td><p class="tt"><a name="1008379"> </a>The specified resource can't be found.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008382"> </a><code>dmErrCantOpen</code> </p>
    </td>
    <td><p class="tt"><a name="1008384"> </a>The database cannot be opened.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008387"> </a><code>dmErrCorruptDatabase</code> </p>
    </td>
    <td><p class="tt"><a name="1008389"> </a>The database is corrupted.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008392"> </a><code>dmErrDatabaseOpen</code> </p>
    </td>
    <td><p class="tt"><a name="1008394"> </a>The function cannot be performed on an open database, and the database is open. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008398"> </a><code>dmErrDatabaseNotProtected</code> </p>
    </td>
    <td><p class="tt"><a name="1008403"> </a><a href="DataAndResourceManager.html#1009055"><code>DmDatabaseProtect()</code></a> failed to protect the specified database. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008406"> </a><code>dmErrDatabaseProtected</code></p>
    </td>
    <td><p class="tt"><a name="1008408"> </a>The database is marked as protected.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008411"> </a><code>dmErrIndexOutOfRange</code> </p>
    </td>
    <td><p class="tt"><a name="1008413"> </a>The specified index is out of range.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008416"> </a><code>dmErrInvalidDatabaseName</code> </p>
    </td>
    <td><p class="tt"><a name="1008418"> </a>The name you've specified for the database is invalid.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008421"> </a><code>dmErrInvalidParam</code> </p>
    </td>
    <td><p class="tt"><a name="1008423"> </a>The function received an invalid parameter.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008426"> </a><code>dmErrMemError</code> </p>
    </td>
    <td><p class="tt"><a name="1008428"> </a>A memory error occurred.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008430"> </a><code>dmErrNoOpenDatabase</code> </p>
    </td>
    <td><p class="tt"><a name="1008432"> </a>The function is to search all open databases, but there are none. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008435"> </a><code>dmErrNotRecordDB</code> </p>
    </td>
    <td><p class="tt"><a name="1008437"> </a>You've attempted to perform a record function on a resource database. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008439"> </a><code>dmErrNotResourceDB</code> </p>
    </td>
    <td><p class="tt"><a name="1008441"> </a>You've attempted to perform a resource manager function on a record database. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008444"> </a><code>dmErrNotValidRecord</code> </p>
    </td>
    <td><p class="tt"><a name="1008446"> </a>The record handle is invalid.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008448"> </a><code>dmErrOpenedByAnotherTask</code> </p>
    </td>
    <td><p class="tt"><a name="1008450"> </a>You've attempted to open a database that another task already has open. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008453"> </a><code>dmErrReadOnly</code> </p>
    </td>
    <td><p class="tt"><a name="1008455"> </a>You've attempted to write to or modify a database that is in read-only mode.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008459"> </a><code>dmErrRecordArchived</code> </p>
    </td>
    <td><p class="tt"><a name="1008461"> </a>The function requires that the record not be archived, but it is. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008463"> </a><code>dmErrRecordBusy</code> </p>
    </td>
    <td><p class="tt"><a name="1008465"> </a>The function requires that the record not be busy, but it is.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008468"> </a><code>dmErrRecordDeleted</code> </p>
    </td>
    <td><p class="tt"><a name="1008470"> </a>The record has been deleted.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008473"> </a><code>dmErrRecordInWrongCard</code> </p>
    </td>
    <td><p class="tt"><a name="1008475"> </a>You've attempted to attach a record to a database when the record and database reside on different memory cards. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008477"> </a><code>dmErrResourceNotFound</code> </p>
    </td>
    <td><p class="tt"><a name="1008479"> </a>The resource can't be found.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008482"> </a><code>dmErrROMBased</code> </p>
    </td>
    <td><p class="tt"><a name="1008484"> </a>You've attempted to delete or modify a ROM-based database.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008487"> </a><code>dmErrSeekFailed</code></p>
    </td>
    <td><p class="tt"><a name="1008489"> </a>The operation of seeking the next record in the category failed. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008492"> </a><code>dmErrUniqueIDNotFound</code> </p>
    </td>
    <td><p class="tt"><a name="1008494"> </a>A record with the specified unique ID can't be found.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008497"> </a><code>dmErrWriteOutOfBounds</code> </p>
    </td>
    <td><p class="tt"><a name="1008499"> </a>A write operation exceeded the bounds of the record. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008502"> </a><code>memErrCardNotPresent</code> </p>
    </td>
    <td><p class="tt"><a name="1008504"> </a>The specified card can't be found.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008507"> </a><code>memErrChunkLocked</code> </p>
    </td>
    <td><p class="tt"><a name="1008509"> </a>The associated memory chunk is locked. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008512"> </a><code>memErrInvalidParam</code> </p>
<p class="tt"><a name="1008514"> </a><code>memErrNotEnoughSpace</code> </p>
    </td>
    <td><p class="tt"><a name="1008516"> </a>A memory error occurred.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008519"> </a><code>memErrInvalidStoreHeader</code></p>
<p class="tt"><a name="1008521"> </a><code>memErrRAMOnlyCard</code> </p>
    </td>
    <td><p class="tt"><a name="1008523"> </a>The specified card has no storage RAM.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008528"> </a><code>omErrBaseRequiresOverlay</code> </p>
    </td>
    <td><p class="tt"><a name="1008530"> </a>An attempt was made to open a stripped resource database, but no associated overlay could be found. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008533"> </a><code>omErrUnknownLocale</code> </p>
    </td>
    <td><p class="tt"><a name="1008535"> </a>An attempt was made to open a resource database with overlays using an unknown locale. </p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1008538"> </a>Open Mode Constants <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1008539"> </a>The following constants define the mode in which a database can be opened. You pass one or more of these as a parameter to <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a>, <a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a>, or <a href="DataAndResourceManager.html#1010783"><code>DmOpenDBNoOverlay()</code></a>: </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1008553"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1008555"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008558"> </a><code>dmModeReadWrite</code> </p>
    </td>
    <td><p class="tt"><a name="1008560"> </a>Read-write access.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008563"> </a><code>dmModeReadOnly</code> </p>
    </td>
    <td><p class="tt"><a name="1008565"> </a>Read-only access.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008568"> </a><code>dmModeWrite</code> </p>
    </td>
    <td><p class="tt"><a name="1008570"> </a>Write-only access. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008573"> </a><code>dmModeLeaveOpen</code> </p>
    </td>
    <td><p class="tt"><a name="1008575"> </a>Leave database open even after application quits.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008578"> </a><code>dmModeExclusive</code> </p>
    </td>
    <td><p class="tt"><a name="1008580"> </a>Don't let anyone else open this database.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008583"> </a><code>dmModeShowSecret</code> </p>
    </td>
    <td><p class="tt"><a name="1008585"> </a>Show records marked private. </p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1008587"> </a>Miscellaneous Constants <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1008588"> </a>The following additional constants are used in conjunction with the Data Manager.</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1008591"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1008593"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1008595"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1008598"> </a><code>dmDBNameLength</code></p>
    </td>
    <td><p class="tt"><a name="1008600"> </a>32</p>
    </td>
    <td><p class="tt"><a name="1008602"> </a>Maximum length of a database name, including the null terminator. Database names must use only 7-bit ASCII characters (0x20 through 0x7E). </p>
    </td>
  </tr>
</table>

</div>


<h2 class="haH2">
  <a name="1008605"> </a>Data Manager Functions <a href="#1008042"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1008608"> </a>DmArchiveRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008610"> </a>Purpose 
</h4>

<p><a name="1008611"> </a>Mark a record as archived by leaving the record's chunk intact and setting the delete bit for the next sync.</p>
<h4>
  <a name="1008613"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008614"> </a></code><h4>
  <a name="1008615"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008617"></a>Err DmArchiveRecord (
   DmOpenRef dbP,
   UInt16 index
)
</pre>
<h4>
  <a name="1008618"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008619"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1008620"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1008621"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1008622"> </a>Which record to archive.</dd>

</dl>
<h4>
  <a name="1008623"> </a>Returns 
</h4>

<p><a name="1008624"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1008628"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1008632"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a>
  <li><a name="1008636"> </a><a href="DataAndResourceManager.html#1008459"><code>dmErrRecordArchived</code></a>
  <li><a name="1008640"> </a><a href="DataAndResourceManager.html#1008468"><code>dmErrRecordDeleted</code></a>
  <li><a name="1008644"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
</ul>

<p><a name="1008645"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1008646"> </a>Comments 
</h4>

<p><a name="1008647"> </a>When a record is archived, the deleted bit is set but the chunk is not freed and the local ID is preserved. This way, the next time the user synchronizes with the desktop system, the desktop can save the record data on the PC before it permanently removes the record entry and data from the Palm Powered<sup>&#8482;</sup> device. </p>

<p><a name="1008648"> </a>Based on the assumption that a call to <code>DmArchiveRecord</code> indicates that you are finished with the record and aren't going to refer to it again, this function sets the chunk's lock count to zero.</p>
<h4>
  <a name="1047844"> </a>Compatibility 
</h4>

<p><a name="1043778"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1008649"> </a>See Also 
</h4>

<p><a name="1008659"> </a><a href="DataAndResourceManager.html#1011116"><code>DmRemoveRecord()</code></a>, <a href="DataAndResourceManager.html#1009348"><code>DmDetachRecord()</code></a>, <a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a>, <a href="DataAndResourceManager.html#1009291"><code>DmDeleteRecord()</code></a></p>

<h3 class="hbH3">
  <a name="1008665"> </a>DmAttachRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008667"> </a>Purpose 
</h4>

<p><a name="1008668"> </a>Attach an existing chunk ID handle to a database as a record. </p>
<h4>
  <a name="1008669"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008670"> </a></code><h4>
  <a name="1008671"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008673"></a>Err DmAttachRecord (
   DmOpenRef dbP,
   UInt16 *atP,
   MemHandle newH,
   MemHandle *oldHP
)
</pre>
<h4>
  <a name="1008674"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008675"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1008676"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1008677"> </a><code>&harr;  <i><code>atP</code></i></code></dt>
<dd><a name="1008678"> </a>Pointer to the index where the new record should be placed. Specify the value <code>dmMaxRecordIndex</code> to add the record to the end of the database. </dd>

<dt><a name="1008680"> </a><code>&rarr;  <i><code>newH</code></i></code></dt>
<dd><a name="1008681"> </a>Handle of the new record.</dd>

<dt><a name="1008682"> </a><code>&harr;  <i><code>oldHP</code></i></code></dt>
<dd><a name="1008683"> </a>If non-<code>NULL</code> upon entry, indicates that the record at <code>*atP</code> should be replaced. Upon return, contains the handle to the replaced record.</dd>

</dl>
<h4>
  <a name="1008684"> </a>Returns 
</h4>

<p><a name="1008685"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1008689"> </a><a href="DataAndResourceManager.html#1008426"><code>dmErrMemError</code></a> 
  <li><a name="1008693"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a> 
  <li><a name="1008697"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a> 
  <li><a name="1008701"> </a><a href="DataAndResourceManager.html#1008514"><code>memErrNotEnoughSpace</code></a> 
  <li><a name="1008705"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a> 
  <li><a name="1008709"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a> 
  <li><a name="1008713"> </a><a href="DataAndResourceManager.html#1008473"><code>dmErrRecordInWrongCard</code></a> 
  <li><a name="1008717"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> 
</ul>

<p><a name="1008718"> </a>Some releases may display a fatal error message instead of returning some of these error codes. </p>
<h4>
  <a name="1008719"> </a>Comments 
</h4>

<p><a name="1008720"> </a>Given the handle of an existing chunk, this routine makes that chunk a new record in a database and sets the dirty bit. The parameter <code>atP</code> points to an index variable. If <code>oldHP</code> is <code>NULL</code>, the new record is inserted at index *<code>atP</code> and all record indices that follow are shifted down. If *<code>atP</code> is greater than the number of records currently in the database, the new record is appended to the end and its index is returned in *<code>atP</code>. If <code>oldHP</code> is not <code>NULL</code>, the new record replaces an existing record at index *<code>atP</code> and the handle of the old record is returned in *<code>oldHP</code> so that the application can free it or attach it to another database.</p>

<p><a name="1008722"> </a>This function is useful for cutting and pasting between databases.</p>
<h4>
  <a name="1047763"> </a>Compatibility 
</h4>

<p><a name="1043813"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1008723"> </a>See Also 
</h4>

<p><a name="1008733"> </a><a href="DataAndResourceManager.html#1009348"><code>DmDetachRecord()</code></a>, <a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a>, <a href="DataAndResourceManager.html#1010311"><code>DmNewHandle()</code></a>, <a href="DataAndResourceManager.html#1009628"><code>DmFindSortPosition()</code></a> </p>

<h3 class="hbH3">
  <a name="1008739"> </a>DmAttachResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008741"> </a>Purpose 
</h4>

<p><a name="1008742"> </a>Attach an existing chunk ID to a resource database as a new resource.</p>
<h4>
  <a name="1008743"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008744"> </a></code><h4>
  <a name="1008745"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008747"></a>Err DmAttachResource (
   DmOpenRef dbP,
   MemHandle newH,
   DmResType resType,
   DmResID resID
)
</pre>
<h4>
  <a name="1008748"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008749"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1008750"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1008751"> </a><code>&rarr;  <i><code>newH</code></i></code></dt>
<dd><a name="1008752"> </a>Handle of new resource's data.</dd>

<dt><a name="1008753"> </a><code>&rarr;  <i><code>resType</code></i></code></dt>
<dd><a name="1008754"> </a>Type of the new resource.</dd>

<dt><a name="1008755"> </a><code>&rarr;  <i><code>resID</code></i></code></dt>
<dd><a name="1008756"> </a>ID of the new resource.</dd>

</dl>
<h4>
  <a name="1008757"> </a>Returns 
</h4>

<p><a name="1008758"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1008762"> </a><a href="DataAndResourceManager.html#1008426"><code>dmErrMemError</code></a> 
  <li><a name="1008766"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a> 
  <li><a name="1008770"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a> 
  <li><a name="1008774"> </a><a href="DataAndResourceManager.html#1008514"><code>memErrNotEnoughSpace</code></a> 
  <li><a name="1008778"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a> 
  <li><a name="1008782"> </a><a href="DataAndResourceManager.html#1008473"><code>dmErrRecordInWrongCard</code></a> 
</ul>

<p><a name="1008783"> </a>Some releases may display a fatal error message instead of returning some of these error codes. All releases may display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1008784"> </a>Comments 
</h4>

<p><a name="1008785"> </a>Given the handle of an existing chunk with resource data in it, this routine makes that chunk a new resource in a resource database. The new resource will have the given type and ID. </p>
<h4>
  <a name="1008786"> </a>See Also 
</h4>

<p><a name="1008793"> </a><a href="DataAndResourceManager.html#1009409"><code>DmDetachResource()</code></a>, <a href="DataAndResourceManager.html#1011171"><code>DmRemoveResource()</code></a>, <a href="DataAndResourceManager.html#1010311"><code>DmNewHandle()</code></a>, <a href="DataAndResourceManager.html#1010379"><code>DmNewResource()</code></a></p>

<h3 class="hbH3">
  <a name="1008802"> </a>DmCloseDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008804"> </a>Purpose 
</h4>

<p><a name="1008806"> </a>Close a database.</p>
<h4>
  <a name="1008807"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008808"> </a></code><h4>
  <a name="1008809"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008811"></a>Err DmCloseDatabase (
   DmOpenRef dbP
)
</pre>
<h4>
  <a name="1008812"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008813"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1008814"> </a>Database access pointer.</dd>

</dl>
<h4>
  <a name="1008815"> </a>Returns 
</h4>

<p><a name="1008819"> </a>Returns <code>errNone</code> if no error, or <a href="DataAndResourceManager.html#1008421"><code>dmErrInvalidParam</code></a> if an error occurs. Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1008820"> </a>Comments 
</h4>

<p><a name="1008821"> </a>This routine doesn't unlock any records that were left locked. Records and resources should not be left locked. If a record/resource is left locked, you should not use its reference because the record can disappear during a HotSync operation or if the database is deleted by the user. To prevent the database from being deleted, you can use <a href="DataAndResourceManager.html#1009055"><code>DmDatabaseProtect()</code></a> before closing. </p>

<p><a name="1008826"> </a>If there is an overlay associated with the database passed in, <code>DmCloseDatabase</code> closes the overlay as well. </p>

<p><a name="1008828"> </a>If the database has the recyclable bit set (<code>dmHdrAttrRecyclable</code>), <code>DmCloseDatabase</code> calls <a href="DataAndResourceManager.html#1009196"><code>DmDeleteDatabase()</code></a> to delete it. </p>
<h4>
  <a name="1008833"> </a>Compatibility 
</h4>

<p><a name="1008834"> </a>Starting with Palm OS 2.0, <code>DmCloseDatabase</code> updates the database's modification date. </p>
<ul type="disc">
  <li><a name="1008835"> </a>On Palm OS 2.0, the modification date is updated if the database was opened with write access. 
  <li><a name="1008836"> </a>On Palm OS 3.0 and higher, the modification date is updated only if a change has been made and the database was opened with write access. Changes that trigger an update include adding, deleting, archiving, rearranging, or resizing records, setting a record's dirty bit in <a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a>, rearranging or deleting categories, or updating the database header fields using <a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a>. 
</ul>

<p><a name="1008843"> </a>Under Palm OS 1.0, the modification date was never updated. </p>

<p><a name="1008844"> </a>If you need to ensure that the modification date is updated the same way regardless of the operating system version, use <a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a> to set the modification date explicitly. </p>

<p><a name="1043916"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1008848"> </a>See Also 
</h4>

<p><a name="1008855"> </a><a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a>, <a href="DataAndResourceManager.html#1009196"><code>DmDeleteDatabase()</code></a>, <a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a> </p>

<h3 class="hbH3">
  <a name="1008861"> </a>DmCreateDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008863"> </a>Purpose 
</h4>

<p><a name="1008864"> </a>Create a new database on the specified card with the given name, creator, and type.</p>
<h4>
  <a name="1008866"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008867"> </a></code><h4>
  <a name="1008868"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008870"></a>Err DmCreateDatabase (
   UInt16 cardNo,
   const Char *nameP,
   UInt32 creator,
   UInt32 type,
   Boolean resDB
)
</pre>
<h4>
  <a name="1008871"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008872"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1008873"> </a>The card number to create the database on.</dd>

<dt><a name="1008874"> </a><code>&rarr;  <i><code>nameP</code></i></code></dt>
<dd><a name="1008875"> </a>Name of new database, up to 32 ASCII bytes long, including the null terminator (as specified by <code>dmDBNameLength</code>). Database names must use only 7-bit ASCII characters (0x20 through 0x7E). </dd>

<dt><a name="1008877"> </a><code>&rarr;  <i><code>creator</code></i></code></dt>
<dd><a name="1008878"> </a>Creator of the database. </dd>

<dt><a name="1008879"> </a><code>&rarr;  <i><code>type</code></i></code></dt>
<dd><a name="1008880"> </a>Type of the database.</dd>

<dt><a name="1008881"> </a><code>&rarr;  <i><code>resDB</code></i></code></dt>
<dd><a name="1008882"> </a>If <code>true</code>, create a resource database.</dd>

</dl>
<h4>
  <a name="1008883"> </a>Returns 
</h4>

<p><a name="1008884"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1008888"> </a><a href="DataAndResourceManager.html#1008416"><code>dmErrInvalidDatabaseName</code></a> 
  <li><a name="1008892"> </a><a href="DataAndResourceManager.html#1008368"><code>dmErrAlreadyExists</code></a> 
  <li><a name="1008896"> </a><a href="DataAndResourceManager.html#1008502"><code>memErrCardNotPresent</code></a> 
  <li><a name="1008900"> </a><a href="DataAndResourceManager.html#1008426"><code>dmErrMemError</code></a> 
  <li><a name="1008904"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a> 
  <li><a name="1008908"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a> 
  <li><a name="1008912"> </a><a href="DataAndResourceManager.html#1008519"><code>memErrInvalidStoreHeader</code></a> 
  <li><a name="1008916"> </a><a href="DataAndResourceManager.html#1008514"><code>memErrNotEnoughSpace</code></a> 
  <li><a name="1008920"> </a><a href="DataAndResourceManager.html#1008521"><code>memErrRAMOnlyCard</code></a> 
</ul>

<p><a name="1008921"> </a>May display a fatal error message if the master database list cannot be found. </p>
<h4>
  <a name="1008922"> </a>Comments 
</h4>

<p><a name="1008923"> </a>Call this routine to create a new database on a specific card. If another database with the same name already exists in RAM store, this routine returns a <a href="DataAndResourceManager.html#1008368"><code>dmErrAlreadyExists</code></a> error code. Once created, the database ID can be retrieved by calling <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>. The database can be opened using the database ID. To create a resource database instead of a record-based database, set the <code>resDB</code> Boolean to <code>true</code>.</p>

<p><a name="1008931"> </a>After you create a database, it's recommended that you call <a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a> to set the version number. Databases default to version 0 if the version isn't explicitly set. </p>
<h4>
  <a name="1008935"> </a>See Also 
</h4>

<p><a name="1008942"> </a><a href="DataAndResourceManager.html#1008948"><code>DmCreateDatabaseFromImage()</code></a>, <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a>, <a href="DataAndResourceManager.html#1009196"><code>DmDeleteDatabase()</code></a></p>

<h3 class="hbH3">
  <a name="1008948"> </a>DmCreateDatabaseFromImage Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008950"> </a>Purpose 
</h4>

<p><a name="1008951"> </a>Create an entire database from a single resource that contains an image of the database.</p>
<h4>
  <a name="1008952"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008953"> </a></code><h4>
  <a name="1008954"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008955"></a>Err DmCreateDatabaseFromImage (
   MemPtr bufferP
)
</pre>
<h4>
  <a name="1008956"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008957"> </a><code>&rarr;  <i><code>bufferP</code></i></code></dt>
<dd><a name="1008958"> </a>Pointer to locked resource containing database image.</dd>

</dl>
<h4>
  <a name="1008959"> </a>Returns 
</h4>

<p><a name="1008960"> </a>Returns <code>errNone</code> if no error. </p>
<h4>
  <a name="1008961"> </a>Comments 
</h4>

<p><a name="1008962"> </a>An image is the same as a desktop file representation of a prc or pdb file. </p>

<p><a name="1008963"> </a>This function is intended for applications in the ROM to install default databases after a hard reset. RAM-based applications that want to install a default database should install a pdb file separately to save storage heap space. </p>
<h4>
  <a name="1008964"> </a>See Also 
</h4>

<p><a name="1008971"> </a><a href="DataAndResourceManager.html#1008861"><code>DmCreateDatabase()</code></a>, <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a></p>

<h3 class="hbH3">
  <a name="1008974"> </a>DmDatabaseInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1008976"> </a>Purpose 
</h4>

<p><a name="1008977"> </a>Retrieve information about a database.</p>
<h4>
  <a name="1008978"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1008979"> </a></code><h4>
  <a name="1008980"> </a>Prototype 
</h4>
<pre class="proto"><a name="1008982"></a>Err DmDatabaseInfo (
   UInt16 cardNo,
   LocalID dbID,
   Char *nameP,
   UInt16 *attributesP,
   UInt16 *versionP,
   UInt32 *crDateP,
   UInt32 *modDateP,
   UInt32 *bckUpDateP,
   UInt32 *modNumP,
   LocalID *appInfoIDP,
   LocalID *sortInfoIDP,
   UInt32 *typeP,
   UInt32 *creatorP
)
</pre>
<h4>
  <a name="1008983"> </a>Parameters 
</h4>

<dl>
<dt><a name="1008984"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1008985"> </a>Number of the card the database resides on.</dd>

<dt><a name="1008986"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1008987"> </a>Database ID of the database.</dd>

<dt><a name="1008988"> </a><code>&larr;  <i><code>nameP</code></i></code></dt>
<dd><a name="1008989"> </a>The database's name. Pass a pointer to 32-byte character array for this parameter, or <code>NULL</code> if you don't care about the name.</dd>

<dt><a name="1008990"> </a><code>&larr;  <i><code>attributesP</code></i></code></dt>
<dd><a name="1008993"> </a>The database's attribute flags. The section <a href="DataAndResourceManager.html#1008258">"Database Attribute Constants"</a> lists constants you can use to query the values returned in this parameter. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1008995"> </a><code>&larr;  <i><code>versionP</code></i></code></dt>
<dd><a name="1008996"> </a>The application-specific version number. The default version number is 0. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1008997"> </a><code>&larr;  <i><code>crDateP</code></i></code></dt>
<dd><a name="1008998"> </a>The date the database was created, expressed as the number of seconds since the first instant of Jan. 1, 1904. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1008999"> </a><code>&larr;  <i><code>modDateP</code></i></code></dt>
<dd><a name="1009000"> </a>The date the database was last modified, expressed as the number of seconds since the first instant of Jan. 1, 1904. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009001"> </a><code>&larr;  <i><code>bckUpDateP</code></i></code></dt>
<dd><a name="1009002"> </a>The date the database was backed up, expressed as the number of seconds since the first instant of Jan. 1, 1904. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009003"> </a><code>&larr;  <i><code>modNumP</code></i></code></dt>
<dd><a name="1009004"> </a>The modification number, which is incremented every time a record in the database is added, modified, or deleted. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009005"> </a><code>&larr;  <i><code>appInfoIDP</code></i></code></dt>
<dd><a name="1009006"> </a>The local ID of the application info block, or <code>NULL</code>. The application info block is an optional field that the database may use to store application-specific information about the database. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009007"> </a><code>&larr;  <i><code>sortInfoIDP</code></i></code></dt>
<dd><a name="1009008"> </a>The local ID of the database's sort table. This is an optional field in the database header. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009009"> </a><code>&larr;  <i><code>typeP</code></i></code></dt>
<dd><a name="1009010"> </a>The database's type, specified when it is created. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009011"> </a><code>&larr;  <i><code>creatorP</code></i></code></dt>
<dd><a name="1009012"> </a>The database's creator, specified when it is created. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

</dl>
<h4>
  <a name="1009013"> </a>Returns 
</h4>

<p><a name="1009017"> </a>Returns <code>errNone</code> if no error, or <a href="DataAndResourceManager.html#1008421"><code>dmErrInvalidParam</code></a> if an error occurs.</p>
<h4>
  <a name="1009018"> </a>Compatibility 
</h4>

<p><a name="1009019"> </a>Updating of the modification date differs based on which version of the OS your application is running on. </p>
<ul type="disc">
  <li><a name="1009020"> </a>Under Palm OS 1.0, the modification date is never updated. 
  <li><a name="1009021"> </a>Under Palm OS 2.0, the modification date is updated every time a database opened with write access is closed. 
  <li><a name="1009022"> </a>Beginning with Palm OS 3.0, the modification date is updated only if a change has been made to the database opened with write access. (The update still occurs upon closing the database.) Changes that trigger an update include adding, deleting, archiving, rearranging, or resizing records, setting a record's dirty bit in <a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a>, rearranging or deleting categories, or updating the database header fields using <a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a>. 
</ul>

<p><a name="1009029"> </a>If you need to ensure that the modification date is updated the same way regardless of the operating system version, use <a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a> to set the modification date explicitly. </p>
<h4>
  <a name="1009033"> </a>See Also 
</h4>

<p><a name="1009040"> </a><a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1009109"><code>DmDatabaseSize()</code></a>, <a href="DataAndResourceManager.html#1010749"><code>DmOpenDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>, <a href="DataAndResourceManager.html#1009928"><code>DmGetNextDatabaseByTypeCreator()</code></a>, <a href="DateAndTimeManager.html#1098565"><code>TimSecondsToDateTime()</code></a> </p>

<h3 class="hbH3">
  <a name="1009055"> </a>DmDatabaseProtect Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009057"> </a>Purpose 
</h4>

<p><a name="1009059"> </a>Increment or decrement the database's protection count. </p>
<h4>
  <a name="1009060"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009061"> </a></code><h4>
  <a name="1009062"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009064"></a>Err DmDatabaseProtect (
   UInt16 cardNo,
   LocalID dbID,
   Boolean protect
)
</pre>
<h4>
  <a name="1009065"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009066"> </a><code>&rarr;  <i><code>cardNo</code> </i></code></dt>
<dd><a name="1009067"> </a>Card number of database to protect/unprotect.</dd>

<dt><a name="1009068"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1009069"> </a>Local ID of database to protect/unprotect.</dd>

<dt><a name="1009070"> </a><code>&rarr;  <i><code>protect</code></i></code></dt>
<dd><a name="1009071"> </a>If <code>true</code>, <code>protect</code> count will be incremented. If <code>false</code>, <code>protect</code> count will be decremented.</dd>

</dl>
<h4>
  <a name="1009072"> </a>Returns 
</h4>

<p><a name="1009073"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1009077"> </a><a href="DataAndResourceManager.html#1008502"><code>memErrCardNotPresent</code></a>
  <li><a name="1009081"> </a><a href="DataAndResourceManager.html#1008482"><code>dmErrROMBased</code></a>
  <li><a name="1009085"> </a><a href="DataAndResourceManager.html#1008377"><code>dmErrCantFind</code></a>
  <li><a name="1009089"> </a><a href="DataAndResourceManager.html#1008514"><code>memErrNotEnoughSpace</code></a>
  <li><a name="1009093"> </a><a href="DataAndResourceManager.html#1008398"><code>dmErrDatabaseNotProtected</code></a>
</ul>
<h4>
  <a name="1009094"> </a>Comments 
</h4>

<p><a name="1009095"> </a>This routine can be used to prevent a database from being deleted (by passing <code>true</code> for the <code>protect</code> parameter). It increments the protect count if <code>protect</code> is <code>true</code> and decrements it if <code>protect</code> is <code>false</code>. All <code>true</code> calls should be balanced by <code>false</code> calls before the application terminates. </p>

<p><a name="1009097"> </a>Use this function if you want to keep a particular record or resource in a database locked down but don't want to keep the database open. This information is kept in the dynamic heap, so all databases are "unprotected" at system reset. </p>

<p><a name="1009098"> </a>If the database is a resource database that has an overlay associated with it for the current locale, the overlay is also protected or unprotected by this call. </p>
<h4>
  <a name="1009099"> </a>Compatibility 
</h4>

<p><a name="1009103"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. Overlay support is only available if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1009109"> </a>DmDatabaseSize Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009111"> </a>Purpose 
</h4>

<p><a name="1009112"> </a>Retrieve size information on a database.</p>
<h4>
  <a name="1009113"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009114"> </a></code><h4>
  <a name="1009115"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009117"></a>Err DmDatabaseSize (
   UInt16 cardNo,
   LocalID dbID,
   UInt32 *numRecordsP,
   UInt32 *totalBytesP,
   UInt32 *dataBytesP
)
</pre>
<h4>
  <a name="1009118"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009119"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1009120"> </a>Card number the database resides on.</dd>

<dt><a name="1009121"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1009122"> </a>Database ID of the database.</dd>

<dt><a name="1009123"> </a><code>&larr;  <i><code>numRecordsP</code></i></code></dt>
<dd><a name="1009124"> </a>The total number of records in the database. Pass <code>NULL</code> for this parameter if you don't want to retrieve it.</dd>

<dt><a name="1009125"> </a><code>&larr;  <i><code>totalBytesP</code></i></code></dt>
<dd><a name="1009126"> </a>The total number of bytes used by the database including the overhead. Pass <code>NULL</code> for this parameter if you don't want to retrieve it.</dd>

<dt><a name="1009127"> </a><code>&larr;  <i><code>dataBytesP</code></i></code></dt>
<dd><a name="1009128"> </a>The total number of bytes used to store just each record's data, not including overhead. Pass <code>NULL</code> for this parameter if you don't want to retrieve it.</dd>

</dl>
<h4>
  <a name="1048395"> </a>Returns 
</h4>

<p><a name="1048399"> </a>Returns <code>errNone</code> if no error, or <a href="DataAndResourceManager.html#1008426"><code>dmErrMemError</code></a> if an error occurs. </p>
<h4>
  <a name="1048465"> </a>Compatibility 
</h4>

<p><a name="1048469"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1048400"> </a>See Also 
</h4>

<p><a name="1009141"> </a><a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1010749"><code>DmOpenDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>, <a href="DataAndResourceManager.html#1009928"><code>DmGetNextDatabaseByTypeCreator()</code></a></p>

<h3 class="hbH3">
  <a name="1009150"> </a>DmDeleteCategory Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009152"> </a>Purpose 
</h4>

<p><a name="1009153"> </a>Delete all records in a category. The category name is not changed.</p>
<h4>
  <a name="1009154"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009155"> </a></code><h4>
  <a name="1009156"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009158"></a>Err DmDeleteCategory (
   DmOpenRef dbR,
   UInt16 categoryNum
)
</pre>
<h4>
  <a name="1009159"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009160"> </a><code>&rarr;  <i><code>dbR</code></i></code></dt>
<dd><a name="1009161"> </a>Database access pointer.</dd>

<dt><a name="1009162"> </a><code>&rarr;  <i><code>categoryNum</code></i></code></dt>
<dd><a name="1009163"> </a>Category of records to delete. Category masks such as <code>dmAllCategories</code> are invalid. </dd>

</dl>
<h4>
  <a name="1009164"> </a>Returns 
</h4>

<p><a name="1009165"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1009169"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1009173"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
</ul>

<p><a name="1009174"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1009175"> </a>Comments 
</h4>

<p><a name="1009176"> </a>This function deletes all records in a category, but does not delete the category itself (note that it deletes the record data and header info, and doesn't just set the deleted bit). For each record in the category, <code>DmDeleteCategory</code> marks the <code>delete</code> bit in the database header for the record and disposes of the record's data chunk. The record entry in the database header remains, but its <code>localChunkID</code> is set to <code>NULL</code>. </p>

<p><a name="1009178"> </a>If the category contains no records, this function does nothing and returns <code>errNone</code> to indicate success. The <code>categoryNum</code> parameter is assumed to represent a single category. If you pass a category mask to specify more than one category, this function interprets that value as a single category, finds no records to delete in that category, and returns <code>errNone</code>. </p>

<p><a name="1009182"> </a>You can use the <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a> call to obtain a category index from a given record. For example: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
DmOpenRef myDB;<a name="1009183"> </a>
UInt16 record, attr, category, total;<a name="1009184"> </a>
 <a name="1009185"> </a>
DmRecordInfo(myDB, record, &amp;attr, NULL, NULL);<a name="1009186"> </a>
category = attr &amp; dmRecAttrCategoryMask;<a name="1009187"> </a>
err = DmDeleteCategory(myDB, category);<a name="1009188"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1009189"> </a>Compatibility 
</h4>

<p><a name="1009193"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>

<p><a name="1048497"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, <code>sysErrNotAllowed</code> is returned. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>

<h3 class="hbH3">
  <a name="1009196"> </a>DmDeleteDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009198"> </a>Purpose 
</h4>

<p><a name="1009199"> </a>Delete a database and all its records.</p>
<h4>
  <a name="1009200"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009201"> </a></code><h4>
  <a name="1009202"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009204"></a>Err DmDeleteDatabase (
   UInt16 cardNo,
   LocalID dbID
)
</pre>
<h4>
  <a name="1009205"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009206"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1009207"> </a>Card number the database resides on.</dd>

<dt><a name="1009208"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1009209"> </a>Database ID.</dd>

</dl>
<h4>
  <a name="1009210"> </a>Returns 
</h4>

<p><a name="1009211"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1009215"> </a><a href="DataAndResourceManager.html#1008377"><code>dmErrCantFind</code></a> 
  <li><a name="1009219"> </a><a href="DataAndResourceManager.html#1008382"><code>dmErrCantOpen</code></a> 
  <li><a name="1009223"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a> 
  <li><a name="1009227"> </a><a href="DataAndResourceManager.html#1008392"><code>dmErrDatabaseOpen</code></a> 
  <li><a name="1009231"> </a><a href="DataAndResourceManager.html#1008406"><code>dmErrDatabaseProtected</code></a>
  <li><a name="1009235"> </a><a href="DataAndResourceManager.html#1008482"><code>dmErrROMBased</code></a> 
  <li><a name="1009239"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a> 
  <li><a name="1009243"> </a><a href="DataAndResourceManager.html#1008514"><code>memErrNotEnoughSpace</code></a> 
</ul>
<h4>
  <a name="1009244"> </a>Comments 
</h4>

<p><a name="1009245"> </a>Call this routine to delete a database. This routine deletes the database, the application info block, the sort info block, and any other overhead information that is associated with this database. After deleting the database, this function enqueues a deferred <a href="Notifications.html#1047621"><code>sysNotifyDBDeletedEvent</code></a> notification, which will be broadcast at the top of the event loop. </p>

<p><a name="1009250"> </a>If the database has an overlay associated with it, this function does <i>not</i> delete the overlay. You can delete the overlay with a separate call to <code>DmDeleteDatabase</code>. </p>

<p><a name="1009251"> </a>This routine accepts a database ID as a parameter. To determine the database ID, call either <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a> or <a href="DataAndResourceManager.html#1009742"><code>DmGetDatabase()</code></a> with a database index.</p>
<h4>
  <a name="1009261"> </a>Compatibility 
</h4>

<p><a name="1009265"> </a>The <a href="Notifications.html#1047621"><code>sysNotifyDBDeletedEvent</code></a> notification is only broadcast if the <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1009269"> </a>See Also 
</h4>

<p><a name="1009276"> </a><a href="DataAndResourceManager.html#1009291"><code>DmDeleteRecord()</code></a>, <a href="DataAndResourceManager.html#1011116"><code>DmRemoveRecord()</code></a>, <a href="DataAndResourceManager.html#1011171"><code>DmRemoveResource()</code></a>, <a href="DataAndResourceManager.html#1008861"><code>DmCreateDatabase()</code></a>, <a href="DataAndResourceManager.html#1009928"><code>DmGetNextDatabaseByTypeCreator()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a></p>

<h3 class="hbH3">
  <a name="1009291"> </a>DmDeleteRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009293"> </a>Purpose 
</h4>

<p><a name="1009294"> </a>Delete a record's chunk from a database but leave the record entry in the header and set the <code>delete</code> bit for the next sync.</p>
<h4>
  <a name="1009296"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009297"> </a></code><h4>
  <a name="1009298"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009300"></a>Err DmDeleteRecord (
   DmOpenRef dbP,
   UInt16 index
)
</pre>
<h4>
  <a name="1009301"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009302"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009303"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1009304"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1009305"> </a>Which record to delete.</dd>

</dl>
<h4>
  <a name="1009306"> </a>Returns 
</h4>

<p><a name="1009307"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1009311"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1009315"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a>
  <li><a name="1009319"> </a><a href="DataAndResourceManager.html#1008459"><code>dmErrRecordArchived</code></a>
  <li><a name="1009323"> </a><a href="DataAndResourceManager.html#1008468"><code>dmErrRecordDeleted</code></a>
  <li><a name="1009327"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
</ul>

<p><a name="1009328"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1009329"> </a>Comments 
</h4>

<p><a name="1009331"> </a>Marks the <code>delete</code> bit in the database header for the record and disposes of the record's data chunk. Does not remove the record entry from the database header, but simply sets the <code>localChunkID</code> of the record entry to <code>NULL</code>.</p>
<h4>
  <a name="1048773"> </a>Compatibility 
</h4>

<p><a name="1048777"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1009332"> </a>See Also 
</h4>

<p><a name="1009339"> </a><a href="DataAndResourceManager.html#1009348"><code>DmDetachRecord()</code></a>, <a href="DataAndResourceManager.html#1011116"><code>DmRemoveRecord()</code></a>, <a href="DataAndResourceManager.html#1008608"><code>DmArchiveRecord()</code></a>, <a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a></p>

<h3 class="hbH3">
  <a name="1009348"> </a>DmDetachRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009350"> </a>Purpose 
</h4>

<p><a name="1009351"> </a>Detach and orphan a record from a database but don't delete the record's chunk.</p>
<h4>
  <a name="1009352"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009353"> </a></code><h4>
  <a name="1009354"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009356"></a>Err DmDetachRecord (
   DmOpenRef dbP,
   UInt16 index,
   MemHandle *oldHP
)
</pre>
<h4>
  <a name="1009357"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009358"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009359"> </a><code>DmOpenRef</code> to open.</dd>

<dt><a name="1009360"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1009361"> </a>Index of the record to detach.</dd>

<dt><a name="1009362"> </a><code>&harr;  <i><code>oldHP</code></i></code></dt>
<dd><a name="1009363"> </a>Pointer to return handle of the detached record.</dd>

</dl>
<h4>
  <a name="1009364"> </a>Returns 
</h4>

<p><a name="1009365"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1009369"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1009373"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a>
  <li><a name="1009377"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a>
  <li><a name="1009381"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a>
  <li><a name="1009385"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
</ul>

<p><a name="1009386"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1009387"> </a>Comments 
</h4>

<p><a name="1009389"> </a>This routine detaches a record from a database by removing its entry from the database header and returns the handle of the record's data chunk in <code>*oldHP</code>. Unlike <a href="DataAndResourceManager.html#1009291"><code>DmDeleteRecord()</code></a>, this routine removes its entry in the database header but it does not delete the actual record.</p>
<h4>
  <a name="1048788"> </a>Compatibility 
</h4>

<p><a name="1048792"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1009393"> </a>See Also 
</h4>

<p><a name="1009400"> </a><a href="DataAndResourceManager.html#1008665"><code>DmAttachRecord()</code></a>, <a href="DataAndResourceManager.html#1011116"><code>DmRemoveRecord()</code></a>, <a href="DataAndResourceManager.html#1008608"><code>DmArchiveRecord()</code></a>, <a href="DataAndResourceManager.html#1009291"><code>DmDeleteRecord()</code></a></p>

<h3 class="hbH3">
  <a name="1009409"> </a>DmDetachResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009411"> </a>Purpose 
</h4>

<p><a name="1009412"> </a>Detach a resource from a database and return the handle of the resource's data.</p>
<h4>
  <a name="1009413"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009414"> </a></code><h4>
  <a name="1009415"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009417"></a>Err DmDetachResource (
   DmOpenRef dbP,
   UInt16 index,
   MemHandle *oldHP
)
</pre>
<h4>
  <a name="1009418"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009419"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009420"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1009421"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1009422"> </a>Index of resource to detach.</dd>

<dt><a name="1009423"> </a><code>&harr;  <i><code>oldHP</code></i></code></dt>
<dd><a name="1009424"> </a>Pointer to return handle of the detached record.</dd>

</dl>
<h4>
  <a name="1009425"> </a>Returns 
</h4>

<p><a name="1009426"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1009430"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1009434"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a>
  <li><a name="1009438"> </a><a href="DataAndResourceManager.html#1008387"><code>dmErrCorruptDatabase</code></a>
  <li><a name="1009442"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a>
  <li><a name="1009446"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
</ul>

<p><a name="1009447"> </a>Some releases may display a fatal error message instead of returning the error code. All releases may display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1009448"> </a>Comments 
</h4>

<p><a name="1009449"> </a>This routine detaches a resource from a database by removing its entry from the database header and returns the handle of the resource's data chunk in *<code>oldHP</code>. </p>
<h4>
  <a name="1009450"> </a>See Also 
</h4>

<p><a name="1009457"> </a><a href="DataAndResourceManager.html#1008739"><code>DmAttachResource()</code></a>, <a href="DataAndResourceManager.html#1011171"><code>DmRemoveResource()</code></a></p>

<h3 class="hbH3">
  <a name="1009460"> </a>DmFindDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009462"> </a>Purpose 
</h4>

<p><a name="1009464"> </a>Return the database ID of a database by card number and name.</p>
<h4>
  <a name="1009465"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009466"> </a></code><h4>
  <a name="1009467"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009469"></a>LocalID DmFindDatabase (
   UInt16 cardNo,
   const Char *nameP
)
</pre>
<h4>
  <a name="1009470"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009471"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1009472"> </a>Number of card to search.</dd>

<dt><a name="1009473"> </a><code>&rarr;  <i><code>nameP</code></i></code></dt>
<dd><a name="1009474"> </a>Name of the database to look for.</dd>

</dl>
<h4>
  <a name="1009475"> </a>Returns 
</h4>

<p><a name="1009476"> </a>Returns the database ID. If the database can't be found, this function returns 0, and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1048801"> </a>Compatibility 
</h4>

<p><a name="1048805"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1009480"> </a>See Also 
</h4>

<p><a name="1009487"> </a><a href="DataAndResourceManager.html#1009928"><code>DmGetNextDatabaseByTypeCreator()</code></a>, <a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a></p>

<h3 class="hbH3">
  <a name="1009493"> </a>DmFindRecordByID Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009495"> </a>Purpose 
</h4>

<p><a name="1009497"> </a>Return the index of the record with the given unique ID.</p>
<h4>
  <a name="1009498"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009499"> </a></code><h4>
  <a name="1009500"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009502"></a>Err DmFindRecordByID (
   DmOpenRef dbP,
   UInt32 uniqueID,
   UInt16 *indexP
)
</pre>
<h4>
  <a name="1009503"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009504"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009505"> </a>Database access pointer.</dd>

<dt><a name="1009506"> </a><code>&rarr;  <i><code>uniqueID</code></i></code></dt>
<dd><a name="1009507"> </a>Unique ID to search for.</dd>

<dt><a name="1009508"> </a><code>&larr;  <i><code>indexP</code></i></code></dt>
<dd><a name="1009509"> </a>Return index.</dd>

</dl>
<h4>
  <a name="1009510"> </a>Returns 
</h4>

<p><a name="1009514"> </a>Returns 0 if found, otherwise <a href="DataAndResourceManager.html#1008492"><code>dmErrUniqueIDNotFound</code></a>. May display a fatal error message if the unique ID is invalid. </p>
<h4>
  <a name="1048821"> </a>Compatibility 
</h4>

<p><a name="1048825"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1009515"> </a>See Also 
</h4>

<p><a name="1009525"> </a><a href="DataAndResourceManager.html#1010935"><code>DmQueryRecord()</code></a>, <a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a>, <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1009528"> </a>DmFindResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009530"> </a>Purpose 
</h4>

<p><a name="1009531"> </a>Search the given database for a resource by type and ID, or by pointer if it is non-<code>NULL</code>.</p>
<h4>
  <a name="1009532"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009533"> </a></code><h4>
  <a name="1009534"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009536"></a>UInt16 DmFindResource (
   DmOpenRef dbP,
   DmResType resType,
   DmResID resID,
   MemHandle resH
)
</pre>
<h4>
  <a name="1009537"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009538"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009539"> </a>Open resource database access pointer.</dd>

<dt><a name="1009540"> </a><code>&rarr;  <i><code>resType</code></i></code></dt>
<dd><a name="1009541"> </a>Type of resource to search for.</dd>

<dt><a name="1009542"> </a><code>&rarr;  <i><code>resID</code></i></code></dt>
<dd><a name="1009543"> </a>ID of resource to search for.</dd>

<dt><a name="1009544"> </a><code>&rarr;  <i><code>resH</code></i></code></dt>
<dd><a name="1009545"> </a>Pointer to locked resource, or <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1009546"> </a>Returns 
</h4>

<p><a name="1009547"> </a>Returns index of resource in resource database, or <code>dmInvalidRecIndex</code> if not found.</p>

<p><a name="1009548"> </a>May display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1009549"> </a>Comments 
</h4>

<p><a name="1009550"> </a>Use this routine to find a resource in a particular resource database by type and ID or by pointer. It is particularly useful when you want to search only one database for a resource and that database is not the topmost one. </p>

<div><hr>
  <a name="1009551"> </a> <b>IMPORTANT: </b> This function searches for the resource only in the database you specify. If you pass a pointer to a base resource database, its overlay is <i>not</i> searched. To search both a base database and its overlay for a localized resource, use <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a> instead of this function.
<hr>
</div>

<p><a name="1009555"> </a>If <code>resH</code> is <code>NULL</code>, the resource is searched for by type and ID.</p>

<p><a name="1009556"> </a>If <code>resH</code> is not <code>NULL</code>, <code>resType</code> and <code>resID</code> are ignored and the index of the given locked resource is returned. </p>

<p><a name="1009557"> </a>Once the index of a resource is determined, it can be locked down and accessed by calling <a href="DataAndResourceManager.html#1010093"><code>DmGetResourceIndex()</code></a>. </p>
<h4>
  <a name="1009561"> </a>See Also 
</h4>

<p><a name="1009568"> </a><a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a>, <a href="DataAndResourceManager.html#1011408"><code>DmSearchResource()</code></a>, <a href="DataAndResourceManager.html#1011331"><code>DmResourceInfo()</code></a>, <a href="DataAndResourceManager.html#1010093"><code>DmGetResourceIndex()</code></a>, <a href="DataAndResourceManager.html#1009580"><code>DmFindResourceType()</code></a></p>

<h3 class="hbH3">
  <a name="1009580"> </a>DmFindResourceType Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009582"> </a>Purpose 
</h4>

<p><a name="1009584"> </a>Search the given database for a resource by type and type index.</p>
<h4>
  <a name="1009585"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009586"> </a></code><h4>
  <a name="1009587"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009589"></a>UInt16 DmFindResourceType (
   DmOpenRef dbP,
   DmResType resType,
   UInt16 typeIndex
)
</pre>
<h4>
  <a name="1009590"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009591"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009592"> </a>Open resource database access pointer.</dd>

<dt><a name="1009593"> </a><code>&rarr;  <i><code>resType</code></i></code></dt>
<dd><a name="1009594"> </a>Type of resource to search for.</dd>

<dt><a name="1009595"> </a><code>&rarr;  <i><code>typeIndex</code></i></code></dt>
<dd><a name="1009596"> </a>Index of given resource type.</dd>

</dl>
<h4>
  <a name="1009597"> </a>Returns 
</h4>

<p><a name="1009598"> </a>Index of resource in resource database, or <code>0xFFFF</code> if not found.</p>

<p><a name="1009599"> </a>May display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1009600"> </a>Comments 
</h4>

<p><a name="1009601"> </a>Use this routine to retrieve all the resources of a given type in a resource database. By starting at <code>typeIndex</code> 0 and incrementing until an error is returned, the total number of resources of a given type and the index of each of these resources can be determined. Once the index of a resource is determined, it can be locked down and accessed by calling <a href="DataAndResourceManager.html#1010093"><code>DmGetResourceIndex()</code></a>.</p>

<div><hr>
  <a name="1009605"> </a> <b>IMPORTANT: </b> This function searches for resources only in the database you specify. If you pass a pointer to a base resource database, its overlay is <i>not</i> searched. To search both a base database and its overlay for a localized resource, use <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a> instead of this function.
<hr>
</div>
<h4>
  <a name="1009609"> </a>See Also 
</h4>

<p><a name="1009616"> </a><a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a>, <a href="DataAndResourceManager.html#1011408"><code>DmSearchResource()</code></a>, <a href="DataAndResourceManager.html#1011331"><code>DmResourceInfo()</code></a>, <a href="DataAndResourceManager.html#1010093"><code>DmGetResourceIndex()</code></a>, <a href="DataAndResourceManager.html#1009528"><code>DmFindResource()</code></a></p>

<h3 class="hbH3">
  <a name="1009628"> </a>DmFindSortPosition Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009630"> </a>Purpose 
</h4>

<p><a name="1009631"> </a>Returns where in a sorted list of records a given record would be located. Useful to find where to insert a record with <a href="DataAndResourceManager.html#1008665"><code>DmAttachRecord()</code></a>. Uses a binary search.</p>
<h4>
  <a name="1009635"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009636"> </a></code><h4>
  <a name="1009637"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009639"></a>UInt16 DmFindSortPosition (
   DmOpenRef dbP,
   void *newRecord,
   SortRecordInfoPtr newRecordInfo,
   DmComparF *compar,
   Int16 other
)
</pre>
<h4>
  <a name="1009641"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009642"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009643"> </a>Database access pointer. </dd>

<dt><a name="1009644"> </a><code>&rarr;  <i><code>newRecord</code></i></code></dt>
<dd><a name="1009645"> </a>Pointer to the new record. </dd>

<dt><a name="1009646"> </a><code>&rarr;  <i><code>newRecordInfo</code></i></code></dt>
<dd><a name="1009647"> </a>Sort information about the new record. See <a href="DataAndResourceManager.html#1008103"><code>SortRecordInfoType</code></a>.</dd>

<dt><a name="1009651"> </a><code>&rarr;  <i><code>compar</code></i></code></dt>
<dd><a name="1009655"> </a>Pointer to comparison function. See <a href="DataAndResourceManager.html#1011791"><code>DmComparF()</code></a>.</dd>

<dt><a name="1009656"> </a><code>&rarr;  <i><code>other</code></i></code></dt>
<dd><a name="1009657"> </a>Any value the application wants to pass to the comparison function. This parameter is often used to indicate a sort direction (ascending or descending).</dd>

</dl>
<h4>
  <a name="1009658"> </a>Returns 
</h4>

<p><a name="1009659"> </a>The position where the record should be inserted.</p>

<p><a name="1009660"> </a>The position should be viewed as between the record returned and the record before it. Note that the return value may be one greater than the number of records.</p>
<h4>
  <a name="1009661"> </a>Comments 
</h4>

<p><a name="1009662"> </a>If <code>newRecord</code> has the same key as another record in the database, <code>DmFindSortPosition</code> assumes that <code>newRecord</code> should be inserted after that record. If there are several records with the same key, <code>newRecord</code> is inserted after all of them. For this reason, if you use <code>DmFindSortPosition</code> to search for the location of a record that you know is already in the database, you must subtract 1 from the result. (Be sure to check that the value is not 0.)</p>

<p><a name="1009663"> </a>If there are deleted records in the database, <code>DmFindSortPosition</code> only works if those records are at the end of the database. <code>DmFindSortPosition</code> always assumes that a deleted record is greater than or equal to any other record.</p>
<h4>
  <a name="1009664"> </a>Compatibility 
</h4>

<p><a name="1009668"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>

<p><a name="1048883"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1009669"> </a>See Also 
</h4>

<p><a name="1009673"> </a><a href="DataAndResourceManager.html#1009676"><code>DmFindSortPositionV10()</code></a> </p>

<h3 class="hbH3">
  <a name="1009676"> </a>DmFindSortPositionV10 Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009678"> </a>Purpose 
</h4>

<p><a name="1009679"> </a>Return where a record should be. Useful to find where to insert a record with <a href="DataAndResourceManager.html#1008665"><code>DmAttachRecord()</code></a>. Uses a binary search.</p>
<h4>
  <a name="1009683"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009684"> </a></code><h4>
  <a name="1009685"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009686"></a>UInt16 DmFindSortPositionV10 (
   DmOpenRef dbP,
   void *newRecord,
   DmComparF *compar,
   Int16 other
)
</pre>
<h4>
  <a name="1009687"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009688"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009689"> </a>Database access pointer.</dd>

<dt><a name="1009690"> </a><code>&rarr;  <i><code>newRecord</code></i></code></dt>
<dd><a name="1009691"> </a>Pointer to the new record.</dd>

<dt><a name="1009692"> </a><code>&rarr;  <i><code>compar</code></i></code></dt>
<dd><a name="1009696"> </a>Pointer to comparison function. See <a href="DataAndResourceManager.html#1011791"><code>DmComparF()</code></a>.</dd>

<dt><a name="1009697"> </a><code>&rarr;  <i><code>other</code></i></code></dt>
<dd><a name="1009698"> </a>Any value the application wants to pass to the comparison function.</dd>

</dl>
<h4>
  <a name="1009699"> </a>Returns 
</h4>

<p><a name="1009700"> </a>Returns the position where the record should be inserted. The position should be viewed as between the record returned and the record before it. Note that the return value may be one greater than the number of records.</p>
<h4>
  <a name="1009701"> </a>Comments 
</h4>

<p><a name="1009702"> </a>If there are deleted records in the database, <code>DmFindSortPositionV10</code> only works if those records are at the end of the database. <code>DmFindSortPositionV10</code> always assumes that a deleted record is greater than or equal to any other record.</p>
<h4>
  <a name="1009703"> </a>Compatibility 
</h4>

<p><a name="1009704"> </a>This function corresponds to the 1.0 version of <code>DmFindSortPosition</code>.</p>
<h4>
  <a name="1009705"> </a>See Also 
</h4>

<p><a name="1009712"> </a><a href="DataAndResourceManager.html#1009628"><code>DmFindSortPosition()</code></a>, <a href="DataAndResourceManager.html#1010961"><code>DmQuickSort()</code></a>, <a href="DataAndResourceManager.html#1010176"><code>DmInsertionSort()</code></a></p>

<h3 class="hbH3">
  <a name="1009718"> </a>DmGetAppInfoID Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009720"> </a>Purpose 
</h4>

<p><a name="1009721"> </a>Return the local ID of the application info block.</p>
<h4>
  <a name="1009722"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009723"> </a></code><h4>
  <a name="1009724"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009726"></a>LocalID DmGetAppInfoID (
   DmOpenRef dbP
).
</pre>
<h4>
  <a name="1009727"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009728"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1009729"> </a>Database access pointer.</dd>

</dl>
<h4>
  <a name="1009730"> </a>Returns 
</h4>

<p><a name="1009731"> </a>Returns local ID of the application info block. The application info block is an optional field that the database may use to store application-specific information about the database; if the database doesn't have an application info block, <code>DmGetAppInfoID</code> returns zero.</p>
<h4>
  <a name="1009732"> </a>See Also 
</h4>

<p><a name="1009739"> </a><a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a></p>

<h3 class="hbH3">
  <a name="1009742"> </a>DmGetDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009744"> </a>Purpose 
</h4>

<p><a name="1009745"> </a>Return the database header ID of a database by index and card number.</p>
<h4>
  <a name="1009746"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009747"> </a></code><h4>
  <a name="1009748"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009750"></a>LocalID DmGetDatabase (
   UInt16 cardNo,
   UInt16 index
)
</pre>
<h4>
  <a name="1009751"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009752"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1009753"> </a>Card number of database. </dd>

<dt><a name="1009754"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1009755"> </a>Index of database.</dd>

</dl>
<h4>
  <a name="1009756"> </a>Returns 
</h4>

<p><a name="1009757"> </a>Returns the database ID, or 0 if an invalid parameter is passed.</p>
<h4>
  <a name="1009758"> </a>Comments 
</h4>

<p><a name="1009759"> </a>Call this routine to retrieve the database ID of a database by index. The index should range from 0 to <a href="DataAndResourceManager.html#1010477"><code>DmNumDatabases()</code></a>-1. </p>

<p><a name="1009763"> </a>This routine is useful for getting a directory of all databases on a card. The databases returned may reside in either the ROM or the RAM. The order in which databases are returned is not fixed; therefore, you should not rely on receiving a list of databases in a particular order. </p>
<h4>
  <a name="1009764"> </a>See Also 
</h4>

<p><a name="1009771"> </a><a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a>, <a href="DataAndResourceManager.html#1010477"><code>DmNumDatabases()</code></a>, <a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1009109"><code>DmDatabaseSize()</code></a></p>

<h3 class="hbH3">
  <a name="1009780"> </a>DmGetDatabaseLockState Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009782"> </a>Purpose 
</h4>

<p><a name="1009783"> </a>Return information about the number of locked and busy records in a database.</p>
<h4>
  <a name="1009784"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009785"> </a></code><h4>
  <a name="1009786"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009787"></a>void DmGetDatabaseLockState (
   DmOpenRef dbR,
   UInt8 *highest,
   UInt32 *count,
   UInt32 *busy
)
</pre>
<h4>
  <a name="1009788"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009789"> </a><code>&rarr;  <i><code>dbR</code></i></code></dt>
<dd><a name="1009790"> </a>Database access pointer.</dd>

<dt><a name="1009791"> </a><code>&larr;  <i><code>highest</code></i></code></dt>
<dd><a name="1009792"> </a>The highest lock count found for all of the records in the database. If a database has two records, one has a lock count of 2 and one has a lock count of 1, the highest lock count is 2. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009793"> </a><code>&larr;  <i><code>count</code></i></code></dt>
<dd><a name="1009794"> </a>The number of records that have the lock count that is returned in the <code>highest</code> parameter. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1009795"> </a><code>&larr;  <i><code>busy</code></i></code></dt>
<dd><a name="1009796"> </a>The number of records that have the busy bit set. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

</dl>
<h4>
  <a name="1009797"> </a>Returns 
</h4>

<p><a name="1009798"> </a>No return value. Returns all information in the parameters you pass. </p>
<h4>
  <a name="1009799"> </a>Comments 
</h4>

<p><a name="1009800"> </a>This function is intended to be used for debugging purposes. You can use it to obtain information about how many records are busy and how much locking occurs. </p>
<h4>
  <a name="1009801"> </a>Compatibility 
</h4>

<p><a name="1009805"> </a>Implemented only if <a href="CompatibilityApdx.html#993903">3.2 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1009808"> </a>DmGetLastErr Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009810"> </a>Purpose 
</h4>

<p><a name="1009812"> </a>Return error code from last data manager call.</p>
<h4>
  <a name="1009813"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009814"> </a></code><h4>
  <a name="1009815"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009817"></a>Err DmGetLastErr (
   void
)
</pre>
<h4>
  <a name="1009818"> </a>Parameters 
</h4>

<p><a name="1009819"> </a>None.</p>
<h4>
  <a name="1009820"> </a>Returns 
</h4>

<p><a name="1009821"> </a>Error code from last unsuccessful data manager call.</p>
<h4>
  <a name="1009822"> </a>Comments 
</h4>

<p><a name="1009823"> </a>Use this routine to determine why a data manager call failed. In particular, calls like <a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a> return 0 if unsuccessful, so calling <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> is the only way to determine why they failed.</p>

<p><a name="1009831"> </a>Note that <code>DmGetLastErr</code> does not always reflect the error status of the last data manager call. Rather, it reflects the error status of data manager calls that don't return an error code. For some of those calls, the saved error code value is not set to 0 when the call is successful. </p>

<p><a name="1009835"> </a>For example, if a call to <a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a> returns <code>NULL</code> for database reference (that is, it fails), <code>DmGetLastErr</code> returns something meaningful; otherwise, it returns the error value of some previous data manager call. </p>

<p><a name="1009836"> </a>Only the following data manager functions currently affect the value returned by <code>DmGetLastErr</code>:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <td><p class="tt"><a name="1009842"> </a><a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009847"> </a><a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009852"> </a><a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009857"> </a><a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009862"> </a><a href="DataAndResourceManager.html#1010935"><code>DmQueryRecord()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009867"> </a><a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009872"> </a><a href="DataAndResourceManager.html#1010883"><code>DmQueryNextInCategory()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009877"> </a><a href="DataAndResourceManager.html#1010840"><code>DmPositionInCategory()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009882"> </a><a href="DataAndResourceManager.html#1011450"><code>DmSeekRecordInCategory()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009887"> </a><a href="DataAndResourceManager.html#1011281"><code>DmResizeRecord()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009892"> </a><a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009897"> </a><a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009902"> </a><a href="DataAndResourceManager.html#1010379"><code>DmNewResource()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009907"> </a><a href="DataAndResourceManager.html#1010093"><code>DmGetResourceIndex()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009912"> </a><a href="DataAndResourceManager.html#1010311"><code>DmNewHandle()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009917"> </a><a href="DataAndResourceManager.html#1010783"><code>DmOpenDBNoOverlay()</code></a> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1009922"> </a><a href="DataAndResourceManager.html#1011307"><code>DmResizeResource()</code></a></p>
    </td>
    <td><p class="tt"><a name="1009924"> </a></p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1009928"> </a>DmGetNextDatabaseByTypeCreator Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009930"> </a>Purpose 
</h4>

<p><a name="1009931"> </a>Return a database header ID and card number given the type and/or creator. This routine searches all memory cards for a match. </p>
<h4>
  <a name="1009932"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1009933"> </a></code><h4>
  <a name="1009934"> </a>Prototype 
</h4>
<pre class="proto"><a name="1009936"></a>Err DmGetNextDatabaseByTypeCreator(
   Boolean newSearch,
   DmSearchStatePtr stateInfoP,
   UInt32 type,
   UInt32 creator,
   Boolean onlyLatestVers,
   UInt16 *cardNoP,
   LocalID *dbIDP
)
</pre>
<h4>
  <a name="1009937"> </a>Parameters 
</h4>

<dl>
<dt><a name="1009938"> </a><code>&rarr;  <i><code>newSearch</code> </i></code></dt>
<dd><a name="1009939"> </a><code>true</code> if starting a new search.</dd>

<dt><a name="1009940"> </a><code>&harr;  <i><code>stateInfoP</code></i></code></dt>
<dd><a name="1009941"> </a>If <code>newSearch</code> is <code>false</code>, this must point to the same data used for the previous invocation. </dd>

<dt><a name="1009942"> </a><code>&rarr;  <i><code>type</code></i></code></dt>
<dd><a name="1009943"> </a>Type of database to search for, pass 0 as a wildcard.</dd>

<dt><a name="1009944"> </a><code>&rarr;  <i><code>creator</code></i></code></dt>
<dd><a name="1009945"> </a>Creator of database to search for, pass 0 as a wildcard.</dd>

<dt><a name="1009946"> </a><code>&rarr;  <i><code>onlyLatestVers</code></i></code></dt>
<dd><a name="1009947"> </a>If <code>true</code>, only the latest version of a database with a given type and creator is returned.</dd>

<dt><a name="1009948"> </a><code>&larr;  <i><code>cardNoP</code></i></code></dt>
<dd><a name="1009949"> </a>On exit, the card number of the found database. </dd>

<dt><a name="1009950"> </a><code>&larr;  <i><code>dbIDP</code></i></code></dt>
<dd><a name="1009951"> </a>Database local ID of the found database.</dd>

</dl>
<h4>
  <a name="1009952"> </a>Returns 
</h4>

<p><a name="1009956"> </a>Returns <code>errNone</code> if no error, or <a href="DataAndResourceManager.html#1008377"><code>dmErrCantFind</code></a> if no matches were found.</p>
<h4>
  <a name="1009957"> </a>Comments 
</h4>

<p><a name="1009958"> </a>You may need to call this function successively to discover all databases having a specified type/creator pair. </p>

<p><a name="1009959"> </a>To start the search, pass <code>true</code> for <code>newSearch</code>. Allocate a <code>DmSearchStateType</code> structure and pass it as the <code>stateInfoP</code> parameter. <code>DmGetNextDatabaseByTypeCreator</code> stores private information in <code>stateInfoP</code> and uses it if the search is continued. </p>

<p><a name="1009961"> </a>To continue a search where the previous one left off, pass <code>false</code> for <code>newSearch</code> and pass the same <code>stateInfoP</code> that you used during the previous call to this function. </p>

<p><a name="1009962"> </a>You can pass <code>0</code> as a wildcard operator for the <code>type</code> or <code>creator</code> parameter to conduct searches of wider scope. If the <code>type</code> parameter is <code>0</code>, this routine can be called successively to return all databases of the given creator. If the <code>creator</code> parameter is <code>0</code>, this routine can be called successively to return all databases of the given type. You can also pass <code>0</code> as the value for both of these parameters to return all available databases without regard to type or creator.</p>

<p><a name="1009963"> </a>Because databases are scattered freely throughout memory space, they are not returned in any particular order&#8212;any database matching the specified type/creator criteria can be returned.Thus, if the value of the <code>onlyLatestVers</code> parameter is <code>false</code>, this function may return a database which is not the most recent version matching the specified type/creator pair. To obtain only the latest version of a database matching the search criteria, set the value of the <code>onlyLatestVers</code> parameter to <code>true</code>. </p>

<p><a name="1009964"> </a>When determining which is the latest version of the database, RAM databases are considered newer than ROM databases that have the same version number. Because of this, you can replace any ROM-based application with your own version of it. Also, a RAM database on card 1 is considered newer than a RAM database on card 0 if the version numbers are identical. </p>

<div><hr>
  <a name="1009965"> </a> <span class="warning">WARNING! </span> Don't create or delete a database while using <code>DmGetNextDatabaseByTypeCreator</code> to iterate through the existing databases. This could cause databases to be skipped, or it could result in a given database being returned more than once.
<hr>
</div>
<h4>
  <a name="1009966"> </a>Compatibility 
</h4>

<p><a name="1009967"> </a>In Palm OS version 3.1 and higher, if <code>onlyLatestVers</code> is <code>true</code>, you only receive one matching database for each type/creator pair. In version 3.0 and earlier, you could receive multiple matching databases if <code>onlyLatestVers</code> was <code>true</code>. </p>

<p><a name="1009968"> </a>Note that the behavior is different only when you have specified a value for both <code>type</code> and <code>creator</code> and <code>onlyLatestVers</code> is <code>true</code>.</p>

<p><a name="1009969"> </a>For example, suppose your application maintains three databases that all have the same type, creator, and version number and you write this code to process them in some way:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
DmSearchStateType state;<a name="1009970"> </a>
Boolean latestVer;<a name="1009971"> </a>
UInt16 card;<a name="1009972"> </a>
LocalID currentDB = 0;<a name="1009973"> </a>
 <a name="1009974"> </a>
theErr = DmGetNextDatabaseByTypeCreator(true, <a name="1009975"> </a>
  &amp;state, myType, myCreator, latestVer, &amp;card, <a name="1009976"> </a>
  &amp;currentDB);<a name="1009977"> </a>
while (!theErr &amp;&amp; currentDB) {<a name="1009978"> </a>
  /* do something with currentDB */<a name="1009979"> </a>
  /* now get the next DB */<a name="1009980"> </a>
  theErr = DmGetNextDatabaseByTypeCreator(<a name="1009981"> </a>
    false, &amp;state, myType, myCreator, <a name="1009982"> </a>
  vlatestVer, &amp;card, &amp;currentDB);<a name="1009983"> </a>
}<a name="1009984"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1009985"> </a>If <code>latestVer</code> is <code>false</code>, then your code will work the same on all versions of Palm OS and will return all three databases whose type and creator match those specified. If <code>latestVer</code> is <code>true</code>, this code returns all three databases on Palm OS version 3.0 and earlier, but only returns one database on version 3.1 and higher. (Exactly which database it returns is unspecified.) </p>

<p><a name="1009986"> </a>If you expect multiple databases to match your search criteria, make sure you call <code>DmGetNextDatabaseByTypeCreator</code> in one of the following ways to ensure that your code operates the same on all Palm OS versions:</p>
<ul type="disc">
  <li><a name="1009987"> </a>Set <code>onlyLatestVers</code> to <code>false</code> if you specify both a <code>type</code> and <code>creator</code>. 
  <li><a name="1009988"> </a>Specify <code>0</code> for either the <code>type</code> or <code>creator</code> parameter (or both). 
</ul>

<p><a name="1048921"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1009989"> </a>See Also 
</h4>

<p><a name="1009999"> </a><a href="DataAndResourceManager.html#1009742"><code>DmGetDatabase()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>, <a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a>, <a href="DataAndResourceManager.html#1009109"><code>DmDatabaseSize()</code></a></p>

<h3 class="hbH3">
  <a name="1010008"> </a>DmGetRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010010"> </a>Purpose 
</h4>

<p><a name="1010011"> </a>Return a handle to a record by index and mark the record busy.</p>
<h4>
  <a name="1010012"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010013"> </a></code><h4>
  <a name="1010014"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010016"></a>MemHandle DmGetRecord (
   DmOpenRef dbP,
   UInt16 index
)
</pre>
<h4>
  <a name="1010017"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010018"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010019"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010020"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1010021"> </a>Which record to retrieve.</dd>

</dl>
<h4>
  <a name="1010022"> </a>Returns 
</h4>

<p><a name="1010023"> </a>Returns a handle to record data. If another call to <code>DmGetRecord</code> for the same record is attempted before the record is released, <code>NULL</code> is returned and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1010027"> </a>Comments 
</h4>

<p><a name="1010028"> </a>Returns a handle to given record and sets the <code>busy</code> bit for the record. </p>

<p><a name="1010029"> </a>If the record is ROM-based (pointer accessed), this routine makes a fake handle to it and stores this handle in the <code>DmAccessType</code> structure.</p>

<p><a name="1010034"> </a><a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a> should be called as soon as the caller finishes viewing or editing the record.</p>
<h4>
  <a name="1048936"> </a>Compatibility 
</h4>

<p><a name="1048940"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010035"> </a>See Also 
</h4>

<p><a name="1010042"> </a><a href="DataAndResourceManager.html#1011378"><code>DmSearchRecord()</code></a>, <a href="DataAndResourceManager.html#1009493"><code>DmFindRecordByID()</code></a>, <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a>, <a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a>, <a href="DataAndResourceManager.html#1010935"><code>DmQueryRecord()</code></a></p>

<h3 class="hbH3">
  <a name="1010054"> </a>DmGetResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010056"> </a>Purpose 
</h4>

<p><a name="1010057"> </a>Search all open resource databases and return a handle to a resource, given the resource type and ID.</p>
<h4>
  <a name="1010059"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010060"> </a></code><h4>
  <a name="1010061"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010063"></a>MemHandle DmGetResource (
   DmResType type,
   DmResID resID
)
</pre>
<h4>
  <a name="1010064"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010065"> </a><code>&rarr;  <i><code>type</code></i></code></dt>
<dd><a name="1010066"> </a>The resource type.</dd>

<dt><a name="1010067"> </a><code>&rarr;  <i><code>resID</code></i></code></dt>
<dd><a name="1010068"> </a>The resource ID.</dd>

</dl>
<h4>
  <a name="1010069"> </a>Returns 
</h4>

<p><a name="1010070"> </a>Handle to resource data. If the specified resource cannot be found, this function returns <code>NULL</code> and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1010074"> </a>Comments 
</h4>

<p><a name="1010075"> </a>Searches all open resource databases starting with the most recently opened one for a resource of the given type and ID. If found, the resource handle is returned. The application should call <a href="DataAndResourceManager.html#1011087"><code>DmReleaseResource()</code></a> as soon as it finishes accessing the resource data. The resource handle is not locked by this function. </p>

<p><a name="1010079"> </a>This function always returns the resource located in the overlay if any open overlay has a resource matching that type and ID. If there is no overlay version of the resource, this function returns the resource from the base database. </p>
<h4>
  <a name="1010080"> </a>See Also 
</h4>

<p><a name="1010087"> </a><a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a>, <a href="DataAndResourceManager.html#1011087"><code>DmReleaseResource()</code></a>, <a href="MiscUI.html#996039"><code>ResLoadConstant()</code></a> </p>

<h3 class="hbH3">
  <a name="1010093"> </a>DmGetResourceIndex Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010095"> </a>Purpose 
</h4>

<p><a name="1010096"> </a>Return a handle to a resource by index.</p>
<h4>
  <a name="1010097"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010098"> </a></code><h4>
  <a name="1010099"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010101"></a>MemHandle DmGetResourceIndex (
   DmOpenRef dbP,
   UInt16 index
)
</pre>
<h4>
  <a name="1010102"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010103"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010104"> </a>Access pointer to open database.</dd>

<dt><a name="1010105"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1010106"> </a>Index of the resource whose handle you want.</dd>

</dl>
<h4>
  <a name="1010107"> </a>Returns 
</h4>

<p><a name="1010108"> </a>Handle to resource data. If the specified index is out of range, this function returns <code>NULL</code> and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>

<p><a name="1010112"> </a>May display a fatal error message if the database is not a resource database. </p>

<div><hr>
  <a name="1010113"> </a> <b>IMPORTANT: </b> This function accesses the resource only in the database you specify. If you pass a pointer to a base resource database, its overlay is <i>not</i> accessed. Therefore, you should use care when using this function to access a potentially localized resource. You can use <a href="DataAndResourceManager.html#1011408"><code>DmSearchResource()</code></a> to obtain a pointer to the overlay database if the resource is localized; however, it's more convenient to use <a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a> or <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a>. 
<hr>
</div>
<h4>
  <a name="1010126"> </a>See Also 
</h4>

<p><a name="1010133"> </a><a href="DataAndResourceManager.html#1009528"><code>DmFindResource()</code></a>, <a href="DataAndResourceManager.html#1009580"><code>DmFindResourceType()</code></a>, <a href="DataAndResourceManager.html#1011408"><code>DmSearchResource()</code></a></p>

<h3 class="hbH3">
  <a name="1010139"> </a>DmGet1Resource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010141"> </a>Purpose 
</h4>

<p><a name="1010142"> </a>Search the most recently opened resource database and return a handle to a resource given the resource type and ID.</p>
<h4>
  <a name="1010143"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010144"> </a></code><h4>
  <a name="1010145"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010147"></a>MemHandle DmGet1Resource (
   DmResType type,
   DmResID resID
)
</pre>
<h4>
  <a name="1010148"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010149"> </a><code>&rarr;  <i><code>type</code></i></code></dt>
<dd><a name="1010150"> </a>The resource type.</dd>

<dt><a name="1010151"> </a><code>&rarr;  <i><code>resID</code></i></code></dt>
<dd><a name="1010152"> </a>The resource ID.</dd>

</dl>
<h4>
  <a name="1010153"> </a>Returns 
</h4>

<p><a name="1010154"> </a>Handle to resource data. If unsuccessful, this function returns <code>NULL</code> and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1010158"> </a>Comments 
</h4>

<p><a name="1010159"> </a>Searches the most recently opened resource database for a resource of the given type and ID. If the database has an overlay associated with it, the overlay is searched first, and then the base database is searched if the overlay does not contain the resource. If found, the resource handle is returned. The application should call <a href="DataAndResourceManager.html#1011087"><code>DmReleaseResource()</code></a> as soon as it finishes accessing the resource data. The resource handle is not locked by this function. </p>
<h4>
  <a name="1010163"> </a>See Also 
</h4>

<p><a name="1010170"> </a><a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a>, <a href="DataAndResourceManager.html#1011087"><code>DmReleaseResource()</code></a>, <a href="MiscUI.html#996039"><code>ResLoadConstant()</code></a> </p>

<h3 class="hbH3">
  <a name="1010176"> </a>DmInsertionSort Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010178"> </a>Purpose 
</h4>

<p><a name="1010179"> </a>Sort records in a database. </p>
<h4>
  <a name="1010180"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010181"> </a></code><h4>
  <a name="1010182"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010184"></a>Err DmInsertionSort (
   DmOpenRef dbR,
   DmComparF *compar,
   Int16 other
)
</pre>
<h4>
  <a name="1010186"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010187"> </a><code>&rarr;  <i><code>dbR</code></i></code></dt>
<dd><a name="1010188"> </a>Database access pointer.</dd>

<dt><a name="1010189"> </a><code>&rarr;  <i><code>compar</code></i></code></dt>
<dd><a name="1010193"> </a>Comparison function. See <a href="DataAndResourceManager.html#1011791"><code>DmComparF()</code></a>.</dd>

<dt><a name="1010194"> </a><code>&rarr;  <i><code>other</code></i></code></dt>
<dd><a name="1010195"> </a>Any value the application wants to pass to the comparison function. This parameter is often used to indicate a sort direction (ascending or descending).</dd>

</dl>
<h4>
  <a name="1010196"> </a>Returns 
</h4>

<p><a name="1010197"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1010201"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1010205"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a>
</ul>

<p><a name="1010206"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1010207"> </a>Comments 
</h4>

<p><a name="1010208"> </a>Deleted records are placed last in any order. All others are sorted according to the passed comparison function. Only records which are out of order move. Moved records are moved to the end of the range of equal records. If a large number of records are being sorted, try to use the quick sort.</p>

<p><a name="1010209"> </a>The following insertion-sort algorithm is used: Starting with the second record, each record is compared to the preceding record. Each record not greater than the last is inserted into sorted position within those already sorted. A binary insertion is performed. A moved record is inserted after any other equal records.</p>
<h4>
  <a name="1048953"> </a>Compatibility 
</h4>

<p><a name="1048957"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010210"> </a>See Also 
</h4>

<p><a name="1010214"> </a><a href="DataAndResourceManager.html#1010961"><code>DmQuickSort()</code></a> </p>

<h3 class="hbH3">
  <a name="1010217"> </a>DmMoveCategory Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010219"> </a>Purpose 
</h4>

<p><a name="1010221"> </a>Move all records in a category to another category. </p>
<h4>
  <a name="1010222"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010223"> </a></code><h4>
  <a name="1010224"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010226"></a>Err DmMoveCategory (
   DmOpenRef dbP,
   UInt16 toCategory,
   UInt16 fromCategory,
   Boolean dirty
)
</pre>
<h4>
  <a name="1010227"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010228"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010229"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010230"> </a><code>&rarr;  <i><code>toCategory</code></i></code></dt>
<dd><a name="1010231"> </a>Category to which the records should be added.</dd>

<dt><a name="1010232"> </a><code>&rarr;  <i><code>fromCategory</code></i></code></dt>
<dd><a name="1010233"> </a>Category from which to remove records.</dd>

<dt><a name="1010234"> </a><code>&rarr;  <i><code>dirty</code></i></code></dt>
<dd><a name="1010235"> </a>If <code>true</code>, set the dirty bit.</dd>

</dl>
<h4>
  <a name="1010236"> </a>Returns 
</h4>

<p><a name="1010240"> </a>Returns 0 if successful, or <a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a> if the database is in read-only mode. Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1010241"> </a>Comments 
</h4>

<p><a name="1010242"> </a>If <code>dirty</code> is <code>true</code>, the moved records are marked as dirty.</p>

<p><a name="1010243"> </a>The <code>toCategory</code> and <code>fromCategory</code> parameters hold category index values. You can learn which category a record is in with the <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a> call and use that value in this function. For example, the following code, ensures that the records <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">rec1</span> and <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">rec2</span> are in the same category: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
DmOpenRef myDB;<a name="1010247"> </a>
UInt16 rec1, rec2;<a name="1010248"> </a>
UInt16 rec1Attr, rec2Attr;<a name="1010249"> </a>
UInt16 category1, category2;<a name="1010250"> </a>
 <a name="1010251"> </a>
DmRecordInfo (myDB, rec1, &amp;rec1Attr, NULL, <a name="1010252"> </a>
  NULL);<a name="1010253"> </a>
category1 = rec1Attr &amp; dmRecAttrCategoryMask;<a name="1010255"> </a>
DmRecordInfo(myDB, rec2, &amp;rec2Attr, NULL, <a name="1010256"> </a>
  NULL);<a name="1010257"> </a>
category2 = rec2Attr &amp; dmRecAttrCategoryMask;<a name="1010258"> </a>
if (category1 != category2) <a name="1010259"> </a>
  DmMoveCategory(myDB, category1, category2, <a name="1010260"> </a>
    true);<a name="1010261"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1049290"> </a>Compatibility 
</h4>

<p><a name="1049294"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, <code>sysErrNotAllowed</code> is returned. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>

<h3 class="hbH3">
  <a name="1010264"> </a>DmMoveRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010266"> </a>Purpose 
</h4>

<p><a name="1010267"> </a>Move a record from one index to another. </p>
<h4>
  <a name="1010268"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010269"> </a></code><h4>
  <a name="1010270"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010272"></a>Err DmMoveRecord (
   DmOpenRef dbP,
   UInt16 from,
   UInt16 to
)
</pre>
<h4>
  <a name="1010273"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010274"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010275"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010276"> </a><code>&rarr;  <i><code>from</code></i></code></dt>
<dd><a name="1010277"> </a>Index of record to move.</dd>

<dt><a name="1010278"> </a><code>&rarr;  <i><code>to</code></i></code></dt>
<dd><a name="1010279"> </a>Where to move the record.</dd>

</dl>
<h4>
  <a name="1010280"> </a>Returns 
</h4>

<p><a name="1010281"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1010285"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1010289"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a>
  <li><a name="1010293"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a>
  <li><a name="1010297"> </a><a href="DataAndResourceManager.html#1008426"><code>dmErrMemError</code></a>
  <li><a name="1010301"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
  <li><a name="1010305"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a>
</ul>

<p><a name="1010306"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1010307"> </a>Comments 
</h4>

<p><a name="1010308"> </a>Insert the record at the <code>to</code> index and move other records down. The <code>to</code> position should be viewed as an insertion position. This value may be one greater than the index of the last record in the database. In cases where <code>to</code> is greater than <code>from</code>, the new index of the record becomes <code>to</code>&#8211;1 after the move is complete. </p>
<h4>
  <a name="1049340"> </a>Compatibility 
</h4>

<p><a name="1049344"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>

<h3 class="hbH3">
  <a name="1010311"> </a>DmNewHandle Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010313"> </a>Purpose 
</h4>

<p><a name="1010314"> </a>Attempt to allocate a new chunk in the same data heap or card as the database header of the passed database access pointer. If there is not enough space in that data heap, try other heaps.</p>
<h4>
  <a name="1010315"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010316"> </a></code><h4>
  <a name="1010317"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010319"></a>MemHandle DmNewHandle (
   DmOpenRef dbP,
   UInt32 size
) 
</pre>
<h4>
  <a name="1010320"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010321"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010322"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010323"> </a><code>&rarr;  <i><code>size</code></i></code></dt>
<dd><a name="1010324"> </a>Size of new handle.</dd>

</dl>
<h4>
  <a name="1010325"> </a>Returns 
</h4>

<p><a name="1010326"> </a>Returns the <code>chunkID</code> of new chunk. If an error occurs, returns 0, and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. </p>
<h4>
  <a name="1010330"> </a>Comments 
</h4>

<p><a name="1010331"> </a>Allocates a new handle of the given size. Ensures that the new handle is in the same memory card as the given database. This guarantees that you can attach the handle to the database as a record to obtain and save its <code>LocalID</code> in the <code>appInfoID</code> or <code>sortInfoID</code> fields of the header.</p>

<p><a name="1010332"> </a>The handle should be attached to a database as soon as possible. If it is not attached to a database and the application crashes, the memory used by the new handle is unavailable until the next soft reset. </p>
<h4>
  <a name="1049437"> </a>Compatibility 
</h4>

<p><a name="1049441"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>

<h3 class="hbH3">
  <a name="1010335"> </a>DmNewRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010337"> </a>Purpose 
</h4>

<p><a name="1010338"> </a>Return a handle to a new record in the database and mark the record busy.</p>
<h4>
  <a name="1010339"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010340"> </a></code><h4>
  <a name="1010341"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010343"></a>MemHandle DmNewRecord (
   DmOpenRef dbP,
   UInt16 *atP,
   UInt32 size
)
</pre>
<h4>
  <a name="1010344"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010345"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010346"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010347"> </a><code>&harr;  <i><code>atP</code></i></code></dt>
<dd><a name="1010348"> </a>Pointer to index where new record should be placed. Specify the value <code>dmMaxRecordIndex</code> to add the record to the end of the database. </dd>

<dt><a name="1010350"> </a><code>&rarr;  <i><code>size</code></i></code></dt>
<dd><a name="1010351"> </a>Size of new record.</dd>

</dl>
<h4>
  <a name="1010352"> </a>Returns 
</h4>

<p><a name="1010353"> </a>Handle to record data. If an error occurs, this function returns 0 and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. </p>

<p><a name="1010357"> </a>Some releases may display a fatal error message if the database is opened in read-only mode or it is a resource database. </p>
<h4>
  <a name="1010358"> </a>Comments 
</h4>

<p><a name="1010359"> </a>Allocates a new record of the given size, and returns a handle to the record data. The parameter <code>atP</code> points to an index variable. The new record is inserted at index <code>*atP</code> and all record indices that follow are shifted down. If <code>*atP</code> is greater than the number of records currently in the database, the new record is appended to the end and its index is returned in <code>*atP</code>. </p>

<p><a name="1010360"> </a>Both the <code>busy</code> and <code>dirty</code> bits are set for the new record and a unique ID is automatically created. </p>

<p><a name="1010365"> </a><a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a> should be called as soon as the caller finishes viewing or editing the record.</p>
<h4>
  <a name="1049554"> </a>Compatibility 
</h4>

<p><a name="1049558"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010366"> </a>See Also 
</h4>

<p><a name="1010376"> </a><a href="DataAndResourceManager.html#1008665"><code>DmAttachRecord()</code></a>, <a href="DataAndResourceManager.html#1011116"><code>DmRemoveRecord()</code></a>, <a href="DataAndResourceManager.html#1009291"><code>DmDeleteRecord()</code></a></p>

<h3 class="hbH3">
  <a name="1010379"> </a>DmNewResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010381"> </a>Purpose 
</h4>

<p><a name="1010382"> </a>Allocate and add a new resource to a resource database.</p>
<h4>
  <a name="1010383"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010384"> </a></code><h4>
  <a name="1010385"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010387"></a>MemHandle DmNewResource (
   DmOpenRef dbP,
   DmResType resType,
   DmResID resID,
   UInt32 size
)
</pre>
<h4>
  <a name="1010388"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010389"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010390"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010391"> </a><code>&rarr;  <i><code>resType</code></i></code></dt>
<dd><a name="1010392"> </a>Type of the new resource.</dd>

<dt><a name="1010393"> </a><code>&rarr;  <i><code>resID</code></i></code></dt>
<dd><a name="1010394"> </a>ID of the new resource.</dd>

<dt><a name="1010395"> </a><code>&rarr;  <i><code>size</code></i></code></dt>
<dd><a name="1010396"> </a>Desired size of the new resource.</dd>

</dl>
<h4>
  <a name="1010397"> </a>Returns 
</h4>

<p><a name="1010398"> </a>Returns a handle to the new resource. If an error occurs, this function returns <code>NULL</code> and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>

<p><a name="1010402"> </a>May display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1010403"> </a>Comments 
</h4>

<p><a name="1010404"> </a>Allocates a memory chunk for a new resource and adds it to the given resource database. The new resource has the given type and ID. If successful, the application should call <a href="DataAndResourceManager.html#1011087"><code>DmReleaseResource()</code></a> as soon as it finishes initializing the resource.</p>
<h4>
  <a name="1010409"> </a>See Also 
</h4>

<p><a name="1010416"> </a><a href="DataAndResourceManager.html#1008739"><code>DmAttachResource()</code></a>, <a href="DataAndResourceManager.html#1011171"><code>DmRemoveResource()</code></a></p>

<h3 class="hbH3">
  <a name="1010419"> </a>DmNextOpenDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010421"> </a>Purpose 
</h4>

<p><a name="1010422"> </a>Return <code>DmOpenRef</code> to next open database for the current task.</p>
<h4>
  <a name="1010423"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010424"> </a></code><h4>
  <a name="1010425"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010427"></a>DmOpenRef DmNextOpenDatabase (
   DmOpenRef currentP
)
</pre>
<h4>
  <a name="1010428"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010429"> </a><code>&rarr;  <i><code>currentP</code></i></code></dt>
<dd><a name="1010430"> </a>Current database access pointer or <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1010431"> </a>Returns 
</h4>

<p><a name="1010432"> </a><code>DmOpenRef</code> to next open database, or <code>NULL</code> if there are no more.</p>
<h4>
  <a name="1010433"> </a>Comments 
</h4>

<p><a name="1010434"> </a>Call this routine successively to get the <code>DmOpenRefs</code> of all open databases. Pass <code>NULL</code> for <code>currentP</code> to get the first one. Applications don't usually call this function, but is useful for system information.</p>
<h4>
  <a name="1010435"> </a>See Also 
</h4>

<p><a name="1010442"> </a><a href="DataAndResourceManager.html#1010749"><code>DmOpenDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1010445"> </a>DmNextOpenResDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010447"> </a>Purpose 
</h4>

<p><a name="1010448"> </a>Return access pointer to next open resource database in the search chain.</p>
<h4>
  <a name="1010449"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010450"> </a></code><h4>
  <a name="1010451"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010453"></a>DmOpenRef DmNextOpenResDatabase (
   DmOpenRef dbP
) 
</pre>
<h4>
  <a name="1010454"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010455"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010456"> </a>Database reference, or 0 to start search from the top.</dd>

</dl>
<h4>
  <a name="1010457"> </a>Returns 
</h4>

<p><a name="1010458"> </a>Pointer to next open resource database.</p>
<h4>
  <a name="1010459"> </a>Comments 
</h4>

<p><a name="1010460"> </a>Returns pointer to next open resource database. To get a pointer to the first one in the search chain, pass <code>NULL</code> for <code>dbP</code>. This is the database that is searched when <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a> is called. </p>

<p><a name="1010465"> </a>If you use this function to access a resource database that might have an overlay associated with it, be careful how you use the result. The <code>DmOpenRef</code> returned by this function is a pointer to the overlay database, not the base database. If you subsequently pass this pointer to <a href="DataAndResourceManager.html#1009528"><code>DmFindResource()</code></a>, you'll receive a handle to the overlaid resource. If you're searching for a resource that is found only in the base, you won't find it. Instead, always use <a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a> or <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a> to obtain a resource. Both of those functions search both the overlay databases and their associated base databases. </p>

<h3 class="hbH3">
  <a name="1010477"> </a>DmNumDatabases Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010479"> </a>Purpose 
</h4>

<p><a name="1010480"> </a>Determine how many databases reside on a memory card.</p>
<h4>
  <a name="1010481"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010482"> </a></code><h4>
  <a name="1010483"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010485"></a>UInt16 DmNumDatabases (
   UInt16 cardNo
)
</pre>
<h4>
  <a name="1010486"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010487"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1010488"> </a>Number of the card to check. </dd>

</dl>
<h4>
  <a name="1010489"> </a>Returns 
</h4>

<p><a name="1010490"> </a>The number of databases found.</p>
<h4>
  <a name="1010491"> </a>Comments 
</h4>

<p><a name="1010492"> </a>This routine is helpful for getting a directory of all databases on a card. The routine <a href="DataAndResourceManager.html#1009742"><code>DmGetDatabase()</code></a> accepts an index from 0 to <a href="DataAndResourceManager.html#1010477"><code>DmNumDatabases()</code></a> -1 and returns a database ID by index.</p>
<h4>
  <a name="1049588"> </a>Compatibility 
</h4>

<p><a name="1049592"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010499"> </a>See Also 
</h4>

<p><a name="1010503"> </a><a href="DataAndResourceManager.html#1009742"><code>DmGetDatabase()</code></a> </p>

<h3 class="hbH3">
  <a name="1010506"> </a>DmNumRecords Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010508"> </a>Purpose 
</h4>

<p><a name="1010509"> </a>Return the number of records in a database.</p>
<h4>
  <a name="1010510"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010511"> </a></code><h4>
  <a name="1010512"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010514"></a>UInt16 DmNumRecords (
   DmOpenRef dbP
)
</pre>
<h4>
  <a name="1010515"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010516"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010517"> </a><code>DmOpenRef</code> to open database.</dd>

</dl>
<h4>
  <a name="1010518"> </a>Returns 
</h4>

<p><a name="1010519"> </a>The number of records in a database.</p>
<h4>
  <a name="1010520"> </a>Comments 
</h4>

<p><a name="1010521"> </a>Records that have that have the <code>deleted</code> bit set (that is, records that will be deleted during the next synchronization because the user has marked them deleted) are included in the count. If you want to exclude these records from your count, use <a href="DataAndResourceManager.html#1010539"><code>DmNumRecordsInCategory()</code></a> and pass <code>dmAllCategories</code> as the category.</p>
<h4>
  <a name="1010526"> </a>See Also 
</h4>

<p><a name="1010533"> </a><a href="DataAndResourceManager.html#1010539"><code>DmNumRecordsInCategory()</code></a>, <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a>, <a href="DataAndResourceManager.html#1011610"><code>DmSetRecordInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1010539"> </a>DmNumRecordsInCategory Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010541"> </a>Purpose 
</h4>

<p><a name="1010542"> </a>Return the number of records of a specified category in a database. </p>
<h4>
  <a name="1010543"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010544"> </a></code><h4>
  <a name="1010545"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010547"></a>UInt16 DmNumRecordsInCategory (
   DmOpenRef dbP,
   UInt16 category
)
</pre>
<h4>
  <a name="1010548"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010549"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010550"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010551"> </a><code>&rarr;  <i><code>category</code></i></code></dt>
<dd><a name="1010552"> </a>Category index.</dd>

</dl>
<h4>
  <a name="1010553"> </a>Returns 
</h4>

<p><a name="1010554"> </a>The number of records in the category.</p>
<h4>
  <a name="1010555"> </a>Comments 
</h4>

<p><a name="1010556"> </a>Because this function must examine all records in the database, it can be slow to return, especially when called on a large database.</p>

<p><a name="1010557"> </a>Records that have the <code>deleted</code> bit set are not counted, and if the user has specified to hide or mask private records, private records are not counted either. </p>

<p><a name="1010561"> </a>You can use the <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a> call to obtain a category index from a given record. For example: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
DmOpenRef myDB;<a name="1010562"> </a>
UInt16 record, attr, category, total;<a name="1010563"> </a>
 <a name="1010564"> </a>
DmRecordInfo(myDB, record, &amp;attr, NULL, NULL);<a name="1010565"> </a>
category = attr &amp; dmRecAttrCategoryMask;<a name="1010566"> </a>
total = DmNumRecordsInCategory(myDB, category);<a name="1010567"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1049601"> </a>Compatibility 
</h4>

<p><a name="1049605"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010568"> </a>See Also 
</h4>

<p><a name="1010575"> </a><a href="DataAndResourceManager.html#1010506"><code>DmNumRecords()</code></a>, <a href="DataAndResourceManager.html#1010883"><code>DmQueryNextInCategory()</code></a>, <a href="DataAndResourceManager.html#1010840"><code>DmPositionInCategory()</code></a>, <a href="DataAndResourceManager.html#1011450"><code>DmSeekRecordInCategory()</code></a>, <a href="DataAndResourceManager.html#1010217"><code>DmMoveCategory()</code></a></p>

<h3 class="hbH3">
  <a name="1010587"> </a>DmNumResources Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010589"> </a>Purpose 
</h4>

<p><a name="1010590"> </a>Return the total number of resources in a given resource database.</p>
<h4>
  <a name="1010591"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010592"> </a></code><h4>
  <a name="1010593"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010595"></a>UInt16 DmNumResources (
   DmOpenRef dbP
)
</pre>
<h4>
  <a name="1010596"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010597"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010598"> </a><code>DmOpenRef</code> to open database.</dd>

</dl>
<h4>
  <a name="1010599"> </a>Returns 
</h4>

<p><a name="1010600"> </a>The total number of resources in the given database.</p>

<p><a name="1010601"> </a>May display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1010602"> </a>Comments 
</h4>

<p><a name="1010603"> </a><code>DmNumResources</code> only counts the resources in the database indicated by the <code>DmOpenRef</code> parameter. If the database is a resource database that has an overlay associated with it, this function only returns the number of resources in the base database, not in the overlay. </p>

<h3 class="hbH3">
  <a name="1010606"> </a>DmOpenDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010608"> </a>Purpose 
</h4>

<p><a name="1010609"> </a>Open a database and return a reference to it. If the database is a resource database, also open its overlay for the current locale. </p>
<h4>
  <a name="1010610"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010611"> </a></code><h4>
  <a name="1010612"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010614"></a>DmOpenRef DmOpenDatabase (
   UInt16 cardNo,
   LocalID dbID,
   UInt16 mode
)
</pre>
<h4>
  <a name="1010615"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010616"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1010617"> </a>Card number database resides on.</dd>

<dt><a name="1010618"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1010619"> </a>The database ID of the database.</dd>

<dt><a name="1010620"> </a><code>&rarr;  <i><code>mode</code></i></code></dt>
<dd><a name="1010623"> </a>Which mode to open database in (see <a href="DataAndResourceManager.html#1008538">"Open Mode Constants"</a>).</dd>

</dl>
<h4>
  <a name="1010625"> </a>Returns 
</h4>

<p><a name="1010626"> </a>Returns <code>DmOpenRef</code> to open database. May display a fatal error message if the database parameter is <code>NULL</code> or is an invalid ID. On all other errors, this function returns 0 and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1010630"> </a>Comments 
</h4>

<p><a name="1010631"> </a>Call this routine to open a database for reading or writing. </p>

<p><a name="1010632"> </a>This routine returns a <code>DmOpenRef</code> which must be used to access particular records in a database. If unsuccessful, 0 is returned and the cause of the error can be determined by calling <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a>.</p>

<p><a name="1010637"> </a>When you use this routine to open a resource database in read-only mode, it also opens the overlay associated with this database for the current locale, if it exists. (The function <a href="OverlayMgr.html#1026798"><code>OmGetCurrentLocale()</code></a> returns the current locale.) Overlays are resource databases typically used to localize applications, shared libraries, and panels. They have the same creator as the base database, a type of <code>'ovly'</code> (symbolically named <code>omOverlayDBType</code>), and contain resources with the same IDs and types as the resources in the base database. When you request a resource from the database using <a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a> or <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a>, the overlay is searched first. If the overlay contains a resource for the given ID, it is returned. If not, the resource from the base database is returned. </p>

<p><a name="1010648"> </a>The <code>DmOpenRef</code> returned by this function is the pointer to the base database, not to the overlay database, so care should be taken when passing this pointer to functions such as <a href="DataAndResourceManager.html#1009528"><code>DmFindResource()</code></a> because this circumvents the overlay. </p>

<p><a name="1010652"> </a>It's possible to create a "stripped" base resource database, one that does not contain any user interface resources. <code>DmOpenDatabase</code> only opens a stripped database if its corresponding overlay exists. If the overlay does not exist or if the overlay doesn't match the resource database, <code>DmOpenDatabase</code> returns <code>NULL</code> and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns the error code <a href="DataAndResourceManager.html#1008528"><code>omErrBaseRequiresOverlay</code></a>.</p>

<p><a name="1010660"> </a>If you open a resource database in a writable mode, the associated overlay is not opened. If you make changes to the resource database, the overlay database is invalidated if those changes affect any resources that are also in the overlay. This means that on future occasions where you open the resource database in read-only mode, the overlay will not be opened because Palm OS considers it to be invalid. </p>

<div><hr>
  <a name="1010661"> </a> <b>TIP: </b> If you want to prevent your resource database from being overlaid, include an <code>'xprf'</code> resource (symbolically named <code>sysResTExtPrefs</code>) in the database with the ID 0 (<code>sysResIDExtPrefs</code>) and set its <code>disableOverlays</code> flag. This resource is defined in <code>UIResources.r</code>. 
<hr>
</div>
<h4>
  <a name="1010665"> </a>Compatibility 
</h4>

<p><a name="1010669"> </a>Overlay support is only available if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. On earlier releases, this function opens resource databases without looking for an associated overlay. </p>

<p><a name="1010673"> </a>If <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present, when <code>DmOpenDatabase</code> attempts to open a stripped resource database and cannot find an overlay for it, it searches for an overlay matching the default locale if the system locale is different from the default locale. </p>

<p><a name="1049647"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010674"> </a>See Also 
</h4>

<p><a name="1010681"> </a><a href="DataAndResourceManager.html#1008802"><code>DmCloseDatabase()</code></a>, <a href="DataAndResourceManager.html#1008861"><code>DmCreateDatabase()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>, <a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a>, <a href="DataAndResourceManager.html#1009196"><code>DmDeleteDatabase()</code></a>, <a href="DataAndResourceManager.html#1010783"><code>DmOpenDBNoOverlay()</code></a> </p>

<h3 class="hbH3">
  <a name="1010696"> </a>DmOpenDatabaseByTypeCreator Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010698"> </a>Purpose 
</h4>

<p><a name="1010699"> </a>Open the most recent revision of a database with the given type and creator. If the database is a resource database, also open its overlay for the current locale. </p>
<h4>
  <a name="1010700"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010701"> </a></code><h4>
  <a name="1010702"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010704"></a>DmOpenRef DmOpenDatabaseByTypeCreator(
   UInt32 type,
   UInt32 creator,
   UInt16 mode
)
</pre>
<h4>
  <a name="1010705"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010706"> </a><code>&rarr;  <i><code>type</code></i></code></dt>
<dd><a name="1010707"> </a>Type of database.</dd>

<dt><a name="1010708"> </a><code>&rarr;  <i><code>creator</code></i></code></dt>
<dd><a name="1010709"> </a>Creator of database.</dd>

<dt><a name="1010710"> </a><code>&rarr;  <i><code>mode</code></i></code></dt>
<dd><a name="1010713"> </a>Which mode to open database in (see <a href="DataAndResourceManager.html#1008538">"Open Mode Constants"</a>).</dd>

</dl>
<h4>
  <a name="1010715"> </a>Returns 
</h4>

<p><a name="1010716"> </a><code>DmOpenRef</code> to open database. If the database couldn't be found, this function returns 0 and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1010720"> </a>Comments 
</h4>

<p><a name="1010721"> </a>If you use this routine to open a resource database in read-only mode, it also opens the overlay associated with this database for the current locale. See <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a> for more information on overlays and resource databases. </p>
<h4>
  <a name="1010725"> </a>Compatibility 
</h4>

<p><a name="1010729"> </a>Overlay support is only available if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. On earlier releases, this function opens resource databases without looking for an associated overlay. </p>

<p><a name="1050022"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010730"> </a>See Also 
</h4>

<p><a name="1010737"> </a><a href="DataAndResourceManager.html#1008861"><code>DmCreateDatabase()</code></a>, <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a>, <a href="DataAndResourceManager.html#1010749"><code>DmOpenDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1008802"><code>DmCloseDatabase()</code></a>, <a href="DataAndResourceManager.html#1010783"><code>DmOpenDBNoOverlay()</code></a> </p>

<h3 class="hbH3">
  <a name="1010749"> </a>DmOpenDatabaseInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010751"> </a>Purpose 
</h4>

<p><a name="1010752"> </a>Retrieve information about an open database.</p>
<h4>
  <a name="1010753"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010754"> </a></code><h4>
  <a name="1010755"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010757"></a>Err DmOpenDatabaseInfo (
   DmOpenRef dbP,
   LocalID *dbIDP,
   UInt16 *openCountP,
   UInt16 *modeP,
   UInt16 *cardNoP,
   Boolean *resDBP
)
</pre>
<h4>
  <a name="1010758"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010759"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010760"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010761"> </a><code>&larr;  <i><code>dbIDP</code></i></code></dt>
<dd><a name="1010762"> </a>The ID of the database. Pass <code>NULL</code> for this parameter if you don't want to retrieve this information.</dd>

<dt><a name="1010763"> </a><code>&larr;  <i><code>openCountP</code></i></code></dt>
<dd><a name="1010764"> </a>The number of applications that have this database open. Pass <code>NULL</code> for this parameter if you don't want to retrieve this information.</dd>

<dt><a name="1010765"> </a><code>&larr;  <i><code>modeP</code></i></code></dt>
<dd><a name="1010768"> </a>The mode used to open the database (see <a href="DataAndResourceManager.html#1008538">"Open Mode Constants"</a>). Pass <code>NULL</code> for this parameter if you don't want to retrieve this information.</dd>

<dt><a name="1010770"> </a><code>&larr;  <i><code>cardNoP</code></i></code></dt>
<dd><a name="1010771"> </a>The number of the card on which this database resides. Pass <code>NULL</code> for this parameter if you don't want to retrieve this information.</dd>

<dt><a name="1010772"> </a><code>&larr;  <i><code>resDBP</code></i></code></dt>
<dd><a name="1010773"> </a>If <code>true</code> upon return, the database is a resource database, <code>false</code> otherwise. Pass <code>NULL</code> for this parameter if you don't want to retrieve this information.</dd>

</dl>
<h4>
  <a name="1010774"> </a>Returns 
</h4>

<p><a name="1010775"> </a>Returns <code>errNone</code> if no error. </p>
<h4>
  <a name="1010776"> </a>See Also 
</h4>

<p><a name="1010780"> </a><a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a> </p>

<h3 class="hbH3">
  <a name="1010783"> </a>DmOpenDBNoOverlay Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010785"> </a>Purpose 
</h4>

<p><a name="1010786"> </a>Open a database and return a reference to it.</p>
<h4>
  <a name="1010787"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010788"> </a></code><h4>
  <a name="1010789"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010791"></a>DmOpenRef DmOpenDBNoOverlay (
   UInt16 cardNo,
   LocalID dbID,
   UInt16 mode
)
</pre>
<h4>
  <a name="1010792"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010793"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1010794"> </a>Card number database resides on.</dd>

<dt><a name="1010795"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1010796"> </a>The database ID of the database.</dd>

<dt><a name="1010797"> </a><code>&rarr;  <i><code>mode</code></i></code></dt>
<dd><a name="1010800"> </a>Which mode to open database in (see <a href="DataAndResourceManager.html#1008538">"Open Mode Constants"</a>). </dd>

</dl>
<h4>
  <a name="1010802"> </a>Returns 
</h4>

<p><a name="1010803"> </a><code>DmOpenRef</code> to open database. May display a fatal error message if the database parameter is <code>NULL</code>. On all other errors, this function returns 0 and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure.</p>
<h4>
  <a name="1010807"> </a>Comments 
</h4>

<p><a name="1010808"> </a>Call this routine to open a database for reading or writing, while ignoring any overlay databases that might be associated with it. </p>

<p><a name="1010809"> </a>This routine returns a <code>DmOpenRef</code> which must be used to access particular records in a database. If unsuccessful, 0 is returned and the cause of the error can be determined by calling <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a>.</p>
<h4>
  <a name="1010813"> </a>Compatibility 
</h4>

<p><a name="1010817"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. </p>

<p><a name="1050173"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010818"> </a>See Also 
</h4>

<p><a name="1010825"> </a><a href="DataAndResourceManager.html#1008802"><code>DmCloseDatabase()</code></a>, <a href="DataAndResourceManager.html#1008861"><code>DmCreateDatabase()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>, <a href="DataAndResourceManager.html#1010696"><code>DmOpenDatabaseByTypeCreator()</code></a>, <a href="DataAndResourceManager.html#1009196"><code>DmDeleteDatabase()</code></a>, <a href="DataAndResourceManager.html#1010606"><code>DmOpenDatabase()</code></a> </p>

<h3 class="hbH3">
  <a name="1010840"> </a>DmPositionInCategory Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010842"> </a>Purpose 
</h4>

<p><a name="1010843"> </a>Return a position of a record within the specified category. </p>
<h4>
  <a name="1010844"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010845"> </a></code><h4>
  <a name="1010846"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010848"></a>UInt16 DmPositionInCategory (
   DmOpenRef dbP,
   UInt16 index,
   UInt16 category
) 
</pre>
<h4>
  <a name="1010849"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010850"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010851"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010852"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1010853"> </a>Index of the record.</dd>

<dt><a name="1010854"> </a><code>&rarr;  <i><code>category</code></i></code></dt>
<dd><a name="1010855"> </a>Index of category to search.</dd>

</dl>
<h4>
  <a name="1010856"> </a>Returns 
</h4>

<p><a name="1010857"> </a>Returns the position (zero-based). If the specified index is out of range, this function returns 0 and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. Note that this means a 0 return value might indicate either success or failure. If this function returns 0 and <code>DmGetLastErr</code> returns <code>errNone</code>, the return value indicates that this is the first record in the category. </p>
<h4>
  <a name="1010861"> </a>Comments 
</h4>

<p><a name="1010862"> </a>Because this function must examine all records up to the current record, it can be slow to return, especially when called on a large database.</p>

<p><a name="1010863"> </a>Records that have the <code>deleted</code> bit set are ignored, and if the user has specified that private records should be hidden or masked, private records are ignored as well. </p>

<p><a name="1010865"> </a>If the record is ROM-based (pointer accessed) this routine makes a fake handle to it and stores this handle in the <code>DmAccessType</code> structure.</p>

<p><a name="1050253"> </a>To learn which category a record is in, use <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a>. </p>
<h4>
  <a name="1050254"> </a>Compatibility 
</h4>

<p><a name="1050258"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010870"> </a>See Also 
</h4>

<p><a name="1010877"> </a><a href="DataAndResourceManager.html#1010883"><code>DmQueryNextInCategory()</code></a>, <a href="DataAndResourceManager.html#1011450"><code>DmSeekRecordInCategory()</code></a>, <a href="DataAndResourceManager.html#1010217"><code>DmMoveCategory()</code></a></p>

<h3 class="hbH3">
  <a name="1010883"> </a>DmQueryNextInCategory Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010885"> </a>Purpose 
</h4>

<p><a name="1010886"> </a>Return a handle to the next record in the specified category for reading only (does not set the <code>busy</code> bit).</p>
<h4>
  <a name="1010888"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010889"> </a></code><h4>
  <a name="1010890"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010892"></a>MemHandle DmQueryNextInCategory (
   DmOpenRef dbP,
   UInt16 *indexP,
   UInt16 category
)
</pre>
<h4>
  <a name="1010893"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010894"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010895"> </a><code>DmOpenRef</code> to open database. </dd>

<dt><a name="1010896"> </a><code>&harr;  <i><code>indexP</code></i></code></dt>
<dd><a name="1010897"> </a>Index of a known record (often retrieved with <a href="DataAndResourceManager.html#1010840"><code>DmPositionInCategory()</code></a>). If a "next" record is found, this index is updated to indicate that record.</dd>

<dt><a name="1010901"> </a><code>&rarr;  <i><code>category</code></i></code></dt>
<dd><a name="1010902"> </a>Index of category to query, or <code>dmAllCategories</code> to find the next record in any category. </dd>

</dl>
<h4>
  <a name="1010903"> </a>Returns 
</h4>

<p><a name="1010904"> </a>Returns a handle to the record following a known record, along with the index of that record. If a record couldn't be found, this function returns <code>NULL</code>, and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. </p>
<h4>
  <a name="1010908"> </a>Comments 
</h4>

<p><a name="1010909"> </a>This function begins searching the database from the record at <code>*indexP</code> for a record that is in the specified category. If the record at <code>*indexP</code> belongs to that category, then a handle to it is returned. If not, the function continues searching until it finds a record in the category. </p>

<p><a name="1010910"> </a>Records that have the <code>deleted</code> bit set are skipped, and if the user has specified that private records should be hidden or masked, private records are skipped as well. </p>

<p><a name="1010911"> </a>Thus, if you want to find the next record in the category after the one you have an index for, increment the index value before calling this function. For example: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
DmOpenRef myDB;<a name="1010912"> </a>
UInt16 record, attr, category, pos;<a name="1010913"> </a>
MemHandle newRecH;<a name="1010914"> </a>
 <a name="1010915"> </a>
DmRecordInfo(myDB, record, &amp;attr, NULL, NULL);<a name="1010916"> </a>
category = attr &amp; dmRecAttrCategoryMask;<a name="1010917"> </a>
pos = DmPositionInCategory(myDB, record, <a name="1010918"> </a>
  category);<a name="1010919"> </a>
pos++;<a name="1010920"> </a>
newRecH = DmQueryNextInCategory(myDB, &amp;pos, category);<a name="1010921"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1050267"> </a>Compatibility 
</h4>

<p><a name="1050271"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010922"> </a>See Also 
</h4>

<p><a name="1010929"> </a><a href="DataAndResourceManager.html#1010539"><code>DmNumRecordsInCategory()</code></a>, <a href="DataAndResourceManager.html#1010840"><code>DmPositionInCategory()</code></a>, <a href="DataAndResourceManager.html#1011450"><code>DmSeekRecordInCategory()</code></a> </p>

<h3 class="hbH3">
  <a name="1010935"> </a>DmQueryRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010937"> </a>Purpose 
</h4>

<p><a name="1010938"> </a>Return a handle to a record for reading only (does not set the <code>busy</code> bit).</p>
<h4>
  <a name="1010939"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010940"> </a></code><h4>
  <a name="1010941"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010943"></a>MemHandle DmQueryRecord (
   DmOpenRef dbP,
   UInt16 index
)
</pre>
<h4>
  <a name="1010944"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010945"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010946"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1010947"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1010948"> </a>Which record to retrieve.</dd>

</dl>
<h4>
  <a name="1010949"> </a>Returns 
</h4>

<p><a name="1010950"> </a>Returns a record handle. If an error occurs, this function returns <code>NULL</code>, and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. </p>

<p><a name="1010954"> </a>Some releases may display a fatal error message if the specified index is out of range. </p>
<h4>
  <a name="1010955"> </a>Comments 
</h4>

<p><a name="1010956"> </a>Returns a handle to the given record. Use this routine only when viewing the record. This routine successfully returns a handle to the record even if the record is busy.</p>

<p><a name="1010958"> </a>If the record is ROM-based (pointer accessed) this routine returns the fake handle to it.</p>
<h4>
  <a name="1050280"> </a>Compatibility 
</h4>

<p><a name="1050284"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>

<h3 class="hbH3">
  <a name="1010961"> </a>DmQuickSort Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010963"> </a>Purpose 
</h4>

<p><a name="1010964"> </a>Sort records in a database. </p>
<h4>
  <a name="1010965"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1010966"> </a></code><h4>
  <a name="1010967"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010969"></a>Err DmQuickSort (
   DmOpenRef dbP,
   DmComparF *compar,
   Int16 other
)
</pre>
<h4>
  <a name="1010971"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010972"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1010973"> </a>Database access pointer.</dd>

<dt><a name="1010974"> </a><code>&rarr;  <i><code>compar</code></i></code></dt>
<dd><a name="1010978"> </a>Comparison function. See <a href="DataAndResourceManager.html#1011791"><code>DmComparF()</code></a>.</dd>

<dt><a name="1010979"> </a><code>&rarr;  <i><code>other</code></i></code></dt>
<dd><a name="1010980"> </a>Any value the application wants to pass to the comparison function. This parameter is often used to indicate a sort direction (ascending or descending).</dd>

</dl>
<h4>
  <a name="1010981"> </a>Returns 
</h4>

<p><a name="1010982"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs:</p>
<ul type="disc">
  <li><a name="1010986"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1010990"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a>
</ul>

<p><a name="1010991"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1010992"> </a>Comments 
</h4>

<p><a name="1010993"> </a>Deleted records are placed last in any order. All others are sorted according to the passed comparison function.</p>

<p><a name="1010994"> </a>After <code>DmQuickSort</code> returns, equal database records do not have a consistent order. That is, if <code>DmQuickSort</code> is passed two equal records, their resulting order is unpredictable. To prevent records that contain the same data from being rearranged in an unpredictable order, pass the record's unique ID to the comparison function (using the <a href="DataAndResourceManager.html#1008103"><code>SortRecordInfoType</code></a> structure). </p>

<p><a name="1010998"> </a><code>DmQuickSort</code> contains its own stack to limit uncontrolled recursion. When the stack is full <code>DmQuickSort</code> instead performs an insertion sort. An insertion sort is also performed when the number of records is low, avoiding the noticeable overhead of a quick sort with a small number of records. Finally, if the records seem mostly sorted an insertion sort is performed to move only those records that need moving.</p>
<h4>
  <a name="1050293"> </a>Compatibility 
</h4>

<p><a name="1050297"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1010999"> </a>See Also 
</h4>

<p><a name="1011006"> </a><a href="DataAndResourceManager.html#1009676"><code>DmFindSortPositionV10()</code></a>, <a href="DataAndResourceManager.html#1010176"><code>DmInsertionSort()</code></a></p>

<h3 class="hbH3">
  <a name="1011009"> </a>DmRecordInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011011"> </a>Purpose 
</h4>

<p><a name="1011013"> </a>Retrieve the record information as stored in the database header.</p>
<h4>
  <a name="1011014"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011015"> </a></code><h4>
  <a name="1011016"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011018"></a>Err DmRecordInfo (
   DmOpenRef dbP,
   UInt16 index,
   UInt16 *attrP,
   UInt32 *uniqueIDP,
   LocalID *chunkIDP
)
</pre>
<h4>
  <a name="1011019"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011020"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011021"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011022"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011023"> </a>Index of the record.</dd>

<dt><a name="1011024"> </a><code>&larr;  <i><code>attrP</code></i></code></dt>
<dd><a name="1011028"> </a>The record's attributes. See <a href="DataAndResourceManager.html#1008189">"Record Attribute Constants."</a> Pass <code>NULL</code> for this parameter if you don't want to retrieve this value.</dd>

<dt><a name="1011029"> </a><code>&larr;  <i><code>uniqueIDP</code></i></code></dt>
<dd><a name="1011030"> </a>The record's unique ID. Pass <code>NULL</code> for this parameter if you don't want to retrieve this value.</dd>

<dt><a name="1011031"> </a><code>&larr;  <i><code>chunkIDP</code></i></code></dt>
<dd><a name="1011032"> </a>The record's local ID. Pass <code>NULL</code> for this parameter if you don't want to retrieve this value.</dd>

</dl>
<h4>
  <a name="1011033"> </a>Returns 
</h4>

<p><a name="1011037"> </a>Returns <code>errNone</code> if no error or <a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> if the specified record can't be found. Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1050386"> </a>Compatibility 
</h4>

<p><a name="1050390"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1011038"> </a>See Also 
</h4>

<p><a name="1011045"> </a><a href="DataAndResourceManager.html#1010506"><code>DmNumRecords()</code></a>, <a href="DataAndResourceManager.html#1011610"><code>DmSetRecordInfo()</code></a>, <a href="DataAndResourceManager.html#1010883"><code>DmQueryNextInCategory()</code></a></p>

<h3 class="hbH3">
  <a name="1011051"> </a>DmReleaseRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011053"> </a>Purpose 
</h4>

<p><a name="1011054"> </a>Clear the <code>busy</code> bit for the given record and set the <code>dirty</code> bit if dirty is <code>true</code>.</p>
<h4>
  <a name="1011055"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011056"> </a></code><h4>
  <a name="1011057"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011059"></a>Err DmReleaseRecord (
   DmOpenRef dbP,
   UInt16 index,
   Boolean dirty
)
</pre>
<h4>
  <a name="1011060"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011061"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011062"> </a><code>DmOpenRef</code> to open database. </dd>

<dt><a name="1011063"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011064"> </a>The record to unlock.</dd>

<dt><a name="1011065"> </a><code>&rarr;  <i><code>dirty</code></i></code></dt>
<dd><a name="1011066"> </a>If <code>true</code>, set the <code>dirty</code> bit.</dd>

</dl>
<h4>
  <a name="1011067"> </a>Returns 
</h4>

<p><a name="1011071"> </a>Returns <code>errNone</code> if no error, or <a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> if the specified index is out of range. Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1011072"> </a>Comments 
</h4>

<p><a name="1011073"> </a>Call this routine when you finish modifying or reading a record that you've called <a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a> on or created using <a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a>. </p>
<h4>
  <a name="1050443"> </a>Compatibility 
</h4>

<p><a name="1050447"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1011080"> </a>See Also 
</h4>

<p><a name="1011084"> </a><a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a> </p>

<h3 class="hbH3">
  <a name="1011087"> </a>DmReleaseResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011089"> </a>Purpose 
</h4>

<p><a name="1011093"> </a>Release a resource acquired with <a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a>.</p>
<h4>
  <a name="1011094"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011095"> </a></code><h4>
  <a name="1011096"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011098"></a>Err DmReleaseResource (
   MemHandle resourceH
)
</pre>
<h4>
  <a name="1011099"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011100"> </a><code>&rarr;  <i><code>resourceH</code></i></code></dt>
<dd><a name="1011101"> </a>Handle to resource.</dd>

</dl>
<h4>
  <a name="1011102"> </a>Returns 
</h4>

<p><a name="1011103"> </a>Returns <code>errNone</code> if no error.</p>
<h4>
  <a name="1011104"> </a>Comments 
</h4>

<p><a name="1011105"> </a>Marks a resource as being no longer needed by the application.</p>
<h4>
  <a name="1011106"> </a>See Also 
</h4>

<p><a name="1011113"> </a><a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a>, <a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a></p>

<h3 class="hbH3">
  <a name="1011116"> </a>DmRemoveRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011118"> </a>Purpose 
</h4>

<p><a name="1011119"> </a>Remove a record from a database and dispose of its data chunk.</p>
<h4>
  <a name="1011120"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011121"> </a></code><h4>
  <a name="1011122"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011124"></a>Err DmRemoveRecord (
   DmOpenRef dbP,
   UInt16 index
)
</pre>
<h4>
  <a name="1011125"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011126"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011127"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011128"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011129"> </a>Index of the record to remove.</dd>

</dl>
<h4>
  <a name="1011130"> </a>Returns 
</h4>

<p><a name="1011131"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1011135"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1011139"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a>
  <li><a name="1011143"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a>
  <li><a name="1011147"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a>
  <li><a name="1011151"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a>
</ul>

<p><a name="1011152"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1011153"> </a>Comments 
</h4>

<p><a name="1011154"> </a>Disposes of a the record's data chunk and removes the record's entry from the database header. <code>DmRemoveRecord</code> should only be used for newly-created records that have just been deleted or records that have never been sync'ed.</p>
<h4>
  <a name="1050456"> </a>Compatibility 
</h4>

<p><a name="1050460"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1011155"> </a>See Also 
</h4>

<p><a name="1011162"> </a><a href="DataAndResourceManager.html#1009348"><code>DmDetachRecord()</code></a>, <a href="DataAndResourceManager.html#1009291"><code>DmDeleteRecord()</code></a>, <a href="DataAndResourceManager.html#1008608"><code>DmArchiveRecord()</code></a>, <a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a></p>

<h3 class="hbH3">
  <a name="1011171"> </a>DmRemoveResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011173"> </a>Purpose 
</h4>

<p><a name="1011174"> </a>Delete a resource from a resource database.</p>
<h4>
  <a name="1011175"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011176"> </a></code><h4>
  <a name="1011177"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011179"></a>Err DmRemoveResource (
   DmOpenRef dbP,
   UInt16 index
) 
</pre>
<h4>
  <a name="1011180"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011181"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011182"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011183"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011184"> </a>Index of resource to delete.</dd>

</dl>
<h4>
  <a name="1011185"> </a>Returns 
</h4>

<p><a name="1011186"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1011190"> </a><a href="DataAndResourceManager.html#1008387"><code>dmErrCorruptDatabase</code></a> 
  <li><a name="1011194"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> 
  <li><a name="1011198"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a> 
  <li><a name="1011202"> </a><a href="DataAndResourceManager.html#1008507"><code>memErrChunkLocked</code></a> 
  <li><a name="1011206"> </a><a href="DataAndResourceManager.html#1008512"><code>memErrInvalidParam</code></a> 
  <li><a name="1011210"> </a><a href="DataAndResourceManager.html#1008514"><code>memErrNotEnoughSpace</code></a> 
</ul>

<p><a name="1011211"> </a>May display a fatal error message if the database is not a resource database.</p>
<h4>
  <a name="1011212"> </a>Comments 
</h4>

<p><a name="1011213"> </a>This routine disposes of the memory manager chunk that holds the given resource and removes its entry from the database header.</p>
<h4>
  <a name="1011214"> </a>See Also 
</h4>

<p><a name="1011221"> </a><a href="DataAndResourceManager.html#1009409"><code>DmDetachResource()</code></a>, <a href="DataAndResourceManager.html#1011171"><code>DmRemoveResource()</code></a>, <a href="DataAndResourceManager.html#1008739"><code>DmAttachResource()</code></a></p>

<h3 class="hbH3">
  <a name="1011227"> </a>DmRemoveSecretRecords Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011229"> </a>Purpose 
</h4>

<p><a name="1011231"> </a>Remove all secret records.</p>
<h4>
  <a name="1011232"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011233"> </a></code><h4>
  <a name="1011234"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011236"></a>Err DmRemoveSecretRecords (
   DmOpenRef dbP
)
</pre>
<h4>
  <a name="1011237"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011238"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011239"> </a><code>DmOpenRef</code> to open database. </dd>

</dl>
<h4>
  <a name="1011240"> </a>Returns 
</h4>

<p><a name="1011241"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>
<ul type="disc">
  <li><a name="1011245"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a>
  <li><a name="1011249"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a>
</ul>

<p><a name="1011250"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1050474"> </a>Compatibility 
</h4>

<p><a name="1050478"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, <code>sysErrNotAllowed</code> is returned. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1011251"> </a>See Also 
</h4>

<p><a name="1011261"> </a><a href="DataAndResourceManager.html#1011116"><code>DmRemoveRecord()</code></a>, <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a>, <a href="DataAndResourceManager.html#1011610"><code>DmSetRecordInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1011281"> </a>DmResizeRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011283"> </a>Purpose 
</h4>

<p><a name="1011284"> </a>Resize a record by index.</p>
<h4>
  <a name="1011285"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011286"> </a></code><h4>
  <a name="1011287"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011289"></a>MemHandle DmResizeRecord (
   DmOpenRef dbP,
   UInt16 index,
   UInt32 newSize
)
</pre>
<h4>
  <a name="1011290"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011291"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011292"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011293"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011294"> </a>Which record to retrieve.</dd>

<dt><a name="1011295"> </a><code>&rarr;  <i><code>newSize</code></i></code></dt>
<dd><a name="1011296"> </a>New size of record.</dd>

</dl>
<h4>
  <a name="1011297"> </a>Returns 
</h4>

<p><a name="1011298"> </a>Handle to resized record. Returns <code>NULL</code> if there is not enough space to resize the record, and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1011302"> </a>Comments 
</h4>

<p><a name="1011303"> </a>This routine reallocates the record in another heap of the same memory card if the current heap is not big enough. If this happens, the handle changes, so be sure to use the returned handle to access the resized record.</p>
<h4>
  <a name="1050811"> </a>Compatibility 
</h4>

<p><a name="1050815"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>

<h3 class="hbH3">
  <a name="1011307"> </a>DmResizeResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011309"> </a>Purpose 
</h4>

<p><a name="1011310"> </a>Resize a resource and return the new handle. </p>
<h4>
  <a name="1011311"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011312"> </a></code><h4>
  <a name="1011313"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011315"></a>MemHandle DmResizeResource (
   MemHandle resourceH,
   UInt32 newSize
)
</pre>
<h4>
  <a name="1011316"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011317"> </a><code>&rarr;  <i><code>resourceH</code></i></code></dt>
<dd><a name="1011318"> </a>Handle to resource.</dd>

<dt><a name="1011319"> </a><code>&rarr;  <i><code>newSize</code></i></code></dt>
<dd><a name="1011320"> </a>Desired new size of resource.</dd>

</dl>
<h4>
  <a name="1011321"> </a>Returns 
</h4>

<p><a name="1011322"> </a>Returns a handle to newly sized resource. Returns <code>NULL</code> if there is not enough space to resize the resource, and <a href="DataAndResourceManager.html#1009808"><code>DmGetLastErr()</code></a> returns an error code indicating the reason for failure. Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1011326"> </a>Comments 
</h4>

<p><a name="1011327"> </a>Resizes the resource and returns a new handle. If necessary in order to grow the resource, this routine will reallocate it in another heap on the same memory card that it is currently in.</p>

<p><a name="1011328"> </a>The handle may change if the resource had to be reallocated in a different data heap because there was not enough space in its present data heap.</p>

<h3 class="hbH3">
  <a name="1011331"> </a>DmResourceInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011333"> </a>Purpose 
</h4>

<p><a name="1011335"> </a>Retrieve information on a given resource.</p>
<h4>
  <a name="1011336"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011337"> </a></code><h4>
  <a name="1011338"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011340"></a>Err DmResourceInfo (
   DmOpenRef dbP,
   UInt16 index,
   DmResType *resTypeP,
   DmResID *resIDP,
   LocalID *chunkLocalIDP
)
</pre>
<h4>
  <a name="1011341"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011342"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011343"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011344"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011345"> </a>Index of resource to get info on.</dd>

<dt><a name="1011346"> </a><code>&larr;  <i><code>resTypeP</code></i></code></dt>
<dd><a name="1011347"> </a>The resource type. Pass <code>NULL</code> if you don't want to retrieve this information.</dd>

<dt><a name="1011348"> </a><code>&larr;  <i><code>resIDP</code></i></code></dt>
<dd><a name="1011349"> </a>The resource ID. Pass <code>NULL</code> if you don't want to retrieve this information.</dd>

<dt><a name="1011350"> </a><code>&larr;  <i><code>chunkLocalIDP</code></i></code></dt>
<dd><a name="1011351"> </a>The memory manager local ID of the resource data. Pass <code>NULL</code> if you don't want to retrieve this information.</dd>

</dl>
<h4>
  <a name="1011352"> </a>Returns 
</h4>

<p><a name="1011356"> </a>Returns <code>errNone</code> if no error or <a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> if an error occurred. May display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1011357"> </a>Comments 
</h4>

<p><a name="1011358"> </a>If <code>dbP</code> is a pointer to a base resource database, the information returned is about the resource from that database alone; this function ignores any associated overlay. </p>
<h4>
  <a name="1011359"> </a>See Also 
</h4>

<p><a name="1011366"> </a><a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a>, <a href="DataAndResourceManager.html#1010139"><code>DmGet1Resource()</code></a>, <a href="DataAndResourceManager.html#1011668"><code>DmSetResourceInfo()</code></a>, <a href="DataAndResourceManager.html#1009528"><code>DmFindResource()</code></a>, <a href="DataAndResourceManager.html#1009580"><code>DmFindResourceType()</code></a></p>

<h3 class="hbH3">
  <a name="1011378"> </a>DmSearchRecord Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011380"> </a>Purpose 
</h4>

<p><a name="1011381"> </a>Search all open record databases for a record with the handle passed.</p>
<h4>
  <a name="1011382"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011383"> </a></code><h4>
  <a name="1011384"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011386"></a>UInt16 DmSearchRecord (
   MemHandle recH,
   DmOpenRef *dbPP
)
</pre>
<h4>
  <a name="1011387"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011388"> </a><code>&rarr;  <i><code>recH</code></i></code></dt>
<dd><a name="1011389"> </a>Record handle.</dd>

<dt><a name="1011390"> </a><code>&larr;  <i><code>dbPP</code></i></code></dt>
<dd><a name="1011391"> </a>The database that contains the record <code>recH</code>.</dd>

</dl>
<h4>
  <a name="1011392"> </a>Returns 
</h4>

<p><a name="1011393"> </a>Returns the index of the record and database access pointer; if not found, returns -1 and <code>*dbPP</code> is 0.</p>
<h4>
  <a name="1011394"> </a>See Also 
</h4>

<p><a name="1011404"> </a><a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a>, <a href="DataAndResourceManager.html#1009493"><code>DmFindRecordByID()</code></a>, <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1011408"> </a>DmSearchResource Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011410"> </a>Purpose 
</h4>

<p><a name="1011411"> </a>Search all open resource databases for a resource by type and ID, or by pointer if it is non-<code>NULL</code>.</p>
<h4>
  <a name="1011412"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011413"> </a></code><h4>
  <a name="1011414"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011416"></a>UInt16 DmSearchResource (
   DmResType resType,
   DmResID resID,
   MemHandle resH,
   DmOpenRef *dbPP
)
</pre>
<h4>
  <a name="1011417"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011418"> </a><code>&rarr;  <i><code>resType</code></i></code></dt>
<dd><a name="1011419"> </a>Type of resource to search for.</dd>

<dt><a name="1011420"> </a><code>&rarr;  <i><code>resID</code></i></code></dt>
<dd><a name="1011421"> </a>ID of resource to search for.</dd>

<dt><a name="1011422"> </a><code>&rarr;  <i><code>resH</code></i></code></dt>
<dd><a name="1011423"> </a>Pointer to locked resource, or <code>NULL</code>.</dd>

<dt><a name="1011424"> </a><code>&larr;  <i><code>dbPP</code></i></code></dt>
<dd><a name="1011425"> </a>The resource database that contains the specified resource.</dd>

</dl>
<h4>
  <a name="1011426"> </a>Returns 
</h4>

<p><a name="1011427"> </a>Returns the index of the resource, stores <code>DmOpenRef</code> in <code>dbPP</code>. </p>
<h4>
  <a name="1011428"> </a>Comments 
</h4>

<p><a name="1011429"> </a>This routine can be used to find a resource in all open resource databases by type and ID or by pointer. If <code>resH</code> is <code>NULL</code>, the resource is searched for by type and ID. If <code>resH</code> is not <code>NULL</code>, <code>resType</code> and <code>resID </code>is ignored and the index of the resource handle is returned. On return, <code>*dbPP</code> contains the access pointer of the resource database that the resource was eventually found in. Once the index of a resource is determined, it can be locked down and accessed by calling <a href="DataAndResourceManager.html#1010093"><code>DmGetResourceIndex()</code></a><code>.</code></p>

<p><a name="1011433"> </a>If any of the open databases are overlaid, this function finds and returns the localized version of the resource when searching by type and creator. In this case, the <code>dbPP</code> return value is a pointer to the overlay database, not the base resource database. </p>
<h4>
  <a name="1011434"> </a>See Also 
</h4>

<p><a name="1011441"> </a><a href="DataAndResourceManager.html#1010054"><code>DmGetResource()</code></a>, <a href="DataAndResourceManager.html#1009580"><code>DmFindResourceType()</code></a>, <a href="DataAndResourceManager.html#1011331"><code>DmResourceInfo()</code></a>, <a href="DataAndResourceManager.html#1009528"><code>DmFindResource()</code></a></p>

<h3 class="hbH3">
  <a name="1011450"> </a>DmSeekRecordInCategory Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011452"> </a>Purpose 
</h4>

<p><a name="1011453"> </a>Return the index of the record nearest the offset from the passed record index whose category matches the passed category. (The <code>offset</code> parameter indicates the number of records to move forward or backward.)</p>
<h4>
  <a name="1011455"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011456"> </a></code><h4>
  <a name="1011457"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011459"></a>Err DmSeekRecordInCategory (
   DmOpenRef dbP,
   UInt16 *indexP,
   UInt16 offset,
   Int16 direction,
   UInt16 category
)
</pre>
<h4>
  <a name="1011460"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011461"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011462"> </a><code>DmOpenRef</code> to open database. </dd>

<dt><a name="1011463"> </a><code>&harr;  <i><code>index</code></i></code></dt>
<dd><a name="1011464"> </a>The index to start the search at. Upon return, contains the index of the record at <code>offset</code> from the index that you passed in. </dd>

<dt><a name="1011465"> </a><code>&rarr;  <i><code>offset</code> </i></code></dt>
<dd><a name="1011466"> </a>Offset of the passed record index. This must be a positive number; use <code>dmSeekBackward</code> for the <code>direction</code> parameter to search backwards.</dd>

<dt><a name="1011468"> </a><code>&rarr;  <i><code>direction</code></i></code></dt>
<dd><a name="1011469"> </a>Must be either <code>dmSeekForward</code> or <code>dmSeekBackward</code>.</dd>

<dt><a name="1011470"> </a><code>&rarr;  <i><code>category</code></i></code></dt>
<dd><a name="1011471"> </a>Category index.</dd>

</dl>
<h4>
  <a name="1011472"> </a>Returns 
</h4>

<p><a name="1011476"> </a>Returns <code>errNone</code> if no error; returns <a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> or <a href="DataAndResourceManager.html#1008487"><code>dmErrSeekFailed</code></a> if an error occurred.</p>
<h4>
  <a name="1011480"> </a>Comments 
</h4>

<p><a name="1011481"> </a><code>DmSeekRecordInCategory</code> searches for a record in the specified category. The search begins with the record at <code>index</code>. When it finds a record in the specified category, it decrements the <code>offset</code> parameter and continues searching until a match is found and <code>offset</code> is 0. </p>

<p><a name="1011482"> </a>Because of this, if you use <code>DmSeekRecordInCategory</code> to find the nearest matching record in a particular category, you must pass different <code>offset</code> parameters if the starting record is in the category than if it isn't. If the record at <code>index</code> is in the category, then you must pass an <code>offset</code> of 1 to find the next record in the category because the comparison is performed before the <code>index</code> value changes. If the record at <code>index</code> isn't in the category, you must pass an <code>offset</code> of 0 to find the next record in the category. In this case, an <code>offset</code> of 1 skips the first matching record. </p>

<p><a name="1011483"> </a>Records that have the <code>deleted</code> bit set are ignored, and if the user has specified that private records should be hidden or masked, private records are ignored as well. </p>
<h4>
  <a name="1011484"> </a>See Also 
</h4>

<p><a name="1011491"> </a><a href="DataAndResourceManager.html#1010539"><code>DmNumRecordsInCategory()</code></a>, <a href="DataAndResourceManager.html#1010883"><code>DmQueryNextInCategory()</code></a>, <a href="DataAndResourceManager.html#1010840"><code>DmPositionInCategory()</code></a>, <a href="DataAndResourceManager.html#1010217"><code>DmMoveCategory()</code></a></p>

<h3 class="hbH3">
  <a name="1011500"> </a>DmSet Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011502"> </a>Purpose 
</h4>

<p><a name="1011503"> </a>Write a specified value into a section of a record. This function also checks the validity of the pointer for the record and makes sure the writing of the record information doesn't exceed the bounds of the record.</p>
<h4>
  <a name="1011504"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011505"> </a></code><h4>
  <a name="1011506"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011508"></a>Err DmSet (
   void *recordP,
   UInt32 offset,
   UInt32 bytes,
   UInt8 value
)
</pre>
<h4>
  <a name="1011509"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011510"> </a><code>&rarr;  <i><code>recordP</code></i></code></dt>
<dd><a name="1011511"> </a>Pointer to locked data record (chunk pointer).</dd>

<dt><a name="1011512"> </a><code>&rarr;  <i><code>offset</code></i></code></dt>
<dd><a name="1011513"> </a>Offset within record to start writing.</dd>

<dt><a name="1011514"> </a><code>&rarr;  <i><code>bytes</code></i></code></dt>
<dd><a name="1011515"> </a>Number of bytes to write.</dd>

<dt><a name="1011516"> </a><code>&rarr;  <i><code>value</code></i></code></dt>
<dd><a name="1011517"> </a>Byte value to write.</dd>

</dl>
<h4>
  <a name="1011518"> </a>Returns 
</h4>

<p><a name="1011519"> </a>Returns <code>errNone</code> if no error. May display a fatal error message if the record pointer is invalid or the function overwrites the record. </p>
<h4>
  <a name="1011520"> </a>Comments 
</h4>

<p><a name="1011521"> </a>Must be used to write to data manager records because the data storage area is write-protected. </p>
<h4>
  <a name="1011522"> </a>See Also 
</h4>

<p><a name="1011526"> </a><a href="DataAndResourceManager.html#1052867"><code>DmWrite()</code></a> </p>

<h3 class="hbH3">
  <a name="1011529"> </a>DmSetDatabaseInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011531"> </a>Purpose 
</h4>

<p><a name="1011532"> </a>Set information about a database.</p>
<h4>
  <a name="1011533"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011534"> </a></code><h4>
  <a name="1011535"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011537"></a>Err DmSetDatabaseInfo (
   UInt16 cardNo,
   LocalID dbID,
   const Char *nameP,
   UInt16 *attributesP,
   UInt16 *versionP,
   UInt32 *crDateP,
   UInt32 *modDateP,
   UInt32 *bckUpDateP,
   UInt32 *modNumP,
   LocalID *appInfoIDP,
   LocalID *sortInfoIDP,
   UInt32 *typeP,
   UInt32 *creatorP
)
</pre>
<h4>
  <a name="1011538"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011539"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1011540"> </a>Card number the database resides on.</dd>

<dt><a name="1011541"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1011542"> </a>Database ID of the database.</dd>

<dt><a name="1011543"> </a><code>&rarr;  <i><code>nameP</code></i></code></dt>
<dd><a name="1011544"> </a>Pointer to the new name of the database, or <code>NULL</code>. A database name can be up to 32 ASCII bytes long, including the null terminator (as specified by <code>dmDBNameLength</code>). Database names must use only 7-bit ASCII characters (0x20 through 0x7E). </dd>

<dt><a name="1011546"> </a><code>&rarr;  <i><code>attributesP</code></i></code></dt>
<dd><a name="1011549"> </a>Pointer to new attributes variable, or <code>NULL</code>. See <a href="DataAndResourceManager.html#1008258">"Database Attribute Constants"</a> for a list of possible values.</dd>

<dt><a name="1011551"> </a><code>&rarr;  <i><code>versionP</code></i></code></dt>
<dd><a name="1011552"> </a>Pointer to new version, or <code>NULL</code>. </dd>

<dt><a name="1011553"> </a><code>&rarr;  <i><code>crDateP</code></i></code></dt>
<dd><a name="1011554"> </a>Pointer to new creation date variable, or <code>NULL</code>. Specify the value as a number of seconds since Jan. 1, 1904.</dd>

<dt><a name="1011555"> </a><code>&rarr;  <i><code>modDateP</code></i></code></dt>
<dd><a name="1011556"> </a>Pointer to new modification date variable, or <code>NULL</code>. Specify the value as a number of seconds since Jan. 1, 1904.</dd>

<dt><a name="1011557"> </a><code>&rarr;  <i><code>bckUpDateP</code></i></code></dt>
<dd><a name="1011558"> </a>Pointer to new backup date variable, or <code>NULL</code>. Specify the value as a number of seconds since Jan. 1, 1904.</dd>

<dt><a name="1011559"> </a><code>&rarr;  <i><code>modNumP</code></i></code></dt>
<dd><a name="1011560"> </a>Pointer to new modification number variable, or <code>NULL</code>.</dd>

<dt><a name="1011561"> </a><code>&rarr;  <i><code>appInfoIDP</code></i></code></dt>
<dd><a name="1011562"> </a>Pointer to new <code>appInfoID</code> variable, or <code>NULL</code>.</dd>

<dt><a name="1011563"> </a><code>&rarr;  <i><code>sortInfoIDP</code></i></code></dt>
<dd><a name="1011564"> </a>Pointer to new <code>sortInfoID</code> variable, or <code>NULL</code>.</dd>

<dt><a name="1011565"> </a><code>&rarr;  <i><code>typeP</code></i></code></dt>
<dd><a name="1011566"> </a>Pointer to new <code>type</code> variable, or <code>NULL</code>.</dd>

<dt><a name="1011567"> </a><code>&rarr;  <i><code>creatorP</code></i></code></dt>
<dd><a name="1011568"> </a>Pointer to new <code>creator</code> variable, or <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1011569"> </a>Returns 
</h4>

<p><a name="1011570"> </a>Returns <code>errNone</code> if no error or one of the following if an error occurred: </p>
<ul type="disc">
  <li><a name="1011574"> </a><a href="DataAndResourceManager.html#1008416"><code>dmErrInvalidDatabaseName</code></a> 
  <li><a name="1011578"> </a><a href="DataAndResourceManager.html#1008368"><code>dmErrAlreadyExists</code></a> 
  <li><a name="1011582"> </a><a href="DataAndResourceManager.html#1008421"><code>dmErrInvalidParam</code></a> 
</ul>
<h4>
  <a name="1011583"> </a>Comments 
</h4>

<p><a name="1011584"> </a>When this call changes <code>appInfoID</code> or <code>sortInfoID</code>, the old chunk ID (if any) is marked as an orphaned chunk<a href="#1011587"><sup>1</sup></a> and the new chunk ID is unorphaned. Consequently, you shouldn't replace an existing <code>appInfoID</code> or <code>sortInfoID</code> if that chunk has already been attached to another database.</p>

<p><a name="1011590"> </a>Call this routine to set any or all information about a database except for the card number and database ID. This routine sets the new value for any non-<code>NULL</code> parameter.</p>
<h4>
  <a name="1011591"> </a>See Also 
</h4>

<p><a name="1011598"> </a><a href="DataAndResourceManager.html#1008974"><code>DmDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1010749"><code>DmOpenDatabaseInfo()</code></a>, <a href="DataAndResourceManager.html#1009460"><code>DmFindDatabase()</code></a>, <a href="DataAndResourceManager.html#1009928"><code>DmGetNextDatabaseByTypeCreator()</code></a>, <a href="DateAndTimeManager.html#1098496"><code>TimDateTimeToSeconds()</code></a></p>

<h3 class="hbH3">
  <a name="1011610"> </a>DmSetRecordInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011612"> </a>Purpose 
</h4>

<p><a name="1011613"> </a>Set record information stored in the database header.</p>
<h4>
  <a name="1011614"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011615"> </a></code><h4>
  <a name="1011616"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011618"></a>Err DmSetRecordInfo (
   DmOpenRef dbP,
   UInt16 index,
   UInt16 *attrP,
   UInt32 *uniqueIDP
)
</pre>
<h4>
  <a name="1011619"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011620"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011621"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011622"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011623"> </a>Index of record.</dd>

<dt><a name="1011624"> </a><code>&rarr;  <i><code>attrP</code></i></code></dt>
<dd><a name="1011627"> </a>Pointer to new attribute variable, or <code>NULL</code>. See <a href="DataAndResourceManager.html#1008189">"Record Attribute Constants"</a> for a list of possible values.</dd>

<dt><a name="1011629"> </a><code>&rarr;  <i><code>uniqueIDP</code></i></code></dt>
<dd><a name="1011630"> </a>Pointer to new unique ID variable, or <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1011631"> </a>Returns 
</h4>

<p><a name="1011632"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurred:</p>
<ul type="disc">
  <li><a name="1011636"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a> 
  <li><a name="1011640"> </a><a href="DataAndResourceManager.html#1008435"><code>dmErrNotRecordDB</code></a> 
  <li><a name="1011644"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> 
</ul>

<p><a name="1011645"> </a>Some releases may display a fatal error message instead of returning the error code. </p>
<h4>
  <a name="1011646"> </a>Comments 
</h4>

<p><a name="1011647"> </a>Sets information about a record. This routine cannot be used to set the <code>dmRecAttrBusy</code> bit; instead, use <a href="DataAndResourceManager.html#1010008"><code>DmGetRecord()</code></a> to set the bit and <a href="DataAndResourceManager.html#1011051"><code>DmReleaseRecord()</code></a> to clear it.</p>

<p><a name="1011654"> </a>Normally, the unique ID for a record is automatically created by the data manager when a record is created using <a href="DataAndResourceManager.html#1010335"><code>DmNewRecord()</code></a>, so an application would not typically change the unique ID. </p>
<h4>
  <a name="1050824"> </a>Compatibility 
</h4>

<p><a name="1050828"> </a>If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present and the call to this function involves a PIM application database, PACE intercepts the call and takes the appropriate action on the corresponding schema database. For more information see <a href="CompatibilityApdx.html#1031310">"Accessing the PIM Application Databases."</a></p>
<h4>
  <a name="1011658"> </a>See Also 
</h4>

<p><a name="1011665"> </a><a href="DataAndResourceManager.html#1010506"><code>DmNumRecords()</code></a>, <a href="DataAndResourceManager.html#1011009"><code>DmRecordInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1011668"> </a>DmSetResourceInfo Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011670"> </a>Purpose 
</h4>

<p><a name="1011671"> </a>Set information on a given resource.</p>
<h4>
  <a name="1011672"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011673"> </a></code><h4>
  <a name="1011674"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011676"></a>Err DmSetResourceInfo (
   DmOpenRef dbP,
   UInt16 index,
   DmResType *resTypeP,
   DmResID *resIDP
)
</pre>
<h4>
  <a name="1011677"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011678"> </a><code>&rarr;  <i><code>dbP</code></i></code></dt>
<dd><a name="1011679"> </a><code>DmOpenRef</code> to open database.</dd>

<dt><a name="1011680"> </a><code>&rarr;  <i><code>index</code></i></code></dt>
<dd><a name="1011681"> </a>Index of resource to set info for.</dd>

<dt><a name="1011682"> </a><code>&rarr;  <i><code>resTypeP</code></i></code></dt>
<dd><a name="1011683"> </a>Pointer to new <code>resType</code> (resource type), or <code>NULL</code>.</dd>

<dt><a name="1011684"> </a><code>&rarr;  <i><code>resIDP</code></i></code></dt>
<dd><a name="1011685"> </a>Pointer to new resource ID, or <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1011686"> </a>Returns 
</h4>

<p><a name="1011687"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurred: </p>
<ul type="disc">
  <li><a name="1011691"> </a><a href="DataAndResourceManager.html#1008411"><code>dmErrIndexOutOfRange</code></a> 
  <li><a name="1011695"> </a><a href="DataAndResourceManager.html#1008453"><code>dmErrReadOnly</code></a> 
</ul>

<p><a name="1011696"> </a>May display a fatal error message if the database is not a resource database. </p>
<h4>
  <a name="1011697"> </a>Comments 
</h4>

<p><a name="1011698"> </a>Use this routine to set all or a portion of the information on a particular resource. Any or all of the new info pointers can be <code>NULL</code>. If not <code>NULL</code>, the type and ID of the resource are changed to *<code>resTypeP</code> and *<code>resIDP</code>.</p>

<h3 class="hbH3">
  <a name="1011701"> </a>DmStrCopy Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011703"> </a>Purpose 
</h4>

<p><a name="1011704"> </a>Copies a string to a record within a database that is open for writing.</p>
<h4>
  <a name="1011705"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011706"> </a></code><h4>
  <a name="1011707"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011709"></a>Err DmStrCopy (
   void *recordP,
   UInt32 offset,
   const Char *srcP
)
</pre>
<h4>
  <a name="1011710"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011711"> </a><code>&harr;  <i><code>recordP</code></i></code></dt>
<dd><a name="1011712"> </a>Pointer to data record (chunk pointer).</dd>

<dt><a name="1011713"> </a><code>&rarr;  <i><code>offset</code></i></code></dt>
<dd><a name="1011714"> </a>Offset within record to start writing.</dd>

<dt><a name="1011715"> </a><code>&rarr;  <i><code>srcP</code></i></code></dt>
<dd><a name="1011716"> </a>Pointer to null-terminated string.</dd>

</dl>
<h4>
  <a name="1011717"> </a>Returns 
</h4>

<p><a name="1011718"> </a>Returns <code>errNone</code> if no error. May display a fatal error message if the record pointer is invalid or the function overwrites the record. </p>
<h4>
  <a name="1011719"> </a>Comments 
</h4>

<p><a name="1011720"> </a>This is one of the routines that must be used to write to Data Manager records; because the data storage area is write-protected, you cannot write to it directly. This routine checks the validity of the chunk pointer for the record to insure that writing the record will not exceed the chunk bounds. DmStrCopy is a convenience method that determines the size of the supplied string and then simply calls <a href="DataAndResourceManager.html#1052867"><code>DmWrite()</code></a>.</p>
<h4>
  <a name="1052860"> </a>See Also 
</h4>

<p><a name="1052864"> </a><a href="DataAndResourceManager.html#1011500"><code>DmSet()</code></a></p>

<h3 class="hbH3">
  <a name="1054640"> </a>DmSync Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1054647"> </a>Purpose 
</h4>

<p><a name="1054661"> </a>Update the automatic backup files for all open databases. This function is deprecated; developers should use <a href="DataAndResourceManager.html#1053148"><code>DmSyncDatabase()</code></a> instead.</p>
<h4>
  <a name="1054692"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1054746"> </a></code><h4>
  <a name="1054776"> </a>Prototype 
</h4>
<pre class="proto"><a name="1054817"></a>void DmSync(
   void
)
</pre>
<h4>
  <a name="1054823"> </a>Parameters 
</h4>

<p><a name="1054882"> </a>None.</p>
<h4>
  <a name="1054919"> </a>Returns 
</h4>

<p><a name="1054990"> </a>Nothing.</p>
<h4>
  <a name="1055022"> </a>Compatibility 
</h4>

<p><a name="1055062"> </a>This function is not supported on Palm OS Cobalt and is deprecated on Palm OS Garnet. Developers should use <a href="DataAndResourceManager.html#1053148"><code>DmSyncDatabase()</code></a> instead.</p>

<h3 class="hbH3">
  <a name="1053148"> </a>DmSyncDatabase Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1053156"> </a>Purpose 
</h4>

<p><a name="1054208"> </a>Update the automatic backup file for a given open database. </p>
<h4>
  <a name="1053164"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1053193"> </a></code><h4>
  <a name="1053198"> </a>Prototype 
</h4>
<pre class="proto"><a name="1053209"></a>Err DmSyncDatabase (
   DmOpenRef <code class="par">dbRef</code>
)
</pre>
<h4>
  <a name="1053312"> </a>Parameters 
</h4>

<dl>
<dt><a name="1053315"> </a><code>&rarr;  <i>dbRef</i></code></dt>
<dd><a name="1054204"> </a>A <code>DmOpenRef</code> to an open database.</dd>

</dl>
<h4>
  <a name="1053436"> </a>Returns 
</h4>

<p><a name="1054134"> </a>Returns <code>errNone</code> if no error, or one of the following if an error occurs: </p>

<dl>
<dt><a name="1054135"> </a><code>dmErrInvalidParam</code></dt>
<dd><a name="1054136"> </a><code class="par">dbRef</code> isn't a valid reference to an open database.</dd>

<dt><a name="1054137"> </a><code>dmErrReadOnly</code></dt>
<dd><a name="1054138"> </a><code class="par">dbRef</code> references a database that is open in read-only mode. The database must be open for writing</dd>

<dt><a name="1054139"> </a><code>dmErrOperationAborted</code></dt>
<dd><a name="1054140"> </a>The Palm OS device doesn't support the automatic database backup feature.</dd>

</dl>
<h4>
  <a name="1054159"> </a>Comments 
</h4>

<p><a name="1054160"> </a>The database is left open.</p>

<p><a name="1054161"> </a>Use this function to cause an open database to be backed up.</p>

<p><a name="1054162"> </a>Many devices running Palm OS Cobalt version 6.1 will back up the contents of the RAM storage heaps to some sort of non-volatile NAND flash.  In the event that the RAM storage heaps are corrupted or are lost for some reason, the storage heaps can then be restored to their saved state. Backup is automatically triggered on a limited set of events: database close, database create, a call to <a href="DataAndResourceManager.html#1011529"><code>DmSetDatabaseInfo()</code></a>, or upon device sleep (open databases only). Developers can explicitly cause a database to be backed up by calling <code>DmSyncDatabase()</code>. </p>

<p><a name="1054168"> </a>For additional information on this feature, see <a href="../PalmOSCompanion/FilesAndDatabases.html#1032439">"Automatic Database Backup and Restore."</a></p>
<h4>
  <a name="1055184"> </a>Compatibility 
</h4>

<p><a name="1055249"> </a>In order to determine whether or not a given device has this capability, check for the presence of the <code>sysFtrNumDmAutoBackup</code> feature.</p>

<h3 class="hbH3">
  <a name="1052867"> </a>DmWrite Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011733"> </a>Purpose 
</h4>

<p><a name="1011734"> </a>Copies a specified number of bytes to a record within a database that is open for writing.</p>
<h4>
  <a name="1011735"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011736"> </a></code><h4>
  <a name="1011737"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011739"></a>Err DmWrite (
   void *recordP,
   UInt32 offset,
   const void *srcP,
   UInt32 bytes
)
</pre>
<h4>
  <a name="1011740"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011741"> </a><code>&harr;  <i><code>recordP</code></i></code></dt>
<dd><a name="1011742"> </a>Pointer to locked data record (chunk pointer).</dd>

<dt><a name="1011743"> </a><code>&rarr;  <i><code>offset</code></i></code></dt>
<dd><a name="1011744"> </a>Offset within record to start writing.</dd>

<dt><a name="1011745"> </a><code>&rarr;  <i><code>srcP</code></i></code></dt>
<dd><a name="1011746"> </a>Pointer to data to copy into record.</dd>

<dt><a name="1011747"> </a><code>&rarr;  <i><code>bytes</code></i></code></dt>
<dd><a name="1011748"> </a>Number of bytes to write.</dd>

</dl>
<h4>
  <a name="1011749"> </a>Returns 
</h4>

<p><a name="1011750"> </a>Returns <code>errNone</code> if no error. May display a fatal error message if the record pointer is invalid or the function overwrites the record. </p>
<h4>
  <a name="1011751"> </a>Comments 
</h4>

<p><a name="1011752"> </a>This is one of the routines that must be used to write to Data Manager records; because the data storage area is write-protected, you cannot write to it directly. This routine checks the validity of the chunk pointer for the record to insure that writing the record will not exceed the chunk bounds.</p>
<h4>
  <a name="1011753"> </a>See Also 
</h4>

<p><a name="1011760"> </a><a href="DataAndResourceManager.html#1011701"><code>DmStrCopy()</code></a><code>, </code><a href="DataAndResourceManager.html#1011500"><code>DmSet()</code></a> </p>

<h3 class="hbH3">
  <a name="1011763"> </a>DmWriteCheck Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011765"> </a>Purpose 
</h4>

<p><a name="1011766"> </a>Check the parameters of a write operation to a data storage chunk before actually performing the write.</p>
<h4>
  <a name="1011767"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011768"> </a></code><h4>
  <a name="1011769"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011771"></a>Err DmWriteCheck (
   void *recordP,
   UInt32 offset,
   UInt32 bytes
)
</pre>
<h4>
  <a name="1011772"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011773"> </a><code>&rarr;  <i><code>recordP</code></i></code></dt>
<dd><a name="1011774"> </a>Locked pointer to <code>recordH</code>.</dd>

<dt><a name="1011775"> </a><code>&rarr;  <i><code>offset</code></i></code></dt>
<dd><a name="1011776"> </a>Offset into record to start writing.</dd>

<dt><a name="1011777"> </a><code>&rarr;  <i><code>bytes</code></i></code></dt>
<dd><a name="1011778"> </a>Number of bytes to write.</dd>

</dl>
<h4>
  <a name="1011779"> </a>Returns 
</h4>

<p><a name="1011783"> </a>Returns <code>errNone</code> if no error; returns <a href="DataAndResourceManager.html#1008444"><code>dmErrNotValidRecord</code></a> or <a href="DataAndResourceManager.html#1008497"><code>dmErrWriteOutOfBounds</code></a> if an error occurred.</p>

<h2 class="haH2">
  <a name="1011788"> </a>Application-Defined Functions <a href="#1008042"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1011791"> </a>DmComparF Function <a href="#1008042"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1011793"> </a>Purpose 
</h4>

<p><a name="1011794"> </a>Compares two records in a database. </p>
<h4>
  <a name="1011795"> </a>Declared In 
</h4>
<code>DataMgr.h<a name="1011796"> </a></code><h4>
  <a name="1011797"> </a>Prototype 
</h4>
<pre class="proto"><a name="1011798"></a>typedef Int16 DmComparF (
   void *rec1,
   void *rec2,
   Int16 other,
   SortRecordInfoPtr rec1SortInfo,
   SortRecordInfoPtr rec2SortInfo,
   MemHandle appInfoH
)
</pre>
<h4>
  <a name="1011799"> </a>Parameters 
</h4>

<dl>
<dt><a name="1011800"> </a><code>&rarr;  <i><code>rec1</code>, <code>rec2</code></i></code></dt>
<dd><a name="1011801"> </a>Pointers to the two records to compare. </dd>

<dt><a name="1011802"> </a><code>&rarr;  <i><code>other</code></i></code></dt>
<dd><a name="1011803"> </a>Any other custom information you want passed to the comparison function. This parameter is often used to indicate a sort direction (ascending or descending).</dd>

<dt><a name="1011804"> </a><code>&rarr;  <i><code>rec1SortInfo</code>, <code>rec2SortInfo</code></i></code></dt>
<dd><a name="1011808"> </a>Pointers to <a href="DataAndResourceManager.html#1008103"><code>SortRecordInfoType</code></a> structures that specify unique sorting information for the two records.</dd>

<dt><a name="1011809"> </a><code>&rarr;  <i><code>appInfoH</code></i></code></dt>
<dd><a name="1011810"> </a>A handle to the database's application info block.</dd>

</dl>
<h4>
  <a name="1011811"> </a>Returns 
</h4>

<p><a name="1011812"> </a>Returns:</p>
<ul type="disc">
  <li><a name="1011813"> </a>0 if <code>rec1</code> = <code>rec2</code>.
  <li><a name="1011814"> </a>&lt; 0 if <code>rec1</code> &lt; <code>rec2</code>. 
  <li><a name="1011815"> </a>&gt; 0 if <code>rec1</code> &gt; <code>rec2</code>. 
</ul>
<h4>
  <a name="1011816"> </a>Comments 
</h4>

<p><a name="1011817"> </a>This function is used to sort the records in a database. It is specifically called by <a href="DataAndResourceManager.html#1009628"><code>DmFindSortPosition()</code></a>, <a href="DataAndResourceManager.html#1010176"><code>DmInsertionSort()</code></a>, and <a href="DataAndResourceManager.html#1010961"><code>DmQuickSort()</code></a>. </p>
<h4>
  <a name="1011827"> </a>Compatibility 
</h4>

<p><a name="1011828"> </a>The <code>DmComparF</code> prototype changed in Palm OS version 2.0. Previously, the prototype only defined the first three parameters. </p>

<p><a name="1011829"> </a>As a rule, the change in the number of arguments from three to six doesn't cause problems when a 1.0 application is run on a 2.0 device because the system only pulls the arguments from the stack that are there.</p>

<p><a name="1011830"> </a>Keep in mind, however, that some optimized applications built with tools other than Metrowerks CodeWarrior for Palm OS may have problems as a result of the change in arguments when running on a 2.0 or later device.</p>

<p><a name="1006634"> </a></p>
 

<hr> 
<p class="FNFootnote">
<a name="1011587"> </a><a href="#1011584">1</a>. An "orphaned chunk" is one that is allocated in the storage heap, but to which nothing refers. If the orphaned chunk is not put into a database as a record, an appInfo block, or the like, and if the application doesn't keep track of it&#8212;in a global variable, perhaps&#8212;it could get lost. If the application doesn't get around to freeing the chunk before it quits or crashes, or before the device is reset, that storage will be forever unusable: the user can't delete it since the user only deletes databases.</p>
<p class="FNFootnote">
<a name="1011588"> </a><a href="#1011584">1</a>. </p>
<p class="FNFootnote">
<a name="1011589"> </a><a href="#1011584">1</a>. 	During a soft reset, the OS walks through the storage heap and frees any orphaned chunks that it finds. Since most users reset only rarely, however, you shouldn't rely on this happening.</p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CharacterAttributes.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="DebugMgr.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>