<html>
<head>
<title>(68K) Overlay Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:28">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1026680"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="NotifyMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Password.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">44 &nbsp;&nbsp;
Overlay Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="OverlayMgr.html">44  Overlay Manager</a></h1>

   <h2 class="SideTOC2"><a href="#1026703">
   Overlay Manager Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1026706">
      OmLocaleType</a></h3>

   <h2 class="SideTOC2"><a href="#1026738">
   Overlay Manager Constants</a></h2>

   <h2 class="SideTOC2"><a href="#1026795">
   Overlay Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1026798">
      OmGetCurrentLocale</a></h3>

      <h3 class="SideTOC3"><a href="#1026832">
      OmGetIndexedLocale</a></h3>

      <h3 class="SideTOC3"><a href="#1026876">
      OmGetNextSystemLocale</a></h3>

      <h3 class="SideTOC3"><a href="#1026909">
      OmGetRoutineAddress</a></h3>

      <h3 class="SideTOC3"><a href="#1026940">
      OmGetSystemLocale</a></h3>

      <h3 class="SideTOC3"><a href="#1026981">
      OmLocaleToOverlayDBName</a></h3>

      <h3 class="SideTOC3"><a href="#1027026">
      OmOverlayDBNameToLocale</a></h3>

      <h3 class="SideTOC3"><a href="#1027058">
      OmSetSystemLocale</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1026681"> </a>This chapter describes the overlay manager API as declared in the header file <code>OverlayMgr.h</code>. It discusses the following topics:</p>
<ul type="disc">
  <li><a name="1026686"> </a><a href="OverlayMgr.html#1026703">Overlay Manager Data Structures</a>
  <li><a name="1026690"> </a><a href="OverlayMgr.html#1026738">Overlay Manager Constants</a>
  <li><a name="1026694"> </a><a href="OverlayMgr.html#1026795">Overlay Manager Functions</a>
</ul>

<p><a name="1026697"> </a>For more information on the overlay manager, see <a href="../PalmOSCompanion/Localization.html#1053212">"Using Overlays to Localize Resources"</a> of the <i>Palm OS Programmer's Companion</i>, vol. I. </p>

<h2 class="haH2">
  <a name="1026703"> </a>Overlay Manager Data Structures <a href="#1026680"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1026706"> </a>OmLocaleType Struct <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026708"> </a>Purpose 
</h4>

<p><a name="1026710"> </a>The <code>OmLocaleType</code> struct specifies a locale.</p>
<h4>
  <a name="1026711"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026712"></a>typedef struct {
  UInt16 language;
  UInt16 country;
} OmLocaleType;
</pre>
<h4>
  <a name="1026716"> </a>Fields 
</h4>

<dl>
<dt><a name="1026719"> </a><code><code>language</code> </code></dt>
<dd><a name="1026721"> </a>The language spoken in the locale. This value is one of the <code>LanguageType</code> constants. </dd>

<dt><a name="1026724"> </a><code><code>country</code> </code></dt>
<dd><a name="1026726"> </a>The country or region where the language is spoken. This value is one of the <code>CountryType</code> constants. </dd>

</dl>
<h4>
  <a name="1026729"> </a>Compatibility 
</h4>

<p><a name="1026736"> </a>If Palm OS<sup>&#174;</sup> <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present, the <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a> replaces <code>OmLocaleType</code>. For backward compatibility, <code>OmLocaleType</code> is mapped to <code>LmLocaleType</code>. </p>

<h2 class="haH2">
  <a name="1026738"> </a>Overlay Manager Constants <a href="#1026680"><span class="nav">^TOP^</span></a>
</h2>



<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1026741"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Constant</span></b></p>
    </th>
    <th><p class="tt"><a name="1026743"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1026745"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1026748"> </a><code>omOverlayRscType</code> </p>
    </td>
    <td><p class="tt"><a name="1026750"> </a><code>'ovly'</code></p>
    </td>
    <td><p class="tt"><a name="1026752"> </a>Symbolic name of an overlay resource that is contained in both the base database and the overlay database.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1026755"> </a><code>omOverlayRscID</code> </p>
    </td>
    <td><p class="tt"><a name="1026757"> </a>1000</p>
    </td>
    <td><p class="tt"><a name="1026759"> </a>Resource ID of the overlay resource in both the base database and the overlay database. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1026762"> </a><code>omFtrCreator</code> </p>
    </td>
    <td><p class="tt"><a name="1026764"> </a><code>'ovly'</code></p>
    </td>
    <td><p class="tt"><a name="1026766"> </a>Creator value used for the <code>omFtrShowErrorsFlag</code> feature. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1026769"> </a><code>omFtrDefaultLocale</code> </p>
    </td>
    <td><p class="tt"><a name="1026771"> </a>1</p>
    </td>
    <td><p class="tt"><a name="1026773"> </a>Feature that specifies the default locale stored in the ROM. The default locale is used in cases where the system is attempting to open a "stripped" database (one that requires an overlay) and an overlay matching the current locale cannot be found. In this case, the system then looks for an overlay matching the default locale. Use <a href="FeatureManager.html#1036943"><code>FtrGet()</code></a> and <a href="FeatureManager.html#1037124"><code>FtrSet()</code></a> to retrieve and set this value. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1026782"> </a><code>omFtrShowErrorsFlag</code> </p>
    </td>
    <td><p class="tt"><a name="1026784"> </a>0</p>
    </td>
    <td><p class="tt"><a name="1026786"> </a>Feature that controls the number of error messages displayed by the overlay manager. If this feature is set to <code>true</code>, the overlay manager may display several more error messages when validating an overlay against its base database. This feature only takes effect when the error checking level is set to full (common on debug ROMs, not on release ROMs). Use <a href="FeatureManager.html#1036943"><code>FtrGet()</code></a> and <a href="FeatureManager.html#1037124"><code>FtrSet()</code></a> to retrieve and set this value. </p>
    </td>
  </tr>
</table>

</div>


<h2 class="haH2">
  <a name="1026795"> </a>Overlay Manager Functions <a href="#1026680"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1026798"> </a>OmGetCurrentLocale Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026800"> </a>Purpose 
</h4>

<p><a name="1026801"> </a>Return the current locale. </p>
<h4>
  <a name="1026802"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1026803"> </a></code><h4>
  <a name="1026804"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026805"></a>void OmGetCurrentLocale(
   LmLocaleType *currentLocale
)
</pre>
<h4>
  <a name="1026806"> </a>Parameters 
</h4>

<dl>
<dt><a name="1026807"> </a><code>&larr;  <i><code>currentLocale</code></i></code></dt>
<dd><a name="1026811"> </a>Points to an <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a> struct that identifies the current locale. </dd>

</dl>
<h4>
  <a name="1026812"> </a>Returns 
</h4>

<p><a name="1026813"> </a>Returns nothing. </p>
<h4>
  <a name="1026814"> </a>Comments 
</h4>

<p><a name="1026815"> </a>This function returns the current locale. The current locale controls which overlays are used for resource databases. For example, suppose you have one application and two associated overlays installed, one for US English and one for British English. In this case, if the country specified in the locale returned by this function is <code>cUnitedKingdom</code>, the British English overlay is used for the application. If the country returned is <code>cUnitedStates</code>, the US English overlay is used. </p>
<h4>
  <a name="1026816"> </a>Compatibility 
</h4>

<p><a name="1026820"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. To use this function in code intended to be run on earlier versions of Palm OS, link with the PalmOSGlue library and call <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">OmGlueGetCurrentLocale</span>. For more information, see <a href="PalmOSGlueLib.html#1030875">Chapter 80, "PalmOSGlue Library."</a></p>
<h4>
  <a name="1026825"> </a>See Also 
</h4>

<p><a name="1026829"> </a><a href="OverlayMgr.html#1026940"><code>OmGetSystemLocale()</code></a> </p>

<h3 class="hbH3">
  <a name="1026832"> </a>OmGetIndexedLocale Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026834"> </a>Purpose 
</h4>

<p><a name="1026835"> </a>Return a system locale by index. </p>
<h4>
  <a name="1026836"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1026837"> </a></code><h4>
  <a name="1026838"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026839"></a>Err OmGetIndexedLocale (
   UInt16 localeIndex,
   LmLocaleType *theLocale
)
</pre>
<h4>
  <a name="1026840"> </a>Parameters 
</h4>

<dl>
<dt><a name="1026841"> </a><code>&rarr;  <i><code>localeIndex</code></i></code></dt>
<dd><a name="1026842"> </a>Zero-based index of the locale to return. </dd>

<dt><a name="1026843"> </a><code>&larr;  <i><code>theLocale</code></i></code></dt>
<dd><a name="1026847"> </a>Points to an <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a> struct that identifies the locale at that index. </dd>

</dl>
<h4>
  <a name="1026848"> </a>Returns 
</h4>

<p><a name="1026850"> </a>Returns <code>errNone</code> upon success, or <code>omErrInvalidLocaleIndex</code> if the index is out of bounds. </p>
<h4>
  <a name="1026851"> </a>Comments 
</h4>

<p><a name="1026852"> </a><code>OmGetIndexedLocale</code> is used in a loop to discover how many system overlays are installed for system resources. </p>

<p><a name="1026856"> </a>If the <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present, use <a href="OverlayMgr.html#1026876"><code>OmGetNextSystemLocale()</code></a> instead of this function. <code>OmGetIndexedLocale</code> can be slow on ROMs that contain many valid system locales. </p>
<h4>
  <a name="1026860"> </a>Compatibility 
</h4>

<p><a name="1026864"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present, however, this function is unimplemented.</p>

<p><a name="1026865"> </a>In Palm OS 3.5, this function would not return a system overlay that was located in RAM. The Palm OS 4.0 version of this function does return system overlays located in RAM. </p>
<h4>
  <a name="1026866"> </a>See Also 
</h4>

<p><a name="1026873"> </a><a href="OverlayMgr.html#1026940"><code>OmGetSystemLocale()</code></a>, <a href="OverlayMgr.html#1026876"><code>OmGetNextSystemLocale()</code></a></p>

<h3 class="hbH3">
  <a name="1026876"> </a>OmGetNextSystemLocale Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026878"> </a>Purpose 
</h4>

<p><a name="1026879"> </a>Return a system locale. </p>
<h4>
  <a name="1026880"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1026881"> </a></code><h4>
  <a name="1026882"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026883"></a>Err OmGetNextSystemLocale (
   Boolean iNewSearch,
   OmSearchStateType *ioStateInfoP,
   LmLocaleType *oLocaleP
)
</pre>
<h4>
  <a name="1026884"> </a>Parameters 
</h4>

<dl>
<dt><a name="1026885"> </a><code>&rarr;  <i><code>iNewSearch</code></i></code></dt>
<dd><a name="1026886"> </a><code>true</code> if this function call is starting a new search, or <code>false</code> if this function call is a continuation of a search. </dd>

<dt><a name="1026887"> </a><code>&harr;  <i><code>ioStateInfoP</code></i></code></dt>
<dd><a name="1026888"> </a>If <code>iNewSearch</code> is <code>false</code>, this must point to the same data used for the previous invocation. </dd>

<dt><a name="1026889"> </a><code>&larr;  <i><code>oLocaleP</code></i></code></dt>
<dd><a name="1026890"> </a>The found locale. </dd>

</dl>
<h4>
  <a name="1026891"> </a>Returns 
</h4>

<p><a name="1026893"> </a>Returns <code>errNone</code> if no error or <code>omErrNoNextSystemLocale</code> if no matches were found. </p>
<h4>
  <a name="1026894"> </a>Comments 
</h4>

<p><a name="1026895"> </a>You can call this function successively to discover how many system overlays are installed for system resources. Each system overlay found determines a separate valid system locale. Any locale returned by this function can be sent to <a href="OverlayMgr.html#1027058"><code>OmSetSystemLocale()</code></a> to change the system locale. </p>

<p><a name="1026899"> </a>To start the search, pass <code>true</code> for <code>iNewSearch</code>. Allocate an <code>OmSearchStateType</code> structure and pass its address as <code>ioStateInfoP</code>. <code>OmGetNextSystemLocale</code> stores private information in <code>ioStateInfoP</code> and uses it if the search is continued. </p>

<p><a name="1026900"> </a>To continue a search where the previous one left off, pass <code>false</code> for <code>iNewSearch</code> and pass the same <code>ioStateInfoP</code> that you used during the previous call to this function. </p>

<p><a name="1026901"> </a>When called successively, this function eventually returns all system overlays that are in ROM or RAM. </p>
<h4>
  <a name="1026902"> </a>Compatibility 
</h4>

<p><a name="1026906"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present, however, this function is unimplemented.</p>

<h3 class="hbH3">
  <a name="1026909"> </a>OmGetRoutineAddress Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026911"> </a>Purpose 
</h4>

<p><a name="1026912"> </a>Return the address of an overlay manager function. </p>
<h4>
  <a name="1026913"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1026914"> </a></code><h4>
  <a name="1026915"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026916"></a>void *OmGetRoutineAddress (
   OmSelector inSelector
)
</pre>
<h4>
  <a name="1026917"> </a>Parameters 
</h4>

<dl>
<dt><a name="1026918"> </a><code>&rarr;  <i><code>inSelector</code></i></code></dt>
<dd><a name="1026920"> </a>One of the routine selectors defined in <code>OverlayMgr.h. </code></dd>

</dl>
<h4>
  <a name="1026921"> </a>Returns 
</h4>

<p><a name="1026922"> </a>Returns the address of the corresponding function. Returns <code>NULL</code> if an invalid routine selector is passed. </p>
<h4>
  <a name="1026923"> </a>Comments 
</h4>

<p><a name="1026924"> </a>You typically use this function to determine whether an overlay manager function exists on the device. As future releases of Palm OS add new functions, older devices with earlier versions of the overlay manager will not implement these newer functions. If <code>OmGetRoutineAddress</code> returns <code>NULL</code>, the function is unavailable. </p>
<h4>
  <a name="1026925"> </a>Compatibility 
</h4>

<p><a name="1026929"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. </p>
<h4>
  <a name="1026930"> </a>See Also 
</h4>

<p><a name="1026937"> </a><a href="MiscSys.html#1038233"><code>IntlGetRoutineAddress()</code></a>, <a href="SystemManager.html#1076486"><code>SysGetTrapAddress()</code></a></p>

<h3 class="hbH3">
  <a name="1026940"> </a>OmGetSystemLocale Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026942"> </a>Purpose 
</h4>

<p><a name="1026943"> </a>Return the system locale. </p>
<h4>
  <a name="1026944"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1026945"> </a></code><h4>
  <a name="1026946"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026947"></a>void OmGetSystemLocale(
   LmLocaleType *systemLocale
)
</pre>
<h4>
  <a name="1026948"> </a>Parameters 
</h4>

<dl>
<dt><a name="1026949"> </a><code>&larr;  <i><code>systemLocale</code></i></code></dt>
<dd><a name="1026953"> </a>Points to an <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a> struct that identifies the system locale. </dd>

</dl>
<h4>
  <a name="1026954"> </a>Returns 
</h4>

<p><a name="1026955"> </a>Returns nothing. </p>
<h4>
  <a name="1026956"> </a>Comments 
</h4>

<p><a name="1026957"> </a>You typically don't use this function. Instead, use <a href="OverlayMgr.html#1026798"><code>OmGetCurrentLocale()</code></a>, which returns the locale that determines which overlays are used. </p>

<p><a name="1026961"> </a>The system locale is saved in the storage heap header and persists across soft resets. When the device is reset, the system locale is used to set the current locale. </p>
<h4>
  <a name="1026962"> </a>Compatibility 
</h4>

<p><a name="1026966"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. To use this function in code intended to be run on earlier versions of Palm OS, link with the PalmOSGlue library and call <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">OmGlueGetSystemLocale</span>. For more information, see <a href="PalmOSGlueLib.html#1030875">Chapter 80, "PalmOSGlue Library."</a></p>
<h4>
  <a name="1026971"> </a>See Also 
</h4>

<p><a name="1026978"> </a><a href="OverlayMgr.html#1026798"><code>OmGetCurrentLocale()</code></a>, <a href="PalmOSGlueLib.html#1031993"><code>LmGlueGetSystemLocale()</code></a></p>

<h3 class="hbH3">
  <a name="1026981"> </a>OmLocaleToOverlayDBName Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026983"> </a>Purpose 
</h4>

<p><a name="1026984"> </a>Return the overlay database's name given the base database name and the locale. </p>
<h4>
  <a name="1026985"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1026986"> </a></code><h4>
  <a name="1026987"> </a>Prototype 
</h4>
<pre class="proto"><a name="1026988"></a>Err OmLocaleToOverlayDBName(
   const Char *baseDBName,
   const LmLocaleType *targetLocale,
   Char *overlayDBName
)
</pre>
<h4>
  <a name="1026989"> </a>Parameters 
</h4>

<dl>
<dt><a name="1026990"> </a><code>&rarr;  <i><code>baseDBName</code></i></code></dt>
<dd><a name="1026991"> </a>The name of the base resource database associated with the overlay. </dd>

<dt><a name="1026992"> </a><code>&rarr;  <i><code>targetLocale</code></i></code></dt>
<dd><a name="1026996"> </a>The locale to which this overlay applies. See <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a>. Pass <code>NULL</code> to use the current locale. </dd>

<dt><a name="1026997"> </a><code>&larr;  <i><code>overlayDBName</code></i></code></dt>
<dd><a name="1026998"> </a>The overlay database name given the base database name and the target locale. This buffer must be at least <code>dmDBNameLength</code> bytes. </dd>

</dl>
<h4>
  <a name="1026999"> </a>Returns 
</h4>

<p><a name="1027001"> </a>Returns <code>errNone</code> upon success, or <code>omErrUnknownLocale</code> if the <code>targetLocale</code> parameter is invalid. </p>
<h4>
  <a name="1027002"> </a>Comments 
</h4>

<p><a name="1027003"> </a>The appropriate overlay database name is currently: </p>
<pre class="sl"><i>baseDBName_llCC</i> </pre>

<p><a name="1027005"> </a>where:</p>

<dl>
<dt><a name="1027006"> </a><code><i>baseDBName</i></code></dt>
<dd><a name="1027007"> </a>The name of the base database as you passed it in. </dd>

<dt><a name="1027008"> </a><code><i>ll</i></code></dt>
<dd><a name="1027009"> </a>A two-character code identifying the language. </dd>

<dt><a name="1027010"> </a><code><i>CC</i></code></dt>
<dd><a name="1027011"> </a>A two-character code identifying the country. </dd>

</dl>

<p><a name="1027012"> </a>The base database name is truncated if necessary to allow for this suffix. </p>

<p><a name="1027013"> </a>For example, the base database "MemoPad" might have an overlay for US English named "MemoPad_enUS".</p>
<h4>
  <a name="1027014"> </a>Compatibility 
</h4>

<p><a name="1027018"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. </p>
<h4>
  <a name="1027019"> </a>See Also 
</h4>

<p><a name="1027023"> </a><a href="OverlayMgr.html#1027026"><code>OmOverlayDBNameToLocale()</code></a> </p>

<h3 class="hbH3">
  <a name="1027026"> </a>OmOverlayDBNameToLocale Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1027028"> </a>Purpose 
</h4>

<p><a name="1027029"> </a>Return an overlay database's locale given its name. </p>
<h4>
  <a name="1027030"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1027031"> </a></code><h4>
  <a name="1027032"> </a>Prototype 
</h4>
<pre class="proto"><a name="1027033"></a>Err OmOverlayDBNameToLocale(
   const Char *overlayDBName,
   LmLocaleType *overlayLocale
)
</pre>
<h4>
  <a name="1027034"> </a>Parameters 
</h4>

<dl>
<dt><a name="1027035"> </a><code>&rarr;  <i><code>overlayDBName</code></i></code></dt>
<dd><a name="1027036"> </a>The name of the overlay database. </dd>

<dt><a name="1027037"> </a><code>&larr;  <i><code>overlayLocale</code></i></code></dt>
<dd><a name="1027041"> </a>Points to an <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a> structure identifying the overlay's locale. </dd>

</dl>
<h4>
  <a name="1027042"> </a>Returns 
</h4>

<p><a name="1027044"> </a>Returns <code>errNone</code> upon success, <code>omErrBadOverlayDBName</code> if the string <code>overlayDBName</code> is not long enough to have a locale suffix, or <code>omErrUnknownLocale</code> if the locale cannot be determined. </p>
<h4>
  <a name="1027046"> </a>Compatibility 
</h4>

<p><a name="1027050"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. </p>
<h4>
  <a name="1027051"> </a>See Also 
</h4>

<p><a name="1027055"> </a><a href="OverlayMgr.html#1026981"><code>OmLocaleToOverlayDBName()</code></a> </p>

<h3 class="hbH3">
  <a name="1027058"> </a>OmSetSystemLocale Function <a href="#1026680"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1027060"> </a>Purpose 
</h4>

<p><a name="1027061"> </a>Set the system locale and reset the device. </p>
<h4>
  <a name="1027062"> </a>Declared In 
</h4>
<code>OverlayMgr.h<a name="1027063"> </a></code><h4>
  <a name="1027064"> </a>Prototype 
</h4>
<pre class="proto"><a name="1027065"></a>Err OmSetSystemLocale(
   const LmLocaleType *systemLocale
)
</pre>
<h4>
  <a name="1027066"> </a>Parameters 
</h4>

<dl>
<dt><a name="1027067"> </a><code>&rarr;  <i><code>systemLocale</code></i></code></dt>
<dd><a name="1027071"> </a>An <a href="LocaleMgr.html#1013505"><code>LmLocaleType</code></a> structure specifying the locale to switch the system to. </dd>

</dl>
<h4>
  <a name="1027072"> </a>Returns 
</h4>

<p><a name="1027073"> </a>Returns <code>errNone</code> upon success, or one of the following if an error occurs: </p>

<dl>
<dt><a name="1027074"> </a><code><code>omErrUnknownLocale</code></code></dt>
<dd><a name="1027075"> </a>There is no system overlay for <code>systemLocale</code>. </dd>

<dt><a name="1027076"> </a><code><code>omErrInvalidLocale</code></code></dt>
<dd><a name="1027077"> </a>The system overlay for <code>systemLocale</code> has been found but is invalid. </dd>

<dt><a name="1027078"> </a><code><code>dmErrInvalidParam</code></code></dt>
<dd><a name="1027079"> </a>An error occurred while opening the overlay. </dd>

<dt><a name="1027080"> </a><code><code>dmErrMemError</code></code></dt>
<dd><a name="1027081"> </a>A memory error occurred while opening the overlay. </dd>

<dt><a name="1027082"> </a><code><code>dmErrDatabaseOpen</code></code></dt>
<dd><a name="1027083"> </a>The system overlay was already open. </dd>

</dl>
<h4>
  <a name="1027084"> </a>Comments 
</h4>

<p><a name="1027085"> </a>This function changes the system locale to the specified locale if it exists. It first determines that the system overlay exists for the requested locale and that it matches the base system database. If so, it updates the system locale information saved in the storage heap header and resets the device. After the device is reset, the current locale is set to the system locale. </p>

<p><a name="1027086"> </a>A Palm Powered<sup>&#8482;</sup> device has a default locale hard-coded into the ROM. This locale is used to set the system locale after a hard reset or any time that the storage heap header is invalid. The storage heap header is typically only invalid when the device is turned on for the first time. </p>
<h4>
  <a name="1027087"> </a>Compatibility 
</h4>

<p><a name="1033621"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present, however, this function is unimplemented.</p>

<p><a name="1027092"> </a>In Palm OS 3.5, this function would not switch to a system overlay that was located in the RAM. The Palm OS 4.0 version of this function does return system overlays located in the RAM. </p>
<h4>
  <a name="1027093"> </a>See Also 
</h4>

<p><a name="1027097"> </a><a href="OverlayMgr.html#1026940"><code>OmGetSystemLocale()</code></a> </p>

<p><a name="1027098"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="NotifyMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Password.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>