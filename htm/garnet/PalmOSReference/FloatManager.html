<html>
<head>
<title>(68K) Float Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:23">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="995796"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="FileStreaming.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Font.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">36 &nbsp;&nbsp;
Float Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="FloatManager.html">36  Float Manager</a></h1>

   <h2 class="SideTOC2"><a href="#995819">
   Float Manager Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#995822">
      FlpCompDouble</a></h3>

      <h3 class="SideTOC3"><a href="#995854">
      FlpDoubleBits</a></h3>

   <h2 class="SideTOC2"><a href="#995903">
   Float Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#995906">
      FlpAToF</a></h3>

      <h3 class="SideTOC3"><a href="#996028">
      FlpBase10Info</a></h3>

      <h3 class="SideTOC3"><a href="#996065">
      FlpBufferAToF</a></h3>

      <h3 class="SideTOC3"><a href="#996095">
      FlpBufferCorrectedAdd</a></h3>

      <h3 class="SideTOC3"><a href="#996129">
      FlpBufferCorrectedSub</a></h3>

      <h3 class="SideTOC3"><a href="#996163">
      FlpCorrectedAdd</a></h3>

      <h3 class="SideTOC3"><a href="#996200">
      FlpCorrectedSub</a></h3>

      <h3 class="SideTOC3"><a href="#996232">
      FlpFToA</a></h3>

      <h3 class="SideTOC3"><a href="#996261">
      FlpGetExponent</a></h3>

      <h3 class="SideTOC3"><a href="#996289">
      FlpGetSign</a></h3>

      <h3 class="SideTOC3"><a href="#996325">
      FlpIsZero</a></h3>

      <h3 class="SideTOC3"><a href="#996345">
      FlpNegate</a></h3>

      <h3 class="SideTOC3"><a href="#996376">
      FlpSetNegative</a></h3>

      <h3 class="SideTOC3"><a href="#996407">
      FlpSetPositive</a></h3>

      <h3 class="SideTOC3"><a href="#996437">
      FlpVersion</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="995801"> </a>This chapter provides reference material for the Float Manager API as follows:</p>
<ul type="disc">
  <li><a name="995805"> </a><a href="FloatManager.html#995819">Float Manager Data Structures</a>
  <li><a name="995809"> </a><a href="FloatManager.html#995903">Float Manager Functions</a>
</ul>

<p><a name="995811"> </a>The Float Manager API is declared in the header file <code>FloatMgr.h</code>. For more information on the Float Manager, see the section <a href="../PalmOSCompanion/SystemFeatures.html#1046711">"Floating-Point"</a> in the <i>Palm OS Programmer's Companion</i>, vol. I.</p>

<h2 class="haH2">
  <a name="995819"> </a>Float Manager Data Structures <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="995822"> </a>FlpCompDouble Struct <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995824"> </a>Purpose 
</h4>

<p><a name="995825"> </a>Float Manager functions accept and require values of type <code>FlpDouble</code>. The <code>FlpCompDouble</code> union allows you to declare values that can be interpreted either as a double or as an <code>FlpDouble</code>. As well, this union contains fields that provide easy access to the component parts of the double-precision floating-point number.</p>
<h4>
  <a name="995826"> </a>Prototype 
</h4>
<pre class="proto"><a name="995827"></a><code>typedef union {
  double d;
  FlpDouble fd;
  UInt32 ul[2];
  FlpDoubleBits fdb;
} FlpCompDouble</code>
</pre>
<h4>
  <a name="1004877"> </a>Fields 
</h4>

<dl>
<dt><a name="995837"> </a><code><code>d</code></code></dt>
<dd><a name="995839"> </a>Provides access to the value as a <code>double</code>.</dd>

<dt><a name="995841"> </a><code><code>fd</code></code></dt>
<dd><a name="995843"> </a>Provides access to the value as a <code>FlpDouble</code>, which can be passed to or received from many Float Manager functions.</dd>

<dt><a name="995845"> </a><code><code>ul</code></code></dt>
<dd><a name="995847"> </a>Provides access to the value as two long integers.</dd>

<dt><a name="995849"> </a><code><code>fdb</code></code></dt>
<dd><a name="995851"> </a>Provides access to specific fields.</dd>

</dl>

<h3 class="hbH3">
  <a name="995854"> </a>FlpDoubleBits Struct <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995856"> </a>Purpose 
</h4>

<p><a name="995857"> </a>This structure provides direct access to the component parts of an IEEE-754 double-precision floating-point number. Use the <a href="FloatManager.html#995822"><code>FlpCompDouble</code></a> union to convert numbers of type <code>double</code> to and from <code>FlpDoubleBits</code>.</p>
<h4>
  <a name="995861"> </a>Prototype 
</h4>
<pre class="proto"><a name="995862"></a><code>typedef struct {
  UInt32 sign : 1;
  Int32 exp : 11;
  UInt32 manH : 20;
  UInt32 manL;
} FlpDoubleBits</code>
</pre>
<h4>
  <a name="1004952"> </a>Fields 
</h4>

<dl>
<dt><a name="995871"> </a><code><code>sign</code></code></dt>
<dd><a name="995876"> </a>The sign bit. You can also use the <a href="FloatManager.html#996289"><code>FlpGetSign()</code></a> macro to obtain the sign bit, and the <a href="FloatManager.html#996345"><code>FlpNegate()</code></a>, <a href="FloatManager.html#996376"><code>FlpSetNegative()</code></a>, and <a href="FloatManager.html#996407"><code>FlpSetPositive()</code></a> macros to set the sign bit.</dd>

<dt><a name="995887"> </a><code><code>exp</code></code></dt>
<dd><a name="995889"> </a>The bits that make up the exponent. You can also use the <a href="FloatManager.html#996261"><code>FlpGetExponent()</code></a> macro to obtain the exponent value.</dd>

<dt><a name="995894"> </a><code><code>manH</code></code></dt>
<dd><a name="995896"> </a>The most-significant 20 bits of the mantissa.</dd>

<dt><a name="995898"> </a><code><code>manL</code></code></dt>
<dd><a name="995900"> </a>The least-significant 32 bits of the mantissa.</dd>

</dl>

<h2 class="haH2">
  <a name="995903"> </a>Float Manager Functions <a href="#995796"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="995906"> </a>FlpAToF Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995908"> </a>Purpose 
</h4>

<p><a name="995909"> </a>Convert a null-terminated ASCII string to a 64-bit floating-point number. The string must have the format: </p>
<pre class="sl"><code>[+|-][digits][.][digits][e|E[+|-][digits]]</code></pre>
<h4>
  <a name="995911"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="995912"> </a></code><h4>
  <a name="995913"> </a>Prototype 
</h4>
<pre class="proto"><a name="995914"></a>FlpDouble FlpAToF (
   const Char *s
)
</pre>
<h4>
  <a name="995915"> </a>Parameters 
</h4>

<dl>
<dt><a name="995916"> </a><code>&rarr;  <i><code>s</code></i></code></dt>
<dd><a name="995917"> </a>Pointer to the string to be converted.</dd>

</dl>
<h4>
  <a name="995918"> </a>Returns 
</h4>

<p><a name="995919"> </a>Returns the value of the string as a floating-point number.</p>
<h4>
  <a name="995920"> </a>Comments 
</h4>

<p><a name="995921"> </a>The mantissa of the number is limited to 32 bits.</p>

<p><a name="995922"> </a>This function is close to being compatible with the ISO C library function <code>atof</code>. <code>atof</code> requires the form:</p>

<p><a name="995923"> </a><code>[+|-]digits[.][digits][(e|E)[+|-]digits]</code></p>

<p><a name="995924"> </a>In order to maintain backward compatibility with the Float Manager in Palm OS 1.0 (which could be used up to, but not including, Palm OS 4.0), this function considers <i>all </i>of the "digits" sections to be optional. Here's a table showing the ISO and Palm OS behavior with some sample strings:
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="995927"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">String</span></b></p>
    </th>
    <th><p class="tt"><a name="995929"> </a><b>ISO</b></p>
    </th>
    <th><p class="tt"><a name="995931"> </a><b>&gt;= Palm OS 4.0</b></p>
    </th>
    <th><p class="tt"><a name="995933"> </a><b>&lt; Palm OS 4.0<a href="#995939"><sup>1</sup></a></b></p>
    </th>
    <th><p class="tt"><a name="995941"> </a><b>Notes</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995943"> </a>"+"</p>
    </td>
    <td><p class="tt"><a name="995945"> </a>+0</p>
    </td>
    <td><p class="tt"><a name="995947"> </a>+0</p>
    </td>
    <td><p class="tt"><a name="995949"> </a>+0</p>
    </td>
    <td><p class="tt"><a name="995951"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995953"> </a>".3"</p>
    </td>
    <td><p class="tt"><a name="995955"> </a>0.3</p>
    </td>
    <td><p class="tt"><a name="995957"> </a>0.3</p>
    </td>
    <td><p class="tt"><a name="995959"> </a>0.3</p>
    </td>
    <td><p class="tt"><a name="995961"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995963"> </a>"0.3e123"</p>
    </td>
    <td><p class="tt"><a name="995965"> </a>0.3e123</p>
    </td>
    <td><p class="tt"><a name="995967"> </a>0.3e123</p>
    </td>
    <td><p class="tt"><a name="995969"> </a>0.3e12</p>
    </td>
    <td><p class="tt"><a name="995971"> </a>The old Float Manager only allowed a 1 or 2 digit exponent.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995973"> </a>"+1"</p>
    </td>
    <td><p class="tt"><a name="995975"> </a>1</p>
    </td>
    <td><p class="tt"><a name="995977"> </a>1</p>
    </td>
    <td><p class="tt"><a name="995979"> </a>+0</p>
    </td>
    <td><p class="tt"><a name="995981"> </a>The old Float Manager doesn't allow a leading '+' sign.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995983"> </a>"1e+2"</p>
    </td>
    <td><p class="tt"><a name="995985"> </a>1e2</p>
    </td>
    <td><p class="tt"><a name="995987"> </a>1e2</p>
    </td>
    <td><p class="tt"><a name="995989"> </a>1</p>
    </td>
    <td><p class="tt"><a name="995991"> </a>The old Float Manager doesn't allow a '+' sign in the exponent.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995993"> </a>"0.3E3"</p>
    </td>
    <td><p class="tt"><a name="995995"> </a>0.3e3</p>
    </td>
    <td><p class="tt"><a name="995997"> </a>0.3e3</p>
    </td>
    <td><p class="tt"><a name="995999"> </a>0.3</p>
    </td>
    <td><p class="tt"><a name="996001"> </a>The old Float Manager doesn't allow a capital 'E' to mark the exponent.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996003"> </a>"4294967297"</p>
    </td>
    <td><p class="tt"><a name="996005"> </a>4294967297</p>
    </td>
    <td><p class="tt"><a name="996007"> </a>4294967297</p>
    </td>
    <td><p class="tt"><a name="996009"> </a>1</p>
    </td>
    <td><p class="tt"><a name="996011"> </a>The old Float Manager uses an unsigned long and wraps around.</p>
    </td>
  </tr>
</table>
<div class="tablediv"><table cellspacing="0" class="tTableNR">
   <tr>
     <td><div class="FNTFootnoteTable">
<a name="995939"> </a><a href="#995933">1</a>. Using the old Float Manager documented in <a href="FloatManagerOld.html#1007747">Appendix C, "1.0 Float Manager."</a></div>
</td>
   </tr>
</table></div>

</div>
</p>

<p><a name="996012"> </a>Unlike <code>atof</code>, <code>FlpAToF</code> doesn't accept leading white-space characters and it doesn't accept decimal point characters other than '<code>.</code>'.</p>
<h4>
  <a name="996013"> </a>Compatibility 
</h4>

<p><a name="996017"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. GCC users must use <a href="FloatManager.html#996065"><code>FlpBufferAToF()</code></a> instead of this function.</p>
<h4>
  <a name="996021"> </a>See Also 
</h4>

<p><a name="996025"> </a><a href="FloatManager.html#996232"><code>FlpFToA()</code></a> </p>

<h3 class="hbH3">
  <a name="996028"> </a>FlpBase10Info Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996030"> </a>Purpose 
</h4>

<p><a name="996032"> </a>Extract detailed information on the base 10 form of a floating-point number: the base 10 mantissa, exponent, and sign.</p>
<h4>
  <a name="996033"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996034"> </a></code><h4>
  <a name="996035"> </a>Prototype 
</h4>
<pre class="proto"><a name="996036"></a>Err FlpBase10Info (
   FlpDouble a,
   UInt32 *mantissaP,
   Int16 *exponentP,
   Int16 *signP
)
</pre>
<h4>
  <a name="996037"> </a>Parameters 
</h4>

<dl>
<dt><a name="996038"> </a><code>&rarr;  <i><code>a</code></i></code></dt>
<dd><a name="996039"> </a>The floating-point number.</dd>

<dt><a name="996040"> </a><code>&larr;  <i><code>mantissaP</code></i></code></dt>
<dd><a name="996041"> </a>The base 10 mantissa.</dd>

<dt><a name="996042"> </a><code>&larr;  <i><code>exponentP</code></i></code></dt>
<dd><a name="996043"> </a>The base 10 exponent.</dd>

<dt><a name="996044"> </a><code>&larr;  <i><code>signP</code></i></code></dt>
<dd><a name="996045"> </a>The sign: 1 if the number is negative, 0 otherwise.</dd>

</dl>
<h4>
  <a name="996046"> </a>Returns 
</h4>

<p><a name="996047"> </a>Returns 0 if no error, or <code>flpErrOutOfRange</code> if the supplied floating-point number is either not a number (NaN) or is infinite.</p>
<h4>
  <a name="996048"> </a>Comments 
</h4>

<p><a name="996049"> </a>The mantissa is normalized so it contains at least 8 significant digits when printed as an integer value.</p>
<h4>
  <a name="996050"> </a>Compatibility 
</h4>

<p><a name="996054"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996055"> </a>See Also 
</h4>

<p><a name="996062"> </a><a href="FloatManager.html#996261"><code>FlpGetExponent()</code></a>, <a href="FloatManager.html#996289"><code>FlpGetSign()</code></a></p>

<h3 class="hbH3">
  <a name="996065"> </a>FlpBufferAToF Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996067"> </a>Purpose 
</h4>

<p><a name="996068"> </a>Convert a null-terminated ASCII string to a floating-point number. The string must be in the format: <code>[-]x[.]yyyyyyyy[e[-]zz]</code></p>
<h4>
  <a name="996069"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996070"> </a></code><h4>
  <a name="996071"> </a>Prototype 
</h4>
<pre class="proto"><a name="996072"></a>void FlpBufferAToF (
   FlpDouble *result,
   const Char *s
)
</pre>
<h4>
  <a name="996073"> </a>Parameters 
</h4>

<dl>
<dt><a name="996074"> </a><code>&larr;  <i><code>result</code></i></code></dt>
<dd><a name="996075"> </a>Pointer to the structure into which the return value is placed.</dd>

<dt><a name="996076"> </a><code>&rarr;  <i><code>s</code></i></code></dt>
<dd><a name="996077"> </a>Pointer to the null-terminated ASCII string to be converted.</dd>

</dl>
<h4>
  <a name="996078"> </a>Returns 
</h4>

<p><a name="996079"> </a>Returns the value of the string as a floating-point number.</p>
<h4>
  <a name="996080"> </a>Comments 
</h4>

<p><a name="996084"> </a>See <a href="FloatManager.html#995906"><code>FlpAToF()</code></a> for a complete description of this function.</p>
<h4>
  <a name="996085"> </a>Compatibility 
</h4>

<p><a name="996089"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. Because the Palm OS ABI was not well-specified in this area, GCC by default implemented structure return differently from the compiler used to build the ROM. As a result, GCC users must use this function instead of <a href="FloatManager.html#995906"><code>FlpAToF()</code></a>. CodeWarrior users can use either function; they are binary compatible.</p>

<h3 class="hbH3">
  <a name="996095"> </a>FlpBufferCorrectedAdd Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996097"> </a>Purpose 
</h4>

<p><a name="996098"> </a>Adds two floating-point numbers and corrects for least-significant-bit errors when the result should be zero but is instead very close to zero.</p>
<h4>
  <a name="996099"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996100"> </a></code><h4>
  <a name="996101"> </a>Prototype 
</h4>
<pre class="proto"><a name="996102"></a>void FlpBufferCorrectedAdd (
   FlpDouble *result,
   FlpDouble firstOperand,
   FlpDouble secondOperand,
   Int16 howAccurate
)
</pre>
<h4>
  <a name="996103"> </a>Parameters 
</h4>

<dl>
<dt><a name="996104"> </a><code>&larr;  <i><code>result</code></i></code></dt>
<dd><a name="996105"> </a>Pointer to the structure into which the return value is placed.</dd>

<dt><a name="996106"> </a><code>&rarr;  <i><code>firstOperand</code></i></code></dt>
<dd><a name="996107"> </a>The first of the two numbers to be added.</dd>

<dt><a name="996108"> </a><code>&rarr;  <i><code>secondOperand</code></i></code></dt>
<dd><a name="996109"> </a>The second of the two numbers to be added.</dd>

<dt><a name="996110"> </a><code>&rarr;  <i><code>howAccurate</code></i></code></dt>
<dd><a name="996111"> </a>The smallest difference in exponents that won't force the result to zero. The value returned from this function is forced to zero if the difference between exponents in the smaller of the two operands and the result exceeds this value. Supply a value of zero for this parameter to obtain the default level of accuracy (which is equivalent to a <code>howAccurate</code> value of 48).</dd>

</dl>
<h4>
  <a name="996112"> </a>Returns 
</h4>

<p><a name="996113"> </a>Returns the calculated result.</p>
<h4>
  <a name="996114"> </a>Comments 
</h4>

<p><a name="996118"> </a>See <a href="FloatManager.html#996163"><code>FlpCorrectedAdd()</code></a> for a complete description of this function.</p>
<h4>
  <a name="996119"> </a>Compatibility 
</h4>

<p><a name="996123"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. Because the Palm OS ABI was not well-specified in this area, GCC by default implemented structure return differently from the compiler used to build the ROM. As a result, GCC users must use this function instead of <a href="FloatManager.html#996163"><code>FlpCorrectedAdd()</code></a>. CodeWarrior users can use either function; they are binary compatible.</p>

<h3 class="hbH3">
  <a name="996129"> </a>FlpBufferCorrectedSub Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996131"> </a>Purpose 
</h4>

<p><a name="996132"> </a>Subtracts two floating-point numbers and corrects for least-significant-bit errors when the result should be zero but is instead very close to zero.</p>
<h4>
  <a name="996133"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996134"> </a></code><h4>
  <a name="996135"> </a>Prototype 
</h4>
<pre class="proto"><a name="996136"></a>void FlpBufferCorrectedSub (
   FlpDouble *result,
   FlpDouble firstOperand,
   FlpDouble secondOperand,
   Int16 howAccurate
)
</pre>
<h4>
  <a name="996137"> </a>Parameters 
</h4>

<dl>
<dt><a name="996138"> </a><code>&larr;  <i><code>result</code></i></code></dt>
<dd><a name="996139"> </a>Pointer to the structure into which the return value is placed.</dd>

<dt><a name="996140"> </a><code>&rarr;  <i><code>firstOperand</code></i></code></dt>
<dd><a name="996141"> </a>The value from which <code>secondOperand</code> is to be subtracted.</dd>

<dt><a name="996142"> </a><code>&rarr;  <i><code>secondOperand</code></i></code></dt>
<dd><a name="996143"> </a>The value to subtract from <code>firstOperand</code>.</dd>

<dt><a name="996144"> </a><code>&rarr;  <i><code>howAccurate</code></i></code></dt>
<dd><a name="996145"> </a>The smallest difference in exponents that won't force the result to zero. The value returned from this function is forced to zero if the difference between exponents in the smaller of the two operands and the result exceeds this value. Supply a value of zero for this parameter to obtain the default level of accuracy (which is equivalent to a <code>howAccurate</code> value of 48).</dd>

</dl>
<h4>
  <a name="996146"> </a>Returns 
</h4>

<p><a name="996147"> </a>Returns the calculated result.</p>
<h4>
  <a name="996148"> </a>Comments 
</h4>

<p><a name="996152"> </a>See <a href="FloatManager.html#996200"><code>FlpCorrectedSub()</code></a> for a complete description of this function.</p>
<h4>
  <a name="996153"> </a>Compatibility 
</h4>

<p><a name="996157"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. Because the Palm OS ABI was not well-specified in this area, GCC by default implemented structure return differently from the compiler used to build the ROM. As a result, GCC users must use this function instead of <a href="FloatManager.html#996200"><code>FlpCorrectedSub()</code></a>. CodeWarrior users can use either function; they are binary compatible.</p>

<h3 class="hbH3">
  <a name="996163"> </a>FlpCorrectedAdd Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996165"> </a>Purpose 
</h4>

<p><a name="996166"> </a>Adds two floating-point numbers and corrects for least-significant-bit errors when the result should be zero but is instead very close to zero.</p>
<h4>
  <a name="996167"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996168"> </a></code><h4>
  <a name="996169"> </a>Prototype 
</h4>
<pre class="proto"><a name="996170"></a>FlpDouble FlpCorrectedAdd (
   FlpDouble firstOperand,
   FlpDouble secondOperand,
   Int16 howAccurate
)
</pre>
<h4>
  <a name="996171"> </a>Parameters 
</h4>

<dl>
<dt><a name="996172"> </a><code>&rarr;  <i><code>firstOperand</code></i></code></dt>
<dd><a name="996173"> </a>The first of the two numbers to be added.</dd>

<dt><a name="996174"> </a><code>&rarr;  <i><code>secondOperand</code></i></code></dt>
<dd><a name="996175"> </a>The second of the two numbers to be added.</dd>

<dt><a name="996176"> </a><code>&rarr;  <i><code>howAccurate</code></i></code></dt>
<dd><a name="996177"> </a>The smallest difference in exponents that won't force the result to zero. The value returned from <code>FlpCorrectedAdd</code> is forced to zero if, when the exponent of the result of the addition is subtracted from the exponent of the smaller of the two operands, the difference exceeds the value specified for <code>howAccurate</code>. Supply a value of zero for this parameter to obtain the default level of accuracy (which is equivalent to a <code>howAccurate</code> value of 48).</dd>

</dl>
<h4>
  <a name="996178"> </a>Returns 
</h4>

<p><a name="996179"> </a>Returns the calculated result.</p>
<h4>
  <a name="996180"> </a>Comments 
</h4>

<p><a name="996181"> </a>Adding or subtracting a large number and a small number produces a result similar in magnitude to the larger number. Adding or subtracting two numbers that are similar in magnitude can, depending on their signs, produce a result with a very small exponent (that is, a negative exponent that is large in magnitude). If the difference between the result's exponent and that of the operands is close to the number of significant bits expressible by the mantissa, it is quite possible that the result should in fact be zero.</p>

<p><a name="996182"> </a>There also exist cases where it may be useful to retain accuracy in the low-order bits of the mantissa. For instance: 99999999 + 0.00000001 - 99999999. However, unless the fractional part is an exact (negative) power of two, it is doubtful that what few bits of mantissa that are available will be enough to properly represent the fractional value. In this example, the 99999999 requires 26 bits, leaving 26 bits for the .00000001; this guarantees inaccuracy after the subtraction.</p>

<p><a name="996183"> </a>The problem arises from the difficulty in representing decimal fractions such as 0.1 in binary. After about three successive additions or subtractions, errors begin to appear in the least significant bits of the mantissa. If the value represented by the most significant bits of the mantissa is then subtracted away, the least significant bit error is normalized and becomes the actual result&#8212;when in fact the result should be zero.</p>

<p><a name="996184"> </a>This problem is only an issue for addition and subtraction.</p>
<h4>
  <a name="996185"> </a>Compatibility 
</h4>

<p><a name="996189"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. GCC users must use <a href="FloatManager.html#996095"><code>FlpBufferCorrectedAdd()</code></a> instead of this function.</p>
<h4>
  <a name="996193"> </a>See Also 
</h4>

<p><a name="996197"> </a><a href="FloatManager.html#996200"><code>FlpCorrectedSub()</code></a></p>

<h3 class="hbH3">
  <a name="996200"> </a>FlpCorrectedSub Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996202"> </a>Purpose 
</h4>

<p><a name="996203"> </a>Subtracts two floating-point numbers and corrects for least-significant-bit errors when the result should be zero but is instead very close to zero.</p>
<h4>
  <a name="996204"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996205"> </a></code><h4>
  <a name="996206"> </a>Prototype 
</h4>
<pre class="proto"><a name="996207"></a>FlpDouble FlpCorrectedSub (
   FlpDouble firstOperand,
   FlpDouble secondOperand,
   Int16 howAccurate
)
</pre>
<h4>
  <a name="996208"> </a>Parameters 
</h4>

<dl>
<dt><a name="996209"> </a><code>&rarr;  <i><code>firstOperand</code></i></code></dt>
<dd><a name="996210"> </a>The value from which <code>secondOperand</code> is to be subtracted.</dd>

<dt><a name="996211"> </a><code>&rarr;  <i><code>secondOperand</code></i></code></dt>
<dd><a name="996212"> </a>The value to subtract from <code>firstOperand</code>.</dd>

<dt><a name="996213"> </a><code>&rarr;  <i><code>howAccurate</code></i></code></dt>
<dd><a name="996214"> </a>The smallest difference in exponents that won't force the result to zero.The value returned from <code>FlpCorrectedSub</code> is forced to zero if, when the exponent of the result of the subtraction is subtracted from the exponent of the smaller of the two operands, the difference exceeds the value specified for <code>howAccurate</code>. Supply a value of zero for this parameter to obtain the default level of accuracy (which is equivalent to a <code>howAccurate</code> value of 48).</dd>

</dl>
<h4>
  <a name="996215"> </a>Returns 
</h4>

<p><a name="996216"> </a>Returns the calculated result.</p>
<h4>
  <a name="996217"> </a>Comments 
</h4>

<p><a name="996221"> </a>See the comments for <a href="FloatManager.html#996163"><code>FlpCorrectedAdd()</code></a>.</p>
<h4>
  <a name="996222"> </a>Compatibility 
</h4>

<p><a name="996226"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present. GCC users must use <a href="FloatManager.html#996129"><code>FlpBufferCorrectedSub()</code></a> instead of this function.</p>

<h3 class="hbH3">
  <a name="996232"> </a>FlpFToA Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996234"> </a>Purpose 
</h4>

<p><a name="996235"> </a>Convert a floating-point number to a null-terminated ASCII string in exponential format:<code> [-]x.yyyyyyye[-]zz</code></p>
<h4>
  <a name="996236"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996237"> </a></code><h4>
  <a name="996238"> </a>Prototype 
</h4>
<pre class="proto"><a name="996239"></a>Err FlpFToA (
   FlpDouble a,
   Char *s
)
</pre>
<h4>
  <a name="996240"> </a>Parameters 
</h4>

<dl>
<dt><a name="996241"> </a><code>&rarr;  <i><code>a</code></i></code></dt>
<dd><a name="996242"> </a>Floating-point number.</dd>

<dt><a name="996243"> </a><code>&larr;  <i><code>s</code></i></code></dt>
<dd><a name="996244"> </a>Pointer to buffer to contain the ASCII string.</dd>

</dl>
<h4>
  <a name="996245"> </a>Returns 
</h4>

<p><a name="996246"> </a>Returns 0 if no error, or <code>flpErrOutOfRange</code> if the supplied value is infinite or is not a number. In this case, the buffer is set to the string "INF", "-INF", or "NaN" as appropriate.</p>
<h4>
  <a name="996247"> </a>Comments 
</h4>

<p><a name="996248"> </a>If the supplied floating-point number is zero, the returned string doesn't use the exponential format but is simply "0".</p>
<h4>
  <a name="996249"> </a>Compatibility 
</h4>

<p><a name="996253"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996254"> </a>See Also 
</h4>

<p><a name="996258"> </a><a href="FloatManager.html#995906"><code>FlpAToF()</code></a> </p>

<h3 class="hbH3">
  <a name="996261"> </a>FlpGetExponent Macro <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996263"> </a>Purpose 
</h4>

<p><a name="996264"> </a>Returns the exponent of a 64-bit floating-point value. The returned value has the bias applied, so it ranges from -1023 to +1024.</p>
<h4>
  <a name="996265"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996266"> </a></code><h4>
  <a name="996267"> </a>Prototype 
</h4>
<pre class="proto"><a name="996268"></a>#define FlpGetExponent (
   x
)
</pre>
<h4>
  <a name="996269"> </a>Parameters 
</h4>

<dl>
<dt><a name="996270"> </a><code>&rarr;  <i><code>x</code></i></code></dt>
<dd><a name="996271"> </a>The value from which the exponent is to be extracted.</dd>

</dl>
<h4>
  <a name="996272"> </a>Returns 
</h4>

<p><a name="996273"> </a>Returns a <code>UInt32</code> containing the exponent of the specified value.</p>
<h4>
  <a name="996274"> </a>Compatibility 
</h4>

<p><a name="996278"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996279"> </a>See Also 
</h4>

<p><a name="996286"> </a><a href="FloatManager.html#996028"><code>FlpBase10Info()</code></a>, <a href="FloatManager.html#996289"><code>FlpGetSign()</code></a></p>

<h3 class="hbH3">
  <a name="996289"> </a>FlpGetSign Macro <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996291"> </a>Purpose 
</h4>

<p><a name="996292"> </a>Returns the sign of a 64-bit floating-point value.</p>
<h4>
  <a name="996293"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996294"> </a></code><h4>
  <a name="996295"> </a>Prototype 
</h4>
<pre class="proto"><a name="996296"></a>#define FlpGetSign (
   x
)
</pre>
<h4>
  <a name="996297"> </a>Parameters 
</h4>

<dl>
<dt><a name="996298"> </a><code>&rarr;  <i><code>x</code></i></code></dt>
<dd><a name="996299"> </a>The value from which the sign bit is to be extracted.</dd>

</dl>
<h4>
  <a name="996300"> </a>Returns 
</h4>

<p><a name="996301"> </a>Returns a <code>UInt32</code> with a nonzero value if the specified value is negative, and with a zero value if it is positive.</p>
<h4>
  <a name="996302"> </a>Compatibility 
</h4>

<p><a name="996306"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996307"> </a>See Also 
</h4>

<p><a name="996317"> </a><a href="FloatManager.html#996028"><code>FlpBase10Info()</code></a>, <a href="FloatManager.html#996261"><code>FlpGetExponent()</code></a>, <a href="FloatManager.html#996345"><code>FlpNegate()</code></a>, <a href="FloatManager.html#996376"><code>FlpSetNegative()</code></a>, <a href="FloatManager.html#996407"><code>FlpSetPositive()</code></a></p>

<h3 class="hbH3">
  <a name="996325"> </a>FlpIsZero Macro <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996327"> </a>Purpose 
</h4>

<p><a name="996328"> </a>Returns whether the specified 64-bit floating-point value is zero.</p>
<h4>
  <a name="996329"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996330"> </a></code><h4>
  <a name="996331"> </a>Prototype 
</h4>
<pre class="proto"><a name="996332"></a>#define FlpIsZero (
   x
)
</pre>
<h4>
  <a name="996333"> </a>Parameters 
</h4>

<dl>
<dt><a name="996334"> </a><code>&rarr;  <i><code>x</code></i></code></dt>
<dd><a name="996335"> </a>The value for which the sign bit is desired.</dd>

</dl>
<h4>
  <a name="996336"> </a>Returns 
</h4>

<p><a name="996337"> </a>Returns a <code>UInt32</code> with a nonzero value if the specified value is zero, and with a zero value if the specified value is other than zero.</p>
<h4>
  <a name="996338"> </a>Compatibility 
</h4>

<p><a name="996342"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="996345"> </a>FlpNegate Macro <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996347"> </a>Purpose 
</h4>

<p><a name="996348"> </a>Changes the sign bit of a 64-bit floating-point number.</p>
<h4>
  <a name="996349"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996350"> </a></code><h4>
  <a name="996351"> </a>Prototype 
</h4>
<pre class="proto"><a name="996352"></a>#define FlpNegate (
   x
)
</pre>
<h4>
  <a name="996353"> </a>Parameters 
</h4>

<dl>
<dt><a name="996354"> </a><code>&rarr;  <i><code>x</code></i></code></dt>
<dd><a name="996355"> </a>The value in which the sign bit is to be changed.</dd>

</dl>
<h4>
  <a name="996356"> </a>Returns 
</h4>

<p><a name="996357"> </a>Returns a 64-bit floating-point value which is the negative of the value specified by <code>x</code>.</p>
<h4>
  <a name="996358"> </a>Compatibility 
</h4>

<p><a name="996362"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996363"> </a>See Also 
</h4>

<p><a name="996373"> </a><a href="FloatManager.html#996289"><code>FlpGetSign()</code></a>, <a href="FloatManager.html#996376"><code>FlpSetNegative()</code></a>, <a href="FloatManager.html#996407"><code>FlpSetPositive()</code></a></p>

<h3 class="hbH3">
  <a name="996376"> </a>FlpSetNegative Macro <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996378"> </a>Purpose 
</h4>

<p><a name="996379"> </a>Ensures that a 64-bit floating-point number is negative.</p>
<h4>
  <a name="996380"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996381"> </a></code><h4>
  <a name="996382"> </a>Prototype 
</h4>
<pre class="proto"><a name="996383"></a>#define FlpSetNegative (
   x
)
</pre>
<h4>
  <a name="996384"> </a>Parameters 
</h4>

<dl>
<dt><a name="996385"> </a><code>&rarr;  <i><code>x</code></i></code></dt>
<dd><a name="996386"> </a>The value that is to be forced negative.</dd>

</dl>
<h4>
  <a name="996387"> </a>Returns 
</h4>

<p><a name="996388"> </a>If the supplied 64-bit floating-point value is negative, that value is returned unchanged. If the supplied value is positive, the negative of that value is returned.</p>
<h4>
  <a name="996389"> </a>Compatibility 
</h4>

<p><a name="996393"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996394"> </a>See Also 
</h4>

<p><a name="996404"> </a><a href="FloatManager.html#996289"><code>FlpGetSign()</code></a>, <a href="FloatManager.html#996345"><code>FlpNegate()</code></a>, <a href="FloatManager.html#996407"><code>FlpSetPositive()</code></a></p>

<h3 class="hbH3">
  <a name="996407"> </a>FlpSetPositive Macro <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996409"> </a>Purpose 
</h4>

<p><a name="996410"> </a>Ensures that a 64-bit floating-point number is positive.</p>
<h4>
  <a name="996411"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996412"> </a></code><h4>
  <a name="996413"> </a>Prototype 
</h4>
<pre class="proto"><a name="996414"></a>#define FlpSetPositive (
   x
)
</pre>
<h4>
  <a name="996415"> </a>Parameters 
</h4>

<dl>
<dt><a name="996416"> </a><code>&rarr;  <i><code>x</code></i></code></dt>
<dd><a name="996417"> </a>The value that is to be forced positive.</dd>

</dl>
<h4>
  <a name="996418"> </a>Returns 
</h4>

<p><a name="996419"> </a>If the supplied 64-bit floating-point value is positive, that value is returned unchanged. If the supplied value is negative, its absolute value is returned.</p>
<h4>
  <a name="996420"> </a>Compatibility 
</h4>

<p><a name="996424"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996425"> </a>See Also 
</h4>

<p><a name="996435"> </a><a href="FloatManager.html#996289"><code>FlpGetSign()</code></a>, <a href="FloatManager.html#996345"><code>FlpNegate()</code></a>, <a href="FloatManager.html#996376"><code>FlpSetNegative()</code></a></p>

<h3 class="hbH3">
  <a name="996437"> </a>FlpVersion Function <a href="#995796"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996439"> </a>Purpose 
</h4>

<p><a name="996440"> </a>Returns the version number of the Float Manager.</p>
<h4>
  <a name="996441"> </a>Declared In 
</h4>
<code>FloatMgr.h<a name="996442"> </a></code><h4>
  <a name="996443"> </a>Prototype 
</h4>
<pre class="proto"><a name="996444"></a>UInt32 FlpVersion (
   void
)
</pre>
<h4>
  <a name="996445"> </a>Parameters 
</h4>

<dl>
<dt><a name="996446"> </a><code>None.</code></dt>
</dl>
<h4>
  <a name="996447"> </a>Returns 
</h4>

<p><a name="996448"> </a>Returns the version number of the Float Manager. The current version is represented by the constant <code>flpVersion</code>, which is defined in <code>FloatMgr.h</code>.</p>
<h4>
  <a name="996449"> </a>Compatibility 
</h4>

<p><a name="996453"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>

<p><a name="996454"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="FileStreaming.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Font.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>