<html>
<head>
<title>(68K) Bluetooth Library: Management | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:47:39">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1027980"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BtLibRef_General.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BtLibRef_Sockets.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">82 &nbsp;&nbsp;
Bluetooth Library: Management</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartIV.html">Part IV: Libraries</a> </h1>
<h1 class="SideTOC1"><a href="BtLibRef_Mgt.html">82  Bluetooth Library: Management</a></h1>

   <h2 class="SideTOC2"><a href="#1028017">
   Bluetooth Management Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1028021">
      BtLibAccessibleModeEnum</a></h3>

      <h3 class="SideTOC3"><a href="#1028043">
      BtLibClassOfDeviceType</a></h3>

      <h3 class="SideTOC3"><a href="#1028233">
      BtLibConnectionRoleEnum</a></h3>

      <h3 class="SideTOC3"><a href="#1028251">
      BtLibDeviceAddressType</a></h3>

      <h3 class="SideTOC3"><a href="#1028264">
      BtLibFriendlyNameType</a></h3>

      <h3 class="SideTOC3"><a href="#1028282">
      BtLibManagementEventType</a></h3>

   <h2 class="SideTOC2"><a href="#1028315">
   Management Callback Events</a></h2>

      <h3 class="SideTOC3"><a href="#1028331">
      btLibManagementEventAccessibilityChange</a></h3>

      <h3 class="SideTOC3"><a href="#1028351">
      btLibManagementEventAclConnectInbound</a></h3>

      <h3 class="SideTOC3"><a href="#1028361">
      btLibManagementEventAclConnectOutbound</a></h3>

      <h3 class="SideTOC3"><a href="#1028379">
      btLibManagementEventAclDisconnect</a></h3>

      <h3 class="SideTOC3"><a href="#1028400">
      btLibManagementEventAuthentication<br>Complete</a></h3>

      <h3 class="SideTOC3"><a href="#1028418">
      btLibManagementEventEncryptionChange</a></h3>

      <h3 class="SideTOC3"><a href="#1028441">
      btLibManagementEventInquiryCanceled</a></h3>

      <h3 class="SideTOC3"><a href="#1028448">
      btLibManagementEventInquiryComplete</a></h3>

      <h3 class="SideTOC3"><a href="#1028455">
      btLibManagementEventInquiryResult</a></h3>

      <h3 class="SideTOC3"><a href="#1028481">
      btLibManagementEventLocalNameChange</a></h3>

      <h3 class="SideTOC3"><a href="#1028506">
      btLibManagementEventModeChange</a></h3>

      <h3 class="SideTOC3"><a href="#1028556">
      btLibManagementEventNameResult</a></h3>

      <h3 class="SideTOC3"><a href="#1028584">
      btLibManagementEventPairingComplete</a></h3>

      <h3 class="SideTOC3"><a href="#1028590">
      btLibManagementEventPasskeyRequest</a></h3>

      <h3 class="SideTOC3"><a href="#1028604">
      btLibManagementEventPasskeyRequestComplete</a></h3>

      <h3 class="SideTOC3"><a href="#1028608">
      btLibManagementEventPiconetCreated</a></h3>

      <h3 class="SideTOC3"><a href="#1028615">
      btLibManagementEventPiconetDestroyed</a></h3>

      <h3 class="SideTOC3"><a href="#1028623">
      btLibManagementEventRadioState</a></h3>

      <h3 class="SideTOC3"><a href="#1028645">
      btLibManagementEventRoleChange</a></h3>

   <h2 class="SideTOC2"><a href="#1028666">
   Management Event Status Codes</a></h2>

   <h2 class="SideTOC2"><a href="#1028746">
   Library Management Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1028751">
      BtLibClose</a></h3>

      <h3 class="SideTOC3"><a href="#1028773">
      BtLibOpen</a></h3>

   <h2 class="SideTOC2"><a href="#1028816">
   Management Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1028820">
      BtLibCancelInquiry</a></h3>

      <h3 class="SideTOC3"><a href="#1028867">
      BtLibDiscoverMultipleDevices</a></h3>

      <h3 class="SideTOC3"><a href="#1028929">
      BtLibDiscoverSingleDevice</a></h3>

      <h3 class="SideTOC3"><a href="#1028985">
      BtLibGetGeneralPreference</a></h3>

      <h3 class="SideTOC3"><a href="#1029065">
      BtLibGetRemoteDeviceName</a></h3>

      <h3 class="SideTOC3"><a href="#1029134">
      BtLibGetSelectedDevices</a></h3>

      <h3 class="SideTOC3"><a href="#1029171">
      BtLibLinkConnect</a></h3>

      <h3 class="SideTOC3"><a href="#1029216">
      BtLibLinkDisconnect</a></h3>

      <h3 class="SideTOC3"><a href="#1029261">
      BtLibLinkGetState</a></h3>

      <h3 class="SideTOC3"><a href="#1029313">
      BtLibLinkSetState</a></h3>

      <h3 class="SideTOC3"><a href="#1029396">
      BtLibPiconetCreate</a></h3>

      <h3 class="SideTOC3"><a href="#1029449">
      BtLibPiconetDestroy</a></h3>

      <h3 class="SideTOC3"><a href="#1029498">
      BtLibPiconetLockInbound</a></h3>

      <h3 class="SideTOC3"><a href="#1029530">
      BtLibPiconetUnlockInbound</a></h3>

      <h3 class="SideTOC3"><a href="#1029564">
      BtLibRegisterManagementNotification</a></h3>

      <h3 class="SideTOC3"><a href="#1029612">
      BtLibSetGeneralPreference</a></h3>

      <h3 class="SideTOC3"><a href="#1029663">
      BtLibStartInquiry</a></h3>

      <h3 class="SideTOC3"><a href="#1029712">
      BtLibUnregisterManagementNotification</a></h3>

   <h2 class="SideTOC2"><a href="#1029745">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1029749">
      BtLibManagementCallback</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1027981"> </a>The management API of the Bluetooth library supports the lower levels of the Bluetooth specification, specifically the radio, baseband, and Link Manager Protocol specifications. This chapter presents reference material for the management API:</p>

<dl>
<dt><a name="1027985"> </a><code><a href="BtLibRef_Mgt.html#1028017">Bluetooth Management Data Structures</a></code></dt>
<dd><a name="1027986"> </a>This section lists some of the more important types used by the Bluetooth library management functions.</dd>

<dt><a name="1027990"> </a><code><a href="BtLibRef_Mgt.html#1028315">Management Callback Events</a></code></dt>
<dd><a name="1048738"> </a>This section lists the management callback events. Most of the management functions are asynchronous. In other words, they start operations and return before the operations complete. To signal the application that management operations have completed, the Bluetooth library generates <b>management callback events</b> by calling a callback function.</dd>

<dt><a name="1048742"> </a><code><a href="BtLibRef_Mgt.html#1028666">Management Event Status Codes</a></code></dt>
<dd><a name="1027996"> </a>When a management event is generated, the <code>status</code> field of the associated <a href="BtLibRef_Mgt.html#1028282"><code>BtLibManagementEventType</code></a> provides information about why the event occurred. This section explains what these codes mean.</dd>

<dt><a name="1028003"> </a><code><a href="BtLibRef_Mgt.html#1028746">Library Management Functions</a></code></dt>
<dd><a name="1028004"> </a>This section describes the functions that open and close the shared library.</dd>

<dt><a name="1028008"> </a><code><a href="BtLibRef_Mgt.html#1028816">Management Functions</a></code></dt>
<dd><a name="1028009"> </a>The management functions handle the lower levels of the Bluetooth specification, specifically the radio, baseband, and Link Manager Protocol specifications. These functions perform tasks that include discovering devices, working with Asynchronous Connectionless (ACL) links and piconets, and maintaining global settings for the Bluetooth library.</dd>

<dt><a name="1028013"> </a><code><a href="BtLibRef_Mgt.html#1029745">Application-Defined Functions</a></code></dt>
<dd><a name="1028014"> </a>This section describes the callback functions that handle management events.</dd>

</dl>

<p><a name="1028015"> </a>The header file <code>BtLib.h</code> declares the Bluetooth library functions and macros. The header file <code>BtLibTypes.h</code> declares the data structures that you use with those functions and macros. For more information about using the Bluetooth library, see the <i>Palm OS Programmer's Companion Supplement: Bluetooth</i>.</p>

<h2 class="haH2">
  <a name="1028017"> </a>Bluetooth Management Data Structures <a href="#1027980"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1028018"> </a>This section lists some of the more important types used by the Bluetooth library management functions.</p>

<h3 class="hbH3">
  <a name="1028021"> </a>BtLibAccessibleModeEnum Enum <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028023"> </a>Purpose 
</h4>

<p><a name="1028024"> </a>The <code>BtLibAccessibleModeEnum</code> enum specifies a device's accessibility modes. See the "Generic Access Profile" chapter of the <i>Specification of the Bluetooth System</i> for more information about accessibility.</p>
<h4>
  <a name="1028025"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028026"></a>typedef enum {
  btLibNotAccessible = 0x00,
  btLibConnectableOnly = 0x02,
  btLibDiscoverableAndConnectable = 0x03
} BtLibAccessibleModeEnum;
</pre>
<h4>
  <a name="1028031"> </a>Constants 
</h4>

<dl>
<dt><a name="1028033"> </a><code>btLibConnectableOnly</code></dt>
<dd><a name="1028034"> </a>The device responds to a page but not an inquiry.</dd>

<dt><a name="1028036"> </a><code>btLibDiscoverableAndConnectable</code></dt>
<dd><a name="1028037"> </a>The device responds to both a page and an inquiry.</dd>

<dt><a name="1028039"> </a><code>btLibNotAccessible</code></dt>
<dd><a name="1028040"> </a>The device does not respond to a page or an inquiry.</dd>

</dl>

<h3 class="hbH3">
  <a name="1028043"> </a>BtLibClassOfDeviceType Typedef <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028045"> </a>Purpose 
</h4>

<p><a name="1028046"> </a>The <code>BtLibClassOfDeviceType</code> type represents the class of the device and the services it supports.</p>
<h4>
  <a name="1028047"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028048"></a>typedef UInt32 BtLibClassOfDeviceType;
</pre>

<p><a name="1028049"> </a>A device can support multiple services but only belongs to a single class. The class is specified in two parts: the major class, which broadly classifies the type of device, and the minor class, which together with the major class specifies the type of device in more detail.</p>

<p><a name="1028050"> </a>An example is a simple cellular telephone. It provides Telephony services. Its major device class is Phone, and its minor device class is Cellular.</p>

<p><a name="1028051"> </a>The <i>Bluetooth Assigned Numbers</i> specification defines a device class as having three bit fields. One field specifies the major service classes supported by the device. Another field specifies the major device class. The third field specifies the minor device class.</p>

<p><a name="1028052"> </a>The constants provided here allow you to construct a device class that conforms to the Bluetooth specification. You simply perform a logical OR of the constants representing the service classes the device supports, the constant representing the device's major class, and the constant representing the device's minor class.</p>

<p><a name="1028053"> </a>For example, device class of the simple cellular telephone can be computed as follows:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
cellPhoneCOD = btLibCOD_Telephony |<a name="1028054"> </a>
  btLibCOD_Major_Phone |<a name="1028055"> </a>
  BtLibCOD_Minor_Phone_Cellular;<a name="1028056"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1028057"> </a>Constants are also provided to mask the individual bit fields in a device class.</p>

<h4 class="hcH4">
  <a name="1028058"> </a>Major Service Classes
</h4>

<p><a name="1028059"> </a>These constants define the Bluetooth major service classes. The service classes are described in the <i>Specification of the Bluetooth System</i>.</p>
<h4>
  <a name="1028060"> </a>Constants 
</h4>

<dl>
<dt><a name="1028062"> </a><code>btLibCOD_LimitedDiscoverableMode</code></dt>
<dt><a name="1028064"> </a><code>btLibCOD_Networking</code></dt>
<dt><a name="1028066"> </a><code>btLibCOD_Rendering</code></dt>
<dt><a name="1028068"> </a><code>btLibCOD_Capturing</code></dt>
<dt><a name="1028070"> </a><code>btLibCOD_ObjectTransfer</code></dt>
<dt><a name="1028072"> </a><code>btLibCOD_Audio</code></dt>
<dt><a name="1028074"> </a><code>btLibCOD_Telephony</code></dt>
<dt><a name="1028076"> </a><code>btLibCOD_Information</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1028077"> </a>Major Device Classes
</h4>

<p><a name="1028078"> </a>These constants define the Bluetooth major device classes. The major device classes are described in the <i>Specification of the Bluetooth System</i>.</p>
<h4>
  <a name="1028079"> </a>Constants 
</h4>

<dl>
<dt><a name="1028081"> </a><code>btLibCOD_Major_Misc</code></dt>
<dt><a name="1028083"> </a><code>btLibCOD_Major_Computer</code></dt>
<dt><a name="1028085"> </a><code>btLibCOD_Major_Phone</code></dt>
<dt><a name="1028087"> </a><code>btLibCOD_Major_Lan_Access_Point</code></dt>
<dt><a name="1028089"> </a><code>btLibCOD_Major_Audio</code></dt>
<dt><a name="1028091"> </a><code>btLibCOD_Major_Peripheral</code></dt>
<dt><a name="1044627"> </a><code>btLibCOD_Major_Imaging</code></dt>
<dt><a name="1028093"> </a><code>btLibCOD_Major_Unclassified</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1028094"> </a>Computer Minor Device Classes
</h4>

<p><a name="1028095"> </a>These constants define the minor device classes associated with the computer major class. They are described in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1028096"> </a>Constants 
</h4>

<dl>
<dt><a name="1028098"> </a><code>btLibCOD_Minor_Comp_Unclassified</code></dt>
<dt><a name="1028100"> </a><code>btLibCOD_Minor_Comp_Desktop</code></dt>
<dt><a name="1028102"> </a><code>btLibCOD_Minor_Comp_Server</code></dt>
<dt><a name="1028104"> </a><code>btLibCOD_Minor_Comp_Laptop</code></dt>
<dt><a name="1028106"> </a><code>btLibCOD_Minor_Comp_Handheld</code></dt>
<dt><a name="1028108"> </a><code>btLibCOD_Minor_Comp_Palm</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1028109"> </a>Phone Minor Device Classes
</h4>

<p><a name="1028110"> </a>These constants define the minor device classes are associated with the computer major class. They are described in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1028111"> </a>Constants 
</h4>

<dl>
<dt><a name="1028113"> </a><code>btLibCOD_Minor_Phone_Unclassified</code></dt>
<dt><a name="1028115"> </a><code>btLibCOD_Minor_Phone_Cellular</code></dt>
<dt><a name="1044629"> </a><code>btLibCOD_Minor_Phone_ISDN</code></dt>
<dt><a name="1028117"> </a><code>btLibCOD_Minor_Phone_Cordless</code></dt>
<dt><a name="1028119"> </a><code>btLibCOD_Minor_Phone_Smart</code></dt>
<dt><a name="1028121"> </a><code>btLibCOD_Minor_Phone_Modem</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1028122"> </a>LAN Access Point Minor Device Classes
</h4>

<p><a name="1028123"> </a>These constants define load factors for the LAN access point major device class. LAN access point load factors are described in more detail in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1028124"> </a>Constants 
</h4>

<dl>
<dt><a name="1028126"> </a><code>btLibCOD_Minor_Lan_0</code></dt>
<dd><a name="1028127"> </a>Fully available</dd>

<dt><a name="1028129"> </a><code>btLibCOD_Minor_Lan_17</code></dt>
<dd><a name="1028130"> </a>1-17% utilized</dd>

<dt><a name="1028132"> </a><code>btLibCOD_Minor_Lan_33</code></dt>
<dd><a name="1028133"> </a>17-33% utilized</dd>

<dt><a name="1028135"> </a><code>btLibCOD_Minor_Lan_50</code></dt>
<dd><a name="1028136"> </a>33-50% utilized</dd>

<dt><a name="1028138"> </a><code>btLibCOD_Minor_Lan_67</code></dt>
<dd><a name="1028139"> </a>50-67% utilized</dd>

<dt><a name="1028141"> </a><code>btLibCOD_Minor_Lan_83</code></dt>
<dd><a name="1028142"> </a>67-83% utilized</dd>

<dt><a name="1028144"> </a><code>btLibCOD_Minor_Lan_99</code></dt>
<dd><a name="1028145"> </a>83-99% utilized</dd>

<dt><a name="1028147"> </a><code>btLibCOD_Minor_Lan_NoService</code></dt>
<dd><a name="1028148"> </a>Fully utilized</dd>

</dl>

<h4 class="hcH4">
  <a name="1028149"> </a>Audio Minor Device Classes
</h4>

<p><a name="1048756"> </a>These constants define the minor classes associated with the audio major class. They are described in more detail in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1048757"> </a>Constants 
</h4>

<dl>
<dt><a name="1028153"> </a><code>btLibCOD_Minor_Audio_Unclassified</code></dt>
<dt><a name="1028155"> </a><code>btLibCOD_Minor_Audio_Headset</code></dt>
<dt><a name="1044631"> </a><code>btLibCOD_Minor_Audio_HandFree</code></dt>
<dt><a name="1044637"> </a><code>btLibCOD_Minor_Audio_MicroPhone</code></dt>
<dt><a name="1044642"> </a><code>btLibCOD_Minor_Audio_LoudSpeaker</code></dt>
<dt><a name="1044658"> </a><code>btLibCOD_Minor_Audio_HeadPhone</code></dt>
<dt><a name="1044663"> </a><code>btLibCOD_Minor_Audio_PortableAudio</code></dt>
<dt><a name="1044668"> </a><code>btLibCOD_Minor_Audio_CarAudio</code></dt>
<dt><a name="1044673"> </a><code>btLibCOD_Minor_Audio_SetTopBox</code></dt>
<dt><a name="1044678"> </a><code>btLibCOD_Minor_Audio_HifiAudio</code></dt>
<dt><a name="1044683"> </a><code>btLibCOD_Minor_Audio_VCR</code></dt>
<dt><a name="1044980"> </a><code>btLibCOD_Minor_Audio_VideoCamera</code></dt>
<dt><a name="1044985"> </a><code>btLibCOD_Minor_Audio_CamCorder</code></dt>
<dt><a name="1044990"> </a><code>btLibCOD_Minor_Audio_VideoMonitor</code></dt>
<dt><a name="1044995"> </a><code>btLibCOD_Minor_Audio_VideoDisplayAndLoudSpeaker</code></dt>
<dt><a name="1045008"> </a><code>btLibCOD_Minor_Audio_VideoConf</code></dt>
<dt><a name="1045013"> </a><code>btLibCOD_Minor_Audio_GameToy</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1045044"> </a>Peripheral Minor Device Classes
</h4>

<p><a name="1045173"> </a>These constants define the minor classes associated with the peripheral major class. They are described in more detail in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1045267"> </a>Constants 
</h4>

<dl>
<dt><a name="1045268"> </a><code>btLibCOD_Minor_Peripheral_Unclassified</code></dt>
<dt><a name="1045272"> </a><code>btLibCOD_Minor_Peripheral_Keyboard</code></dt>
<dt><a name="1045277"> </a><code>btLibCOD_Minor_Peripheral_Pointing</code></dt>
<dt><a name="1045282"> </a><code>btLibCOD_Minor_Peripheral_Combo</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1045269"> </a>Peripheral Minor Device Subclasses
</h4>

<p><a name="1045056"> </a>These constants define further subclasses associated with the peripheral minor classes. They are described in more detail in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1045077"> </a>Constants 
</h4>

<dl>
<dt><a name="1045092"> </a><code>btLibCOD_Minor_Peripheral_Joystick</code></dt>
<dt><a name="1045097"> </a><code>btLibCOD_Minor_Peripheral_GamePad</code></dt>
<dt><a name="1045110"> </a><code>btLibCOD_Minor_Peripheral_RemoteControl</code></dt>
<dt><a name="1045118"> </a><code>btLibCOD_Minor_Peripheral_Sensing</code></dt>
<dt><a name="1045123"> </a><code>btLibCOD_Minor_Peripheral_DigitizerTablet</code></dt>
<dt><a name="1045128"> </a><code>btLibCOD_Minor_Peripheral_CardReader</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1045291"> </a>Imaging Minor Device Classes
</h4>

<p><a name="1045294"> </a>These constants define the minor classes associated with the imaging major class. They are described in more detail in the <i>Bluetooth Assigned Numbers</i> specification.</p>
<h4>
  <a name="1045292"> </a>Constants 
</h4>

<dl>
<dt><a name="1045589"> </a><code>btLibCOD_Minor_Imaging_Unclassified</code></dt>
<dt><a name="1045590"> </a><code>btLibCOD_Minor_Imaging_Display</code></dt>
<dt><a name="1045595"> </a><code>btLibCOD_Minor_Imaging_Camera</code></dt>
<dt><a name="1045600"> </a><code>btLibCOD_Minor_Imaging_Scanner</code></dt>
<dt><a name="1045613"> </a><code>btLibCOD_Minor_Imaging_Printer</code></dt>
</dl>

<h4 class="hcH4">
  <a name="1028156"> </a>Masks
</h4>

<p><a name="1028157"> </a>These constants define bit masks to isolate certain fields of the device class.</p>
<h4>
  <a name="1028158"> </a>Constants 
</h4>

<dl>
<dt><a name="1028160"> </a><code>btLibCOD_Service_Mask</code></dt>
<dd><a name="1028161"> </a>A mask to isolate the major service class field from the other fields of the device class.</dd>

<dt><a name="1028163"> </a><code>btLibCOD_Major_Mask</code></dt>
<dd><a name="1028164"> </a>A mask to isolate the major device class field from the other fields of the device class.</dd>

<dt><a name="1028166"> </a><code>btLibCOD_Minor_Mask</code></dt>
<dd><a name="1028167"> </a>A mask to isolate the minor device class field from the other fields of the device class.</dd>

<dt><a name="1028169"> </a><code>btLibCOD_ServiceAny</code></dt>
<dd><a name="1028170"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. With this filter, devices providing any service appear in the device list. Same as <code>btLibCOD_Service_Mask</code>.</dd>

<dt><a name="1028178"> </a><code>btLibCOD_Major_Any</code></dt>
<dd><a name="1028179"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. With this filter, devices in any major device class appear in the device list. Same as <code>btLibCOD_Major_Mask</code>.</dd>

<dt><a name="1028187"> </a><code>btLibCOD_Minor_Any</code></dt>
<dd><a name="1028188"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. With this filter, devices in any minor device class appear in the device list. Same as <code>btLibCOD_Minor_Mask</code>.</dd>

<dt><a name="1028196"> </a><code>btLibCOD_Minor_Comp_Any</code></dt>
<dd><a name="1028197"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. When this filter is used in conjunction with <code>btLibCOD_Major_Computer</code>, all devices broadcasting themselves as computers appear in the device list. Same as <code>btLibCOD_Minor_Any</code>.</dd>

<dt><a name="1028205"> </a><code>btLibCOD_Minor_Phone_Any</code></dt>
<dd><a name="1028206"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. When this filter is used in conjunction with <code>btLibCOD_Major_Phone</code>, all devices broadcasting themselves as phones appear in the device list. Same as <code>btLibCOD_Minor_Any</code>.</dd>

<dt><a name="1028214"> </a><code>btLibCOD_Minor_LAN_Any</code></dt>
<dd><a name="1028215"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. When this filter is used in conjunction with <code>btLibCOD_Major_Lan_Access_Point</code>, all devices broadcasting themselves as LAN access points appear in the device list. Same as <code>btLibCOD_Minor_Any</code>.</dd>

<dt><a name="1028223"> </a><code>btLibCOD_Minor_Audio_Any</code></dt>
<dd><a name="1028224"> </a>Used as a device filter for the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> and <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> functions. When this filter is used in conjunction with <code>btLibCOD_Major_Audio,</code> all devices broadcasting themselves as audio devices appear in the device list. Same as <code>btLibCOD_Minor_Any</code>.</dd>

</dl>

<h3 class="hbH3">
  <a name="1028233"> </a>BtLibConnectionRoleEnum Enum <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028235"> </a>Purpose 
</h4>

<p><a name="1028236"> </a>The <code>BtLibConnectionRoleEnum</code> enum specifies all the connection roles a device can have. A device can either be a master or a slave.</p>
<h4>
  <a name="1028237"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028238"></a>typedef enum {
  btLibMasterRole,
  btLibSlaveRole
} BtLibConnectionRoleEnum;
</pre>
<h4>
  <a name="1028242"> </a>Constants 
</h4>

<dl>
<dt><a name="1028244"> </a><code>btLibMasterRole</code></dt>
<dd><a name="1028245"> </a>The device is a master.</dd>

<dt><a name="1028247"> </a><code>btLibSlaveRole</code></dt>
<dd><a name="1028248"> </a>The device is a slave.</dd>

</dl>

<h3 class="hbH3">
  <a name="1028251"> </a>BtLibDeviceAddressType Struct <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028253"> </a>Purpose 
</h4>

<p><a name="1028254"> </a>The <code>BtLibDeviceAddressType</code> structure represents a 48-bit Bluetooth device address.</p>
<h4>
  <a name="1028255"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028256"></a>#define btLibDeviceAddressSize 6
</pre>

<p><a name="1028257"> </a></p>
<pre class="proto"><a name="1028258"></a>typedef struct BtLibDeviceAddressType {
    UInt8 address[btLibDeviceAddressSize];
} BtLibDeviceAddressType;
</pre>

<h3 class="hbH3">
  <a name="1028264"> </a>BtLibFriendlyNameType Struct <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028266"> </a>Purpose 
</h4>

<p><a name="1028267"> </a>The <code>BtLibFriendlyNameType</code> structure contains the user-friendly name of a device.</p>
<h4>
  <a name="1028268"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028269"></a>typedef struct BtLibFriendlyNameType {
  UInt8  *name;
  UInt8  nameLength;
} BtLibFriendlyNameType,
</pre>
<pre class="proto"><a name="1028273"></a>  *BtLibFriendlyNameTypePtr;
</pre>
<h4>
  <a name="1046499"> </a>Fields 
</h4>

<dl>
<dt><a name="1028275"> </a><code>name</code></dt>
<dd><a name="1028276"> </a>Array of characters, encoded according to the UTF-8 standard, containing the user-friendly name of the device. This array is not null-terminated.</dd>

<dt><a name="1028277"> </a><code>nameLength</code></dt>
<dd><a name="1028278"> </a>The number of characters in the user-friendly name. The maximum size is 249 characters.</dd>

</dl>

<h3 class="hbH3">
  <a name="1028282"> </a>BtLibManagementEventType Struct <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028284"> </a>Purpose 
</h4>

<p><a name="1028285"> </a>The <code>BtLibManagementEventType</code> structure contains detailed information regarding a management callback event. All management events have some common data. Most management events have data specific to those events. The specific data uses a union that is part of the <code>BtLibManagementEvent</code> data structure.</p>
<h4>
  <a name="1028286"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028287"></a>typedef struct _BtLibManagementEventType {
  BtLibManagementEventEnum event;
  Err status;
  union {
    ...
  } eventData;
} BtLibManagementEventType;
</pre>
<h4>
  <a name="1046506"> </a>Fields 
</h4>

<dl>
<dt><a name="1028295"> </a><code>event</code></dt>
<dd><a name="1028296"> </a>A <code>BtLibManagementEventEnum</code> enum member that indicates which management event has occurred. See <a href="BtLibRef_Mgt.html#1028315">Management Callback Events</a>.</dd>

<dt><a name="1028300"> </a><code>status</code></dt>
<dd><a name="1028304"> </a>Status of the event. The <a href="BtLibRef_Mgt.html#1028315">Management Callback Events</a> section gives more details about how to interpret this field for specific events.</dd>

<dt><a name="1028305"> </a><code><code>eventData</code></code></dt>
<dd><a name="1028306"> </a>Data associated with the event. The member of this union that is valid depends on the event. See <a href="BtLibRef_Mgt.html#1028315">Management Callback Events</a> for more information.</dd>

</dl>

<p><a name="1028310"> </a>A <code>BtLibManagementEventType</code> object is passed as the first argument of the <a href="BtLibRef_Mgt.html#1029749"><code>BtLibManagementCallback()</code></a> callback function.</p>

<h2 class="haH2">
  <a name="1028315"> </a>Management Callback Events <a href="#1027980"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1028316"> </a>The management functions of the Bluetooth library support the lower levels of the Bluetooth specification, specifically the radio, baseband, and Link Manager Protocol specifications. Most of the management functions are asynchronous. In other words, they start operations and return before the operations complete. To signal the application that management operations have completed, the Bluetooth library generates <b>management callback events</b> by calling a callback function.</p>

<p><a name="1028317"> </a>You specify the callback function using the <a href="BtLibRef_Mgt.html#1029564"><code>BtLibRegisterManagementNotification()</code></a> function. When an event occurs, the callback function is called with two parameters: a pointer to a <a href="BtLibRef_Mgt.html#1028282"><code>BtLibManagementEventType</code></a> structure and a pointer to a user-defined structure.</p>

<p><a name="1028324"> </a>The <code>BtLibManagementEventType</code> structure contains an <code>event</code> field, which indicates the reason the callback is called, a <code>status</code> field, which contains status information associated with the event, and a union of several structures. The member of the union that is valid depends on the event. The meaning of the events is described in the following sections.</p>

<p><a name="1028327"> </a>For more information about the <code>status</code> field, see <a href="BtLibRef_Mgt.html#1028666">Management Event Status Codes</a>. </p>

<h3 class="hbH3">
  <a name="1028331"> </a>btLibManagementEventAccessibilityChange <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028332"> </a>The accessibility mode of the local device has changed.</p>

<p><a name="1028333"> </a>For this event, the <code>eventData</code> field contains the following field:</p>
<pre class="sl">BtLibAccessibleModeEnum accessible;</pre>

<p><a name="1028338"> </a>This <a href="BtLibRef_Mgt.html#1028021"><code>BtLibAccessibleModeEnum</code></a> represents the new accessibility mode of the local device.</p>

<p><a name="1028342"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1028773"><code>BtLibOpen()</code></a>, <a href="BtLibRef_Mgt.html#1029396"><code>BtLibPiconetCreate()</code></a>, or <a href="BtLibRef_Mgt.html#1029612"><code>BtLibSetGeneralPreference()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028351"> </a>btLibManagementEventAclConnectInbound <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028352"> </a>A remote device has established an ACL link to the local device.</p>

<p><a name="1028353"> </a>For this event, the <code>eventData</code> field contains the following field:</p>
<pre class="sl">BtLibDeviceAddressType bdAddr;</pre>

<p><a name="1028358"> </a>This <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> contains the address of the remote device.</p>

<h3 class="hbH3">
  <a name="1028361"> </a>btLibManagementEventAclConnectOutbound <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028362"> </a>An ACL link has been established with a remote device.</p>

<p><a name="1028363"> </a>If the <code>status</code> field contains <code>btLibErrNoError</code>, the ACL link is connected, and the remote device address can be found in the <code>eventData</code> field. Otherwise the connection failed and the <code>status</code> field indicates the reason for the failure. See <a href="BtLibRef_Mgt.html#1028666">Management Event Status Codes</a> for more information.</p>

<p><a name="1028367"> </a>For this event, the <code>eventData</code> field contains the following field:</p>
<pre class="sl">BtLibDeviceAddressType bdAddr;</pre>

<p><a name="1028372"> </a>This <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> contains the address of the remote device.</p>

<p><a name="1028376"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1029171"><code>BtLibLinkConnect()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028379"> </a>btLibManagementEventAclDisconnect <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028380"> </a>An ACL link has been disconnected. The <code>status</code> field indicates the reason the link was disconnected. See <a href="BtLibRef_Mgt.html#1028666">Management Event Status Codes</a>.</p>

<p><a name="1028384"> </a>For this event, the <code>eventData</code> field contains the following field:</p>
<pre class="sl">BtLibDeviceAddressType bdAddr;</pre>

<p><a name="1028389"> </a>This <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> contain the address of the disconnected device.</p>

<p><a name="1028393"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1029216"><code>BtLibLinkDisconnect()</code></a> or <a href="BtLibRef_Mgt.html#1029449"><code>BtLibPiconetDestroy()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028400"> </a>btLibManagementEventAuthentication<br>Complete <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028401"> </a>The authentication of a remote device has completed.</p>

<p><a name="1028402"> </a>For this event, the <code>eventData</code> field contains the following field:</p>
<pre class="sl">BtLibDeviceAddressType bdAddr;</pre>

<p><a name="1028407"> </a>This <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> contains the address of the remote device.</p>

<p><a name="1028408"> </a>If the authentication is successful, the <code>status</code> field contains <code>btLibErrNoError</code>. If the user cancels the passkey request, the <code>status</code> field contains <code>btLibErrCanceled</code>. Otherwise, the <code>status</code> field indicates the reason the authentication failed. See <a href="BtLibRef_Mgt.html#1028666">Management Event Status Codes</a>.</p>

<p><a name="1028415"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1029313"><code>BtLibLinkSetState()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028418"> </a>btLibManagementEventEncryptionChange <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028419"> </a>Purpose 
</h4>

<p><a name="1028420"> </a>Encryption for a link has been enabled or disabled. </p>

<p><a name="1028421"> </a>For this event, the <code>eventData</code> field contains the following structure:</p>
<h4>
  <a name="1028422"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028423"></a>struct {
  BtLibDeviceAddressType bdAddr;
  Boolean enabled;
} encryptionChange;
</pre>
<h4>
  <a name="1046240"> </a>Fields 
</h4>

<dl>
<dt><a name="1028428"> </a><code>bdAddr</code></dt>
<dd><a name="1028432"> </a>A <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

<dt><a name="1028433"> </a><code>enabled</code></dt>
<dd><a name="1028434"> </a><code>true</code> when encryption for the link has been enabled; <code>false</code> otherwise.</dd>

</dl>

<p><a name="1028438"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1029313"><code>BtLibLinkSetState()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028441"> </a>btLibManagementEventInquiryCanceled <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028442"> </a>The device inquiry has been canceled because the application called <a href="BtLibRef_Mgt.html#1028820"><code>BtLibCancelInquiry()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028448"> </a>btLibManagementEventInquiryComplete <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028452"> </a>The device inquiry started with the <a href="BtLibRef_Mgt.html#1029663"><code>BtLibStartInquiry()</code></a> function has completed.</p>

<h3 class="hbH3">
  <a name="1028455"> </a>btLibManagementEventInquiryResult <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028456"> </a>Purpose 
</h4>

<p><a name="1028457"> </a>A remote device has responded to an inquiry that was started with the <a href="BtLibRef_Mgt.html#1029663"><code>BtLibStartInquiry()</code></a> function.</p>

<p><a name="1028461"> </a>For this event, the <code>eventData</code> field contains the following structure:</p>
<h4>
  <a name="1028462"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028463"></a>struct {
  BtLibDeviceAddressType bdAddr;
  BtLibClassOfDeviceType classOfDevice;
} inquiryResult;
</pre>
<h4>
  <a name="1046311"> </a>Fields 
</h4>

<dl>
<dt><a name="1028468"> </a><code>bdAddr</code></dt>
<dd><a name="1028472"> </a>A <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

<dt><a name="1028473"> </a><code>classOfDevice</code></dt>
<dd><a name="1028477"> </a>A <a href="BtLibRef_Mgt.html#1028043"><code>BtLibClassOfDeviceType</code></a> representing the class of the remote device.</dd>

</dl>

<h3 class="hbH3">
  <a name="1028481"> </a>btLibManagementEventLocalNameChange <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028482"> </a>Purpose 
</h4>

<p><a name="1028483"> </a>The user-friendly name of the local device has changed.</p>

<p><a name="1028484"> </a>For this event, the <code>eventData</code> field contains the following structure:</p>
<h4>
  <a name="1028485"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028486"></a>struct {
  BtLibDeviceAddressType bdAddr;
  BtLibFriendlyNameType name;
} nameResult;
</pre>
<h4>
  <a name="1046328"> </a>Fields 
</h4>

<dl>
<dt><a name="1028491"> </a><code>bdAddr</code></dt>
<dd><a name="1028495"> </a>A <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the local device.</dd>

<dt><a name="1028496"> </a><code>name</code></dt>
<dd><a name="1028500"> </a>A <a href="BtLibRef_Mgt.html#1028264"><code>BtLibFriendlyNameType</code></a> containing the new name.</dd>

</dl>

<p><a name="1028504"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1028773"><code>BtLibOpen()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028506"> </a>btLibManagementEventModeChange <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028507"> </a>Purpose 
</h4>

<p><a name="1028508"> </a>A slave has changed its mode. A slave can be in active, sniff, hold, or park mode.</p>

<p><a name="1028509"> </a>For this event, the <code>eventData</code> field contains the following structure:</p>
<h4>
  <a name="1028510"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028511"></a>struct {
  BtLibDeviceAddressType bdAddr;
  BtLibLinkModeEnum curMode;
  UInt16 interval;
} modeChange;
</pre>
<h4>
  <a name="1046335"> </a>Fields 
</h4>

<dl>
<dt><a name="1028517"> </a><code>bdAddr</code></dt>
<dd><a name="1028521"> </a>A <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

<dt><a name="1028522"> </a><code>curMode</code></dt>
<dd><a name="1028526"> </a>A <a href="BtLibRef_Mgt.html#1028531"><code>BtLibLinkModeEnum</code></a> indicating the new mode of remote device</dd>

<dt><a name="1028527"> </a><code>interval</code></dt>
<dd><a name="1028528"> </a>The time in units of 0.625 ms the remote device will stay in the new mode, if applicable. The time period is a standard time period in the Bluetooth specification.</dd>

</dl>

<h4 class="hcH4">
  <a name="1028531"> </a>BtLibLinkModeEnum
</h4>
<h4>
  <a name="1028532"> </a>Purpose 
</h4>

<p><a name="1028533"> </a>The <code>BtLibLinkModeEnum</code> enum specifies the modes a slave can have. According to the <i>Specification of the Bluetooth System</i>, a slave can be in active, sniff, hold, or park mode. However, the Bluetooth library only supports the hold and active modes.</p>
<h4>
  <a name="1028534"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028535"></a>typedef enum {
  btLibSniffMode,
  btLibHoldMode,
  btLibParkMode,
  btLibActiveMode
} BtLibLinkModeEnum;
</pre>
<h4>
  <a name="1046366"> </a>Constants 
</h4>

<dl>
<dt><a name="1028543"> </a><code>btLibActiveMode</code></dt>
<dd><a name="1028544"> </a>The slave is active.</dd>

<dt><a name="1028546"> </a><code>btLibHoldMode</code></dt>
<dd><a name="1028547"> </a>The slave is in hold mode.</dd>

<dt><a name="1028549"> </a><code>btLibParkMode</code></dt>
<dd><a name="1028550"> </a>The slave is in park mode. This mode is not currently supported.</dd>

<dt><a name="1028552"> </a><code>btLibSniffMode</code></dt>
<dd><a name="1028553"> </a>The slave is in sniff mode. This mode is not currently supported.</dd>

</dl>

<h3 class="hbH3">
  <a name="1028556"> </a>btLibManagementEventNameResult <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028557"> </a>Purpose 
</h4>

<p><a name="1028558"> </a>A remote device name request has completed. If the <code>status</code> field is <code>btLibErrNoError</code>, the name is available. Otherwise, the name request failed, and the <code>status</code> field indicates the reason for the failure. See <a href="BtLibRef_Mgt.html#1028666">Management Event Status Codes</a>.</p>

<p><a name="1028562"> </a>For this event, the <code>eventData</code> field contains the following structure:</p>
<h4>
  <a name="1028563"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028564"></a>struct {
  BtLibDeviceAddressType bdAddr;
  BtLibFriendlyNameType name;
} nameResult;
</pre>
<h4>
  <a name="1046412"> </a>Fields 
</h4>

<dl>
<dt><a name="1028569"> </a><code>bdAddr</code></dt>
<dd><a name="1028573"> </a>A <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

<dt><a name="1028574"> </a><code>name</code></dt>
<dd><a name="1028578"> </a>A <a href="BtLibRef_Mgt.html#1028264"><code>BtLibFriendlyNameType</code></a> containing the name of the remote device.</dd>

</dl>

<p><a name="1028582"> </a>The <a href="BtLibRef_Mgt.html#1029065"><code>BtLibGetRemoteDeviceName()</code></a> function is used to start a remote device name request.</p>

<h3 class="hbH3">
  <a name="1028584"> </a>btLibManagementEventPairingComplete <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028585"> </a>Pairing has successfully completed and the link is authenticated. The status code for this event is set to <code>btLibErrNoError</code>, indicating that the link key was stored successfully. </p>

<p><a name="1028586"> </a>If pairing fails, no event is sent (there is no event sent by the radio module indicating failure).</p>

<h3 class="hbH3">
  <a name="1028590"> </a>btLibManagementEventPasskeyRequest <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028591"> </a>A remote device has requested a passkey. Your application does not have to respond to this request&#8212;the Bluetooth library automatically handles it.</p>

<p><a name="1028592"> </a>For this event, the <code>eventData</code> field contains the following field:</p>
<pre class="sl">BtLibDeviceAddressType bdAddr;</pre>

<p><a name="1028597"> </a>This <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> contains the address of the remote device.</p>

<p><a name="1028598"> </a>Because a passkey can be requested during or after a link is established, consider disabling any failure timers while the passkey dialog is up. The <a href="BtLibRef_Mgt.html#1028604">btLibManagementEventPasskeyRequestComplete</a> event signals the completion of the passkey entry.</p>

<h3 class="hbH3">
  <a name="1028604"> </a>btLibManagementEventPasskeyRequestComplete <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028605"> </a>A passkey request has been processed. The status code for this event is set to <code>btLibErrNoError</code> if the passkey was entered or <code>btLibErrCanceled</code> if passkey entry was cancelled. Note that this event does <i>not</i> tell you that the authentication completed.</p>

<h3 class="hbH3">
  <a name="1028608"> </a>btLibManagementEventPiconetCreated <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028609"> </a>The piconet has been created. This event can result from calling <a href="BtLibRef_Mgt.html#1029396"><code>BtLibPiconetCreate()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028615"> </a>btLibManagementEventPiconetDestroyed <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028616"> </a>The piconet has been destroyed. This event can result from calling <a href="BtLibRef_Mgt.html#1029449"><code>BtLibPiconetDestroy()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028623"> </a>btLibManagementEventRadioState <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1028624"> </a>This event is generated when the Bluetooth radio changes state. The radio changes state when the radio is disconnected, the power is turned on or off, the radio resets, or the radio fails to initialize. The status code for this event explains why the event gets generated.</p>

<h4 class="hcH4">
  <a name="1028625"> </a>Status Codes
</h4>

<dl>
<dt><a name="1028626"> </a><code>btLibErrRadioInitialized</code></dt>
<dd><a name="1028627"> </a>The Bluetooth radio has initialized successfully. You can now call management functions.</dd>

<dt><a name="1028628"> </a><code>btLibErrRadioInitFailed</code></dt>
<dd><a name="1028629"> </a>The Bluetooth radio failed to initialize. The application can assume all pending Bluetooth operations have failed. However, some pending operations will still generate events and modify memory supplied by the application.</dd>

<dd><a name="1028630"> </a>To try to initialize the radio again, you need to close the library and reopen it.</dd>

<dt><a name="1028631"> </a><code>btLibErrRadioFatal</code></dt>
<dd><a name="1028632"> </a>A fatal radio error occurred. This usually signifies that the host has lost contact with the radio, for example, when the user disconnects the radio, or the device turns off. The application can assume that all pending operations have failed. However, some pending operations will still generate events and modify memory supplied by the application.</dd>

<dd><a name="1028633"> </a>When a fatal radio error occurs, the Bluetooth stack resets the radio and tries once to reinitialize it, which generates another <code>btLibManagementEventRadioState</code> event with a status code of <code>btLibErrRadioInitialized</code>, or <code>btLibErrRadioInitFailed</code> depending on whether or not the initialization succeeded.</dd>

<dt><a name="1028634"> </a><code>btLibErrRadioSleepWake</code></dt>
<dd><a name="1028635"> </a>The radio was reset because the device went to sleep. The application can assume all pending operations have failed. However, some pending operations will still generate events and modify memory supplied by the application.</dd>

<dd><a name="1028636"> </a>The Bluetooth stack resets the radio and tries once to reinitialize it, which generates another <code>btLibManagementEventRadioState</code> event with a status code of <code>btLibErrRadioInitialized</code>, or <code>btLibErrRadioInitFailed</code> depending on whether or not the initialization succeeded.</dd>

</dl>

<p><a name="1028640"> </a>This event can result from calling <a href="BtLibRef_Mgt.html#1028773"><code>BtLibOpen()</code></a>.</p>

<h3 class="hbH3">
  <a name="1028645"> </a>btLibManagementEventRoleChange <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028646"> </a>Purpose 
</h4>

<p><a name="1028647"> </a>The master and slave devices for a link have switched roles.</p>

<p><a name="1028648"> </a>For this event, the <code>eventData</code> field contains the following structure:</p>
<h4>
  <a name="1028649"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028650"></a>struct {
  BtLibDeviceAddressType bdAddr;
  BtLibConnectionRoleEnum newRole;
} roleChange;
</pre>
<h4>
  <a name="1046433"> </a>Fields 
</h4>

<dl>
<dt><a name="1028655"> </a><code>bdAddr</code></dt>
<dd><a name="1028659"> </a>A <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

<dt><a name="1028660"> </a><code>newRole</code></dt>
<dd><a name="1028664"> </a>A <a href="BtLibRef_Mgt.html#1028233"><code>BtLibConnectionRoleEnum</code></a> representing the new role of the local device.</dd>

</dl>

<h2 class="haH2">
  <a name="1028666"> </a>Management Event Status Codes <a href="#1027980"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1028667"> </a>When a management event is generated, the <code>status</code> field of the associated <a href="BtLibRef_Mgt.html#1028282"><code>BtLibManagementEventType</code></a> provides information about why the event occurred. The following status codes can occur with a management event.</p>

<dl>
<dt><a name="1028671"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1028672"> </a>Success.</dd>

<dt><a name="1028673"> </a><code>btLibMeStatusAuthenticateFailure</code></dt>
<dd><a name="1028674"> </a>Authentication failure</dd>

<dt><a name="1028675"> </a><code>btLibMeStatusCommandDisallowed</code></dt>
<dd><a name="1028676"> </a>Command disallowed </dd>

<dt><a name="1028677"> </a><code>btLibMeStatusConnnectionTimeout</code></dt>
<dd><a name="1028678"> </a>Connection timeout </dd>

<dt><a name="1028679"> </a><code>btLibMeStatusHardwareFailure</code></dt>
<dd><a name="1028680"> </a>Hardware Failure</dd>

<dt><a name="1028681"> </a><code>btLibMeStatusHostTimeout</code></dt>
<dd><a name="1028682"> </a>Host timeout</dd>

<dt><a name="1028683"> </a><code>btLibMeStatusInvalidHciParam</code></dt>
<dd><a name="1028684"> </a>Invalid HCI command parameters</dd>

<dt><a name="1028685"> </a><code>btLibMeStatusInvalidLmpParam</code></dt>
<dd><a name="1028686"> </a>Invalid LMP Parameters</dd>

<dt><a name="1028687"> </a><code>btLibMeStatusLimitedResources</code></dt>
<dd><a name="1028688"> </a>Host rejected due to limited resources</dd>

<dt><a name="1028689"> </a><code>btLibMeStatusLmpResponseTimeout</code></dt>
<dd><a name="1028690"> </a></dd>

<dt><a name="1028691"> </a><code>btLibMeStatusLmpTransdCollision</code></dt>
<dd><a name="1028692"> </a></dd>

<dt><a name="1028693"> </a><code>btLibMeStatusLmpPduNotAllowed</code></dt>
<dd><a name="1028694"> </a></dd>

<dt><a name="1028695"> </a><code>btLibMeStatusLocalTerminated</code></dt>
<dd><a name="1028696"> </a>Terminated by local host</dd>

<dt><a name="1028697"> </a><code>btLibMeStatusLowResources</code></dt>
<dd><a name="1028698"> </a>Other end terminated due to low resources</dd>

<dt><a name="1028699"> </a><code>btLibMeStatusMaxAclConnections</code></dt>
<dd><a name="1028700"> </a>Max number of ACL connections to a device</dd>

<dt><a name="1028701"> </a><code>btLibMeStatusMaxConnections</code></dt>
<dd><a name="1028702"> </a>Max number of connections</dd>

<dt><a name="1028703"> </a><code>btLibMeStatusMaxScoConnections</code></dt>
<dd><a name="1028704"> </a>Max number of SCO connections to a device</dd>

<dt><a name="1028705"> </a><code>btLibMeStatusMemoryFull</code></dt>
<dd><a name="1028706"> </a>Memory full </dd>

<dt><a name="1028707"> </a><code>btLibMeStatusMissingKey</code></dt>
<dd><a name="1028708"> </a>Missing key </dd>

<dt><a name="1028709"> </a><code>btLibMeStatusNoConnection </code></dt>
<dd><a name="1028710"> </a>No connection</dd>

<dt><a name="1028711"> </a><code>btLibMeStatusPageTimeout </code></dt>
<dd><a name="1028712"> </a>Page timeout </dd>

<dt><a name="1028713"> </a><code>btLibMeStatusPairingNotAllowed</code></dt>
<dd><a name="1028714"> </a>Pairing not allowed</dd>

<dt><a name="1028715"> </a><code>btLibMeStatusPersonalDevice</code></dt>
<dd><a name="1028716"> </a>Host rejected (remote is personal device) </dd>

<dt><a name="1028717"> </a><code>btLibMeStatusPowerOff</code></dt>
<dd><a name="1028718"> </a>Other end terminated (about to power off)</dd>

<dt><a name="1028719"> </a><code>btLibMeStatusRepeatedAttempts</code></dt>
<dd><a name="1028720"> </a>Repeated attempts</dd>

<dt><a name="1028721"> </a><code>btLibMeStatusRoleChangeNotAllowed</code></dt>
<dd><a name="1028722"> </a>Change not allowed</dd>

<dt><a name="1028723"> </a><code>btLibMeStatusScoAirModeRejected</code></dt>
<dd><a name="1028724"> </a>SCO Air Mode Rejected</dd>

<dt><a name="1028725"> </a><code>btLibMeStatusScoIntervalRejected</code></dt>
<dd><a name="1028726"> </a>SCO Interval Rejected</dd>

<dt><a name="1028727"> </a><code>btLibMeStatusScoOffsetRejected</code></dt>
<dd><a name="1028728"> </a>SCO Offset Rejected</dd>

<dt><a name="1028729"> </a><code>btLibMeStatusSecurityError</code></dt>
<dd><a name="1028730"> </a>Host rejected due to security reasons </dd>

<dt><a name="1028731"> </a><code>btLibMeStatusUnknownHciCommand</code></dt>
<dd><a name="1028732"> </a>Unknown HCI Command</dd>

<dt><a name="1028733"> </a><code>btLibMeStatusUnknownLmpPDU</code></dt>
<dd><a name="1028734"> </a>Unknown LMP PDU</dd>

<dt><a name="1028735"> </a><code>btLibMeStatusUnspecifiedError</code></dt>
<dd><a name="1028736"> </a>Unspecified Error</dd>

<dt><a name="1028737"> </a><code>btLibMeStatusUnsupportedFeature</code></dt>
<dd><a name="1028738"> </a>Unsupported feature or parameter value </dd>

<dt><a name="1028739"> </a><code>btLibMeStatusUnsupportedLmpParam</code></dt>
<dd><a name="1028740"> </a>Unsupported LMP Parameter Value </dd>

<dt><a name="1028741"> </a><code>btLibMeStatusUnsupportedRemote</code></dt>
<dd><a name="1028742"> </a>Unsupported Remote Feature </dd>

<dt><a name="1028743"> </a><code>btLibMeStatusUserTerminated</code></dt>
<dd><a name="1028744"> </a>Other end terminated (user)</dd>

</dl>

<h2 class="haH2">
  <a name="1028746"> </a>Library Management Functions <a href="#1027980"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1028747"> </a>This section describes the general Bluetooth library management functions.</p>

<h3 class="hbH3">
  <a name="1028751"> </a>BtLibClose Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028753"> </a>Purpose 
</h4>

<p><a name="1028754"> </a>Close the Bluetooth library.</p>
<h4>
  <a name="1028755"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1028756"> </a></code><h4>
  <a name="1028757"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028758"></a>Err BtLibClose (
   UInt16 btLibRefNum
)
</pre>
<h4>
  <a name="1028759"> </a>Parameters 
</h4>

<dl>
<dt><a name="1028760"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1028761"> </a>Reference number for the Bluetooth library.</dd>

</dl>
<h4>
  <a name="1028762"> </a>Returns 
</h4>

<p><a name="1028763"> </a>Returns <code>btLibErrNoError</code> if the library successfully closes. Returns <code>btLibErrNotOpen</code> if the referenced Bluetooth library was not open.</p>
<h4>
  <a name="1028764"> </a>Comments 
</h4>

<p><a name="1028765"> </a>Applications must call this function when they no longer need the Bluetooth library. If the Bluetooth library open count is one, this function closes existing connections, saves the current accessibility mode, sets the accessible mode according to the preferences panel, and shuts down the library. If the Bluetooth library open count is greater than one, this function decrements the open count.</p>
<h4>
  <a name="1028766"> </a>See Also 
</h4>

<p><a name="1028770"> </a><a href="BtLibRef_Mgt.html#1028773"><code>BtLibOpen()</code></a></p>

<h3 class="hbH3">
  <a name="1028773"> </a>BtLibOpen Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028775"> </a>Purpose 
</h4>

<p><a name="1028776"> </a>Open and initialize the Bluetooth library.</p>
<h4>
  <a name="1028777"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1028778"> </a></code><h4>
  <a name="1028779"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028780"></a>Err BtLibOpen (
   UInt16 btLibRefNum,
   Boolean allowStackToFail
)
</pre>
<h4>
  <a name="1028781"> </a>Parameters 
</h4>

<dl>
<dt><a name="1028782"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1028783"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1028784"> </a><code>&rarr;  <i>allowStackToFail</i></code></dt>
<dd><a name="1028785"> </a>If true, opens the library even if the stack or radio fails to initialize. Otherwise, does not open the library if the stack or radio fails to initialize.</dd>

</dl>
<h4>
  <a name="1028786"> </a>Returns 
</h4>

<p><a name="1028787"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1028788"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1028789"> </a>Success.</dd>

<dt><a name="1028790"> </a><code>btLibErrAlreadyOpen</code></dt>
<dd><a name="1028791"> </a>This status code is not really an error. It is returned if the library was already open. In this case, the open count is incremented.</dd>

<dt><a name="1028792"> </a><code>btLibErrInUseByService</code></dt>
<dd><a name="1028793"> </a>The library is currently in use by a Bluetooth service.</dd>

<dt><a name="1028794"> </a><code>btLibErrOutOfMemory</code></dt>
<dd><a name="1028795"> </a>Not enough memory available to open the library.</dd>

<dt><a name="1028796"> </a><code>btLibErrRadioInitFailed</code></dt>
<dd><a name="1028797"> </a>The Bluetooth stack or radio could not be initialized. If <code>allowStackToFail</code> is true, the library still opens after this error occurs.</dd>

</dl>

<p><a name="1028798"> </a>Applications must call this function before using the Bluetooth library. If the Bluetooth library is not already open, <code>BtLibOpen()</code> opens the library, initializes it, and starts up the protocol stack component of the library. Otherwise it increments its open count.</p>

<p><a name="1028799"> </a>The <code>allowStackToFail</code> parameter allows the library to be opened even if the Bluetooth stack or radio fails to initialize. It is useful for applications that only want to use the Bluetooth library's utility functions but not the radio. However, any application that needs to communicate with the radio must set <code>allowStackToFail</code> to <code>false</code>.</p>

<p><a name="1045636"> </a>Once you've opened the Bluetooth library, you can then register your Bluetooth event handler by calling <a href="BtLibRef_Mgt.html#1029564"><code>BtLibRegisterManagementNotification()</code></a>. Once you've done that, your application will begin receiving events.</p>

<p><a name="1028800"> </a>This function generates three events: a <a href="BtLibRef_Mgt.html#1028623"><code>btLibManagementEventRadioState</code></a> event with a status of <code>btLibErrRadioInitialized</code>, a <a href="BtLibRef_Mgt.html#1028481"><code>btLibManagementEventLocalNameChange</code></a> event indicating the local name of the device, and a <a href="BtLibRef_Mgt.html#1028331"><code>btLibManagementEventAccessibilityChange</code></a> event indicating the accessibility of the device.</p>

<p><a name="1045693"> </a>Your application will not miss these events between calling <code>BtLibOpen()</code> and your call to the <code>BtLibRegisterManagementNotification()</code> function because the Bluetooth stack is driven by the application's event loop; events are only sent to your application during the event loop.</p>
<h4>
  <a name="1028810"> </a>See Also 
</h4>

<p><a name="1028814"> </a><a href="BtLibRef_Mgt.html#1028751"><code>BtLibClose()</code></a></p>

<h2 class="haH2">
  <a name="1028816"> </a>Management Functions <a href="#1027980"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1028817"> </a>The management functions handle the lower levels of the Bluetooth specification, specifically the radio, baseband, and Link Manager Protocol specifications. These functions perform tasks that include discovering devices, working with Asynchronous Connectionless (ACL) links and piconets, and maintaining global settings for the Bluetooth library.</p>

<h3 class="hbH3">
  <a name="1028820"> </a>BtLibCancelInquiry Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028822"> </a>Purpose 
</h4>

<p><a name="1028823"> </a>Cancel a Bluetooth inquiry in process.</p>
<h4>
  <a name="1028824"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1028825"> </a></code><h4>
  <a name="1028826"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028827"></a>Err BtLibCancelInquiry (
   UInt16 btLibRefNum
)
</pre>
<h4>
  <a name="1028828"> </a>Parameters 
</h4>

<dl>
<dt><a name="1028829"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1028830"> </a>Reference number for the Bluetooth library.</dd>

</dl>
<h4>
  <a name="1028831"> </a>Returns 
</h4>

<p><a name="1028832"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1028833"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1028834"> </a>The inquiry process was canceled before it started.</dd>

<dt><a name="1028835"> </a><code>btLibErrPending</code></dt>
<dd><a name="1028836"> </a>The cancellation is pending. When it succeeds, notification will be provided through a management callback event.</dd>

<dt><a name="1028837"> </a><code>btLibErrInProgress</code></dt>
<dd><a name="1028838"> </a>The inquiry is already being canceled.</dd>

<dt><a name="1028839"> </a><code>btLibErrNotInProgress</code></dt>
<dd><a name="1028840"> </a>No inquiry is in progress to be canceled.</dd>

<dt><a name="1028841"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1028842"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1028843"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1028844"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1028845"> </a>Comments 
</h4>

<p><a name="1028846"> </a>The function cancels inquiries initiated by <a href="BtLibRef_Mgt.html#1029663"><code>BtLibStartInquiry()</code></a>. The <a href="BtLibRef_Mgt.html#1028441"><code>btLibManagementEventInquiryCanceled</code></a> callback event indicates that the cancellation has completed.</p>

<p><a name="1028853"> </a>A Bluetooth discovery initiated using either <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a> or <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> cannot be canceled with this function. Only the user can cancel these inquiries by tapping the Cancel button.</p>
<h4>
  <a name="1028860"> </a>See Also 
</h4>

<p><a name="1028864"> </a><a href="BtLibRef_Mgt.html#1029663"><code>BtLibStartInquiry()</code></a></p>

<h3 class="hbH3">
  <a name="1028867"> </a>BtLibDiscoverMultipleDevices Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028869"> </a>Purpose 
</h4>

<p><a name="1028870"> </a>Discover all available devices, present them in the user interface, and allow the user to select one or more of these devices.</p>
<h4>
  <a name="1028871"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1028872"> </a></code><h4>
  <a name="1046531"> </a>Prototype 
</h4>
<pre class="proto"><a name="1046532"></a>Err BtLibDiscoverMultipleDevices (
   UInt16 btLibRefNum,
   Char *instructionTxt,
   Char *buttonTxt,
   BtLibClassOfDeviceType *deviceFilterList,
   UInt8 deviceFilterListLen,
   UInt8 *numDevicesSelected,
   Boolean addressAsName,
   Boolean showLastList
)
</pre>
<h4>
  <a name="1046533"> </a>Parameters 
</h4>

<dl>
<dt><a name="1046534"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1028877"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1028878"> </a><code>&rarr;  <i>instructionTxt</i></code></dt>
<dd><a name="1028879"> </a>Text displayed at the top of the selection box. Pass <code>NULL</code> to display the default text. The default text is "Select one or more devices:"</dd>

<dt><a name="1028880"> </a><code>&rarr;  <i>buttonTxt</i></code></dt>
<dd><a name="1028881"> </a>Text for the OK button. Pass <code>NULL</code> to display the default text. The default button text is "OK"</dd>

<dt><a name="1028882"> </a><code>&rarr;  <i>deviceFilterList</i></code></dt>
<dd><a name="1028886"> </a>Array of <a href="BtLibRef_Mgt.html#1028043"><code>BtLibClassOfDeviceType</code></a>s. This function presents to the user only the remote devices whose class matches a class in this list. If <code>deviceFilterList</code> is <code>NULL</code>, this function presents to the user all discovered devices.</dd>

<dt><a name="1028887"> </a><code>&rarr;  <i>deviceFilterListLen</i></code></dt>
<dd><a name="1028888"> </a>Number of elements in <code>deviceFilterList</code>.</dd>

<dt><a name="1028889"> </a><code>&larr;  <i>numDevicesSelected</i></code></dt>
<dd><a name="1028890"> </a>Number of selected devices. To obtain the actual device list, use the <code>BtLibGetSelectedDevices</code> function.</dd>

<dt><a name="1028891"> </a><code>&rarr;  <i>addressAsName</i></code></dt>
<dd><a name="1028892"> </a>If <code>true</code>, display the Bluetooth addresses of the remote devices instead of their names. This option is available for debugging purposes. </dd>

<dt><a name="1028893"> </a><code>&rarr;  <i>showLastList</i></code></dt>
<dd><a name="1028894"> </a>If true, causes all other parameters to be ignored and displays the same list as the previous call to <code>BtLibDiscoverMultipleDevices</code>. </dd>

</dl>
<h4>
  <a name="1028895"> </a>Returns 
</h4>

<p><a name="1028896"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1028897"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1028898"> </a>Success</dd>

<dt><a name="1028899"> </a><code>btLibErrCanceled</code></dt>
<dd><a name="1028900"> </a>User canceled discovery.</dd>

<dt><a name="1028901"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1028902"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1028903"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1028904"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1028905"> </a>Comments 
</h4>

<p><a name="1028906"> </a>This blocking call performs a full discovery for an application, including name and feature retrieval and testing. This function takes over the UI and presents a choice box to the user, allowing the user to select multiple devices from the list of devices that were discovered. This function does not return until the user chooses one or more devices, or cancels.</p>

<p><a name="1028907"> </a>Setting the <code>showLastList</code> parameter to <code>true</code> allows you to present to the user the list of devices displayed in the previous call to <code>BtLibDiscoverMultipleDevices</code> or <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a>. This feature can be useful because a full discovery process takes approximately ten seconds. The cached device list remains valid even after you close the library, allowing other Bluetooth applications to use it.</p>

<p><a name="1028914"> </a>Note that <a href="BtLibRef_Mgt.html#1029663"><code>BtLibStartInquiry()</code></a> overwrites the cached device list. If you are using the <code>showLastList</code> feature, you should avoid calling <code>BtLibStartInquiry</code> between calls to <code>BtLibDiscoverMultipleDevices</code> or <code>BtLibDiscoverSingleDevice</code>.</p>

<p><a name="1028918"> </a>Use <a href="BtLibRef_Mgt.html#1029134"><code>BtLibGetSelectedDevices()</code></a> to retrieve the list of devices that the user selected.</p>
<h4>
  <a name="1028919"> </a>See Also 
</h4>

<p><a name="1028925"> </a><a href="BtLibRef_Mgt.html#1029134"><code>BtLibGetSelectedDevices()</code></a>, <a href="BtLibRef_Mgt.html#1028929"><code>BtLibDiscoverSingleDevice()</code></a></p>

<h3 class="hbH3">
  <a name="1028929"> </a>BtLibDiscoverSingleDevice Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028931"> </a>Purpose 
</h4>

<p><a name="1028932"> </a>Discover all available devices, present them in the user interface, and allow the user to select one of these devices.</p>
<h4>
  <a name="1028933"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1028934"> </a></code><h4>
  <a name="1028935"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028936"></a>Err BtLibDiscoverSingleDevice (
   UInt16 btLibRefNum,
   Char *instructionTxt,
   BtLibClassOfDeviceType *deviceFilterList,
   UInt8 deviceFilterListLen,
   BtLibDeviceAddressType *selectedDeviceP,
   Boolean addressAsName,
   Boolean showLastList
)
</pre>
<h4>
  <a name="1028937"> </a>Parameters 
</h4>

<dl>
<dt><a name="1028938"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1028939"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1028940"> </a><code>&rarr;  <i>instructionTxt</i></code></dt>
<dd><a name="1028941"> </a>Text displayed at the top of the selection box. Pass <code>NULL</code> to display the default text. The default text is "Select a device:"</dd>

<dt><a name="1028942"> </a><code>&rarr;  <i>deviceFilterList</i></code></dt>
<dd><a name="1028946"> </a>Array of <a href="BtLibRef_Mgt.html#1028043"><code>BtLibClassOfDeviceType</code></a>s. This function displays only the remote devices whose class matches a class in this list. If <code>deviceFilterList</code> is <code>NULL</code>, this function displays all discovered devices.</dd>

<dt><a name="1028947"> </a><code>&rarr;  <i>deviceFilterListLen</i></code></dt>
<dd><a name="1028948"> </a>Number of elements in <code>deviceFilterList</code>.</dd>

<dt><a name="1028949"> </a><code>&larr;  <i>selectedDeviceP</i></code></dt>
<dd><a name="1028953"> </a>Pointer to a <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> where this function stores the address of the device the user selects. You need to allocate this space before calling this function.</dd>

<dt><a name="1028954"> </a><code>&rarr;  <i>addressAsName</i></code></dt>
<dd><a name="1028955"> </a>If <code>true</code>, display the Bluetooth addresses of the remote devices instead of their names. This option is available for debugging purposes. </dd>

<dt><a name="1028956"> </a><code>&rarr;  <i>showLastList</i></code></dt>
<dd><a name="1028957"> </a>If <code>true</code>, causes all other parameters to be ignored and displays the same list as the previous call to <code>BtLibDiscoverSingleDevice</code>.</dd>

</dl>
<h4>
  <a name="1028958"> </a>Returns 
</h4>

<p><a name="1028959"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1028960"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1028961"> </a>Success</dd>

<dt><a name="1028962"> </a><code>btLibErrCanceled</code></dt>
<dd><a name="1028963"> </a>User canceled the discovery.</dd>

<dt><a name="1028964"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1028965"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1028966"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1028967"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1028968"> </a>Comments 
</h4>

<p><a name="1028969"> </a>This blocking call performs a full discovery for an application, including name and feature retrieval and testing. This function takes over the UI and presents a choice box to the user, allowing the user to select a device from the list of devices that were discovered. This function does not return until the user chooses a device or cancels.</p>

<p><a name="1028970"> </a>Setting the <code>showLastList</code> parameter to <code>true</code> allows you to present to the user the list of devices displayed in the previous call to <code>BtLibDiscoverSingleDevice</code> or <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a>. This feature can be useful because a full discovery process takes approximately ten seconds. The cached device list remains valid even after you close the library, allowing other Bluetooth applications to use it.</p>

<p><a name="1028977"> </a>Note that <a href="BtLibRef_Mgt.html#1029663"><code>BtLibStartInquiry()</code></a> overwrites the cached device list. If you are using the <code>showLastList</code> feature, you should avoid calling <code>BtLibStartInquiry</code> between calls to <code>BtLibDiscoverSingleDevice</code> or <code>BtLibDiscoverMultipleDevices</code>.</p>
<h4>
  <a name="1028978"> </a>See Also 
</h4>

<p><a name="1028982"> </a><a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a></p>

<h3 class="hbH3">
  <a name="1028985"> </a>BtLibGetGeneralPreference Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1028987"> </a>Purpose 
</h4>

<p><a name="1028988"> </a>Get one of the general management preferences.</p>
<h4>
  <a name="1028989"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1028990"> </a></code><h4>
  <a name="1028991"> </a>Prototype 
</h4>
<pre class="proto"><a name="1028992"></a>Err BtLibGetGeneralPreference (
   UInt16 btLibRefNum,
   BtLibGeneralPrefEnum pref,
   void *prefValue,
   UInt16 prefValueSize
)
</pre>
<h4>
  <a name="1028993"> </a>Parameters 
</h4>

<dl>
<dt><a name="1028994"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1028995"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1028996"> </a><code>&rarr;  <i>pref</i></code></dt>
<dd><a name="1028997"> </a>General preference to get.</dd>

<dt><a name="1028998"> </a><code>&larr;  <i>prefValue</i></code></dt>
<dd><a name="1028999"> </a>Pointer to a buffer to hold the value of the preference. You must allocate this buffer. This parameter must not be <code>NULL</code>.</dd>

<dt><a name="1029000"> </a><code>&rarr;  <i>prefValueSize</i></code></dt>
<dd><a name="1029001"> </a>Size, in bytes, of the <code>prefValue</code> buffer. You must set this size so it matches the size of the retrieved preference.</dd>

</dl>
<h4>
  <a name="1029002"> </a>Returns 
</h4>

<p><a name="1029003"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029004"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029005"> </a>Success.</dd>

<dt><a name="1029006"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029007"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029008"> </a><code>btLibErrParamError</code></dt>
<dd><a name="1029009"> </a>One or more parameters is invalid. Be sure that the <code>prefValueSize</code> parameter matches the size of the preference value.</dd>

<dt><a name="1029010"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029011"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029012"> </a>Comments 
</h4>

<p><a name="1029013"> </a>Specify the preference with a member of the <code>BtLibGeneralPreferenceEnum</code>.</p>

<h4 class="hcH4">
  <a name="1029016"> </a>BtLibGeneralPreferenceEnum
</h4>

<p><a name="1029017"> </a>The <code>BtLibGeneralPreferenceEnum</code> enum specifies the general preferences that can be accessed using the <a href="BtLibRef_Mgt.html#1029612"><code>BtLibSetGeneralPreference()</code></a> and <a href="BtLibRef_Mgt.html#1028985"><code>BtLibGetGeneralPreference()</code></a> functions.</p>
<h4>
  <a name="1029024"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029025"></a>typedef enum {
  btLibPref_Name,
  btLibPref_UnconnectedAccessible,
  btLibPref_CurrentAccessible,
  btLibPref_LocalClassOfDevice,
  btLibPref_LocalDeviceAddress
} BtLibGeneralPrefEnum;
</pre>
<h4>
  <a name="1029032"> </a>Constants 
</h4>

<dl>
<dt><a name="1029034"> </a><code>btLibPref_CurrentAccessible</code></dt>
<dd><a name="1029038"> </a>This preference is a <a href="BtLibRef_Mgt.html#1028021"><code>BtLibAccessibleModeEnum</code></a> indicating the current accessibility mode of the local device.</dd>

<dt><a name="1029040"> </a><code>btLibPref_LocalClassOfDevice</code></dt>
<dd><a name="1029044"> </a>This preference is a <a href="BtLibRef_Mgt.html#1028043"><code>BtLibClassOfDeviceType</code></a> indicating the class of the local device. You should never set this preference.</dd>

<dt><a name="1029046"> </a><code>btLibPref_Name</code></dt>
<dd><a name="1029050"> </a>This preference is a <a href="BtLibRef_Mgt.html#1028264"><code>BtLibFriendlyNameType</code></a> containing the user-friendly name of the local device. If you retrieve this preference, you also need to allocate a buffer and set the <code>BtLibFriendlyNameType</code>'s <code>name</code> and <code>nameLength</code> fields to the buffer pointer and buffer length, respectively.</dd>

<dd><a name="1029051"> </a>You should never set this preference.</dd>

<dt><a name="1029053"> </a><code>btLibPref_UnconnectedAccessible</code></dt>
<dd><a name="1029057"> </a>This preference is a <a href="BtLibRef_Mgt.html#1028021"><code>BtLibAccessibleModeEnum</code></a> indicating the accessibility mode of the local device when it is unconnected. You should never set this preference.</dd>

</dl>
<h4>
  <a name="1029058"> </a>See Also 
</h4>

<p><a name="1029062"> </a><a href="BtLibRef_Mgt.html#1029612"><code>BtLibSetGeneralPreference()</code></a></p>

<h3 class="hbH3">
  <a name="1029065"> </a>BtLibGetRemoteDeviceName Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029067"> </a>Purpose 
</h4>

<p><a name="1029068"> </a>Get the name of the remote device with the specified address.</p>
<h4>
  <a name="1029069"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029070"> </a></code><h4>
  <a name="1029071"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029072"></a>Err BtLibGetRemoteDeviceName (
   UInt16 btLibRefNum,
   BtLibDeviceAddressTypePtr remoteDeviceP,
   BtLibFriendlyNameType *nameP,
   BtLibGetNameEnum retrievalMethod
)
</pre>
<h4>
  <a name="1029073"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029074"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029075"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029076"> </a><code>&rarr;  <i>remoteDeviceP</i></code></dt>
<dd><a name="1029080"> </a>Pointer to a <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the device whose name is desired.</dd>

<dt><a name="1029081"> </a><code>&harr;  <i>nameP</i></code></dt>
<dd><a name="1029085"> </a>Pointer to a <a href="BtLibRef_Mgt.html#1028264"><code>BtLibFriendlyNameType</code></a> structure in which to store the results of the lookup. You must allocate this structure and the name buffer it points to. You also must specify the size of the buffer in the <code>nameLength</code> field of the structure. When the function returns, ignore the <code>nameLength</code> field and use <code>StrLen</code> to obtain the actual length of the name. This parameter must not be <code>NULL</code>.</dd>

<dt><a name="1029086"> </a><code>&rarr;  <i>retrievalMethod</i></code></dt>
<dd><a name="1029087"> </a>Method used to retrieve the user-friendly remote device name. See <a href="BtLibRef_Mgt.html#1029114"><code>BtLibGetNameEnum</code></a>.</dd>

</dl>
<h4>
  <a name="1029091"> </a>Returns 
</h4>

<p><a name="1029092"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029093"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029094"> </a>The name structure was successfully retrieved from the cache. No notification event will be generated.</dd>

<dt><a name="1029095"> </a><code>btLibErrBusy</code></dt>
<dd><a name="1029096"> </a>There is already a name request pending.</dd>

<dt><a name="1029097"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029098"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029099"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029100"> </a>The results will be returned through a notification.</dd>

<dt><a name="1029101"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029102"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029103"> </a>Comments 
</h4>

<p><a name="1029104"> </a>The Bluetooth library maintains a cache of 50 device names. If the <code>retrievalMethod</code> parameter is <code>btLibCachedThenRemote</code>, this function first checks the cache for a name. If the name is in the cache, the value is returned immediately in the <code>nameP</code> parameter. If the name is not in the cache, the function queries the remote device for its name, forming a temporary ACL connection if one is not already in place. In this case, the function returns <code>btLibErrPending</code> and generates a <a href="BtLibRef_Mgt.html#1028556"><code>btLibManagementEventNameResult</code></a> event when the name is available.</p>

<p><a name="1029108"> </a>Other values of the <code>retrievalMethod</code> parameter can instruct this function to look for the name only in the cache or only on the remote device. See <a href="BtLibRef_Mgt.html#1029114"><code>BtLibGetNameEnum</code></a> for more information.</p>

<h4 class="hcH4">
  <a name="1029114"> </a>BtLibGetNameEnum
</h4>

<p><a name="1029115"> </a>The <code>BtLibGetNameEnum</code> enum specifies whether to retrieve a device name from the cache, the remote device, or both.</p>
<h4>
  <a name="1029116"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029117"></a>typedef enum {
  btLibCachedThenRemote,
  btLibCachedOnly,
  btLibRemoteOnly
} BtLibGetNameEnum;
</pre>
<h4>
  <a name="1029122"> </a>Constants 
</h4>

<dl>
<dt><a name="1029124"> </a><code>btLibCachedOnly</code></dt>
<dd><a name="1029125"> </a>Look for a name in the cache. If the name is not in the cache, fail.</dd>

<dt><a name="1029127"> </a><code>btLibCachedThenRemote</code></dt>
<dd><a name="1029128"> </a>Look for a name in the cache. If the name is not in the cache, ask the remote device.</dd>

<dt><a name="1029130"> </a><code>btLibRemoteOnly</code></dt>
<dd><a name="1029131"> </a>Ignore any cached names and ask the remote device for its name.</dd>

</dl>

<h3 class="hbH3">
  <a name="1029134"> </a>BtLibGetSelectedDevices Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029136"> </a>Purpose 
</h4>

<p><a name="1029137"> </a>Get the list of devices selected during the last call to <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a>.</p>
<h4>
  <a name="1029141"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029142"> </a></code><h4>
  <a name="1029143"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029144"></a>Err BtLibGetSelectedDevices (
   UInt16 btLibRefNum,
   BtLibDeviceAddressType *selectedDeviceArray,
   UInt8 arraySize,
   UInt8 *numDevicesReturned
)
</pre>
<h4>
  <a name="1029145"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029146"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029147"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029148"> </a><code>selectedDeviceArray</code></dt>
<dd><a name="1029149"> </a>Array into which the results of the <a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a> function should be placed. You must allocate this array of <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a>s.</dd>

<dt><a name="1029156"> </a><code>&rarr;  <i>arraySize</i></code></dt>
<dd><a name="1029157"> </a>Number of elements in the <code>selectedDeviceArray</code> you allocated.</dd>

<dt><a name="1029158"> </a><code>&larr;  <i>numDevicesReturned</i></code></dt>
<dd><a name="1029159"> </a>Number of results placed in <code>selectedDeviceArray</code>.</dd>

</dl>
<h4>
  <a name="1029160"> </a>Returns 
</h4>

<p><a name="1029161"> </a>Returns <code>btLibErrNoError</code> if the query is successful. Returns <code>btLibErrNotOpen</code> if the referenced Bluetooth library is not open or <code>btLibErrStackNotOpen</code> if the Bluetooth stack failed to initialize when the library was opened.</p>
<h4>
  <a name="1029162"> </a>Comments 
</h4>

<p><a name="1029163"> </a>No callback events.</p>
<h4>
  <a name="1029164"> </a>See Also 
</h4>

<p><a name="1029168"> </a><a href="BtLibRef_Mgt.html#1028867"><code>BtLibDiscoverMultipleDevices()</code></a></p>

<h3 class="hbH3">
  <a name="1029171"> </a>BtLibLinkConnect Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029173"> </a>Purpose 
</h4>

<p><a name="1029174"> </a>Create a Bluetooth Asynchronous Connectionless (ACL) link.</p>
<h4>
  <a name="1029175"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029176"> </a></code><h4>
  <a name="1029177"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029178"></a>Err BtLibLinkConnect (
   UInt16 btLibRefNum,
   BtLibDeviceAddressTypePtr remoteDeviceP
)
</pre>
<h4>
  <a name="1029179"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029180"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029181"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029182"> </a><code>&rarr;  <i>remoteDeviceP</i></code></dt>
<dd><a name="1029186"> </a>Pointer to the a <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

</dl>
<h4>
  <a name="1029187"> </a>Returns 
</h4>

<p><a name="1029188"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029189"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029190"> </a>The results will be returned through a callback event.</dd>

<dt><a name="1029191"> </a><code>btLibErrAlreadyConnected</code></dt>
<dd><a name="1029192"> </a>The device is already in a pre-existing connection and cannot create a new connection.</dd>

<dt><a name="1029193"> </a><code>btLibErrBluetoothOff</code></dt>
<dd><a name="1029194"> </a>The Bluetooth radio is off. The user can turn the radio on and off with a setting in the preferences panel.</dd>

<dt><a name="1029195"> </a><code>btLibErrBusy</code></dt>
<dd><a name="1029196"> </a>A piconet is currently being created or destroyed.</dd>

<dt><a name="1029197"> </a><code>btlibErrNotOpen</code></dt>
<dd><a name="1029198"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029199"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029200"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

<dt><a name="1029201"> </a><code>btLibErrTooMany</code></dt>
<dd><a name="1029202"> </a>Cannot create another ACL link because the maximum allowed number has already been reached.</dd>

</dl>
<h4>
  <a name="1029203"> </a>Comments 
</h4>

<p><a name="1029204"> </a>An ACL link is a packet-switched physical level connection between two devices that is needed before the devices can form a RFCOMM or L2CAP connection.</p>

<p><a name="1029205"> </a>When the connection is established or if it fails to be established, the <a href="BtLibRef_Mgt.html#1028361"><code>btLibManagementEventAclConnectOutbound</code></a> event is generated.</p>
<h4>
  <a name="1029209"> </a>See Also 
</h4>

<p><a name="1029213"> </a><a href="BtLibRef_Mgt.html#1029216"><code>BtLibLinkDisconnect()</code></a></p>

<h3 class="hbH3">
  <a name="1029216"> </a>BtLibLinkDisconnect Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029218"> </a>Purpose 
</h4>

<p><a name="1029219"> </a>Disconnect an existing ACL Link.</p>
<h4>
  <a name="1029220"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029221"> </a></code><h4>
  <a name="1029222"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029223"></a>Err BtLibLinkDisconnect (
   UInt16 btLibRefNum,
   BtLibDeviceAddressTypePtr remoteDeviceP
)
</pre>
<h4>
  <a name="1029224"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029225"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029226"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029227"> </a><code>&rarr;  <i>remoteDeviceP</i></code></dt>
<dd><a name="1029231"> </a>Pointer to a <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device.</dd>

</dl>
<h4>
  <a name="1029232"> </a>Returns 
</h4>

<p><a name="1029233"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029234"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029235"> </a>The connection attempt was canceled before it started. No event is generated.</dd>

<dt><a name="1029236"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029237"> </a>When the link actually disconnects, a <a href="BtLibRef_Mgt.html#1028379"><code>btLibManagementEventAclDisconnect</code></a> callback event is generated.</dd>

<dt><a name="1029241"> </a><code>btLibErrBusy</code></dt>
<dd><a name="1029242"> </a>Can't disconnect the link because the piconet is being destroyed.</dd>

<dt><a name="1029243"> </a><code>btLibErrNoConnection</code></dt>
<dd><a name="1029244"> </a>No link to the specified device exists.</dd>

<dt><a name="1029245"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029246"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029247"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029248"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029249"> </a>Comments 
</h4>

<p><a name="1029250"> </a>When the link disconnects, a <a href="BtLibRef_Mgt.html#1028379"><code>btLibManagementEventAclDisconnect</code></a> event is generated.</p>
<h4>
  <a name="1029254"> </a>See Also 
</h4>

<p><a name="1029258"> </a><a href="BtLibRef_Mgt.html#1029171"><code>BtLibLinkConnect()</code></a></p>

<h3 class="hbH3">
  <a name="1029261"> </a>BtLibLinkGetState Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029263"> </a>Purpose 
</h4>

<p><a name="1029264"> </a>Get the state of an ACL link.</p>
<h4>
  <a name="1029265"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029266"> </a></code><h4>
  <a name="1029267"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029268"></a>Err BtLibLinkGetState(
   UInt16 btLibRefNum,
   BtLibDeviceAddressTypePtr remoteDeviceP,
   BtLibLinkPrefsEnum pref,
   void *linkState,
   UInt16 linkStateSize
)
</pre>
<h4>
  <a name="1029269"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029270"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029271"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029272"> </a><code>&rarr;  <i>remoteDeviceP</i></code></dt>
<dd><a name="1029276"> </a>Pointer to a <a href="BtLibRef_Mgt.html#1028251"><code>BtLibDeviceAddressType</code></a> containing the address of the remote device. This address identifies the ACL link.</dd>

<dt><a name="1029277"> </a><code>&rarr;  <i>pref</i></code></dt>
<dd><a name="1029281"> </a>Link preference to retrieve. See <a href="BtLibRef_Mgt.html#1029362"><code>BtLibLinkPrefsEnum</code></a>.</dd>

<dt><a name="1029282"> </a><code>&larr;  <i>linkState</i></code></dt>
<dd><a name="1029283"> </a>Pointer to a buffer to store the value of the preference. You must allocate this buffer. This parameter must not be <code>NULL</code>. See <a href="BtLibRef_Mgt.html#1029362"><code>BtLibLinkPrefsEnum</code></a> for more information.</dd>

<dt><a name="1029287"> </a><code>&rarr;  <i>linkStateSize</i></code></dt>
<dd><a name="1029288"> </a>Size, in bytes, of <code>linkState</code> buffer. This size must match the size of the retrieved preference.</dd>

</dl>
<h4>
  <a name="1029289"> </a>Returns 
</h4>

<p><a name="1029290"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029291"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029292"> </a>Success. The <code>linkState</code> variable has been filled in.</dd>

<dt><a name="1029293"> </a><code>btLibErrNoAclLink</code></dt>
<dd><a name="1029294"> </a>No link to the specified remote device exists.</dd>

<dt><a name="1029295"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029296"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029297"> </a><code>btLibErrParamError</code></dt>
<dd><a name="1029298"> </a>The <code>linkStateSize</code> parameter is not same as the size of the preference value.</dd>

<dt><a name="1029299"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029300"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029301"> </a>Comments 
</h4>

<p><a name="1029305"> </a>See the <a href="BtLibRef_Mgt.html#1029313"><code>BtLibLinkSetState()</code></a> function description for a list of the link states preferences.</p>
<h4>
  <a name="1029306"> </a>See Also 
</h4>

<p><a name="1029310"> </a><a href="BtLibRef_Mgt.html#1029313"><code>BtLibLinkSetState()</code></a></p>

<h3 class="hbH3">
  <a name="1029313"> </a>BtLibLinkSetState Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029315"> </a>Purpose 
</h4>

<p><a name="1029316"> </a>Set the state of an ACL link</p>
<h4>
  <a name="1029317"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029318"> </a></code><h4>
  <a name="1029319"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029320"></a>Err BtLibLinkSetState (
   UInt16 btLibRefNum,
   BtLibDeviceAddressTypePtr remoteDeviceP,
   BtLibLinkPrefsEnum pref,
   void *linkState,
   UInt16 linkStateSize
)
</pre>
<h4>
  <a name="1029321"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029322"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029323"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029324"> </a><code>&rarr;  <i>remoteDeviceP</i></code></dt>
<dd><a name="1029325"> </a>The address of the remote device. This address identifies the ACL link.</dd>

<dt><a name="1029326"> </a><code>&rarr;  <i>pref</i></code></dt>
<dd><a name="1029330"> </a>Link preference to set. See <a href="BtLibRef_Mgt.html#1029362"><code>BtLibLinkPrefsEnum</code></a>.</dd>

<dt><a name="1029331"> </a><code>&rarr;  <i>linkState</i></code></dt>
<dd><a name="1029332"> </a>Pointer to the value of the preference. See <a href="BtLibRef_Mgt.html#1029362"><code>BtLibLinkPrefsEnum</code></a>.</dd>

<dt><a name="1029336"> </a><code>&rarr;  <i>linkStateSize</i></code></dt>
<dd><a name="1029337"> </a>Size, in bytes, of the <code class="par">linkState</code> value.</dd>

</dl>
<h4>
  <a name="1029338"> </a>Returns 
</h4>

<p><a name="1029339"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029340"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029341"> </a>The results will be returned through a callback event.</dd>

<dt><a name="1029342"> </a><code>btLibErrFailed</code></dt>
<dd><a name="1029343"> </a>An attempt was made to encrypt a link before authenticating it.</dd>

<dt><a name="1029344"> </a><code>btLibErrNoAclLink</code></dt>
<dd><a name="1029345"> </a>No link to the specified remote device exists.</dd>

<dt><a name="1029346"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029347"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029348"> </a><code>btLibErrParamError</code></dt>
<dd><a name="1029349"> </a>The preference cannot be set or <code class="par">linkStateSize</code> is invalid.</dd>

<dt><a name="1029350"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029351"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029352"> </a>Comments 
</h4>

<p><a name="1029353"> </a>Applications use this function to set the state of an ACL link. This function may generate events depending on the preference you change. The <a href="BtLibRef_Mgt.html#1028400"><code>btLibManagementEventAuthentication Complete</code></a> event indicates the link authentication has completed. The <a href="BtLibRef_Mgt.html#1028418"><code>btLibManagementEventEncryptionChange</code></a> indicates that the encryption has been enabled or disabled.</p>

<h4 class="hcH4">
  <a name="1029362"> </a>BtLibLinkPrefsEnum
</h4>

<p><a name="1029363"> </a>The <code>BtLibLinkPrefsEnum</code> enum specifies the link state preferences that can be accessed with the <a href="BtLibRef_Mgt.html#1029313"><code>BtLibLinkSetState()</code></a> and <a href="BtLibRef_Mgt.html#1029261"><code>BtLibLinkGetState()</code></a> functions.</p>
<h4>
  <a name="1029370"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029371"></a>typedef enum {
  btLibLinkPref_Authenticated,
  btLibLinkPref_Encrypted,
  btLibLinkPref_LinkRole
} BtLibLinkPrefsEnum;
</pre>
<h4>
  <a name="1029376"> </a>Constants 
</h4>

<dl>
<dt><a name="1029378"> </a><code>btLibLinkPref_Authenticated</code></dt>
<dd><a name="1029379"> </a>This preference is a <code>Boolean</code> and indicates whether the link has been authenticated or not. The <code class="par">linkState</code> and <code class="par">linkStateSize</code> parameters are ignored.</dd>

<dt><a name="1029381"> </a><code>btLibLinkPref_Encrypted</code></dt>
<dd><a name="1029382"> </a>This preference is a <code>Boolean</code> and indicates whether the link is encrypted or not.</dd>

<dt><a name="1029384"> </a><code>btLibLinkPref_LinkRole</code></dt>
<dd><a name="1029388"> </a>This preference is a <a href="BtLibRef_Mgt.html#1028233"><code>BtLibConnectionRoleEnum</code></a> and indicates whether the remote device is a master or a slave. You cannot set this preference but you can get its value.</dd>

</dl>
<h4>
  <a name="1029389"> </a>See Also 
</h4>

<p><a name="1029393"> </a><a href="BtLibRef_Mgt.html#1029261"><code>BtLibLinkGetState()</code></a></p>

<h3 class="hbH3">
  <a name="1029396"> </a>BtLibPiconetCreate Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029398"> </a>Purpose 
</h4>

<p><a name="1029399"> </a>Create a piconet or reconfigure an existing piconet so the local device is the master.</p>
<h4>
  <a name="1029400"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029401"> </a></code><h4>
  <a name="1029402"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029403"></a>Err BtLibPiconetCreate (
   UInt16 btLibRefNum,
   Boolean unlockInbound,
   Boolean discoverable
)
</pre>
<h4>
  <a name="1029404"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029405"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029406"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029407"> </a><code>&rarr;  <i>unlockInbound</i></code></dt>
<dd><a name="1029408"> </a>If <code>true</code>, the piconet accepts inbound connections. Otherwise, the piconet only allows outbound connections.</dd>

<dt><a name="1029409"> </a><code>&rarr;  <i>discoverable</i></code></dt>
<dd><a name="1029410"> </a>If <code>true</code>, configures the radio to be discoverable. In other words, the radio responds to inquiries. If <code>false</code>, configures the radio to be only connectable. In other words, only devices that know the radio's Bluetooth device address can connect to it. This parameter is ignored if <code>unlockInbound</code> is <code>false</code>.</dd>

</dl>
<h4>
  <a name="1029411"> </a>Returns 
</h4>

<p><a name="1029412"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029413"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029414"> </a>Successfully created the piconet with the local device as the master. No callback event is generated.</dd>

<dt><a name="1029415"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029416"> </a>An existing ACL link needs to switch roles before this operation can complete.</dd>

<dt><a name="1029417"> </a><code>btLibErrFailed</code></dt>
<dd><a name="1029418"> </a>A piconet already exists.</dd>

<dt><a name="1029419"> </a><code>btLibErrInProgress</code></dt>
<dd><a name="1029420"> </a>Another piconet is currently being created.</dd>

<dt><a name="1029421"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029422"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029423"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029424"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029425"> </a>Comments 
</h4>

<p><a name="1029426"> </a>If the accessibility of the radio changes due to this operation, a <a href="BtLibRef_Mgt.html#1028331"><code>btLibManagementEventAccessibilityChange</code></a> event is generated. When the piconet is created, or if the piconet fails to be created, a <a href="BtLibRef_Mgt.html#1028608"><code>btLibManagementEventPiconetCreated</code></a> event is generated. The <code>status</code> field of the <a href="BtLibRef_Mgt.html#1028282"><code>BtLibManagementEventType</code></a> structure accompanying the event indicates whether the piconet was created or not.</p>
<h4>
  <a name="1029436"> </a>See Also 
</h4>

<p><a name="1029443"> </a><a href="BtLibRef_Mgt.html#1029449"><code>BtLibPiconetDestroy()</code></a>, <a href="BtLibRef_Mgt.html#1029530"><code>BtLibPiconetUnlockInbound()</code></a>, <a href="BtLibRef_Mgt.html#1029498"><code>BtLibPiconetLockInbound()</code></a></p>

<h3 class="hbH3">
  <a name="1029449"> </a>BtLibPiconetDestroy Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029451"> </a>Purpose 
</h4>

<p><a name="1029452"> </a>Destroy the piconet by disconnecting links to all devices and removing all restrictions on whether the local device is a master or a slave.</p>
<h4>
  <a name="1029453"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029454"> </a></code><h4>
  <a name="1029455"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029456"></a>Err BtLibPiconetDestroy (
   UInt16 btLibRefNum
)
</pre>
<h4>
  <a name="1029457"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029458"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029459"> </a>Reference number for the Bluetooth library.</dd>

</dl>
<h4>
  <a name="1029460"> </a>Returns 
</h4>

<p><a name="1029461"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029462"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029463"> </a>Successfully destroyed the piconet. A <a href="BtLibRef_Mgt.html#1028615"><code>btLibManagementEventPiconetDestroyed</code></a> event is not generated.</dd>

<dt><a name="1029467"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029468"> </a>The piconet is being destroyed, and a <a href="BtLibRef_Mgt.html#1028615"><code>btLibManagementEventPiconetDestroyed</code></a> event will be generated when the operation succeeds or fails.</dd>

<dt><a name="1029472"> </a><code>btLibErrBusy</code></dt>
<dd><a name="1029473"> </a>The piconet is already in the process of being destroyed.</dd>

<dt><a name="1029474"> </a><code>btLibErrNoPiconet</code></dt>
<dd><a name="1029475"> </a>No piconet exists to be destroyed.</dd>

<dt><a name="1029476"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029477"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029478"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029479"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029480"> </a>Comments 
</h4>

<p><a name="1029484"> </a>A <a href="BtLibRef_Mgt.html#1028379"><code>btLibManagementEventAclDisconnect</code></a> event is generated for each ACL link that is disconnected. When the piconet is successfully destroyed or fails to be destroyed, a <a href="BtLibRef_Mgt.html#1028615"><code>btLibManagementEventPiconetDestroyed</code></a> is generated. The <code>status</code> field of the <a href="BtLibRef_Mgt.html#1028282"><code>BtLibManagementEventType</code></a> structure accompanying the event indicates whether the piconet was destroyed or not.</p>
<h4>
  <a name="1029491"> </a>See Also 
</h4>

<p><a name="1029495"> </a><a href="BtLibRef_Mgt.html#1029396"><code>BtLibPiconetCreate()</code></a></p>

<h3 class="hbH3">
  <a name="1029498"> </a>BtLibPiconetLockInbound Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029500"> </a>Purpose 
</h4>

<p><a name="1029501"> </a>Prevent remote devices from creating ACL links into the piconet.</p>
<h4>
  <a name="1029502"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029503"> </a></code><h4>
  <a name="1029504"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029505"></a>Err BtLibPiconetLockInbound (
   UInt16 btLibRefNum
)
</pre>
<h4>
  <a name="1029506"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029507"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029508"> </a>Reference number for the Bluetooth library.</dd>

</dl>
<h4>
  <a name="1029509"> </a>Returns 
</h4>

<p><a name="1029510"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029511"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029512"> </a>Success.</dd>

<dt><a name="1029513"> </a><code>btLibErrBusy</code></dt>
<dd><a name="1029514"> </a>The piconet is in the process of being destroyed.</dd>

<dt><a name="1029515"> </a><code>btLibErrNoPiconet</code></dt>
<dd><a name="1029516"> </a>No piconet exists.</dd>

<dt><a name="1029517"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029518"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029519"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029520"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029521"> </a>Comments 
</h4>

<p><a name="1029522"> </a>After locking inbound connections, outbound connections are still allowed. Locking inbound connections maximizes the bandwidth for members of the piconet to transmit data to each other.</p>
<h4>
  <a name="1029523"> </a>See Also 
</h4>

<p><a name="1029527"> </a><a href="BtLibRef_Mgt.html#1029530"><code>BtLibPiconetUnlockInbound()</code></a></p>

<h3 class="hbH3">
  <a name="1029530"> </a>BtLibPiconetUnlockInbound Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029532"> </a>Purpose 
</h4>

<p><a name="1029533"> </a>Allow remote devices to create ACL links into the piconet.</p>
<h4>
  <a name="1029534"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029535"> </a></code><h4>
  <a name="1029536"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029537"></a>Err BtLibPiconetUnlockInbound (
   UInt16 btLibRefNum,
   Boolean discoverable
)
</pre>
<h4>
  <a name="1029538"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029539"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029540"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029541"> </a><code>&rarr;  <i>discoverable</i></code></dt>
<dd><a name="1029542"> </a>If <code>true</code>, configures the radio to be discoverable. In other words, the radio responds to inquiries. If <code>false</code>, configures the radio to be only connectable. In other words, only devices that know the radio's Bluetooth device address can connect to it.</dd>

</dl>
<h4>
  <a name="1029543"> </a>Returns 
</h4>

<p><a name="1029544"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029545"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029546"> </a>Success.</dd>

<dt><a name="1029547"> </a><code>btLibErrBusy</code></dt>
<dd><a name="1029548"> </a>The piconet is in the process of being destroyed.</dd>

<dt><a name="1029549"> </a><code>btLibErrNoPiconet</code></dt>
<dd><a name="1029550"> </a>No piconet exists.</dd>

<dt><a name="1029551"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029552"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029553"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029554"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029555"> </a>Comments 
</h4>

<p><a name="1029556"> </a>Allowing inbound connections lowers the bandwidth available to transmit data between members of the piconet because the radio must periodically scan for incoming links.</p>
<h4>
  <a name="1029557"> </a>See Also 
</h4>

<p><a name="1029561"> </a><a href="BtLibRef_Mgt.html#1029498"><code>BtLibPiconetLockInbound()</code></a></p>

<h3 class="hbH3">
  <a name="1029564"> </a>BtLibRegisterManagementNotification Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029566"> </a>Purpose 
</h4>

<p><a name="1029567"> </a>Register a callback function to process events generated by management functions.</p>
<h4>
  <a name="1029568"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029569"> </a></code><h4>
  <a name="1029570"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029571"></a>Err BtLibRegisterManagementNotification (
   UInt16 btLibRefNum,
   BtLibManagementProcPtr callbackP,
   UInt32 refCon
)
</pre>
<h4>
  <a name="1029572"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029573"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029574"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029575"> </a><code>&rarr;  <i>callbackP</i></code></dt>
<dd><a name="1029576"> </a>Pointer to a callback procedure to register. This pointer must not be <code>NULL</code>. See <a href="BtLibRef_Mgt.html#1029749"><code>BtLibManagementCallback()</code></a> for more information.</dd>

<dt><a name="1029580"> </a><code>&rarr;  <i>refCon</i></code></dt>
<dd><a name="1029581"> </a>Application-defined data to pass to the event handler.</dd>

</dl>
<h4>
  <a name="1029582"> </a>Returns 
</h4>

<p><a name="1029583"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029584"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029585"> </a>Success.</dd>

<dt><a name="1029586"> </a><code>btLibErrAlreadyRegistered</code></dt>
<dd><a name="1029587"> </a>The callback has already been registered with the management entity.</dd>

<dt><a name="1029588"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029589"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029590"> </a><code>btLibErrParamError</code></dt>
<dd><a name="1029591"> </a>One or more parameters is invalid.</dd>

<dt><a name="1029592"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029593"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

<dt><a name="1029594"> </a><code>btLibErrTooMany</code></dt>
<dd><a name="1029595"> </a>There is no space available to store the callback. The management entity allows a maximum of 16 callbacks to be registered at a time. </dd>

</dl>
<h4>
  <a name="1029596"> </a>Comments 
</h4>

<p><a name="1029597"> </a>The management functions are asynchronous. That is, they return immediately and generate events when the task actually completes at a later time. To handle these events, you need to define a callback function with the same prototype as <a href="BtLibRef_Mgt.html#1029749"><code>BtLibManagementCallback()</code></a>. Then you need to register your callback function using <code>BtLibRegisterManagementNotification</code>. For examples of the callback events your callback function needs to handle, see the <a href="BtLibRef_Mgt.html#1028315">Management Callback Events</a> section.</p>

<p><a name="1029604"> </a>Applications should unregister their management callbacks before closing the Bluetooth library to prevent the callback table from overflowing. The callback table holds a maximum of 16 entries.</p>
<h4>
  <a name="1029605"> </a>See Also 
</h4>

<p><a name="1029609"> </a><a href="BtLibRef_Mgt.html#1029712"><code>BtLibUnregisterManagementNotification()</code></a></p>

<h3 class="hbH3">
  <a name="1029612"> </a>BtLibSetGeneralPreference Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029614"> </a>Purpose 
</h4>

<p><a name="1029615"> </a>Set one of the general management preferences.</p>
<h4>
  <a name="1029616"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029617"> </a></code><h4>
  <a name="1029618"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029619"></a>Err BtLibSetGeneralPreference (
   UInt16 btLibRefNum,
   BtLibGeneralPrefEnum pref,
   void *prefValue,
   UInt16 prefValueSize
)
</pre>
<h4>
  <a name="1029620"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029621"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029622"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029623"> </a><code>&rarr;  <i>pref</i></code></dt>
<dd><a name="1029624"> </a>General preference to set. See <a href="BtLibRef_Mgt.html#1029016"><code>BtLibGeneralPreferenceEnum</code></a>.</dd>

<dt><a name="1029628"> </a><code>&rarr;  <i>prefValue</i></code></dt>
<dd><a name="1029629"> </a>Pointer to the value of the preference. This parameter must not be <code>NULL</code>. See <a href="BtLibRef_Mgt.html#1029016"><code>BtLibGeneralPreferenceEnum</code></a>.</dd>

<dt><a name="1029633"> </a><code>&rarr;  <i>prefValueSize</i></code></dt>
<dd><a name="1029634"> </a>Size, in bytes, of <code>prefValue</code>.</dd>

</dl>
<h4>
  <a name="1029635"> </a>Returns 
</h4>

<p><a name="1029636"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029637"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029638"> </a>Success.</dd>

<dt><a name="1029639"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029640"> </a>The results will be returned through a notification.</dd>

<dt><a name="1029641"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029642"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029643"> </a><code>btLibErrParamError</code></dt>
<dd><a name="1029644"> </a>One or more parameters is invalid. Be sure that <code>prefValueSize</code> matches the size of the preference value.</dd>

<dt><a name="1029645"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029646"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029647"> </a>Comments 
</h4>

<p><a name="1029651"> </a>See the <a href="BtLibRef_Mgt.html#1028985"><code>BtLibGetGeneralPreference()</code></a> function description for a list of the preferences.</p>

<p><a name="1029652"> </a>This function may generate events depending on the preference you change. The <a href="BtLibRef_Mgt.html#1028331"><code>btLibManagementEventAccessibilityChange</code></a> event indicates that the accessibility of the local device has changed.</p>
<h4>
  <a name="1029656"> </a>See Also 
</h4>

<p><a name="1029660"> </a><a href="BtLibRef_Mgt.html#1028985"><code>BtLibGetGeneralPreference()</code></a></p>

<h3 class="hbH3">
  <a name="1029663"> </a>BtLibStartInquiry Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029665"> </a>Purpose 
</h4>

<p><a name="1029666"> </a>Start a Bluetooth inquiry.</p>
<h4>
  <a name="1029667"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029668"> </a></code><h4>
  <a name="1029669"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029670"></a>Err BtLibStartInquiry (
   UInt16 btLibRefNum,
   UInt8 timeout,
   UInt8 maxResp
)
</pre>
<h4>
  <a name="1029671"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029672"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029673"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029674"> </a><code>&rarr;  <i>timeout</i></code></dt>
<dd><a name="1029675"> </a>Time, in seconds, this inquiry is allowed to take. If the inquiry does not complete within this time, it is canceled. The actual time is rounded to the nearest multiple of 1.28 seconds. If you specify a timeout period larger than 60 seconds, this function acts as if you specified a timeout period of 60 seconds. If this parameter is 0, the timeout period defaults to 10.24 seconds as specified in the Generic Access Profile.</dd>

<dt><a name="1029676"> </a><code>&rarr;  <i>maxResp</i></code></dt>
<dd><a name="1029677"> </a>Maximum number of responses the inquiry accepts. Responses are not guaranteed to be unique.</dd>

</dl>
<h4>
  <a name="1029678"> </a>Returns 
</h4>

<p><a name="1029679"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029680"> </a><code>btLibErrPending</code></dt>
<dd><a name="1029681"> </a>The results will be returned through callback events.</dd>

<dt><a name="1029682"> </a><code>btLibErrBluetoothOff</code></dt>
<dd><a name="1029683"> </a>The Bluetooth radio is off. The user can turn the radio on and off with a setting in the preferences panel.</dd>

<dt><a name="1029684"> </a><code>btLibErrInProgress</code></dt>
<dd><a name="1029685"> </a>Another inquiry is already in progress.</dd>

<dt><a name="1029686"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029687"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029688"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029689"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029690"> </a>Comments 
</h4>

<p><a name="1029691"> </a>The function performs a low-level Bluetooth inquiry, as opposed to a full device discovery. Specifically, inquiries started with this function only return the Bluetooth address and the class of the discovered device. This function does not have a user interface.</p>

<p><a name="1029692"> </a>Every time a device is discovered, a <a href="BtLibRef_Mgt.html#1028455"><code>btLibManagementEventInquiryResult</code></a> callback event is generated. When the inquiry is complete, a <a href="BtLibRef_Mgt.html#1028448"><code>btLibManagementEventInquiryComplete</code></a> callback event is generated. If the application calls <a href="BtLibRef_Mgt.html#1028820"><code>BtLibCancelInquiry()</code></a>, a <a href="BtLibRef_Mgt.html#1028441"><code>btLibManagementEventInquiryCanceled</code></a> callback event is generated.</p>
<h4>
  <a name="1029705"> </a>See Also 
</h4>

<p><a name="1029709"> </a><a href="BtLibRef_Mgt.html#1028820"><code>BtLibCancelInquiry()</code></a></p>

<h3 class="hbH3">
  <a name="1029712"> </a>BtLibUnregisterManagementNotification Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029714"> </a>Purpose 
</h4>

<p><a name="1029715"> </a>Unregister a previously registered management callback.</p>
<h4>
  <a name="1029716"> </a>Declared In 
</h4>
<code>BtLib.h<a name="1029717"> </a></code><h4>
  <a name="1029718"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029719"></a>Err BtLibUnregisterManagementNotification (
   UInt16 btLibRefNum,
   BtLibManagementProcPtr callbackP
)
</pre>
<h4>
  <a name="1029720"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029721"> </a><code>&rarr;  <i>btLibRefNum</i></code></dt>
<dd><a name="1029722"> </a>Reference number for the Bluetooth library.</dd>

<dt><a name="1029723"> </a><code>&rarr;  <i>callbackP</i></code></dt>
<dd><a name="1029724"> </a>Pointer to the callback procedure to unregister. This pointer must not be <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1029725"> </a>Returns 
</h4>

<p><a name="1029726"> </a>Returns one of the following values:</p>

<dl>
<dt><a name="1029727"> </a><code>btLibErrNoError</code></dt>
<dd><a name="1029728"> </a>Success.</dd>

<dt><a name="1029729"> </a><code>btLibErrError</code></dt>
<dd><a name="1029730"> </a>The callback referenced by <code>callbackP</code> has not been registered.</dd>

<dt><a name="1029731"> </a><code>btLibErrNotOpen</code></dt>
<dd><a name="1029732"> </a>The referenced Bluetooth library is not open.</dd>

<dt><a name="1029733"> </a><code>btLibErrParamError</code></dt>
<dd><a name="1029734"> </a>One or more parameters are invalid.</dd>

<dt><a name="1029735"> </a><code>btLibErrStackNotOpen</code></dt>
<dd><a name="1029736"> </a>The Bluetooth stack failed to initialize when the library was opened.</dd>

</dl>
<h4>
  <a name="1029737"> </a>Comments 
</h4>

<p><a name="1029738"> </a>Applications should unregister their management callbacks before closing the library to prevent the callback table from overflowing. The callback table holds a maximum of 16 entries.</p>
<h4>
  <a name="1029739"> </a>See Also 
</h4>

<p><a name="1029743"> </a><a href="BtLibRef_Mgt.html#1029564"><code>BtLibRegisterManagementNotification()</code></a></p>

<h2 class="haH2">
  <a name="1029745"> </a>Application-Defined Functions <a href="#1027980"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1029746"> </a>This section describes the callback functions that handle management events. These functions are supplied by the developer and can be named anything.</p>

<h3 class="hbH3">
  <a name="1029749"> </a>BtLibManagementCallback Function <a href="#1027980"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1029751"> </a>Purpose 
</h4>

<p><a name="1029752"> </a>Signal the result of a Bluetooth management event. When the event takes place, this callback function is called.</p>
<h4>
  <a name="1029753"> </a>Declared In 
</h4>
<code>BtLibTypes.h<a name="1029754"> </a></code><h4>
  <a name="1029755"> </a>Prototype 
</h4>
<pre class="proto"><a name="1029756"></a>void (
   *BtLibManagementProcPtr
) (
   BtLibManagementEventType *mEvent,
   UInt32 refCon
)
</pre>
<h4>
  <a name="1029757"> </a>Parameters 
</h4>

<dl>
<dt><a name="1029758"> </a><code>&rarr;  <i>mEvent</i></code></dt>
<dd><a name="1029762"> </a><a href="BtLibRef_Mgt.html#1028282"><code>BtLibManagementEventType</code></a> structure containing the event parameters.</dd>

<dt><a name="1029763"> </a><code>&rarr;  <i>refCon</i></code></dt>
<dd><a name="1029764"> </a>General purpose integer which you can use to hold application-specific information. When you register the callback with the <a href="BtLibRef_Mgt.html#1029564"><code>BtLibRegisterManagementNotification()</code></a> function, you can specify a value to pass to this parameter.</dd>

</dl>
<h4>
  <a name="1029768"> </a>Returns 
</h4>

<p><a name="1029769"> </a>Returns nothing.</p>
<h4>
  <a name="1029770"> </a>Comments 
</h4>

<p><a name="1029771"> </a>The event and status of the event are in the <code>mEvent</code> structure. See <a href="BtLibRef_Mgt.html#1028315">Management Callback Events</a> for more information.</p>

<p><a name="1029775"> </a>You must register this function using the <a href="BtLibRef_Mgt.html#1029564"><code>BtLibRegisterManagementNotification()</code></a> function before it starts receiving events.</p>

<p><a name="1029779"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BtLibRef_General.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BtLibRef_Sockets.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>