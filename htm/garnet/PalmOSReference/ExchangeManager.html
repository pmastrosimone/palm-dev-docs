<html>
<head>
<title>(68K) Exchange Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:51">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1054717"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ConnectionMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ExgLibAPI.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">62 &nbsp;&nbsp;
Exchange Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartIII.html">Part III: Communications</a> </h1>
<h1 class="SideTOC1"><a href="ExchangeManager.html">62  Exchange Manager</a></h1>

   <h2 class="SideTOC2"><a href="#1054745">
   Exchange Manager Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1054747">
      ExgAskResultType</a></h3>

      <h3 class="SideTOC3"><a href="#1054783">
      ExgGoToType</a></h3>

      <h3 class="SideTOC3"><a href="#1054828">
      ExgLocalSocketInfoType</a></h3>

      <h3 class="SideTOC3"><a href="#1054900">
      ExgPreviewInfoType</a></h3>

      <h3 class="SideTOC3"><a href="#1054999">
      ExgSocketType</a></h3>

   <h2 class="SideTOC2"><a href="#1055145">
   Exchange Manager Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1055147">
      Registry ID Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1055198">
      Predefined URL Schemes</a></h3>

      <h3 class="SideTOC3"><a href="#1055235">
      Predefined URL Prefixes</a></h3>

   <h2 class="SideTOC2"><a href="#1055288">
   Exchange Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1055291">
      ExgAccept</a></h3>

      <h3 class="SideTOC3"><a href="#1055367">
      ExgConnect</a></h3>

      <h3 class="SideTOC3"><a href="#1055470">
      ExgControl</a></h3>

      <h3 class="SideTOC3"><a href="#1055573">
      ExgDBRead</a></h3>

      <h3 class="SideTOC3"><a href="#1055648">
      ExgDBWrite</a></h3>

      <h3 class="SideTOC3"><a href="#1055705">
      ExgDisconnect</a></h3>

      <h3 class="SideTOC3"><a href="#1055807">
      ExgDoDialog</a></h3>

      <h3 class="SideTOC3"><a href="#1055912">
      ExgGet</a></h3>

      <h3 class="SideTOC3"><a href="#1055984">
      ExgGetDefaultApplication</a></h3>

      <h3 class="SideTOC3"><a href="#1056045">
      ExgGetRegisteredApplications</a></h3>

      <h3 class="SideTOC3"><a href="#1056103">
      ExgGetRegisteredTypes</a></h3>

      <h3 class="SideTOC3"><a href="#1056150">
      ExgGetTargetApplication</a></h3>

      <h3 class="SideTOC3"><a href="#1056225">
      ExgNotifyGoto</a></h3>

      <h3 class="SideTOC3"><a href="#1056284">
      ExgNotifyPreview</a></h3>

      <h3 class="SideTOC3"><a href="#1056358">
      ExgNotifyReceive</a></h3>

      <h3 class="SideTOC3"><a href="#1056469">
      ExgPut</a></h3>

      <h3 class="SideTOC3"><a href="#1056545">
      ExgReceive</a></h3>

      <h3 class="SideTOC3"><a href="#1056615">
      ExgRegisterDatatype</a></h3>

      <h3 class="SideTOC3"><a href="#1056721">
      ExgRegisterData</a></h3>

      <h3 class="SideTOC3"><a href="#1056753">
      ExgRequest</a></h3>

      <h3 class="SideTOC3"><a href="#1056818">
      ExgSend</a></h3>

      <h3 class="SideTOC3"><a href="#1056868">
      ExgSetDefaultApplication</a></h3>

   <h2 class="SideTOC2"><a href="#1056917">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1056921">
      ExgDBDeleteProcPtr</a></h3>

      <h3 class="SideTOC3"><a href="#1056956">
      ExgDBReadProcPtr</a></h3>

      <h3 class="SideTOC3"><a href="#1057002">
      ExgDBWriteProcPtr</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1054718"> </a>This chapter describes the Exchange Manager API declared in the header file <code>ExgMgr.h</code> and the Exchange Local Library API declared in the header file <code>ExgLocalLib.h</code>. It discusses the following topics: </p>
<ul type="disc">
  <li><a name="1054724"> </a><a href="ExchangeManager.html#1054745">Exchange Manager Data Structures</a>
  <li><a name="1054728"> </a><a href="ExchangeManager.html#1055145">Exchange Manager Constants</a>
  <li><a name="1054732"> </a><a href="ExchangeManager.html#1055288">Exchange Manager Functions</a>
  <li><a name="1054736"> </a><a href="ExchangeManager.html#1056917">Application-Defined Functions</a>
</ul>

<p><a name="1054737"> </a>For more information on the Exchange Manager, see the chapter <a href="../PalmOSCompanion2/ExchangeManagerConcept.html#995795">"Object Exchange"</a> of <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. </p>

<h2 class="haH2">
  <a name="1054745"> </a>Exchange Manager Data Structures <a href="#1054717"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1054747"> </a>ExgAskResultType Enum <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1054749"> </a>Purpose 
</h4>

<p><a name="1054751"> </a>The <code>ExgAskResultType</code> enum defines possible values for the <code>result</code> field of the <a href="AppLaunchCodes.html#1011831"><code>sysAppLaunchCmdExgAskUser</code></a> launch code parameter block. </p>
<h4>
  <a name="1054756"> </a>Prototype 
</h4>
<pre class="proto"><a name="1054757"></a>typedef enum { 
  exgAskDialog,
  exgAskOk,
  exgAskCancel
} ExgAskResultType;
</pre>
<h4>
  <a name="1082756"> </a>Constants 
</h4>

<dl>
<dt><a name="1054765"> </a><code><code>exgAskDialog </code></code></dt>
<dd><a name="1054767"> </a>The Exchange Manager should display a dialog that prompts the user to confirm the receipt of data. See <a href="ExchangeManager.html#1055807"><code>ExgDoDialog()</code></a>. </dd>

<dt><a name="1054773"> </a><code><code>exgAskOk </code></code></dt>
<dd><a name="1054775"> </a>Accept the data.</dd>

<dt><a name="1054777"> </a><code><code>exgAskCancel </code></code></dt>
<dd><a name="1054779"> </a>Reject the data.</dd>

</dl>

<h3 class="hbH3">
  <a name="1054783"> </a>ExgGoToType Struct <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1054785"> </a>Purpose 
</h4>

<p><a name="1054786"> </a>The <code>ExgGoToType</code> structure defines the <code>goToParams</code> field of the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure. Applications that want to be launched after the data is received place their creator IDs in the <code>goToCreator</code> field and define the <code>goToParams</code> field. The values in this structure are copied to the <a href="AppLaunchCodes.html#1012140"><code>sysAppLaunchCmdGoTo</code></a> launch code's parameter block. </p>
<h4>
  <a name="1054795"> </a>Prototype 
</h4>
<pre class="proto"><a name="1054796"></a>typedef struct {
  UInt16 dbCardNo;
  LocalID dbID;
  UInt16 recordNum;
  UInt32 uniqueID;
  UInt32 matchCustom;
} ExgGoToType;
</pre>
<h4>
  <a name="1081532"> </a>Fields 
</h4>

<dl>
<dt><a name="1054806"> </a><code><code>dbCardNo</code></code></dt>
<dd><a name="1054808"> </a>The card number of the database that contains the added record. </dd>

<dt><a name="1054810"> </a><code><code>dbID</code></code></dt>
<dd><a name="1054812"> </a>The local ID of the database that contains the added record.</dd>

<dt><a name="1054814"> </a><code><code>recordNum</code></code></dt>
<dd><a name="1054816"> </a>The index of the record that was added. </dd>

<dt><a name="1054818"> </a><code><code>uniqueID</code></code></dt>
<dd><a name="1054820"> </a>The unique ID of the record that was added. This field is not used. </dd>

<dt><a name="1054822"> </a><code><code>matchCustom </code></code></dt>
<dd><a name="1054824"> </a>Application-specific information.</dd>

</dl>

<h3 class="hbH3">
  <a name="1054828"> </a>ExgLocalSocketInfoType Struct <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1054830"> </a>Purpose 
</h4>

<p><a name="1054832"> </a>The <code>ExgLocalSocketInfoType</code> structure identifies information specific to the Local Exchange Library. The <code>socketRef</code> field of the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure is set to this structure when you send and receive data using the Local Exchange Library. The Local Exchange Library creates this structure if it does not already exist. You only need to create it if you want to supply non-default values for the <code>noAsk</code> or <code>previewInfoP</code> fields. </p>
<h4>
  <a name="1054836"> </a>Prototype 
</h4>
<pre class="proto"><a name="1054837"></a>typedef struct {
  Boolean freeOnDisconnect;
  Boolean noAsk;
  ExgPreviewInfoType *previewInfoP;
  FileHand tempFileH;
  Err err;
  ExgLocalOpType op;
} ExgLocalSocketInfoType;
</pre>
<h4>
  <a name="1081576"> </a>Fields 
</h4>

<dl>
<dt><a name="1054849"> </a><code><code>freeOnDisconnect </code></code></dt>
<dd><a name="1054851"> </a>Whether the structure is freed when the <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> call is made. The default is <code>true</code>. In general, code that allocates a structure should be responsible for freeing that structure. Therefore, if you have allocated <code>ExgLocalSocketInfoType</code>, you should set this field to <code>false</code> and explicitly free the structure when you are finished with it. </dd>

<dt><a name="1054856"> </a><code><code>noAsk </code></code></dt>
<dd><a name="1054858"> </a>Set to <code>true</code> to disable the display of the exchange dialog. If you want to, for example, create a vCalendar object and send it to the Datebook application in response to a user command, you probably want to set <code>noAsk</code> to <code>true</code> so that the user does not have to confirm the receipt of the data they just requested you to send. </dd>

<dt><a name="1054860"> </a><code><code>previewInfoP </code></code></dt>
<dd><a name="1054866"> </a>A pointer to an <a href="ExchangeManager.html#1054900"><code>ExgPreviewInfoType</code></a> structure, used to display a preview of the data. If you wanted to simply use another application to help display data, you would create and initialize this structure. </dd>

<dt><a name="1054868"> </a><code><code>tempFileH</code> </code></dt>
<dd><a name="1054870"> </a>A temporary buffer that the Local Exchange Library uses. Do not set this field directly; the Local Exchange Library should set it. </dd>

<dt><a name="1054872"> </a><code><code>err</code> </code></dt>
<dd><a name="1054874"> </a>The error code returned from the Local Exchange Library. Do not set this field directly; the Local Exchange Library should set it. </dd>

<dt><a name="1054876"> </a><code><code>op</code> </code></dt>
<dd><a name="1054878"> </a>The operation in progress. Do not set this field directly. The Local Exchange Library sets this field to one of the following: </dd>

<dl>
<dt><a name="1054883"> </a><code><code>exgLocalOpNone</code> </code></dt>
<dd><a name="1054884"> </a>No operation in progress. </dd>

<dt><a name="1054886"> </a><code><code>exgLocalOpPut</code> </code></dt>
<dd><a name="1054887"> </a>A send is in progress. </dd>

<dt><a name="1054889"> </a><code><code>exgLocalOpAccept</code> </code></dt>
<dd><a name="1054890"> </a>A receive is in progress. </dd>

<dt><a name="1054892"> </a><code><code>exgLocalOpGet</code> </code></dt>
<dd><a name="1054893"> </a>A get is in progress. </dd>

<dt><a name="1054895"> </a><code><code>exgLocalOpGetSender</code> </code></dt>
<dd><a name="1054896"> </a>The library is receiving information from the sending application during a get operation.</dd>

</dl>
</dl>

<h3 class="hbH3">
  <a name="1054900"> </a>ExgPreviewInfoType Struct <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1054902"> </a>Purpose 
</h4>

<p><a name="1054904"> </a>The <code>ExgPreviewInfoType</code> structure provides information to the <a href="ExchangeManager.html#1056284"><code>ExgNotifyPreview()</code></a> function. The <code>ExgNotifyPreview</code> function uses this information to have the application display a preview of the data to be received in the exchange dialog. </p>
<h4>
  <a name="1054909"> </a>Prototype 
</h4>
<pre class="proto"><a name="1054910"></a>typedef struct {
  UInt16 version;
  ExgSocketType *socketP;
  UInt16 op;
  Char *string;
  UInt32 size;
  RectangleType bounds;
  UInt16 types;
  Err error;
} ExgPreviewInfoType;
</pre>
<h4>
  <a name="1082601"> </a>Fields 
</h4>

<dl>
<dt><a name="1054923"> </a><code><code>version</code> </code></dt>
<dd><a name="1054925"> </a>Set this field to 0 to specify version 0 of this structure. </dd>

<dt><a name="1054927"> </a><code><code>socketP</code> </code></dt>
<dd><a name="1054929"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). The <code>libraryRef</code> field must identify the exchange library from which preview data should be received, and the <code>target</code>, <code>type</code>, or <code>name</code> field should be defined as well. </dd>

<dt><a name="1054934"> </a><code><code>op</code> </code></dt>
<dd><a name="1054936"> </a>One of the following constants: </dd>

<dl>
<dt><a name="1054941"> </a><code><code>exgPreviewDialog</code></code></dt>
<dd><a name="1054942"> </a>Display a modal dialog containing the preview. This constant is only used in situations where one application launches another to display data. </dd>

<dt><a name="1054947"> </a><code><code>exgPreviewDraw</code></code></dt>
<dd><a name="1054948"> </a>The preview is a graphic. </dd>

<dt><a name="1054953"> </a><code><code>exgPreviewLongString</code></code></dt>
<dd><a name="1054954"> </a>The preview is a long string. </dd>

<dt><a name="1054959"> </a><code><code>exgPreviewQuery</code></code></dt>
<dd><a name="1054960"> </a>Ask the application which preview operations it supports. The answer is returned in the <code>types</code> field. If the application does not support any preview modes, the <code>error</code> field contains <code>exgErrNotSupported</code>. </dd>

<dt><a name="1054966"> </a><code><code>exgPreviewShortString</code></code></dt>
<dd><a name="1054967"> </a>The preview is a short string. </dd>

</dl>
<dt><a name="1054969"> </a><code><code>string</code> </code></dt>
<dd><a name="1054971"> </a>A buffer into which the application places the string preview if <code>exgPreviewLongString</code> or <code>exgPreviewShortString</code> is specified. </dd>

<dt><a name="1054973"> </a><code><code>size</code> </code></dt>
<dd><a name="1054975"> </a>The allocated size of the <code>string</code> field. </dd>

<dt><a name="1054977"> </a><code><code>bounds</code> </code></dt>
<dd><a name="1054979"> </a>The bounds of the rectangle in which the application draws the graphic if <code>exgPreviewDraw</code> is specified. </dd>

<dt><a name="1054981"> </a><code><code>types</code> </code></dt>
<dd><a name="1054983"> </a>Upon return from an <code>exgPreviewQuery</code> operation, a bit field identifying the types of previews the application supports. </dd>

<dt><a name="1054985"> </a><code><code>error</code> </code></dt>
<dd><a name="1054987"> </a>The error code returned from the application. If <code>errNone</code>, the preview operation was successful. </dd>

</dl>



<p><a name="1054989"> </a>Applications can define and use their own constants for the preview operation. Operations specific to an application are numbered starting at <code>exgPreviewFirstUser</code> and should be no greater than <code>exgPreviewLastUser</code>. </p>
<h4>
  <a name="1054992"> </a>Compatibility 
</h4>

<p><a name="1054996"> </a>This structure is only defined if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>

<h3 class="hbH3">
  <a name="1054999"> </a>ExgSocketType Struct <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055001"> </a>Purpose 
</h4>

<p><a name="1055002"> </a>The <code>ExgSocketType</code> structure defines an Exchange Manager socket, which is passed to most Exchange Manager functions. The <code>ExgSocketPtr</code> type points to a <code>ExgSocketType</code> structure.</p>
<h4>
  <a name="1055003"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055004"></a>typedef struct ExgSocketType {
  UInt16 libraryRef;
  UInt32 socketRef;
  UInt32 target;
  UInt32 count;
  UInt32 length;
  UInt32 time;
  UInt32 appData;
  UInt32 goToCreator;
  ExgGoToType goToParams;
  UInt16 localMode:1;
  UInt16 packetMode:1;
  UInt16 noGoTo:1;
  UInt16 noStatus:1;
  UInt16 preview:1;
  UInt16 reserved:11;
  Char *description;
  Char *type;
  Char *name;
} ExgSocketType;
</pre>
<pre class="proto"><a name="1055024"></a>typedef ExgSocketType *ExgSocketPtr;
</pre>

<p><a name="1055025"> </a>Note that when data is received, some of the fields in this structure may not have values. When you are sending data, it is recommended that you provide values for all of these fields, but you should not rely on receiving values for the fields marked optional. </p>
<h4>
  <a name="1082668"> </a>Fields 
</h4>

<dl>
<dt><a name="1055029"> </a><code><code>libraryRef</code></code></dt>
<dd><a name="1055031"> </a>The exchange library in use. When an application or library receives a socket, this field is already assigned. </dd>

<dd><a name="1055035"> </a>When sending data, applications may identify the exchange library they want to connect with by providing a URL in the <code>name</code> field. If so, they should use 0 for the <code>libraryRef</code> field. The Exchange Manager then determines which library corresponds to the URL and assigns the <code>libraryRef</code> field. See the Comments in the <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a> function description for more information. </dd>

<dt><a name="1055040"> </a><code><code>socketRef</code></code></dt>
<dd><a name="1055042"> </a>The connection identifier. This value is supplied by the exchange library when a connection is established. It contains any necessary library-specific data. </dd>

<dt><a name="1055044"> </a><code><code>target</code></code></dt>
<dd><a name="1055046"> </a>The creator ID of the application that should receive the message. </dd>

<dt><a name="1055048"> </a><code><code>count</code></code></dt>
<dd><a name="1055050"> </a>The number of objects in this connection, usually 1 (optional). </dd>

<dt><a name="1055052"> </a><code><code>length </code></code></dt>
<dd><a name="1055054"> </a>The total byte count for all objects being sent (optional).</dd>

<dt><a name="1055056"> </a><code><code>time</code></code></dt>
<dd><a name="1055058"> </a>The last modified time of object (optional).</dd>

<dt><a name="1055060"> </a><code><code>appData</code></code></dt>
<dd><a name="1055062"> </a>Application-specific information (optional). </dd>

<dt><a name="1055064"> </a><code><code>goToCreator</code></code></dt>
<dd><a name="1055066"> </a>The creator ID of the application to launch using the <a href="AppLaunchCodes.html#1012140"><code>sysAppLaunchCmdGoTo</code></a> launch code after the item is received if <code>noGoTo</code> is 0. The value is assigned by the application that receives the object. See the Comments section in <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> for more information. </dd>

<dt><a name="1055074"> </a><code><code>goToParams</code></code></dt>
<dd><a name="1055076"> </a>If <code>goToCreator</code> is specified, then this field contains data that is copied into the launch code's parameter block. See <a href="ExchangeManager.html#1054783"><code>ExgGoToType</code></a>.</dd>

<dt><a name="1055081"> </a><code><code>localMode</code></code></dt>
<dd><a name="1055083"> </a>Set to 1 to exchange with local device only. A <code>localMode</code> of 1 is equivalent to specifying a URL with the <code>exgLocalPrefix</code>. Set to 0 to enable an exchange with a remote machine. The default is 0.</dd>

<dt><a name="1055086"> </a><code><code>packetMode</code></code></dt>
<dd><a name="1055088"> </a>Set to 1 to use connectionless packet mode (Ultra). The default is 0. Ultra mode is not currently supported. </dd>

<dt><a name="1055090"> </a><code><code>noGoTo</code> </code></dt>
<dd><a name="1055092"> </a>Set to 1 to disable launching the application with <a href="AppLaunchCodes.html#1012140"><code>sysAppLaunchCmdGoTo</code></a>. The default is 0. </dd>

<dt><a name="1055098"> </a><code><code>noStatus</code> </code></dt>
<dd><a name="1055100"> </a>If <code>true</code>, the exchange library should not display a progress dialog. If <code>false</code>, the library can display a progress dialog. The default is <code>false</code>. </dd>

<dd><a name="1055104"> </a>The Exchange Manager sets and clears this bit at various times while data is received. Applications may also want to set this bit if they use the Local Exchange Library and want to prevent the progress dialog from being displayed during a send. </dd>

<dt><a name="1055106"> </a><code><code>preview</code> </code></dt>
<dd><a name="1055108"> </a>If <code>true</code>, a preview is in progress. The <a href="ExchangeManager.html#1056284"><code>ExgNotifyPreview()</code></a> function sets this bit while the preview takes place and clears it when the preview is finished. Exchange libraries should not discard any data while a preview is in progress because the full data must be sent later if the receiving user accepts it. </dd>

<dt><a name="1055113"> </a><code><code>reserved</code></code></dt>
<dd><a name="1055115"> </a>Reserved system flags.</dd>

<dt><a name="1055117"> </a><code><code>description</code></code></dt>
<dd><a name="1055119"> </a>A pointer to the text description of the object (optional). </dd>

<dt><a name="1055121"> </a><code><code>type</code></code></dt>
<dd><a name="1055123"> </a>A pointer to the MIME type of the object (optional). </dd>

<dt><a name="1055125"> </a><code><code>name</code></code></dt>
<dd><a name="1055127"> </a>The name of the object being sent. This can be a URL whose scheme identifies the exchange library to connect with. </dd>

<dd><a name="1055131"> </a>If the name has a colon, it is treated as a URL. </dd>

</dl>


<h4>
  <a name="1055133"> </a>Compatibility 
</h4>

<p><a name="1055136"> </a>The <code>noGoTo</code> and <code>noStatus</code> flags are only defined if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present, and the <code>noStatus</code> flag has no effect unless <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. The <code>preview</code> flag is only defined if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>

<h2 class="haH2">
  <a name="1055145"> </a>Exchange Manager Constants <a href="#1054717"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1055147"> </a>Registry ID Constants <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1055148"> </a>The registry ID constants are used in the Exchange Manager registry. Exchange libraries register for the URL prefixes they handle, and applications register for the types of data they receive. The registry ID constants specify which type of data is being registered for. </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1055151"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Constant</span></b></p>
    </th>
    <th><p class="tt"><a name="1055153"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1055155"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055158"> </a><code>exgRegCreatorID</code> </p>
    </td>
    <td><p class="tt"><a name="1055160"> </a>0xfffb </p>
    </td>
    <td><p class="tt"><a name="1055162"> </a>Register for a creator ID. The <code>target</code> field of the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> contains the creator ID of the application that should receive the data. Typically, the application with the matching creator ID receives the data, but it is possible for one application to register for another's creator ID and receive data in its place. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055168"> </a><code>exgRegSchemeID</code> </p>
    </td>
    <td><p class="tt"><a name="1055170"> </a>0xfffc </p>
    </td>
    <td><p class="tt"><a name="1055172"> </a>Register for a URL scheme. Typically, only exchange libraries register for URL schemes. Applications can register for URL schemes, but they only receive the URL when <a href="ExchangeManager.html#1056753"><code>ExgRequest()</code></a> is called. If the <code>name</code> field of the <code>ExgSocketType</code> contains a colon (:), the portion of the URL before the colon is the URL scheme. The default library registered for URLs with that scheme will handle the message. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055178"> </a><code>exgRegExtensionID</code> </p>
    </td>
    <td><p class="tt"><a name="1055180"> </a>0xfffd </p>
    </td>
    <td><p class="tt"><a name="1055182"> </a>Register for a filename extension. If the <code>name</code> field of the <code>ExgSocketType</code> contains a period (.), the portion of the name after the last period is the filename extension. The application registered to handle files of that extension will handle the message. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055185"> </a><code>exgRegTypeID</code> </p>
    </td>
    <td><p class="tt"><a name="1055187"> </a>0xfffe </p>
    </td>
    <td><p class="tt"><a name="1055189"> </a>Register for a MIME type. If the <code>type</code> field of the <code>ExgSocketType</code> contains a value, the application registered to receive that MIME type handles the message. </p>
    </td>
  </tr>
</table>

</div>

<h4>
  <a name="1055191"> </a>Compatibility 
</h4>

<p><a name="1055194"> </a>The <code>exgRegCreatorID</code> and <code>exgRegSchemeID</code> constants are only defined if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1055198"> </a>Predefined URL Schemes <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1055199"> </a>The Exchange Manager provides these predefined URL schemes, for which exchange libraries can register. </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1055202"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1055204"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1055206"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055209"> </a><code>exgBeamScheme</code> </p>
    </td>
    <td><p class="tt"><a name="1055211"> </a>"_beam" </p>
    </td>
    <td><p class="tt"><a name="1055213"> </a>The URL scheme for Beam commands. By default, the IR Library handles this scheme. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055216"> </a><code>exgSendScheme</code> </p>
    </td>
    <td><p class="tt"><a name="1055218"> </a>"_send" </p>
    </td>
    <td><p class="tt"><a name="1055220"> </a>The URL scheme for Send commands. The purpose of the Send command is to provide a choice of transport mechanisms to the user; therefore, any exchange library that sends data should register for this scheme. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055223"> </a><code>exgLocalScheme</code> </p>
    </td>
    <td><p class="tt"><a name="1055225"> </a>"_local"</p>
    </td>
    <td><p class="tt"><a name="1055227"> </a>The URL scheme for the Local Exchange Library. </p>
    </td>
  </tr>
</table>

</div>

<h4>
  <a name="1055229"> </a>Compatibility 
</h4>

<p><a name="1055233"> </a>These constants are only defined if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1055235"> </a>Predefined URL Prefixes <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1055236"> </a>The Exchange Manager provides the following prefixes, which can be used to construct URLs appropriate for the <code>name</code> field of the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure. When sending data, applications provide a URL to identify the exchange library that should transport the data. </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1055242"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1055244"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1055246"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055249"> </a><code>exgBeamPrefix</code> </p>
    </td>
    <td><p class="tt"><a name="1055252"> </a>(<code>exgBeamScheme</code> ":") </p>
    </td>
    <td><p class="tt"><a name="1055254"> </a>The URL to beam data. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055257"> </a><code>exgSendPrefix</code> </p>
    </td>
    <td><p class="tt"><a name="1055260"> </a>("?" <code>exgSendScheme</code> ":") </p>
    </td>
    <td><p class="tt"><a name="1055262"> </a>A URL for the general Send command. Because this URL begins with a question mark (?), the Exchange Manager displays a dialog with a list of exchange libraries registered for the <code>exgSendScheme</code>. The user then chooses the desired exchange library. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055265"> </a><code>exgSendBeamPrefix</code> </p>
    </td>
    <td><p class="tt"><a name="1055268"> </a>("?" <code>exgSendScheme</code> ";" </p>
<p class="tt"><a name="1055270"> </a><code>exgBeamScheme</code> ":") </p>
    </td>
    <td><p class="tt"><a name="1055272"> </a>A URL for the general Send command. The Exchange Manager displays a dialog with a list of exchange libraries registered for either the <code>exgSendScheme</code> or the <code>exgBeamScheme</code>. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055275"> </a><code>exgLocalPrefix</code> </p>
    </td>
    <td><p class="tt"><a name="1055278"> </a>(<code>exgLocalScheme</code> ":")</p>
    </td>
    <td><p class="tt"><a name="1055280"> </a>The URL for using the Local Exchange Library. </p>
    </td>
  </tr>
</table>

</div>

<h4>
  <a name="1055282"> </a>Compatibility 
</h4>

<p><a name="1055286"> </a>These constants are only defined if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="1055288"> </a>Exchange Manager Functions <a href="#1054717"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1055291"> </a>ExgAccept Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055293"> </a>Purpose 
</h4>

<p><a name="1055294"> </a>Accepts a connection from a remote device.</p>
<h4>
  <a name="1055295"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055296"> </a></code><h4>
  <a name="1055297"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055298"></a>Err ExgAccept (
   ExgSocketType *socketP
)
</pre>
<h4>
  <a name="1055299"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055300"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1055304"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). </dd>

</dl>
<h4>
  <a name="1055305"> </a>Returns 
</h4>

<p><a name="1055306"> </a>Returns one of the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1055309"> </a><code>errNone</code></p>
    </td>
    <td><p class="tt"><a name="1055311"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055313"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1055315"> </a>Couldn't find default exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055317"> </a><code>exgErrNotSupported</code> </p>
    </td>
    <td><p class="tt"><a name="1055319"> </a>A preview is in progress, and the exchange library identified by <code>libraryRef</code> doesn't support preview mode </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1055321"> </a>Other error codes depend on the exchange library. </p>

<p><a name="1055322"> </a>Displays a fatal error message if <code>socketP</code> does not have a <code>libraryRef</code> specified. </p>
<h4>
  <a name="1055323"> </a>Comments 
</h4>

<p><a name="1055324"> </a>Applications call this function when launched with the <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a> or <a href="AppLaunchCodes.html#1011910"><code>sysAppLaunchCmdExgPreview</code></a> launch code. The launch code contains <code>socketP</code> in its parameter block. Applications should pass this socket to <code>ExgAccept</code> to accept the connection, then call <a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a> one or more times to receive the data, and then call <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> to disconnect.</p>

<div><hr>
  <a name="1055339"> </a> <b>NOTE: </b> Don't create the socket on the receiving side of an exchange. The socket is passed to you in the command parameter block of the <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a> or <a href="AppLaunchCodes.html#1011910"><code>sysAppLaunchCmdExgPreview</code></a> launch code.
<hr>
</div>
<h4>
  <a name="1055346"> </a>Compatibility 
</h4>

<p><a name="1055350"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present. Preview mode is supported only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1055354"> </a>See Also 
</h4>

<p><a name="1055364"> </a><a href="ExchangeManager.html#1055367"><code>ExgConnect()</code></a>, <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>, <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a></p>

<h3 class="hbH3">
  <a name="1055367"> </a>ExgConnect Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055369"> </a>Purpose 
</h4>

<p><a name="1055370"> </a>Establishes a connection with a remote socket. </p>
<h4>
  <a name="1055371"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055372"> </a></code><h4>
  <a name="1055373"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055374"></a>Err ExgConnect (
   ExgSocketType *socketP
)
</pre>
<h4>
  <a name="1055375"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055376"> </a><code>&rarr;  <i>socketP</i></code></dt>
<dd><a name="1055380"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). Specify either a value for the <code>libraryRef</code> field or a URL in the <code>name</code> field. <code>libraryRef</code> should be 0 if the <code>name</code> field contains a URL. </dd>

</dl>
<h4>
  <a name="1055381"> </a>Returns 
</h4>

<p><a name="1055382"> </a>Returns one of the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1055385"> </a><code>errNone</code></p>
    </td>
    <td><p class="tt"><a name="1055387"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055389"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1055391"> </a>Couldn't find exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055393"> </a><code>exgErrNotSupported</code> </p>
    </td>
    <td><p class="tt"><a name="1055395"> </a>The library doesn't support the operation specified in <code>socketP</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055397"> </a><code>exgErrUserCancel</code> </p>
    </td>
    <td><p class="tt"><a name="1055399"> </a>The user cancelled the connection operation </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055401"> </a><code>exgMemError</code> </p>
    </td>
    <td><p class="tt"><a name="1055403"> </a>There isn't enough free memory to respond to the request</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055405"> </a><code>exgErrNotEnoughPower</code> </p>
    </td>
    <td><p class="tt"><a name="1055407"> </a>The battery does not have enough power to perform the operation </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1055409"> </a>Other error codes depend on the exchange library. </p>
<h4>
  <a name="1055410"> </a>Comments 
</h4>

<p><a name="1055411"> </a>Applications can call this function to initiate a connection for sending multiple objects or for performing two-way communications. Some exchange libraries support sending multiple objects but do not support this call. See <a href="../PalmOSCompanion2/ExchangeManagerConcept.html#996388">"Sending Multiple Objects"</a> of <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i> for more information. </p>

<p><a name="1055418"> </a>Before calling this function, the application must initialize the <code>socketP</code> parameter. The socket should identify the exchange library to connect with by providing either a library reference number in the <code>libraryRef</code> field or a URL in the <code>name</code> field. The default exchange library registered for that type of URL handles the connection. </p>

<p><a name="1055419"> </a>To provide users with a choice of transport mechanisms, specify a URL that begins with a question mark (?). The Exchange Manager displays a dialog with a list of all exchange libraries that respond to URLs of the specified type. If only one exchange library is registered for this URL scheme, no dialog is displayed. </p>

<p><a name="1055420"> </a>For example, many applications on Palm OS<sup>&#174;</sup> 4.0 or higher support a Send command. This command generates a URL with the prefix <code>exgSendPrefix</code> (see <a href="ExchangeManager.html#1055235">Predefined URL Prefixes</a>). The Exchange Manager displays a dialog containing a list of libraries registered for that URL scheme. The user selects an exchange library, and that library's <code>ExgLibConnect</code> function is called. </p>

<p><a name="1055424"> </a>If the library is not specified by either URL or library reference number (in the <code>libraryRef</code> field), the Exchange Manager by default uses the IR Library; however, if the <code>localMode</code> flag is set, the Local Exchange Library is used instead. </p>

<p><a name="1055425"> </a>In addition to specifying the library, you can set the <code>count</code> field in <code>socketP</code> before making this call to indicate the number of objects that are going to be sent. Use a <code>count</code> of 0 if the number of objects isn't known in advance. </p>

<p><a name="1055426"> </a>If no error is returned from <code>ExgConnect</code>, applications can follow this call either by sending multiple objects or requesting data from the remote device or both. To send an object, call <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a> at the beginning of each object and call <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a> one or more times per object to send the data. To request data from the remote device, use <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a> (and then use <a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a> to receive the requested data). You can use these calls in combination with each other to support two-way communications. After all of the objects have been sent and received, call <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> to disconnect. </p>

<div><hr>
  <a name="1055447"> </a> <b>IMPORTANT: </b> Not all exchange libraries support the sending of multiple objects or using <code>ExgGet</code> to request data. 
<hr>
</div>
<h4>
  <a name="1055448"> </a>Compatibility 
</h4>

<p><a name="1055452"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present. <code>ExgConnect</code> was for system use only until the release of Palm OS 4.0. Multiple object sending and identifying exchange libraries by URL are supported only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. On earlier releases, this function is an alias for the <code>ExgPut</code> function. </p>
<h4>
  <a name="1055457"> </a>See Also 
</h4>

<p><a name="1055467"> </a><a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>, <a href="ExchangeManager.html#1055291"><code>ExgAccept()</code></a>, <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a></p>

<h3 class="hbH3">
  <a name="1055470"> </a>ExgControl Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055472"> </a>Purpose 
</h4>

<p><a name="1055473"> </a>Requests that an exchange library perform an operation. </p>
<h4>
  <a name="1055474"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055475"> </a></code><h4>
  <a name="1055476"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055477"></a>Err ExgControl (
   ExgSocketType *socketP,
   UInt16 op,
   void *valueP,
   UInt16 *valueLenP
)
</pre>
<h4>
  <a name="1055478"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055479"> </a><code>&rarr;  <i>socketP</i></code></dt>
<dd><a name="1055483"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). Specify either a value for the <code>libraryRef</code> field or a URL in the <code>name</code> field. <code>libraryRef</code> should be 0 if the <code>name</code> field contains a URL. </dd>

<dt><a name="1055484"> </a><code>&rarr;  <i><code>op</code></i></code></dt>
<dd><a name="1055485"> </a>A constant identifying the operation that the exchange library should perform. See the Comments section for more information. </dd>

<dt><a name="1055486"> </a><code>&harr;  <i><code>valueP</code></i></code></dt>
<dd><a name="1055487"> </a>Upon entry, a parameter that the exchange library requires to perform the operation, if any. Most operations do not require an input parameter. Upon return, contains the result of the operation. </dd>

<dt><a name="1055488"> </a><code>&harr;  <i><code>valueLenP</code></i></code></dt>
<dd><a name="1055489"> </a>The size of the <code>valueP</code> buffer. The size is updated upon return to show the actual length of the content returned. </dd>

</dl>
<h4>
  <a name="1055490"> </a>Returns 
</h4>

<p><a name="1055491"> </a>Returns one of the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1055494"> </a><code>errNone</code></p>
    </td>
    <td><p class="tt"><a name="1055496"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055498"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1055500"> </a>Couldn't find the requested exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055502"> </a><code>exgErrNotSupported</code></p>
    </td>
    <td><p class="tt"><a name="1055504"> </a>The exchange library does not support the requested operation </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1055506"> </a>Other error codes depend on the exchange library. </p>
<h4>
  <a name="1055507"> </a>Comments 
</h4>

<p><a name="1055508"> </a>The Exchange Manager uses this function to request information from the exchange library. Applications may also call this function. </p>

<p><a name="1055509"> </a>The Exchange Manager defines and uses a set of operation constants that it might send to any exchange library. These constants begin with the prefix <code>exgLibCtlGet</code>. The type of the variable pointed to by <code>valueP</code> depends on the type of operation to be performed. <a href="ExchangeManager.html#1055519">Table 62.1</a> lists and describes the predefined Exchange Manager operations. </p>

<p class="caption"><a name="1055519"> </a><b>Table 62.1&nbsp;&nbsp;ExgControl operations for all exchange libraries </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1055525"> </a><b>Operation exgLibCtlGet...</b></p>
    </th>
    <th><p class="tt"><a name="1055527"> </a><b>value Data Type</b></p>
    </th>
    <th><p class="tt"><a name="1055529"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055532"> </a><code>Preview</code> </p>
    </td>
    <td><p class="tt"><a name="1055534"> </a>Boolean. Output only. </p>
    </td>
    <td><p class="tt"><a name="1055536"> </a>Returns <code>true</code> if the exchange library supports preview mode or <code>false</code> if not. If the exchange library does not respond to this operation, it is assumed to support preview mode. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055539"> </a><code>Title</code></p>
    </td>
    <td><p class="tt"><a name="1055541"> </a>String buffer of size <code>exgTitleBufferSize</code> bytes. Output only. </p>
    </td>
    <td><p class="tt"><a name="1055544"> </a>Returns the name of the exchange library as it should appear in the Send dialog. All exchange libraries must respond to this operation. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055547"> </a><code>Version</code></p>
    </td>
    <td><p class="tt"><a name="1055549"> </a><code>UInt16</code>. Output only. </p>
    </td>
    <td><p class="tt"><a name="1055551"> </a>Returns the version of the exchange library API that this library implements. The constant <code>exgLibAPIVersion</code> defines the current version number. If the exchange library does not respond to this operation, the library supports the version of the Exchange Library API defined in Palm OS 4.0. </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1055554"> </a>An exchange library may also define its own operations. For example, the IR Library supports operations to enable or disable beaming, to set the baud rates, or to use the serial port (see <a href="IRLib.html#1073062">"IR Control Constants"</a>). The SMS Library supports operations that allow you to set the SMS preferences for sending messages or to manipulate multipart messages (see <a href="SmsLib.html#1069025">"SMS Control Constants"</a>). Operations specific to an exchange library are numbered starting at <code>exgLibCtlSpecificOp</code>. </p>

<p><a name="1055562"> </a>The <code>socketP</code> passed to this function must identify an exchange library either using the <code>libraryRef</code> field or using a URL in the <code>name</code> field. The Comments section in <a href="ExchangeManager.html#1055367"><code>ExgConnect()</code></a> describes how an application should identify the exchange library. </p>
<h4>
  <a name="1055566"> </a>Compatibility 
</h4>

<p><a name="1055570"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>

<h3 class="hbH3">
  <a name="1055573"> </a>ExgDBRead Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055575"> </a>Purpose 
</h4>

<p><a name="1055576"> </a>Converts a Palm OS database from its internal format and writes it to storage RAM. </p>
<h4>
  <a name="1055577"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055578"> </a></code><h4>
  <a name="1055579"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055580"></a>Err ExgDBRead (
   ExgDBReadProcPtr readProcP,
   ExgDBDeleteProcPtr deleteProcP,
   void *userDataP,
   LocalID *dbIDP,
   UInt16 cardNo,
   Boolean *needResetP,
   Boolean keepDates
)
</pre>
<h4>
  <a name="1055581"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055582"> </a><code>&rarr;  <i><code>readProcP</code></i></code></dt>
<dd><a name="1055583"> </a>A pointer to a function that reads in the database and passes it to <code>ExgDBRead</code>. See <a href="ExchangeManager.html#1056956"><code>ExgDBReadProcPtr()</code></a> for details.</dd>

<dt><a name="1055588"> </a><code>&rarr;  <i><code>deleteProcP</code></i></code></dt>
<dd><a name="1055590"> </a>A pointer to a function that is called if a database with an identical name already exists on the device. See <a href="ExchangeManager.html#1056921"><code>ExgDBDeleteProcPtr()</code></a> for details.</dd>

<dt><a name="1055595"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1055596"> </a>A pointer to any data you want to pass to either the <code>readProcP</code> or <code>deleteProcP</code> functions. Often, this parameter is used to pass the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> that is required by many Exchange Manager functions. </dd>

<dt><a name="1055601"> </a><code>&larr;  <i><code>dbIDP</code></i></code></dt>
<dd><a name="1055602"> </a>The ID of the database that <code>ExgDBRead</code> created on the local device.</dd>

<dt><a name="1055603"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1055604"> </a>The number of the card on which the database is to be stored.</dd>

<dt><a name="1055605"> </a><code>&larr;  <i><code>needResetP</code></i></code></dt>
<dd><a name="1055606"> </a>Set to <code>true</code> by <code>ExgDBRead</code> if the <code>dmHdrAttrResetAfterInstall</code> attribute bit is set in the received database.</dd>

<dt><a name="1055607"> </a><code>&rarr;  <i><code>keepDates</code></i></code></dt>
<dd><a name="1055608"> </a>Specify <code>true</code> to retain the creation, modification, and last backup dates as set in the received database header. Specify <code>false</code> to reset these dates to the current date.</dd>

</dl>
<h4>
  <a name="1055609"> </a>Returns 
</h4>

<p><a name="1055610"> </a>Returns <code>errNone</code> if successful; otherwise, returns one of the data manager error codes (<code>dmErr...</code>) or a callback-specific error code. (If the <code>readProcP</code> function returns an error, it is also returned by <code>ExgDBRead</code>.)</p>
<h4>
  <a name="1055612"> </a>Comments 
</h4>

<p><a name="1055613"> </a>This function converts data received from an exchange library or from any other transport mechanism into a Palm OS database and stores that database in the storage heap. It is not required that you use this function in conjunction with Exchange Manager calls. That is, it's possible to use this function to perform other operations, such as converting a database created on the desktop computer to a Palm OS formatted database in the storage heap.</p>

<p><a name="1055614"> </a>The primary use of this function, however, is to receive a database that has been beamed onto the device. In this case, call <code>ExgDBRead</code> in response to the launch code <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a> after calling <a href="ExchangeManager.html#1055291"><code>ExgAccept()</code></a> to accept the connection. Place the call to <a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a> in the read callback function you passed as the <code>readProcP</code> parameter. Pass the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure returned from <code>ExgAccept</code> in the <code>userDataP</code> parameter so that you have access to it in the read callback function. </p>

<p><a name="1055630"> </a>The read callback function performs the actual reading of data. <code>ExgDBRead</code> calls the read callback function multiple times. Each time, the <code>sizeP</code> parameter contains the number of bytes <code>ExgDBRead</code> expects the data returned in <code>dataP</code> to contain. It's important for the read callback function to set the number of bytes (in <code>sizeP</code>) that it actually placed in <code>dataP</code> if it's not the same as what <code>ExgDBRead</code> expected. <code>ExgDBRead</code> stops calling the read callback function after 0 is returned in <code>sizeP</code>.</p>

<p><a name="1055631"> </a>The callback function you pass in <code>deleteProcP</code> handles the case where the database being read already exists on the device. It is called only in that circumstance. The callback function may want to close the database if it is open, change the existing database's name, or delete the existing database to allow an overwrite. See <a href="ExchangeManager.html#1056921"><code>ExgDBDeleteProcPtr()</code></a> for more information. </p>
<h4>
  <a name="1055636"> </a>Compatibility 
</h4>

<p><a name="1055640"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1055641"> </a>See Also 
</h4>

<p><a name="1055645"> </a><a href="ExchangeManager.html#1055648"><code>ExgDBWrite()</code></a></p>

<h3 class="hbH3">
  <a name="1055648"> </a>ExgDBWrite Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055650"> </a>Purpose 
</h4>

<p><a name="1055651"> </a>Converts a given Palm OS database from its internal format on the local device and writes it using a function you supply. </p>
<h4>
  <a name="1055652"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055653"> </a></code><h4>
  <a name="1055654"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055655"></a>Err ExgDBWrite (
   ExgDBWriteProcPtr writeProcP,
   void *userDataP,
   const char *nameP,
   LocalID dbID,
   UInt16 cardNo
)
</pre>
<h4>
  <a name="1055656"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055657"> </a><code>&rarr;  <i><code>writeProcP</code></i></code></dt>
<dd><a name="1055659"> </a>A pointer to a function that writes out the database identified by <code>dbID</code>. See <a href="ExchangeManager.html#1057002"><code>ExgDBWriteProcPtr()</code></a> for details.</dd>

<dt><a name="1055664"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1055665"> </a>A pointer to any data you want to pass to the <code>writeProcP</code> function. Often, this parameter is used to pass the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> that is required by many Exchange Manager functions. </dd>

<dt><a name="1055670"> </a><code>&rarr;  <i><code>nameP</code></i></code></dt>
<dd><a name="1055671"> </a>A pointer to the name of the database that you want <code>ExgDBWrite</code> to write. This database is passed to <code>writeProcP</code>.</dd>

<dt><a name="1055672"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1055673"> </a>The ID of the database that you want <code>ExgDBWrite</code> to pass to <code>writeProcP</code>. If you don't supply an ID, then <code>nameP</code> is used to search for the database by name.</dd>

<dt><a name="1055674"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1055675"> </a>The number of the card on which to look for the database identified by <code>nameP</code>.</dd>

</dl>
<h4>
  <a name="1055676"> </a>Returns 
</h4>

<p><a name="1055677"> </a>Returns <code>errNone</code> if successful; otherwise, returns one of the data manager error codes (<code>dmErr...</code>) or a callback-specific error code. (If the <code>writeProcP</code> function returns an error, it is also returned by <code>ExgDBWrite</code>.)</p>
<h4>
  <a name="1055678"> </a>Comments 
</h4>

<p><a name="1055679"> </a>This function converts a Palm OS formatted database on the storage heap into a stream of bytes that can be sent over the Internet or over any other transport mechanism. It is not required that you use this function in conjunction with Exchange Manager calls. </p>

<p><a name="1055680"> </a>The primary use of this function, however, is to write a database that is going to be beamed onto another device. In this case, call <code>ExgDBWrite</code> after establishing the connection with <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>. Place the call to <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a> in the write callback function you passed as the <code>writeProcP</code> parameter. Pass the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure returned from <code>ExgSend</code> in the <code>userDataP</code> parameter so that you have access to it in the write callback function. </p>

<p><a name="1055692"> </a>The write callback function performs the actual writing of data. <code>ExgDBWrite</code> calls the write callback function multiple times. Each time, the <code>sizeP</code> parameter contains the number of bytes of <code>dataP</code> that are to be written. If the write callback function didn't handle it all, it's important that it set in <code>sizeP</code> the number of bytes that it did handle successfully. <code>ExgDBWrite</code> stops calling the write callback function after 0 is returned in <code>sizeP</code>.</p>
<h4>
  <a name="1055693"> </a>Compatibility 
</h4>

<p><a name="1055697"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1055698"> </a>See Also 
</h4>

<p><a name="1055702"> </a><a href="ExchangeManager.html#1055573"><code>ExgDBRead()</code></a></p>

<h3 class="hbH3">
  <a name="1055705"> </a>ExgDisconnect Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055707"> </a>Purpose 
</h4>

<p><a name="1055708"> </a>Terminates an Exchange Manager transfer and disconnects.</p>
<h4>
  <a name="1055709"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055710"> </a></code><h4>
  <a name="1055711"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055712"></a>Err ExgDisconnect (
   ExgSocketType *socketP,
   Err error
)
</pre>
<h4>
  <a name="1055713"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055714"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1055718"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>) identifying the connection to terminate. </dd>

<dt><a name="1055719"> </a><code>&rarr;  <i><code>error</code></i></code></dt>
<dd><a name="1055720"> </a>Any error that occurred. This parameter tells the exchange library why the connection is being broken. Normally the error code from <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a> or <a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a> is passed in here. </dd>

</dl>
<h4>
  <a name="1055727"> </a>Returns 
</h4>

<p><a name="1055728"> </a>Returns one of the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1055731"> </a><code>errNone</code> </p>
    </td>
    <td><p class="tt"><a name="1055733"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055735"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1055737"> </a>Couldn't find default exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055739"> </a><code>exgMemError</code></p>
    </td>
    <td><p class="tt"><a name="1055741"> </a>Couldn't read data to send</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055743"> </a><code>exgErrUserCancel</code></p>
    </td>
    <td><p class="tt"><a name="1055745"> </a>User cancelled transfer</p>
    </td>
  </tr>
</table>

</div>


<p><a name="1055747"> </a>Other error codes depend on the exchange library. </p>

<p><a name="1055748"> </a>May display a fatal error message if <code>socketP</code> doesn't contain a <code>libraryRef</code> value. </p>
<h4>
  <a name="1055749"> </a>Comments 
</h4>

<p><a name="1055750"> </a>Applications must call this function when finished sending data or receiving data. It terminates the connection made with <a href="ExchangeManager.html#1055367"><code>ExgConnect()</code></a>, <a href="ExchangeManager.html#1055291"><code>ExgAccept()</code></a>, <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>, or <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a>. </p>

<p><a name="1055767"> </a>In the <code>error</code> parameter, pass any error that occurs during the application loop, including errors returned from other Exchange Manager functions. This ensures that the connection is shut down knowing that it failed rather than succeeded.</p>

<p><a name="1055768"> </a>It's especially important to check the result code from this function, since this will tell you if the transfer was successful. An <code>errNone</code> return value means that the item was delivered to the destination successfully. It does not mean that the user on the other end actually kept the data. </p>

<p><a name="1055769"> </a><code>ExgDisconnect</code> is used after sending and receiving. When receiving, the application can insert its creator ID into the <code>goToCreator</code> field in the socket structure and add other goto information in the <code>goToParams</code> field. After the application returns from the <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a> launch code, the exchange library may call <a href="ExchangeManager.html#1056225"><code>ExgNotifyGoto()</code></a>, which launches the <code>goToCreator</code> application with the standard launch code <a href="AppLaunchCodes.html#1012140"><code>sysAppLaunchCmdGoTo</code></a>.</p>

<div><hr>
  <a name="1055782"> </a> <b>IMPORTANT: </b> Placing your creator ID in the <code>goToCreator</code> field is no longer a guarantee that you receive this launch code starting in Palm OS 4.0 because Palm OS 4.0 supports the sending of multiple objects at once. Thus, another application might overwrite the <code>goToCreator</code> field after your application has disconnected, making that application the recipient of the launch code. 
<hr>
</div>

<p><a name="1055783"> </a>Note that some exchange libraries wait to establish a connection until <code>ExgDisconnect</code> is called. The IR Library, for example, buffers the data that it receives and then waits until <code>ExgDisconnect</code> to actually send this data unless <code>ExgConnect</code> is called to establish a multi-object send connection. </p>
<h4>
  <a name="1055784"> </a>Compatibility 
</h4>

<p><a name="1055788"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present. </p>

<p><a name="1055789"> </a>Prior to Palm OS release 4.0, the Exchange Manager always launched the <code>goToCreator</code> application, if one was provided, upon return from this function. If <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present, the Exchange Manager does not launch the <code>goToCreator</code> application. Exchange libraries that want the previous behavior must explicitly call <a href="ExchangeManager.html#1056225"><code>ExgNotifyGoto()</code></a>. </p>
<h4>
  <a name="1055797"> </a>See Also 
</h4>

<p><a name="1055804"> </a><a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a>, <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a></p>

<h3 class="hbH3">
  <a name="1055807"> </a>ExgDoDialog Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055809"> </a>Purpose 
</h4>

<p><a name="1055810"> </a>Displays a dialog that allows users to accept or reject the receipt of data. </p>
<h4>
  <a name="1055811"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055812"> </a></code><h4>
  <a name="1055813"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055814"></a>Boolean ExgDoDialog (
   ExgSocketType *socketP,
   ExgDialogInfoType *infoP,
   Err *errP
)
</pre>
<h4>
  <a name="1055815"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055816"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1055820"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>) identifying the connection. A value must be provided for the <code>libraryRef</code> field. </dd>

<dd><a name="1055821"> </a>Applications can obtain the socket structure from the <a href="AppLaunchCodes.html#1011831"><code>sysAppLaunchCmdExgAskUser</code></a> launch code parameter block. </dd>

<dt><a name="1055826"> </a><code>&harr;  <i><code>infoP</code></i></code></dt>
<dd><a name="1055828"> </a>A pointer to an <code>ExgDialogInfoType</code> structure (see the Comments section below). </dd>

<dt><a name="1055829"> </a><code>&larr;  <i><code>errP</code></i></code></dt>
<dd><a name="1055831"> </a><code>errNone</code> if no error, or the error code if an error occurred. Currently, no errors are returned.</dd>

</dl>
<h4>
  <a name="1055832"> </a>Returns 
</h4>

<p><a name="1055833"> </a>Returns <code>true</code> if the user clicks the OK button on the dialog, or <code>false</code> otherwise. </p>
<h4>
  <a name="1055834"> </a>Comments 
</h4>

<p><a name="1055835"> </a>This function displays the exchange dialog, which prompts the user to accept or reject incoming data. </p>

<p><a name="1055836"> </a>By default, the Exchange Manager calls this function if the receiving application doesn't handle the <a href="AppLaunchCodes.html#1011831"><code>sysAppLaunchCmdExgAskUser</code></a> launch code or if it returns <code>exgAskDialog</code> from the launch code handler. When the Exchange Manager calls <code>ExgDoDialog</code>, the dialog displays a message similar to "Do you want to accept 'John Doe' into Address Book?" and allows the user to accept or reject the data. If the user clicks OK, the data should be received as an unfiled record. </p>

<p><a name="1055841"> </a>The Exchange Manager attempts to display a preview of the data in the exchange dialog to provide users with enough information to determine if they want to accept or reject the data. To display the preview data, it calls <a href="ExchangeManager.html#1056284"><code>ExgNotifyPreview()</code></a>. Applications wishing to support preview mode should respond to the launch code <a href="AppLaunchCodes.html#1011910"><code>sysAppLaunchCmdExgPreview</code></a>. See the <code>ExgNotifyPreview</code> function's description for more information. </p>

<p><a name="1055850"> </a>Applications may also want to allow users to select a category in which to accept the incoming data. To do so, handle <code>sysAppLaunchCmdExgAskUser</code> to call <code>ExgDoDialog</code> directly and pass it a pointer to an <code>ExgDialogInfoType</code> structure. The <code>ExgDialogInfoType</code> structure is defined as follows: </p>
<h4>
  <a name="1055851"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055852"></a>typedef struct {
  UInt16 version;
  DmOpenRef db;
  UInt16 categoryIndex;
} ExgDialogInfoType;
</pre>
<h4>
  <a name="1081522"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055858"> </a><code>&rarr;  <i><code>version</code></i></code></dt>
<dd><a name="1055859"> </a>Set this field to 0 to specify version 0 of this structure. </dd>

<dt><a name="1055860"> </a><code>&rarr;  <i><code>db</code></i></code></dt>
<dd><a name="1055861"> </a>A pointer to an open database that defines the categories the dialog should display. </dd>

<dt><a name="1055862"> </a><code>&larr;  <i><code>categoryIndex</code></i></code></dt>
<dd><a name="1055863"> </a>The index of the category in which the user wants to file the incoming data. </dd>

</dl>

<p><a name="1055864"> </a>If <code>db</code> is valid, the function extracts the category information from the specified database and displays it in a pop-up list. Upon return, the <code>categoryIndex</code> field contains the index of the category the user selected, or <code>dmUnfiledCategory</code> if the user did not select a category. </p>

<p><a name="1055866"> </a>If the call to <code>ExgDoDialog</code> is successful, your application is responsible for retaining the value returned in <code>categoryIndex</code> and using it to file the incoming data as a record in that category. One way to do this is to store the <code>categoryIndex</code> in the socket's <code>appData</code> field (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>) and then extract it from the socket in your response to the launch code <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a>. For example: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
if (cmd == sysAppLaunchCmdExgReceiveData) {<a name="1055874"> </a>
  UInt16 category = <a name="1055875"> </a>
    (ExgSocketPtr)cmdPBP-&gt;appData;<a name="1055876"> </a>
  /* other declarations */<a name="1055877"> </a>
 <a name="1055878"> </a>
/* Receive the data, and create a new record <a name="1055879"> </a>
  using the received data. indexNew is the <a name="1055880"> </a>
  index of this record. */<a name="1055881"> </a>
  if (category !- <code>dmUnfiledCategory</code>) {<a name="1055882"> </a>
    UInt16 attr;<a name="1055883"> </a>
    Err err;<a name="1055884"> </a>
    err = DmRecordInfo(dbP, indexNew, &amp;attr, <a name="1055885"> </a>
      NULL, NULL);<a name="1055886"> </a>
 <a name="1055887"> </a>
    // Set the category to the one the user <a name="1055888"> </a>
    // specified, and mark the record dirty. <a name="1055889"> </a>
    if ((attr &amp; dmRecAttrCategoryMask) != <a name="1055890"> </a>
      category) {<a name="1055891"> </a>
      attr &amp;= ~dmRecAttrCategoryMask;<a name="1055892"> </a>
      attr |= category | dmRecAttrDirty;<a name="1055893"> </a>
      err = DmSetRecordInfo(dbP, indexNew, <a name="1055894"> </a>
        &amp;attr, NULL);<a name="1055895"> </a>
    }<a name="1055896"> </a>
  }<a name="1055897"> </a>
}<a name="1055898"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1055899"> </a>Some of the Palm OS built-in applications (Address Book, Memo, and ToDo) use this method of setting the category on data received through beaming. Refer to the example code for these applications provided in the SDK for a more complete example of how to use <code>ExgDoDialog</code>.</p>

<p><a name="1055900"> </a>When you explicitly call <code>ExgDoDialog</code>, you must set the <code>result</code> field of the <code>sysAppLaunchCmdExgAskUser</code> launch code's parameter block to either <code>exgAskOk</code> (upon success) or <code>exgAskCancel</code> (upon failure) to prevent the system from displaying the dialog a second time. </p>
<h4>
  <a name="1055901"> </a>Compatibility 
</h4>

<p><a name="1055905"> </a>Implemented only if <a href="CompatibilityApdx.html#994671">3.5 New Feature Set</a> is present. </p>

<p><a name="1055906"> </a>Preview mode display in the exchange dialog is implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>

<h3 class="hbH3">
  <a name="1055912"> </a>ExgGet Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055914"> </a>Purpose 
</h4>

<p><a name="1055915"> </a>Establishes a connection and requests an object from a remote device. </p>
<h4>
  <a name="1055916"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055917"> </a></code><h4>
  <a name="1055918"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055919"></a>Err ExgGet (
   ExgSocketType *socketP
)
</pre>
<h4>
  <a name="1055920"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055921"> </a><code>&rarr;  <i>socketP</i></code></dt>
<dd><a name="1055925"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). Specify either a value for the <code>libraryRef</code> field or a URL in the <code>name</code> field. <code>libraryRef</code> should be 0 if the <code>name</code> field contains a URL. The <code>target</code>, <code>type</code>, or <code>name</code> fields should identify the data being requested. </dd>

</dl>
<h4>
  <a name="1055926"> </a>Returns 
</h4>

<p><a name="1055927"> </a>Returns one of the following error codes: </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1055930"> </a><code>errNone</code> </p>
    </td>
    <td><p class="tt"><a name="1055932"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055934"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1055936"> </a>Couldn't find default exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055938"> </a><code>exgErrUserCancel</code> </p>
    </td>
    <td><p class="tt"><a name="1055940"> </a>The user cancelled the operation </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1055942"> </a><code>exgMemError</code> </p>
    </td>
    <td><p class="tt"><a name="1055944"> </a>There is not enough free memory to perform the operation </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1055946"> </a>Other error codes depend on the exchange library. </p>
<h4>
  <a name="1055947"> </a>Comments 
</h4>

<p><a name="1055948"> </a>Applications use this function to request data (initiate a send) from a remote device. Not all exchange libraries support this operation; for example, neither the IR Library nor Bluetooth support it. </p>

<p><a name="1055949"> </a>Before calling this function, the application must initialize the <code>socketP</code> parameter. The socket should identify the exchange library to connect with by providing either a library reference number in the <code>libraryRef</code> field or a URL in the <code>name</code> field. The default exchange library registered for the URL's scheme handles the connection. The socket should also specify what data it is requesting by providing values for at least one of the <code>target</code>, <code>name</code>, and <code>type</code> fields. Specifying the data in the <code>name</code> field is the most common method.</p>

<p><a name="1055950"> </a>To provide users with a choice of transport mechanisms, the application can provide a URL that begins with a question mark (?). The Exchange Manager displays a dialog with a list of all exchange libraries that respond to URLs of the specified type. If only one exchange library is registered for this URL scheme, no dialog is displayed. </p>

<p><a name="1055951"> </a>If the library is not specified by either URL or library reference number, the Exchange Manager by default uses the IR Library; however, if the <code>localMode</code> flag is set, the Local Exchange Library is used instead. </p>

<p><a name="1055953"> </a>Applications can use <code>ExgGet</code> to initiate a send from the Local Exchange Library. For more information, see <a href="../PalmOSCompanion2/ExchangeManagerConcept.html#996950">"Sending and Receiving Locally"</a> of the <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. </p>

<p><a name="1055960"> </a>If no error is returned, applications should follow this call with one or more calls to <a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a>, to receive the data, or <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a>, to disconnect. </p>
<h4>
  <a name="1055969"> </a>Compatibility 
</h4>

<p><a name="1055973"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1055974"> </a>See Also 
</h4>

<p><a name="1055981"> </a><a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>, <a href="ExchangeManager.html#1055367"><code>ExgConnect()</code></a></p>

<h3 class="hbH3">
  <a name="1055984"> </a>ExgGetDefaultApplication Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1055986"> </a>Purpose 
</h4>

<p><a name="1055987"> </a>Retrieves the default application for the specified type of data or the default exchange library for URLs with the specified scheme. </p>
<h4>
  <a name="1055988"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1055989"> </a></code><h4>
  <a name="1055990"> </a>Prototype 
</h4>
<pre class="proto"><a name="1055991"></a>Err ExgGetDefaultApplication (
   UInt32 *creatorIDP,
   UInt16 id,
   const Char *dataTypeP
)
</pre>
<h4>
  <a name="1055992"> </a>Parameters 
</h4>

<dl>
<dt><a name="1055993"> </a><code>&larr;  <i><code>creatorIDP</code></i></code></dt>
<dd><a name="1055994"> </a>A pointer to the creator ID of the default application or default exchange library. </dd>

<dt><a name="1055995"> </a><code>&rarr;  <i><code>id</code></i></code></dt>
<dd><a name="1055996"> </a>The registry ID constant identifying the type of data in <code>dataTypeP</code>. See <a href="ExchangeManager.html#1055147">Registry ID Constants</a>.</dd>

<dt><a name="1056000"> </a><code>&rarr;  <i><code>dataTypeP</code></i></code></dt>
<dd><a name="1056001"> </a>A pointer to a string that contains the type of data for which to retrieve the default application or library. If <code>dataTypeP</code> is a file extension, do not include the period (.). If it is a URL, do not include the colon (:).</dd>

</dl>
<h4>
  <a name="1056002"> </a>Returns 
</h4>

<p><a name="1056003"> </a>Returns <code>errNone</code> if a match was found or <code>exgErrNoKnownTarget</code> if there is no default application or library for this type of data. </p>
<h4>
  <a name="1056005"> </a>Comments 
</h4>

<p><a name="1056006"> </a>You might use this function to see which application on this device will receive a particular type of data or to see which library on this device handles URLs of a particular scheme. </p>

<p><a name="1056007"> </a>For example, to find out which application receives TXT files on this device, do the following: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
UInt32 creatorID;<a name="1056008"> </a>
Err error;<a name="1056009"> </a>
error = ExgGetDefaultApplication(&amp;creatorID, <a name="1056010"> </a>
  <code>exgRegExtensionID, "TXT");</code><a name="1056012"> </a>
if (!error) {<a name="1056013"> </a>
    //creatorID contains default application.<a name="1056014"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1056015"> </a>To find out which exchange library handles URLs that use the beam prefix, do the following: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
UInt32 creatorID;<a name="1056016"> </a>
Err error;<a name="1056017"> </a>
error = ExgGetDefaultApplication(&amp;creatorID, <a name="1056018"> </a>
  <code>exgRegSchemeID, exgBeamScheme);</code><a name="1056020"> </a>
if (!error) {<a name="1056021"> </a>
    //creatorID contains default library.<a name="1056022"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1056023"> </a>It's possible to have several applications registered to receive the same type of data, but none of them is the default. When the Exchange Manager receives an object of that type, it selects an application to receive the data, and it selects that same application every time. The selected application effectively becomes the default for the data type even though it is not explicitly set as the default. If this is the case, the <code>ExgGetDefaultApplication</code> function returns the creator ID of this de-facto default application. </p>
<h4>
  <a name="1056024"> </a>Compatibility 
</h4>

<p><a name="1056028"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056029"> </a>See Also 
</h4>

<p><a name="1056035"> </a><a href="ExchangeManager.html#1056045"><code>ExgGetRegisteredApplications()</code></a>, <a href="ExchangeManager.html#1056103"><code>ExgGetRegisteredTypes()</code></a>, <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a>, <a href="ExchangeManager.html#1056868"><code>ExgSetDefaultApplication()</code></a></p>

<h3 class="hbH3">
  <a name="1056045"> </a>ExgGetRegisteredApplications Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056047"> </a>Purpose 
</h4>

<p><a name="1056048"> </a>Retrieves a list of all applications registered to receive data of a specified type.</p>
<h4>
  <a name="1056049"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056050"> </a></code><h4>
  <a name="1056051"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056052"></a>Err ExgGetRegisteredApplications (
   UInt32 **creatorIDsP,
   UInt32 *numAppsP,
   Char **namesP,
   Char **descriptionsP,
   UInt16 id,
   const Char *dataTypeP
)
</pre>
<h4>
  <a name="1056053"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056054"> </a><code>&larr;  <i>creatorIDsP</i></code></dt>
<dd><a name="1056055"> </a>An array of the creator IDs of the applications registered to receive objects of this type. Pass <code>NULL</code> for this parameter if you only want to know how many applications are registered for this type. </dd>

<dt><a name="1056056"> </a><code>&larr;  <i>numAppsP</i></code></dt>
<dd><a name="1056057"> </a>The number of applications registered to receive objects of this type. This is the number of elements in the <code>creatorIDsP</code> array, the <code>namesP</code> array, and the <code>descriptionsP</code> array. </dd>

<dt><a name="1056058"> </a><code>&larr;  <i>namesP</i></code></dt>
<dd><a name="1056059"> </a>A packed list of strings, suitable for passing to <a href="SystemManager.html#1076316"><code>SysFormPointerArrayToStrings()</code></a>, containing the names of the applications or libraries. Each string is no more than <code>exgMaxTitleLen</code> characters. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1056065"> </a><code>&larr;  <i>descriptionsP</i></code></dt>
<dd><a name="1056066"> </a>A packed list of strings, suitable for passing to <code>SysFormPointerArrayToStrings</code>, containing the descriptions of the applications or libraries. Descriptions are specified when the applications or libraries register for data. Each string is no more than <code>exgMaxDescriptionLength</code> characters. Pass <code>NULL</code> for this parameter if you don't want to retrieve it. </dd>

<dt><a name="1056068"> </a><code>&rarr;  <i><code>id</code></i></code></dt>
<dd><a name="1056069"> </a>The registry ID constant identifying the type of data in <code>dataTypeP</code>. See <a href="ExchangeManager.html#1055147">Registry ID Constants</a>.</dd>

<dt><a name="1056073"> </a><code>&rarr;  <i><code>dataTypesP</code></i></code></dt>
<dd><a name="1056074"> </a>A pointer to a tab-delimited, null-terminated string listing the items to register. (Use <code>\t </code>for the tab character.) Each item in the string must be no more than <code>exgMaxTypeLength</code> characters. There can be no more than 16 types total. </dd>

</dl>
<h4>
  <a name="1056076"> </a>Returns 
</h4>

<p><a name="1056077"> </a>Returns <code>errNone</code> upon success or <code>exgMemError</code> if the function cannot allocate space for the creator IDs, names, or descriptions. </p>

<div><hr>
  <a name="1056078"> </a> <b>IMPORTANT: </b> This function allocates enough space for the <code>creatorIDsP</code>, <code>namesP</code>, and <code>descriptionsP</code> arrays as long as you do not pass <code>NULL</code> for the parameters. You are still responsible for freeing these arrays. 
<hr>
</div>
<h4>
  <a name="1056079"> </a>Comments 
</h4>

<p><a name="1056080"> </a>You might use this function to see which applications on this device can receive a particular type of data or to see which libraries on this device handle URLs of a particular scheme. You can also use it to built a list of choices from which the user can select a default application or default exchange library for a particular data type or URL scheme. For example, iMessenger uses this function to build a list of mailto handlers so that the user can choose one of them to be the default. </p>

<p><a name="1056081"> </a>The Exchange Manager itself uses <code>ExgGetRegisteredApplications</code> to find exchange libraries when it is given a URL that begins with a question mark (?). It displays the returned list to the user in the Send With dialog. </p>
<h4>
  <a name="1056082"> </a>Compatibility 
</h4>

<p><a name="1056086"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056087"> </a>See Also 
</h4>

<p><a name="1056093"> </a><a href="ExchangeManager.html#1055984"><code>ExgGetDefaultApplication()</code></a>, <a href="ExchangeManager.html#1056103"><code>ExgGetRegisteredTypes()</code></a>, <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a>, <a href="ExchangeManager.html#1056868"><code>ExgSetDefaultApplication()</code></a></p>

<h3 class="hbH3">
  <a name="1056103"> </a>ExgGetRegisteredTypes Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056105"> </a>Purpose 
</h4>

<p><a name="1056106"> </a>Retrieve a list of all data types for which a registration exists. </p>
<h4>
  <a name="1056107"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056108"> </a></code><h4>
  <a name="1056109"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056110"></a>Err ExgGetRegisteredTypes (
   Char **dataTypesP,
   UInt32 *sizeP,
   UInt16 id
)
</pre>
<h4>
  <a name="1056111"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056112"> </a><code>&larr;  <i><code>dataTypesP</code></i></code></dt>
<dd><a name="1056113"> </a>A packed list of strings, suitable for passing to <a href="SystemManager.html#1076316"><code>SysFormPointerArrayToStrings()</code></a>, containing a sorted list of data types for which a registration exists. Each string is no more than <code>exgMaxTypeLength</code> characters. </dd>

<dt><a name="1056119"> </a><code>&larr;  <i><code>sizeP</code></i></code></dt>
<dd><a name="1056120"> </a>The number of elements in the <code>dataTypesP</code> array. </dd>

<dt><a name="1056121"> </a><code>&rarr;  <i><code>id</code></i></code></dt>
<dd><a name="1056122"> </a>The type of data to search for. For example, you can search for all registered creator IDs, all registered MIME types, and so on. </dd>

</dl>
<h4>
  <a name="1056123"> </a>Returns 
</h4>

<p><a name="1056125"> </a>Returns <code>errNone</code> upon success or <code>exgMemError</code> if the function cannot allocate space for the data types array. </p>

<div><hr>
  <a name="1056126"> </a> <b>IMPORTANT: </b> This function allocates enough space for the <code>dataTypesP</code> array as long as you do not pass <code>NULL</code> for the parameter. You are still responsible for freeing this array. 
<hr>
</div>
<h4>
  <a name="1056127"> </a>Comments 
</h4>

<p><a name="1056128"> </a>This function could be used to create an application that allows users to choose the default application for each data type. </p>
<h4>
  <a name="1056129"> </a>Compatibility 
</h4>

<p><a name="1056133"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056134"> </a>See Also 
</h4>

<p><a name="1056140"> </a><a href="ExchangeManager.html#1055984"><code>ExgGetDefaultApplication()</code></a>, <a href="ExchangeManager.html#1056045"><code>ExgGetRegisteredApplications()</code></a>, <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a>, <a href="ExchangeManager.html#1056868"><code>ExgSetDefaultApplication()</code></a></p>

<h3 class="hbH3">
  <a name="1056150"> </a>ExgGetTargetApplication Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056152"> </a>Purpose 
</h4>

<p><a name="1056153"> </a>Retrieves the application that should receive a specific message. This function does not search for libraries. </p>
<h4>
  <a name="1056154"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056155"> </a></code><h4>
  <a name="1056156"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056157"></a>Err ExgGetTargetApplication (
   ExgSocketType *socketP,
   Boolean unwrap,
   UInt32 *creatorIDP,
   Char *descriptionP,
   UInt32 descriptionSize
)
</pre>
<h4>
  <a name="1056158"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056159"> </a><code>&rarr;  <i>socketP</i></code></dt>
<dd><a name="1056163"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). The structure should contain values for the <code>target</code>, <code>type</code>, or <code>name</code> fields. </dd>

<dt><a name="1056164"> </a><code>&rarr;  <i><code>unwrap</code></i></code></dt>
<dd><a name="1056165"> </a>If <code>true</code>, only an application that registered to receive the data type with the <code>exgUnwrap</code> flag set should be the target application. If <code>false</code>, the target application should be an application that registered with the <code>exgUnwrap</code> flag clear. </dd>

<dt><a name="1056166"> </a><code>&larr;  <i><code>creatorIDP</code></i></code></dt>
<dd><a name="1056167"> </a>The creator ID of the application that should receive this object. </dd>

<dt><a name="1056168"> </a><code>&harr;  <i><code>descriptionP</code></i></code></dt>
<dd><a name="1056169"> </a>The application's description from the registry, if any. </dd>

<dt><a name="1056170"> </a><code>&rarr;  <i><code>descriptionSize</code></i></code></dt>
<dd><a name="1056171"> </a>The size of the <code>descriptionP</code> buffer. </dd>

</dl>
<h4>
  <a name="1056172"> </a>Returns 
</h4>

<p><a name="1056173"> </a>Returns one of the following error codes: </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1056176"> </a><code>errNone</code> </p>
    </td>
    <td><p class="tt"><a name="1056178"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056180"> </a><code>exgErrTargetMissing </code></p>
    </td>
    <td><p class="tt"><a name="1056182"> </a>The <code>target</code> field contains a creator ID, but the application with that creator ID does not exist </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056185"> </a><code>exgErrNoKnownTarget</code> </p>
    </td>
    <td><p class="tt"><a name="1056187"> </a>No application is registered to receive the data type </p>
    </td>
  </tr>
</table>

</div>

<h4>
  <a name="1056189"> </a>Comments 
</h4>

<p><a name="1056190"> </a>The Exchange Manager uses this function to determine which application should be launched to receive incoming data. Applications and libraries may call this function as well. </p>

<p><a name="1056191"> </a><code>ExgGetTargetApplication</code> determines the target application by doing the following: </p>
<ul type="disc">
  <li><a name="1056192"> </a>If the <code>socketP-&gt;target</code> field contains a creator ID, the Exchange Manager searches the registry to see if an application is registered for that creator ID as the default application. If the registry does not contain an entry for the creator ID, it checks to see if the application identified by the creator ID is installed on this device. If an application is found for the <code>target</code>, that is the application returned. 
  <li><a name="1056193"> </a>If the <code>socketP-&gt;type</code> field contains a MIME type, the Exchange Manager searches the registry for an application registered to receive objects of that type. If one is found, that is the application returned. 
  <li><a name="1056194"> </a>If the <code>socketP-&gt;name</code> field contains a period (.), the portion after the last period is taken to be the file extension. The Exchange Manager searches the registry for an application registered to receive a file with the specified extension. If one is found, that is the application returned. If not, <code>exgErrNoKnownTarget</code> is returned. 
</ul>

<p><a name="1056196"> </a>If more than one application is registered for the target, type, or file extension, this function returns the one that is registered as the default. If no application is registered as the default, then a specific application is chosen. The Exchange Manager chooses this same application each time. That is, each time a file with a TXT extension is sent with no target or MIME type specified, the <code>ExgGetTargetApplication</code> returns the same application to handle the receipt. </p>

<p><a name="1056197"> </a>Set the <code>unwrap</code> parameter to <code>true</code> if the object was sent as part of another object, such as a vStock object that was sent as an attachment to an e-mail message. In this case, the Exchange Manager searches for an application that registered to receive the target, the type, or the file extension of the vStock object with the <code>exgUnwrap</code> flag set. If an application is found, the vStock object is delivered, and the exchange library should discard the object that contained it (the e-mail message). If there is no application registered to receive the data with the <code>exgUnwrap</code> flag set, this function returns <code>exgErrNoKnownTarget</code>. In this case, the exchange library should call <a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a> again passing the entire e-mail message instead of just the vStock attachment. </p>
<h4>
  <a name="1056203"> </a>Compatibility 
</h4>

<p><a name="1056207"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056208"> </a>See Also 
</h4>

<p><a name="1056215"> </a><a href="ExchangeManager.html#1056868"><code>ExgSetDefaultApplication()</code></a>, <a href="ExchangeManager.html#1056284"><code>ExgNotifyPreview()</code></a>, <a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a>, <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a></p>

<h3 class="hbH3">
  <a name="1056225"> </a>ExgNotifyGoto Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056227"> </a>Purpose 
</h4>

<p><a name="1056232"> </a>Launches the target application using <a href="AppLaunchCodes.html#1012140"><code>sysAppLaunchCmdGoTo</code></a>. </p>
<h4>
  <a name="1056233"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056234"> </a></code><h4>
  <a name="1056235"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056236"></a>Err ExgNotifyGoto (
   ExgSocketType *socketP,
   UInt16 flags
)
</pre>
<h4>
  <a name="1056237"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056238"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1056239"> </a>A socket identifying the object to deliver (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). The <code>goToCreator</code> field contains the application to be launched, and the <code>goToParams</code> field contains data for the launch code's parameter block. </dd>

<dt><a name="1056243"> </a><code>&rarr;  <i><code>flags</code></i></code></dt>
<dd><a name="1056244"> </a>Not currently used. Pass 0 for this parameter. </dd>

</dl>
<h4>
  <a name="1056245"> </a>Returns 
</h4>

<p><a name="1056246"> </a>Returns one of the following error codes: </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1056249"> </a><code>errNone</code> </p>
    </td>
    <td><p class="tt"><a name="1056251"> </a>Success or the <code>goToCreator</code> field is empty </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056253"> </a><code>dmErr...</code> (one of the data manager error codes)</p>
    </td>
    <td><p class="tt"><a name="1056255"> </a>The specified application could not be found</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056257"> </a><code>memErrNotEnoughSpace </code></p>
    </td>
    <td><p class="tt"><a name="1056259"> </a>Not enough memory available to create the launch code's parameter block</p>
    </td>
  </tr>
</table>

</div>

<h4>
  <a name="1056261"> </a>Comments 
</h4>

<p><a name="1056262"> </a>Exchange libraries call this function if they want to support immediate display of the received object. Applications do not call this function. </p>

<p><a name="1056263"> </a>Most exchange libraries should call <code>ExgNotifyGoto</code> after the return from <a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a> so that the user can inspect the newly received data. If the exchange library is most often used by a single application that does not require the launch code, this call to <code>ExgNotifyGoto</code> can be skipped. For example, the SMS Library does not call <code>ExgNotifyGoto</code>. SMS messages are received by the SMS Messenger application, which does not launch upon receiving data. </p>

<p><a name="1056268"> </a><code>ExgNotifyGoto</code> only launches an application if one is specified in the <code>goToCreator</code> field and the <code>noGoTo</code> parameter is <code>false</code>. If a <code>goToCreator</code> is not specified, it is not considered an error. This gives the application a way to override the default behavior. </p>
<h4>
  <a name="1056269"> </a>Compatibility 
</h4>

<p><a name="1056273"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056274"> </a>See Also 
</h4>

<p><a name="1056281"> </a><a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a>, <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a></p>

<h3 class="hbH3">
  <a name="1056284"> </a>ExgNotifyPreview Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056286"> </a>Purpose 
</h4>

<p><a name="1056287"> </a>Displays a preview in the exchange dialog of the data to be received. </p>
<h4>
  <a name="1056288"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056289"> </a></code><h4>
  <a name="1056290"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056291"></a>Err ExgNotifyPreview (
   ExgPreviewInfoType *infoP
)
</pre>
<h4>
  <a name="1056292"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056293"> </a><code>&harr;  <i><code>infoP</code></i></code></dt>
<dd><a name="1056298"> </a>An <a href="ExchangeManager.html#1054900"><code>ExgPreviewInfoType</code></a> structure containing information about the preview operation. </dd>

</dl>
<h4>
  <a name="1056299"> </a>Returns 
</h4>

<p><a name="1056300"> </a>Returns one of the following error codes: </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1056303"> </a><code>errNone</code> </p>
    </td>
    <td><p class="tt"><a name="1056305"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056308"> </a><code>exgErrNotSupported </code></p>
    </td>
    <td><p class="tt"><a name="1056310"> </a>The exchange library doesn't support preview mode </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056313"> </a><code>exgErrNoKnownTarget</code> </p>
    </td>
    <td><p class="tt"><a name="1056315"> </a>There is no application registered to receive the type of object </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1056317"> </a>Other error codes depend on the application. </p>
<h4>
  <a name="1056318"> </a>Comments 
</h4>

<p><a name="1056319"> </a>This function performs the preview operation specified in the <code>op</code> field of the <code>infoP</code> parameter. The <a href="ExchangeManager.html#1055807"><code>ExgDoDialog()</code></a> function calls this function to show a data preview in the exchange dialog. Exchange libraries might want to call this function in certain circumstances. An application rarely calls this function, but it may do so if it displays its own dialog in response to the launch code <a href="AppLaunchCodes.html#1011831"><code>sysAppLaunchCmdExgAskUser</code></a>. </p>

<p><a name="1056332"> </a><code>ExgNotifyPreview</code> uses <a href="ExchangeManager.html#1056150"><code>ExgGetTargetApplication()</code></a> to determine the appropriate target application for this data and then launches that application with the launch code <a href="AppLaunchCodes.html#1011910"><code>sysAppLaunchCmdExgPreview</code></a>, passing <code>infoP</code> as the parameter block. The application responds to this launch code by accepting the connection, receiving the data from the exchange library, and depending on the operation requested, drawing the data into the <code>infoP-&gt;bounds</code> rectangle or returning it in the <code>infoP-&gt;string</code> field, and then disconnecting. The <code>ExgDoDialog</code> function uses the returned information to draw the preview portion of the dialog. </p>

<p><a name="1056337"> </a>If the preview data is a string, the <code>ExgNotifyPreview</code> provides a series of fallback strings that are used if the exchange library doesn't support preview or the application doesn't respond to the launch code. If the application fails to return a string, this function provides one of the following: </p>
<ul type="disc">
  <li><a name="1056338"> </a>the data's description from <code>socketP-&gt;description</code> 
  <li><a name="1056339"> </a>the filename in <code>socketP-&gt;name</code> 
  <li><a name="1056340"> </a>the target application's description as stored in the exchange registry 
  <li><a name="1056341"> </a>the MIME type in <code>socketP-&gt;type</code> 
  <li><a name="1056342"> </a>the file extension in <code>socketP-&gt;name</code>
</ul>
<h4>
  <a name="1056343"> </a>Compatibility 
</h4>

<p><a name="1056347"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056348"> </a>See Also 
</h4>

<p><a name="1056355"> </a><a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a>, <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> </p>

<h3 class="hbH3">
  <a name="1056358"> </a>ExgNotifyReceive Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056360"> </a>Purpose 
</h4>

<p><a name="1056361"> </a>Delivers an object to the appropriate application using the registry. </p>
<h4>
  <a name="1056362"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056363"> </a></code><h4>
  <a name="1056364"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056365"></a>Err ExgNotifyReceive (
   ExgSocketType *socketP,
   UInt16 flags
)
</pre>
<h4>
  <a name="1056366"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056367"> </a><code>&harr;  <i>socketP</i></code></dt>
<dd><a name="1056371"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). </dd>

<dt><a name="1056372"> </a><code>&rarr;  <i><code>flags</code></i></code></dt>
<dd><a name="1056373"> </a>A bit field. Pass 0 or a combination of the following constants (OR the constants together to specify more than one): </dd>

<dl>
<dt><a name="1056375"> </a><code><code>exgUnwrap</code> </code></dt>
<dd><a name="1056376"> </a>The object being delivered should only be handled by an application that registered to receive it with the <code>exgUnwrap</code> flag set.</dd>

<dt><a name="1056379"> </a><code><code>exgNoAsk</code> </code></dt>
<dd><a name="1056380"> </a>Do not ask the user to confirm receipt of data. If this constant is passed, the target application does not receive the <a href="AppLaunchCodes.html#1011831"><code>sysAppLaunchCmdExgAskUser</code></a> launch code, and the Exchange Manager does not call <a href="ExchangeManager.html#1055807"><code>ExgDoDialog()</code></a> to display the user confirmation dialog. </dd>

<dt><a name="1056390"> </a><code><code>exgGet</code> </code></dt>
<dd><a name="1056391"> </a>Specifies that this is a request for the application to send data rather than to receive data. </dd>

</dl>
</dl>
<h4>
  <a name="1056392"> </a>Returns 
</h4>

<p><a name="1056393"> </a>Returns one of the following error codes: </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1056396"> </a><code>errNone</code> </p>
    </td>
    <td><p class="tt"><a name="1056398"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056400"> </a><code>exgErrTargetMissing </code></p>
    </td>
    <td><p class="tt"><a name="1056402"> </a>The <code>target</code> field contains a creator ID, but the application with that creator ID does not exist </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056405"> </a><code>exgErrNoKnownTarget</code> </p>
    </td>
    <td><p class="tt"><a name="1056407"> </a>No application is registered to receive the data type </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056409"> </a><code>exgErrUserCancel</code> </p>
    </td>
    <td><p class="tt"><a name="1056411"> </a>The user cancelled the operation </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1056413"> </a>Other error codes depend on the application that is launched. </p>
<h4>
  <a name="1056414"> </a>Comments 
</h4>

<p><a name="1056415"> </a>Exchange libraries call this function to initiate a receive operation on the receiving device. Applications do not call this function. </p>

<p><a name="1056416"> </a>The <code>ExgNotifyReceive</code> function uses <a href="ExchangeManager.html#1056150"><code>ExgGetTargetApplication()</code></a> to determine which application should receive the data, then sends that application the appropriate launch codes. </p>

<p><a name="1056421"> </a>If the <code>flags</code> parameter is 0, a receive operation is assumed. The <code>ExgNotifyReceive</code> function does the following: </p>
<ol type="1">
  <li value="1"><a name="1056422"> </a>It sends the application the <a href="AppLaunchCodes.html#1011831"><code>sysAppLaunchCmdExgAskUser</code></a> launch code. 
  <li value="2"><a name="1056426"> </a>If the application returns <code>exgAskDialog</code> or does not respond to the launch code, it calls <a href="ExchangeManager.html#1055807"><code>ExgDoDialog()</code></a>, which sends the application the <a href="AppLaunchCodes.html#1011910"><code>sysAppLaunchCmdExgPreview</code></a> launch code to have the application receive preview data for the dialog. 
  <li value="3"><a name="1056433"> </a>It sends the application the <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a> launch code to tell the application to receive the data. 
</ol>

<p><a name="1056437"> </a>If the <code>flags</code> field contains the <code>exgNoAsk</code> flag, the first and second steps are skipped. </p>

<p><a name="1056438"> </a>If the <code>flags</code> field contains <code>exgGet</code>, this function is a request for data to send to the remote device, not a request to receive data from the remote device. In this case, <code>ExgNotifyReceive</code> launches the target application with the <a href="AppLaunchCodes.html#1011877"><code>sysAppLaunchCmdExgGetData</code></a> launch code. </p>

<p><a name="1056443"> </a>If the <code>flags</code> field has the <code>exgUnwrap</code> bit set, it means that the object to be received was sent as part of another object, and it should only be sent to an application that registered to receive it with the <code>exgUnwrap</code> flag set. For example, if the exchange library receives an e-mail message with an attached vStock object, the exchange library may call <code>ExgNotifyReceive</code> with the <code>exgUnwrap</code> flag set and a socket that describes the vStock data type to see if there is an application that registered to receive it directly. If no application is registered to receive vStock objects with the <code>exgUnwrap</code> flag set, <code>ExgNotifyReceive</code> returns <code>exgErrNoKnownTarget</code>. The exchange library should then call <code>ExgNotifyReceive</code> again, but this time without the <code>exgUnwrap</code> flag and with a socket that describes the e-mail message data type. This second call sends the object to the application registered to receive the e-mail message rather than its vStock attachment. That application may extract the vStock attachment from the message and use the Local Exchange Library to send it to an application registered to receive vStock objects normally (without the <code>exgUnwrap</code> flag). </p>
<h4>
  <a name="1056446"> </a>Compatibility 
</h4>

<p><a name="1056450"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present. <code>ExgNotifyReceive</code> was a system use only function until the release of Palm OS 4.0. </p>

<p><a name="1056454"> </a>If the <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is <i>not</i> present, the <code>flags</code> parameter is not supported, so libraries cannot suppress the exchange dialog, send objects with attachments, or perform a get operation. These features are all added in the <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a>. Also, if the 4.0 new feature set is not present, this function performs the equivalent of <a href="ExchangeManager.html#1056225"><code>ExgNotifyGoto()</code></a> after the application has returned from receiving data. Exchange libraries wishing to support this functionality should call <code>ExgNotifyGoto</code> immediately after calling <code>ExgNotifyReceive</code>. </p>
<h4>
  <a name="1056462"> </a>See Also 
</h4>

<p><a name="1056466"> </a><a href="ExchangeManager.html#1056284"><code>ExgNotifyPreview()</code></a></p>

<h3 class="hbH3">
  <a name="1056469"> </a>ExgPut Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056471"> </a>Purpose 
</h4>

<p><a name="1056472"> </a>Initiates the transfer of data to the destination device.</p>
<h4>
  <a name="1056473"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056474"> </a></code><h4>
  <a name="1056475"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056476"></a>Err ExgPut (
   ExgSocketType *socketP
)
</pre>
<h4>
  <a name="1056477"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056478"> </a><code>&rarr;  <i>socketP</i></code></dt>
<dd><a name="1056482"> </a>Pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). Specify either a value for the <code>libraryRef</code> field or a URL in the <code>name</code> field. <code>libraryRef</code> should be 0 if the <code>name</code> field contains a URL. The structure should also contain a value for the <code>target</code>, <code>type</code>, or <code>name</code> field. </dd>

</dl>
<h4>
  <a name="1056483"> </a>Returns 
</h4>

<p><a name="1056484"> </a>Returns one of the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1056487"> </a><code>errNone</code></p>
    </td>
    <td><p class="tt"><a name="1056489"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056491"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1056493"> </a>Couldn't find default exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056495"> </a><code>exgMemError</code></p>
    </td>
    <td><p class="tt"><a name="1056497"> </a>Not enough memory to initialize transfer</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056499"> </a><code>exgErrNotEnoughPower</code> </p>
    </td>
    <td><p class="tt"><a name="1056501"> </a>The battery does not have enough power to perform the operation </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1056503"> </a>Other error codes depend on the exchange library. </p>
<h4>
  <a name="1056504"> </a>Comments 
</h4>

<p><a name="1056505"> </a>Applications call this function to start a send operation. </p>

<p><a name="1056506"> </a>If the connection does not already exist, this function establishes one. You must create and initialize an <code>ExgSocketType</code> structure containing information about the data to send and the destination application. All unused fields in the structure <i>must</i> be set to 0. </p>

<p><a name="1056511"> </a>If no error is returned, this call <i>must</i> be followed by <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a>, to begin sending data, or <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a>, to disconnect. You may need to call <code>ExgSend</code> multiple times to send all the data.</p>

<p><a name="1056516"> </a>The socket's <code>libraryRef</code> field or the <code>name</code> field must identify the library that performs the transfer. The <code>libraryRef</code> field identifies the exchange library by its library reference number. The <code>name</code> field identifies the library by URL. The socket should also specify what data is being sent by providing values for at least one of the <code>target</code>, <code>name</code>, and <code>type</code> fields. Use of the <code>name</code> field is the most common method.</p>

<p><a name="1056517"> </a>To provide users with a choice of transport mechanisms, the application can provide a URL that begins with a question mark (?). The Exchange Manager displays a dialog with a list of all exchange libraries that respond to URLs of the specified type. If only one exchange library is registered for this URL scheme, no dialog is displayed. </p>

<p><a name="1056518"> </a>For example, many applications on Palm OS 4.0 or higher support a Send command. This command generates a URL with the prefix <code>exgSendPrefix</code> (see <a href="ExchangeManager.html#1055235">Predefined URL Prefixes</a>). The Exchange Manager displays a dialog containing a list of libraries registered for that URL scheme. The user selects an exchange library, and that library's <code>ExgLibSend</code> function is called. </p>

<p><a name="1056522"> </a>If the library is not specified by either URL or library reference number, the Exchange Manager by default uses the IR Library; however, if the <code>localMode</code> flag is set, the Local Exchange Library is used instead. </p>
<h4>
  <a name="1056523"> </a>Compatibility 
</h4>

<p><a name="1056527"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<p><a name="1056528"> </a>Support for identifying exchange libraries by URL is implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. </p>
<h4>
  <a name="1056532"> </a>See Also 
</h4>

<p><a name="1056542"> </a><a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a>, <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a>, <a href="ExchangeManager.html#1055367"><code>ExgConnect()</code></a></p>

<h3 class="hbH3">
  <a name="1056545"> </a>ExgReceive Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056547"> </a>Purpose 
</h4>

<p><a name="1056548"> </a>Receives data from a remote device.</p>
<h4>
  <a name="1056549"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056550"> </a></code><h4>
  <a name="1056551"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056552"></a>UInt32 ExgReceive (
   ExgSocketType *socketP,
   void *bufP,
   UInt32 bufLen,
   Err *err
)
</pre>
<h4>
  <a name="1056553"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056554"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1056558"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). </dd>

<dt><a name="1056559"> </a><code>&larr;  <i><code>bufP</code></i></code></dt>
<dd><a name="1056560"> </a>A pointer to the buffer in which to receive the data.</dd>

<dt><a name="1056561"> </a><code>&rarr;  <i><code>bufLen</code></i></code></dt>
<dd><a name="1056562"> </a>The number of bytes to receive.</dd>

<dt><a name="1056563"> </a><code>&larr;  <i><code>err</code></i></code></dt>
<dd><a name="1056564"> </a>A pointer to an error code result. </dd>

</dl>
<h4>
  <a name="1056565"> </a>Returns 
</h4>

<p><a name="1056566"> </a>Returns the number of bytes actually received. A zero result indicates the end of the transmission. </p>

<p><a name="1056567"> </a>An error code is returned in the address indicated by <code>err</code>. The error code <code>exgErrUserCancel</code> is returned if the user cancels the operation. The error code <code>exgErrNotSupported</code> is returned if the application calls this function during a preview and the exchange library does not have any more data available or does not support preview. </p>

<p><a name="1056568"> </a>May display a fatal error message if the library reference number is not provided in <code>socketP</code>. </p>
<h4>
  <a name="1056569"> </a>Comments 
</h4>

<p><a name="1056570"> </a>Applications call this function in the following circumstances: </p>
<ul type="disc">
  <li><a name="1056575"> </a>In response to the <a href="AppLaunchCodes.html#1011991"><code>sysAppLaunchCmdExgReceiveData</code></a> launch code, following a successful call to <a href="ExchangeManager.html#1055291"><code>ExgAccept()</code></a>. 
  <li><a name="1056584"> </a>In response to the <a href="AppLaunchCodes.html#1011910"><code>sysAppLaunchCmdExgPreview</code></a> launch code, following a successful call to <code>ExgAccept</code>. 
  <li><a name="1056585"> </a>To receive requested data following a successful call to <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a>. 
</ul>

<p><a name="1056594"> </a>After receiving the data, applications call <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> to terminate the connection.</p>

<p><a name="1056595"> </a>This function blocks the application until the end of the transmission or until the requested number of bytes has been received. However, exchange libraries can provide their own user interface that is shown during this call, is updated as necessary, and allows the user to cancel the operation in progress. </p>
<h4>
  <a name="1056596"> </a>Compatibility 
</h4>

<p><a name="1056600"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present. Preview mode and <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a> are only supported if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1056608"> </a>See Also 
</h4>

<p><a name="1056612"> </a><a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a></p>

<h3 class="hbH3">
  <a name="1056615"> </a>ExgRegisterDatatype Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056617"> </a>Purpose 
</h4>

<p><a name="1056618"> </a>Registers an application to receive a specific type of data, or registers an exchange library to handle specific URL schemes.</p>
<h4>
  <a name="1056619"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056620"> </a></code><h4>
  <a name="1056621"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056622"></a>Err ExgRegisterDatatype (
   UInt32 creatorID,
   UInt16 id,
   const Char *dataTypesP,
   const Char *descriptionsP,
   UInt16 flags
)
</pre>
<h4>
  <a name="1056623"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056624"> </a><code>&rarr;  <i><code>creatorID</code></i></code></dt>
<dd><a name="1056625"> </a>The creator ID of the registering application or exchange library.</dd>

<dt><a name="1056626"> </a><code>&rarr;  <i><code>id</code></i></code></dt>
<dd><a name="1056627"> </a>A registry ID constant identifying the type of the items being registered. See <a href="ExchangeManager.html#1055147">Registry ID Constants</a>.</dd>

<dt><a name="1056631"> </a><code>&rarr;  <i><code>dataTypesP</code></i></code></dt>
<dd><a name="1056632"> </a>Pointer to a tab-delimited, null-terminated string listing the items to register. (Use <code>"\t"</code> for the tab character.) To unregister, pass a <code>NULL</code> value. Each item in the string must be no more than <code>exgMaxTypeLength</code> characters. There can be no more than 16 types total. </dd>

</dl>

<div><hr>
  <a name="1056634"> </a> <b>NOTE: </b> If specifying file extensions, do not include the period (.) that precedes the extension. If specifying URL prefixes, do not include the colon (:) at the end of the prefix. 
<hr>
</div>

<dl>
<dt><a name="1056635"> </a><code>&rarr;  <i><code>descriptionsP</code></i></code></dt>
<dd><a name="1056636"> </a>Pointer to a tab-delimited, null-terminated string that lists descriptions for the items in the <code>dataTypesP</code> parameter. (Use <code>"\t"</code> for the tab character.) Each description must be no longer than <code>exgMaxDescriptionLength</code>. Pass <code>NULL</code> to leave out the descriptions. </dd>

<dd><a name="1056638"> </a>There must either be one description for all types or the number of descriptions must match the number of types.</dd>

<dd><a name="1056639"> </a>The descriptions are used in dialogs displayed by Exchange Manager to identify applications or libraries. </dd>

<dt><a name="1056640"> </a><code>&rarr;  <i><code>flags</code></i></code></dt>
<dd><a name="1056641"> </a>A bit field specifying registration options. Currently, only one bit is used: the unwrap bit. Pass the <code>exgUnwrap</code> constant to specify that the application is registering to receive objects of this type directly if the object is sent as part of another object. For example, if a vStock object is sent as an attachment to an email message, the Exchange Manager should send the vStock object to this application directly rather than sending the message to the email application. </dd>

</dl>
<h4>
  <a name="1056643"> </a>Returns 
</h4>

<p><a name="1056645"> </a>Returns <code>errNone</code> if successful, <code>exgMemError</code> if there is not enough memory to save the registration info, or one of the data manager error codes (<code>dmErr</code>...). </p>
<h4>
  <a name="1056646"> </a>Comments 
</h4>

<p><a name="1056647"> </a>Both applications and exchange libraries use this function to register with the Exchange Manager to receive certain types of data. </p>

<p><a name="1056648"> </a>Applications must register with the Exchange Manager to receive data objects that do not specifically target that application using the creator ID in the <code>target</code> field. </p>

<p><a name="1056649"> </a>Exchange libraries register to receive data with certain URL schemes. If an exchange library is not registered to receive URLs, it only handles the receipt and sending of data if its library reference number is explicitly specified in the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure. Otherwise, the IR Library handles all incoming data for which a library could not be found. </p>

<p><a name="1056653"> </a>Both applications and libraries should register to receive data as soon as possible after they are installed and as soon as possible after a hard reset. For example, applications can call <code>ExgRegisterDatatype</code> in response to the <a href="AppLaunchCodes.html#1012389"><code>sysAppLaunchCmdSyncNotify</code></a> launch code, which they receive immediately after install. Exchange libraries implemented as applications can also use this strategy. Exchange libraries implemented as shared libraries should call <code>ExgRegisterDatatype</code> in their startup functions. </p>

<p><a name="1056658"> </a>Make only one call to <code>ExgRegisterDatatype</code> per registry type. If you want to register to receive multiple items, use a tab character (<code>\t</code>) to separate the items. If you were to, for example, make one call to register for the DOC file extension and one call to register for the TXT extension, the second call overwrites the first. However, if you want to register with the <code>exgUnwrap</code> flag set, make one call without the <code>exgUnwrap</code> flag and one call with the <code>exgUnwrap</code> flag set. The application registered with the <code>exgUnwrap</code> flag set is stored in a different part of the registry. </p>

<p><a name="1056659"> </a>Specify <code>exgRegExtensionID</code> to register to receive data that has a filename with a particular extension. For example, if your application wants to receive files with a TXT extension, it could register like this:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>ExgRegisterDatatype(myCreator, </code><a name="1056660"> </a>
<code>  exgRegExtensionID, "TXT", NULL, 0);</code><a name="1056661"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1056662"> </a>If the application wants to receive files with a TXT extension or with a DOC extension, it could register like this: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>ExgRegisterDatatype(myCreator, </code><a name="1056663"> </a>
<code>  exgRegExtensionID, "TXT\tDOC", NULL, 0);</code><a name="1056664"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1056666"> </a>Specify <code>exgRegTypeID</code> to register to receive data with a specific MIME type. For example, if your application wants to receive "setext" text files, it could register like this:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>ExgRegisterDatatype(myCreator, exgRegTypeID, 
"text/x-setext", NULL, 0);</code><a name="1056667"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1056669"> </a>Specify <code>exgRegCreatorID</code> to register to receive data targeted for a particular creator ID. For example, if your application wants to handle all data intended for the ToDo application, it could register like this:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>Char toDoCreatorStr[5];</code><a name="1056670"> </a>
<code>MemMove(toDoCreatorStr, sysFileCToDo, 4);</code><a name="1056671"> </a>
toDoCreatorStr[4] = chrNull;<a name="1056672"> </a>
<code>ExgRegisterDatatype(myCreator, exgRegCreatorID,
</code>  toDoCreatorStr<code>, NULL, 0);</code><a name="1056673"> </a>
</pre><div class="CodeRule"><hr></div>


<div><hr>
  <a name="1056674"> </a> <b>NOTE: </b> To override one application's receipt of data, you need to also set your application as the default for this creator ID. See <a href="ExchangeManager.html#1056868"><code>ExgSetDefaultApplication()</code></a>. 
<hr>
</div>

<p><a name="1056679"> </a>Most exchange libraries will want to register for a unique URL scheme that identifies only that library, plus they should register for a more general scheme, such as the send scheme (<code>exgSendScheme</code>), which causes the library to be listed in the Send With dialog when the user performs the Send command. The registry ID constant for URL prefixes is <code>exgRegSchemeID</code>. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>ExgRegisterDatatype(myLibCreator, 
</code>  <code>exgRegSchemeID, myScheme "\t" exgSendScheme, 
</code>  <code>NULL, 0);</code><a name="1056682"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1056683"> </a>Registrations are active until a hard reset or until the application or library is removed. The registration information is preserved across a soft reset. When an application is removed, its registry information is also automatically removed from the registry, so there is not normally a need to unregister. If you want to unregister, you can call <code>ExgRegisterDatatype</code> with a <code>NULL</code> value for the <code>dataTypesP</code> parameter.</p>

<p><a name="1056684"> </a>Multiple applications can be registered to receive the same type of data. If this is the case, the application that is registered as the default (using <a href="ExchangeManager.html#1056868"><code>ExgSetDefaultApplication()</code></a>) is the one that receives the data unless the exchange socket explicitly specifies another application should receive it. If there is no default specified, the Exchange Manager determines a default. </p>

<p><a name="1056689"> </a>Multiple libraries may also be registered to receive the same type of URL. In this case, if the URL begins with a question mark (?), the Exchange Manager displays a dialog so that the user can select which exchange library to use. If the URL does not begin with a question mark, the exchange library registered as the default is used. If there is no default specified, the Exchange Manager determines a default. </p>
<h4>
  <a name="1056690"> </a>Compatibility 
</h4>

<p><a name="1056694"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. <code>ExgRegisterDatatype</code> replaces the <a href="ExchangeManager.html#1056721"><code>ExgRegisterData()</code></a> function. </p>
<h4>
  <a name="1056698"> </a>See Also 
</h4>

<p><a name="1056705"> </a><a href="ExchangeManager.html#1056721"><code>ExgRegisterData()</code></a>, <a href="ExchangeManager.html#1056150"><code>ExgGetTargetApplication()</code></a>, <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>, <a href="ExchangeManager.html#1055984"><code>ExgGetDefaultApplication()</code></a>, <a href="ExchangeManager.html#1056045"><code>ExgGetRegisteredApplications()</code></a>, <a href="ExchangeManager.html#1056103"><code>ExgGetRegisteredTypes()</code></a></p>

<h3 class="hbH3">
  <a name="1056721"> </a>ExgRegisterData Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056723"> </a>Purpose 
</h4>

<p><a name="1056724"> </a>Registers an application to receive a specific type of data. This function is deprecated and replaced with <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a>.</p>
<h4>
  <a name="1056728"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056729"> </a></code><h4>
  <a name="1056730"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056731"></a>Err ExgRegisterData (
   UInt32 creatorID,
   UInt16 id,
   const Char *dataTypesP
)
</pre>
<h4>
  <a name="1056732"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056733"> </a><code>&rarr;  <i><code>creatorID</code></i></code></dt>
<dd><a name="1056734"> </a>Creator ID of the registering application.</dd>

<dt><a name="1056735"> </a><code>&rarr;  <i><code>id</code></i></code></dt>
<dd><a name="1056736"> </a>Registry ID identifying the type of the items being registered. Specify <code>exgRegExtensionID</code> or <code>exgRegTypeID</code>.</dd>

<dt><a name="1056737"> </a><code>&rarr;  <i><code>dataTypesP</code></i></code></dt>
<dd><a name="1056738"> </a>Pointer to a tab-delimited, null-terminated string listing the items to register. (Use \t for the tab character.) These include file extensions or MIME types. To unregister, pass a <code>NULL</code> value.</dd>

</dl>
<h4>
  <a name="1056739"> </a>Returns 
</h4>

<p><a name="1056740"> </a>Returns <code>errNone</code> if successful, otherwise, one of the data manager error codes (<code>dmErr</code>...).</p>
<h4>
  <a name="1056741"> </a>Comments 
</h4>

<p><a name="1056742"> </a>Applications that wish to receive data from anything other than another Palm Powered<sup>&#8482;</sup> handheld running the same application must use this function to register for the kinds of data they can receive. Call this function when your application is loaded on the device.</p>
<h4>
  <a name="1056743"> </a>Compatibility 
</h4>

<p><a name="1056744"> </a>This function corresponds to the Palm OS 3.5 version of <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a>. It is implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1056753"> </a>ExgRequest Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056755"> </a>Purpose 
</h4>

<p><a name="1056756"> </a>Requests some data from an exchange library or an application using a URL. </p>
<h4>
  <a name="1056757"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056758"> </a></code><h4>
  <a name="1056759"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056760"></a>Err ExgRequest (
   ExgSocketType *socketP
)
</pre>
<h4>
  <a name="1056761"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056762"> </a><code>&rarr;  <i>socketP</i></code></dt>
<dd><a name="1056766"> </a>Pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). Specify a URL in the <code>name</code> field and a <code>libraryRef</code> of 0. </dd>

</dl>
<h4>
  <a name="1056767"> </a>Returns 
</h4>

<p><a name="1056768"> </a>Returns one of the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1056771"> </a><code>errNone</code></p>
    </td>
    <td><p class="tt"><a name="1056773"> </a>Success</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056775"> </a><code>exgErrBadLibrary</code></p>
    </td>
    <td><p class="tt"><a name="1056777"> </a>Couldn't find default exchange library</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056779"> </a><code>exgErrNotEnoughPower</code> </p>
    </td>
    <td><p class="tt"><a name="1056781"> </a>The device does not have enough power to perform the operation </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1056783"> </a><code>sysErrLibNotFound</code></p>
    </td>
    <td><p class="tt"><a name="1056785"> </a>Couldn't find library or application to respond to URL </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1056787"> </a>Other error codes depend on the exchange library or application. </p>
<h4>
  <a name="1056788"> </a>Comments 
</h4>

<p><a name="1056792"> </a>The <code>ExgRequest</code> function is similar to <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a> in that both are used to request data. The difference is that the application that calls <code>ExgGet</code> is always the application that receives the data. When you call <code>ExgRequest</code>, the application that receives the data is the application that is registered to receive it. For example, using <code>ExgRequest</code>, it is possible for one application to use the Exchange Manager to retrieve a vCard using any supported transport mechanism and have that data sent directly to the Address Book application instead of to the calling application. </p>

<p><a name="1056793"> </a>The <code>socketP</code> passed to this function identifies the exchange library using a URL in the <code>name</code> field. The application must know before-hand the proper URL prefix for the exchange library with which it wants to connect. See <a href="ExchangeManager.html#1055235">Predefined URL Prefixes</a> for a list of URL prefixes that the Exchange Manager provides. </p>

<p><a name="1056797"> </a>If the provided URL begins with a question mark (?) and there are several exchange libraries registered for the specified URL scheme, the Exchange Manager displays a dialog from which the user selects the appropriate transport mechanism. </p>

<p><a name="1056798"> </a>If the Exchange Manager cannot find a library that is registered for the specified URL, it assumes that an application is registered to receive the URL, and it launches that application with the <a href="AppLaunchCodes.html#1012191"><code>sysAppLaunchCmdGoToURL</code></a> launch code. </p>
<h4>
  <a name="1056803"> </a>Compatibility 
</h4>

<p><a name="1056807"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1056808"> </a>See Also 
</h4>

<p><a name="1056815"> </a><a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a>, <a href="ExchangeManager.html#1056358"><code>ExgNotifyReceive()</code></a></p>

<h3 class="hbH3">
  <a name="1056818"> </a>ExgSend Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056820"> </a>Purpose 
</h4>

<p><a name="1056821"> </a>Sends data to the destination device.</p>
<h4>
  <a name="1056822"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056823"> </a></code><h4>
  <a name="1056824"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056825"></a>UInt32 ExgSend (
   ExgSocketType *socketP,
   const void *bufP,
   UInt32 bufLen,
   Err *err
)
</pre>
<h4>
  <a name="1056826"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056827"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1056831"> </a>A pointer to the socket structure (see <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a>). A value must be provided for the <code>libraryRef</code> field. The structure should also contain values for the <code>target</code>, <code>type</code>, or <code>name</code> fields. </dd>

<dt><a name="1056832"> </a><code>&rarr;  <i><code>bufP</code></i></code></dt>
<dd><a name="1056833"> </a>A pointer to the data to send.</dd>

<dt><a name="1056834"> </a><code>&rarr;  <i><code>bufLen</code></i></code></dt>
<dd><a name="1056835"> </a>The number of bytes to send.</dd>

<dt><a name="1056836"> </a><code>&larr;  <i><code>err</code></i></code></dt>
<dd><a name="1056837"> </a>A pointer to an error code result.</dd>

</dl>
<h4>
  <a name="1056838"> </a>Returns 
</h4>

<p><a name="1056839"> </a>Returns the number of bytes actually sent, normally the same number as specified in <code>bufLen</code>. An error code is returned in the address indicated by <code>err</code>. The error code <code>exgErrUserCancel</code> is returned if the user cancels the operation.</p>

<p><a name="1056840"> </a>May display a fatal error message if the <code>socketP</code> parameter does not contain a value for the <code>libraryRef</code> field. </p>
<h4>
  <a name="1056841"> </a>Comments 
</h4>

<p><a name="1056842"> </a>Call this function one or more times to send all the data, following a successful call to <a href="ExchangeManager.html#1056469"><code>ExgPut()</code></a>. After sending the data, call <a href="ExchangeManager.html#1055705"><code>ExgDisconnect()</code></a> to terminate the connection.</p>

<p><a name="1056851"> </a>The exchange library may break large amounts of data into multiple packets or assemble small send commands together into larger packets, but the application will not be aware of these transport level details.</p>

<p><a name="1056852"> </a>This function blocks the application until all the data is sent. However, the exchange library may provide its own user interface that is updated as necessary and allows the user to cancel the operation in progress.</p>
<h4>
  <a name="1056853"> </a>Compatibility 
</h4>

<p><a name="1056857"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1056858"> </a>See Also 
</h4>

<p><a name="1056865"> </a><a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a>, <a href="ExchangeManager.html#1055912"><code>ExgGet()</code></a></p>

<h3 class="hbH3">
  <a name="1056868"> </a>ExgSetDefaultApplication Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056870"> </a>Purpose 
</h4>

<p><a name="1056871"> </a>Sets the application that receives a specified type of data by default. This function also sets the default exchange library that handles particular URL schemes. </p>
<h4>
  <a name="1056872"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056873"> </a></code><h4>
  <a name="1056874"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056875"></a>Err ExgSetDefaultApplication (
   UInt32 creatorID,
   UInt16 id,
   const Char *dataTypeP
)
</pre>
<h4>
  <a name="1056876"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056877"> </a><code>&rarr;  <i><code>creatorID</code></i></code></dt>
<dd><a name="1056878"> </a>The creator ID of the application or library that should become the default for this type of data. </dd>

<dt><a name="1056879"> </a><code>&rarr;  <i><code>id</code></i></code></dt>
<dd><a name="1056880"> </a>A registry ID constant identifying the type of data in <code>dataTypeP</code>. See <a href="ExchangeManager.html#1055147">Registry ID Constants</a>.</dd>

<dt><a name="1056884"> </a><code>&rarr;  <i><code>dataTypesP</code></i></code></dt>
<dd><a name="1056885"> </a>A pointer to a null-terminated string containing the desired type of data. </dd>

</dl>

<div><hr>
  <a name="1056886"> </a> <b>NOTE: </b> If specifying a file extension, do not include the period (.) that precedes the extension. If specifying a URL prefix, do not include the colon (:) at the end of the prefix. 
<hr>
</div>
<h4>
  <a name="1056887"> </a>Returns 
</h4>

<p><a name="1056889"> </a>Returns <code>errNone</code> upon success or <code>exgErrNoKnownTarget</code> if the specified application is not registered to receive the specified data type. </p>
<h4>
  <a name="1056890"> </a>Comments 
</h4>

<p><a name="1056891"> </a>This function sets the default application that receives data of a certain type when no target is specified and the default exchange library that handles URLs with a certain prefix if no library reference number is specified. </p>

<p><a name="1056892"> </a>Palm<sup>&#8482;</sup> strongly recommends that applications allow the user to determine which application should become the default recipient for a data type. To do so, an application can use <a href="ExchangeManager.html#1056045"><code>ExgGetRegisteredApplications()</code></a> to get the list of applications registered for the same type of data as it is, and then display a dialog listing those applications and allow the user to select it. Then it should call <code>ExgSetDefaultApplication</code> with the user-specified default. </p>

<p><a name="1056896"> </a>If you call <code>ExgSetDefaultApplication</code> with an application or library that is already the default, this function has no effect. </p>

<p><a name="1056897"> </a>An application can become the default for its own creator ID even if it has not specifically registered to receive its own creator ID. That is, suppose several applications are registered to receive objects targeted for the ToDo application's creator ID. The ToDo application itself is not registered for its own creator ID, as it is not necessary to do so. However, an application can use code like the following to set the ToDo application as the default for its own creator ID. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>Char toDoCreatorStr[5];</code><a name="1056898"> </a>
<code>MemMove(toDoCreatorStr, sysFileCToDo, 4);</code><a name="1056899"> </a>
toDoCreatorStr[4] = chrNull;<a name="1056900"> </a>
ExgSetDefaultApplication(sysFileCToDo, <a name="1056901"> </a>
  exgRegCreatorID, <code>toDoCreatorStr</code>); <a name="1056902"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1056903"> </a>Compatibility 
</h4>

<p><a name="1056907"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1056908"> </a>See Also 
</h4>

<p><a name="1056915"> </a><a href="ExchangeManager.html#1055984"><code>ExgGetDefaultApplication()</code></a>, <a href="ExchangeManager.html#1056615"><code>ExgRegisterDatatype()</code></a></p>

<h2 class="haH2">
  <a name="1056917"> </a>Application-Defined Functions <a href="#1054717"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1056921"> </a>ExgDBDeleteProcPtr Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056923"> </a>Purpose 
</h4>

<p><a name="1056924"> </a>Handles the case where a database with an identical name already exists on the device. </p>
<h4>
  <a name="1056925"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056926"> </a></code><h4>
  <a name="1056927"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056928"></a>Boolean (
   *ExgDBDeleteProcPtr
) (
   const char *nameP,
   UInt16 version,
   UInt16 cardNo,
   LocalID dbID,
   void *userDataP
)
</pre>
<h4>
  <a name="1056929"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056930"> </a><code>&rarr;  <i><code>nameP</code></i></code></dt>
<dd><a name="1056931"> </a>A pointer to the name of the identical database.</dd>

<dt><a name="1056932"> </a><code>&rarr;  <i><code>version</code></i></code></dt>
<dd><a name="1056933"> </a>The version of the identical database.</dd>

<dt><a name="1056934"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1056935"> </a>The card number of the identical database.</dd>

<dt><a name="1056936"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1056937"> </a>The database ID of the identical database.</dd>

<dt><a name="1056938"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1056942"> </a>The <code>userDataP</code> parameter you passed to <a href="ExchangeManager.html#1055573"><code>ExgDBRead()</code></a>. If used, this parameter contains any application-specific data you find necessary. If the <a href="ExchangeManager.html#1056956"><code>ExgDBReadProcPtr()</code></a> function is implemented using Exchange Manager calls, this often contains the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure. </dd>

</dl>
<h4>
  <a name="1056949"> </a>Returns 
</h4>

<p><a name="1056950"> </a>Return <code>true</code> to have the <code>ExgDBRead</code> function continue to read the database. Use this return value if you have deleted or moved the existing database or if you want the database to be overwritten. Return <code>false</code> to have <code>ExgDBRead</code> exit without reading the database.</p>
<h4>
  <a name="1056951"> </a>Comments 
</h4>

<p><a name="1056952"> </a>This function is called if the Data Manager can't create the incoming database because a database with the same name already exists. You should delete the existing database or take some other action, such as changing the database name. It is appropriate to prompt the user before choosing to delete or move the database. </p>

<h3 class="hbH3">
  <a name="1056956"> </a>ExgDBReadProcPtr Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056958"> </a>Purpose 
</h4>

<p><a name="1056963"> </a>Reads in the database and pass it to <a href="ExchangeManager.html#1055573"><code>ExgDBRead()</code></a>.</p>
<h4>
  <a name="1056964"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1056965"> </a></code><h4>
  <a name="1056966"> </a>Prototype 
</h4>
<pre class="proto"><a name="1056967"></a>Err (
   *ExgDBReadProcPtr
) (
   void *dataP,
   UInt32 *sizeP,
   void *userDataP
)
</pre>
<h4>
  <a name="1056968"> </a>Parameters 
</h4>

<dl>
<dt><a name="1056969"> </a><code>&larr;  <i><code>dataP</code></i></code></dt>
<dd><a name="1056970"> </a>A pointer to a buffer where this function should place the database data. This buffer is allocated in the dynamic heap by <code>ExgDBRead</code>; you don't need to use <a href="DataAndResourceManager.html#1052867"><code>DmWrite()</code></a> when filling it.</dd>

<dt><a name="1056974"> </a><code>&harr;  <i><code>sizeP</code></i></code></dt>
<dd><a name="1056975"> </a>The size of <code>dataP</code>. This value is set by <code>ExgDBRead</code> to the number of bytes it expects to receive in <code>dataP</code>. You must set this value to the number of bytes you return in <code>dataP</code> (if it's not the same).</dd>

<dt><a name="1056976"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1056977"> </a>The <code>userDataP</code> parameter you passed to <code>ExgDBRead</code>. Pass the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure if you implement this function using Exchange Manager calls. </dd>

</dl>
<h4>
  <a name="1056981"> </a>Returns 
</h4>

<p><a name="1056982"> </a>Return an error number, or <code>errNone</code> if there is no error. If this function returns an error, <code>ExgDBRead</code> deletes the database it was creating, cleans up any memory it allocated, then exits, returning the error passed back from this function.</p>
<h4>
  <a name="1056983"> </a>Comments 
</h4>

<p><a name="1056984"> </a><code>ExgDBRead</code> is commonly used to receive a database from a beam or from some other transport mechanism. In this case, an appropriate implementation of this callback function is to call <a href="ExchangeManager.html#1056545"><code>ExgReceive()</code></a> as shown here: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err MyReadDBProc (void *dataP, UInt32 *sizeP, <a name="1056989"> </a>
  void *userDataP) <a name="1056990"> </a>
{<a name="1056991"> </a>
  Err err = errNone;<a name="1056992"> </a>
  //userDataP contains ExgSocketType pointer. <a name="1056993"> </a>
  *sizeP = <a name="1056994"> </a>
    ExgReceive((ExgSocketType *)userDataP, <a name="1056995"> </a>
      dataP, *sizeP, &amp;err);<a name="1056996"> </a>
  return err;<a name="1056997"> </a>
}<a name="1056998"> </a>
</pre><div class="CodeRule"><hr></div>


<h3 class="hbH3">
  <a name="1057002"> </a>ExgDBWriteProcPtr Function <a href="#1054717"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1057004"> </a>Purpose 
</h4>

<p><a name="1057005"> </a>Writes out the database.</p>
<h4>
  <a name="1057006"> </a>Declared In 
</h4>
<code>ExgMgr.h<a name="1057007"> </a></code><h4>
  <a name="1057008"> </a>Prototype 
</h4>
<pre class="proto"><a name="1057009"></a>Err (
   *ExgDBWriteProcPtr
) (
   const void *dataP,
   UInt32 *sizeP,
   void *userDataP
)
</pre>
<h4>
  <a name="1057010"> </a>Parameters 
</h4>

<dl>
<dt><a name="1057011"> </a><code>&rarr;  <i><code>dataP</code></i></code></dt>
<dd><a name="1057012"> </a>A pointer to a buffer containing the database data, placed there by <a href="ExchangeManager.html#1055648"><code>ExgDBWrite()</code></a>.</dd>

<dt><a name="1057016"> </a><code>&harr;  <i><code>sizeP</code></i></code></dt>
<dd><a name="1057017"> </a>The number of bytes placed in <code>dataP</code> by <code>ExgDBWrite</code>. If you were unable to write out or send all of the data in this chunk, on exit, set <code>sizeP</code> to the number of bytes you did write.</dd>

<dt><a name="1057018"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1057019"> </a>The <code>userDataP</code> parameter you passed to <code>ExgDBWrite</code>. You can use it for application-specific data. Pass the <a href="ExchangeManager.html#1054999"><code>ExgSocketType</code></a> structure if you implement this function using Exchange Manager calls. </dd>

</dl>
<h4>
  <a name="1057023"> </a>Returns 
</h4>

<p><a name="1057024"> </a>Return an error number, or <code>errNone</code> if there is no error. If this function returns an error, <code>ExgDBWrite</code> closes the database it was reading, cleans up any memory it allocated, then exits, returning the error passed back from this function.</p>
<h4>
  <a name="1057025"> </a>Comments 
</h4>

<p><a name="1057026"> </a><code>ExgDBWrite</code> is commonly used to write a database that is going to be beamed to another device (or sent through some other transport mechanism). In this case, an appropriate implementation of this callback function is to call <a href="ExchangeManager.html#1056818"><code>ExgSend()</code></a> as shown here: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err MyWriteDBProc (void *dataP, UInt32 *sizeP, <a name="1057031"> </a>
  void *userDataP) <a name="1057032"> </a>
{<a name="1057033"> </a>
  Err err = errNone;<a name="1057034"> </a>
  //userDataP contains ExgSocketType pointer. <a name="1057035"> </a>
  *sizeP = <a name="1057036"> </a>
    ExgSend((ExgSocketType *)userDataP, <a name="1057037"> </a>
      dataP, *sizeP, &amp;err);<a name="1057038"> </a>
  return err;<a name="1057039"> </a>
}<a name="1057040"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1057041"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ConnectionMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ExgLibAPI.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>