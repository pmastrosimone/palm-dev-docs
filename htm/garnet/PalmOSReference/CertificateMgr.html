<html>
<head>
<title>(68K) Certificate Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:16">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="993177"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ByteOrderUtils.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CharacterAttributes.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">28 &nbsp;&nbsp;
Certificate Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="CertificateMgr.html">28  Certificate Manager</a></h1>

   <h2 class="SideTOC2"><a href="#996928">
   Certificate Manager Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#996930">
      CertMgrCertChainType</a></h3>

      <h3 class="SideTOC3"><a href="#993229">
      CertMgrCertElementEnum</a></h3>

      <h3 class="SideTOC3"><a href="#993388">
      CertMgrCertFieldEnum</a></h3>

      <h3 class="SideTOC3"><a href="#993469">
      CertMgrCertInfoType</a></h3>

      <h3 class="SideTOC3"><a href="#993505">
      CertMgrCertSearchEnum</a></h3>

      <h3 class="SideTOC3"><a href="#993690">
      CertMgrElementListType</a></h3>

      <h3 class="SideTOC3"><a href="#993786">
      CertMgrElementType</a></h3>

      <h3 class="SideTOC3"><a href="#994066">
      CertMgrVerifyResultType</a></h3>

   <h2 class="SideTOC2"><a href="#994166">
   Certificate Manager Constants</a></h2>

      <h3 class="SideTOC3"><a href="#999047">
      X509Cert Element Fields</a></h3>

      <h3 class="SideTOC3"><a href="#1003158">
      RSA Element Fields</a></h3>

      <h3 class="SideTOC3"><a href="#1003488">
      RDN Element Fields</a></h3>

      <h3 class="SideTOC3"><a href="#1003686">
      X509Extensions Element Fields</a></h3>

      <h3 class="SideTOC3"><a href="#1003884">
      Data Types</a></h3>

      <h3 class="SideTOC3"><a href="#1006340">
      Certificate Formats</a></h3>

      <h3 class="SideTOC3"><a href="#1006564">
      Certificate Manager Error Codes</a></h3>

      <h3 class="SideTOC3"><a href="#1007615">
      Certificate Verification Failure Codes</a></h3>

      <h3 class="SideTOC3"><a href="#1009419">
      Miscellaneous Certificate Manager Constants</a></h3>

   <h2 class="SideTOC2"><a href="#1009782">
   Certificate Manager Element Field Macros</a></h2>

      <h3 class="SideTOC3"><a href="#1010494">
      apCertMgrElementFieldRDNOIDN</a></h3>

      <h3 class="SideTOC3"><a href="#1010513">
      apCertMgrElementFieldRDNValueN</a></h3>

      <h3 class="SideTOC3"><a href="#1010532">
      apCertMgrElementFieldX509ExBytesN</a></h3>

      <h3 class="SideTOC3"><a href="#1010551">
      apCertMgrElementFieldX509ExCriticalN</a></h3>

      <h3 class="SideTOC3"><a href="#1010570">
      apCertMgrElementFieldX509ExOIDN</a></h3>

   <h2 class="SideTOC2"><a href="#994710">
   Certificate Manager Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#995446">
      CertMgrAddCert</a></h3>

      <h3 class="SideTOC3"><a href="#995792">
      CertMgrExportCert</a></h3>

      <h3 class="SideTOC3"><a href="#995863">
      CertMgrFindCert</a></h3>

      <h3 class="SideTOC3"><a href="#995921">
      CertMgrGetField</a></h3>

      <h3 class="SideTOC3"><a href="#996273">
      CertMgrImportCert</a></h3>

      <h3 class="SideTOC3"><a href="#996451">
      CertMgrReleaseCertInfo</a></h3>

      <h3 class="SideTOC3"><a href="#996493">
      CertMgrRemoveCert</a></h3>

      <h3 class="SideTOC3"><a href="#996619">
      CertMgrVerifyCert</a></h3>

      <h3 class="SideTOC3"><a href="#996669">
      CertMgrVerifyFailure</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="996716"> </a>The Certificate Manager manages digital certificates, handling such operations as import, export, parsing, secure storage, content authentication, and storage querying. You can use the Certificate Manager in two different ways: as a certificate verifier and parser, and as a certificate store. In the verifier/parser mode, the Certificate Manager takes data as input and parses it as a digital certificate. The user can then verify the certificate and access its internal fields. In certificate store mode, the Certificate Manager can securely store a tree of digital certificates (with multiple roots) and make the fields of those certificates available to users.</p>

<p><a name="996717"> </a>The Certificate Manager is a system server with a client-side library. To securely store certificates, the Certificate Manager makes use of the Data Manager's vault facilities.</p>

<p><a name="996718"> </a>The remainder of this chapter documents the Certificate Manager APIs. It is organized into the following sections:</p>
   <blockquote class = "bq"><a name="993191"> </a><a href="CertificateMgr.html#996928">Certificate Manager Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="994172"> </a><a href="CertificateMgr.html#994166">Certificate Manager Constants</a></blockquote>
   <blockquote class = "bq"><a name="994716"> </a><a href="CertificateMgr.html#1009782">Certificate Manager Element Field Macros</a></blockquote>
   <blockquote class = "bq"><a name="1009824"> </a><a href="CertificateMgr.html#994710">Certificate Manager Functions and Macros</a></blockquote>

<p><a name="996925"> </a>The header file <code>CertificateMgr.h</code> declares the API that this chapter describes.</p>

<h2 class="haH2">
  <a name="996928"> </a>Certificate Manager Structures and Types <a href="#993177"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996930"> </a>CertMgrCertChainType Struct <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993198"> </a>Purpose 
</h4>

<p><a name="996965"> </a>A certificate chain is used when calling <a href="CertificateMgr.html#996619"><code>CertMgrVerifyCert()</code></a>.  You may define a list of certificates to be used when trying to verify the certificate chain.</p>
<h4>
  <a name="993203"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993206"> </a></code><h4>
  <a name="993208"> </a>Prototype 
</h4>
<pre class="proto"><a name="993211"></a>typedef struct {
   CertMgrCertInfoType *certs;
   uint32_t count;
} CertMgrCertChainType
</pre>
<h4>
  <a name="993213"> </a>Fields 
</h4>

<dl>
<dt><a name="993216"> </a><code>certs</code></dt>
<dd><a name="997233"> </a>Pointer to the first certificate in the chain.</dd>

<dt><a name="993220"> </a><code>count</code></dt>
<dd><a name="997257"> </a>Number of certificates in the chain.</dd>

</dl>
<h4>
  <a name="1012967"> </a>Compatibility 
</h4>

<p><a name="1013063"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="993229"> </a>CertMgrCertElementEnum Typedef <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993234"> </a>Purpose 
</h4>

<p><a name="997267"> </a>Certificate element types, used in conjunction with <a href="CertificateMgr.html#995921"><code>CertMgrGetField()</code></a>.</p>
<h4>
  <a name="993239"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993242"> </a></code><h4>
  <a name="993244"> </a>Prototype 
</h4>
<pre class="proto"><a name="993247"></a>typedef uint32_t CertMgrCertElementEnum
</pre>
<h4>
  <a name="993279"> </a>Constants 
</h4>

<dl>
<dt><a name="997473"> </a><code>#define apCertMgrElementTypeRDN 34</code></dt>
<dt><a name="997476"> </a><code>#define apCertMgrElementTypeRSA 33</code></dt>
<dt><a name="997479"> </a><code>#define apCertMgrElementTypeX509Cert 32</code></dt>
<dt><a name="997482"> </a><code>#define apCertMgrElementTypeX509Extensions 35</code></dt>
</dl>
<h4>
  <a name="1013115"> </a>Compatibility 
</h4>

<p><a name="1013119"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="993388"> </a>CertMgrCertFieldEnum Typedef <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993449"> </a>Purpose 
</h4>

<p><a name="997730"> </a>Certificate element field types, used in conjunction with <a href="CertificateMgr.html#995921"><code>CertMgrGetField()</code></a>.</p>
<h4>
  <a name="993454"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993457"> </a></code><h4>
  <a name="993459"> </a>Prototype 
</h4>
<pre class="proto"><a name="993462"></a>typedef uint32_t CertMgrCertFieldEnum
</pre>
<h4>
  <a name="993464"> </a>Comments 
</h4>

<p><a name="997771"> </a>The values used with variables of this type depend on the certificate element. Depending on the certificate element, the element's field types are listed under one of the following:</p>
<ul type="disc">
  <li><a name="997775"> </a><a href="CertificateMgr.html#999047">"X509Cert Element Fields"</a>
  <li><a name="997779"> </a><a href="CertificateMgr.html#1003158">"RSA Element Fields"</a>
  <li><a name="997783"> </a><a href="CertificateMgr.html#1003488">"RDN Element Fields"</a>
  <li><a name="997787"> </a><a href="CertificateMgr.html#1003686">"X509Extensions Element Fields"</a>
</ul>
<h4>
  <a name="1013145"> </a>Compatibility 
</h4>

<p><a name="1013149"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="993469"> </a>CertMgrCertInfoType Struct <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993474"> </a>Purpose 
</h4>

<p><a name="997852"> </a>Abstracts a certificate object.  An application uses a structure of this type to refer to a certificate in the memory address space of the Certificate Manager.  You can get a reference to a certificate from a successful call to <a href="CertificateMgr.html#996273"><code>CertMgrImportCert()</code></a> or <a href="CertificateMgr.html#995863"><code>CertMgrFindCert()</code></a></p>
<h4>
  <a name="993479"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993482"> </a></code><h4>
  <a name="993484"> </a>Prototype 
</h4>
<pre class="proto"><a name="993487"></a>typedef struct {
   uint32_t ref;
   uint16_t format;
} CertMgrCertInfoType
</pre>
<h4>
  <a name="993489"> </a>Fields 
</h4>

<dl>
<dt><a name="993492"> </a><code>ref</code></dt>
<dd><a name="997932"> </a>An opaque object.</dd>

<dt><a name="993496"> </a><code>format</code></dt>
<dd><a name="997978"> </a>The format of the certificate. See <a href="CertificateMgr.html#1006340">"Certificate Formats"</a> for the defined set of certificate format values.</dd>

</dl>
<h4>
  <a name="1013159"> </a>Compatibility 
</h4>

<p><a name="1013163"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="993505"> </a>CertMgrCertSearchEnum Typedef <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993510"> </a>Purpose 
</h4>

<p><a name="998060"> </a>Specifies the search mode to <a href="CertificateMgr.html#995863"><code>CertMgrFindCert()</code></a>.</p>
<h4>
  <a name="993515"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993518"> </a></code><h4>
  <a name="993520"> </a>Prototype 
</h4>
<pre class="proto"><a name="993549"></a>typedef uint32_t CertMgrCertSearchEnum
</pre>
<h4>
  <a name="993581"> </a>Constants 
</h4>

<dl>
<dt><a name="998173"> </a><code>#define apCertMgrSearchCert 1000</code></dt>
<dd><a name="998216"> </a>In this mode, repeated calls to <code>CertMgrFindCert()</code> iterate through the certificates in the store, each time returning the certificate that resides at the location indicated by the <code class="par">index</code> parameter. Each time <code>CertMgrFindCert()</code> is called, the <code class="par">index</code> parameter is incremented. Accordingly, you can use this mode to iterate through all of the certificates in the certificate store.</dd>

<dt><a name="998176"> </a><code>#define apCertMgrSearchCertID 1001</code></dt>
<dd><a name="998232"> </a>Causes <code>CertMgrFindCert()</code> to look for a certificate with a certID that matches that supplied in the <code class="par">reference</code> parameter. The data in <code class="par">reference</code> should be a 20-byte certID.</dd>

<dt><a name="998179"> </a><code>#define apCertMgrSearchSubjectRDN apCertMgrFieldSubjectRDN</code></dt>
<dd><a name="998344"> </a>Causes <code>CertMgrFindCert()</code> to look for a certificate whose SubjectRDN matches the one in the <code class="par">reference</code> parameter.</dd>

</dl>
<h4>
  <a name="1013169"> </a>Compatibility 
</h4>

<p><a name="1013173"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="993690"> </a>CertMgrElementListType Struct <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993751"> </a>Purpose 
</h4>

<p><a name="998378"> </a>Structure that represents a list of elements. <a href="CertificateMgr.html#995921"><code>CertMgrGetField()</code></a> fills out this structure.</p>
<h4>
  <a name="993756"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993759"> </a></code><h4>
  <a name="993761"> </a>Prototype 
</h4>
<pre class="proto"><a name="993764"></a>typedef struct {
   uint32_t length;
   uint32_t count;
   CertMgrElementType element[1];
} CertMgrElementListType
</pre>
<h4>
  <a name="993766"> </a>Fields 
</h4>

<dl>
<dt><a name="993769"> </a><code>length</code></dt>
<dd><a name="998382"> </a>The length of this structure, including all of the <a href="CertificateMgr.html#993786"><code>CertMgrElementType</code></a> structures needed to contain all of the list's fields.</dd>

<dt><a name="993773"> </a><code>count</code></dt>
<dd><a name="998413"> </a>The number of fields&#8212;that is, the number of <code>CertMgrElementType</code> structures&#8212;in the list.</dd>

<dt><a name="993777"> </a><code>element</code></dt>
<dd><a name="998441"> </a>The first element. Subsequent elements follow this one.</dd>

</dl>
<h4>
  <a name="1013179"> </a>Compatibility 
</h4>

<p><a name="1013183"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="993786"> </a>CertMgrElementType Struct <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993791"> </a>Purpose 
</h4>

<p><a name="998495"> </a>Structure that represents a single field.</p>
<h4>
  <a name="993796"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="993799"> </a></code><h4>
  <a name="993801"> </a>Prototype 
</h4>
<pre class="proto"><a name="993804"></a>typedef struct {
   uint16_t type;
   uint16_t field;
   uint16_t dataType;
   uint16_t length;
   uint32_t offset;
} CertMgrElementType
</pre>
<h4>
  <a name="993822"> </a>Fields 
</h4>

<dl>
<dt><a name="993875"> </a><code>type</code></dt>
<dd><a name="998523"> </a>The certificate element type. One of the <a href="CertificateMgr.html#993229"><code>CertMgrCertElementEnum</code></a> values.</dd>

<dt><a name="993989"> </a><code>field</code></dt>
<dd><a name="998554"> </a>The element field identifier. One of the values listed under <a href="CertificateMgr.html#999047">"X509Cert Element Fields,"</a> <a href="CertificateMgr.html#1003158">"RSA Element Fields,"</a> <a href="CertificateMgr.html#1003488">"RDN Element Fields,"</a>or <a href="CertificateMgr.html#1003686">"X509Extensions Element Fields."</a></dd>

<dt><a name="994049"> </a><code>dataType</code></dt>
<dd><a name="998592"> </a>The field's data type. One of the values listed under <a href="CertificateMgr.html#1003884">"Data Types"</a>.</dd>

<dt><a name="994053"> </a><code>length</code></dt>
<dd><a name="998609"> </a>The length, in bytes, of the field data.</dd>

<dt><a name="994057"> </a><code>offset</code></dt>
<dd><a name="998625"> </a>The offset, in bytes, to the beginning of the field data. </dd>

</dl>
<h4>
  <a name="1013233"> </a>Compatibility 
</h4>

<p><a name="1013237"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="994066"> </a>CertMgrVerifyResultType Struct <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994071"> </a>Purpose 
</h4>

<p><a name="998647"> </a>If a certificate fails to verify during a call to <a href="CertificateMgr.html#996619"><code>CertMgrVerifyCert()</code></a> or <a href="CertificateMgr.html#995446"><code>CertMgrAddCert()</code></a>, this structure is filled in and returned to indicate the reason for the verification failure.</p>
<h4>
  <a name="994076"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="994079"> </a></code><h4>
  <a name="994081"> </a>Prototype 
</h4>
<pre class="proto"><a name="994084"></a>typedef struct {
   uint32_t failureCode;
   CertMgrCertInfoType cert;
   uint32_t depth;
   uint32_t state;
   DateTimeType verifyTime;
} CertMgrVerifyResultType
</pre>
<h4>
  <a name="994086"> </a>Fields 
</h4>

<dl>
<dt><a name="994089"> </a><code>failureCode</code></dt>
<dd><a name="998679"> </a>The reason for the verification failure. See <a href="CertificateMgr.html#1007615">"Certificate Verification Failure Codes"</a> for the set of values that can be returned in this field.</dd>

<dt><a name="994097"> </a><code>cert</code></dt>
<dd><a name="998780"> </a>The certificate that failed to verify.</dd>

<dt><a name="994149"> </a><code>depth</code></dt>
<dd><a name="998784"> </a>How deep the failed certificate is.</dd>

<dt><a name="994153"> </a><code>state</code></dt>
<dd><a name="998788"> </a>The verification state.</dd>

<dt><a name="994157"> </a><code>verifyTime</code></dt>
<dd><a name="998792"> </a>The date and time against which the certificate was verified.</dd>

</dl>
<h4>
  <a name="1013243"> </a>Compatibility 
</h4>

<p><a name="1013247"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="994166"> </a>Certificate Manager Constants <a href="#993177"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="999047"> </a>X509Cert Element Fields <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="999048"> </a>Purpose 
</h4>

<p><a name="999049"> </a>Fields in an X509Cert element.</p>
<h4>
  <a name="999050"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="999051"> </a></code><h4>
  <a name="999143"> </a>Constants 
</h4>

<dl>
<dt><a name="1000416"> </a><code>#define apCertMgrElementFieldEntireCert 17</code></dt>
<dt><a name="1000419"> </a><code>#define apCertMgrElementFieldExtension 200</code></dt>
<dt><a name="1000422"> </a><code>#define apCertMgrElementFieldExtensions 23</code></dt>
<dt><a name="1000425"> </a><code>#define apCertMgrElementFieldInnerDER 1</code></dt>
<dt><a name="1000428"> </a><code>#define apCertMgrElementFieldIssuerID 15</code></dt>
<dt><a name="1000431"> </a><code>#define apCertMgrElementFieldIssuerRDN 4</code></dt>
<dt><a name="1000434"> </a><code>#define apCertMgrElementFieldIssuerUniqueID 21</code></dt>
<dt><a name="1000437"> </a><code>#define apCertMgrElementFieldNotAfter 7</code></dt>
<dt><a name="1000440"> </a><code>#define apCertMgrElementFieldNotBefore 6</code></dt>
<dt><a name="1000443"> </a><code>#define apCertMgrElementFieldPubKeyBER 8</code></dt>
<dt><a name="1000458"> </a><code>#define apCertMgrElementFieldSerialNumber 3</code></dt>
<dt><a name="1000461"> </a><code>#define apCertMgrElementFieldSigAlgID 91</code></dt>
<dt><a name="1000464"> </a><code>#define apCertMgrElementFieldSignature 14</code></dt>
<dt><a name="1000467"> </a><code>#define apCertMgrElementFieldSigOID 12</code></dt>
<dt><a name="1000470"> </a><code>#define apCertMgrElementFieldSigParams 13</code></dt>
<dt><a name="1000473"> </a><code>#define apCertMgrElementFieldSubjectID 16</code></dt>
<dt><a name="1000476"> </a><code>#define apCertMgrElementFieldSubjectRDN 5</code></dt>
<dt><a name="1000479"> </a><code>#define apCertMgrElementFieldSubjectUniqueID 22</code></dt>
<dt><a name="1000482"> </a><code>#define apCertMgrElementFieldVersion 2</code></dt>
<dt><a name="1001438"> </a><code>#define apCertMgrFieldExtensions apCertMgrElementFieldExtensions</code></dt>
<dt><a name="1001441"> </a><code>#define apCertMgrFieldIssuerID apCertMgrElementFieldIssuerID</code></dt>
<dt><a name="1001444"> </a><code>#define apCertMgrFieldIssuerRDN apCertMgrElementFieldIssuerRDN</code></dt>
<dt><a name="1001447"> </a><code>#define apCertMgrFieldIssuerUniqueID apCertMgrElementFieldIssuerUniqueID</code></dt>
<dt><a name="1001450"> </a><code>#define apCertMgrFieldNotAfter apCertMgrElementFieldNotAfter</code></dt>
<dt><a name="1001453"> </a><code>#define apCertMgrFieldNotBefore apCertMgrElementFieldNotBefore</code></dt>
<dt><a name="1001456"> </a><code>#define apCertMgrFieldPubKeyBER apCertMgrElementFieldPubKeyBER</code></dt>
<dt><a name="1001459"> </a><code>#define apCertMgrFieldSerialNumber apCertMgrElementFieldSerialNumber</code></dt>
<dt><a name="1001462"> </a><code>#define apCertMgrFieldSignature apCertMgrElementFieldSignature</code></dt>
<dt><a name="1001465"> </a><code>#define apCertMgrFieldSigOID apCertMgrElementFieldSigOID</code></dt>
<dt><a name="1001468"> </a><code>#define apCertMgrFieldSigParams apCertMgrElementFieldSigParams</code></dt>
<dt><a name="1001471"> </a><code>#define apCertMgrFieldSubjectID apCertMgrElementFieldSubjectID</code></dt>
<dt><a name="1001474"> </a><code>#define apCertMgrFieldSubjectRDN apCertMgrElementFieldSubjectRDN</code></dt>
<dt><a name="1001477"> </a><code>#define apCertMgrFieldSubjectUniqueID apCertMgrElementFieldSubjectUniqueID</code></dt>
<dt><a name="1001480"> </a><code>#define apCertMgrFieldVersion apCertMgrElementFieldVersion</code></dt>
</dl>
<h4>
  <a name="1013253"> </a>Compatibility 
</h4>

<p><a name="1013257"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1003158"> </a>RSA Element Fields <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1003159"> </a>Purpose 
</h4>

<p><a name="1003160"> </a>Fields in an RSA element.</p>
<h4>
  <a name="1003161"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1003162"> </a></code><h4>
  <a name="1003163"> </a>Constants 
</h4>

<dl>
<dt><a name="1003269"> </a><code>#define apCertMgrElementFieldRSAModulus 16</code></dt>
<dt><a name="1003271"> </a><code>#define apCertMgrElementFieldRSAPubExpo 17</code></dt>
</dl>
<h4>
  <a name="1013275"> </a>Compatibility 
</h4>

<p><a name="1013279"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1003488"> </a>RDN Element Fields <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1003489"> </a>Purpose 
</h4>

<p><a name="1003490"> </a>Fields in an RDN element.</p>
<h4>
  <a name="1003491"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1003492"> </a></code><h4>
  <a name="1003493"> </a>Constants 
</h4>

<dl>
<dt><a name="1003632"> </a><code>#define apCertMgrElementFieldRDNOID 4</code></dt>
<dd><a name="1003656"> </a>First RDN OID.</dd>

<dt><a name="1003634"> </a><code>#define apCertMgrElementFieldRDNValue 5</code></dt>
<dd><a name="1003664"> </a>First RDN value.</dd>

</dl>
<h4>
  <a name="1003672"> </a>Comments 
</h4>

<p><a name="1003673"> </a>To get the second and subsequent OIDs and values, use the <a href="CertificateMgr.html#1010494"><code>apCertMgrElementFieldRDNOIDN()</code></a> and <a href="CertificateMgr.html#1010513"><code>apCertMgrElementFieldRDNValueN()</code></a> macros, respectively.</p>
<h4>
  <a name="1013305"> </a>Compatibility 
</h4>

<p><a name="1013309"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1003686"> </a>X509Extensions Element Fields <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1003687"> </a>Purpose 
</h4>

<p><a name="1003688"> </a>Fields in an X509Extensions element.</p>
<h4>
  <a name="1003689"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1003690"> </a></code><h4>
  <a name="1003691"> </a>Constants 
</h4>

<dl>
<dt><a name="1003737"> </a><code>#define apCertMgrElementFieldX509ExBytes 2</code></dt>
<dd><a name="1003770"> </a>First data bytes.</dd>

<dt><a name="1003740"> </a><code>#define apCertMgrElementFieldX509ExCritical 1</code></dt>
<dd><a name="1003774"> </a>First critical flag.</dd>

<dt><a name="1003743"> </a><code>#define apCertMgrElementFieldX509ExOID 0</code></dt>
<dd><a name="1003778"> </a>First extension OID.</dd>

</dl>
<h4>
  <a name="1003782"> </a>Comments 
</h4>

<p><a name="1003783"> </a>To get the second and subsequent data bytes, critical flags, and extension OIDs, use the <a href="CertificateMgr.html#1010532"><code>apCertMgrElementFieldX509ExBytesN()</code></a>, <a href="CertificateMgr.html#1010551"><code>apCertMgrElementFieldX509ExCriticalN()</code></a>, and <a href="CertificateMgr.html#1010570"><code>apCertMgrElementFieldX509ExOIDN()</code></a> macros, respectively.</p>
<h4>
  <a name="1013392"> </a>Compatibility 
</h4>

<p><a name="1013396"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1003884"> </a>Data Types <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1003885"> </a>Purpose 
</h4>

<p><a name="1003886"> </a>Data type of an element field. These values appear in the <a href="CertificateMgr.html#993786"><code>CertMgrElementType</code></a> data structure.</p>
<h4>
  <a name="1003890"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1003891"> </a></code><h4>
  <a name="1003892"> </a>Constants 
</h4>

<dl>
<dt><a name="1004828"> </a><code>#define apCertMgrElementDataTypeASN1BitString 3</code></dt>
<dt><a name="1004831"> </a><code>#define apCertMgrElementDataTypeASN1BmpString 30</code></dt>
<dt><a name="1004834"> </a><code>#define apCertMgrElementDataTypeASN1Boolean 1</code></dt>
<dt><a name="1004837"> </a><code>#define apCertMgrElementDataTypeASN1EmbeddedPDV 11</code></dt>
<dt><a name="1004840"> </a><code>#define apCertMgrElementDataTypeASN1Enumerated 10</code></dt>
<dt><a name="1004843"> </a><code>#define apCertMgrElementDataTypeASN1Eoc 0</code></dt>
<dt><a name="1004846"> </a><code>#define apCertMgrElementDataTypeASN1External 8</code></dt>
<dt><a name="1004849"> </a><code>#define apCertMgrElementDataTypeASN1GenString 27</code></dt>
<dt><a name="1004852"> </a><code>#define apCertMgrElementDataTypeASN1GenTime 24</code></dt>
<dt><a name="1004855"> </a><code>#define apCertMgrElementDataTypeASN1GraphicString 25</code></dt>
<dt><a name="1004858"> </a><code>#define apCertMgrElementDataTypeASN1IA5String 22</code></dt>
<dt><a name="1004861"> </a><code>#define apCertMgrElementDataTypeASN1Integer 2</code></dt>
<dt><a name="1004864"> </a><code>#define apCertMgrElementDataTypeASN1ISO64String 26</code></dt>
<dt><a name="1004867"> </a><code>#define apCertMgrElementDataTypeASN1Null 5</code></dt>
<dt><a name="1004870"> </a><code>#define apCertMgrElementDataTypeASN1NumericString 18</code></dt>
<dt><a name="1004873"> </a><code>#define apCertMgrElementDataTypeASN1ObjDesc 7</code></dt>
<dt><a name="1004876"> </a><code>#define apCertMgrElementDataTypeASN1OctetString 4</code></dt>
<dt><a name="1004879"> </a><code>#define apCertMgrElementDataTypeASN1OID 6</code></dt>
<dt><a name="1004882"> </a><code>#define apCertMgrElementDataTypeASN1PrintString 19</code></dt>
<dt><a name="1004885"> </a><code>#define apCertMgrElementDataTypeASN1Real 9</code></dt>
<dt><a name="1004888"> </a><code>#define apCertMgrElementDataTypeASN1Sequence 16</code></dt>
<dt><a name="1004891"> </a><code>#define apCertMgrElementDataTypeASN1Set 17</code></dt>
<dt><a name="1004894"> </a><code>#define apCertMgrElementDataTypeASN1T61String 20</code></dt>
<dt><a name="1004897"> </a><code>#define apCertMgrElementDataTypeASN1UnivString 28</code></dt>
<dt><a name="1004900"> </a><code>#define apCertMgrElementDataTypeASN1UTCTime 23</code></dt>
<dt><a name="1004903"> </a><code>#define apCertMgrElementDataTypeASN1UTF8String 12</code></dt>
<dt><a name="1004906"> </a><code>#define apCertMgrElementDataTypeASN1VideoTexString 21</code></dt>
</dl>
<h4>
  <a name="1013414"> </a>Compatibility 
</h4>

<p><a name="1013418"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1006340"> </a>Certificate Formats <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1006341"> </a>Purpose 
</h4>

<p><a name="1006345"> </a>Specifies the certificate format. The <a href="CertificateMgr.html#993469"><code>CertMgrCertInfoType</code></a> structure's <code>format</code> field takes one of these values.</p>
<h4>
  <a name="1006346"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1006347"> </a></code><h4>
  <a name="1006348"> </a>Constants 
</h4>

<dl>
<dt><a name="1006487"> </a><code>#define apCertMgrFormatX509 1</code></dt>
<dd><a name="1006560"> </a>The certificate is a DER encoded x509 certificate.</dd>

<dt><a name="1006490"> </a><code>#define apCertMgrFormatXML 2</code></dt>
<dd><a name="1006556"> </a>The certificate is formatted as XML. </dd>

</dl>

<div><hr>
  <a name="1006495"> </a> <b>NOTE: </b> XML-formatted certificates are not currently supported in Palm OS Cobalt.
<hr>
</div>
<h4>
  <a name="1013428"> </a>Compatibility 
</h4>

<p><a name="1013432"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1006564"> </a>Certificate Manager Error Codes <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1006565"> </a>Purpose 
</h4>

<p><a name="1006566"> </a>Error codes returned by the various Certificate Manager functions.</p>
<h4>
  <a name="1006567"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1006568"> </a></code><h4>
  <a name="1006569"> </a>Constants 
</h4>

<dl>
<dt><a name="1007399"> </a><code>#define certMgrErrBackupInProgress (certErrorClass | 0x0C)</code></dt>
<dd><a name="1007562"> </a>The certificate vault could not be accessed because it is in the process of being backed up.</dd>

<dt><a name="1007402"> </a><code>#define certMgrErrBufTooSmall (certErrorClass | 0x07)</code></dt>
<dd><a name="1007566"> </a>The export buffer is too small.  The required size is written into the variable pointed to by the length parameter.</dd>

<dt><a name="1007405"> </a><code>#define certMgrErrCertNotFound (certErrorClass | 0x09)</code></dt>
<dd><a name="1007570"> </a>A certificate matching the specified criteria was not found.</dd>

<dt><a name="1007408"> </a><code>#define certMgrErrDatabaseFail (certErrorClass | 0x0B)</code></dt>
<dd><a name="1007574"> </a>A Data Manager error occurred.</dd>

<dt><a name="1007411"> </a><code>#define certMgrErrFieldNotFound (certErrorClass | 0x08)</code></dt>
<dd><a name="1007578"> </a>The specified field could not be found.</dd>

<dt><a name="1007414"> </a><code>#define certMgrErrInvalidEncoding (certErrorClass | 0x02)</code></dt>
<dd><a name="1007582"> </a>The specified format encoding is invalid.</dd>

<dt><a name="1007417"> </a><code>#define certMgrErrInvalidParam (certErrorClass | 0x04)</code></dt>
<dd><a name="1007586"> </a>One of the function parameters is invalid.</dd>

<dt><a name="1007420"> </a><code>#define certMgrErrNotExportable (certErrorClass | 0x0A)</code></dt>
<dd><a name="1007590"> </a>The certificate is not exportable. It is probably stored in compressed form.</dd>

<dt><a name="1007423"> </a><code>#define certMgrErrNotImplemented (certErrorClass | 0x01)</code></dt>
<dd><a name="1007594"> </a>The requested certificate format is not supported.</dd>

<dt><a name="1007426"> </a><code>#define certMgrErrNotRemovable (certErrorClass | 0x0D)</code></dt>
<dd><a name="1007598"> </a>The certificate is not removable.</dd>

<dt><a name="1007429"> </a><code>#define certMgrErrOutOfMemory (certErrorClass | 0x03)</code></dt>
<dd><a name="1007602"> </a>There was insufficient memory to complete the operation.</dd>

<dt><a name="1007432"> </a><code>#define certMgrErrOutOfResources (certErrorClass | 0x06)</code></dt>
<dd><a name="1007606"> </a>The Certificate Manager ran out of resources.</dd>

<dt><a name="1007435"> </a><code>#define certMgrErrServiceNotStarted (certErrorClass | 0x05)</code></dt>
<dd><a name="1007610"> </a>The Certificate Manager process has not started.</dd>

</dl>
<h4>
  <a name="1013438"> </a>Compatibility 
</h4>

<p><a name="1013442"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1007615"> </a>Certificate Verification Failure Codes <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1007616"> </a>Purpose 
</h4>

<p><a name="1007617"> </a>Indicates why a certificate failed to verify. These values are returned in the <a href="CertificateMgr.html#994066"><code>CertMgrVerifyResultType</code></a> structure's <code>failureCode</code> field as the result of a call to <a href="CertificateMgr.html#996619"><code>CertMgrVerifyCert()</code></a> or <a href="CertificateMgr.html#995446"><code>CertMgrAddCert()</code></a>. These are also passed to the SSL Library's Verify callback; see <a href="SslLib.html#1103273">"The Verify Callback"</a>.</p>
<h4>
  <a name="1007630"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1007631"> </a></code><h4>
  <a name="1007632"> </a>Constants 
</h4>

<dl>
<dt><a name="1008617"> </a><code>#define CertMgrVerifyFail (certErrorClass+0x80)</code></dt>
<dd><a name="1008618"> </a></dd>

<dt><a name="1008620"> </a><code>#define CertMgrVerifyFailBasicConstraints (CertMgrVerifyFail+8)</code></dt>
<dd><a name="1008920"> </a>There was a constraint violation.</dd>

<dt><a name="1008623"> </a><code>#define CertMgrVerifyFailCriticalExtension (CertMgrVerifyFail+9)</code></dt>
<dd><a name="1008924"> </a>The critical extension is unknown.</dd>

<dt><a name="1008626"> </a><code>#define CertMgrVerifyFailKeyUsage (CertMgrVerifyFail+7)</code></dt>
<dd><a name="1008627"> </a></dd>

<dt><a name="1008629"> </a><code>#define CertMgrVerifyFailNotAfter (CertMgrVerifyFail+6)</code></dt>
<dd><a name="1008630"> </a></dd>

<dt><a name="1008632"> </a><code>#define CertMgrVerifyFailNotBefore (CertMgrVerifyFail+5)</code></dt>
<dd><a name="1008633"> </a></dd>

<dt><a name="1008635"> </a><code>#define CertMgrVerifyFailSelfSigned (CertMgrVerifyFail+4)</code></dt>
<dd><a name="1008636"> </a></dd>

<dt><a name="1008638"> </a><code>#define CertMgrVerifyFailSignature (CertMgrVerifyFail+3)</code></dt>
<dd><a name="1008928"> </a>The signature is invalid.</dd>

<dt><a name="1008641"> </a><code>#define CertMgrVerifyFailUnknown (CertMgrVerifyFail+0)</code></dt>
<dd><a name="1008642"> </a></dd>

<dt><a name="1008644"> </a><code>#define CertMgrVerifyFailUnknownIssuer (CertMgrVerifyFail+1)</code></dt>
<dd><a name="1009056"> </a>The root cannot be trusted since the issuer is not known.</dd>

<dt><a name="1008647"> </a><code>#define CertMgrVerifyFailUnknownSigAlg (CertMgrVerifyFail+2)</code></dt>
<dd><a name="1008648"> </a></dd>

</dl>
<h4>
  <a name="1013448"> </a>Compatibility 
</h4>

<p><a name="1013452"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1009419"> </a>Miscellaneous Certificate Manager Constants <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1009420"> </a>Purpose 
</h4>

<p><a name="1009421"> </a>These constants are also declared in <code>CertificateMgr.h</code>.</p>
<h4>
  <a name="994257"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="994260"> </a></code><h4>
  <a name="994262"> </a>Constants 
</h4>

<dl>
<dt><a name="994649"> </a><code>#define CertMgrServiceName "pSysCertificateManager"</code></dt>
<dd><a name="1009521"> </a>The name under which the Certificate Manager is registered with the Service Manager.</dd>

</dl>
<h4>
  <a name="1013486"> </a>Compatibility 
</h4>

<p><a name="1013490"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="1009782"> </a>Certificate Manager Element Field Macros <a href="#993177"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1010494"> </a>apCertMgrElementFieldRDNOIDN Macro <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010496"> </a>Purpose 
</h4>

<p><a name="1010744"> </a>Macro that evaulates to the field ID for the the second and subsequent OID fields for an RDN element.</p>
<h4>
  <a name="1010498"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1010499"> </a></code><h4>
  <a name="1010500"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010501"></a>#define apCertMgrElementFieldRDNOIDN (
   <code class="par">n</code>
)
</pre>
<h4>
  <a name="1010502"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010503"> </a><code>&rarr;  <i>n</i></code></dt>
<dd><a name="1010799"> </a>The OID field index. The second OID field's index would be 2.</dd>

</dl>
<h4>
  <a name="1010505"> </a>Returns 
</h4>

<p><a name="1010871"> </a>Evaluates to the RDN element's OID field ID.</p>
<h4>
  <a name="1013516"> </a>Compatibility 
</h4>

<p><a name="1013520"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1010513"> </a>apCertMgrElementFieldRDNValueN Macro <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010515"> </a>Purpose 
</h4>

<p><a name="1010984"> </a>Macro that evaulates to the field ID for the second and subsequent Value fields for an RDN element..</p>
<h4>
  <a name="1010517"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1010518"> </a></code><h4>
  <a name="1010519"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010520"></a>#define apCertMgrElementFieldRDNValueN (
   <code class="par">n</code>
)
</pre>
<h4>
  <a name="1010521"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010522"> </a><code>&rarr;  <i>n</i></code></dt>
<dd><a name="1011012"> </a>The Value field index. The second Value field's index would be 2.</dd>

</dl>
<h4>
  <a name="1010524"> </a>Returns 
</h4>

<p><a name="1011039"> </a>Evaluates to the RDN element's Value field ID.</p>
<h4>
  <a name="1013538"> </a>Compatibility 
</h4>

<p><a name="1013542"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1010532"> </a>apCertMgrElementFieldX509ExBytesN Macro <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010534"> </a>Purpose 
</h4>

<p><a name="1011122"> </a>Macro that evaulates to the field ID for the the second and subsequent Bytes fields for an X509Extended element.</p>
<h4>
  <a name="1010536"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1010537"> </a></code><h4>
  <a name="1010538"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010539"></a>#define apCertMgrElementFieldX509ExBytesN (
   <code class="par">n</code>
)
</pre>
<h4>
  <a name="1010540"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010541"> </a><code>&rarr;  <i>n</i></code></dt>
<dd><a name="1011162"> </a>The Bytes field index. The second Bytes field's index would be 2.</dd>

</dl>
<h4>
  <a name="1010543"> </a>Returns 
</h4>

<p><a name="1011190"> </a>Evaluates to the X509Extended element's Bytes field ID.</p>
<h4>
  <a name="1013548"> </a>Compatibility 
</h4>

<p><a name="1013552"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1010551"> </a>apCertMgrElementFieldX509ExCriticalN Macro <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010553"> </a>Purpose 
</h4>

<p><a name="1011234"> </a>Macro that evaulates to the field ID for the the second and subsequent Criticial fields for an X509Extended element.</p>
<h4>
  <a name="1010555"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1010556"> </a></code><h4>
  <a name="1010557"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010558"></a>#define apCertMgrElementFieldX509ExCriticalN (
   <code class="par">n</code>
)
</pre>
<h4>
  <a name="1010559"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010560"> </a><code>&rarr;  <i>n</i></code></dt>
<dd><a name="1011266"> </a>The Critical field index. The second Critical field's index would be 2.</dd>

</dl>
<h4>
  <a name="1010562"> </a>Returns 
</h4>

<p><a name="1011290"> </a>Evaluates to the X509Extended element's Critical field ID.</p>
<h4>
  <a name="1013558"> </a>Compatibility 
</h4>

<p><a name="1013562"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1010570"> </a>apCertMgrElementFieldX509ExOIDN Macro <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1010572"> </a>Purpose 
</h4>

<p><a name="1011330"> </a>Macro that evaulates to the field ID for the the second and subsequent OID fields for an X509Extended element.</p>
<h4>
  <a name="1010574"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="1010575"> </a></code><h4>
  <a name="1010576"> </a>Prototype 
</h4>
<pre class="proto"><a name="1010577"></a>#define apCertMgrElementFieldX509ExOIDN (
   <code class="par">n</code>
)
</pre>
<h4>
  <a name="1010578"> </a>Parameters 
</h4>

<dl>
<dt><a name="1010579"> </a><code>&rarr;  <i>n</i></code></dt>
<dd><a name="1011366"> </a>The OID field index. The second OID field's index would be 2.</dd>

</dl>
<h4>
  <a name="1010581"> </a>Returns 
</h4>

<p><a name="1011398"> </a>Evaluates to the X509Extended element's OID field ID.</p>
<h4>
  <a name="1013618"> </a>Compatibility 
</h4>

<p><a name="1013622"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="994710"> </a>Certificate Manager Functions and Macros <a href="#993177"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="995446"> </a>CertMgrAddCert Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995451"> </a>Purpose 
</h4>

<p><a name="1011438"> </a>Add a certificate to the certificate store.</p>
<h4>
  <a name="995456"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="995459"> </a></code><h4>
  <a name="995461"> </a>Prototype 
</h4>
<pre class="proto"><a name="995490"></a>status_t CertMgrAddCert (
   CertMgrCertInfoType <code class="par">*certInfoP</code>,
   Boolean <code class="par">compress</code>,
   CertMgrVerifyResultType <code class="par">*verifyResult</code>
)
</pre>
<h4>
  <a name="995546"> </a>Parameters 
</h4>

<dl>
<dt><a name="995597"> </a><code>&rarr;  <i>certInfoP</i></code></dt>
<dd><a name="1011469"> </a>Pointer to <a href="CertificateMgr.html#993469"><code>CertMgrCertInfoType</code></a> structure for the certificate to be added.</dd>

<dt><a name="995721"> </a><code>&rarr;  <i>compress</i></code></dt>
<dd><a name="1011537"> </a>If <code>true</code>, the certificate is stored in compressed form. This saves space, but note that you cannot export certificates that are compressed.</dd>

<dt><a name="995773"> </a><code>&larr;  <i>verifyResult</i></code></dt>
<dd><a name="1011544"> </a>Supply a pointer to a <a href="CertificateMgr.html#994066"><code>CertMgrVerifyResultType</code></a> structure that will be filled in if the certificate could not be verified.</dd>

</dl>
<h4>
  <a name="995777"> </a>Returns 
</h4>

<p><a name="1011548"> </a>Returns <code>errNone</code> if the certificate was added successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1011549"> </a><code>certMgrErrInvalidParam</code></dt>
<dd><a name="1011550"> </a><code class="par">certInfoP</code> or <code class="par">verifyResult</code> is <code>NULL</code> .</dd>

<dt><a name="1011551"> </a><code>certMgrErrServiceNotStarted</code></dt>
<dd><a name="1011552"> </a>The Certificate Manager process has not started.</dd>

<dt><a name="1011553"> </a><code>certMgrErrDatabaseFail</code></dt>
<dd><a name="1011554"> </a>A Data Manager error occurred.</dd>

<dt><a name="1011555"> </a><code>certMgrErrBackupInProgress</code></dt>
<dd><a name="1011556"> </a>The certificate vault could not be accessed because it is in the process of being backed up.</dd>

</dl>
<h4>
  <a name="1011557"> </a>Comments 
</h4>

<p><a name="1011558"> </a>This function can be used to add an imported certificate to the certificate store.  When a certificate becomes part of the store it is verified and then saved in the Certificate Manager's secure vault.  Other applications may then query for it.</p>

<p><a name="1011559"> </a>If the certificate cannot be added due to a failure in the verification of the certificate, this function fills in the caller-supplied <a href="CertificateMgr.html#994066"><code>CertMgrVerifyResultType</code></a> structure. In many cases the caller might choose to override the verification failure and request that the certificate be stored anyway.  The only errors that cannot be overridden are signature failure and unknown issuer. To override a verification error, clear the failure code in the <code>CertMgrVerifyResultType</code> structure and then call <code>CertMgrAddCert()</code> once again.</p>

<p><a name="1011563"> </a>When the <code class="par">compress</code> parameter is set to <code>true</code>, some data is thrown away from the certificate to save space. Because of this, the stored certificate is not complete and cannot be exported at a later time.</p>
<h4>
  <a name="1011564"> </a>Example 
</h4>

<p><a name="1011565"> </a>The following code excerpt adds certificates that may be self-signed:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
while (true) {<a name="1011566"> </a>
   err = CertMgrAddCert(&amp;certInfo, false, &amp;verifyResult);<a name="1011567"> </a>
   if (err) {<a name="1011568"> </a>
      CertMgrReleaseCertInfo(&amp;certInfo);<a name="1011569"> </a>
      goto exit;<a name="1011570"> </a>
   }<a name="1011571"> </a>
<a name="1011572"> </a>
   if (verifyResult.failureCode == 0) {<a name="1011573"> </a>
      break;<a name="1011574"> </a>
   } else {<a name="1011575"> </a>
      if (verifyResult.failureCode ==
         CertMgrVerifyFailSelfSigned) {<a name="1011576"> </a>
         verifyResult.failureCode = 0;<a name="1011577"> </a>
         continue;<a name="1011578"> </a>
      }<a name="1011579"> </a>
<a name="1011580"> </a>
      /* Another type of failure */<a name="1011581"> </a>
      break;<a name="1011582"> </a>
   }<a name="1011583"> </a>
}<a name="1011584"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1013668"> </a>Compatibility 
</h4>

<p><a name="1013672"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>
<h4>
  <a name="1011585"> </a>See Also 
</h4>

<p><a name="1011592"> </a><a href="CertificateMgr.html#996273"><code>CertMgrImportCert()</code></a>, <a href="CertificateMgr.html#996493"><code>CertMgrRemoveCert()</code></a>, <a href="CertificateMgr.html#996619"><code>CertMgrVerifyCert()</code></a></p>

<h3 class="hbH3">
  <a name="995792"> </a>CertMgrExportCert Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995797"> </a>Purpose 
</h4>

<p><a name="1011671"> </a>Exports a certificate from the certificate store to a caller-supplied buffer.</p>
<h4>
  <a name="995802"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="995805"> </a></code><h4>
  <a name="995807"> </a>Prototype 
</h4>
<pre class="proto"><a name="995810"></a>status_t CertMgrExportCert (
   CertMgrCertInfoType <code class="par">*certInfoP</code>,
   uint8_t <code class="par">*certData</code>,
   uint32_t <code class="par">*certDataLen</code>
)
</pre>
<h4>
  <a name="995812"> </a>Parameters 
</h4>

<dl>
<dt><a name="995815"> </a><code>&rarr;  <i>certInfoP</i></code></dt>
<dd><a name="1011694"> </a>Reference to the certificate to be exported.</dd>

<dt><a name="995819"> </a><code>&larr;  <i>certData</i></code></dt>
<dd><a name="1011698"> </a>Pointer to a caller-allocated buffer into which the exported certificate data will be written, or <code>NULL</code> to determine how large this buffer should be (the needed size, in bytes, is returned via <code class="par">certDataLen</code>).</dd>

<dt><a name="995823"> </a><code>&harr;  <i>certDataLen</i></code></dt>
<dd><a name="1011702"> </a>When calling this function, <code>*</code><code class="par">certDataLen</code> should be set to the size of the <code class="par">certData</code> buffer, or 0 to determine how large the <code class="par">certData</code> buffer should be. Upon return <code>*</code><code class="par">certDataLen</code> is set to the size of the exported certificate data.</dd>

</dl>
<h4>
  <a name="995831"> </a>Returns 
</h4>

<p><a name="1011745"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1011746"> </a><code>certMgrErrBufTooSmall</code></dt>
<dd><a name="1011747"> </a>The export buffer is too small.  The required size is written into <code>*</code><code class="par">certDataLen</code>.</dd>

<dt><a name="1011748"> </a><code>certMgrErrNotExportable</code></dt>
<dd><a name="1011749"> </a>The certificate is not exportable. It is probably stored in compressed form.</dd>

<dt><a name="1011750"> </a><code>certMgrErrDatabaseFail</code></dt>
<dd><a name="1011751"> </a>A Data Manager error occurred.</dd>

<dt><a name="1011752"> </a><code>certMgrErrBackupInProgress</code></dt>
<dd><a name="1011753"> </a>The certificate vault could not be accessed because it is in the process of being backed up.</dd>

</dl>
<h4>
  <a name="1011754"> </a>Comments 
</h4>

<p><a name="1011755"> </a>This function attempts to fill the supplied buffer with the same data that was imported into the Certificate Manager.  </p>

<div><hr>
  <a name="1011759"> </a> <b>NOTE: </b> In Palm OS Cobalt only DER encoded X509 format certificates are supported. Because of this, all exported certificate data will be in this format.
<hr>
</div>

<p><a name="1011760"> </a>If the certificate was compressed when it was added to the store, it cannot be exported.</p>

<p><a name="1011761"> </a>If the export buffer is not large enough, an error is returned along with the expected size.</p>
<h4>
  <a name="1013705"> </a>Compatibility 
</h4>

<p><a name="1013709"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>
<h4>
  <a name="1011762"> </a>See Also 
</h4>

<p><a name="1011766"> </a><a href="CertificateMgr.html#996273"><code>CertMgrImportCert()</code></a></p>

<h3 class="hbH3">
  <a name="995863"> </a>CertMgrFindCert Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995868"> </a>Purpose 
</h4>

<p><a name="1011812"> </a>Search the certificate store for a certificate matching the specified criteria.</p>
<h4>
  <a name="995873"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="995876"> </a></code><h4>
  <a name="995878"> </a>Prototype 
</h4>
<pre class="proto"><a name="995881"></a>status_t CertMgrFindCert (
   uint32_t <code class="par">*index</code>,
   CertMgrCertSearchEnum <code class="par">searchFlag</code>,
   uint8_t <code class="par">*reference</code>,
   uint32_t <code class="par">referenceLen</code>,
   CertMgrCertInfoType <code class="par">*certInfoP</code>
)
</pre>
<h4>
  <a name="995883"> </a>Parameters 
</h4>

<dl>
<dt><a name="995886"> </a><code>&harr;  <i>index</i></code></dt>
<dd><a name="1011957"> </a>Set to 0 to start new search. As a certificate matching the specified criteria is found, <code>*</code><code class="par">index</code> is set to the index of the certificate within the certificate store.</dd>

<dt><a name="995890"> </a><code>&rarr;  <i>searchFlag</i></code></dt>
<dd><a name="1011997"> </a>Value that specifies how the search is to be performed. Supply one of the values listed under <a href="CertificateMgr.html#993505"><code>CertMgrCertSearchEnum</code></a>.</dd>

<dt><a name="995894"> </a><code>&rarr;  <i>reference</i></code></dt>
<dd><a name="1012024"> </a>The data being searched for. If <code class="par">searchFlag</code> is <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">apCertMgrSearchCertID</span>, this should be the 20-byte certID being searched for. If <code class="par">searchFlag</code> is <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">apCertMgrSearchSubjectRDN</span> search, this should be the SubjectRDN being searched for.</dd>

<dt><a name="995898"> </a><code>&rarr;  <i>referenceLen</i></code></dt>
<dd><a name="1012031"> </a>The size, in bytes, of the data pointed to by <code class="par">reference</code>.</dd>

<dt><a name="995902"> </a><code>&larr;  <i>certInfoP</i></code></dt>
<dd><a name="1012038"> </a>Pointer to a <a href="CertificateMgr.html#993469"><code>CertMgrCertInfoType</code></a> structure that is filled in as appropriate to identify the certificate that was found.</dd>

</dl>
<h4>
  <a name="995906"> </a>Returns 
</h4>

<p><a name="1012042"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1012043"> </a><code>certMgrErrInvalidParam</code></dt>
<dd><a name="1012044"> </a>One of the function parameters is invalid.</dd>

<dt><a name="1012045"> </a><code>certMgrErrServiceNotStarted</code></dt>
<dd><a name="1012046"> </a>The Certificate Manager process has not started.</dd>

<dt><a name="1012047"> </a><code>certMgrErrCertNotFound</code></dt>
<dd><a name="1012048"> </a>A certificate matching the specified criteria was not found.</dd>

<dt><a name="1012049"> </a><code>certMgrErrBackupInProgress</code></dt>
<dd><a name="1012050"> </a>The certificate vault could not be accessed because it is in the process of being backed up.</dd>

</dl>
<h4>
  <a name="1012051"> </a>Example 
</h4>

<p><a name="1012052"> </a>To find a certificate with the certificate ID in <code>certificateID</code>, do the following:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = CertMgrFindCert(0, apCertMgrSearchCertID, 
certificateID, 20,
   &amp;certInfo);<a name="1012053"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1013739"> </a>Compatibility 
</h4>

<p><a name="1013743"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>
<h4>
  <a name="1012054"> </a>See Also 
</h4>

<p><a name="1012058"> </a><a href="CertificateMgr.html#996451"><code>CertMgrReleaseCertInfo()</code></a></p>

<h3 class="hbH3">
  <a name="995921"> </a>CertMgrGetField Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995926"> </a>Purpose 
</h4>

<p><a name="1012104"> </a>Get the value of a certificate field.</p>
<h4>
  <a name="995931"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="995948"> </a></code><h4>
  <a name="995958"> </a>Prototype 
</h4>
<pre class="proto"><a name="995995"></a>status_t CertMgrGetField (
   CertMgrCertInfoType <code class="par">*certInfoP</code>,
   CertMgrCertElementEnum <code class="par">elementType</code>,
   CertMgrCertFieldEnum <code class="par">fieldType</code>,
   CertMgrElementListType <code class="par">*result</code>,
   uint32_t <code class="par">*resultLengthP</code>
)
</pre>
<h4>
  <a name="996055"> </a>Parameters 
</h4>

<dl>
<dt><a name="996098"> </a><code>&rarr;  <i>certInfoP</i></code></dt>
<dd><a name="1012108"> </a>Reference to the certificate from which the field is to be retrieved.</dd>

<dt><a name="996202"> </a><code>&rarr;  <i>elementType</i></code></dt>
<dd><a name="1012112"> </a>The certificate element type. This should be one of the values listed under <a href="CertificateMgr.html#993229"><code>CertMgrCertElementEnum</code></a>.</dd>

<dt><a name="996246"> </a><code>&rarr;  <i>fieldType</i></code></dt>
<dd><a name="1012119"> </a>The type of field to be retrieved. See <a href="CertificateMgr.html#993388"><code>CertMgrCertFieldEnum</code></a>. Note that the set of values that can be supplied to this parameter varies depending on the value of the <code class="par">elementType</code> parameter.</dd>

<dt><a name="996250"> </a><code>&larr;  <i>result</i></code></dt>
<dd><a name="1012147"> </a>Pointer to a buffer into which the field data is written, or <code>NULL</code> to obtain the size of the needed buffer. The size of the field data (actual or needed) is written into <code>*</code><code class="par">resultLengthP</code>. Note that the contents of the buffer upon return are structured according to <a href="CertificateMgr.html#993690"><code>CertMgrElementListType</code></a>.</dd>

<dt><a name="996254"> </a><code>&larr;  <i>resultLengthP</i></code></dt>
<dd><a name="1012161"> </a>When calling this function, <code>*</code><code class="par">resultLengthP</code> should be set to the size of the <code class="par">result</code> buffer, or 0 to determine how large the <code class="par">result</code> buffer should be. Upon return <code>*</code><code class="par">resultLengthP</code> is set to the size of the field data.</dd>

</dl>
<h4>
  <a name="996258"> </a>Returns 
</h4>

<p><a name="1012165"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1012166"> </a><code>certMgrErrInvalidParam</code></dt>
<dd><a name="1012167"> </a><code class="par">certInfoP</code> is <code>NULL</code> or it is not a valid certificate reference, or <code class="par">resultLengthP</code> is <code>NULL</code>.</dd>

<dt><a name="1012168"> </a><code>certMgrErrBufTooSmall</code></dt>
<dd><a name="1012169"> </a>The export buffer is too small.  The required size is written into <code>*</code><code class="par">resultLengthP</code>.</dd>

<dt><a name="1012170"> </a><code>certMgrErrFieldNotFound</code></dt>
<dd><a name="1012171"> </a>The specified field could not be found.</dd>

</dl>
<h4>
  <a name="1012172"> </a>Example 
</h4>

<p><a name="1012173"> </a>The following code excerpt shows you you might use this function.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define CertMgrOrganicationNameOIDLen   5<a name="1012174"> </a>
static uint8_t 
CertMgrOrganizationNameOID[CertMgrOrganicationNameOIDLen] =<a name="1012175"> </a>
   {0x06, 0x03, 0x55, 0x04, 0x0a};<a name="1012176"> </a>
<a name="1012177"> </a>
/* Getting the issuer RDN from the cert */<a name="1012178"> </a>
CertMgrImplGetField(certInfoP, apCertMgrElementTypeRDN,  0,
   field, &amp;fieldlen);<a name="1012179"> </a>
<a name="1012180"> </a>
/* This gets the whole issuer RDN, you must then go through 
each field and find the one that you want, an OID field leads 
a data field */<a name="1012181"> </a>
<a name="1012182"> </a>
/* The following code finds the code for the issuer name and 
sets a label to it */<a name="1012183"> </a>
/* Fields in list */<a name="1012184"> </a>
for (index = 0; index &lt; field-&gt;count; index++) {<a name="1012185"> </a>
<a name="1012186"> </a>
   if (field-&gt;element[index].dataType ==
      apCertMgrElementDataTypeASN1OID) {<a name="1012187"> </a>
      if (field-&gt;element[index].length ==
         CertMgrOrganicationNameOIDLen) {<a name="1012188"> </a>
         if (MemCmp(CertMgrOrganizationNameOID, 
            ((uint8_t *)field)+field-&gt;element[index].offset,
            CertMgrOrganizationNameOIDLen) == 0) {<a name="1012189"> </a>
<a name="1012190"> </a>
            uint16_t buflen = field-&gt;element[index +
               1].length;<a name="1012191"> </a>
            uint8_t *buffer = ((uint8_t *)field) + 
               field-&gt;element[index + 1].offset;<a name="1012192"> </a>
            uint16_t count  = 0;<a name="1012193"> </a>
<a name="1012194"> </a>
            Char label[40];<a name="1012195"> </a>
            uint16_t pre = 0;<a name="1012196"> </a>
<a name="1012197"> </a>
            MemSet(label, 40, 0);<a name="1012198"> </a>
<a name="1012199"> </a>
            if (buflen &lt; 40) {<a name="1012200"> </a>
               pre = (40 - buflen) / 2;<a name="1012201"> </a>
<a name="1012202"> </a>
               MemSet(label, pre, ' ');<a name="1012203"> </a>
            }<a name="1012204"> </a>
<a name="1012205"> </a>
            MemMove(label+pre,buffer,buflen&gt;39 ? 39:buflen);<a name="1012206"> </a>
<a name="1012207"> </a>
            FrmCopyLabel(frmP, selfsignedaddCertnameLabel,
               label);<a name="1012208"> </a>
            break;<a name="1012209"> </a>
         }<a name="1012210"> </a>
      }<a name="1012211"> </a>
   }<a name="1012212"> </a>
}<a name="1012213"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1013749"> </a>Compatibility 
</h4>

<p><a name="1013753"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="996273"> </a>CertMgrImportCert Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996278"> </a>Purpose 
</h4>

<p><a name="1012313"> </a>Imports a certificate from a buffer into the certificate store.</p>
<h4>
  <a name="996283"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="996286"> </a></code><h4>
  <a name="996288"> </a>Prototype 
</h4>
<pre class="proto"><a name="996291"></a>status_t CertMgrImportCert (
   uint8_t <code class="par">*certData</code>,
   uint32_t <code class="par">certDataLen</code>,
   CertMgrCertInfoType <code class="par">*certInfoP</code>
)
</pre>
<h4>
  <a name="996293"> </a>Parameters 
</h4>

<dl>
<dt><a name="996296"> </a><code>&rarr;  <i>certData</i></code></dt>
<dd><a name="1012325"> </a>Pointer to a buffer containing the certificate data being imported.</dd>

<dt><a name="996364"> </a><code>&rarr;  <i>certDataLen</i></code></dt>
<dd><a name="1012333"> </a>The size, in bytes, of the data in <code class="par">certData</code>.</dd>

<dt><a name="996432"> </a><code>&harr;  <i>certInfoP</i></code></dt>
<dd><a name="1012341"> </a>When calling this function, you can optionally specify the format of the certificate data by setting the <code>format</code> field of this structure. Upon return, this structure's fields are filled in appropriately to identify the certificate that was imported.</dd>

</dl>

<div><hr>
  <a name="1012345"> </a> <b>NOTE: </b> In Palm OS Cobalt only DER encoded X509 format certificates are supported.
<hr>
</div>
<h4>
  <a name="996436"> </a>Returns 
</h4>

<p><a name="1012377"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1012378"> </a><code>certMgrErrInvalidEncoding</code></dt>
<dd><a name="1012379"> </a>The specified format encoding is invalid.</dd>

<dt><a name="1012380"> </a><code>certMgrErrOutOfMemory</code></dt>
<dd><a name="1012381"> </a>There was insufficient memory to complete the operation.</dd>

<dt><a name="1012382"> </a><code>certMgrErrInvalidParam</code></dt>
<dd><a name="1012383"> </a>One of the function parameters is invalid.</dd>

<dt><a name="1012384"> </a><code>certMgrErrServiceNotStarted</code></dt>
<dd><a name="1012385"> </a>The Certificate Manager process has not started.</dd>

<dt><a name="1012386"> </a><code>certMgrErrBackupInProgress</code></dt>
<dd><a name="1012387"> </a>The certificate vault could not be accessed because it is in the process of being backed up.</dd>

<dt><a name="1012388"> </a><code>certMgrErrNotImplemented</code></dt>
<dd><a name="1012389"> </a>The requested certificate format is not supported.</dd>

</dl>
<h4>
  <a name="1012390"> </a>Example 
</h4>

<p><a name="1012391"> </a>A likely scenario would be an application that imports a certificate that was stored in the its PRC. The following code excerpt shows how to do this:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
/* Get certificate from PRC */<a name="1012392"> </a>
err = SignGetCertificateByIndex(dbP, certIndex, &amp;certBlock,
   &amp;certDataLength, certData);<a name="1012393"> </a>
<a name="1012394"> </a>
/* Load certificate onto cert mgr */<a name="1012395"> </a>
err = CertMgrImportCert(certData, certDataLength, &amp;certInfo);<a name="1012396"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1013759"> </a>Compatibility 
</h4>

<p><a name="1013763"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>
<h4>
  <a name="1012397"> </a>See Also 
</h4>

<p><a name="1012401"> </a><a href="CertificateMgr.html#995792"><code>CertMgrExportCert()</code></a></p>

<h3 class="hbH3">
  <a name="996451"> </a>CertMgrReleaseCertInfo Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996456"> </a>Purpose 
</h4>

<p><a name="1012446"> </a>Release resources that allocated by the Certificate Manager during a successful call to <a href="CertificateMgr.html#995863"><code>CertMgrFindCert()</code></a> or <a href="CertificateMgr.html#996273"><code>CertMgrImportCert()</code></a>.</p>
<h4>
  <a name="996461"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="996464"> </a></code><h4>
  <a name="996466"> </a>Prototype 
</h4>
<pre class="proto"><a name="996469"></a>status_t CertMgrReleaseCertInfo (
   CertMgrCertInfoType <code class="par">*certInfoP</code>
)
</pre>
<h4>
  <a name="996471"> </a>Parameters 
</h4>

<dl>
<dt><a name="996474"> </a><code>&rarr;  <i>certInfoP</i></code></dt>
<dd><a name="1012482"> </a>Reference to the certificate for which resources are to be released..</dd>

</dl>
<h4>
  <a name="996478"> </a>Returns 
</h4>

<p><a name="1012550"> </a>Returns <code>errNone</code> if the operation completed successfully, or <code>certMgrErrInvalidParam</code> if <code class="par">certInfoP</code> is invalid.</p>
<h4>
  <a name="1012551"> </a>Comments 
</h4>

<p><a name="1012552"> </a>Failure to call this function after a successful call to <a href="CertificateMgr.html#995863"><code>CertMgrFindCert()</code></a> or <a href="CertificateMgr.html#996273"><code>CertMgrImportCert()</code></a> will result in a memory leak.</p>
<h4>
  <a name="1013779"> </a>Compatibility 
</h4>

<p><a name="1013783"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="996493"> </a>CertMgrRemoveCert Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996502"> </a>Purpose 
</h4>

<p><a name="1012594"> </a>Remove a certificate from the certificate store.</p>
<h4>
  <a name="996515"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="996526"> </a></code><h4>
  <a name="996536"> </a>Prototype 
</h4>
<pre class="proto"><a name="996547"></a>status_t CertMgrRemoveCert (
   CertMgrCertInfoType <code class="par">*certInfoP</code>
)
</pre>
<h4>
  <a name="996561"> </a>Parameters 
</h4>

<dl>
<dt><a name="996572"> </a><code>&harr;  <i>certInfoP</i></code></dt>
<dd><a name="1012623"> </a>Pointer to <a href="CertificateMgr.html#993469"><code>CertMgrCertInfoType</code></a> structure for the certificate to be added.</dd>

</dl>
<h4>
  <a name="996596"> </a>Returns 
</h4>

<p><a name="1012683"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1012684"> </a><code>certMgrErrInvalidParam</code></dt>
<dd><a name="1012685"> </a><code class="par">certInfoP</code> is invalid.</dd>

<dt><a name="1012686"> </a><code>certMgrErrBackupInProgress</code></dt>
<dd><a name="1012687"> </a>The certificate vault could not be accessed because it is in the process of being backed up.</dd>

<dt><a name="1012688"> </a><code>certMgrErrNotRemovable</code></dt>
<dd><a name="1012689"> </a>The certificate is not removable.</dd>

</dl>
<h4>
  <a name="1012690"> </a>Comments 
</h4>

<p><a name="1012691"> </a>This function does not invalidate any other certificates already in the store.  However, it may cause further verifications of new certificates to fail (for instance, if a root certificate is removed).</p>
<h4>
  <a name="1013789"> </a>Compatibility 
</h4>

<p><a name="1013793"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>
<h4>
  <a name="1012692"> </a>See Also 
</h4>

<p><a name="1012696"> </a><a href="CertificateMgr.html#995446"><code>CertMgrAddCert()</code></a></p>

<h3 class="hbH3">
  <a name="996619"> </a>CertMgrVerifyCert Function <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996624"> </a>Purpose 
</h4>

<p><a name="1012712"> </a>Authenticate the validity of a certificate.</p>
<h4>
  <a name="996629"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="996632"> </a></code><h4>
  <a name="996634"> </a>Prototype 
</h4>
<pre class="proto"><a name="996637"></a>status_t CertMgrVerifyCert (
   CertMgrCertInfoType <code class="par">*certInfoP</code>,
   CertMgrCertChainType <code class="par">*certChainP</code>,
   CertMgrVerifyResultType <code class="par">*verifyResult</code>
)
</pre>
<h4>
  <a name="996639"> </a>Parameters 
</h4>

<dl>
<dt><a name="996642"> </a><code>&rarr;  <i>certInfoP</i></code></dt>
<dd><a name="1012719"> </a>Pointer to <a href="CertificateMgr.html#993469"><code>CertMgrCertInfoType</code></a> structure for the certificate to be validated.</dd>

<dt><a name="996646"> </a><code>&rarr;  <i>certChainP</i></code></dt>
<dd><a name="1012723"> </a>A chain of certificates that make up the authentication tree for this certificate.</dd>

<dt><a name="996650"> </a><code>&larr;  <i>verifyResult</i></code></dt>
<dd><a name="1012730"> </a>Supply a pointer to a <a href="CertificateMgr.html#994066"><code>CertMgrVerifyResultType</code></a> structure that will be filled in if the certificate could not be verified.</dd>

</dl>
<h4>
  <a name="996654"> </a>Returns 
</h4>

<p><a name="1012734"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1012735"> </a><code>certMgrErrInvalidParam</code></dt>
<dd><a name="1012736"> </a><code class="par">certInfoP</code> or <code class="par">verifyResult</code> is <code>NULL</code>.</dd>

<dt><a name="1012737"> </a><code>certMgrErrOutOfMemory</code></dt>
<dd><a name="1012738"> </a>There was insufficient memory to complete the operation.</dd>

<dt><a name="1012739"> </a><code>certMgrErrOutOfResources</code></dt>
<dd><a name="1012740"> </a>The Certificate Manager ran out of resources.</dd>

<dt><a name="1012741"> </a><code>certMgrErrServiceNotStarted</code></dt>
<dd><a name="1012742"> </a>The Certificate Manager process has not started.</dd>

</dl>

<p><a name="1012743"> </a>This function authenticates the validity of the certificate.  Many different error conditions may occur, and they are returned through the <code class="par">verifyResult</code> parameter.</p>

<p><a name="1012744"> </a>Specify a certificate chain when the chain of certificates that authenticate the specified certificate is not contained in the Certificate Manager's certificate store.  (For instance, when all or some of the certificatess in the chain have just been imported but not yet added.) When necessary, the Certificate Manager will also authenticate a certificate in the chain.  The chain need not be in any order, and the certificates in the chain need not all be part of the chain.</p>
<h4>
  <a name="1013799"> </a>Compatibility 
</h4>

<p><a name="1013803"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>
<h4>
  <a name="1012745"> </a>See Also 
</h4>

<p><a name="1012749"> </a><a href="CertificateMgr.html#995446"><code>CertMgrAddCert()</code></a></p>

<h3 class="hbH3">
  <a name="996669"> </a>CertMgrVerifyFailure Macro <a href="#993177"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996678"> </a>Purpose 
</h4>

<p><a name="1012787"> </a>Determine if a given error code is a Certificate Manager verification error.</p>
<h4>
  <a name="996683"> </a>Declared In 
</h4>
<code>CertificateMgr.h<a name="996686"> </a></code><h4>
  <a name="996688"> </a>Prototype 
</h4>
<pre class="proto"><a name="996691"></a>#define CertMgrVerifyFailure (
   <code class="par">err</code>
)
</pre>
<h4>
  <a name="996693"> </a>Parameters 
</h4>

<dl>
<dt><a name="996696"> </a><code>&rarr;  <i>err</i></code></dt>
<dd><a name="1012805"> </a>The error code being checked.</dd>

</dl>
<h4>
  <a name="996700"> </a>Returns 
</h4>

<p><a name="1012829"> </a>Evaluates to <code>true</code> if the supplied error code is within the range of verification failure errors, <code>false</code> otherwise. See <a href="CertificateMgr.html#1007615">"Certificate Verification Failure Codes"</a> for those error codes that are classified as verification errors.</p>
<h4>
  <a name="1013809"> </a>Compatibility 
</h4>

<p><a name="1013813"> </a>Implemented only if <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present.</p>

<p><a name="993173"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ByteOrderUtils.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CharacterAttributes.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>