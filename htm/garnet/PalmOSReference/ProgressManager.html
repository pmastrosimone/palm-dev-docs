<html>
<head>
<title>(68K) Progress Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:08">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="995795"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PrivateRecords.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Scrollbar.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">17 &nbsp;&nbsp;
Progress Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartI.html">Part I: User Interface</a> </h1>
<h1 class="SideTOC1"><a href="ProgressManager.html">17  Progress Manager</a></h1>

   <h2 class="SideTOC2"><a href="#995814">
   Progress Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#995817">
      PrgHandleEvent</a></h3>

      <h3 class="SideTOC3"><a href="#995878">
      PrgStartDialog</a></h3>

      <h3 class="SideTOC3"><a href="#995931">
      PrgStartDialogV31</a></h3>

      <h3 class="SideTOC3"><a href="#995973">
      PrgStopDialog</a></h3>

      <h3 class="SideTOC3"><a href="#996014">
      PrgUpdateDialog</a></h3>

      <h3 class="SideTOC3"><a href="#996068">
      PrgUserCancel</a></h3>

   <h2 class="SideTOC2"><a href="#996107">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#996110">
      PrgCallbackFunc</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="995796"> </a>This chapter provides reference material for the Progress Manager. </p>
<ul type="disc">
  <li><a name="995800"> </a><a href="ProgressManager.html#995814">Progress Manager Functions</a>
  <li><a name="995804"> </a><a href="ProgressManager.html#996107">Application-Defined Functions</a>
</ul>

<p><a name="995806"> </a>The header file <code>Progress.h</code> declares the API that this chapter describes. For more information on the progress manager, see the section <a href="../PalmOSCompanion/UserInterface.html#1008406">"Progress Dialogs"</a> in the <i>Palm OS Programmer's Companion</i>, vol. I. </p>

<h2 class="haH2">
  <a name="995814"> </a>Progress Manager Functions <a href="#995795"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="995817"> </a>PrgHandleEvent Function <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995819"> </a>Purpose 
</h4>

<p><a name="995820"> </a>Handles events related to the active progress dialog.</p>
<h4>
  <a name="995821"> </a>Declared In 
</h4>
<code>Progress.h<a name="995822"> </a></code><h4>
  <a name="995823"> </a>Prototype 
</h4>
<pre class="proto"><a name="995824"></a>Boolean PrgHandleEvent (
   ProgressPtr prgGP,
   EventType *eventP
)
</pre>
<h4>
  <a name="995825"> </a>Parameters 
</h4>

<dl>
<dt><a name="995826"> </a><code>&rarr;  <i><code>prgGP</code></i></code></dt>
<dd><a name="995827"> </a>Pointer to a progress structure created by <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>.</dd>

<dt><a name="995831"> </a><code>&rarr;  <i><code>eventP</code></i></code></dt>
<dd><a name="995832"> </a>Pointer to an event. You can pass a <code>NULL</code> event to cause this function to immediately call your <a href="ProgressManager.html#996110"><code>PrgCallbackFunc()</code></a> function and then update the dialog (for example, after you call <code>PrgUpdateDialog</code>).</dd>

</dl>
<h4>
  <a name="995836"> </a>Returns 
</h4>

<p><a name="995837"> </a>Returns <code>true</code> if the system handled the event. If it returns <code>false</code>, you should check if the user canceled the dialog by calling <a href="ProgressManager.html#996068"><code>PrgUserCancel()</code></a>.</p>
<h4>
  <a name="995841"> </a>Comments 
</h4>

<p><a name="995845"> </a>Use this function instead of <a href="SystemManager.html#1076542"><code>SysHandleEvent()</code></a> when you have a progress dialog. <code>PrgHandleEvent</code> internally calls <code>SysHandleEvent</code> as needed.</p>

<p><a name="995846"> </a>Note that the auto power-off feature of the system is automatically disabled when you use this function, unless the dialog is just displaying an error. This function also prevents <code>appStopEvent</code> events.</p>

<p><a name="995847"> </a>If an update to the dialog is pending (from a call to <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a>, for example) this function handles that event and causes the dialog to be updated. As part of this process, the <code>textCallback</code> function you specified in your call to <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a> is called. Your <code>textCallback</code> function should set the <code>textP</code> buffer in the <code>PrgCallbackData</code> structure with the new message to be displayed in the progress dialog. Optionally, you can also set the <code>bitmapId</code> field to include an icon in the update dialog. For more information about the <code>textCallback</code> function, see the section <a href="ProgressManager.html#996107">"Application-Defined Functions."</a></p>
<h4>
  <a name="995857"> </a>Compatibility 
</h4>

<p><a name="995861"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="995862"> </a>See Also 
</h4>

<p><a name="995869"> </a><a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>, <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>, <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a>, <a href="ProgressManager.html#996068"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="995878"> </a>PrgStartDialog Function <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995880"> </a>Purpose 
</h4>

<p><a name="995881"> </a>Displays a progress dialog that can be updated.</p>
<h4>
  <a name="995882"> </a>Declared In 
</h4>
<code>Progress.h<a name="995883"> </a></code><h4>
  <a name="995884"> </a>Prototype 
</h4>
<pre class="proto"><a name="995885"></a>ProgressPtr PrgStartDialog (
   const Char *title,
   PrgCallbackFunc textCallback,
   void *userDataP
)
</pre>
<h4>
  <a name="995886"> </a>Parameters 
</h4>

<dl>
<dt><a name="995887"> </a><code>&rarr;  <i><code>title</code></i></code></dt>
<dd><a name="995888"> </a>Pointer to a title for the progress dialog. Must be a null-terminated string that is no longer than <code>progressMaxTitle</code> (20).</dd>

<dt><a name="995889"> </a><code>&rarr;  <i><code>textCallback</code></i></code></dt>
<dd><a name="995890"> </a>Pointer to a callback function that supplies the text and icons for the current progress state. See <a href="ProgressManager.html#996110"><code>PrgCallbackFunc()</code></a>.</dd>

<dt><a name="995894"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="995895"> </a>A pointer to data that you need to access in the callback function. This address gets passed directly to your function. </dd>

</dl>
<h4>
  <a name="995896"> </a>Returns 
</h4>

<p><a name="995897"> </a>A pointer to a progress structure. This pointer must be passed to other progress manager functions and <i>must</i> be released by calling <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>. <code>NULL</code> is returned if the system is unable to allocate the progress structure.</p>
<h4>
  <a name="995901"> </a>Comments 
</h4>

<p><a name="995902"> </a>The dialog created by this function can be updated by another process via the <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a> function. The dialog can contain a Cancel or OK button. The initial dialog defaults to stage 0 and calls the <code>textCallback</code> function to get the initial text and icon data for the progress dialog.</p>

<p><a name="995906"> </a>This function saves the screen bits behind the progress dialog, and these are restored when you call <code>PrgStopDialog</code>. Because of this, you should minimize changes to the screen while the progress dialog is displayed, otherwise, the restored bits may not match with what is currently being displayed.</p>
<h4>
  <a name="995907"> </a>Compatibility 
</h4>

<p><a name="995911"> </a>This version of the function is available only if <a href="CompatibilityApdx.html#993903">3.2 New Feature Set</a> is present. On earlier systems, <code>PrgStartDialog</code> has the prototype shown for <a href="ProgressManager.html#995931"><code>PrgStartDialogV31()</code></a>. </p>
<h4>
  <a name="995915"> </a>See Also 
</h4>

<p><a name="995922"> </a><a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a>, <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>, <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a>, <a href="ProgressManager.html#996068"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="995931"> </a>PrgStartDialogV31 Function <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995933"> </a>Purpose 
</h4>

<p><a name="995934"> </a>Displays a progress dialog that can be updated.</p>
<h4>
  <a name="995935"> </a>Declared In 
</h4>
<code>Progress.h<a name="995936"> </a></code><h4>
  <a name="995937"> </a>Prototype 
</h4>
<pre class="proto"><a name="995938"></a>ProgressPtr PrgStartDialogV31 (
   const Char *title,
   PrgCallbackFunc textCallback
)
</pre>
<h4>
  <a name="995939"> </a>Parameters 
</h4>

<dl>
<dt><a name="995940"> </a><code>&rarr;  <i><code>title</code></i></code></dt>
<dd><a name="995941"> </a>Pointer to a title for the progress dialog. Must be a null-terminated string that is no longer than <code>progressMaxTitle</code> (20).</dd>

<dt><a name="995942"> </a><code>&rarr;  <i><code>textCallback</code></i></code></dt>
<dd><a name="995943"> </a>Pointer to a callback function that supplies the text and icons for the current progress state. See <a href="ProgressManager.html#996110"><code>PrgCallbackFunc()</code></a>.</dd>

</dl>
<h4>
  <a name="995947"> </a>Returns 
</h4>

<p><a name="995948"> </a>A pointer to a progress structure. This pointer must be passed to other progress manager functions and <i>must</i> be released by calling <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>. <code>NULL</code> is returned if the system is unable to allocate the progress structure.</p>
<h4>
  <a name="995952"> </a>Compatibility 
</h4>

<p><a name="995956"> </a>This function corresponds to version of <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a> available on Palm OS<sup>&#174;</sup> 3.0 and Palm OS 3.1.</p>
<h4>
  <a name="995957"> </a>See Also 
</h4>

<p><a name="995964"> </a><a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a>, <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>, <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a>, <a href="ProgressManager.html#996068"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="995973"> </a>PrgStopDialog Function <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995975"> </a>Purpose 
</h4>

<p><a name="995976"> </a>Releases memory used by the progress dialog and restores the screen to its initial state.</p>
<h4>
  <a name="995977"> </a>Declared In 
</h4>
<code>Progress.h<a name="995978"> </a></code><h4>
  <a name="995979"> </a>Prototype 
</h4>
<pre class="proto"><a name="995980"></a>void PrgStopDialog (
   ProgressPtr prgP,
   Boolean force
)
</pre>
<h4>
  <a name="995981"> </a>Parameters 
</h4>

<dl>
<dt><a name="995982"> </a><code>&rarr;  <i><code>prgP</code></i></code></dt>
<dd><a name="995983"> </a>Pointer to a progress structure created by <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>.</dd>

<dt><a name="995987"> </a><code>&rarr;  <i><code>force</code></i></code></dt>
<dd><a name="995988"> </a><code>true</code> removes the progress dialog immediately, <code>false</code> causes the system to wait until the user confirms an error, if one is displayed.</dd>

</dl>
<h4>
  <a name="995989"> </a>Returns 
</h4>

<p><a name="995990"> </a>Returns nothing.</p>
<h4>
  <a name="995991"> </a>Comments 
</h4>

<p><a name="995992"> </a>If the progress dialog is in a state where it is displaying an error message to the user, this function normally waits for the user to confirm the dialog before it removes the dialog. If you specify <code>true</code> for the <code>force</code> parameter, this causes the system to remove the dialog immediately.</p>
<h4>
  <a name="995993"> </a>Compatibility 
</h4>

<p><a name="995997"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="995998"> </a>See Also 
</h4>

<p><a name="996005"> </a><a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a>, <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>, <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a>, <a href="ProgressManager.html#996068"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="996014"> </a>PrgUpdateDialog Function <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996016"> </a>Purpose 
</h4>

<p><a name="996017"> </a>Updates the status of the current progress dialog.</p>
<h4>
  <a name="996018"> </a>Declared In 
</h4>
<code>Progress.h<a name="996019"> </a></code><h4>
  <a name="996020"> </a>Prototype 
</h4>
<pre class="proto"><a name="996021"></a>void PrgUpdateDialog (
   ProgressPtr prgGP,
   UInt16 err,
   UInt16 stage,
   const Char *messageP,
   Boolean updateNow
)
</pre>
<h4>
  <a name="996022"> </a>Parameters 
</h4>

<dl>
<dt><a name="996023"> </a><code>&rarr;  <i><code>prgGP</code></i></code></dt>
<dd><a name="996024"> </a>Pointer to a progress structure created by <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>.</dd>

<dt><a name="996028"> </a><code>&rarr;  <i><code>err</code></i></code></dt>
<dd><a name="996029"> </a>If non-zero, causes the dialog to go into error mode, to display an error message with only an OK button.</dd>

<dt><a name="996030"> </a><code>&rarr;  <i><code>stage</code></i></code></dt>
<dd><a name="996031"> </a>Current stage of progress. The callback function can use this to determine the correct string to display in the updated dialog.</dd>

<dt><a name="996032"> </a><code>&rarr;  <i><code>messageP</code></i></code></dt>
<dd><a name="996033"> </a>Extra text that may be useful in displaying the progress for this stage. Used by the callback function, which can append it to the base message that is based on the stage.</dd>

<dt><a name="996034"> </a><code>&rarr;  <i><code>updateNow</code></i></code></dt>
<dd><a name="996035"> </a>If <code>true</code>, the dialog is immediately updated. Otherwise, the dialog is updated on the next call to <a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a>.</dd>

</dl>
<h4>
  <a name="996039"> </a>Returns 
</h4>

<p><a name="996040"> </a>Returns nothing.</p>
<h4>
  <a name="996041"> </a>Comments 
</h4>

<p><a name="996043"> </a>For more information about how the parameters are used and the callback function, see the section <a href="ProgressManager.html#996107">"Application-Defined Functions."</a></p>
<h4>
  <a name="996047"> </a>Compatibility 
</h4>

<p><a name="996051"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996052"> </a>See Also 
</h4>

<p><a name="996062"> </a><a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a>, <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>, <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>, <a href="ProgressManager.html#996068"><code>PrgUserCancel()</code></a></p>

<h3 class="hbH3">
  <a name="996068"> </a>PrgUserCancel Macro <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996070"> </a>Purpose 
</h4>

<p><a name="996071"> </a>Returns <code>true</code> if the user cancelled the process via the progress dialog.</p>
<h4>
  <a name="996072"> </a>Declared In 
</h4>
<code>Progress.h<a name="996073"> </a></code><h4>
  <a name="996074"> </a>Prototype 
</h4>
<pre class="proto"><a name="996075"></a>#define PrgUserCancel (
   prgP
)
</pre>
<h4>
  <a name="996076"> </a>Parameters 
</h4>

<dl>
<dt><a name="996077"> </a><code>&rarr;  <i><code>prgP</code></i></code></dt>
<dd><a name="996078"> </a>Pointer to a progress structure (<code>ProgressPtr</code>) created by <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>.</dd>

</dl>
<h4>
  <a name="996082"> </a>Returns 
</h4>

<p><a name="996083"> </a>Returns the value of the <code>cancel</code> field in the progress structure (as a <code>UInt16</code>).</p>
<h4>
  <a name="996084"> </a>Comments 
</h4>

<p><a name="996085"> </a>This is a macro you can use to check if the user cancelled the process. If the user did cancel, you can change the progress dialog text to something like "Cancelling," or "Disconnecting," or whatever is appropriate for your application. Then you should cancel the process, end the communication session, or do whatever processing is necessary.</p>
<h4>
  <a name="996086"> </a>Compatibility 
</h4>

<p><a name="996090"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>
<h4>
  <a name="996091"> </a>See Also 
</h4>

<p><a name="996101"> </a><a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a>, <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>, <a href="ProgressManager.html#995973"><code>PrgStopDialog()</code></a>, <a href="ProgressManager.html#996014"><code>PrgUpdateDialog()</code></a></p>

<h2 class="haH2">
  <a name="996107"> </a>Application-Defined Functions <a href="#995795"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996110"> </a>PrgCallbackFunc Function <a href="#995795"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996112"> </a>Purpose 
</h4>

<p><a name="996113"> </a>Supplies the text and icons for the current progress state.</p>
<h4>
  <a name="996114"> </a>Declared In 
</h4>
<code>Progress.h<a name="996115"> </a></code><h4>
  <a name="996116"> </a>Prototype 
</h4>
<pre class="proto"><a name="996117"></a>Boolean (
   *PrgCallbackFunc
)(
   PrgCallbackDataPtr cbP
)
</pre>
<h4>
  <a name="996118"> </a>Parameters 
</h4>

<dl>
<dt><a name="996119"> </a><code>&harr;  <i><code>cbP</code></i></code></dt>
<dd><a name="996121"> </a>A pointer to a <code>PrgCallbackData</code> structure. See below. </dd>

</dl>
<h4>
  <a name="996122"> </a>Returns 
</h4>

<p><a name="996123"> </a>Returns <code>true</code> if the progress dialog should be updated using the values you specified in the <code>PrgCallbackData</code> structure. If you specify <code>false</code>, the dialog is still updated, but with default status messages. (Returning <code>false</code> is not recommended.)</p>
<h4>
  <a name="996124"> </a>Comments 
</h4>

<p><a name="996125"> </a>This is a callback function that you specify when you call <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a>. The callback function is called by <a href="ProgressManager.html#995817"><code>PrgHandleEvent()</code></a> when it needs current progress information to display in the progress dialog. </p>

<dl>
<dt><a name="996132"> </a><code>&rarr;  <i>The system passes this function one parameter, a pointer to a <code>PrgCallbackData</code> structure. Here are the important fields in that data structure (note that indicates you set the field in the <code>textCallback</code> function):</i></code></dt>
<dt><a name="996134"> </a><code>&larr;  <i><code>UInt16 stage</code></i></code></dt>
<dd><a name="996135"> </a>Current stage (passed from <code>PrgUpdateDialog</code>).</dd>

<dt><a name="996136"> </a><code>&harr;  <i><code>Char *textP</code></i></code></dt>
<dd><a name="996137"> </a>Buffer to hold the text to display in the updated dialog. You might want to look up a message in a resource file, based on the value in the <code>stage</code> field. Also, you should append the additional text in the <code>message</code> field, to form the full string to display. Be sure to include a null terminator at the end of the string you return, and don't exceed the length in <code>textLen</code>.</dd>

<dt><a name="996138"> </a><code>&larr;  <i><code>UInt16 textLen</code></i></code></dt>
<dd><a name="996139"> </a>Maximum length of the text buffer <code>textP</code>. Note that this value is set for you by the caller. Be careful not to exceed this length in <code>textP</code>.</dd>

<dt><a name="996140"> </a><code>&larr;  <i><code>Char *message</code></i></code></dt>
<dd><a name="996141"> </a>Additional text to display in the dialog (from the <code>messageP</code> parameter to <code>PrgUpdateDialog</code>). This should be no longer than <code>progressMaxMessage</code> (128).</dd>

<dt><a name="996142"> </a><code>&larr;  <i><code>Err error</code></i></code></dt>
<dd><a name="996143"> </a>Current error (passed from the <code>err</code> parameter to <code>PrgUpdateDialog</code>).</dd>

<dt><a name="996144"> </a><code>&rarr;  <i><code>UInt16 bitmapId</code></i></code></dt>
<dd><a name="996145"> </a>Resource ID of the bitmap to display in the progress dialog, if any.</dd>

<dt><a name="996146"> </a><code>&larr;  <i><code>UInt16 canceled:1</code></i></code></dt>
<dd><a name="996147"> </a><code>true</code> if user has pressed the cancel button.</dd>

<dt><a name="996148"> </a><code>&larr;  <i><code>UInt16 showDetails:1</code></i></code></dt>
<dd><a name="996149"> </a><code>true</code> if user pressed the down arrow button on the Palm<sup>&#8482;</sup> device for more details. (Because this is a non-standard user interface technique, you shouldn't use this feature to display details that users need under normal conditions. It's more for debugging purposes.)</dd>

<dt><a name="996150"> </a><code>&rarr;  <i><code>UInt16 textChanged:1</code></i></code></dt>
<dd><a name="996151"> </a>If <code>true</code>, then update text (defaults to <code>true</code>). You can set this to <code>false</code> to avoid an update to the text.</dd>

<dt><a name="996152"> </a><code>&larr;  <i><code>UInt16 timedOut:1</code></i></code></dt>
<dd><a name="996153"> </a><code>true</code> if update caused by a timeout.</dd>

<dt><a name="996154"> </a><code>&harr;  <i><code>UInt32 timeout</code></i></code></dt>
<dd><a name="996155"> </a>Timeout in ticks to force next update. After this number of ticks, an update is automatically triggered (which sets the <code>timedOut</code> flag). You can use this feature to do a simple animation effect. Note that you must set the timeout for <code>EvtGetEvent</code> to a value that is equal to or less than this value, otherwise you won't get update events as frequently as you expect.</dd>

<dt><a name="996156"> </a><code>&rarr;  <i><code>UInt16 delay:1</code></i></code></dt>
<dd><a name="996157"> </a>If <code>true</code>, delay for one second after updating the dialog. Use this value when you are displaying the final progress message so that users have a chance to see the message before the dialog closes. This field is available only if <a href="CompatibilityApdx.html#993903">3.2 New Feature Set</a> is present. </dd>

<dt><a name="996161"> </a><code>&larr;  <i><code>void *userDataP</code></i></code></dt>
<dd><a name="996162"> </a>A pointer to any application-defined data that the function needs to access. You specify this pointer as a parameter to <a href="ProgressManager.html#995878"><code>PrgStartDialog()</code></a> if the callback function needs to access some application data but does not have access to application globals. This field is available only if <a href="CompatibilityApdx.html#993903">3.2 New Feature Set</a> is present. </dd>

</dl>

<p><a name="996169"> </a>In this function, you should set the value of the <code>textP</code> buffer to the string you want to display in the progress dialog when it is updated. You can use the value in the <code>stage</code> field to look up a message in a string resource. You also might want to append the text in the <code>message</code> field to your base string. Typically, the <code>message</code> field would contain more dynamic information that depends on a user selection, such as a phone number, device name, or network identifier, etc.</p>

<p><a name="996170"> </a>For example, the <code>PrgUpdateDialog</code> function might have been called with a <code>stage</code> of 1 and a <code>messageP</code> parameter value of a phone number string, "555-1212". Based on the stage, you might find the string "Dialing" in a string resource, and append the phone number, to form the final text "Dialing 555-1212" that you place in the text buffer <code>textP</code>.</p>

<p><a name="996171"> </a>Keeping the static strings corresponding to various stages in a resource makes it easier to localize your application. More dynamic information can be passed in via the <code>messageP</code> parameter to <code>PrgUpdateDialog</code>.</p>

<div><hr>
  <a name="996172"> </a> <b>NOTE: </b> This function is called only if the parameters passed to <code>PrgUpdateDialog</code> have changed from the last time it was called. If <code>PrgUpdateDialog</code> is called twice with exactly the same parameters, the <code>textCallback</code> function is called only once. 
<hr>
</div>

<p><a name="996173"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PrivateRecords.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Scrollbar.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>