<html>
<head>
<title>(68K) Serial Link Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:47:10">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1018787"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="OldSerialManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelephonyBasic.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">72 &nbsp;&nbsp;
Serial Link Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartIII.html">Part III: Communications</a> </h1>
<h1 class="SideTOC1"><a href="SerialLinkManager.html">72  Serial Link Manager</a></h1>

   <h2 class="SideTOC2"><a href="#1018796">
   Serial Link Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1018799">
      SlkClose</a></h3>

      <h3 class="SideTOC3"><a href="#1018820">
      SlkCloseSocket</a></h3>

      <h3 class="SideTOC3"><a href="#1018854">
      SlkFlushSocket</a></h3>

      <h3 class="SideTOC3"><a href="#1018876">
      SlkOpen</a></h3>

      <h3 class="SideTOC3"><a href="#1018901">
      SlkOpenSocket</a></h3>

      <h3 class="SideTOC3"><a href="#1018936">
      SlkReceivePacket</a></h3>

      <h3 class="SideTOC3"><a href="#1018985">
      SlkSendPacket</a></h3>

      <h3 class="SideTOC3"><a href="#1019013">
      SlkSetSocketListener</a></h3>

      <h3 class="SideTOC3"><a href="#1019057">
      SlkSocketPortID</a></h3>

      <h3 class="SideTOC3"><a href="#1019083">
      SlkSocketSetTimeout</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1018788"> </a>This chapter provides reference material for the serial link manager API. The header file <code>SerialLinkMgr.h</code> declares the serial link manager API. For more information on the serial link manager, see the chapter <a href="../PalmOSCompanion2/SerialCommunication.html#1018070">"Serial Communication"</a> in the <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. </p>

<h2 class="haH2">
  <a name="1018796"> </a>Serial Link Manager Functions <a href="#1018787"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1018799"> </a>SlkClose Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018801"> </a>Purpose 
</h4>

<p><a name="1018802"> </a>Close down the serial link manager.</p>
<h4>
  <a name="1018803"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018804"> </a></code><h4>
  <a name="1018805"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018807"></a>Err SlkClose (
   void
)
</pre>
<h4>
  <a name="1018808"> </a>Parameters 
</h4>

<p><a name="1018809"> </a>None.</p>
<h4>
  <a name="1018810"> </a>Returns 
</h4>

<dl>
<dt><a name="1018811"> </a><code>0</code></dt>
<dd><a name="1018812"> </a>No error.</dd>

<dt><a name="1018814"> </a><code>slkErrNotOpen</code></dt>
<dd><a name="1018815"> </a>The serial link manager was not open.</dd>

</dl>
<h4>
  <a name="1018816"> </a>Comments 
</h4>

<p><a name="1018817"> </a>When the open count reaches zero, this routine frees resources allocated by serial link manager.</p>

<h3 class="hbH3">
  <a name="1018820"> </a>SlkCloseSocket Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018822"> </a>Purpose 
</h4>

<p><a name="1018826"> </a>Closes a socket previously opened with <a href="SerialLinkManager.html#1018901"><code>SlkOpenSocket()</code></a>.</p>

<p><a name="1018827"> </a>The caller is responsible for closing the communications library used by this socket, if necessary.</p>
<h4>
  <a name="1018828"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018829"> </a></code><h4>
  <a name="1018830"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018832"></a>Err<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>SlkCloseSocket (
   UInt16 socket
)
</pre>
<h4>
  <a name="1018833"> </a>Parameters 
</h4>

<dl>
<dt><a name="1018834"> </a><code><code>socket</code></code></dt>
<dd><a name="1018835"> </a>The socket ID to close.</dd>

</dl>
<h4>
  <a name="1018836"> </a>Returns 
</h4>

<dl>
<dt><a name="1018837"> </a><code>0</code></dt>
<dd><a name="1018838"> </a>No error.</dd>

<dt><a name="1018840"> </a><code>slkErrSocketNotOpen</code></dt>
<dd><a name="1018841"> </a>The socket was not open.</dd>

</dl>
<h4>
  <a name="1018842"> </a>Comments 
</h4>

<p><a name="1018843"> </a><code>SlkCloseSocket</code> frees system resources the serial link manager allocated for the socket. It does not free resources allocated and passed by the client, such as the buffers passed to <a href="SerialLinkManager.html#1019013"><code>SlkSetSocketListener()</code></a>; this is the client's responsibility. The caller is also responsible for closing the communications library used by this socket.</p>
<h4>
  <a name="1018847"> </a>See Also 
</h4>

<p><a name="1018851"> </a><a href="SerialLinkManager.html#1018901"><code>SlkOpenSocket()</code></a> </p>

<h3 class="hbH3">
  <a name="1018854"> </a>SlkFlushSocket Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018856"> </a>Purpose 
</h4>

<p><a name="1018857"> </a>Flush the receive queue of the communications library associated with the given socket.</p>
<h4>
  <a name="1018858"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018859"> </a></code><h4>
  <a name="1018860"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018862"></a>Err SlkFlushSocket (
   UInt16 socket,
   Int32 timeout
)
</pre>
<h4>
  <a name="1018863"> </a>Parameters 
</h4>

<dl>
<dt><a name="1018864"> </a><code>&rarr;  <i><code>socket</code></i></code></dt>
<dd><a name="1018865"> </a>Socket ID.</dd>

<dt><a name="1018866"> </a><code>&rarr;  <i><code>timeout</code></i></code></dt>
<dd><a name="1018867"> </a>Interbyte timeout in system ticks.</dd>

</dl>
<h4>
  <a name="1018868"> </a>Returns 
</h4>

<dl>
<dt><a name="1018869"> </a><code>0</code></dt>
<dd><a name="1018870"> </a>No error.</dd>

<dt><a name="1018872"> </a><code>slkErrSocketNotOpen</code></dt>
<dd><a name="1018873"> </a>The socket wasn't open.</dd>

</dl>

<h3 class="hbH3">
  <a name="1018876"> </a>SlkOpen Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018878"> </a>Purpose 
</h4>

<p><a name="1018879"> </a>Initialize the serial link manager.</p>
<h4>
  <a name="1018880"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018881"> </a></code><h4>
  <a name="1018882"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018884"></a>Err SlkOpen (
   void
)
</pre>
<h4>
  <a name="1018885"> </a>Parameters 
</h4>

<p><a name="1018886"> </a>None.</p>
<h4>
  <a name="1018887"> </a>Returns 
</h4>

<dl>
<dt><a name="1018888"> </a><code>0</code></dt>
<dd><a name="1018889"> </a>No error.</dd>

<dt><a name="1018891"> </a><code>slkErrAlreadyOpen</code></dt>
<dd><a name="1018892"> </a>No error.</dd>

</dl>
<h4>
  <a name="1018893"> </a>Comments 
</h4>

<p><a name="1018894"> </a>Initializes the serial link manager, allocating necessary resources. Return codes of 0 (zero) and <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrAlreadyOpen</span> both indicate success. Any other return code indicates failure. The <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrAlreadyOpen</span> function informs the client that someone else is also using the serial link manager. If the serial link manager was successfully opened by the client, the client needs to call <a href="SerialLinkManager.html#1018799"><code>SlkClose()</code></a> when it finishes using the serial link manager.</p>

<h3 class="hbH3">
  <a name="1018901"> </a>SlkOpenSocket Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018903"> </a>Purpose 
</h4>

<p><a name="1018904"> </a>Open a serial link socket and associate it with a communications library. The socket may be a known static socket or a dynamically assigned socket.</p>
<h4>
  <a name="1018905"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018906"> </a></code><h4>
  <a name="1018907"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018909"></a>Err SlkOpenSocket (
   UInt16 portID,
   UInt16 *socketP,
   Boolean staticSocket
)
</pre>
<h4>
  <a name="1018910"> </a>Parameters 
</h4>

<dl>
<dt><a name="1018911"> </a><code><code>portID</code></code></dt>
<dd><a name="1018912"> </a>Comm library reference number for socket.</dd>

<dt><a name="1018913"> </a><code><code>socketP</code></code></dt>
<dd><a name="1018914"> </a>Pointer to location for returning the socket ID.</dd>

<dt><a name="1018915"> </a><code><code>staticSocket</code></code></dt>
<dd><a name="1018916"> </a>If <code>TRUE</code>, *<code>socketP</code> contains the desired static socket number to open. If <code>FALSE</code>, any free socket number is assigned dynamically and opened.</dd>

</dl>
<h4>
  <a name="1018917"> </a>Returns 
</h4>

<dl>
<dt><a name="1018918"> </a><code>0</code></dt>
<dd><a name="1018919"> </a>No error.</dd>

<dt><a name="1018921"> </a><code>slkErrOutOfSockets</code></dt>
<dd><a name="1018922"> </a>No more sockets can be opened.</dd>

</dl>
<h4>
  <a name="1018923"> </a>Comments 
</h4>

<p><a name="1018924"> </a>The communications library must already be initialized and opened (see <a href="OldSerialManager.html#1014092"><code>SerOpen()</code></a>). When finished using the socket, the caller must call <a href="SerialLinkManager.html#1018820"><code>SlkCloseSocket()</code></a> to free system resources allocated for the socket. For information about well-known static socket IDs, see <a href="../PalmOSCompanion2/SerialCommunication.html#1019079">The Serial Link Protocol</a>.</p>

<h3 class="hbH3">
  <a name="1018936"> </a>SlkReceivePacket Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018938"> </a>Purpose 
</h4>

<p><a name="1018939"> </a>Receive and validate a packet for a particular socket or for any socket. Check for format and checksum errors.</p>
<h4>
  <a name="1018940"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018941"> </a></code><h4>
  <a name="1018942"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018944"></a>Err SlkReceivePacket (
   UInt16 socket,
   Boolean andOtherSockets,
   SlkPktHeaderPtr headerP,
   void *bodyP,
   UInt16 bodySize,
   Int32 timeout
)
</pre>
<h4>
  <a name="1018945"> </a>Parameters 
</h4>

<dl>
<dt><a name="1018946"> </a><code>&rarr;  <i><code>socket</code></i></code></dt>
<dd><a name="1018947"> </a>The socket ID.</dd>

<dt><a name="1018948"> </a><code>&rarr;  <i><code>andOtherSockets</code></i></code></dt>
<dd><a name="1018949"> </a>If <code>TRUE</code>, ignore destination in packet header.</dd>

<dt><a name="1018950"> </a><code>&harr;  <i><code>headerP</code></i></code></dt>
<dd><a name="1018951"> </a>Pointer to the packet header buffer (size of SlkPktHeaderType).</dd>

<dt><a name="1018952"> </a><code>&harr;  <i><code>bodyP</code></i></code></dt>
<dd><a name="1018953"> </a>Pointer to the packet client data buffer.</dd>

<dt><a name="1018954"> </a><code>&rarr;  <i><code>bodySize</code></i></code></dt>
<dd><a name="1018955"> </a>Size of the client data buffer (maximum client data size which can be accommodated).</dd>

<dt><a name="1018956"> </a><code>&rarr;  <i><code>timeout</code></i></code></dt>
<dd><a name="1018957"> </a>Maximum number of system ticks to wait for beginning of a packet; -1 means wait forever.</dd>

</dl>
<h4>
  <a name="1018958"> </a>Returns 
</h4>

<dl>
<dt><a name="1018959"> </a><code>0</code></dt>
<dd><a name="1018960"> </a>No error.</dd>

<dt><a name="1018962"> </a><code><code>slkErrSocketNotOpen</code></code></dt>
<dd><a name="1018963"> </a>The socket was not open.</dd>

<dt><a name="1018965"> </a><code><code>slkErrTimeOut</code></code></dt>
<dd><a name="1018966"> </a>Timed out waiting for a packet.</dd>

<dt><a name="1018968"> </a><code><code>slkErrWrongDestSocket</code></code></dt>
<dd><a name="1018969"> </a>The packet being received had an unexpected destination.</dd>

<dt><a name="1018971"> </a><code><code>slkErrChecksum</code></code></dt>
<dd><a name="1018972"> </a>Invalid header checksum or packet CRC-16.</dd>

<dt><a name="1018974"> </a><code><code>slkErrBuffer</code></code></dt>
<dd><a name="1018975"> </a>Client data buffer was too small for packet's client data.</dd>

</dl>

<p><a name="1018976"> </a>If <code>andOtherSockets</code> is <code>FALSE</code>, this routine returns with an error code unless it gets a packet for the specific socket.</p>

<p><a name="1018977"> </a>If <code>andOtherSockets</code> is <code>TRUE</code>, this routine returns successfully if it sees any incoming packet from the communications library used by <code>socket</code>.</p>
<h4>
  <a name="1018978"> </a>Comments 
</h4>

<p><a name="1018979"> </a>You may request to receive a packet for the passed socket ID only, or for any open socket which does not have a socket listener. The parameters also specify buffers for the packet header and client data, and a timeout. The timeout indicates how long the receiver should wait for a packet to begin arriving before timing out. If a packet is received for a socket with a registered socket listener, it will be dispatched via its socket listener procedure. On success, the packet header buffer and packet client data buffer is filled in with the actual size of the packet's client data in the packet header's <code>bodySize</code> field.</p>

<h3 class="hbH3">
  <a name="1018985"> </a>SlkSendPacket Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1018987"> </a>Purpose 
</h4>

<p><a name="1018988"> </a>Send a serial link packet via the serial output driver. </p>
<h4>
  <a name="1018989"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1018990"> </a></code><h4>
  <a name="1018991"> </a>Prototype 
</h4>
<pre class="proto"><a name="1018993"></a>Err<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>SlkSendPacket (
   SlkPktHeaderPtr headerP,
   SlkWriteDataPtr writeList
)
</pre>
<h4>
  <a name="1018994"> </a>Parameters 
</h4>

<dl>
<dt><a name="1018995"> </a><code>&harr;  <i><code>headerP</code></i></code></dt>
<dd><a name="1018996"> </a>Pointer to the packet header structure with client information filled in (see Comments).</dd>

<dt><a name="1018997"> </a><code>&rarr;  <i><code>writeList</code></i></code></dt>
<dd><a name="1018998"> </a>List of packet client data blocks (see Comments).</dd>

</dl>
<h4>
  <a name="1018999"> </a>Returns 
</h4>

<dl>
<dt><a name="1019000"> </a><code>0</code></dt>
<dd><a name="1019001"> </a>No error.</dd>

<dt><a name="1019003"> </a><code>slkErrSocketNotOpen</code></dt>
<dd><a name="1019004"> </a>The socket was not open.</dd>

<dt><a name="1019006"> </a><code>slkErrTimeOut</code></dt>
<dd><a name="1019007"> </a>Handshake timeout.</dd>

</dl>
<h4>
  <a name="1019008"> </a>Comments 
</h4>

<p><a name="1019009"> </a><span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SlkSendPacket</span> stuffs the signature, client data size, and the checksum fields of the packet header. The caller must fill in all other packet header fields. If the transaction ID field is set to 0 (zero), the serial link manager automatically generates and stuffs a new non-zero transaction ID. The array of <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SlkWriteDataType</span> structures enables the caller to specify the client data part of the packet as a list of noncontiguous blocks. The end of list is indicated by an array element with the <code>size</code> field set to 0 (zero). This call blocks until the entire packet is sent out or until an error occurs.</p>

<h3 class="hbH3">
  <a name="1019013"> </a>SlkSetSocketListener Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1019015"> </a>Purpose 
</h4>

<p><a name="1019016"> </a>Register a socket listener for a particular socket. </p>
<h4>
  <a name="1019017"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1019018"> </a></code><h4>
  <a name="1019019"> </a>Prototype 
</h4>
<pre class="proto"><a name="1019021"></a>Err SlkSetSocketListener (
   UInt16 socket,
   SlkSocketListenPtr socketP
)
</pre>
<h4>
  <a name="1019022"> </a>Parameters 
</h4>

<dl>
<dt><a name="1019023"> </a><code>&rarr;  <i><code>socket</code></i></code></dt>
<dd><a name="1019024"> </a>Socket ID.</dd>

<dt><a name="1019025"> </a><code>&rarr;  <i><code>socketP</code></i></code></dt>
<dd><a name="1019026"> </a>Pointer to a SlkSocketListenType structure.</dd>

</dl>
<h4>
  <a name="1019027"> </a>Returns 
</h4>

<dl>
<dt><a name="1019028"> </a><code>0</code></dt>
<dd><a name="1019029"> </a>No error.</dd>

<dt><a name="1019031"> </a><code><code>slkErrBadParam</code></code></dt>
<dd><a name="1019032"> </a>Invalid parameter.</dd>

<dt><a name="1019034"> </a><code><code>slkErrSocketNotOpen</code></code></dt>
<dd><a name="1019035"> </a>The socket was not open.</dd>

</dl>
<h4>
  <a name="1019036"> </a>Comments 
</h4>

<p><a name="1019037"> </a>Called by applications to set up a socket listener.</p>

<p><a name="1019038"> </a>Since the serial link manager does not make a copy of the <code>SlkSocketListenType</code> structure, but instead saves the passed pointer to it, the structure </p>
<ul type="disc">
  <li><a name="1019039"> </a>must <span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">not</span> be an automatic variable (that is, local variable allocated on the stack) 
  <li><a name="1019040"> </a>may be a global variable in an application
  <li><a name="1019041"> </a>may be a locked chunk allocated from the dynamic heap 
</ul>

<p><a name="1019043"> </a>The <code>SlkSocketListenType</code> structure specifies pointers to the socket listener procedure and the data buffers for dispatching packets destined for this socket. Pointers to two buffers must be specified: the packet header buffer (size of <code>SlkPktHeaderType</code>), and the packet body (client data) buffer. The packet body buffer must be large enough for the largest expected client data size. Both buffers may be application global variables or locked chunks allocated from the dynamic heap. </p>

<p><a name="1019047"> </a>The socket listener procedure is called when a valid packet is received for the socket. Pointers to the packet header buffer and the packet body buffer are passed as parameters to the socket listener procedure. </p>

<div><hr>
  <a name="1019048"> </a> <b>NOTE: </b> The application is responsible for freeing the <code>SlkSocketListenType</code> structure or the allocated buffers when the socket is closed. The serial link manager doesn't do it. 
<hr>
</div>
<h4>
  <a name="1019050"> </a>Compatibility 
</h4>

<p><a name="1019054"> </a>If either <a href="CompatibilityApdx.html#997336">5.0 New Feature Set</a> or <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present this function is unimplemented.</p>

<h3 class="hbH3">
  <a name="1019057"> </a>SlkSocketPortID Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1019059"> </a>Purpose 
</h4>

<p><a name="1019060"> </a>Get the port ID associated with a particular socket; for use with the new serial manager.</p>
<h4>
  <a name="1019061"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1019062"> </a></code><h4>
  <a name="1019063"> </a>Prototype 
</h4>
<pre class="proto"><a name="1019064"></a>ErrSlkSocketPortID (
   UInt16 socket,
   UInt16 *portIDP
)
</pre>
<h4>
  <a name="1019065"> </a>Parameters 
</h4>

<dl>
<dt><a name="1019066"> </a><code>&rarr;  <i><code>socket</code></i></code></dt>
<dd><a name="1019067"> </a>The socket ID.</dd>

<dt><a name="1019068"> </a><code>&harr;  <i><code>portIDP</code></i></code></dt>
<dd><a name="1019069"> </a>Pointer to location for returning the port ID.</dd>

</dl>
<h4>
  <a name="1019070"> </a>Returns 
</h4>

<dl>
<dt><a name="1019071"> </a><code>0</code></dt>
<dd><a name="1019072"> </a>No error.</dd>

<dt><a name="1019074"> </a><code>slkErrSocketNotOpen</code></dt>
<dd><a name="1019075"> </a>The socket was not open.</dd>

</dl>
<h4>
  <a name="1019076"> </a>Compatibility 
</h4>

<p><a name="1019080"> </a>Implemented only if <a href="CompatibilityApdx.html#994398">New Serial Manager Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1019083"> </a>SlkSocketSetTimeout Function <a href="#1018787"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1019085"> </a>Purpose 
</h4>

<p><a name="1019086"> </a>Set the interbyte packet receive-timeout for a particular socket.</p>
<h4>
  <a name="1019087"> </a>Declared In 
</h4>
<code>SerialLinkMgr.h<a name="1019088"> </a></code><h4>
  <a name="1019089"> </a>Prototype 
</h4>
<pre class="proto"><a name="1019091"></a>Err<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>SlkSocketSetTimeout (
   UInt16 socket,
   Int32 timeout
)
</pre>
<h4>
  <a name="1019092"> </a>Parameters 
</h4>

<dl>
<dt><a name="1019093"> </a><code>&rarr;  <i><code>socket</code></i></code></dt>
<dd><a name="1019094"> </a>Socket ID.</dd>

<dt><a name="1019095"> </a><code>&rarr;  <i><code>timeout</code></i></code></dt>
<dd><a name="1019096"> </a>Interbyte packet receive-timeout in system ticks.</dd>

</dl>
<h4>
  <a name="1019097"> </a>Returns 
</h4>

<dl>
<dt><a name="1019098"> </a><code>0</code></dt>
<dd><a name="1019099"> </a>No error.</dd>

<dt><a name="1019101"> </a><code>slkErrSocketNotOpen</code></dt>
<dd><a name="1019102"> </a>The socket was not open.</dd>

</dl>

<p><a name="1019103"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="OldSerialManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelephonyBasic.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>