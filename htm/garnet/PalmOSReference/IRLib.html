<html>
<head>
<title>(68K) IR Library | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:55">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1072694"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ExgLibAPI.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ModemManager.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">64 &nbsp;&nbsp;
IR Library</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartIII.html">Part III: Communications</a> </h1>
<h1 class="SideTOC1"><a href="IRLib.html">64  IR Library</a></h1>

   <h2 class="SideTOC2"><a href="#1072754">
   IR Library Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1072758">
      IrConnect</a></h3>

      <h3 class="SideTOC3"><a href="#1072823">
      IrPacket</a></h3>

      <h3 class="SideTOC3"><a href="#1072871">
      IrIASObject</a></h3>

      <h3 class="SideTOC3"><a href="#1072906">
      IrIasQuery</a></h3>

      <h3 class="SideTOC3"><a href="#1072978">
      IrCallbackParms</a></h3>

      <h3 class="SideTOC3"><a href="#1073033">
      IrStatsType </a></h3>

   <h2 class="SideTOC2"><a href="#1073060">
   IR Library Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1073062">
      IR Control Constants</a></h3>

   <h2 class="SideTOC2"><a href="#1073161">
   IR Stack Callback Events</a></h2>

      <h3 class="SideTOC3"><a href="#1073168">
      LEVENT_DATA_IND</a></h3>

      <h3 class="SideTOC3"><a href="#1073171">
      LEVENT_DISCOVERY_CNF</a></h3>

      <h3 class="SideTOC3"><a href="#1073174">
      LEVENT_LAP_CON_CNF</a></h3>

      <h3 class="SideTOC3"><a href="#1073177">
      LEVENT_LAP_CON_IND</a></h3>

      <h3 class="SideTOC3"><a href="#1073180">
      LEVENT_LAP_DISCON_IND</a></h3>

      <h3 class="SideTOC3"><a href="#1073183">
      LEVENT_LM_CON_CNF</a></h3>

      <h3 class="SideTOC3"><a href="#1073186">
      LEVENT_LM_CON_IND</a></h3>

      <h3 class="SideTOC3"><a href="#1073189">
      LEVENT_LM_DISCON_IND</a></h3>

      <h3 class="SideTOC3"><a href="#1073192">
      LEVENT_PACKET_HANDLED</a></h3>

      <h3 class="SideTOC3"><a href="#1073195">
      LEVENT_STATUS_IND</a></h3>

      <h3 class="SideTOC3"><a href="#1073201">
      LEVENT_TEST_CNF</a></h3>

      <h3 class="SideTOC3"><a href="#1073206">
      LEVENT_TEST_IND</a></h3>

   <h2 class="SideTOC2"><a href="#1073209">
   IR Library Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1073215">
      IrAdvanceCredit</a></h3>

      <h3 class="SideTOC3"><a href="#1073242">
      IrBind</a></h3>

      <h3 class="SideTOC3"><a href="#1073274">
      IrClose</a></h3>

      <h3 class="SideTOC3"><a href="#1073300">
      IrConnectIrLap</a></h3>

      <h3 class="SideTOC3"><a href="#1073328">
      IrConnectReq</a></h3>

      <h3 class="SideTOC3"><a href="#1073367">
      IrConnectRsp</a></h3>

      <h3 class="SideTOC3"><a href="#1073406">
      IrDataReq</a></h3>

      <h3 class="SideTOC3"><a href="#1073448">
      IrDisconnectIrLap</a></h3>

      <h3 class="SideTOC3"><a href="#1073471">
      IrDiscoverReq</a></h3>

      <h3 class="SideTOC3"><a href="#1073503">
      IrIsIrLapConnected</a></h3>

      <h3 class="SideTOC3"><a href="#1073525">
      IrIsMediaBusy</a></h3>

      <h3 class="SideTOC3"><a href="#1073545">
      IrIsNoProgress</a></h3>

      <h3 class="SideTOC3"><a href="#1073565">
      IrIsRemoteBusy</a></h3>

      <h3 class="SideTOC3"><a href="#1073585">
      IrLocalBusy</a></h3>

      <h3 class="SideTOC3"><a href="#1073611">
      IrMaxRxSize</a></h3>

      <h3 class="SideTOC3"><a href="#1073636">
      IrMaxTxSize</a></h3>

      <h3 class="SideTOC3"><a href="#1073661">
      IrOpen</a></h3>

      <h3 class="SideTOC3"><a href="#1073703">
      IrSetConTypeLMP</a></h3>

      <h3 class="SideTOC3"><a href="#1073726">
      IrSetConTypeTTP</a></h3>

      <h3 class="SideTOC3"><a href="#1073749">
      IrSetDeviceInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1073776">
      IrTestReq</a></h3>

      <h3 class="SideTOC3"><a href="#1073814">
      IrUnbind</a></h3>

   <h2 class="SideTOC2"><a href="#1073841">
   IAS Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#1073901">
      IrIAS_Add</a></h3>

      <h3 class="SideTOC3"><a href="#1073933">
      IrIAS_GetInteger</a></h3>

      <h3 class="SideTOC3"><a href="#1073959">
      IrIAS_GetIntLsap</a></h3>

      <h3 class="SideTOC3"><a href="#1073985">
      IrIAS_GetObjectID</a></h3>

      <h3 class="SideTOC3"><a href="#1074008">
      IrIAS_GetOctetString</a></h3>

      <h3 class="SideTOC3"><a href="#1074034">
      IrIAS_GetOctetStringLen</a></h3>

      <h3 class="SideTOC3"><a href="#1074060">
      IrIAS_GetType</a></h3>

      <h3 class="SideTOC3"><a href="#1074083">
      IrIAS_GetUserString</a></h3>

      <h3 class="SideTOC3"><a href="#1074109">
      IrIAS_GetUserStringCharSet</a></h3>

      <h3 class="SideTOC3"><a href="#1074135">
      IrIAS_GetUserStringLen</a></h3>

      <h3 class="SideTOC3"><a href="#1074161">
      IrIAS_Next</a></h3>

      <h3 class="SideTOC3"><a href="#1074188">
      IrIAS_Query</a></h3>

      <h3 class="SideTOC3"><a href="#1074228">
      IrIAS_SetDeviceName</a></h3>

      <h3 class="SideTOC3"><a href="#1074253">
      IrIAS_StartResult</a></h3>

   <h2 class="SideTOC2"><a href="#1074275">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1074279">
      IrIasQueryCallBack</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1072720"> </a>The IR (InfraRed) library is a shared library that provides a direct interface to the IR communications capabilities of the Palm OS<sup>&#174;</sup>. This chapter provides reference material for the IR library API:</p>
<ul type="disc">
  <li><a name="1072724"> </a><a href="IRLib.html#1072754">IR Library Data Structures</a>
  <li><a name="1072728"> </a><a href="IRLib.html#1073060">IR Library Constants</a>
  <li><a name="1072732"> </a><a href="IRLib.html#1073161">IR Stack Callback Events</a>
  <li><a name="1072736"> </a><a href="IRLib.html#1073209">IR Library Functions</a>
  <li><a name="1072740"> </a><a href="IRLib.html#1073841">IAS Functions and Macros</a>
  <li><a name="1072744"> </a><a href="IRLib.html#1074275">Application-Defined Functions</a>
</ul>

<p><a name="1072746"> </a>The header file <code>irlib.h</code> declares the IR library API. For more information on the IR library, see the chapter <a href="../PalmOSCompanion2/Beaming.html#1009227">"Beaming (Infrared Communication)"</a> in the <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. </p>

<h2 class="haH2">
  <a name="1072754"> </a>IR Library Data Structures <a href="#1072694"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1072755"> </a>This section lists some of the more important data types used by the IR library functions.</p>

<h3 class="hbH3">
  <a name="1072758"> </a>IrConnect Struct <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1072760"> </a>Purpose 
</h4>

<p><a name="1072761"> </a>The <code>IrConnect</code> structure is used to manage an IrLMP or Tiny TP connection.</p>
<h4>
  <a name="1072762"> </a>Prototype 
</h4>
<pre class="proto"><a name="1072763"></a>typedef struct _hconnect {
  UInt8 lLsap;
  UInt8 rLsap;
  UInt8 flags;
  UInt8 reserved;
  IrCallBack callBack;
  <a href="IRLib.html#1072823"><code>IrPacket</code></a> packet;
  ListEntry packets;
  UInt16 sendCredit;
  UInt8 availCredit;
  UInt8 dataOff;
} _hconnect;
</pre>
<h4>
  <a name="1109871"> </a>Fields 
</h4>

<dl>
<dt><a name="1072781"> </a><code><code>lLsap</code></code></dt>
<dd><a name="1072783"> </a>The local LSAP on which this connection listens.</dd>

<dt><a name="1072785"> </a><code><code>rLsap</code></code></dt>
<dd><a name="1072787"> </a>The LSAP assigned to the remote side.</dd>

<dt><a name="1072789"> </a><code><code>flags</code></code></dt>
<dd><a name="1072791"> </a>For system use only.</dd>

<dt><a name="1072793"> </a><code><code>reserved</code></code></dt>
<dd><a name="1072795"> </a>Reserved for future use.</dd>

<dt><a name="1072797"> </a><code><code>callBack</code></code></dt>
<dd><a name="1072799"> </a>Pointer to callback function. For system use only.</dd>

<dt><a name="1072801"> </a><code><code>packet</code></code></dt>
<dd><a name="1072803"> </a>For system use only.</dd>

<dt><a name="1072805"> </a><code><code>packets</code></code></dt>
<dd><a name="1072807"> </a>List of packets to send.</dd>

<dt><a name="1072809"> </a><code><code>sendCredit</code></code></dt>
<dd><a name="1072811"> </a>Amount of credit from peer.</dd>

<dt><a name="1072813"> </a><code><code>availCredit</code></code></dt>
<dd><a name="1072815"> </a>Amount of credit to give to peer.</dd>

<dt><a name="1072817"> </a><code><code>dataOff</code></code></dt>
<dd><a name="1072819"> </a>Amount of data less than IrLAP size.</dd>

</dl>

<h3 class="hbH3">
  <a name="1072823"> </a>IrPacket Struct <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1072825"> </a>Purpose 
</h4>

<p><a name="1072826"> </a>The <code>IrPacket</code> structure is used for sending IrDA packets.</p>
<h4>
  <a name="1072827"> </a>Prototype 
</h4>
<pre class="proto"><a name="1072828"></a>typedef struct _IrPacket {
  ListEntry node;
  UInt8 *buff;
  UInt16 len;
  IrConnect *origin;
  UInt8 headerLen;
  UInt8 header[14];
  UInt8 reserved;
} IrPacket;
</pre>
<h4>
  <a name="1110216"> </a>Fields 
</h4>

<dl>
<dt><a name="1072840"> </a><code><code>node</code></code></dt>
<dd><a name="1072842"> </a>For system use only.</dd>

<dt><a name="1072844"> </a><code><code>buff</code></code></dt>
<dd><a name="1072846"> </a>Pointer to the send data buffer.</dd>

<dt><a name="1072848"> </a><code><code>len</code></code></dt>
<dd><a name="1072850"> </a>Number of bytes in data buffer.</dd>

<dt><a name="1072852"> </a><code><code>origin</code></code></dt>
<dd><a name="1072854"> </a>Pointer to connection that owns the packet. For system use only.</dd>

<dt><a name="1072856"> </a><code><code>headerLen</code></code></dt>
<dd><a name="1072858"> </a>Number of bytes contained in the header. For system use only.</dd>

<dt><a name="1072860"> </a><code><code>header</code></code></dt>
<dd><a name="1072862"> </a>Storage for header. For system use only.</dd>

<dt><a name="1072864"> </a><code><code>reserved</code></code></dt>
<dd><a name="1072866"> </a>Reserved for future use.</dd>

</dl>

<div><hr>
  <a name="1072868"> </a> <b>IMPORTANT: </b> The <code>node</code> field must be the first field in the structure. It is used internally by the stack.
<hr>
</div>

<h3 class="hbH3">
  <a name="1072871"> </a>IrIASObject Struct <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1072873"> </a>Purpose 
</h4>

<p><a name="1072874"> </a>The <code>IrIASObject</code> structure is used as storage for an IAS object managed by the local IAS server. An object of this type is passed as the <code>obj</code> parameter to the <a href="IRLib.html#1073901"><code>IrIAS_Add()</code></a> function.</p>
<h4>
  <a name="1072878"> </a>Prototype 
</h4>
<pre class="proto"><a name="1072879"></a>typedef struct _IrIasObject {
  UInt8 *name;
  UInt8 len;
  UInt8 nAttribs;
  IrIasAttribute *attribs;
} IrIasObject;
</pre>
<h4>
  <a name="1110272"> </a>Fields 
</h4>

<dl>
<dt><a name="1072888"> </a><code><code>name</code></code></dt>
<dd><a name="1072890"> </a>Pointer to name of object.</dd>

<dt><a name="1072892"> </a><code><code>len</code></code></dt>
<dd><a name="1072894"> </a>Length of object name.</dd>

<dt><a name="1072896"> </a><code><code>nAttribs</code></code></dt>
<dd><a name="1072898"> </a>Number of attributes.</dd>

<dt><a name="1072900"> </a><code><code>attribs</code></code></dt>
<dd><a name="1072902"> </a>Pointer to an array of attributes.</dd>

</dl>

<h3 class="hbH3">
  <a name="1072906"> </a>IrIasQuery Struct <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1072908"> </a>Purpose 
</h4>

<p><a name="1072909"> </a>The <code>IrIasQuery</code> structure is used to perform IAS queries. The <code>IrIasQuery</code> object is passed as the <code>token</code> parameter to functions such as <a href="IRLib.html#1074188"><code>IrIAS_Query()</code></a> and <a href="IRLib.html#1074161"><code>IrIAS_Next()</code></a>.</p>
<h4>
  <a name="1072916"> </a>Prototype 
</h4>
<pre class="proto"><a name="1072917"></a>typedef struct _IrIasQuery {
  UInt8 queryLen;
  UInt8 reserved;
  UInt8 *queryBuf;
  UInt16 resultBufSize;
  UInt16 resultLen;
  UInt16 listLen;
  UInt16 offset;
  UInt8 retCode;
  UInt8 overFlow;
  UInt8 *result;
  IrIasQueryCallBack callBack;
} _IrIasQuery;
</pre>
<h4>
  <a name="1111267"> </a>Fields 
</h4>

<dl>
<dt><a name="1072933"> </a><code><code>queryLen</code></code></dt>
<dd><a name="1072935"> </a>Total length of the query.</dd>

<dt><a name="1072937"> </a><code><code>reserved</code></code></dt>
<dd><a name="1072939"> </a>Reserved for future use.</dd>

<dt><a name="1072941"> </a><code><code>queryBuf</code></code></dt>
<dd><a name="1072943"> </a>Pointer to buffer containing the query.</dd>

<dt><a name="1072945"> </a><code><code>resultBufSize</code></code></dt>
<dd><a name="1072947"> </a>Size of the result buffer.</dd>

<dt><a name="1072949"> </a><code><code>resultLen</code></code></dt>
<dd><a name="1072951"> </a>Actual number of bytes in the result buffer.</dd>

<dt><a name="1072953"> </a><code><code>listLen</code></code></dt>
<dd><a name="1072955"> </a>Number of items in the result list.</dd>

<dt><a name="1072957"> </a><code><code>offset</code></code></dt>
<dd><a name="1072959"> </a>Offset into the results buffer.</dd>

<dt><a name="1072961"> </a><code><code>retCode</code></code></dt>
<dd><a name="1072963"> </a>Return code of operation.</dd>

<dt><a name="1072965"> </a><code><code>overFlow</code></code></dt>
<dd><a name="1072967"> </a>Set to <code>true</code> if result exceeded result buffer size.</dd>

<dt><a name="1072969"> </a><code><code>result</code></code></dt>
<dd><a name="1072971"> </a>Pointer to buffer containing result.</dd>

<dt><a name="1072973"> </a><code><code>callBack</code></code></dt>
<dd><a name="1072975"> </a>Pointer to query callback function.</dd>

</dl>

<h3 class="hbH3">
  <a name="1072978"> </a>IrCallbackParms Struct <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1072980"> </a>Purpose 
</h4>

<p><a name="1072981"> </a>The <code>IrCallbackParms</code> structure is used to pass information from the stack to the upper layer of the stack (application). Not all fields are valid at any given time. The type of event determines which fields are valid. The <code>IrCallbackParms</code> object is passed as the second parameter to the <code>IrCallback</code> function.</p>
<h4>
  <a name="1072982"> </a>Prototype 
</h4>
<pre class="proto"><a name="1072983"></a>typedef struct {
  IrEvent event;
  UInt8 reserved1;
  UInt8 *rxBuff;
  UInt16 rxLen;
  <a href="IRLib.html#1072823"><code>IrPacket</code></a> *packet;
  IrDeviceList *deviceList;
  IrStatus status;
  UInt8 reserved2;
} IrCallBackParms;
</pre>
<h4>
  <a name="1111456"> </a>Fields 
</h4>

<dl>
<dt><a name="1072999"> </a><code><code>event</code></code></dt>
<dd><a name="1073001"> </a>Event causing the callback.</dd>

<dt><a name="1073003"> </a><code><code>reserved1</code></code></dt>
<dd><a name="1073005"> </a>Reserved for future use.</dd>

<dt><a name="1073007"> </a><code><code>rxBuff</code></code></dt>
<dd><a name="1073009"> </a>Received data buffer.</dd>

<dt><a name="1073011"> </a><code><code>rxLen</code></code></dt>
<dd><a name="1073013"> </a>Length of data in received buffer.</dd>

<dt><a name="1073015"> </a><code><code>packet</code></code></dt>
<dd><a name="1073017"> </a>Pointer to packet being returned.</dd>

<dt><a name="1073019"> </a><code><code>deviceList</code></code></dt>
<dd><a name="1073021"> </a>Pointer to discovery device list.</dd>

<dt><a name="1073023"> </a><code><code>status</code></code></dt>
<dd><a name="1073025"> </a>Status of stack.</dd>

<dt><a name="1073027"> </a><code><code>reserved2</code></code></dt>
<dd><a name="1073029"> </a>Reserved for future use.</dd>

</dl>

<h3 class="hbH3">
  <a name="1073033"> </a>IrStatsType  Struct <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073035"> </a>Purpose 
</h4>

<p><a name="1073036"> </a>The <code>IrStatsType</code> structure defines performance statistics for the IR Library. Use the <a href="ExchangeManager.html#1055470"><code>ExgControl()</code></a> function with an <code>irGetStatistics</code> operation to retrieve these statistics. See <a href="IRLib.html#1073062">IR Control Constants</a> for more information. </p>
<h4>
  <a name="1073043"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073044"></a>typedef struct {
  UInt16 recLineErrors;
  UInt16 crcErrors;
} IrStatsType;
</pre>
<h4>
  <a name="1111516"> </a>Fields 
</h4>

<dl>
<dt><a name="1073051"> </a><code><code>recLineErrors</code> </code></dt>
<dd><a name="1073053"> </a>The number of serial errors since the library opened.</dd>

<dt><a name="1073055"> </a><code><code>crcErrors</code> </code></dt>
<dd><a name="1073057"> </a>The number of CRC errors since the library opened. </dd>

</dl>

<h2 class="haH2">
  <a name="1073060"> </a>IR Library Constants <a href="#1072694"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1073062"> </a>IR Control Constants <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073063"> </a>The IR control constants define operations that the IR Exchange Library can perform. You pass these constants as the operation parameter to <a href="ExchangeManager.html#1055470"><code>ExgControl()</code></a>. The following table lists the operation constants, the data that should be passed as the <code>valueP</code> parameter to <code>ExgControl</code>, and what operation is performed in response. </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <th><p class="tt"><a name="1073069"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Operation Constant</span></b></p>
    </th>
    <th><p class="tt"><a name="1073071"> </a><b>value Data Type</b></p>
    </th>
    <th><p class="tt"><a name="1073073"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073076"> </a><code>irGetScanningMode</code> </p>
    </td>
    <td><p class="tt"><a name="1073078"> </a><code>Boolean</code>. Output only. </p>
    </td>
    <td><p class="tt"><a name="1073080"> </a>Returns <code>true</code> in <code>*valueP</code> if beaming is enabled or <code>false</code> if beaming is disabled. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073083"> </a><code>irGetStatistics</code> </p>
    </td>
    <td><p class="tt"><a name="1073088"> </a><a href="IRLib.html#1073033"><code>IrStatsType</code></a>. Output only. </p>
    </td>
    <td><p class="tt"><a name="1073090"> </a>Returns performance statistics. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073093"> </a><code>irRestoreScanning</code> </p>
    </td>
    <td><p class="tt"><a name="1073095"> </a>None </p>
    </td>
    <td><p class="tt"><a name="1073097"> </a>Re-enables beaming after an <code>irSuppressScanning</code> operation. This operation keeps track of the number of requests that beaming be disabled and re-enables beaming only when the count reaches 0. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073099"> </a></p>
    </td>
    <td><p class="tt"><a name="1073101"> </a></p>
    </td>
    <td><p class="tt"><a name="1073103"> </a>This operation differs from <code>irSetScanningMode</code> in that it does not update the saved preferences.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073106"> </a><code>irSetScanningMode</code> </p>
    </td>
    <td><p class="tt"><a name="1073108"> </a><code>Boolean</code>. Input only. </p>
    </td>
    <td><p class="tt"><a name="1073110"> </a>Enables or disables beaming. </p>
<p class="tt"><a name="1073111"> </a></p>
<p class="tt"><a name="1073112"> </a>This operation modifies the saved preferences database, which is back up during a HotSync<sup>&#174;</sup> operation. Because of this, beaming may remain disabled after a reset if you use this operation to disable it. If you want to temporarily disable beaming use <code>irSuppressScanning</code> and <code>irRestoreScanning</code> instead. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073115"> </a><code>irSetBaudMask</code> </p>
    </td>
    <td><p class="tt"><a name="1073117"> </a><code>UInt16</code> containing a mask of the <code>irOpenOptSpeed</code>... constants defined in <code>IrLib.h</code>. Input only. </p>
    </td>
    <td><p class="tt"><a name="1073119"> </a>Sets the possible baud rates that the IR Library will use to those specified in <code>*valueP</code>. OR the <code>irOpenOptSpeed</code>... constants together to specify more than one. The default rate is 0, which causes the baud rate to be determined by the hardware. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073121"> </a></p>
    </td>
    <td><p class="tt"><a name="1073123"> </a></p>
    </td>
    <td><p class="tt"><a name="1073125"> </a>This operation is sometimes useful for debugging connections. Generally, you should set all bits up to the fastest rate you want to allow. To reset, use this operation again and pass 0 in <code>*valueP</code>. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073127"> </a></p>
    </td>
    <td><p class="tt"><a name="1073129"> </a></p>
    </td>
    <td><p class="tt"><a name="1073131"> </a>If you change the baud rate, your changes are until the device is reset or you perform this operation again. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073134"> </a><code>irSetSerialMode</code> </p>
    </td>
    <td><p class="tt"><a name="1073136"> </a><code>Boolean</code>. Input only. </p>
    </td>
    <td><p class="tt"><a name="1073138"> </a>If the specified value is <code>true</code>, the IR Library uses the serial port instead of the infrared port until the device is reset. This option is useful for debugging. You can run your application in POSE and use the IR Library to communicate with a device connected in the cradle. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073141"> </a><code>irSetSupported</code> </p>
    </td>
    <td><p class="tt"><a name="1073143"> </a><code>Boolean</code>. Input only. </p>
    </td>
    <td><p class="tt"><a name="1073145"> </a>If <code>true</code>, IR is supported on this device. If <code>false</code>, IR is not supported. You can use this constant to disable the unsupported dialog that normally displays when a beam is attempted and no IR support is available. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073148"> </a><code>irSuppressScanning</code> </p>
    </td>
    <td><p class="tt"><a name="1073150"> </a>None </p>
    </td>
    <td><p class="tt"><a name="1073152"> </a>Temporarily disables beam receive. This operation keeps track of the number of requests that beaming be disabled and re-enables beaming (through <code>irRestoreScanning</code>) only when the count reaches 0. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073154"> </a></p>
    </td>
    <td><p class="tt"><a name="1073156"> </a></p>
    </td>
    <td><p class="tt"><a name="1073158"> </a>This operation differs from <code>irSetScanningMode</code> in that it does not update the saved preferences.</p>
    </td>
  </tr>
</table>

</div>


<h2 class="haH2">
  <a name="1073161"> </a>IR Stack Callback Events <a href="#1072694"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1073162"> </a>The IR stack calls the application by way of a callback function stored in each <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure. The callback function is called with a pointer to the <code>IrConnect</code> structure and a pointer to a parameter structure. The parameter structure contains an <code>event</code> field, which indicates the reason the callback is called, and other parameters, which have meaning based on the event. </p>

<p><a name="1073166"> </a>The meaning of the events is described in the following sections.</p>

<h3 class="hbH3">
  <a name="1073168"> </a>LEVENT_DATA_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073169"> </a>Data has been received. The received data is accessed using fields <code>rxBuff</code> and <code>rxLen</code>.</p>

<h3 class="hbH3">
  <a name="1073171"> </a>LEVENT_DISCOVERY_CNF <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073172"> </a>Indicates the completion of a discovery operation. The field <code>deviceList</code> points to the discovery list.</p>

<h3 class="hbH3">
  <a name="1073174"> </a>LEVENT_LAP_CON_CNF <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073175"> </a>The requested IrLAP connection has been made successfully. The callback function of all bound <code>IrConnect</code> structures is called.</p>

<h3 class="hbH3">
  <a name="1073177"> </a>LEVENT_LAP_CON_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073178"> </a>Indicates that the IrLAP connection has come up. The callback of all bound <code>IrConnect</code> structures is called.</p>

<h3 class="hbH3">
  <a name="1073180"> </a>LEVENT_LAP_DISCON_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073181"> </a>Indicates that the IrLAP connection has gone down. This means that all IrLMP connections are also down. A callback with event <code>LEVENT_LM_CON_IND</code> is not given. The callback function of all bound <code>IrConnect</code> structures is called.</p>

<h3 class="hbH3">
  <a name="1073183"> </a>LEVENT_LM_CON_CNF <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073184"> </a>The requested IrLMP/Tiny TP connection has been made successfully. Connection data from the other side is found using fields <code>rxBuff</code> and <code>rxLen</code>.</p>

<h3 class="hbH3">
  <a name="1073186"> </a>LEVENT_LM_CON_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073187"> </a>Other device has initiated a connection. <code>IrConnectRsp</code> should be called to accept the connection. Any data associated with the connection request can be found using fields <code>rxBuff</code> and <code>rxLen</code>, data pointer and length, respectively.</p>

<h3 class="hbH3">
  <a name="1073189"> </a>LEVENT_LM_DISCON_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073190"> </a>The IrLMP/Tiny TP connection has been disconnected. Any data associated with the disconnect indication can be found using fields <code>rxBuff</code> and <code>rxLen</code>, data pointer and length, respectively.</p>

<h3 class="hbH3">
  <a name="1073192"> </a>LEVENT_PACKET_HANDLED <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073193"> </a>A packet is being returned. A pointer to the packet exists in field <code>packet</code>.</p>

<h3 class="hbH3">
  <a name="1073195"> </a>LEVENT_STATUS_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073196"> </a>Indicates that a status event from the stack has occurred. The <code>status</code> field indicates the status generating the event. Possible status values are as follows:</p>
<ul type="disc">
  <li><a name="1073197"> </a><code>IR_STATUS_NO_PROGRESS</code> which means that IrLAP has no progress for 3 seconds threshold time (for example, the beam is blocked).
  <li><a name="1073198"> </a><code>IR_STATUS_LINK_OK</code> which indicates that the no progress condition has cleared.
  <li><a name="1073199"> </a><code>IR_STATUS_MEDIA_NOT_BUSY</code> which indicates that the IR media has transitioned from busy to not busy.
</ul>

<h3 class="hbH3">
  <a name="1073201"> </a>LEVENT_TEST_CNF <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073202"> </a>Indicates that a TEST command has completed. The <code>status</code> field indicates if the test was successful.</p>
<ul type="disc">
  <li><a name="1073203"> </a><code>IR_STATUS_SUCCESS</code> indicates that the operation was successful and the data in the test response can be found by using the <code>rxBuff</code> and <code>rxLen</code> fields.
  <li><a name="1073204"> </a><code>IR_STATUS_FAILED</code> indicates that no TEST response was received. The packet passed to perform the test command is passed back in the <code>packet</code> field and is now available (no separate packet handled event occurs).
</ul>

<h3 class="hbH3">
  <a name="1073206"> </a>LEVENT_TEST_IND <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1073207"> </a>Indicates that a TEST command frame has been received. A pointer to the received data is in <code>rxBuff</code> and <code>rxLen</code>. A pointer to the packet that is sent in response to the test command is in the <code>packet</code> field. The packet is currently set up to respond with the same data sent in the command TEST frame. If different data is desired as a response, then you need to modify the packet structure. This event is sent to the callback function in all bound <code>IrConnect</code> structures. The IAS connections ignore this event.</p>

<h2 class="haH2">
  <a name="1073209"> </a>IR Library Functions <a href="#1072694"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1073215"> </a>IrAdvanceCredit Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073217"> </a>Purpose 
</h4>

<p><a name="1073218"> </a>Advances the credit to the other side of the connection.</p>
<h4>
  <a name="1073219"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073220"> </a></code><h4>
  <a name="1073221"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073222"></a>void IrAdvanceCredit (
   IrConnect *con,
   UInt8 credit
)
</pre>
<h4>
  <a name="1073223"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073224"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073228"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure representing connection to which credit is advanced.</dd>

<dt><a name="1073229"> </a><code>&rarr;  <i><code>credit</code></i></code></dt>
<dd><a name="1073230"> </a>Amount of credit to advance.</dd>

</dl>
<h4>
  <a name="1073231"> </a>Returns 
</h4>

<p><a name="1073232"> </a>Returns nothing.</p>
<h4>
  <a name="1073233"> </a>Comments 
</h4>

<p><a name="1073234"> </a>The credit passed by this function is added to the existing available credit, which must not exceed 127. This function only makes sense for a Tiny TP connection.</p>
<h4>
  <a name="1073235"> </a>Compatibility 
</h4>

<p><a name="1073239"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073242"> </a>IrBind Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073244"> </a>Purpose 
</h4>

<p><a name="1073245"> </a>Obtains a local LSAP selector and registers the connection with the protocol stack. </p>
<h4>
  <a name="1073246"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073247"> </a></code><h4>
  <a name="1073248"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073249"></a>IrStatus IrBind (
   UInt16 refNum,
   IrConnect *con,
   IrCallBack callBack
)
</pre>
<h4>
  <a name="1073250"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073251"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073252"> </a>IR library refNum.</dd>

<dt><a name="1073253"> </a><code>&harr;  <i><code>con</code></i></code></dt>
<dd><a name="1073257"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure.</dd>

<dt><a name="1073258"> </a><code>&rarr;  <i><code>callBack</code></i></code></dt>
<dd><a name="1073259"> </a>Pointer to a callBack function that handles the indications and confirmation from the protocol stack.</dd>

</dl>
<h4>
  <a name="1073260"> </a>Returns 
</h4>

<p><a name="1073261"> </a><code>IR_STATUS_SUCCESS</code> means the operation completed successfully. The assigned LSAP can be found in <code>con-&gt;lLsap</code>.</p>

<p><a name="1073262"> </a><code>IR_STATUS_FAILED</code> means the operation failed for one of the following reasons:</p>
<ul type="disc">
  <li><a name="1073263"> </a><code>con</code> is already bound to the stack.
  <li><a name="1073264"> </a>There is no room in the connection table.
</ul>
<h4>
  <a name="1073265"> </a>Comments 
</h4>

<p><a name="1073266"> </a>The <code>IrConnect</code> structure is re-initialized. Any values stored in the structure are lost. The assigned LSAP is returned in the <code>lLsap</code> field of <code>con</code>. The type of the connection is set to IrLMP. The <code>IrConnect</code> must be bound to the stack before it can be used.</p>
<h4>
  <a name="1073267"> </a>Compatibility 
</h4>

<p><a name="1073271"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073274"> </a>IrClose Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073276"> </a>Purpose 
</h4>

<p><a name="1073277"> </a>Closes the IR library. This releases the global memory for the IR stack and any system resources it uses. This must be called when an application is done with the IR library.</p>
<h4>
  <a name="1073278"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073279"> </a></code><h4>
  <a name="1073280"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073281"></a>Err IrClose (
   UInt16 refnum
)
</pre>
<h4>
  <a name="1073282"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073283"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073284"> </a>IR library refNum.</dd>

</dl>
<h4>
  <a name="1073285"> </a>Returns 
</h4>

<p><a name="1073286"> </a>Returns 0 if successful.</p>
<h4>
  <a name="1073287"> </a>Comments 
</h4>

<p><a name="1073291"> </a>Do not call this function unless the call to <a href="IRLib.html#1073661"><code>IrOpen()</code></a> was successful.</p>
<h4>
  <a name="1073293"> </a>Compatibility 
</h4>

<p><a name="1073297"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073300"> </a>IrConnectIrLap Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073302"> </a>Purpose 
</h4>

<p><a name="1073303"> </a>Starts an IrLAP connection.</p>
<h4>
  <a name="1073304"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073305"> </a></code><h4>
  <a name="1073306"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073307"></a>IrStatus IrConnectIrLap (
   UInt16 refNum,
   IrDeviceAddr deviceAddr
)
</pre>
<h4>
  <a name="1073308"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073309"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073310"> </a>IR library refNum.</dd>

<dt><a name="1073311"> </a><code>&rarr;  <i><code>deviceAddr</code></i></code></dt>
<dd><a name="1073312"> </a>32-bit address of device to which connection should be made.</dd>

</dl>
<h4>
  <a name="1073313"> </a>Returns 
</h4>

<p><a name="1073314"> </a><code>IR_STATUS_PENDING</code> means the operation started successfully; the result is returned by way of a callback.</p>

<p><a name="1073315"> </a><code>IR_STATUS_MEDIA_BUSY</code> means the operation failed because the media is busy. Media busy is caused by one of the following reasons:</p>
<ul type="disc">
  <li><a name="1073316"> </a>Other devices are using the IR medium.
  <li><a name="1073317"> </a>An IrLAP connection already exists.
  <li><a name="1073318"> </a>A discovery process is in progress.
</ul>
<h4>
  <a name="1073319"> </a>Comments 
</h4>

<p><a name="1073320"> </a>The result is signaled to all bound <code>IrConnect</code> structures by way of the callback function. The callback event is <code>LEVENT_LAP_CON_CNF</code> if successful or <code>LEVENT_LAP_DISCON_IND</code> if unsuccessful.</p>
<h4>
  <a name="1073321"> </a>Compatibility 
</h4>

<p><a name="1073325"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073328"> </a>IrConnectReq Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073330"> </a>Purpose 
</h4>

<p><a name="1073331"> </a>Requests an IrLMP or Tiny TP connection.</p>
<h4>
  <a name="1073332"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073333"> </a></code><h4>
  <a name="1073334"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073335"></a>IrStatus IrConnectReq (
   UInt16 refNum,
   IrConnect *con,
   IrPacket *packet,
   UInt8 credit
)
</pre>
<h4>
  <a name="1073336"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073337"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073338"> </a>IR library refNum.</dd>

<dt><a name="1073339"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073343"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure for handling the connection. The <code>rLsap</code> field must contain the LSAP selector for the peer on the other device. Also the type of the connection must be set. Use <code>IR_SetConTypeLMP</code> to set the type to an IrLMP connection or <code>IR_SetConTypeTTP</code> to set the type to a Tiny TP connection.</dd>

<dt><a name="1073344"> </a><code>&rarr;  <i><code>packet</code></i></code></dt>
<dd><a name="1073345"> </a>Pointer to a packet that contains connection data. Even if no connection data is needed, the packet must point to a valid <a href="IRLib.html#1072823"><code>IrPacket</code></a> structure. The packet is returned by way of the callback function with the <code>LEVENT_PACKET_HANDLED</code> event if no errors occur. The maximum size of the packet is <code>IR_MAX_CON_PACKET</code> for an IrLMP connection or <code>IR_MAX_TTP_CON_PACKET</code> for a Tiny TP connection.</dd>

<dt><a name="1073349"> </a><code>&rarr;  <i><code>credit</code></i></code></dt>
<dd><a name="1073350"> </a>Initial amount of credit advanced to the other side. Must be less than 127. It is ANDed with 0x7f, so if it is greater than 127, unexpected results occur. This parameter is ignored if the connection is an IrLMP connection.</dd>

</dl>
<h4>
  <a name="1073351"> </a>Returns 
</h4>

<p><a name="1073352"> </a><code>IR_STATUS_PENDING</code> means the operation has been started successfully and the result is returned by way of the callback function with the event <code>LEVENT_LM_CON_CNF</code> if the connection is made or <code>LEVENT_LM_DISCON_IND</code> if connection fails. The packet is returned by way of the callback with the event <code>LEVENT_PACKET_HANDLED</code>.</p>

<p><a name="1073353"> </a><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.</p>
<ul type="disc">
  <li><a name="1073354"> </a>The connection is busy (already involved in a connection).
  <li><a name="1073355"> </a>The <code>IrConnect</code> structure is not bound to the stack.
  <li><a name="1073356"> </a>The packet size exceeds maximum allowed.
</ul>

<p><a name="1073357"> </a><code>IR_STATUS_NO_IRLAP</code> means the operation failed because there is no IrLAP connection (the packet is available immediately).</p>
<h4>
  <a name="1073358"> </a>Comments 
</h4>

<p><a name="1073359"> </a>The result is signaled by way of the callback specified in the <code>IrConnect</code> structure. The callback event <code>LEVENT_LM_CON_CNF</code> indicates that the connection is up and <code>LEVENT_LM_DISCON_IND</code> indicates that the connection failed. Before calling this function the fields in the <code>con</code> structure must be properly set.</p>
<h4>
  <a name="1073360"> </a>Compatibility 
</h4>

<p><a name="1073364"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073367"> </a>IrConnectRsp Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073369"> </a>Purpose 
</h4>

<p><a name="1073370"> </a>Accepts an incoming connection that has been signaled by way of the callback with the event <code>LEVENT_LM_CON_IND</code>.</p>
<h4>
  <a name="1073371"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073372"> </a></code><h4>
  <a name="1073373"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073374"></a>IrStatus IrConnectRsp (
   UInt16 refNum,
   IrConnect *con,
   IrPacket *packet,
   UInt8 credit
)
</pre>
<h4>
  <a name="1073375"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073376"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073377"> </a>IR library refNum.</dd>

<dt><a name="1073378"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073382"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure.</dd>

<dt><a name="1073383"> </a><code>&rarr;  <i><code>packet</code></i></code></dt>
<dd><a name="1073384"> </a>Pointer to a packet that contains connection data. Even if no connection data is needed, the packet must point to a valid <a href="IRLib.html#1072823"><code>IrPacket</code></a> structure. The packet is returned by way of the callback with the <code>LEVENT_PACKET_HANDLED</code> event if no errors occur. The maximum size of the packet is <code>IR_MAX_CON_PACKET</code> for an IrLMP connection or <code>IR_MAX_TTP_CON_PACKET</code> for a Tiny TP connection.</dd>

<dt><a name="1073388"> </a><code>&rarr;  <i><code>credit</code></i></code></dt>
<dd><a name="1073389"> </a>Initial amount of credit advanced to the other side. Must be less than 127. It is ANDed with 0x7f, so if it is greater than 127, unexpected results occur. This parameter is ignored if the connection is an IrLMP connection.</dd>

</dl>
<h4>
  <a name="1073390"> </a>Returns 
</h4>

<p><a name="1073391"> </a><code>IR_STATUS_PENDING</code> means the operation has been started successfully and the packet is returned by way of the callback function with the event <code>LEVENT_PACKET_HANDLED</code>.</p>

<p><a name="1073392"> </a><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.</p>
<ul type="disc">
  <li><a name="1073393"> </a>The connection is not in the proper state to require a response.
  <li><a name="1073394"> </a>The <code>IrConnect</code> structure is not bound to the stack.
  <li><a name="1073395"> </a>The packet size exceeds the maximum allowed.
</ul>

<p><a name="1073396"> </a><code>IR_STATUS_NO_IRLAP</code> means the operation failed because there is no IrLAP connection (the packet is available immediately).</p>
<h4>
  <a name="1073397"> </a>Comments 
</h4>

<p><a name="1073398"> </a><code>IrConnectRsp</code> can be called during the callback or later to accept the connection. The type of the connection must already have been set to IrLMP or Tiny TP before the <code>LEVENT_LM_CON_IND</code> event.</p>
<h4>
  <a name="1073399"> </a>Compatibility 
</h4>

<p><a name="1073403"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073406"> </a>IrDataReq Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073408"> </a>Purpose 
</h4>

<p><a name="1073409"> </a>Sends a data packet.</p>
<h4>
  <a name="1073410"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073411"> </a></code><h4>
  <a name="1073412"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073413"></a>IrStatus IrDataReq (
   UInt16 refNum,
   IrConnect *con,
   IrPacket *packet
)
</pre>
<h4>
  <a name="1073414"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073415"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073416"> </a>IR library refNum.</dd>

<dt><a name="1073417"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073421"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure that specifies the connection over which the packet should be sent.</dd>

<dt><a name="1073422"> </a><code>&rarr;  <i><code>packet</code></i></code></dt>
<dd><a name="1073426"> </a>Pointer to a valid <a href="IRLib.html#1072823"><code>IrPacket</code></a> structure that contains data to send. The packet should not exceed the maximum size found with <a href="IRLib.html#1073636"><code>IrMaxTxSize()</code></a>.</dd>

</dl>
<h4>
  <a name="1073430"> </a>Returns 
</h4>

<p><a name="1073431"> </a><code>IR_STATUS_PENDING</code> means the packet has been queued by the stack. The packet is returned by way of the callback with event <code>LEVENT_PACKET_HANDLED</code>.</p>

<p><a name="1073432"> </a><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.</p>
<ul type="disc">
  <li><a name="1073433"> </a>The <code>IrConnect</code> structure is not bound to the stack.
  <li><a name="1073434"> </a>The packet size exceeds the maximum allowed.
  <li><a name="1073435"> </a>The <code>IrConnect</code> structure does not represent an active connection.
</ul>
<h4>
  <a name="1073436"> </a>Comments 
</h4>

<p><a name="1073437"> </a>The packet is owned by the stack until it is returned by way of the callback with event <code>LEVENT_PACKET_HANDLED</code>. The largest packet that can be sent is found by calling <a href="IRLib.html#1073636"><code>IrMaxTxSize()</code></a>.</p>
<h4>
  <a name="1073441"> </a>Compatibility 
</h4>

<p><a name="1073445"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073448"> </a>IrDisconnectIrLap Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073450"> </a>Purpose 
</h4>

<p><a name="1073451"> </a>Disconnects an IrLAP connection.</p>
<h4>
  <a name="1073452"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073453"> </a></code><h4>
  <a name="1073454"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073455"></a>IrStatus IrDisconnectIrLap (
   UInt16 refNum
)
</pre>
<h4>
  <a name="1073456"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073457"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073458"> </a>IR library refNum.</dd>

</dl>
<h4>
  <a name="1073459"> </a>Returns 
</h4>

<p><a name="1073460"> </a><code>IR_STATUS_PENDING</code> means the operation started successfully and all bound <code>IrConnect</code> structures are called back when complete.</p>

<p><a name="1073461"> </a><code>IR_STATUS_NO_IRLAP</code> means the operation failed because no IrLAP connection exists.</p>
<h4>
  <a name="1073462"> </a>Comments 
</h4>

<p><a name="1073463"> </a>When the IrLAP connection goes down, the callback of all bound <code>IrConnect</code> structures is called with event <code>LEVENT_LAP_DISCON_IND</code>.</p>
<h4>
  <a name="1073464"> </a>Compatibility 
</h4>

<p><a name="1073468"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073471"> </a>IrDiscoverReq Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073473"> </a>Purpose 
</h4>

<p><a name="1073474"> </a>Starts an IrLMP discovery process.</p>
<h4>
  <a name="1073475"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073476"> </a></code><h4>
  <a name="1073477"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073478"></a>IrStatus IrDiscoverReq (
   UInt16 refNum,
   IrConnect *con
)
</pre>
<h4>
  <a name="1073479"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073480"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073481"> </a>IR library refNum.</dd>

<dt><a name="1073482"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073486"> </a>Pointer to a bound <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073487"> </a>Returns 
</h4>

<p><a name="1073488"> </a><code>IR_STATUS_PENDING</code> means the operation is started successfully; the result is returned by way of callback.</p>

<p><a name="1073489"> </a><code>IR_STATUS_MEDIA_BUSY</code> means the operation failed because the media is busy. Media busy is caused by one of the following reasons:</p>
<ul type="disc">
  <li><a name="1073490"> </a>Other devices are using the IR medium.
  <li><a name="1073491"> </a>A discovery process is already in progress.
  <li><a name="1073492"> </a>An IrLAP connection exists.
</ul>

<p><a name="1073493"> </a><code>IR_STATUS_FAILED</code> means the operation failed because the <code>IrConnect</code> structure is not bound to the stack.</p>
<h4>
  <a name="1073494"> </a>Comments 
</h4>

<p><a name="1073495"> </a>The result is signaled by way of the callback function specified in the <code>IrConnect</code> structure with the event <code>LEVENT_DISCOVERY_CNF</code>. Only one discovery can be invoked at a time.</p>
<h4>
  <a name="1073496"> </a>Compatibility 
</h4>

<p><a name="1073500"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073503"> </a>IrIsIrLapConnected Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073505"> </a>Purpose 
</h4>

<p><a name="1073506"> </a>Determines if an IrLAP connection exists.</p>
<h4>
  <a name="1073507"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073508"> </a></code><h4>
  <a name="1073509"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073510"></a>BOOL IrIsIrLapConnected (
   UInt16 refNum
)
</pre>
<h4>
  <a name="1073511"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073512"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073513"> </a>IR library refNum.</dd>

</dl>
<h4>
  <a name="1073514"> </a>Returns 
</h4>

<p><a name="1073515"> </a><code>true</code> if IrLAP is connected, <code>false</code> otherwise.</p>
<h4>
  <a name="1073516"> </a>Comments 
</h4>

<p><a name="1073517"> </a>Only available if <code>IR_IS_LAP_FUNCS</code> is defined.</p>
<h4>
  <a name="1073518"> </a>Compatibility 
</h4>

<p><a name="1073522"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073525"> </a>IrIsMediaBusy Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073527"> </a>Purpose 
</h4>

<p><a name="1073528"> </a>Determines if the IR media is busy.</p>
<h4>
  <a name="1073529"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073530"> </a></code><h4>
  <a name="1073531"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073532"></a>BOOL IrIsMediaBusy (
   UInt16 refNum
)
</pre>
<h4>
  <a name="1073533"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073534"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073535"> </a>IR library refNum.</dd>

</dl>
<h4>
  <a name="1073536"> </a>Returns 
</h4>

<p><a name="1073537"> </a><code>true</code> if IR media is busy, <code>false</code> otherwise.</p>
<h4>
  <a name="1073538"> </a>Compatibility 
</h4>

<p><a name="1073542"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073545"> </a>IrIsNoProgress Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073547"> </a>Purpose 
</h4>

<p><a name="1073548"> </a>Determines if IrLAP is not making progress.</p>
<h4>
  <a name="1073549"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073550"> </a></code><h4>
  <a name="1073551"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073552"></a>BOOL IrIsNoProgress (
   UInt16 refNum
)
</pre>
<h4>
  <a name="1073553"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073554"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073555"> </a>IR library refNum.</dd>

</dl>
<h4>
  <a name="1073556"> </a>Returns 
</h4>

<p><a name="1073557"> </a><code>ture</code> if IrLAP is not making progress, <code>false</code> otherwise.</p>
<h4>
  <a name="1073558"> </a>Compatibility 
</h4>

<p><a name="1073562"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073565"> </a>IrIsRemoteBusy Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073567"> </a>Purpose 
</h4>

<p><a name="1073568"> </a>Determines if IrLAP of the other device is busy.</p>
<h4>
  <a name="1073569"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073570"> </a></code><h4>
  <a name="1073571"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073572"></a>BOOL IrIsRemoteBusy (
   UInt16 refNum
)
</pre>
<h4>
  <a name="1073573"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073574"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073575"> </a>IR library refNum.</dd>

</dl>
<h4>
  <a name="1073576"> </a>Returns 
</h4>

<p><a name="1073577"> </a><code>ture</code> if IrLAP of the other device is busy, <code>false</code> otherwise.</p>
<h4>
  <a name="1073578"> </a>Compatibility 
</h4>

<p><a name="1073582"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073585"> </a>IrLocalBusy Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073587"> </a>Purpose 
</h4>

<p><a name="1073588"> </a>Sets the IrLAP local busy flag.</p>
<h4>
  <a name="1073589"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073590"> </a></code><h4>
  <a name="1073591"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073592"></a>void IrLocalBusy (
   UInt16 refNum,
   BOOL flag
)
</pre>
<h4>
  <a name="1073593"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073594"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073595"> </a>IR library refNum.</dd>

<dt><a name="1073596"> </a><code>&rarr;  <i><code>flag</code></i></code></dt>
<dd><a name="1073597"> </a>Value (<code>true</code> or <code>false</code>) to set for local busy flag of IrLAP.</dd>

</dl>
<h4>
  <a name="1073598"> </a>Returns 
</h4>

<p><a name="1073599"> </a>Returns nothing.</p>
<h4>
  <a name="1073600"> </a>Comments 
</h4>

<p><a name="1073601"> </a>If local busy is set to <code>true</code>, then the local IrLAP layer sends RNR (Receive Not Ready) frames to the other side indicating it cannot receive any more data. If the local busy is set to false, IrLAP is ready to receive frames. </p>

<p><a name="1073602"> </a>The setting takes effect the next time IrLAP sends an RR (Receive Ready) frame. If IrLAP has data to send, the data is sent first, so it should be used carefully.</p>

<p><a name="1073603"> </a>This function should not be used when using Tiny TP or when multiple connections exist.</p>
<h4>
  <a name="1073604"> </a>Compatibility 
</h4>

<p><a name="1073608"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073611"> </a>IrMaxRxSize Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073613"> </a>Purpose 
</h4>

<p><a name="1073614"> </a>Returns the maximum size buffer that can be sent by the other device.</p>
<h4>
  <a name="1073615"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073616"> </a></code><h4>
  <a name="1073617"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073618"></a>UInt16 IrMaxRxSize (
   UInt16 refNum,
   IrConnect *con
)
</pre>
<h4>
  <a name="1073619"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073620"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073621"> </a>IR library refNum.</dd>

<dt><a name="1073622"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073626"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure that represents an active connection.</dd>

</dl>
<h4>
  <a name="1073627"> </a>Returns 
</h4>

<p><a name="1073628"> </a>Returns the maximum size buffer that can be sent by the other device (maximum bytes that can be received). The value returned is only valid for active connections. The maximum size varies for each connection and is based on the negotiated IrLAP parameters and the type of the connection.</p>
<h4>
  <a name="1073629"> </a>Compatibility 
</h4>

<p><a name="1073633"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073636"> </a>IrMaxTxSize Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073638"> </a>Purpose 
</h4>

<p><a name="1073639"> </a>Returns the maximum size allowed for a transmit packet.</p>
<h4>
  <a name="1073640"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073641"> </a></code><h4>
  <a name="1073642"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073643"></a>UInt16 IrMaxTxSize (
   UInt16 refNum,
   IrConnect *con
)
</pre>
<h4>
  <a name="1073644"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073645"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073646"> </a>IR library refNum.</dd>

<dt><a name="1073647"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073651"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure that represents an active connection.</dd>

</dl>
<h4>
  <a name="1073652"> </a>Returns 
</h4>

<p><a name="1073653"> </a>Returns the maximum size allowed for a transmit packet. The value returned is only valid for active connections. The maximum size varies for each connection and is based on the negotiated IrLAP parameters and the type of the connection.</p>
<h4>
  <a name="1073654"> </a>Compatibility 
</h4>

<p><a name="1073658"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073661"> </a>IrOpen Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073663"> </a>Purpose 
</h4>

<p><a name="1073664"> </a>Opens the IR library. This allocates the global memory for the IR stack and reserves the system resources it requires. This must be done before any other IR library calls are made.</p>
<h4>
  <a name="1073665"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073666"> </a></code><h4>
  <a name="1073667"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073668"></a>Err IrOpen (
   UInt16 refnum,
   UInt32 options
)
</pre>
<h4>
  <a name="1073669"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073670"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073671"> </a>IR library refNum. This value is returned from the function <a href="SystemManager.html#1076670"><code>SysLibFind()</code></a>, which you must call first to load the IR library.</dd>

<dt><a name="1073675"> </a><code>&rarr;  <i><code>options</code></i></code></dt>
<dd><a name="1073676"> </a>Open options flags. See the Comments section for details.</dd>

</dl>
<h4>
  <a name="1073677"> </a>Returns 
</h4>

<p><a name="1073678"> </a>Returns 0 if successful.</p>
<h4>
  <a name="1073680"> </a>Comments 
</h4>

<p><a name="1073681"> </a>The following flags can be specified for the <code>options</code> parameter to set the speed of the connection:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1073684"> </a><code>irOpenOptSpeed115200</code></p>
    </td>
    <td><p class="tt"><a name="1073686"> </a>Set to maximum negotiated baud rate.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073688"> </a><code>irOpenOptSpeed57600</code></p>
    </td>
    <td><p class="tt"><a name="1073690"> </a>Set to 57600 bps (default if no flags given).</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1073692"> </a><code>irOpenOptSpeed9600</code></p>
    </td>
    <td><p class="tt"><a name="1073694"> </a>Set to 9600 bps.</p>
    </td>
  </tr>
</table>

</div>

<h4>
  <a name="1073696"> </a>Compatibility 
</h4>

<p><a name="1073700"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073703"> </a>IrSetConTypeLMP Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073705"> </a>Purpose 
</h4>

<p><a name="1073706"> </a>Sets the type of the connection to IrLMP. This function must be called after the <code>IrConnect</code> structure is bound to the stack.</p>
<h4>
  <a name="1073707"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073708"> </a></code><h4>
  <a name="1073709"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073710"></a>void IrSetConTypeLMP (
   IrConnect *con
)
</pre>
<h4>
  <a name="1073711"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073712"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073716"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073717"> </a>Returns 
</h4>

<p><a name="1073718"> </a>Returns nothing.</p>
<h4>
  <a name="1073719"> </a>Compatibility 
</h4>

<p><a name="1073723"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073726"> </a>IrSetConTypeTTP Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073728"> </a>Purpose 
</h4>

<p><a name="1073729"> </a>Sets the type of the connection to Tiny TP. This function must be called after the <code>IrConnect</code> structure is bound to the stack.</p>
<h4>
  <a name="1073730"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073731"> </a></code><h4>
  <a name="1073732"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073733"></a>void IrSetConTypeTTP (
   IrConnect *con
)
</pre>
<h4>
  <a name="1073734"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073735"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073739"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073740"> </a>Returns 
</h4>

<p><a name="1073741"> </a>Returns nothing.</p>
<h4>
  <a name="1073742"> </a>Compatibility 
</h4>

<p><a name="1073746"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073749"> </a>IrSetDeviceInfo Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073751"> </a>Purpose 
</h4>

<p><a name="1073752"> </a>Sets the XID info string used during discovery to the given string and length.</p>
<h4>
  <a name="1073753"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073754"> </a></code><h4>
  <a name="1073755"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073756"></a>IrStatus IrSetDeviceInfo (
   UInt16 refNum,
   UInt8 *info,
   UInt8 len
)
</pre>
<h4>
  <a name="1073757"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073758"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073759"> </a>IR library refNum.</dd>

<dt><a name="1073760"> </a><code>&rarr;  <i><code>info</code></i></code></dt>
<dd><a name="1073761"> </a>Pointer to array of bytes.</dd>

<dt><a name="1073762"> </a><code>&rarr;  <i><code>len</code></i></code></dt>
<dd><a name="1073763"> </a>Number of bytes pointed to by <code>info</code>.</dd>

</dl>
<h4>
  <a name="1073764"> </a>Returns 
</h4>

<p><a name="1073765"> </a><code>IR_STATUS_SUCCESS</code> means the operation is successful.</p>

<p><a name="1073766"> </a><code>IR_STATUS_FAILED</code> means the operation failed because <code>info</code> is too big.</p>
<h4>
  <a name="1073767"> </a>Comments 
</h4>

<p><a name="1073768"> </a>The XID <code>info</code> string contains hints and the nickname of the device. The size cannot exceed <code>IR_MAX_DEVICE_INFO</code> bytes.</p>
<h4>
  <a name="1073769"> </a>Compatibility 
</h4>

<p><a name="1073773"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073776"> </a>IrTestReq Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073778"> </a>Purpose 
</h4>

<p><a name="1073779"> </a>Requests a TEST command frame be sent in the NDM (Normal Disconnect Mode) state.</p>
<h4>
  <a name="1073780"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073781"> </a></code><h4>
  <a name="1073782"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073783"></a>IrStatus IrTestReq (
   UInt16 refNum,
   IrDeviceAddr devAddr,
   IrConnect *con,
   IrPacket *packet
) 
</pre>
<h4>
  <a name="1073784"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073785"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073786"> </a>IR library refNum.</dd>

<dt><a name="1073787"> </a><code>&rarr;  <i><code>devAddr</code></i></code></dt>
<dd><a name="1073788"> </a>Address of device where TEST is sent. This address is not checked so it can be the broadcast address or 0.</dd>

<dt><a name="1073789"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073793"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure specifying the callback function to call to report the result.</dd>

<dt><a name="1073794"> </a><code>&rarr;  <i><code>packet</code></i></code></dt>
<dd><a name="1073798"> </a>Pointer to an <a href="IRLib.html#1072823"><code>IrPacket</code></a> structure that contains the data to send in the TEST command packet. The maximum size data that can be sent is <code>IR_MAX_TEST_PACKET</code>. Even if no data is to be sent, a valid packet must be passed.</dd>

</dl>
<h4>
  <a name="1073799"> </a>Returns 
</h4>

<p><a name="1073800"> </a><code>IR_STATUS_PENDING</code> means the operation has been started successfully and the result is returned by way of the callback function with the event <code>LEVENT_TEST_CNF</code>. This is also the indication returning the packet.</p>

<p><a name="1073801"> </a><code>IR_STATUS_FAILED</code> means the operation failed because of one of the following reasons. Note that the packet is available immediately.</p>
<ul type="disc">
  <li><a name="1073802"> </a>The <code>IrConnect</code> structure is not bound to the stack.
  <li><a name="1073803"> </a>The packet size exceeds the maximum allowed.
</ul>

<p><a name="1073804"> </a><code>IR_STATUS_MEDIA_BUSY</code> means the operation failed because the media is busy or the stack is not in the NDM state (the packet is available immediately).</p>
<h4>
  <a name="1073805"> </a>Comments 
</h4>

<p><a name="1073806"> </a>The result is signaled by way of the callback specified in the <code>IrConnect</code> structure. The callback event is <code>LEVENT_TEST_CNF</code> and the status field indicates the result of the operation. <code>IR_STATUS_SUCCESS</code> indicates success and <code>IR_STATUS_FAILED</code> indicates no response was received. A packet must be passed containing the data to send in the TEST frame. The packet is returned when the <code>LEVENT_TEST_CNF</code> event is given. </p>
<h4>
  <a name="1073807"> </a>Compatibility 
</h4>

<p><a name="1073811"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073814"> </a>IrUnbind Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073816"> </a>Purpose 
</h4>

<p><a name="1073817"> </a>Unbinds the <code>IrConnect</code> structure from the protocol stack, freeing its LSAP selector.</p>
<h4>
  <a name="1073818"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073819"> </a></code><h4>
  <a name="1073820"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073821"></a>IrStatus IrUnbind (
   UInt16 refNum,
   IrConnect *con
)
</pre>
<h4>
  <a name="1073822"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073823"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073824"> </a>IR library refNum.</dd>

<dt><a name="1073825"> </a><code>&rarr;  <i><code>con</code></i></code></dt>
<dd><a name="1073829"> </a>Pointer to <a href="IRLib.html#1072758"><code>IrConnect</code></a> structure to unbind.</dd>

</dl>
<h4>
  <a name="1073830"> </a>Returns 
</h4>

<p><a name="1073831"> </a><code>IR_STATUS_SUCCESS</code> means the operation completed successfully.</p>

<p><a name="1073832"> </a><code>IR_STATUS_FAILED</code> means the operation failed for one of the following reasons:</p>
<ul type="disc">
  <li><a name="1073833"> </a>The <code>IrConnect</code> structure was not bound.
  <li><a name="1073834"> </a>The <code>lLsap</code> field contained an invalid number.
</ul>
<h4>
  <a name="1073835"> </a>Compatibility 
</h4>

<p><a name="1073839"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="1073841"> </a>IAS Functions and Macros <a href="#1072694"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1073842"> </a>This section describes the following functions and macros related to IAS database:</p>
<ul type="disc">
  <li><a name="1073846"> </a><a href="IRLib.html#1073901"><code>IrIAS_Add()</code></a> 
  <li><a name="1073850"> </a><a href="IRLib.html#1073933"><code>IrIAS_GetInteger()</code></a> 
  <li><a name="1073854"> </a><a href="IRLib.html#1073959"><code>IrIAS_GetIntLsap()</code></a> 
  <li><a name="1073858"> </a><a href="IRLib.html#1073985"><code>IrIAS_GetObjectID()</code></a> 
  <li><a name="1073862"> </a><a href="IRLib.html#1074008"><code>IrIAS_GetOctetString()</code></a> 
  <li><a name="1073866"> </a><a href="IRLib.html#1074034"><code>IrIAS_GetOctetStringLen()</code></a> 
  <li><a name="1073870"> </a><a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> 
  <li><a name="1073874"> </a><a href="IRLib.html#1074083"><code>IrIAS_GetUserString()</code></a> 
  <li><a name="1073878"> </a><a href="IRLib.html#1074109"><code>IrIAS_GetUserStringCharSet()</code></a> 
  <li><a name="1073882"> </a><a href="IRLib.html#1074135"><code>IrIAS_GetUserStringLen()</code></a> 
  <li><a name="1073886"> </a><a href="IRLib.html#1074161"><code>IrIAS_Next()</code></a> 
  <li><a name="1073890"> </a><a href="IRLib.html#1074188"><code>IrIAS_Query()</code></a> 
  <li><a name="1073894"> </a><a href="IRLib.html#1074228"><code>IrIAS_SetDeviceName()</code></a> 
  <li><a name="1073898"> </a><a href="IRLib.html#1074253"><code>IrIAS_StartResult()</code></a> 
</ul>

<h3 class="hbH3">
  <a name="1073901"> </a>IrIAS_Add Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073903"> </a>Purpose 
</h4>

<p><a name="1073904"> </a>Adds an IAS object to the IAS Database.</p>
<h4>
  <a name="1073905"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073906"> </a></code><h4>
  <a name="1073907"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073908"></a>IrStatus IrIAS_Add (
   UInt16 refNum,
   IrIasObject *obj
)
</pre>
<h4>
  <a name="1073909"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073910"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1073911"> </a>IR library refNum.</dd>

<dt><a name="1073912"> </a><code>&rarr;  <i><code>obj</code></i></code></dt>
<dd><a name="1073916"> </a>Pointer to an <a href="IRLib.html#1072871"><code>IrIASObject</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073917"> </a>Returns 
</h4>

<p><a name="1073918"> </a><code>IR_STATUS_SUCCESS</code> means the operation is successful.</p>

<p><a name="1073919"> </a>IR_STATUS_FAILED means the operation failed for one of the following reasons:</p>
<ul type="disc">
  <li><a name="1073920"> </a>There is no space in the database.
  <li><a name="1073921"> </a>An entry with the same class name already exists.
  <li><a name="1073922"> </a>The attributes of the object violate the IrDA Lite rules (attribute name exceeds <code>IR_MAX_IAS_NAME</code>, or attribute value exceeds <code>IR_MAX_IAS_ATTR_SIZE</code>).
  <li><a name="1073923"> </a>The class name exceeds <code>IR_MAX_IAS_NAME</code>.
</ul>
<h4>
  <a name="1073924"> </a>Comments 
</h4>

<p><a name="1073925"> </a>The object is not copied, so the memory for the object must exist for as long as the object is in the database. The IAS database is designed to allow only objects with unique class names, and it checks for this. Class names and attributes names must not exceed <code>IR_MAX_IAS_NAME</code>. Also, attribute values must not exceed <code>IR_MAX_IAS_ATTR_SIZE</code>. </p>
<h4>
  <a name="1073926"> </a>Compatibility 
</h4>

<p><a name="1073930"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073933"> </a>IrIAS_GetInteger Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073935"> </a>Purpose 
</h4>

<p><a name="1073936"> </a>Return an integer value, assuming that the current result item is of type <code>IAS_ATTRIB_INTEGER</code>. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.)</p>
<h4>
  <a name="1073940"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073941"> </a></code><h4>
  <a name="1073942"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073943"></a>#define IrIAS_GetInteger (
   t
)
</pre>
<h4>
  <a name="1073944"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073945"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1073949"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073950"> </a>Returns 
</h4>

<p><a name="1073951"> </a>Integer value returned as a <code>UInt32</code>.</p>
<h4>
  <a name="1073952"> </a>Compatibility 
</h4>

<p><a name="1073956"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073959"> </a>IrIAS_GetIntLsap Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073961"> </a>Purpose 
</h4>

<p><a name="1073962"> </a>Return an integer value that represents an LSAP, assuming that the current result item is of type <code>IAS_ATTRIB_INTEGER</code>. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.) Usually integer values returned in a query are LSAP selectors.</p>
<h4>
  <a name="1073966"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073967"> </a></code><h4>
  <a name="1073968"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073969"></a>#define IrIAS_GetIntLsap (
   t
)
</pre>
<h4>
  <a name="1073970"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073971"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1073975"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073976"> </a>Returns 
</h4>

<p><a name="1073977"> </a>Integer value returned as a <code>UInt8</code>.</p>
<h4>
  <a name="1073978"> </a>Compatibility 
</h4>

<p><a name="1073982"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1073985"> </a>IrIAS_GetObjectID Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1073987"> </a>Purpose 
</h4>

<p><a name="1073988"> </a>Return the unique object ID of the current result item.</p>
<h4>
  <a name="1073989"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1073990"> </a></code><h4>
  <a name="1073991"> </a>Prototype 
</h4>
<pre class="proto"><a name="1073992"></a>#define IrIAS_GetObjectID (
   t
)
</pre>
<h4>
  <a name="1073993"> </a>Parameters 
</h4>

<dl>
<dt><a name="1073994"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1073998"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1073999"> </a>Returns 
</h4>

<p><a name="1074000"> </a>Returns the object ID as a <code>UInt16</code> type.</p>
<h4>
  <a name="1074001"> </a>Compatibility 
</h4>

<p><a name="1074005"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074008"> </a>IrIAS_GetOctetString Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074010"> </a>Purpose 
</h4>

<p><a name="1074011"> </a>Return a pointer to an octet string, assuming that the current result item is of type IAS_ATTRIB_OCTET_STRING. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.)</p>
<h4>
  <a name="1074015"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074016"> </a></code><h4>
  <a name="1074017"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074018"></a>#define IrIAS_GetOctetString (
   t
)
</pre>
<h4>
  <a name="1074019"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074020"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074024"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074025"> </a>Returns 
</h4>

<p><a name="1074026"> </a>Pointer to octet string of type <code>UInt8</code>.</p>
<h4>
  <a name="1074027"> </a>Compatibility 
</h4>

<p><a name="1074031"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074034"> </a>IrIAS_GetOctetStringLen Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074036"> </a>Purpose 
</h4>

<p><a name="1074037"> </a>Return the length of an octet string, assuming that the current result item is of type <code>IAS_ATTRIB_OCTET_STRING</code>. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.)</p>
<h4>
  <a name="1074041"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074042"> </a></code><h4>
  <a name="1074043"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074044"></a>#define IrIAS_GetOctetStringLen (
   t
)
</pre>
<h4>
  <a name="1074045"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074046"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074050"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074051"> </a>Returns 
</h4>

<p><a name="1074052"> </a>Length of octet string returned as a <code>UInt16</code>.</p>
<h4>
  <a name="1074053"> </a>Compatibility 
</h4>

<p><a name="1074057"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074060"> </a>IrIAS_GetType Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074062"> </a>Purpose 
</h4>

<p><a name="1074063"> </a>Return the type of the current result item.</p>
<h4>
  <a name="1074064"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074065"> </a></code><h4>
  <a name="1074066"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074067"></a>#define IrIAS_GetType (
   t
)
</pre>
<h4>
  <a name="1074068"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074069"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074073"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074074"> </a>Returns 
</h4>

<p><a name="1074075"> </a>Type of result item, such as <code>IAS_ATTRIB_INTEGER</code>, <code>IAS_ATTRIB_OCTET_STRING</code> or <code>IAS_ATTRIB_USER_STRING</code>. The return value is of type <code>UInt8</code>.</p>
<h4>
  <a name="1074076"> </a>Compatibility 
</h4>

<p><a name="1074080"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074083"> </a>IrIAS_GetUserString Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074085"> </a>Purpose 
</h4>

<p><a name="1074086"> </a>Return a pointer to a user string, assuming that the current result item is of type <code>IAS_ATTRIB_USER_STRING</code>. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.)</p>
<h4>
  <a name="1074090"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074091"> </a></code><h4>
  <a name="1074092"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074093"></a>#define IrIAS_GetUserString (
   t
)
</pre>
<h4>
  <a name="1074094"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074095"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074099"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074100"> </a>Returns 
</h4>

<p><a name="1074101"> </a>Pointer to result string of type <code>UInt8</code>.</p>
<h4>
  <a name="1074102"> </a>Compatibility 
</h4>

<p><a name="1074106"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074109"> </a>IrIAS_GetUserStringCharSet Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074111"> </a>Purpose 
</h4>

<p><a name="1074112"> </a>Return the character set of the user string, assuming that the current result item is of type <code>IAS_ATTRIB_USER_STRING</code>. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.)</p>
<h4>
  <a name="1074116"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074117"> </a></code><h4>
  <a name="1074118"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074119"></a>#define IrIAS_GetUserStringCharSet (
   t
)
</pre>
<h4>
  <a name="1074120"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074121"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074125"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074126"> </a>Returns 
</h4>

<p><a name="1074127"> </a>Character set returned as an <code>IrCharSet</code> value.</p>
<h4>
  <a name="1074128"> </a>Compatibility 
</h4>

<p><a name="1074132"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074135"> </a>IrIAS_GetUserStringLen Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074137"> </a>Purpose 
</h4>

<p><a name="1074138"> </a>Return the length of a user string, assuming that the current result item is of type <code>IAS_ATTRIB_USER_STRING</code>. (Call <a href="IRLib.html#1074060"><code>IrIAS_GetType()</code></a> to determine the type of the current result item.)</p>
<h4>
  <a name="1074142"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074143"> </a></code><h4>
  <a name="1074144"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074145"></a>#define IrIAS_GetUserStringLen (
   t
)
</pre>
<h4>
  <a name="1074146"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074147"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074151"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074152"> </a>Returns 
</h4>

<p><a name="1074153"> </a>Length of user string returned as a <code>UInt8</code> value.</p>
<h4>
  <a name="1074154"> </a>Compatibility 
</h4>

<p><a name="1074158"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074161"> </a>IrIAS_Next Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074163"> </a>Purpose 
</h4>

<p><a name="1074164"> </a>Moves the internal pointer to the next result item.</p>
<h4>
  <a name="1074165"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074166"> </a></code><h4>
  <a name="1074167"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074168"></a>UInt8 *IrIAS_Next (
   UInt16 refNum,
   IrIasQuery *token
)
</pre>
<h4>
  <a name="1074169"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074170"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1074171"> </a>IR library refNum.</dd>

<dt><a name="1074172"> </a><code>&rarr;  <i><code>token</code></i></code></dt>
<dd><a name="1074176"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074177"> </a>Returns 
</h4>

<p><a name="1074178"> </a>Pointer to the next result item, or 0 if there are no more items.</p>
<h4>
  <a name="1074179"> </a>Comments 
</h4>

<p><a name="1074180"> </a>This function returns a pointer to the start of the next result item. If the pointer is 0, then there are no more result items.</p>
<h4>
  <a name="1074181"> </a>Compatibility 
</h4>

<p><a name="1074185"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074188"> </a>IrIAS_Query Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074190"> </a>Purpose 
</h4>

<p><a name="1074191"> </a>Makes an IAS query of the IAS database of another device.</p>
<h4>
  <a name="1074192"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074193"> </a></code><h4>
  <a name="1074194"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074195"></a>IrStatus IrIAS_Query (
   UInt16 refNum,
   IrIasQuery *token
)
</pre>
<h4>
  <a name="1074196"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074197"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1074198"> </a>IR library refNum.</dd>

<dt><a name="1074199"> </a><code>&rarr;  <i><code>token</code></i></code></dt>
<dd><a name="1074203"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure initialized as described in the Comments section.</dd>

</dl>
<h4>
  <a name="1074204"> </a>Returns 
</h4>

<p><a name="1074205"> </a><code>IR_STATUS_SUCCESS</code> means the operation is started successfully and the result is signaled by way of the callback function.</p>

<p><a name="1074206"> </a><code>IR_STATUS_FAILED</code> means the operation failed for one of the following reasons:</p>
<ul type="disc">
  <li><a name="1074207"> </a>The query exceeds <code>IR_MAX_QUERY_LEN</code>.
  <li><a name="1074208"> </a>The <code>result</code> field of <code>token</code> is 0.
  <li><a name="1074209"> </a>The <code>resultBufSize</code> field of <code>token</code> is 0.
  <li><a name="1074210"> </a>The <code>callback</code> field of <code>token</code> is 0.
  <li><a name="1074211"> </a>A query is already in progress.
</ul>

<p><a name="1074212"> </a><code>IR_STATUS_NO_IRLAP</code> means the operation failed because there is no IrLAP connection.</p>
<h4>
  <a name="1074213"> </a>Comments 
</h4>

<p><a name="1074214"> </a>An IrLAP connection must exist to the other device. The IAS query token must be initialized as described below. The result is signaled by calling the callback function whose pointer exists in the <code>IrIasQuery</code> structure. Only one query can be made at a time. </p>

<p><a name="1074215"> </a>The <code>IrIasQuery</code> structure passed in the <code>token</code> parameter must be initialized as follows:</p>
<ul type="disc">
  <li><a name="1074216"> </a>Assign a pointer to a callback function in which the result is signaled.
  <li><a name="1074217"> </a>Set <code>result</code> to point to a buffer large enough to hold the result of the query.
  <li><a name="1074218"> </a>Set <code>resultBufSize</code> to the size of the result buffer.
  <li><a name="1074219"> </a>Set <code>queryBuf</code> to point to a valid query.
  <li><a name="1074220"> </a>Set <code>queryLen</code> to the number of bytes in <code>queryBuf</code>. The length must not exceed <code>IR_MAX_QUERY_LEN</code>.
</ul>
<h4>
  <a name="1074221"> </a>Compatibility 
</h4>

<p><a name="1074225"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074228"> </a>IrIAS_SetDeviceName Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074230"> </a>Purpose 
</h4>

<p><a name="1074231"> </a>Sets the <code>value</code> field of the device name attribute of the "Device" object in the IAS database.</p>
<h4>
  <a name="1074232"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074233"> </a></code><h4>
  <a name="1074234"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074235"></a>IrStatus IrIAS_SetDeviceName (
   UInt16 refNum,
   UInt8 *name,
   UInt8 len
)
</pre>
<h4>
  <a name="1074236"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074237"> </a><code>&rarr;  <i><code>refnum</code></i></code></dt>
<dd><a name="1074238"> </a>IR library refNum.</dd>

<dt><a name="1074239"> </a><code>&rarr;  <i><code>name</code></i></code></dt>
<dd><a name="1074240"> </a>Pointer to an IAS <code>value</code> field for the device name attribute of the device object. It includes the attribute type, character set and device name. This <code>value</code> field should be a constant and the pointer must remain valid until <code>IrIAS_SetDeviceName</code> is called with another pointer.</dd>

<dt><a name="1074241"> </a><code>&rarr;  <i><code>len</code></i></code></dt>
<dd><a name="1074242"> </a>Total length of the <code>value</code> field. Maximum size allowed is <code>IR_MAX_IAS_ATTR_SIZE</code>.</dd>

</dl>
<h4>
  <a name="1074243"> </a>Returns 
</h4>

<p><a name="1074244"> </a><code>IR_STATUS_SUCCESS</code> means the operation is successful.</p>

<p><a name="1074245"> </a><code>IR_STATUS_FAILED</code> means <code>len</code> is too big, or the <code>value</code> field is not a valid user string.</p>
<h4>
  <a name="1074246"> </a>Compatibility 
</h4>

<p><a name="1074250"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h3 class="hbH3">
  <a name="1074253"> </a>IrIAS_StartResult Macro <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074255"> </a>Purpose 
</h4>

<p><a name="1074256"> </a>Put the internal pointer to the start of the result buffer.</p>
<h4>
  <a name="1074257"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074258"> </a></code><h4>
  <a name="1074259"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074260"></a>#define IrIAS_StartResult (
   t
)
</pre>
<h4>
  <a name="1074261"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074262"> </a><code>&rarr;  <i><code>t</code></i></code></dt>
<dd><a name="1074266"> </a>Pointer to an <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</dd>

</dl>
<h4>
  <a name="1074267"> </a>Returns 
</h4>

<p><a name="1074268"> </a>Returns nothing.</p>
<h4>
  <a name="1074269"> </a>Compatibility 
</h4>

<p><a name="1074273"> </a>Implemented only if <a href="CompatibilityApdx.html#993158">3.0 New Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="1074275"> </a>Application-Defined Functions <a href="#1072694"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1074276"> </a>The functions in this section are supplied by the developer and can be named anything.</p>

<h3 class="hbH3">
  <a name="1074279"> </a>IrIasQueryCallBack Function <a href="#1072694"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1074281"> </a>Purpose 
</h4>

<p><a name="1074282"> </a>Signals the result of IAS query. The result of IAS queries is signaled by calling this callback function which is pointed to by the <code>callBack</code> field of the <a href="IRLib.html#1072906"><code>IrIasQuery</code></a> structure.</p>
<h4>
  <a name="1074286"> </a>Declared In 
</h4>
<code>IrLib.h<a name="1074287"> </a></code><h4>
  <a name="1074288"> </a>Prototype 
</h4>
<pre class="proto"><a name="1074289"></a>void IrIasQueryCallBack (
   IrStatus status
)
</pre>
<h4>
  <a name="1074290"> </a>Parameters 
</h4>

<dl>
<dt><a name="1074291"> </a><code>&rarr;  <i><code>status</code></i></code></dt>
<dd><a name="1074292"> </a>The status of the query operation. The following values can be passed:</dd>

<dl>
<dt><a name="1074293"> </a><code><code>IR_STATUS_SUCCESS</code> </code></dt>
<dd><a name="1074294"> </a>means the query operation finished successfully and the results can be parsed.</dd>

<dt><a name="1074295"> </a><code><code>IR_STATUS_DISCONNECT</code> </code></dt>
<dd><a name="1074296"> </a>means the link or IrLMP connection was disconnected during the query, so the results are not valid.</dd>

</dl>
</dl>
<h4>
  <a name="1074297"> </a>Returns 
</h4>

<p><a name="1074298"> </a>Returns nothing. </p>

<p><a name="1074299"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ExgLibAPI.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ModemManager.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>