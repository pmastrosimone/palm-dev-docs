<html>
<head>
<title>(68K) Miscellaneous System Functions | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:47">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1037923"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Window.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PartIII.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">60 &nbsp;&nbsp;
Miscellaneous System Functions</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="MiscSys.html">60  Miscellaneous System Functions</a></h1>

      <h3 class="SideTOC3"><a href="#1037934">
      Crc16CalcBlock</a></h3>

      <h3 class="SideTOC3"><a href="#1037954">
      DlkControl</a></h3>

      <h3 class="SideTOC3"><a href="#1038126">
      DlkGetSyncInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1038233">
      IntlGetRoutineAddress</a></h3>

      <h3 class="SideTOC3"><a href="#1038266">
      IntlSetRoutineAddress</a></h3>

      <h3 class="SideTOC3"><a href="#1038304">
      LocGetNumberSeparators</a></h3>

      <h3 class="SideTOC3"><a href="#1038379">
      PceNativeCall</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1037928"> </a>This chapter describes miscellaneous system functions. The functions in this chapter are declared in the header files <code>Crc.h</code>, <code>DLServer.h</code>, <code>IntlMgr.h</code>, and <code>Localize.h</code>. </p>

<h3 class="hbH3">
  <a name="1037934"> </a>Crc16CalcBlock Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1037936"> </a>Purpose 
</h4>

<p><a name="1037937"> </a>Calculate the 16-bit CRC of a data block using the table lookup method.</p>
<h4>
  <a name="1037938"> </a>Declared In 
</h4>
<code>Crc.h<a name="1037939"> </a></code><h4>
  <a name="1037940"> </a>Prototype 
</h4>
<pre class="proto"><a name="1037942"></a>UInt16 Crc16CalcBlock (
   const void *bufP,
   UInt16 count,
   UInt16 crc
)
</pre>
<h4>
  <a name="1037943"> </a>Parameters 
</h4>

<dl>
<dt><a name="1037944"> </a><code><code>bufP</code></code></dt>
<dd><a name="1037945"> </a>Pointer to the data buffer.</dd>

<dt><a name="1037946"> </a><code><code>count</code></code></dt>
<dd><a name="1037947"> </a>Number of bytes in the buffer.</dd>

<dt><a name="1037948"> </a><code><code>crc</code></code></dt>
<dd><a name="1037949"> </a>Seed crc value.</dd>

</dl>
<h4>
  <a name="1037950"> </a>Returns 
</h4>

<p><a name="1037951"> </a>A 16-bit CRC for the data buffer.</p>

<h3 class="hbH3">
  <a name="1037954"> </a>DlkControl Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1037956"> </a>Purpose 
</h4>

<p><a name="1037957"> </a>Perform an operation at the behest of the desktop software. Among other things, this function is used to return values to the conduit during the handling of <a href="AppLaunchCodes.html#1012217"><code>sysAppLaunchCmdHandleSyncCallApp</code></a>.</p>
<h4>
  <a name="1037961"> </a>Declared In 
</h4>
<code>DLServer.h<a name="1037962"> </a></code><h4>
  <a name="1037963"> </a>Prototype 
</h4>
<pre class="proto"><a name="1037964"></a>Err DlkControl (
   DlkCtlEnum op,
   void *param1P,
   void *param2P
)
</pre>
<h4>
  <a name="1037965"> </a>Parameters 
</h4>

<dl>
<dt><a name="1037966"> </a><code>&rarr;  <i><code>op</code></i></code></dt>
<dd><a name="1037967"> </a>Desktop Link control code. Use <code>dlkCtlSendCallAppReply</code> when sending a result back to the conduit while handling a <code>sysAppLaunchCmdHandleSyncCallApp</code> launch code.</dd>

<dt><a name="1037968"> </a><code>&harr;  <i><code>param1P</code></i></code></dt>
<dd><a name="1037969"> </a>Pointer to the first parameter (operation-specific). For <code>dlkCtlSendCallAppReply</code>, this parameter should point to a <a href="MiscSys.html#1037990"><code>DlkCallAppReplyParamType</code></a> structure.</dd>

<dt><a name="1037973"> </a><code>&harr;  <i><code>param2P</code></i></code></dt>
<dd><a name="1037974"> </a>Pointer to the second parameter (operation-specific). For <code>dlkCtlSendCallAppReply</code>, this parameter should be set to <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1037975"> </a>Returns 
</h4>

<p><a name="1037976"> </a><code>errNone</code> if no error, or an error code if there was a problem during the call to <code>DlkControl</code>. In either case, place the value returned from <code>DlkControl</code> into the <code>replyErr</code> field of the <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SysAppLaunchCmdHandleSyncCallAppType</span> structure when handling <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">sysAppLaunchCmdHandleSyncCallApp</span>.</p>
<h4>
  <a name="1037977"> </a>Comments 
</h4>

<p><a name="1037978"> </a>This function is needed to return data back to a conduit during the handling of <a href="AppLaunchCodes.html#1012217"><code>sysAppLaunchCmdHandleSyncCallApp</code></a>. Set <code>param1P</code> to point to a <a href="MiscSys.html#1037990"><code>DlkCallAppReplyParamType</code></a> structure, as described below. See the <a href="MiscSys.html#1038014">Example</a> for an illustration of how to handle <code>sysAppLaunchCmdHandleSyncCallApp</code>.</p>

<h4 class="hcH4">
  <a name="1037990"> </a>DlkCallAppReplyParamType
</h4>
<h4>
  <a name="1037991"> </a>Prototype
</h4>
<pre class="proto"><a name="1037992"></a><code>typedef struct DlkCallAppReplyParamType {
   UInt16 pbSize;
   UInt32 dwResultCode;
   const void *resultP;
   UInt32 dwResultSize;
   void *dlRefP;
   UInt32 dwReserved1;
} DlkCallAppReplyParamType;</code>
</pre>
<h4>
  <a name="1038000"> </a>Fields
</h4>

<dl>
<dt><a name="1038001"> </a><code><code>pbSize</code></code></dt>
<dd><a name="1038002"> </a>Size of this parameter block. Set it to <code>sizeof(DlkCallAppReplyParamType)</code>.</dd>

<dt><a name="1038003"> </a><code><code>dwResultCode</code></code></dt>
<dd><a name="1038004"> </a>Result code to be returned to the remote caller.</dd>

<dt><a name="1038005"> </a><code><code>resultP</code></code></dt>
<dd><a name="1038006"> </a>Pointer to result data.</dd>

<dt><a name="1038007"> </a><code><code>dwResultSize</code></code></dt>
<dd><a name="1038008"> </a>Size of result data block (number of bytes).</dd>

<dt><a name="1038009"> </a><code><code>dlRefP</code></code></dt>
<dd><a name="1038010"> </a>Desktop Link reference pointer from <code>SysAppLaunchCmdHandleSyncCallAppType</code>.</dd>

<dt><a name="1038011"> </a><code><code>dwReserved1</code></code></dt>
<dd><a name="1038012"> </a>Reserved. Set to <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1038014"> </a>Example 
</h4>

<p><a name="1038015"> </a>The <code>SysAppLaunchCmdHandleSyncCallAppType</code> structure that accompanies the <a href="AppLaunchCodes.html#1012217"><code>sysAppLaunchCmdHandleSyncCallApp</code></a> launch code contains all of the information passed into <code>SyncCallRemoteModule</code> on the desktop as well as the necessary fields to pass the result pack to the desktop. At the end of your <code>sysAppLaunchCmdHandleSyncCallApp</code> launch code handler, you'll need to send a <a href="MiscSys.html#1037990"><code>DlkCallAppReplyParamType</code></a> reply structure back to the device using <code>DlkControl</code>.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
#include &lt;DLServer.h&gt;<a name="1038022"> </a>
...<a name="1038023"> </a>
case sysAppLaunchCmdHandleSyncCallApp:<a name="1038024"> </a>
{<a name="1038025"> </a>
   SysAppLaunchCmdHandleSyncCallAppType *theCommandPtr;<a name="1038026"> </a>
   DlkCallAppReplyParamType theReplyParams;<a name="1038027"> </a>
   CharPtr theReplyBuffer = "SUCCESS";<a name="1038028"> </a>
<a name="1038029"> </a>
   // Cast the cmdPBP to a SysAppLaunchCmdHandleSyncCallAppType <a name="1038030"> </a>
   // pointer so that we can work with it.<a name="1038031"> </a>
   theCommandPtr = (SysAppLaunchCmdHandleSyncCallAppType*)cmdPBP;<a name="1038032"> </a>
<a name="1038033"> </a>
   // Do whatever work is necessary here.  If you set the m_wActionCode<a name="1038034"> </a>
   // field in your CCallModuleParams class on the desktop, then you <a name="1038035"> </a>
   // can handle that code by looking at the action field of theCommandPtr<a name="1038036"> </a>
   // (i.e.) if (theCommandPtr-&gt;action == 1)<a name="1038037"> </a>
<a name="1038038"> </a>
   // Create the reply to send back to the desktop<a name="1038039"> </a>
<a name="1038040"> </a>
   // First clear out all the fields.  This is necessary so that the reserved<a name="1038041"> </a>
   // fields are set to NULL.<a name="1038042"> </a>
   MemSet( &amp;theReplyParams, sizeof(DlkCallAppReplyParamType), 0 );<a name="1038043"> </a>
<a name="1038044"> </a>
   // Set the size of the reply.  This is required.<a name="1038045"> </a>
   theReplyParams.pbSize = sizeof(DlkCallAppReplyParamType);<a name="1038046"> </a>
<a name="1038047"> </a>
   // Set the result code.  Normally this will be set to zero unless you want<a name="1038048"> </a>
   // to send an error code back to the desktop.<a name="1038049"> </a>
   theReplyParams.dwResultCode = 0;<a name="1038050"> </a>
<a name="1038051"> </a>
   // Fill in the reply buffer and buffer length<a name="1038052"> </a>
   theReplyParams.resultP = theReplyBuffer;<a name="1038053"> </a>
   theReplyParams.dwResultSize = StrLen(theReplyBuffer) + 1;<a name="1038054"> </a>
<a name="1038055"> </a>
   // Fill in the DL reference pointer.  This is required.<a name="1038056"> </a>
   theReplyParams.dlRefP = theCommandPtr-&gt;dlRefP;<a name="1038057"> </a>
<a name="1038058"> </a>
   // Set the handled field to true.  This is required to let the desktop<a name="1038059"> </a>
   // know that the sysAppLaunchCmdHandleSyncCallApp was handled.  If you<a name="1038060"> </a>
   // don't set this to true, the call to SyncCallRemoteModule will return<a name="1038061"> </a>
   // SYNCERR_UNKNOWN_REQUEST.<a name="1038062"> </a>
   theCommandPtr-&gt;handled = true;<a name="1038063"> </a>
<a name="1038064"> </a>
   // Finally, set the replyErr field by passing the reply parameters to<a name="1038065"> </a>
   // DlkControl.  This is required for the DLServer to properly handle the<a name="1038066"> </a>
   // reply request.<a name="1038067"> </a>
   theCommandPtr-&gt;replyErr = DlkControl (dlkCtlSendCallAppReply,
     &amp;theReplyParams, NULL);<a name="1038068"> </a>
<a name="1038069"> </a>
   break;<a name="1038070"> </a>
}<a name="1038071"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1038078"> </a><a href="MiscSys.html#1038082">Table 60.1</a> and <a href="MiscSys.html#1038105">Table 60.2</a> list some important mappings from the <code>CCallModuleParams</code> class on the desktop to the <code>SysAppLaunchCmdHandleSyncCallAppType</code> and <code>DlkCallAppReplyParamType</code> structures on the handheld.</p>

<p class="caption"><a name="1038082"> </a><b>Table 60.1&nbsp;&nbsp;CCallModuleParams to SysAppLaunchCmdHandleSyncCallAppType mapping</b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1038086"> </a><b>CCallModuleParams</b></p>
    </th>
    <th><p class="tt"><a name="1038088"> </a><b>SysAppLaunchCmdHandleSyncCallAppType</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1038090"> </a>m_wActionCode</p>
    </td>
    <td><p class="tt"><a name="1038092"> </a>action</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1038094"> </a>m_dwParamSize</p>
    </td>
    <td><p class="tt"><a name="1038096"> </a>dwParamSize</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1038098"> </a>m_pParam</p>
    </td>
    <td><p class="tt"><a name="1038100"> </a>paramP</p>
    </td>
  </tr>
</table>

</div>


<p class="caption"><a name="1038105"> </a><b>Table 60.2&nbsp;&nbsp;CCallModuleParams to DlkCallAppReplyParamType mapping</b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1038109"> </a><b>CCallModuleParams</b></p>
    </th>
    <th><p class="tt"><a name="1038111"> </a><b>DlkCallAppReplyParamType</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1038113"> </a>m_dwResultBufSize</p>
    </td>
    <td><p class="tt"><a name="1038115"> </a>dwResultSize</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1038117"> </a>m_pResultBuf</p>
    </td>
    <td><p class="tt"><a name="1038119"> </a>resultP</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1038121"> </a>m_dwResultCode</p>
    </td>
    <td><p class="tt"><a name="1038123"> </a>dwResultCode</p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1038126"> </a>DlkGetSyncInfo Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1038128"> </a>Purpose 
</h4>

<p><a name="1038129"> </a>Get the sync info managed by Desktop Link. This function is often used to obtain the user name on the handheld.</p>
<h4>
  <a name="1038131"> </a>Declared In 
</h4>
<code>DLServer.h<a name="1038132"> </a></code><h4>
  <a name="1038133"> </a>Prototype 
</h4>
<pre class="proto"><a name="1038134"></a>Err DlkGetSyncInfo (
   UInt32 *succSyncDateP,
   UInt32 *lastSyncDateP,
   DlkSyncStateType *syncStateP,
   Char *nameBufP,
   Char *logBufP,
   Int32 *logLenP
)
</pre>
<h4>
  <a name="1038135"> </a>Parameters 
</h4>

<dl>
<dt><a name="1038136"> </a><code>&larr;  <i><code>succSyncDateP</code></i></code></dt>
<dd><a name="1038137"> </a>Pointer to the location where the date of the last successful sync is stored. Supply <code>NULL</code> for this parameter if this date isn't needed.</dd>

<dt><a name="1038138"> </a><code>&larr;  <i><code>lastSyncDateP</code></i></code></dt>
<dd><a name="1038139"> </a>Pointer to the location where the date of the last sync, successful or otherwise, is stored. Supply <code>NULL</code> for this parameter if this date isn't needed.</dd>

<dt><a name="1038140"> </a><code>&larr;  <i><code>syncStateP</code></i></code></dt>
<dd><a name="1038141"> </a>Pointer to a <code>DlkSyncStateType</code> enum into which the state of the last sync is stored. Supply <code>NULL</code> for this parameter if the state information isn't needed. See the Comments, below, for a description of this enum.</dd>

<dt><a name="1038142"> </a><code>&larr;  <i><code>nameBufP</code></i></code></dt>
<dd><a name="1038143"> </a>Pointer to a string buffer into which the null-terminated handheld user name is stored. This string buffer must have been preallocated to be at least <code>dlkUserNameBufSize</code> bytes in length. Supply <code>NULL</code> for this parameter if the user name isn't needed.</dd>

<dt><a name="1038144"> </a><code>&larr;  <i><code>logBufP</code></i></code></dt>
<dd><a name="1038145"> </a>Pointer to a string buffer into which the sync log text, null-terminated, is stored. Supply <code>NULL</code> for this parameter if the log text isn't needed. If you supply a valid pointer for this parameter, you must specify the preallocated buffer length using the <code>logLenP</code> parameter; the returned log text will be truncated, if necessary, to fit within the buffer.</dd>

<dt><a name="1038146"> </a><code>&harr;  <i><code>logLenP</code></i></code></dt>
<dd><a name="1038147"> </a>Pointer to the log buffer size. If <code>logBufP</code> is not <code>NULL</code>, on entry you must set this value to the size of the <code>logBufP</code> buffer. When this function returns, this value indicates the actual length of the log text, not counting the null terminator.</dd>

</dl>
<h4>
  <a name="1038148"> </a>Returns 
</h4>

<p><a name="1038149"> </a>Returns <code>errNone</code> if no error, or <code>dlkErrMemory</code> if the Desktop Link preferences resource couldn't be locked.</p>
<h4>
  <a name="1038150"> </a>Comments 
</h4>

<p><a name="1038151"> </a>The state information returned through <code>syncStateP</code> has one of the values defined by the <code>DlkSyncStateType</code> enum:</p>
<h4>
  <a name="1038152"> </a>Prototype 
</h4>
<pre class="proto"><a name="1038153"></a>typedef enum DlkSyncStateType {
  dlkSyncStateNeverSynced = 0,
  dlkSyncStateInProgress,
  dlkSyncStateLostConnection,
  dlkSyncStateLocalCan,
  dlkSyncStateRemoteCan,
  dlkSyncStateLowMemoryOnTD,
  dlkSyncStateAborted,
  dlkSyncStateCompleted,
  dlkSyncStateIncompatibleProducts,
  dlkSyncStateNPOD
} DlkSyncStateType;
</pre>
<h4>
  <a name="1052996"> </a>Constants 
</h4>

 

<dl>
<dt><a name="1038172"> </a><code><code>dlkSyncStateNeverSynced</code></code></dt>
<dd><a name="1038174"> </a>The handheld has never been synced.</dd>

<dt><a name="1038176"> </a><code><code>dlkSyncStateInProgress</code></code></dt>
<dd><a name="1038178"> </a>A sync is currently in progress.</dd>

<dt><a name="1038180"> </a><code><code>dlkSyncStateLostConnection</code></code></dt>
<dd><a name="1038182"> </a>The connection was lost during sync.</dd>

<dt><a name="1038184"> </a><code><code>dlkSyncStateLocalCan</code></code></dt>
<dd><a name="1038186"> </a>Sync was cancelled by the user on the handheld.</dd>

<dt><a name="1038188"> </a><code><code>dlkSyncStateRemoteCan</code></code></dt>
<dd><a name="1038190"> </a>Sync was cancelled by the user from the desktop.</dd>

<dt><a name="1038192"> </a><code><code>dlkSyncStateLowMemoryOnTD</code></code></dt>
<dd><a name="1038194"> </a>Sync ended due to a low memory condition on the handheld.</dd>

<dt><a name="1038196"> </a><code><code>dlkSyncStateAborted</code></code></dt>
<dd><a name="1038198"> </a>Sync was aborted for some other reason.</dd>

<dt><a name="1038200"> </a><code><code>dlkSyncStateCompleted</code></code></dt>
<dd><a name="1038202"> </a>Sync completed normally.</dd>

<dt><a name="1038204"> </a><code><code>dlkSyncStateIncompatibleProducts</code></code></dt>
<dd><a name="1038206"> </a>Sync ended because the desktop HotSync product is incompatible with this version of the handheld HotSync.</dd>

<dt><a name="1038208"> </a><code><code>dlkSyncStateNPOD</code></code></dt>
<dd><a name="1038210"> </a>The sync could not take place because the handheld has a 4.0-style password but the desktop hasn't yet been updated to a compatible version.</dd>

</dl>
<h4>
  <a name="1038213"> </a>Example 
</h4>

<p><a name="1038214"> </a>This function is most often used to obtain the handheld user name. The following code excerpt shows how to do this (for clarity, error-checking has been omitted):</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
MemHandle nameH;<a name="1038215"> </a>
char *nameP;<a name="1038216"> </a>
 <a name="1038217"> </a>
// Allocate a buffer for the user name<a name="1038218"> </a>
nameH = MemHandleNew(dlkUserNameBufSize); <a name="1038219"> </a>
nameP = MemHandleLock(nameH); <a name="1038220"> </a>
 <a name="1038221"> </a>
// Obtain the user's name<a name="1038222"> </a>
DlkGetSyncInfo(NULL, NULL, NULL, nameP, NULL, NULL);<a name="1038223"> </a>
 <a name="1038224"> </a>
// ... Do something with the user name here ...<a name="1038225"> </a>
 <a name="1038226"> </a>
// Now that we're done with the user name, free the buffer<a name="1038227"> </a>
MemPtrUnlock(nameP);<a name="1038228"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1038229"> </a>Compatibility 
</h4>

<p><a name="1038230"> </a>The <code>dlkSyncStateIncompatibleProducts</code> enum value was added in Palm OS 3.0. The <code>dlkSyncStateNPOD</code> enum value was added in Palm OS 4.0.</p>

<h3 class="hbH3">
  <a name="1038233"> </a>IntlGetRoutineAddress Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1038235"> </a>Purpose 
</h4>

<p><a name="1038236"> </a>Return the address of an international manager or text manager function. </p>
<h4>
  <a name="1038237"> </a>Declared In 
</h4>
<code>IntlMgr.h<a name="1038238"> </a></code><h4>
  <a name="1051614"> </a>Prototype 
</h4>
<pre class="proto"><a name="1051615"></a>void *IntlGetRoutineAddress (
   IntlSelector inSelector
)
</pre>
<h4>
  <a name="1051616"> </a>Parameters 
</h4>

<dl>
<dt><a name="1038242"> </a><code>&rarr;  <i><code>inSelector</code></i></code></dt>
<dd><a name="1038244"> </a>One of the routine selectors defined in <code>IntlMgr.h</code>. </dd>

</dl>
<h4>
  <a name="1038245"> </a>Returns 
</h4>

<p><a name="1038246"> </a>Returns the address of the corresponding function. Returns <code>NULL</code> if an invalid routine selector is passed. </p>
<h4>
  <a name="1038247"> </a>Comments 
</h4>

<p><a name="1038248"> </a>Use this function for performance reasons. It returns the address of an international manager or text manager function. You can then use this address to call the function without having to go through the international manager's trap dispatch table. This function is mostly useful for optimizing the performance of text manager routines that are called in a tight loop. </p>

<p><a name="1038249"> </a>You might also use this function to check for the presence of newer international manager and text manager functions. If the result is <code>NULL</code>, the function is not implemented on this device. </p>
<h4>
  <a name="1038250"> </a>Compatibility 
</h4>

<p><a name="1038254"> </a>Implemented only if <a href="CompatibilityApdx.html#994015">International Feature Set</a> is present.</p>
<h4>
  <a name="1038255"> </a>See Also 
</h4>

<p><a name="1038262"> </a><a href="MiscSys.html#1038266"><code>IntlSetRoutineAddress()</code></a>, <a href="SystemManager.html#1076486"><code>SysGetTrapAddress()</code></a></p>

<h3 class="hbH3">
  <a name="1038266"> </a>IntlSetRoutineAddress Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1038268"> </a>Purpose 
</h4>

<p><a name="1038269"> </a>Set the address of the function corresponding to an international manager or text manager function. </p>
<h4>
  <a name="1038270"> </a>Declared In 
</h4>
<code>IntlMgr.h<a name="1038271"> </a></code><h4>
  <a name="1038272"> </a>Prototype 
</h4>
<pre class="proto"><a name="1038273"></a>Err IntlSetRoutineAddress (
   IntlSelector iSelector,
   void *iProcPtr
)
</pre>
<h4>
  <a name="1038274"> </a>Parameters 
</h4>

<dl>
<dt><a name="1038275"> </a><code>&rarr;  <i><code>iSelector</code></i></code></dt>
<dd><a name="1038277"> </a>One of the routine selectors defined in <code>IntlMgr.h</code>. </dd>

<dt><a name="1038278"> </a><code>&rarr;  <i><code>iProcPtr</code></i></code></dt>
<dd><a name="1038279"> </a>Pointer to a function that the routine identified by <code>iSelector</code> should point to. </dd>

</dl>
<h4>
  <a name="1038280"> </a>Returns 
</h4>

<p><a name="1038282"> </a>Returns <code>errNone</code> if no error, or <code>intlErrInvalidSelector</code> if <code>iSelector</code> does not refer to a valid international manager or text manager routine.</p>
<h4>
  <a name="1038283"> </a>Comments 
</h4>

<p><a name="1038284"> </a>This function is useful for patching an international or text manager function. Normally only a locale module would need to patch one of these functions. </p>

<div><hr>
  <a name="1038285"> </a> <span class="warning">WARNING! </span> If your application patches an international manager function using this function, you <i>must</i> remove the patch before your application exits. Do <i>not</i> use this mechanism to permanently patch international manager functions as it may cause unpredictable results for the system and other applications.
<hr>
</div>
<h4>
  <a name="1038286"> </a>Compatibility 
</h4>

<p><a name="1038292"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. If <a href="CompatibilityApdx.html#997336">5.0 New Feature Set</a> is present this function is unimplemented.</p>
<h4>
  <a name="1038294"> </a>See Also 
</h4>

<p><a name="1038301"> </a><a href="MiscSys.html#1038233"><code>IntlGetRoutineAddress()</code></a>, <a href="SystemManager.html#1076876"><code>SysSetTrapAddress()</code></a></p>

<h3 class="hbH3">
  <a name="1038304"> </a>LocGetNumberSeparators Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1038306"> </a>Purpose 
</h4>

<p><a name="1038307"> </a>Get localized number separators.</p>
<h4>
  <a name="1038308"> </a>Declared In 
</h4>
<code>Localize.h<a name="1038309"> </a></code><h4>
  <a name="1038310"> </a>Prototype 
</h4>
<pre class="proto"><a name="1038311"></a>void LocGetNumberSeparators (
   NumberFormatType numberFormat,
   Char *thousandSeparator,
   Char *decimalSeparator
)
</pre>
<h4>
  <a name="1038312"> </a>Parameters 
</h4>

<dl>
<dt><a name="1038313"> </a><code>&rarr;  <i><code>numberFormat</code></i></code></dt>
<dd><a name="1038317"> </a>The format to use (see <a href="LocaleMgr.html#1013542"><code>NumberFormatType</code></a>).</dd>

<dt><a name="1038318"> </a><code>&larr;  <i><code>thousandSeparator</code></i></code></dt>
<dd><a name="1038319"> </a>The character used for the thousands separator.</dd>

<dt><a name="1038320"> </a><code>&larr;  <i><code>decimalSeparator</code></i></code></dt>
<dd><a name="1038321"> </a>The character used for the decimal separator. </dd>

</dl>
<h4>
  <a name="1038322"> </a>Returns 
</h4>

<p><a name="1038323"> </a>Returns nothing.</p>
<h4>
  <a name="1038324"> </a>Comments 
</h4>

<p><a name="1038325"> </a>The format to use is stored in the system preferences. You can obtain it by passing <code>prefNumberFormat</code> to <a href="Preferences.html#1031531"><code>PrefGetPreference()</code></a>. </p>
<h4>
  <a name="1038329"> </a>Compatibility 
</h4>

<p><a name="1038333"> </a>Implemented only if <a href="CompatibilityApdx.html#992789">2.0 New Feature Set</a> is present.</p>
<h4>
  <a name="1038334"> </a>See Also 
</h4>

<p><a name="1038343"> </a><a href="StringManager.html#1065393"><code>StrLocalizeNumber()</code></a>, <a href="StringManager.html#1065268"><code>StrDelocalizeNumber()</code></a>, <a href="../PalmOSCompanion/Localization.html#1053137">"Localized Applications"</a> in the <i>Palm OS Programmer's Companion</i>, vol. I </p>

<h3 class="hbH3">
  <a name="1038379"> </a>PceNativeCall Function <a href="#1037923"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1038381"> </a>Purpose 
</h4>

<p><a name="1038382"> </a>Call a native ARM or Windows NT function from code running in the PACE (68k) environment.</p>
<h4>
  <a name="1038383"> </a>Declared In 
</h4>
<code>PceNativeCall.h<a name="1038384"> </a></code><h4>
  <a name="1038385"> </a>Prototype 
</h4>
<pre class="proto"><a name="1038386"></a>UInt32 PceNativeCall(
   NativeFuncType *nativeFuncP,
   void *userDataP
)
</pre>
<h4>
  <a name="1038387"> </a>Parameters 
</h4>

<dl>
<dt><a name="1038388"> </a><code>&rarr;  <i><code>nativeFuncP</code></i></code></dt>
<dd><a name="1038389"> </a>On a handheld with an ARM processor, this is a pointer to the ARM function to be executed. On Palm OS Simulator, this is a pointer to the name of a DLL and the name of the entry point within that DLL that is to be executed, separated by a null character and terminated with a null character. See the Comments, below, for more details on the format of this argument.</dd>

<dt><a name="1038390"> </a><code>&harr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1038391"> </a>Pointer to an application-specific block of data that is passed to the ARM function. This block has no specific alignment requirements; it needn't be aligned on a 16- or 32-bit boundary. Note that your ARM function may impose specific alignment requirements, however.</dd>

</dl>
<h4>
  <a name="1038392"> </a>Returns 
</h4>

<p><a name="1038393"> </a>The return value of the specified ARM function is returned by <code>PceNativeCall</code>. This value is placed in both the A0 and D0 registers in the emulated 68k CPU, allowing <code>PceNativeCall</code> to support both pointer and immediate return value conventions.</p>
<h4>
  <a name="1038394"> </a>Comments 
</h4>

<p><a name="1038395"> </a>Applications that employ <code>PceNativeCall</code> won't work on handhelds running a version of Palm OS prior to Palm OS Garnet. Before calling <code>PceNativeCall</code>, your application must verify the underlying processor type, since the calling convention is different on Palm OS Simulator. See <a href="../PalmOSCompanion/PalmOS5ARM_Chapter.html#918026">"Calling ARM-Native Subroutines"</a> of <i>Palm OS Programmer's Companion</i>, vol. I for more information and an example.</p>

<p><a name="1038402"> </a><code>PceNativeCall</code> byte-swaps the parameter pointer and return value as appropriate for the Dragonball-to-ARM transition. This allows you to dereference <code>userDataP</code> directly from your ARM code. Because the operating system has no knowledge of the structure of the parameter block, however, it performs no byte-swapping within this block. Your ARM code must do this as necessary for your application (see <a href="../PalmOSCompanion/PalmOS5ARM_Chapter.html#918090">"Handle 68K and ARM Technical Differences"</a> of the <i>Palm OS Programmer's Companion</i>, vol. I for more information).</p>

<p><a name="1038409"> </a>On Palm OS Simulator, rather than passing a pointer to a block of ARM code in <code>nativeFuncP</code>, you instead pass a pointer to the name of a DLL and the name of the function within that DLL that is to be executed. These two names must be separated by a null character, and the entire sequence must be terminated by a null character.<code> </code>For example, to load the DLL found at <code>C:\TEST_DLL\Debug\Simple.dll</code> and call the function <code>TestNativeCall</code> within that DLL, you might pass a pointer to the following character string literal:</p>

<p><a name="1038410"> </a><code>"C:\\TEST_DLL\\Debug\\Simple.dll\0TestNativeCall"</code></p>

<p><a name="1038411"> </a>Note that if you don't supply an absolute path, Simulator looks for the DLL in (or relative to) the directory from which <code>PalmSim.exe</code> is running. Thus, if the DLL is located in the same directory as <code>PalmSim.exe</code>, you can call the above function with:</p>

<p><a name="1038412"> </a><code>"Simple.dll\0TestNativeCall"</code></p>

<p><a name="1038413"> </a>On release ROMs, <code>PceNativeCall</code> fails silently if <code>nativeFuncP</code> is NULL. On debug ROMs, it generates an error. All other pointers are treated as valid code and followed. If <code>nativeFuncP</code> is invalid, the processor will try to execute the code anyway and will eventually generate an error.</p>

<div><hr>
  <a name="1038414"> </a> <b>NOTE: </b> The call to your native function is guaranteed to be made from ARM mode.
<hr>
</div>

<p><a name="1038415"> </a>For more information on how the ARM code should be structured and how to call back and forth between the PACE and ARM environments, see <a href="../PalmOSCompanion/PalmOS5ARM_Chapter.html#920544">"Palm OS Garnet ARM Programming"</a> of the <i>Palm OS Programmer's Companion</i>, vol. I.</p>
<h4>
  <a name="1038422"> </a>Compatibility 
</h4>

<p><a name="1038426"> </a>Implemented only if <a href="CompatibilityApdx.html#997336">5.0 New Feature Set</a> is present.</p>

<p><a name="1038525"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Window.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PartIII.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>