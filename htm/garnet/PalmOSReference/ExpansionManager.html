<html>
<head>
<title>(68K) Expansion Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:20">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1032894"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ErrorManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="FeatureManager.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">33 &nbsp;&nbsp;
Expansion Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="ExpansionManager.html">33  Expansion Manager</a></h1>

   <h2 class="SideTOC2"><a href="#1032921">
   Expansion Manager Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1032924">
      ExpCardInfoType</a></h3>

   <h2 class="SideTOC2"><a href="#1032969">
   Expansion Manager Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1032970">
      Error Codes</a></h3>

      <h3 class="SideTOC3"><a href="#1033049">
      Defined Media Types</a></h3>

   <h2 class="SideTOC2"><a href="#1033134">
   Expansion Manager Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1033137">
      ExpCardGetSerialPort</a></h3>

      <h3 class="SideTOC3"><a href="#1033171">
      ExpCardInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1033226">
      ExpCardPresent</a></h3>

      <h3 class="SideTOC3"><a href="#1033266">
      ExpSlotDriverInstall</a></h3>

      <h3 class="SideTOC3"><a href="#1033303">
      ExpSlotDriverRemove</a></h3>

      <h3 class="SideTOC3"><a href="#1033336">
      ExpSlotEnumerate</a></h3>

      <h3 class="SideTOC3"><a href="#1033391">
      ExpSlotLibFind</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1032895"> </a>This chapter provides the following information about the Expansion Manager:</p>
<ul type="disc">
  <li><a name="1032899"> </a><a href="ExpansionManager.html#1032921">Expansion Manager Data Structures</a>
  <li><a name="1032903"> </a><a href="ExpansionManager.html#1032969">Expansion Manager Constants</a>
  <li><a name="1032907"> </a><a href="ExpansionManager.html#1033134">Expansion Manager Functions</a>
</ul>

<p><a name="1032909"> </a>The header file <code>ExpansionMgr.h</code> declares the Expansion Manager API. For more information on the Expansion Manager, see <a href="../PalmOSCompanion/ExpAndVFSConcepts.html#1031615">Chapter 7, "Expansion,"</a> in <i>Palm OS Programmer's Companion</i>, vol. I.</p>

<p><a name="1032916"> </a>Note that the Expansion Manager is an optional system extension; the functions described in this chapter are implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present.</p>

<h2 class="haH2">
  <a name="1032921"> </a>Expansion Manager Data Structures <a href="#1032894"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1032924"> </a>ExpCardInfoType Struct <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1032926"> </a>Purpose 
</h4>

<p><a name="1032927"> </a>The <code>ExpCardInfoType</code> declaration defines a structure that is passed to <a href="ExpansionManager.html#1033171"><code>ExpCardInfo()</code></a>. This structure is used to determine the characteristics of the card loaded in the slot. It is initialized by the underlying slot driver with the following information. </p>
<h4>
  <a name="1032931"> </a>Prototype 
</h4>
<pre class="proto"><a name="1032932"></a>typedef struct ExpCardInfoTag {
  UInt32 capabilityFlags;
  Char
    manufacturerStr[expCardInfoStringMaxLen+1];
  Char productStr[expCardInfoStringMaxLen+1];
  Char
    deviceClassStr[expCardInfoStringMaxLen+1];
  Char
  deviceUniqueIDStr[expCardInfoStringMaxLen+1];
} ExpCardInfoType, *ExpCardInfoPtr;
</pre>
<h4>
  <a name="1039440"> </a>Fields 
</h4>

<dl>
<dt><a name="1032942"> </a><code><code>capabilityFlags</code></code></dt>
<dd><a name="1032944"> </a>Describes the capabilities of the card. The following flags are currently supported:</dd>

<dl>
<dt><a name="1032946"> </a><code><code>expCapabilityHasStorage</code></code></dt>
<dd><a name="1039534"> </a>Indicates that the card supports reading and (possibly) writing.</dd>

<dt><a name="1039504"> </a><code>expCapabilityHidden</code></dt>
<dd><a name="1039525"> </a>Indicates that the expansion card should not be visible to the user.</dd>

<dt><a name="1039636"> </a><code>expCapabilityNonRemovable</code></dt>
<dd><a name="1039641"> </a>Indicates that the expansion card cannot be removed.</dd>

<dt><a name="1032948"> </a><code><code>expCapabilityReadOnly</code></code></dt>
<dd><a name="1039540"> </a>Indicates that the card is read only.</dd>

<dt><a name="1032950"> </a><code><code>expCapabilitySerial</code></code></dt>
<dd><a name="1039542"> </a>Indicates that the card supports a simple serial interface.</dd>

</dl>
<dt><a name="1032952"> </a><code><code>manufacturerStr</code></code></dt>
<dd><a name="1032954"> </a>Names the manufacturer of the card. For example "Palm" or "Motorola".</dd>

<dt><a name="1032956"> </a><code><code>productStr</code></code></dt>
<dd><a name="1032958"> </a>Name of the product. For example "SafeBackup 32MB".</dd>

<dt><a name="1032960"> </a><code><code>deviceClassStr</code></code></dt>
<dd><a name="1032962"> </a>Describes the type of card, for example, "Backup" or "Ethernet".</dd>

<dt><a name="1032964"> </a><code><code>deviceUniqueIDStr</code></code></dt>
<dd><a name="1032966"> </a>Unique identifier for the product. A serial number for example. This value is set to the empty string if no identifier exists.</dd>

</dl>

<h2 class="haH2">
  <a name="1032969"> </a>Expansion Manager Constants <a href="#1032894"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1032970"> </a>Error Codes <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1032971"> </a>The Expansion Manager defines the following error codes:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1032974"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Constant</span></b></p>
    </th>
    <th><p class="tt"><a name="1032976"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1032979"> </a><code>expErrUnsupportedOperation</code></p>
    </td>
    <td><p class="tt"><a name="1032981"> </a>The operation is unsupported or undefined.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1032984"> </a><code>expErrNotEnoughPower</code></p>
    </td>
    <td><p class="tt"><a name="1032986"> </a>The required power is not available.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1032989"> </a><code>expErrCardNotPresent</code></p>
    </td>
    <td><p class="tt"><a name="1032991"> </a>There is no card present in the given slot.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1032994"> </a><code>expErrInvalidSlotRefNum</code></p>
    </td>
    <td><p class="tt"><a name="1032996"> </a>The slot reference number is not valid.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1032999"> </a><code>expErrSlotDeallocated</code></p>
    </td>
    <td><p class="tt"><a name="1033001"> </a>The slot reference number is within the valid range, but the slot has been deallocated.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033004"> </a><code>expErrCardNoSectorReadWrite</code></p>
    </td>
    <td><p class="tt"><a name="1033006"> </a>The card does not support the slot driver block read/write API.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033009"> </a><code>expErrCardReadOnly</code></p>
    </td>
    <td><p class="tt"><a name="1033011"> </a>The card supports the slot driver block read/write API but the card is read only.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033014"> </a><code>expErrCardBadSector</code></p>
    </td>
    <td><p class="tt"><a name="1033016"> </a>The card supports the slot driver block read/write API but the sector is bad.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033019"> </a><code>expErrCardProtectedSector</code></p>
    </td>
    <td><p class="tt"><a name="1033021"> </a>The card supports the slot driver block read/write API but the sector is protected.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033024"> </a><code>expErrNotOpen</code></p>
    </td>
    <td><p class="tt"><a name="1033026"> </a>The slot driver library has not been opened.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033029"> </a><code>expErrStillOpen</code></p>
    </td>
    <td><p class="tt"><a name="1033031"> </a>The slot driver library is still open; it may have been opened more than once.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033034"> </a><code>expErrUnimplemented</code></p>
    </td>
    <td><p class="tt"><a name="1033036"> </a>The call is unimplemented.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033039"> </a><code>expErrEnumerationEmpty</code></p>
    </td>
    <td><p class="tt"><a name="1033041"> </a>There are no values remaining to enumerate.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1033044"> </a><code>expErrIncompatibleAPIVer</code></p>
    </td>
    <td><p class="tt"><a name="1033046"> </a>The API version of the underlying slot driver is not supported by this version of Expansion Manager.</p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1033049"> </a>Defined Media Types <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1033050"> </a>The following media types are defined by the Expansion Manager. These media types are used with the function <a href="VFSMgr.html#998384"><code>VFSVolumeInfo()</code></a> in the <code>VolumeInfoType.mediaType</code> field. The media type is also passed as a parameter to the <a href="VFSMgr.html#998087"><code>VFSRegisterDefaultDirectory()</code></a> and <a href="VFSMgr.html#998166"><code>VFSUnregisterDefaultDirectory()</code></a> functions.</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1033062"> </a><b>Constant</b></p>
    </th>
    <th><p class="tt"><a name="1033064"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1033066"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033069"> </a><code>expMediaType_Any </code></p>
    </td>
    <td><p class="tt"><a name="1033071"> </a>'wild'</p>
    </td>
    <td><p class="tt"><a name="1033073"> </a>Matches all media types when looking up a default directory</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033076"> </a><code>expMediaType_MemoryStick </code></p>
    </td>
    <td><p class="tt"><a name="1033078"> </a>'mstk'</p>
    </td>
    <td><p class="tt"><a name="1033080"> </a>Memory stick</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033083"> </a><code>expMediaType_CompactFlash</code></p>
    </td>
    <td><p class="tt"><a name="1033085"> </a>'cfsh'</p>
    </td>
    <td><p class="tt"><a name="1033087"> </a>Compact Flash</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033090"> </a><code>expMediaType_SecureDigital </code></p>
    </td>
    <td><p class="tt"><a name="1033092"> </a>'sdig'</p>
    </td>
    <td><p class="tt"><a name="1033094"> </a>Secure Digital </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033097"> </a><code>expMediaType_MultiMediaCard</code></p>
    </td>
    <td><p class="tt"><a name="1033099"> </a>'mmcd'</p>
    </td>
    <td><p class="tt"><a name="1033101"> </a>MultiMedia Card</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033104"> </a><code>expMediaType_SmartMedia </code></p>
    </td>
    <td><p class="tt"><a name="1033106"> </a>'smed'</p>
    </td>
    <td><p class="tt"><a name="1033108"> </a>SmartMedia </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033111"> </a><code>expMediaType_RAMDisk </code></p>
    </td>
    <td><p class="tt"><a name="1033113"> </a>'ramd'</p>
    </td>
    <td><p class="tt"><a name="1033115"> </a>A RAM disk based media</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033118"> </a><code>expMediaType_PoserHost </code></p>
    </td>
    <td><p class="tt"><a name="1033120"> </a>'pose'</p>
    </td>
    <td><p class="tt"><a name="1033122"> </a>Host file system emulated by the Palm OS<sup>&#174;</sup> Emulator</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1033125"> </a><code>expMediaType_MacSim </code></p>
    </td>
    <td><p class="tt"><a name="1033127"> </a>'PSim'</p>
    </td>
    <td><p class="tt"><a name="1033129"> </a>Host file system emulated by the Mac Simulator</p>
    </td>
  </tr>
</table>

</div>


<h2 class="haH2">
  <a name="1033134"> </a>Expansion Manager Functions <a href="#1032894"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1033137"> </a>ExpCardGetSerialPort Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033139"> </a>Purpose 
</h4>

<p><a name="1033140"> </a>Get a card's serial port creator ID for use in serial access.</p>
<h4>
  <a name="1033141"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033142"> </a></code><h4>
  <a name="1033143"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033144"></a>Err ExpCardGetSerialPort(
   UInt16 slotRefNum,
   UInt32 *portP
)
</pre>
<h4>
  <a name="1033145"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033146"> </a><code>&rarr;  <i><code>slotRefNum</code></i></code></dt>
<dd><a name="1033147"> </a>Slot number of slot to check.</dd>

<dt><a name="1033148"> </a><code>&larr;  <i><code>portP</code></i></code></dt>
<dd><a name="1033149"> </a>Pointer to <code>UInt32</code> into which the serial port creator ID is stored.</dd>

</dl>
<h4>
  <a name="1033150"> </a>Returns 
</h4>

<p><a name="1033151"> </a>Returns the following result codes:</p>

<dl>
<dt><a name="1033152"> </a><code><code>errNone</code> </code></dt>
<dd><a name="1033153"> </a>No error</dd>

<dt><a name="1033154"> </a><code><code>expErrInvalidSlotRefNum</code></code></dt>
<dd><a name="1033155"> </a>The specified slot number is invalid.</dd>

<dt><a name="1033156"> </a><code><code>expErrSlotDeallocated</code></code></dt>
<dd><a name="1033157"> </a>The specified slot number is within the valid range but has been deallocated.</dd>

</dl>


<h4>
  <a name="1033159"> </a>Compatibility 
</h4>

<p><a name="1033163"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present this function is unimplemented.</p>
<h4>
  <a name="1033164"> </a>See Also 
</h4>

<p><a name="1033168"> </a><a href="ExpansionManager.html#1033171"><code>ExpCardInfo()</code></a></p>

<h3 class="hbH3">
  <a name="1033171"> </a>ExpCardInfo Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033173"> </a>Purpose 
</h4>

<p><a name="1033174"> </a>Obtains information about a card in a given slot.</p>
<h4>
  <a name="1033175"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033176"> </a></code><h4>
  <a name="1033177"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033178"></a>Err ExpCardInfo(
   UInt16 slotRefNum,
   ExpCardInfoType *infoP
)
</pre>
<h4>
  <a name="1033179"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033180"> </a><code>&rarr;  <i><code>slotRefNum</code></i></code></dt>
<dd><a name="1033181"> </a>Slot number.</dd>

<dt><a name="1033182"> </a><code>&larr;  <i><code>infoP</code></i></code></dt>
<dd><a name="1033186"> </a>Pointer to <a href="ExpansionManager.html#1032924"><code>ExpCardInfoType</code></a> structure. </dd>

</dl>
<h4>
  <a name="1033187"> </a>Returns 
</h4>

<p><a name="1033188"> </a>Returns one of the following result codes:</p>



















<dl>
<dt><a name="1033198"> </a><code><code>errNone</code> </code></dt>
<dd><a name="1033199"> </a>No error</dd>

<dt><a name="1033200"> </a><code><code>expErrCardNotPresent</code></code></dt>
<dd><a name="1033201"> </a>There is no card present in the specified slot.</dd>

<dt><a name="1033202"> </a><code><code>expErrInvalidSlotRefNum</code></code></dt>
<dd><a name="1033203"> </a>The slot number is invalid.</dd>

<dt><a name="1033204"> </a><code><code>expErrSlotDeallocated</code></code></dt>
<dd><a name="1033205"> </a>The slot number is within the valid range but has been deallocated.</dd>

</dl>
<h4>
  <a name="1033206"> </a>Comments 
</h4>

<p><a name="1033207"> </a>This function returns information about a card, including whether the card supports secondary storage or is strictly read-only, by filling in the <code>ExpCardInfoType</code> structure's fields.</p>
<h4>
  <a name="1033208"> </a>Compatibility 
</h4>

<p><a name="1033212"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present.</p>
<h4>
  <a name="1033213"> </a>See Also 
</h4>

<p><a name="1033220"> </a><a href="ExpansionManager.html#1033137"><code>ExpCardGetSerialPort()</code></a>, <a href="ExpansionManager.html#1033226"><code>ExpCardPresent()</code></a>, <a href="ExpansionManager.html#1033336"><code>ExpSlotEnumerate()</code></a></p>

<h3 class="hbH3">
  <a name="1033226"> </a>ExpCardPresent Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033228"> </a>Purpose 
</h4>

<p><a name="1033229"> </a>Determines if a card is present in the given slot. </p>
<h4>
  <a name="1033230"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033231"> </a></code><h4>
  <a name="1033232"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033233"></a>Err ExpCardPresent(
   UInt16 slotRefNum
)
</pre>
<h4>
  <a name="1033234"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033235"> </a><code>&rarr;  <i><code>slotRefNum</code></i></code></dt>
<dd><a name="1033236"> </a>Slot number.</dd>

</dl>
<h4>
  <a name="1033237"> </a>Returns 
</h4>

<p><a name="1033238"> </a>Returns the following result codes:</p>



<dl>
<dt><a name="1033240"> </a><code><code>errNone</code> </code></dt>
<dd><a name="1033241"> </a>A card is present in the specified slot.</dd>

<dt><a name="1033242"> </a><code><code>expErrCardNotPresent</code></code></dt>
<dd><a name="1033243"> </a>There is no card present in the specified slot.</dd>

<dt><a name="1033244"> </a><code><code>expErrInvalidSlotRefNum</code></code></dt>
<dd><a name="1033245"> </a>The specified slot number is not valid.</dd>

<dt><a name="1033246"> </a><code><code>expErrSlotDeallocated</code></code></dt>
<dd><a name="1033247"> </a>The specified slot number is within the valid range but has been deallocated.</dd>

</dl>


<h4>
  <a name="1033249"> </a>Comments 
</h4>

<p><a name="1033250"> </a>The Expansion Manager passes the call through to the appropriate slot driver.</p>
<h4>
  <a name="1033251"> </a>Compatibility 
</h4>

<p><a name="1033255"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present.</p>
<h4>
  <a name="1033256"> </a>See Also 
</h4>

<p><a name="1033263"> </a><a href="ExpansionManager.html#1033171"><code>ExpCardInfo()</code></a>, <a href="ExpansionManager.html#1033336"><code>ExpSlotEnumerate()</code></a></p>

<h3 class="hbH3">
  <a name="1033266"> </a>ExpSlotDriverInstall Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033268"> </a>Purpose 
</h4>

<p><a name="1033269"> </a>Installs and initializes a slot driver shared library into the system table.</p>
<h4>
  <a name="1033270"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033271"> </a></code><h4>
  <a name="1033272"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033273"></a>Err ExpSlotDriverInstall (
   UInt32 dbCreator,
   UInt16 *slotLibRefNumP
)
</pre>
<h4>
  <a name="1033274"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033275"> </a><code>&rarr;  <i><code>dbCreator</code></i></code></dt>
<dd><a name="1033276"> </a>Database creator code of the slot driver library to be installed.</dd>

<dt><a name="1033277"> </a><code>&rarr;  <i><code>slotLibRefNumP</code></i></code></dt>
<dd><a name="1033279"> </a>Pointer to variable for returning the library reference number (on failure, <code>sysInvalidRefNum</code> is returned in this variable).</dd>

</dl>
<h4>
  <a name="1033280"> </a>Returns 
</h4>

<p><a name="1033281"> </a>Returns <code>errNone</code> if the slot driver is installed correctly. Because this function uses <a href="SystemManager.html#1076694"><code>SysLibInstall()</code></a> to install the slot driver shared library, <code>ExpSlotDriverInstall</code> may return any of the error codes that <code>SysLibInstall</code> returns, including <code>sysErrLibNotFound</code>, <code>sysErrNoFreeRAM</code>, and <code>sysErrNoFreeLibSlots</code>. It may also return any error code returned by <code>SlotOpen</code>, the implementation of which is specific to a given device manufacturer.</p>
<h4>
  <a name="1033286"> </a>Comments 
</h4>

<p><a name="1033287"> </a>This function is not typically called by applications but can be used to load additional slot drivers after the device has booted. It is called internally by the Expansion Manager to install a slot driver shared library into the library table and initialize it for use. Once installed, the <code>slotLibRefNum</code> can be used by other functions to refer to the library. </p>
<h4>
  <a name="1033288"> </a>Compatibility 
</h4>

<p><a name="1033292"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present this function is unimplemented.</p>
<h4>
  <a name="1033293"> </a>See Also 
</h4>

<p><a name="1033300"> </a><a href="ExpansionManager.html#1033303"><code>ExpSlotDriverRemove()</code></a>, <a href="ExpansionManager.html#1033391"><code>ExpSlotLibFind()</code></a></p>

<h3 class="hbH3">
  <a name="1033303"> </a>ExpSlotDriverRemove Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033305"> </a>Purpose 
</h4>

<p><a name="1033306"> </a>Closes and remove a slot driver shared library from the system table.</p>
<h4>
  <a name="1033307"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033308"> </a></code><h4>
  <a name="1033309"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033310"></a>Err ExpSlotDriverRemove (
   UInt16 slotLibRefNum
)
</pre>
<h4>
  <a name="1033311"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033312"> </a><code>&rarr;  <i><code>slotLibRefNum</code></i></code></dt>
<dd><a name="1033313"> </a>Slot driver shared library reference number.</dd>

</dl>
<h4>
  <a name="1033314"> </a>Returns 
</h4>

<p><a name="1033315"> </a>Returns <code>errNone</code>.</p>
<h4>
  <a name="1033316"> </a>Comments 
</h4>

<p><a name="1033317"> </a>This function is not typically called by applications but can be used to unload slot drivers associated with external slots. It is called internally by the Expansion Manager to remove the shared library from the system table, and, if appropriate, release the slot allocated to the given <code>slotLibRefNum</code>. Prior to removing the slot driver, it unmounts any volumes associated with the slot.</p>
<h4>
  <a name="1033318"> </a>Compatibility 
</h4>

<p><a name="1033322"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present this function is unimplemented.</p>
<h4>
  <a name="1033323"> </a>See Also 
</h4>

<p><a name="1033330"> </a><a href="ExpansionManager.html#1033266"><code>ExpSlotDriverInstall()</code></a>, <a href="ExpansionManager.html#1033391"><code>ExpSlotLibFind()</code></a>, <a href="SystemManager.html#1076754"><code>SysLibRemove()</code></a></p>

<h3 class="hbH3">
  <a name="1033336"> </a>ExpSlotEnumerate Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033338"> </a>Purpose 
</h4>

<p><a name="1033339"> </a>Iterates through valid slot numbers.</p>
<h4>
  <a name="1033340"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033341"> </a></code><h4>
  <a name="1033342"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033343"></a>Err ExpSlotEnumerate(
   UInt16 *slotRefNumP,
   UInt32 *slotIteratorP
)
</pre>
<h4>
  <a name="1033344"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033345"> </a><code>&larr;  <i><code>slotRefNumP</code></i></code></dt>
<dd><a name="1033346"> </a>Reference number of the currently-enumerated slot.</dd>

<dt><a name="1033347"> </a><code>&rarr;  <i><code>slotIteratorP</code></i></code></dt>
<dd><a name="1033348"> </a>Pointer to the index of the last entry enumerated. For the first iteration, initialize this parameter to the constant <code>expIteratorStart</code>. Upon return this references the next entry in the directory. If this is the last entry, this parameter is set to <code>expIteratorStop</code>.</dd>

</dl>
<h4>
  <a name="1033349"> </a>Returns 
</h4>

<p><a name="1033350"> </a>Returns one of the following result codes:</p>

<dl>
<dt><a name="1033351"> </a><code><code>errNone</code> </code></dt>
<dd><a name="1033352"> </a>The slot reference number indicated by <code>slotRefNumP</code> is valid.</dd>

<dt><a name="1033353"> </a><code><code>expErrEnumerationEmpty</code></code></dt>
<dd><a name="1033354"> </a>There are no slots left to enumerate. <code>slotRefNumP</code> is set to the slot number of the currently enumerated slot or <code>invalidSlotRefNum</code> if there are no slots.</dd>

</dl>


<h4>
  <a name="1033356"> </a>Comments 
</h4>

<p><a name="1033357"> </a>This function iterates through the device's slots. The first time this function is called, set <code>*slotIteratorP</code> to <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">expIteratorStart</span> to find the initial slot. Once set this value is changed with each subsequent call to this function until it reaches the maximum number of slots, at which point <code>ExpSlotEnumerate</code> sets <code>*slotIteratorP</code> to <code>expIteratorStop</code>.</p>
<h4>
  <a name="1033358"> </a>Example 
</h4>

<p><a name="1033359"> </a>The following is an example of how <code>ExpSlotEnumerate</code> should be used:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
<code>UInt16 slotRefNum;</code><a name="1033360"> </a>
<code>UInt32 slotIterator = expIteratorStart;</code><a name="1033361"> </a>
<code>while (slotIterator != expIteratorStop) {</code><a name="1033362"> </a>
<code>   if ((err = ExpSlotEnumerate(&amp;slotRefNum,</code><a name="1033363"> </a>
<code>            &amp;slotIterator)) == errNone) {</code><a name="1033364"> </a>
<code>      // do something with the slotRefNum</code><a name="1033365"> </a>
<code>   else {</code><a name="1033366"> </a>
<code>      // handle error (by breaking out of the</code><a name="1033367"> </a>
<code>      // loop, most likely</code><a name="1033368"> </a>
<code>   }</code><a name="1033369"> </a>
<code>}</code><a name="1033370"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1033371"> </a>Compatibility 
</h4>

<p><a name="1033375"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present.</p>
<h4>
  <a name="1033376"> </a>See Also 
</h4>

<p><a name="1033385"> </a><a href="ExpansionManager.html#1033171"><code>ExpCardInfo()</code></a>, <a href="ExpansionManager.html#1033226"><code>ExpCardPresent()</code></a>, <a href="ExpansionManager.html#1033303"><code>ExpSlotDriverRemove()</code></a></p>

<h3 class="hbH3">
  <a name="1033391"> </a>ExpSlotLibFind Function <a href="#1032894"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033393"> </a>Purpose 
</h4>

<p><a name="1033394"> </a>Retrieves the slot driver library reference number for the driver that controls the specified slot.</p>
<h4>
  <a name="1033395"> </a>Declared In 
</h4>
<code>ExpansionMgr.h<a name="1033396"> </a></code><h4>
  <a name="1033397"> </a>Prototype 
</h4>
<pre class="proto"><a name="1033398"></a>Err ExpSlotLibFind(
   UInt16 slotRefNum,
   UInt16 *slotLibRefNum
)
</pre>
<h4>
  <a name="1033399"> </a>Parameters 
</h4>

<dl>
<dt><a name="1033400"> </a><code>&rarr;  <i><code>slotRefNum</code></i></code></dt>
<dd><a name="1033401"> </a>Slot number.</dd>

<dt><a name="1033402"> </a><code>&larr;  <i><code>slotLibRefNum</code></i></code></dt>
<dd><a name="1033403"> </a>Pointer to the reference number for the slot driver library allocated to the given slot. </dd>

</dl>
<h4>
  <a name="1033404"> </a>Returns 
</h4>

<p><a name="1033405"> </a>Returns the following result codes:</p>

<dl>
<dt><a name="1033406"> </a><code><code>errNone</code> </code></dt>
<dd><a name="1033407"> </a>No error.</dd>

<dt><a name="1033408"> </a><code><code>expErrInvalidSlotRefNum</code></code></dt>
<dd><a name="1033409"> </a>The slot number is invalid.</dd>

<dt><a name="1033410"> </a><code><code>expErrSlotDeallocated</code></code></dt>
<dd><a name="1033411"> </a>The slot number is within the valid range but has been deallocated.</dd>

</dl>


<h4>
  <a name="1033413"> </a>Comments 
</h4>

<p><a name="1033414"> </a>This function returns the reference number to the slot driver library loaded for the given <code>slotRefNum</code>. This function is used when making calls directly to the slot driver library.</p>
<h4>
  <a name="1033415"> </a>Compatibility 
</h4>

<p><a name="1033419"> </a>Implemented only if the <a href="CompatibilityApdx.html#996265">Expansion Manager Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present this function is unimplemented.</p>
<h4>
  <a name="1033420"> </a>See Also 
</h4>

<p><a name="1033427"> </a><a href="ExpansionManager.html#1033266"><code>ExpSlotDriverInstall()</code></a>, <a href="ExpansionManager.html#1033303"><code>ExpSlotDriverRemove()</code></a></p>

<p><a name="1033428"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ErrorManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="FeatureManager.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>