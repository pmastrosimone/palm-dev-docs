<html>
<head>
<title>(68K) Notification Manager | Palm OS&#174; Programmer's  API Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:46:28">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1024252"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MemoryManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="OverlayMgr.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">43 &nbsp;&nbsp;
Notification Manager</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's  API Reference</p>
<p class="SubTitle">Palm OS&#174; 68K SDK </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="PartII.html">Part II: System Management</a> </h1>
<h1 class="SideTOC1"><a href="NotifyMgr.html">43  Notification Manager</a></h1>

   <h2 class="SideTOC2"><a href="#1024293">
   Notification Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1024294">
      Miscellaneous Constants</a></h3>

   <h2 class="SideTOC2"><a href="#1024344">
   Notification Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1024347">
      SysNotifyBroadcast</a></h3>

      <h3 class="SideTOC3"><a href="#1024391">
      SysNotifyBroadcastDeferred</a></h3>

      <h3 class="SideTOC3"><a href="#1024434">
      SysNotifyBroadcastFromInterrupt</a></h3>

      <h3 class="SideTOC3"><a href="#1024486">
      SysNotifyRegister</a></h3>

      <h3 class="SideTOC3"><a href="#1024570">
      SysNotifyUnregister</a></h3>

   <h2 class="SideTOC2"><a href="#1024608">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1024611">
      SysNotifyProcPtr</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1024265"> </a>This chapter describes the Notification Manager API as declared in the header file <code>NotifyMgr.h</code>. It discusses the following topics:</p>
<ul type="disc">
  <li><a name="1024270"> </a><a href="NotifyMgr.html#1024293">Notification Constants</a>
  <li><a name="1024274"> </a><a href="NotifyMgr.html#1024344">Notification Functions</a>
  <li><a name="1024278"> </a><a href="NotifyMgr.html#1024608">Application-Defined Functions</a>
</ul>

<p><a name="1024282"> </a>The chapter <a href="Notifications.html#1046866">"Notifications"</a> in this book lists the possible notifications and describes the data sent with each. Also see the section <a href="../PalmOSCompanion/AppStartupAndStop.html#997938">"Notifications"</a> in the <a href="../PalmOSCompanion/AppStartupAndStop.html#997517">"Application Startup and Stop"</a> chapter of the <i>Palm OS Programmer's Companion</i>, vol. I for a description of how to use notifications. </p>

<h2 class="haH2">
  <a name="1024293"> </a>Notification Constants <a href="#1024252"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1024294"> </a>Miscellaneous Constants <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1024295"> </a>This following miscellaneous constants are used in the Notification Manager. For other notification constants, see the <a href="Notifications.html#1046866">"Notifications"</a> chapter in this book. </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1024301"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Constant</span></b></p>
    </th>
    <th><p class="tt"><a name="1024303"> </a><b>Value</b></p>
    </th>
    <th><p class="tt"><a name="1024305"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1024308"> </a><code>sysNotifyBroadcasterCode</code> </p>
    </td>
    <td><p class="tt"><a name="1024310"> </a><code>'psys'</code></p>
    </td>
    <td><p class="tt"><a name="1024312"> </a>The value passed as the creator ID of the broadcaster for notifications broadcast by the system. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1024315"> </a><code>sysNotifyDefaultQueueSize</code> </p>
    </td>
    <td><p class="tt"><a name="1024317"> </a>30</p>
    </td>
    <td><p class="tt"><a name="1024319"> </a>The maximum number of nested broadcasts allowed.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1024322"> </a><code>sysNotifyNoDatabaseID</code> </p>
    </td>
    <td><p class="tt"><a name="1024324"> </a>0xFFFFFFFF</p>
    </td>
    <td><p class="tt"><a name="1024326"> </a>The database local ID used by the system when it registers for notifications. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1024329"> </a><code>sysNotifyNormalPriority</code> </p>
    </td>
    <td><p class="tt"><a name="1024331"> </a>0</p>
    </td>
    <td><p class="tt"><a name="1024333"> </a>Typical priority value used when registering for notifications. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1024336"> </a><code>sysNotifyVersionNum</code> </p>
    </td>
    <td><p class="tt"><a name="1024338"> </a>1</p>
    </td>
    <td><p class="tt"><a name="1024340"> </a>Current Notification Manager version. This number is stored in the system feature <code>sysFtrNumNotifyMgrVersion</code>. </p>
    </td>
  </tr>
</table>

</div>


<h2 class="haH2">
  <a name="1024344"> </a>Notification Functions <a href="#1024252"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1024347"> </a>SysNotifyBroadcast Function <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024349"> </a>Purpose 
</h4>

<p><a name="1024350"> </a>Synchronously send a notification to all applications registered for it. </p>
<h4>
  <a name="1024351"> </a>Declared In 
</h4>
<code>NotifyMgr.h<a name="1024352"> </a></code><h4>
  <a name="1024353"> </a>Prototype 
</h4>
<pre class="proto"><a name="1024354"></a>Err SysNotifyBroadcast(
   SysNotifyParamType *notify
)
</pre>
<h4>
  <a name="1024355"> </a>Parameters 
</h4>

<dl>
<dt><a name="1024356"> </a><code>&harr;  <i><code>notify</code></i></code></dt>
<dd><a name="1024357"> </a>Identifies the notification to be broadcast. See <a href="Notifications.html#1047220"><code>SysNotifyParamType</code></a>. </dd>

</dl>
<h4>
  <a name="1024361"> </a>Returns 
</h4>

<p><a name="1024362"> </a>Returns one of the following error codes:</p>

<dl>
<dt><a name="1024363"> </a><code><code>errNone</code></code></dt>
<dd><a name="1024364"> </a>No error.</dd>

<dt><a name="1024366"> </a><code><code>sysNotifyErrBroadcastBusy</code></code></dt>
<dd><a name="1024367"> </a>The broadcast stack limit has already been reached. </dd>

<dt><a name="1024368"> </a><code><code>sysErrParamErr</code></code></dt>
<dd><a name="1024369"> </a>The background thread is broadcasting the notification and the <code>notify</code> parameter is <code>NULL</code>.</dd>

<dt><a name="1024371"> </a><code><code>sysNotifyErrNoStackSpace</code></code></dt>
<dd><a name="1024372"> </a>There is not enough space on the stack for the notification.</dd>

</dl>
<h4>
  <a name="1024373"> </a>Comments 
</h4>

<p><a name="1024374"> </a>When you call this function, the notification you specify is broadcast to all applications, shared libraries, and other code resources that have registered to receive that notification. The broadcast is performed synchronously, meaning that the system broadcasts the notification immediately and waits for each notification client to perform its notification handler and return before the <code>SysNotifyBroadcast</code> call returns. This notification occurs in priority order.</p>

<p><a name="1024375"> </a>The system allows nested notifications; that is, the recipient of a notification might broadcast a new notification, whose recipient might broadcast another new notification and so on. The constant <code>sysNotifyDefaultQueueSize</code> specifies how many levels of nested notification are allowed. If you reach this limit, the error <code>sysNotifyErrBroadcastBusy</code> is returned and your notification is not broadcast. To avoid reaching the limit, use <a href="NotifyMgr.html#1024391"><code>SysNotifyBroadcastDeferred()</code></a> instead of <a href="NotifyMgr.html#1024347"><code>SysNotifyBroadcast()</code></a> in your notification handlers. This ensures that the notification will not be broadcast until the top of the event loop. </p>

<div><hr>
  <a name="1024383"> </a> <span class="warning">WARNING! </span> Do not call <code>SysNotifyBroadcast</code> from code that might be called from a background task (such as a trap patch) with the memory semaphore reserved. Use <code>SysNotifyBroadcastDeferred</code> instead. 
<hr>
</div>
<h4>
  <a name="1024384"> </a>Compatibility 
</h4>

<p><a name="1024388"> </a>Implemented only if <a href="CompatibilityApdx.html#995220">Notification Feature Set</a> is present. </p>

<h3 class="hbH3">
  <a name="1024391"> </a>SysNotifyBroadcastDeferred Function <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024393"> </a>Purpose 
</h4>

<p><a name="1024394"> </a>Enqueue a notification for later broadcast.</p>
<h4>
  <a name="1024395"> </a>Declared In 
</h4>
<code>NotifyMgr.h<a name="1024396"> </a></code><h4>
  <a name="1024397"> </a>Prototype 
</h4>
<pre class="proto"><a name="1024398"></a>Err SysNotifyBroadcastDeferred(
   SysNotifyParamType *notify,
   Int16 paramSize
)
</pre>
<h4>
  <a name="1024399"> </a>Parameters 
</h4>

<dl>
<dt><a name="1024400"> </a><code>&harr;  <i><code>notify</code></i></code></dt>
<dd><a name="1024404"> </a>The notification to enqueue. See <a href="Notifications.html#1047220"><code>SysNotifyParamType</code></a>.</dd>

<dt><a name="1024405"> </a><code>&rarr;  <i><code>paramSize</code></i></code></dt>
<dd><a name="1024406"> </a>Size of the data pointed to by the field <br><code>notify-&gt;notifyDetailsP</code>. </dd>

</dl>
<h4>
  <a name="1024407"> </a>Returns 
</h4>

<p><a name="1024408"> </a>Returns one of the following error codes:</p>

<dl>
<dt><a name="1024409"> </a><code><code>errNone</code></code></dt>
<dd><a name="1024410"> </a>No error.</dd>

<dt><a name="1024411"> </a><code><code>memErrNotEnoughSpace</code></code></dt>
<dd><a name="1024412"> </a>There is not enough memory to allocate a new notification entry in the queue. </dd>

<dt><a name="1024413"> </a><code><code>sysErrParamErr</code></code></dt>
<dd><a name="1024414"> </a><code>paramSize</code> is a negative number. </dd>

<dt><a name="1024416"> </a><code><code>sysNotifyErrQueueFull</code></code></dt>
<dd><a name="1024417"> </a>The queue has reached its maximum number of entries. </dd>

</dl>
<h4>
  <a name="1024418"> </a>Comments 
</h4>

<p><a name="1024422"> </a>This function is similar to <a href="NotifyMgr.html#1024347"><code>SysNotifyBroadcast()</code></a> except that the broadcast does not take place until the top of the event loop (specifically, the next time <a href="SystemEventManager.html#1071061"><code>EvtGetEvent()</code></a> is called). The system copies the <code>notify</code> structure to a new memory chunk, which is disposed of upon completion of the broadcast. (The <code>paramSize</code> value is used when copying the <code>notifyDetailsP</code> portion of the <code>notify</code> structure.) </p>
<h4>
  <a name="1024427"> </a>Compatibility 
</h4>

<p><a name="1024431"> </a>Implemented only if <a href="CompatibilityApdx.html#995220">Notification Feature Set</a> is present. </p>

<h3 class="hbH3">
  <a name="1024434"> </a>SysNotifyBroadcastFromInterrupt Function <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024436"> </a>Purpose 
</h4>

<p><a name="1024437"> </a>Allows interrupt handlers to enqueue a notification for later broadcast.</p>
<h4>
  <a name="1024438"> </a>Declared In 
</h4>
<code>NotifyMgr.h<a name="1024439"> </a></code><h4>
  <a name="1024440"> </a>Prototype 
</h4>
<pre class="proto"><a name="1024441"></a>Err SysNotifyBroadcastFromInterrupt(
   UInt32 notifyType,
   UInt32 broadcaster,
   void *notifyDetailsP
)
</pre>
<h4>
  <a name="1024442"> </a>Parameters 
</h4>

<dl>
<dt><a name="1024443"> </a><code>&rarr;  <i><code>notifyType</code></i></code></dt>
<dd><a name="1024447"> </a>The type of event that occurred. See the chapter <a href="Notifications.html#1046866">Notifications</a> for a complete list of the notifications that Palm OS<sup>&#174;</sup> broadcasts.</dd>

<dt><a name="1024448"> </a><code>&rarr;  <i><code>broadcaster</code></i></code></dt>
<dd><a name="1024449"> </a>The creator ID of the device or application that broadcast the notification. </dd>

<dt><a name="1024450"> </a><code>&rarr;  <i><code>notifyDetailsP</code></i></code></dt>
<dd><a name="1024451"> </a>Pointer to data specific to this notification. See the <a href="Notifications.html#1046866">Notifications</a> chapter for the specific instances where this parameter is used.</dd>

</dl>
<h4>
  <a name="1024455"> </a>Returns 
</h4>

<p><a name="1024456"> </a>Returns one of the following error codes:</p>

<dl>
<dt><a name="1024457"> </a><code><code>errNone</code></code></dt>
<dd><a name="1024458"> </a>No error.</dd>

<dt><a name="1024460"> </a><code><code>sysNotifyErrQueueFull</code></code></dt>
<dd><a name="1024461"> </a>The queue has reached its maximum number of entries. </dd>

</dl>
<h4>
  <a name="1024462"> </a>Comments 
</h4>

<p><a name="1024466"> </a>Like <a href="NotifyMgr.html#1024391"><code>SysNotifyBroadcastDeferred()</code></a>, this function enqueues a notification to be broadcast at the top of the event loop (specifically, the next time <a href="SystemEventManager.html#1071061"><code>EvtGetEvent()</code></a> is called). It differs from <code>SysNotifyBroadcastDeferred</code> in that it is interrupt-safe and intended to be called from interrupt handlers. </p>

<p><a name="1024471"> </a>This function is intended to be used by device drivers and other low-level software to generate a notification about a hardware change. For example, the Expansion Manager uses <code>SysNotifyBroadcastFromInterrupt</code> to broadcast <a href="Notifications.html#1047417"><code>sysNotifyCardInsertedEvent</code></a> and <a href="Notifications.html#1047438"><code>sysNotifyCardRemovedEvent</code></a> when a card is inserted into or removed from the expansion slot. <code>SysNotifyBroadcastFromInterrupt</code> is not intended to be used by general third party applications. Patching <code>SysNotifyBroadcastFromInterrupt</code> will cause the system to hang. </p>
<h4>
  <a name="1024478"> </a>Compatibility 
</h4>

<p><a name="1031317"> </a>Implemented only if <a href="CompatibilityApdx.html#995256">4.0 New Feature Set</a> is present. If <a href="CompatibilityApdx.html#1029305">Palm OS Cobalt Feature Set</a> is present this function is unimplemented.</p>

<div><hr>
  <a name="1024483"> </a> <span class="warning">WARNING! </span> Using this function on Palm OS Garnet may cause a system crash. 
<hr>
</div>

<h3 class="hbH3">
  <a name="1024486"> </a>SysNotifyRegister Function <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024488"> </a>Purpose 
</h4>

<p><a name="1024489"> </a>Register to receive a notification. </p>
<h4>
  <a name="1024490"> </a>Declared In 
</h4>
<code>NotifyMgr.h<a name="1024491"> </a></code><h4>
  <a name="1024492"> </a>Prototype 
</h4>
<pre class="proto"><a name="1024493"></a>Err SysNotifyRegister (
   UInt16 cardNo,
   LocalID dbID,
   UInt32 notifyType,
   SysNotifyProcPtr callbackP,
   Int8 priority,
   void *userDataP
)
</pre>
<h4>
  <a name="1024494"> </a>Parameters 
</h4>

<dl>
<dt><a name="1024495"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1024496"> </a>Number of the storage card on which the application or code resource resides.</dd>

<dt><a name="1024497"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1024498"> </a>Local ID of the application or code resource.</dd>

<dt><a name="1024499"> </a><code>&rarr;  <i><code>notifyType</code></i></code></dt>
<dd><a name="1024500"> </a>The notification that the application wants to receive. See the chapter <a href="Notifications.html#1046866">Notifications</a>.</dd>

<dt><a name="1024504"> </a><code>&rarr;  <i><code>callbackP</code></i></code></dt>
<dd><a name="1024505"> </a>Set to <code>NULL</code> to receive the notification as an application launch code. If your code does not have a <a href="SystemManager.html#1077030"><code>PilotMain()</code></a> function (for example, if it is a shared library), pass a pointer to a function that should be called when the notification is broadcast. See <a href="NotifyMgr.html#1024611"><code>SysNotifyProcPtr()</code></a>. </dd>

<dt><a name="1024513"> </a><code>&rarr;  <i><code>priority</code></i></code></dt>
<dd><a name="1024514"> </a>The priority with which the application should receive the event. Most applications and other code resources should always use <code>sysNotifyNormalPriority</code>. In rare circumstances, you may need to ensure that your code is notified toward the beginning or toward the end of the notification sequence. If so, be sure to leave some space so that your code won't collide with the system's handling of notifications or with another application's handling of notifications. In general, Palm<sup>&#8482;</sup> recommends using a value whose least significant bits are 0 (such as 32, 64, 96, and so on). The smaller the priority, the earlier your code is notified. </dd>

<dt><a name="1024516"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1024517"> </a>Caller-defined data to pass to the notification handler. </dd>

</dl>
<h4>
  <a name="1024518"> </a>Returns 
</h4>

<p><a name="1024519"> </a>Returns one of the following error codes:</p>

<dl>
<dt><a name="1024520"> </a><code><code>errNone</code></code></dt>
<dd><a name="1024521"> </a>No error.</dd>

<dt><a name="1024522"> </a><code><code>sysErrParamErr</code></code></dt>
<dd><a name="1024523"> </a>The database ID is <code>NULL</code>.</dd>

<dt><a name="1024525"> </a><code><code>sysNotifyErrDuplicateEntry</code></code></dt>
<dd><a name="1024526"> </a>This application is already registered to receive this notification. </dd>

</dl>
<h4>
  <a name="1024527"> </a>Comments 
</h4>

<p><a name="1024528"> </a>Call this function when your code should receive a notification that a specific event has occurred or is about to occur. See the <a href="Notifications.html#1046866">Notifications</a> chapter for a list of the possible notifications. Once you register for a notification, you remain registered to receive it until a system reset occurs or until you explicitly unregister using <a href="NotifyMgr.html#1024570"><code>SysNotifyUnregister()</code></a>.</p>

<p><a name="1024535"> </a>If you're writing an application, you should pass <code>NULL</code> as the <code>callbackP</code> parameter. In this case, the system notifies your application by sending it the <a href="AppLaunchCodes.html#1012303"><code>sysAppLaunchCmdNotify</code></a> launch code. This launch code's parameter block points to a <a href="Notifications.html#1047220"><code>SysNotifyParamType</code></a> structure containing details about the notification. </p>

<p><a name="1024544"> </a>If your code is not in an application, for example, it is a shared library or a separately loaded code resource, then receiving a launch code is not possible. In this case, pass a pointer to a callback function in <code>callbackP</code>. This callback should follow the prototype shown in <a href="NotifyMgr.html#1024611"><code>SysNotifyProcPtr()</code></a>. Note that you should always supply a card number and database ID to <code>SysNotifyRegister</code>, even if you specify a callback function. </p>

<div><hr>
  <a name="1024549"> </a> <b>IMPORTANT: </b> Because the <code>callbackP</code> pointer is used to directly call the function, the pointer must remain valid from the time <code>SysNotifyRegister</code> is called to the time the notification is broadcast. If the function is in a shared library, you must keep the library open. If the function is in a separately loaded code resource, the resource must remain locked while registered for the notification. When you close a library or unlock a resource, you must first unregister for any notifications. If you don't, the system will crash when the notification is broadcast. 
<hr>
</div>

<p><a name="1024550"> </a>Whether the notification handler is responding to <code>sysAppLaunchCmdNotify</code> or uses the callback function, the notification handler may perform any processing necessary. As with most launch codes, it's not possible to access global variables. If the handler needs access to any particular value to respond to the notification, pass a pointer to that value in the <code>userDataP</code> parameter. The system passes this pointer back to your application or callback function in the launch code's parameter block. </p>

<p><a name="1024551"> </a>The notification handler may unregister for this notification or register for other notifications. It may also broadcast another notifications; however, it's recommended that you use <a href="NotifyMgr.html#1024391"><code>SysNotifyBroadcastDeferred()</code></a> to do this so as not to overflow the broadcast stack. </p>

<p><a name="1024555"> </a>You may display a user interface in your notification handler; however, you should be careful when you do so. Many of the notifications are broadcast during <a href="SystemManager.html#1076542"><code>SysHandleEvent()</code></a>, which means your application event loop might not have progressed to the point where it is possible for you to display a user interface, or you might overflow the stack by displaying a user interface at this stage. See the <a href="Notifications.html#1046866">"Notifications"</a> chapter to learn which notifications are broadcast during <code>SysHandleEvent</code>. </p>
<h4>
  <a name="1024563"> </a>Compatibility 
</h4>

<p><a name="1024567"> </a>Implemented only if <a href="CompatibilityApdx.html#995220">Notification Feature Set</a> is present. </p>

<h3 class="hbH3">
  <a name="1024570"> </a>SysNotifyUnregister Function <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024572"> </a>Purpose 
</h4>

<p><a name="1024573"> </a>Cancel notification of the given event.</p>
<h4>
  <a name="1024574"> </a>Declared In 
</h4>
<code>NotifyMgr.h<a name="1024575"> </a></code><h4>
  <a name="1024576"> </a>Prototype 
</h4>
<pre class="proto"><a name="1024577"></a>Err SysNotifyUnregister(
   UInt16 cardNo,
   LocalID dbID,
   UInt32 notifyType,
   Int8 priority
)
</pre>
<h4>
  <a name="1024578"> </a>Parameters 
</h4>

<dl>
<dt><a name="1024579"> </a><code>&rarr;  <i><code>cardNo</code></i></code></dt>
<dd><a name="1024580"> </a>Number of the storage card on which the application or code resource resides.</dd>

<dt><a name="1024581"> </a><code>&rarr;  <i><code>dbID</code></i></code></dt>
<dd><a name="1024582"> </a>Local ID of the application or code resource.</dd>

<dt><a name="1024583"> </a><code>&rarr;  <i><code>notifyType</code></i></code></dt>
<dd><a name="1024587"> </a>The notification for which to unregister. See <a href="Notifications.html#1046866">Notifications</a>.</dd>

<dt><a name="1024588"> </a><code>&rarr;  <i><code>priority</code></i></code></dt>
<dd><a name="1024589"> </a>The priority value you passed as part of <a href="NotifyMgr.html#1024486"><code>SysNotifyRegister()</code></a>.</dd>

</dl>
<h4>
  <a name="1024593"> </a>Returns 
</h4>

<p><a name="1024594"> </a>Returns one of the following error codes:</p>

<dl>
<dt><a name="1024595"> </a><code><code>errNone</code></code></dt>
<dd><a name="1024596"> </a>No error.</dd>

<dt><a name="1024598"> </a><code><code>sysNotifyErrEntryNotFound</code></code></dt>
<dd><a name="1024599"> </a>The application wasn't registered to receive this notification.</dd>

</dl>
<h4>
  <a name="1024600"> </a>Comments 
</h4>

<p><a name="1024601"> </a>Use this function to remove your code from the list of those that receive notifications about a particular event. This function is particularly necessary if you are writing a shared library or a separately loaded code resource that receives notifications. When the resource is unloaded, it must unregister for all of its notifications, or the system will crash when the notification is broadcast. </p>
<h4>
  <a name="1024602"> </a>Compatibility 
</h4>

<p><a name="1024606"> </a>Implemented only if <a href="CompatibilityApdx.html#995220">Notification Feature Set</a> is present. </p>

<h2 class="haH2">
  <a name="1024608"> </a>Application-Defined Functions <a href="#1024252"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1024611"> </a>SysNotifyProcPtr Function <a href="#1024252"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024613"> </a>Purpose 
</h4>

<p><a name="1024614"> </a>Handle a notification.</p>
<h4>
  <a name="1024615"> </a>Declared In 
</h4>
<code>NotifyMgr.h<a name="1024616"> </a></code><h4>
  <a name="1024617"> </a>Prototype 
</h4>
<pre class="proto"><a name="1024618"></a>Err (
   *SysNotifyProcPtr
)(
   SysNotifyParamType *notifyParamsP
)
</pre>
<h4>
  <a name="1024619"> </a>Parameters 
</h4>

<dl>
<dt><a name="1024620"> </a><code>&rarr;  <i><code>notifyParamsP</code></i></code></dt>
<dd><a name="1024621"> </a>Pointer to a structure that contains the notification event that occurred and any other information about it. See <a href="Notifications.html#1047220"><code>SysNotifyParamType</code></a>.</dd>

</dl>
<h4>
  <a name="1024625"> </a>Returns 
</h4>

<p><a name="1024626"> </a>Always return 0. </p>
<h4>
  <a name="1024627"> </a>Comments 
</h4>

<p><a name="1024631"> </a>You pass this function as a parameter to <a href="NotifyMgr.html#1024486"><code>SysNotifyRegister()</code></a> when registering code that does not have a <a href="SystemManager.html#1077030"><code>PilotMain()</code></a> for a notification. See the description of <a href="NotifyMgr.html#1024486"><code>SysNotifyRegister()</code></a> for advice on writing a notification handler. </p>

<div><hr>
  <a name="1024638"> </a> <b>IMPORTANT: </b> Because the <code>callbackP</code> pointer is used to directly call the function, the pointer must remain valid from the time <code>SysNotifyRegister</code> is called to the time the notification is broadcast. If the function is in a shared library, you must keep the library open. If the function is in a separately loaded code resource, the resource must remain locked while registered for the notification. When you close a library or unlock a resource, you must first unregister for any notifications. If you don't, the system will crash when the notification is broadcast. 
<hr>
</div>

<p><a name="1024639"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Reference_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MemoryManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="OverlayMgr.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>