<html>
<head>
<title>(68K) Network Communication | Palm OS&#174; Programmer's Companion</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 10:43:45">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="1021267"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="Companion2TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BTCompanion.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SslConcepts.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Companion2IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">7 &nbsp;&nbsp;
Network Communication</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; Programmer's Companion</p>
<p class="SubTitle">Volume II Communications </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1"><a href="NetworkCommunication.html">7  Network Communication</a></h1>

   <h2 class="SideTOC2"><a href="#1021312">
   Net Library</a></h2>

      <h3 class="SideTOC3"><a href="#1021368">
      About the Net Library</a></h3>

      <h3 class="SideTOC3"><a href="#1021434">
      Net Library Usage Steps</a></h3>

      <h3 class="SideTOC3"><a href="#1021469">
      Obtaining the Net Library's Reference Number</a></h3>

      <h3 class="SideTOC3"><a href="#1021479">
      Setting Up Berkeley Socket API</a></h3>

      <h3 class="SideTOC3"><a href="#1021493">
      Setup and Configuration Calls</a></h3>

      <h3 class="SideTOC3"><a href="#1021882">
      Opening the Net Library</a></h3>

      <h3 class="SideTOC3"><a href="#1021942">
      Closing the Net Library</a></h3>

      <h3 class="SideTOC3"><a href="#1021963">
      Version Checking</a></h3>

      <h3 class="SideTOC3"><a href="#1022002">
      Network I/O and Utility Calls</a></h3>

      <h3 class="SideTOC3"><a href="#1022023">
      Berkeley Sockets API Functions</a></h3>

      <h3 class="SideTOC3"><a href="#1022476">
      Extending the Network Login Script Support</a></h3>

      <h3 class="SideTOC3"><a href="#1030324">
      Socket Notices</a></h3>

   <h2 class="SideTOC2"><a href="#1030251">
   Internet Library</a></h2>

      <h3 class="SideTOC3"><a href="#1022648">
      System Requirements</a></h3>

      <h3 class="SideTOC3"><a href="#1022661">
      Initialization and Setup</a></h3>

      <h3 class="SideTOC3"><a href="#1022689">
      Accessing Web Pages</a></h3>

      <h3 class="SideTOC3"><a href="#1022717">
      Asynchronous Operation</a></h3>

      <h3 class="SideTOC3"><a href="#1022743">
      Using the Low Level Calls</a></h3>

      <h3 class="SideTOC3"><a href="#1022774">
      Cache Overview</a></h3>

      <h3 class="SideTOC3"><a href="#1022791">
      Internet Library Network Configurations</a></h3>

   <h2 class="SideTOC2"><a href="#1022836">
   Summary of Network Communication</a></h2>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1021302"> </a>Two different Palm OS<sup>&#174;</sup> libraries provide network services to applications:</p>
<ul type="disc">
  <li><a name="1021303"> </a>The net library provides basic network services using TCP and UDP via a socket API. This library is discussed in the section <a href="NetworkCommunication.html#1021312">Net Library</a>.
  <li><a name="1021307"> </a>The Internet library builds on the net library to provide a socket-like API to high-level Internet protocols such as HTTP. This library is discussed in the section <a href="NetworkCommunication.html#1030251">Internet Library</a>.
</ul>

<h2 class="haH2">
  <a name="1021312"> </a>Net Library <a href="#1021267"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1021313"> </a>The net library allows Palm OS applications to easily establish a connection with any other machine on the Internet and transfer data to and from that machine using the standard TCP/IP protocols.</p>

<p><a name="1021315"> </a>The basic network services provided by the net library include: </p>
<ul type="disc">
  <li><a name="1021317"> </a>Stream-based, guaranteed delivery of data using TCP (Transmission Control Protocol).
  <li><a name="1021319"> </a>Datagram-based, best-effort delivery of data using UDP (User Datagram Protocol). 
</ul>

<p><a name="1021320"> </a>You can implement higher-level Internet-based services (file transfer, e-mail, web browsing, etc.) on top of these basic delivery services. </p>

<div><hr>
  <a name="1021321"> </a> <b>IMPORTANT: </b> Applications cannot directly use the net library to make wireless connections. Use the Internet library for wireless connections. 
<hr>
</div>

<p><a name="1021322"> </a>This section describes how to use the net library in your application. It covers:</p>
<ul type="disc">
  <li><a name="1021326"> </a><a href="NetworkCommunication.html#1021368">About the Net Library</a>
  <li><a name="1021330"> </a><a href="NetworkCommunication.html#1021434">Net Library Usage Steps</a>
  <li><a name="1021334"> </a><a href="NetworkCommunication.html#1021469">Obtaining the Net Library's Reference Number</a>
  <li><a name="1021338"> </a><a href="NetworkCommunication.html#1021479">Setting Up Berkeley Socket API</a>
  <li><a name="1021342"> </a><a href="NetworkCommunication.html#1021493">Setup and Configuration Calls</a>
  <li><a name="1021346"> </a><a href="NetworkCommunication.html#1021882">Opening the Net Library</a>
  <li><a name="1021350"> </a><a href="NetworkCommunication.html#1021942">Closing the Net Library</a>
  <li><a name="1021354"> </a><a href="NetworkCommunication.html#1021963">Version Checking</a>
  <li><a name="1021358"> </a><a href="NetworkCommunication.html#1022002">Network I/O and Utility Calls</a>
  <li><a name="1021362"> </a><a href="NetworkCommunication.html#1022023">Berkeley Sockets API Functions</a>
  <li><a name="1021366"> </a><a href="NetworkCommunication.html#1022476">Extending the Network Login Script Support</a>
</ul>
<h3 class="hbH3">
  <a name="1021368"> </a>About the Net Library <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021370"> </a>The net library consists of two parts: a netlib interface and a net protocol stack. </p>

<p><a name="1021372"> </a>The <b>netlib interface</b> is the set of routines that an application calls directly when it makes a net library call. These routines execute in the caller's task like subroutines of the application. They are not linked in with the application, however, but are called through the library dispatch mechanism. </p>

<p><a name="1021373"> </a>With the exception of functions that open, close, and set up the net library, the net library's API maps almost directly to the Berkeley UNIX sockets API, the de facto standard API for Internet applications. You can compile an application written to use the Berkeley sockets API for the Palm OS with only slight changes to the source code.</p>

<p><a name="1021377"> </a>The <b>net protocol stack</b> runs as a separate task in the operating system. Inside this task, the TCP/IP protocol stack runs, and received packets are processed from the network device drivers. The netlib interface communicates with the net protocol stack through an operating system mailbox queue. It posts requests from applications into the queue and blocks until the net protocol stack processes the requests.</p>

<p><a name="1021381"> </a>Having the net protocol stack run as a separate task has two big advantages: </p>
<ul type="disc">
  <li><a name="1021382"> </a>The operating system can switch in the net protocol stack to process incoming packets from the network even if the application is currently busy. 
  <li><a name="1021383"> </a>Even if an application is blocked waiting for some data to arrive off the network, the net protocol stack can continue to process requests for other applications. 
</ul>

<p><a name="1021384"> </a>One or more network interfaces run inside the net protocol stack task. A <b>network interface</b> is a separately linked database containing code necessary to abstract link-level protocols. For example, there are separate network interface databases for PPP and SLIP. A network interface is generally specified by the user in the Network preference panel. In rare circumstances, interfaces can also be attached and detached from the net library at runtime as described in the section <a href="NetworkCommunication.html#1021507">"Settings for Interface Selection"</a> later in this chapter. </p>

<h4 class="hcH4">
  <a name="1021390"> </a>Constraints
</h4>

<p><a name="1021391"> </a>Because it's unclear whether all future platforms will need or want network support (especially devices with very limited amounts of memory), network support is an optional part of the operating system. For this reason, the net library is implemented as a system library that is installed at runtime and doesn't have to be present for the system to work properly. </p>

<p><a name="1021393"> </a>When the net library is present and running, it requires an estimated additional 32 KB of RAM. This in effect doubles the overall system RAM requirements, currently 32 KB without the net library. It's therefore not practical to run the net library on any platform that has 128 KB or less of total RAM available since the system itself will consume 64 KB of RAM (leaving only 64 KB for user storage in a 128 KB system). </p>

<p><a name="1021395"> </a>Because of the RAM requirements, the net library is supported only on PalmPilot Professional and newer devices running Palm OS 2.0 and later. </p>

<p><a name="1021396"> </a>All applications written for Palm OS must pay special attention to memory and CPU usage because Palm OS runs on small devices with limited amounts of memory and other hardware resources. Applications that use the net library, therefore, must pay even more attention to memory usage. After opening the net library, the total remaining amount of RAM available to an application is approximately 12 KB on a PalmPilot Professional and 36KB on a Palm III<sup>&#8482;</sup>. </p>

<p><a name="1030431"> </a>Palm OS Garnet versions 5.4 and higher no longer impose a maximum stack size for the Net Library nor a maximum number of active, simultaneous network sockets. Individual manufacturers of Palm OS devices decide on the appropriate stack size and number of active sockets.</p>

<h4 class="hcH4">
  <a name="1021398"> </a>The Programmer's Interface
</h4>

<p><a name="1021399"> </a>There are essentially two sets of API into the net library: the net library's native API, and the Berkeley sockets API. The two APIs map almost directly to each other. You can use the Berkeley sockets API with no performance penalty and little or no modifications to any existing code that you have. </p>

<p><a name="1021401"> </a>The header file <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">&lt;unix/sys_socket.h&gt;</span> contains a set of macros that map Berkeley sockets calls directly to net library calls. The main difference between the net library API and the Berkeley sockets API is that most net library API calls accept additional parameters for: </p>
<ul type="disc">
  <li><a name="1021402"> </a><b>A reference number.</b> All library calls in the Palm OS must have the library reference number as the first parameter. 
  <li><a name="1021403"> </a><b>A timeout.</b> In consumer systems such as the Palm Powered handheld, infinite timeouts don't work well because the end user can't "kill" a process that's stuck. The timeout allows the application to gracefully recover from hung connections. The default timeout is 2 seconds.
  <li><a name="1021404"> </a><b>An error code.</b> The sockets API by convention returns error codes in the application's global variable <code>errno</code>. The net library API doesn't rely on any application global variables. This allows system code (which cannot have global variables) to use the net library API. 
</ul>

<p><a name="1021405"> </a>The macros in <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">sys_socket.h</span> do the following:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1021408"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">For...</span></b></p>
    </th>
    <th><p class="tt"><a name="1021410"> </a><b>The macros pass...</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021412"> </a>reference number</p>
    </td>
    <td><p class="tt"><a name="1021414"> </a><span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetRefnum</span> (application global variable).</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021416"> </a>timeout</p>
    </td>
    <td><p class="tt"><a name="1021418"> </a><code>AppNetTimeout</code> (application global variable).</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021420"> </a>error code</p>
    </td>
    <td><p class="tt"><a name="1021422"> </a>Address of the application global <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">errno.</span></p>
    </td>
  </tr>
</table>

</div>


<p><a name="1021425"> </a>For example, consider the Berkeley sockets call <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socket</span>, which is declared as:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Int16 socket(Int16 domain, Int16 type,
Int16 protocol);<a name="1021426"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021427"> </a>The equivalent net library call is <code>NetLibSocketOpen</code>, which is declared as:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
NetSocketRef NetLibSocketOpen(UInt16 libRefnum,
NetSocketAddrEnum domain,
NetSocketTypeEnum type, Int16 protocol,
Int32 timeout, Err* errP)<a name="1021428"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021429"> </a>The macro for <code>socket</code> is:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define socket(domain,type,protocol) \<a name="1021430"> </a>
NetLibSocketOpen(AppNetRefnum, domain, type,
protocol, AppNetTimeout, &amp;errno)<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"></span><a name="1021431"> </a>
</pre><div class="CodeRule"><hr></div>

<h3 class="hbH3">
  <a name="1021434"> </a>Net Library Usage Steps <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021435"> </a>In general, using the net library involves the steps listed below. The next several sections describe some of the steps in more detail. </p>

<p><a name="1021436"> </a>For an example of using the net library, see the example application <code>NetSample</code> in the <code>Palm OS Examples</code> directory. It exercises many of the net library calls.</p>
<ol type="1">
  <li value="1"><a name="1021437"> </a>Obtain the net library's reference number.
   <p><a name="1021438"> </a>Because the net library is a system library, all net library calls take the library's reference number as the first parameter. For this reason, your first step is to obtain the reference number and save it. See "<a href="NetworkCommunication.html#1021469">Obtaining the Net Library's Reference Number</a>."</p>
   <p><a name="1021442"> </a>Set up for using Berkeley sockets API. </p>
   <p><a name="1021443"> </a>You can either use the net library's native API or the Berkeley sockets API for the majority of what you do with the net library. If you're already familiar with Berkeley sockets API, you'll probably want to use it instead of the native API. If so, follow the steps in "<a href="NetworkCommunication.html#1021479">Setting Up Berkeley Socket API</a>."</p>
  <li value="2"><a name="1021447"> </a>If necessary, configure the net library the way you want it. 
   <p><a name="1021448"> </a>Typically, users set up their networking services by using the Network preferences panel. Most applications don't set up the networking services themselves; they simply access them through the net library preferences database. In rare instances, your application might need to perform some network configuration, and it usually should do so before the net library is open. See "<a href="NetworkCommunication.html#1021493">Setup and Configuration Calls</a>."</p>
  <li value="3"><a name="1021452"> </a>Open the net library right before the first network access.
</ol>

<p><a name="1021453"> </a>Because of the limited resources in the Palm OS environment, the net library was designed so that it only takes up extra memory from the system when an application actually needs to use its services. An Internet application must therefore inform the system when it needs to use the net library by opening the net library when it starts up and by closing it when it exits. See "<a href="NetworkCommunication.html#1021882">Opening the Net Library</a>."</p>
<ol type="1">
  <li value="4"><a name="1021458"> </a>Make calls to access the network. 
</ol>

<p><a name="1021459"> </a>Once the net library has been opened, sockets can be opened and data sent to and received from remote hosts using either the Berkeley sockets API or the native net library API. See "<a href="NetworkCommunication.html#1022002">Network I/O and Utility Calls</a>."</p>
<ol type="1">
  <li value="5"><a name="1021463"> </a>Close the net library when you're finished with it. 
   <p><a name="1021466"> </a>Closing the net library frees up the resources. See "<a href="NetworkCommunication.html#1021942">Closing the Net Library</a>."</p>
</ol>
<h3 class="hbH3">
  <a name="1021469"> </a>Obtaining the Net Library's Reference Number <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021473"> </a>To determine the reference number, call <a href="../PalmOSReference/SystemManager.html#1076670"><code>SysLibFind</code></a><span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">,</span> passing the name of the net library, "<code>Net.lib</code>". In addition, if you intend to use Berkeley sockets API, save the reference number in the application global variable <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetRefnum</span>. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = SysLibFind("Net.lib", &amp;AppNetRefnum);<a name="1021475"> </a>
if (err) {/* error handling here */}<a name="1021476"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021477"> </a>Remember that the net library requires Palm OS version 2.0 or later. If the <code>SysLibFind</code> call can't find the net library, it returns an error code. </p>
<h3 class="hbH3">
  <a name="1021479"> </a>Setting Up Berkeley Socket API <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021480"> </a>To set up the use of Berkeley sockets API, do the following: </p>
<ul type="disc">
  <li><a name="1021482"> </a>Include the header file <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">&lt;unix/sys_socket.h&gt;</span>, provided with the Palm OS SDK.
  <li><a name="1021484"> </a>Link your project with the module <code>NetSocket.c</code>, which declares and initializes three required global variables: <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetTimeout</span>, <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetRefnum,</span> and <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">errno</span>. <code>NetLibSocket.c</code> also contains the glue code necessary for a few of the Berkeley sockets functions. 
  <li><a name="1021488"> </a>As described in the previous section, assign the net library's reference number to the variable <code>AppNetRefnum</code>. 
  <li><a name="1021489"> </a>Adjust <code>AppNetTimeout</code>'s value if necessary. 
   <p><a name="1021490"> </a>This value represents the maximum number of system ticks to wait before a net library call expires. Most applications should adjust this timeout value and possibly adjust it for different sections of code. The following example sets the timeout value to 10 seconds. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
  AppNetTimeout = SysTicksPerSecond() * 10;<a name="1021491"> </a>
</pre><div class="CodeRule"><hr></div>

</ul>
<h3 class="hbH3">
  <a name="1021493"> </a>Setup and Configuration Calls <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021495"> </a>The setup and configuration API calls of the net library are normally only used by the Network preferences panel. This includes calls to set IP addresses, host name, domain name, login script, interface settings, and so on. Each setup and configuration call saves its settings in the net library preferences database in nonvolatile storage for later retrieval by the runtime calls. </p>

<p><a name="1021497"> </a>In rare instances, an application might need to perform setup and configuration itself. For example, some applications might allow users to select a particular "service" before trying to establish a connection. Such applications present a pick list of service names and allow the user to select a service name. This functionality is provided via the Network preferences panel. The panel provides launch codes (defined in <code>SystemMgr.h</code>) that allow an application to present a list of possible service names to let the end user pick one. The preferences panel then makes the necessary net library setup and configuration calls to set up for that particular service.</p>

<p><a name="1021499"> </a>Usually, the setup and configuration calls are made while the library is closed. A subset of the calls can also be issued while the library is open and will have real-time effects on the behavior of the library. <a href="../PalmOSReference/NetLibrary.html#1083561">Chapter 66, "Net Library,"</a> in <i>Palm OS Programmer's API Reference</i>, describes the behavior of each call in more detail. </p>

<h4 class="hcH4">
  <a name="1021507"> </a>Settings for Interface Selection
</h4>

<p><a name="1021511"> </a>As you learned in the section <a href="NetworkCommunication.html#1021368">"About the Net Library,"</a> the net library uses one or more network interfaces to abstract low-level networking protocols. The user specifies which network interface to use in the Network preference panel. </p>

<p><a name="1021513"> </a>You can also use net library calls to specify which interface(s) should be used:</p>
<ul type="disc">
  <li><a name="1021518"> </a><a href="../PalmOSReference/NetLibrary.html#1085120"><code>NetLibIFAttach</code></a> attaches an interface to the library so that it will be used when and if the library is open.
  <li><a name="1021523"> </a><a href="../PalmOSReference/NetLibrary.html#1085167"><code>NetLibIFDetach</code></a> detaches an interface from the library. 
  <li><a name="1021528"> </a><a href="../PalmOSReference/NetLibrary.html#1085260"><code>NetLibIFGet</code></a> returns an interface's creator and instance number. 
</ul>

<p><a name="1021529"> </a>Unlike most net library functions, these functions can be called while the library is open or closed. If the library is open, the specific interface is attached or detached in real time. If the library is closed, the information is saved in the active configuration. See <a href="NetworkCommunication.html#1021754">"Network Configurations"</a> for more information about configurations.</p>

<p><a name="1021533"> </a>Each interface is identified by a creator and an instance number. You need these values if you want to attach or detach an interface or to query or set interface settings. You use <code>NetLibIFGet</code> to obtain this information. <code>NetLibIFGet</code> takes four parameters: the net library's reference number, an index into the library's interface list, and addresses of two variables where the creator and instance number are returned. </p>

<p><a name="1021534"> </a>The creator is one of the following values:</p>
<ul type="disc">
  <li><a name="1021536"> </a><code>netIFCreatorLoop</code> (Loopback network)
  <li><a name="1021538"> </a><code>netIFCreatorSLIP</code> (SLIP network)
  <li><a name="1021540"> </a><code>netIFCreatorPPP</code> (PPP network)
</ul>

<p><a name="1021541"> </a>If you know which interface you want to obtain information about, you can iterate through the network interface list, calling <code>NetLibIFGet</code> with successive index values until the interface with the creator value you need is returned. </p>

<h4 class="hcH4">
  <a name="1021543"> </a>Interface Specific Settings
</h4>

<p><a name="1021544"> </a>The net library configuration is structured so that network interface- specific settings can be specified for each network interface independently. These interface specific settings are called IF settings and are set and retrieved through the <a href="../PalmOSReference/NetLibrary.html#1085312"><code>NetLibIFSettingGet</code></a> and <a href="../PalmOSReference/NetLibrary.html#1085735"><code>NetLibIFSettingSet</code></a> calls. </p>
<ul type="disc">
  <li><a name="1021555"> </a>The <a href="../PalmOSReference/NetLibrary.html#1085312"><code>NetLibIFSettingGet</code></a> call takes a setting ID as a parameter along with a buffer pointer and buffer size for the return value of the setting. Some settings, like login script, are of variable size so the caller must be prepared to allocate a buffer large enough to retrieve the entire setting. (<code>NetLibIFSettingGet</code> returns the required size if you pass <code>NULL</code> for the buffer. See the <code>NetLibIFSettingGet </code>description in the reference documentation for more information.) 
  <li><a name="1021560"> </a>The <a href="../PalmOSReference/NetLibrary.html#1085735"><code>NetLibIFSettingSet</code></a> call also takes a setting ID as a parameter along with a pointer to the new setting value and the size of the new setting. 
   <p><a name="1021561"> </a>If you're using <code>NetLibIFSettingSet</code> to set the login script, see the next section. </p>
</ul>

<p><a name="1021562"> </a>For an example of using these functions, see the <code>NetSample</code> example application in the <code>Palm OS Examples</code> directory. The function <code>CmdSettings</code> in the file <code>CmdInfo.c</code>, for example, shows how to loop through and obtain information about all of the network interfaces. </p>

<h4 class="hcH4">
  <a name="1021563"> </a>Setting an Interface's Login Script
</h4>

<p><a name="1021564"> </a>The <code>netIFSettingLoginScript</code> setting is used to store the login script for an interface. The login script is generated either from the script that the user enters in the Network preferences panel or from a script file that is downloaded onto the handheld during a HotSync<sup>&#174;</sup> operation. The format of the script is rigid; if a syntactically incorrect login script is presented to the net library, the results are unpredictable. The basic format is a series of null-terminated command lines followed by a null byte at the end of the script. Each command line has the format:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
&lt;command-byte&gt; [&lt;parameter&gt;]<a name="1021565"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021566"> </a>where the command byte is the first character in the line and there is 1 and only 1 space between the command byte and the parameter string. <a href="NetworkCommunication.html#1021576">Table 7.1</a> lists the possible commands.</p>

<p class="caption"><a name="1021576"> </a><b>Table 7.1&nbsp;&nbsp;Login Script Commands </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1021584"> </a><b>Function</b></p>
    </th>
    <th><p class="tt"><a name="1021586"> </a><b>Command</b></p>
    </th>
    <th><p class="tt"><a name="1021588"> </a><b>Parameter</b></p>
    </th>
    <th><p class="tt"><a name="1021590"> </a><b>Example</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021592"> </a>Send </p>
    </td>
    <td><p class="tt"><a name="1021594"> </a><code>s</code> </p>
    </td>
    <td><p class="tt"><a name="1021596"> </a>string</p>
    </td>
    <td><p class="tt"><a name="1021598"> </a><code>s go PPP</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021600"> </a>Wait for</p>
    </td>
    <td><p class="tt"><a name="1021602"> </a><code>w</code> </p>
    </td>
    <td><p class="tt"><a name="1021604"> </a>string</p>
    </td>
    <td><p class="tt"><a name="1021606"> </a><code>w password:</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021608"> </a>Delay</p>
    </td>
    <td><p class="tt"><a name="1021610"> </a><code>d</code> </p>
    </td>
    <td><p class="tt"><a name="1021612"> </a>seconds</p>
    </td>
    <td><p class="tt"><a name="1021614"> </a><code>d 1</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021616"> </a>Get IP</p>
    </td>
    <td><p class="tt"><a name="1021618"> </a><code>g</code> </p>
    </td>
    <td><p class="tt"><a name="1021620"> </a></p>
    </td>
    <td><p class="tt"><a name="1021622"> </a><code>g</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021624"> </a>Prompt</p>
    </td>
    <td><p class="tt"><a name="1021626"> </a><code>a</code> </p>
    </td>
    <td><p class="tt"><a name="1021628"> </a>string</p>
    </td>
    <td><p class="tt"><a name="1021630"> </a><code>a Enter Name:</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021632"> </a>Wait for prompt</p>
    </td>
    <td><p class="tt"><a name="1021634"> </a><code>f </code></p>
    </td>
    <td><p class="tt"><a name="1021636"> </a>string</p>
    </td>
    <td><p class="tt"><a name="1021638"> </a><code>f ID:</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021640"> </a>Send CR</p>
    </td>
    <td><p class="tt"><a name="1021642"> </a><code>s</code> </p>
    </td>
    <td><p class="tt"><a name="1021644"> </a>string</p>
    </td>
    <td><p class="tt"><a name="1021646"> </a><code>s ^M</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021648"> </a>Send User ID</p>
    </td>
    <td><p class="tt"><a name="1021650"> </a><code>s</code> </p>
    </td>
    <td><p class="tt"><a name="1021652"> </a>string</p>
    </td>
    <td><p class="tt"><a name="1021654"> </a><code>s jdoe </code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021656"> </a>Send Password</p>
    </td>
    <td><p class="tt"><a name="1021658"> </a><code>s</code> </p>
    </td>
    <td><p class="tt"><a name="1021660"> </a>string </p>
    </td>
    <td><p class="tt"><a name="1021662"> </a>s <i>mypassword</i></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021664"> </a>Plugin command<a href="#1021670"><sup>1</sup></a></p>
    </td>
    <td><p class="tt"><a name="1021672"> </a><code>sp</code> </p>
    </td>
    <td><p class="tt"><a name="1021674"> </a>string </p>
    </td>
    <td><p class="tt"><a name="1021676"> </a>sp <i>plugin</i>:<i>cmd</i>:<i>arg</i></p>
    </td>
  </tr>
</table>
<div class="tablediv"><table cellspacing="0" class="tTableNR">
   <tr>
     <td><div class="FNTFootnoteTable">
<a name="1021670"> </a><a href="#1021664">1</a>. See <a href="NetworkCommunication.html#1022476">"Extending the Network Login Script Support."</a></div>
</td>
   </tr>
</table></div>

</div>


<p><a name="1021678"> </a>The parameter string to the send (<code>s</code>) command can contain the escape sequences shown in <a href="NetworkCommunication.html#1021688">Table 7.2</a>.</p>

<p class="caption"><a name="1021688"> </a><b>Table 7.2&nbsp;&nbsp;Send Command Escape Sequences </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <td><p class="tt"><a name="1021692"> </a>$USERID</p>
    </td>
    <td><p class="tt"><a name="1021694"> </a>substitutes user name</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021696"> </a>$PASSWORD</p>
    </td>
    <td><p class="tt"><a name="1021698"> </a>substitutes password</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021700"> </a>$DBUSERID</p>
    </td>
    <td><p class="tt"><a name="1021702"> </a>substitutes dialback user name</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021704"> </a>$DBPASSWORD</p>
    </td>
    <td><p class="tt"><a name="1021706"> </a>substitutes dialback password</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021708"> </a> ^c</p>
    </td>
    <td><p class="tt"><a name="1021710"> </a>if c is '@' -&gt; '_', then byte value 0 -&gt; 31 <br>else if c is 'a' -&gt; 'z', then byte value 1 -&gt; 26<br>else c </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021712"> </a>&lt;cr&gt;</p>
    </td>
    <td><p class="tt"><a name="1021714"> </a>carriage return (0x0D)</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021716"> </a>&lt;lf&gt;</p>
    </td>
    <td><p class="tt"><a name="1021718"> </a>line feed (0x0A)</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021720"> </a>\"</p>
    </td>
    <td><p class="tt"><a name="1021722"> </a>"</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021724"> </a> \^</p>
    </td>
    <td><p class="tt"><a name="1021726"> </a>^</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021728"> </a> \&lt;</p>
    </td>
    <td><p class="tt"><a name="1021730"> </a>&lt;</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021732"> </a> \\</p>
    </td>
    <td><p class="tt"><a name="1021734"> </a>\</p>
    </td>
  </tr>
</table>

</div>


<p><a name="1021736"> </a>Note also that login scripts can be created on a desktop computer and then installed onto the handheld during synchronization. The script commands are inspired by the Windows dial-up scripting command language for dial-up networking. For documentation from Microsoft, search for the file <code>Script.doc</code> in the <code>Windows</code> folder. The Network preferences panel on Palm OS supports the following subset of commands: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
set serviceName
set userID 
set password 
set phoneNumber 
set connection
set ipAddr 
set dynamicIP 
set primaryDNS
set secondaryDNS
set queryDNS
set closewait 
set inactivityTimeout 
set establishmentTimeout 
set protocol 
waitfor
transmit 
getip 
delay 
prompt 
waitforprompt
plugin "<i>pluginname</i>:<i>cmd</i>[:<i>arg</i>]" <a name="1021737"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021738"> </a>The <code>plugin</code> command is a Palm OS-specific extension used to perform a command defined in a plugin. See <a href="NetworkCommunication.html#1022476">"Extending the Network Login Script Support"</a> for more information on plugins. </p>

<p><a name="1021742"> </a>Create a script file with the extension <code>.pnc</code> or <code>.scp</code> and place it in the user's install directory. The network conduit will download it to the handheld during the next HotSync operation. Each script file should contain only one service definition. </p>

<h4 class="hcH4">
  <a name="1021743"> </a>General Settings
</h4>

<p><a name="1021744"> </a>In addition to the interface-specific settings, there's a class of settings that don't apply to any one particular interface. These general settings are set and retrieved through the <a href="../PalmOSReference/NetLibrary.html#1086876"><code>NetLibSettingGet</code></a> and <a href="../PalmOSReference/NetLibrary.html#1087056"><code>NetLibSettingSet</code></a> calls. These calls take setting ID, buffer pointer, and buffer size parameters. </p>

<h4 class="hcH4">
  <a name="1021754"> </a>Network Configurations
</h4>

<p><a name="1021758"> </a>Palm OS 3.2 and later supports network configurations. A <b>configuration</b> captures a particular way the user can connect to the internet. The net library maintains an array of configurations. When the net library is opened, the network settings for the connection are supplied by one of the configurations in the array.</p>

<p><a name="1021759"> </a>A configuration contains the following information:</p>
<ul type="disc">
  <li><a name="1021760"> </a>the network interfaces used by the net library. When the net library is opened, it brings up these network interfaces.
  <li><a name="1021761"> </a>general net library settings. These are the settings accessed by the <a href="../PalmOSReference/NetLibrary.html#1086876"><code>NetLibSettingGet</code></a> and <a href="../PalmOSReference/NetLibrary.html#1087056"><code>NetLibSettingSet</code></a> functions.<a href="#1021770"><sup>1</sup></a>
</ul>

<p><a name="1021771"> </a>The configuration array is unchanged after a soft reset. It is erased and reinitialized after a hard reset. See <a href="NetworkCommunication.html#1021776">Figure 7.1</a> for a diagram of the configuration array.</p>

<p class="FFigureCaption">
  <a name="1021776"> </a><b>Figure 7.1&nbsp;&nbsp;Configuration architecture</b>
</p>
<div align="left"><img src="images/Configuration.gif" border="0" hspace="0" vspace="0">
</div>

<p><a name="1021781"> </a>A configuration can be an <b>alias</b>. An alias does not contain any configuration information. Instead, it points to another configuration. The net library defines an alias for each of the following configurations:</p>
<ul type="disc">
  <li><a name="1021782"> </a>A default configuration for general use
  <li><a name="1021783"> </a>Wireline configuration for general use
  <li><a name="1021784"> </a>Wireless configuration for general use
  <li><a name="1021787"> </a>Wireline configuration for use with the Palm.net proxy server
  <li><a name="1021791"> </a>Wireless configuration for use with the Palm.net proxy server
</ul>

<p><a name="1021793"> </a>You can specify an alias anywhere in the API you would specify a configuration. </p>

<p><a name="1021794"> </a>An example of an alias is the first configuration in the configuration array, called the <b>default configuration</b>. When you call <code>NetLibOpen</code> to open the net library, the net library gets its connection settings from this configuration. The default configuration typically points to the sixth configuration, called "<code>NetPanel</code>" that actually contains the settings. Therefore, when you call <code>NetLibOpen</code>, the net library gets its settings from the "<code>NetPanel</code>" configuration. See <a href="NetworkCommunication.html#1021882">"Opening the Net Library."</a></p>

<p><a name="1021798"> </a>The net library maintains another special configuration called the <b>active configuration</b>. This configuration is a copy of the configuration used when the net library was last opened. When you attach or detach network interfaces or modify general net library settings, you modify the active configuration. Changing the active configuration this way does not affect any stored configurations.</p>

<div><hr>
  <a name="1021799"> </a> <b>NOTE: </b> You cannot open the net library according to the settings in the active configuration. You need to save the active configuration before you can use its settings to open the net library.
<hr>
</div>

<p><a name="1021800"> </a>The net library provides functions to manage configurations. These functions have names beginning with <code>NetLibConfig</code>.</p>
<ul type="disc">
  <li><a name="1021804"> </a><a href="../PalmOSReference/NetLibrary.html#1084476"><code>NetLibConfigList</code></a> returns a list of all configurations by name. You could use this to display a list of available configurations to your users and allow them to choose which one should be used. 
  <li><a name="1021808"> </a><a href="../PalmOSReference/NetLibrary.html#1084430"><code>NetLibConfigIndexFromName</code></a> obtains a configuration's index number from its name. Most configuration functions use the index number to refer to an configuration instead of its name. 
  <li><a name="1021812"> </a><a href="../PalmOSReference/NetLibrary.html#1084231"><code>NetLibConfigAliasGet</code></a> obtains the value of a configuration alias.
  <li><a name="1021816"> </a><a href="../PalmOSReference/NetLibrary.html#1084278"><code>NetLibConfigAliasSet</code></a> sets the configuration alias to point to a specific configuration.
  <li><a name="1021820"> </a><a href="../PalmOSReference/NetLibrary.html#1084615"><code>NetLibConfigSaveAs</code></a> defines a new configuration and saves it by name. 
  <li><a name="1021824"> </a><a href="../PalmOSReference/NetLibrary.html#1084390"><code>NetLibConfigDelete</code></a> deletes a configuration from the list.
</ul>

<div><hr>
  <a name="1021825"> </a> <span class="warning">WARNING! </span> The Network Panel may interfere with your configuration. When the user exits after making a modification to a service in the Network Panel, the Network Panel overwrites the "<code>NetPanel</code>" configuration and resets the default configuration alias to point to the "<code>NetPanel</code>" configuration.
<hr>
</div>

<p><a name="1021826"> </a>Suppose your application requires the use of wireless communications. It could obtain access to the user's default wireless setup and use it to initialize the net library in the following way (the constant <code>netCfgNameDefWireless</code> defines the name of the default wireless configuration alias): </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
UInt16 configIndex, ifErr;<a name="1021828"> </a>
Err err;<a name="1021829"> </a>
err = NetLibConfigIndexFromName(ref,
	netCfgNameDefWireless, &amp;configIndex);<a name="1021830"> </a>
if (!err)
	err = NetLibOpenConfig(ref, configIndex, 0, <a name="1021831"> </a>
		&amp;ifErr);<a name="1021832"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021836"> </a><a href="NetworkCommunication.html#1021838">Listing 7.1</a> shows another example of using the configuration functions. It demonstrates how to create a configuration that uses a custom network interface. The code also points the default configuration alias to the new configuration so <code>NetLibOpen</code> will open the library according to the settings in the new configuration.</p>
<p class="CCodeCaption">
  <a name="1021838"> </a><b>Listing 7.1&nbsp;&nbsp;Creating a configuration</b>
</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define myNetIFCreator '....' // Set this value<a name="1021839"> </a>
<a name="1021840"> </a>
Err CreateMyConfig () {<a name="1021841"> </a>
	Err err;<a name="1021842"> </a>
	UInt16 instance;<a name="1021843"> </a>
	UInt32 creator;<a name="1021844"> </a>
	UInt16 netLibRefNum;<a name="1021845"> </a>
	UInt16 index;<a name="1021846"> </a>
	NetConfigNameType myConfigName = { "..." }; // Set this too<a name="1021847"> </a>
<a name="1021848"> </a>
	// Find the reference number of the Net Library<a name="1021849"> </a>
	err = SysLibFind("Net.lib",&amp;netLibRefNum);<a name="1021850"> </a>
	if (err) return err;<a name="1021851"> </a>
<a name="1021852"> </a>
	// Activate the default configuration<a name="1021853"> </a>
	err = NetLibConfigMakeActive(netLibRefNum,0);<a name="1021854"> </a>
	if (err) return err;<a name="1021855"> </a>
<a name="1021856"> </a>
	// Detach all network interfaces<a name="1021857"> </a>
	while (true) {<a name="1021858"> </a>
		err = NetLibIFGet(netLibRefNum,0,&amp;creator,&amp;instance);<a name="1021859"> </a>
		if (err) break;<a name="1021860"> </a>
		err = NetLibIFDetach(netLibRefNum,creator,instance,1000L);<a name="1021861"> </a>
		if (err) return err;<a name="1021862"> </a>
	}<a name="1021863"> </a>
<a name="1021864"> </a>
	// Attach the custom network interface<a name="1021865"> </a>
	err = NetLibIFAttach(netLibRefNum,myNetIFCreator,0,1000L);<a name="1021866"> </a>
	if (err) return err;<a name="1021867"> </a>
<a name="1021868"> </a>
	// Save the configuration so you can use it to open the Net Library<a name="1021869"> </a>
	err = NetLibConfigSaveAs(netLibRefNum,&amp;myConfigName);<a name="1021870"> </a>
	if (err) return err;<a name="1021871"> </a>
<a name="1021872"> </a>
	// Get the index of the new configuration<a name="1021873"> </a>
	err = NetLibConfigIndexFromName(netLibRefNum,&amp;myConfigName,&amp;index);<a name="1021874"> </a>
	if (err) return err;<a name="1021875"> </a>
<a name="1021876"> </a>
	// Point the default configuration alias to the new configuration<a name="1021877"> </a>
	err = NetLibConfigAliasSet(netLibRefNum,0,index);<a name="1021878"> </a>
	return err;<a name="1021879"> </a>
}<a name="1021880"> </a>
</pre><div class="CodeRule"><hr></div>

<h3 class="hbH3">
  <a name="1021882"> </a>Opening the Net Library <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021887"> </a>Call <a href="../PalmOSReference/NetLibrary.html#1086179"><code>NetLibOpen</code></a> to open the net library, passing the reference number you retrieved through <a href="../PalmOSReference/SystemManager.html#1076670"><code>SysLibFind</code></a>. Before the net library is opened, most calls issued to it fail with a <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">netErrNotOpen</span> error code. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = NetLibOpen(AppNetRefnum, &amp;ifErrs);<a name="1021891"> </a>
if (err || ifErrs) {/* error handling here */}<a name="1021892"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021893"> </a>Multiple applications can have the library open at a time, so the net library may already be open when <code>NetLibOpen</code> is called. If so, the function increments the library's <b>open count</b>, which keeps track of how many applications  are accessing it, and returns immediately. (You can retrieve the open count with the function <a href="../PalmOSReference/NetLibrary.html#1086342"><code>NetLibOpenCount</code></a>.)</p>

<p><a name="1021897"> </a>If the net library is not already open, <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span> starts up the net protocol stack task, allocates memory for internal use by the net library, and brings up the network connection. Most likely, the user has configured the Palm Powered handheld to establish a SLIP or PPP connection through a modem and in this type of setup, <code>NetLibOpen</code> dials up the modem and establishes the connection before returning. </p>

<p><a name="1021898"> </a>If any of the attached network interfaces (such as SLIP or PPP) fail to come up, the final parameter (<code>ifErrs</code> in the example above) contains the error number of the first interface that encountered a problem.</p>

<p><a name="1021899"> </a>It's possible, and quite likely, that the net library will be able to open even though one or more interfaces failed to come up (due to bad modem settings, service down, etc.). Some applications may therefore wish to close the net library using <a href="../PalmOSReference/NetLibrary.html#1084184"><code>NetLibClose</code></a> if the interface error parameter is non-zero and display an appropriate message for the user. If an application needs more detailed information, e.g. which interface(s) in particular failed to come up, it can loop through each of the attached interfaces and ask each one if it is up or not. For example:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
UInt16 index, ifInstance;<a name="1021903"> </a>
UInt32 ifCreator;<a name="1021904"> </a>
Err err;<a name="1021905"> </a>
UInt8 up;<a name="1021906"> </a>
Char ifName[32];<a name="1021907"> </a>
...<a name="1021908"> </a>
for (index = 0; 1; index++) {<a name="1021909"> </a>
  err = NetLibIFGet(AppNetRefnum, index, <a name="1021910"> </a>
    &amp;ifCreator, &amp;ifInstance);<a name="1021911"> </a>
  if (err) break;<a name="1021912"> </a>
 <a name="1021913"> </a>
  settingSize = sizeof(up);<a name="1021914"> </a>
  err = NetLibIFSettingGet(AppNetRefnum, <a name="1021915"> </a>
    ifCreator, ifInstance, netIFSettingUp, &amp;up, <a name="1021916"> </a>
    &amp;settingSize);<a name="1021917"> </a>
  if (err || up) continue;<a name="1021918"> </a>
  settingSize = 32;<a name="1021919"> </a>
  err = NetLibIFSettingGet(AppNetRefnum, 
    ifCreator, ifInstance, netIFSettingName, 
    ifName, &amp;settingSize);<a name="1021920"> </a>
  if (err) continue;<a name="1021921"> </a>
 <a name="1021922"> </a>
  //display interface didn't come up message<a name="1021923"> </a>
}<a name="1021924"> </a>
NetLibClose(AppNetRefnum, true);<a name="1021925"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021930"> </a>On Palm OS 3.2 or later, you can open the net library with a specific network configuration (see <a href="NetworkCommunication.html#1021754">"Network Configurations"</a>) with the function <a href="../PalmOSReference/NetLibrary.html#1086243"><code>NetLibOpenConfig</code></a>. Typically, you'd specify one of the configuration aliases. For example, your application might require a wireline network, so you would open the net library with the configuration <code>netCfgNameDefWireline</code> to specify the user's default wireline connection. On Palm OS 3.2 or later, <code>NetLibOpen</code> simply calls <code>NetLibOpenConfig</code> specifying the user's default configuration. </p>
<h3 class="hbH3">
  <a name="1021942"> </a>Closing the Net Library <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021944"> </a>Before an application quits, or if it no longer needs to do network   I/O, it should call <a href="../PalmOSReference/NetLibrary.html#1084184"><code>NetLibClose</code></a>. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = NetLibClose(AppNetRefnum, false);<a name="1021948"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021949"> </a><code>NetLibClose</code> simply decrements the open count. The <code>false</code> parameter specifies that if the open count has reached 0, the net library should not immediately close. Instead, <code>NetLibClose</code> schedules a timer to shut down the net library unless another <a href="../PalmOSReference/NetLibrary.html#1086179"><code>NetLibOpen</code></a> is issued before the timer expires. When the net library's open count is 0 but its timer hasn't yet expired, it's referred to as being in the <b>close-wait state</b>. </p>

<p><a name="1021954"> </a>Just how long the net library waits before closing is set by the user in the Network preferences panel. This timeout value allows users to quit from one network application and launch another application within a certain time period without having to wait for another network connection establishment. </p>

<p><a name="1021955"> </a>If <code>NetLibOpen</code> is called before the close timer expires, it simply cancels the timer and marks the library as fully open with an open count of 1 before returning. If the timer expires before another <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span> is issued, all existing network connections are brought down, the net protocol stack task is terminated, and all memory allocated for internal use by the net library is freed. </p>

<p><a name="1021956"> </a>It's recommended that you allow the net library to enter the close-wait state. However, if you do need the net library to close immediately, you can do one of two things:</p>
<ul type="disc">
  <li><a name="1021957"> </a>Set <code>NetLibClose</code>'s second parameter to <code>true</code>. This parameter specifies whether the library should close immediately or not. 
  <li><a name="1021961"> </a>Call <a href="../PalmOSReference/NetLibrary.html#1084768"><code>NetLibFinishCloseWait</code></a>. This function checks the net library to see if it's in the close-wait state and if so, performs an immediate close. 
</ul>
<h3 class="hbH3">
  <a name="1021963"> </a>Version Checking <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1021968"> </a>Besides using <a href="../PalmOSReference/SystemManager.html#1076670"><code>SysLibFind</code></a> to determine if the net library is installed, an application can also look for the net library version feature. This feature is only present if the net library is installed. This feature can be used to get the version number of the net library as follows: </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
UInt32* version;<a name="1021969"> </a>
err = FtrGet(netFtrCreator, netFtrNumVersion,<a name="1021970"> </a>
               &amp;version);<a name="1021971"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1021972"> </a>If the net library is not installed, <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">FtrGet</span> returns a non-zero result code.</p>

<p><a name="1021973"> </a>The version number is encoded in the format <code>0xMMmfsbbb</code>, where: </p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1021976"> </a>MM</p>
    </td>
    <td><p class="tt"><a name="1021978"> </a>major version </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021980"> </a>m</p>
    </td>
    <td><p class="tt"><a name="1021982"> </a>minor version</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021984"> </a> f </p>
    </td>
    <td><p class="tt"><a name="1021986"> </a>bug fix level</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021988"> </a> s </p>
    </td>
    <td><p class="tt"><a name="1021990"> </a>stage: 3-release, 2-beta, 1-alpha, 0-development</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1021992"> </a>bbb </p>
    </td>
    <td><p class="tt"><a name="1021994"> </a>build number for non-releases </p>
    </td>
  </tr>
</table>

</div>


<p><a name="1021996"> </a>For example:</p>

<p><a name="1021997"> </a>	V1.1.2b3 would be encoded as 0x01122003</p>

<p><a name="1021998"> </a>	V2.0a2 would be encoded as 0x02001002</p>

<p><a name="1021999"> </a>	V1.0.1 would be encoded as 0x01013000</p>

<p><a name="1022000"> </a>This document describes version 2.01 of the net library (0x02013000). </p>
<h3 class="hbH3">
  <a name="1022002"> </a>Network I/O and Utility Calls <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022003"> </a>For the network I/O and utility calls, you can either make calls using Berkeley sockets API or using the net library's native API. </p>

<p><a name="1022004"> </a>Several books have been published that describe how to use Berkeley sockets API to perform network communication. Net library API closely mirrors Berkeley sockets API in this regard. However, you should keep in mind these important differences between using networking I/O on a typical computer and using net library on a Palm Powered handheld:</p>
<ul type="disc">
  <li><a name="1022006"> </a>You can open a maximum of four sockets at once in the net library. This is to keep net library's memory requirements to a minimum. 
  <li><a name="1022007"> </a>When you try to send a large block of data, the net library automatically buffers only a portion of that block because of the limited available dynamic memory. The function call returns the number of bytes of data that it actually transmitted. You must check the return value and if there's more data to send, call the function again until the transmission is finished. 
  <li><a name="1022008"> </a>If you expect to also receive data during a large transmission, you should send a smaller block, then read back whatever is available to read before sending the next block. In this way, the amount of memory in the dynamic heap that must be used to buffer data waiting to send out and data waiting to be read back in by the application is kept to a minimum.
</ul>

<p><a name="1022009"> </a>For more information, see the following:</p>
<ul type="disc">
  <li><a name="1022013"> </a>The next section, <a href="NetworkCommunication.html#1022023">"Berkeley Sockets API Functions,"</a> provides tables that list the supported Berkeley sockets calls, the corresponding native net library call, and gives a brief description of what each call does. 
  <li><a name="1022019"> </a><a href="../PalmOSReference/NetLibrary.html#1083561">Chapter 66, "Net Library,"</a> of the <i>Palm OS Programmer's API Reference</i> provides detailed descriptions of each net library call. Where applicable, it gives the equivalent sockets API call for each net library native call. 
  <li><a name="1022021"> </a>The <code>NetSample</code> example application in the <code>Palm OS Examples</code> directory shows how to use the Berkeley sockets API in Palm OS applications. 
</ul>
<h3 class="hbH3">
  <a name="1022023"> </a>Berkeley Sockets API Functions <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022024"> </a>This section provides tables that list the functions in the Berkeley sockets API that are supported by the net library. In some cases, the calls have limited functionality from what's found in a full implementation of the sockets API and these limitations are described here. </p>

<h4 class="hcH4">
  <a name="1022026"> </a>Socket Functions
</h4>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1022029"> </a><b>Berkeley Sockets Function</b></p>
    </th>
    <th><p class="tt"><a name="1022031"> </a><b>Net Library Function</b></p>
    </th>
    <th><p class="tt"><a name="1022033"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022035"> </a>accept </p>
    </td>
    <td><p class="tt"><a name="1022040"> </a><a href="../PalmOSReference/NetLibrary.html#1087121"><code>NetLibSocketAccept</code></a></p>
    </td>
    <td><p class="tt"><a name="1022042"> </a>Accepts a connection from a stream-based socket.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022045"> </a><code>bind</code> </p>
    </td>
    <td><p class="tt"><a name="1022050"> </a><a href="../PalmOSReference/NetLibrary.html#1087258"><code>NetLibSocketBind</code></a></p>
    </td>
    <td><p class="tt"><a name="1022052"> </a>Binds a socket to a local address.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022055"> </a><code>close</code></p>
    </td>
    <td><p class="tt"><a name="1022060"> </a><a href="../PalmOSReference/NetLibrary.html#1087334"><code>NetLibSocketClose</code></a></p>
    </td>
    <td><p class="tt"><a name="1022062"> </a>Closes a socket.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022065"> </a><code>connect</code> </p>
    </td>
    <td><p class="tt"><a name="1022070"> </a><a href="../PalmOSReference/NetLibrary.html#1087391"><code>NetLibSocketConnect</code></a></p>
    </td>
    <td><p class="tt"><a name="1022072"> </a>Connects a socket to a remote endpoint to establish a connection.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022075"> </a><code>fcntl</code> </p>
    </td>
    <td><p class="tt"><a name="1022080"> </a><a href="../PalmOSReference/NetLibrary.html#1087723"><code>NetLibSocketOptionSet</code></a></p>
<p class="tt"><a name="1022084"> </a><a href="../PalmOSReference/NetLibrary.html#1087652"><code>NetLibSocketOptionGet</code></a><br><code>(...,netSocketOptSockNonBlocking,...)</code></p>
    </td>
    <td><p class="tt"><a name="1022086"> </a>Supported only for socket <code>refnum</code>s and the only commands it supports are <code>F_SETFL</code> and <code>F_GETFL</code>. The commands can be used to put a socket into non-blocking mode by setting the <code>FNDELAY</code> flag in the argument parameter appropriately &#8212; all other flags are ignored. The <code>F_SETFL</code>, <code>F_GETFL</code>, and <code>FNDELAY</code> constants are defined in <code>&lt;unix/unix_fcntl.h&gt;</code>. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022089"> </a><code>getpeername</code> </p>
    </td>
    <td><p class="tt"><a name="1022094"> </a><a href="../PalmOSReference/NetLibrary.html#1087195"><code>NetLibSocketAddr</code></a></p>
    </td>
    <td><p class="tt"><a name="1022096"> </a>Gets the remote socket address for a connection.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022099"> </a><code>getsockname</code> </p>
    </td>
    <td><p class="tt"><a name="1022104"> </a><a href="../PalmOSReference/NetLibrary.html#1087195"><code>NetLibSocketAddr</code></a></p>
    </td>
    <td><p class="tt"><a name="1022106"> </a>Gets the local socket address of a connection. </p>
<p class="tt"><a name="1022107"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022110"> </a><code>getsockopt</code> </p>
    </td>
    <td><p class="tt"><a name="1022115"> </a><a href="../PalmOSReference/NetLibrary.html#1087652"><code>NetLibSocketOptionGet</code></a></p>
    </td>
    <td><p class="tt"><a name="1022117"> </a>Gets a socket's control options. Only the following options are implemented:</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022119"> </a></p>
    </td>
    <td><p class="tt"><a name="1022121"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="1022124"> </a><code>TCP_NODELAY</code>
   <p><a name="1022125"> </a>Allows the application to disable the TCP output buffering algorithm so that TCP sends small packets as soon as possible. This constant is defined in <code>&lt;unix/netinet_tcp.h&gt;</code>.</p>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022127"> </a></p>
    </td>
    <td><p class="tt"><a name="1022129"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="1022132"> </a><code>TCP_MAXSEG</code>
   <p><a name="1022133"> </a>Get the TCP maximum segment size. This constant is defined in <code>&lt;unix/netinet_tcp.h&gt;</code>.</p>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022135"> </a></p>
    </td>
    <td><p class="tt"><a name="1022137"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="1022140"> </a><code>SO_KEEPALIVE</code>
   <p><a name="1022141"> </a>Enables periodic transmission of probe segments when there is no data exchanged on a connection. If the remote endpoint doesn't respond, the connection is considered broken, and <code>so_error</code> is set to <code>ETIMEOUT</code>.</p>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022143"> </a></p>
    </td>
    <td><p class="tt"><a name="1022145"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="1022148"> </a><code>SO_LINGER</code>
   <p><a name="1022149"> </a>Specifies what to do with the unsent data when a socket is closed. It uses the <code>linger</code> structure defined in <code>&lt;unix/sys_socket.h&gt;</code>.</p>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022151"> </a></p>
    </td>
    <td><p class="tt"><a name="1022153"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="1022156"> </a><code>SO_ERROR</code>
   <p><a name="1022157"> </a>Returns the current value of the variable <code>so_error</code>, defined in <code>&lt;unix/sys_socketvar.h&gt;</code></p>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022159"> </a></p>
    </td>
    <td><p class="tt"><a name="1022161"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="1022164"> </a><code>SO_TYPE</code>
   <p><a name="1022165"> </a>Returns the socket type to the caller. </p>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022168"> </a><code>listen</code> </p>
    </td>
    <td><p class="tt"><a name="1022173"> </a><a href="../PalmOSReference/NetLibrary.html#1087462"><code>NetLibSocketListen</code></a></p>
    </td>
    <td><p class="tt"><a name="1022175"> </a>Sets up the socket to listen for incoming connection requests. The queue size is quietly limited to 1. (Higher values are ignored.)</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022179"> </a><code>read</code>, <code>recv</code>, <code>recvmsg</code>, <code>recvfrom</code> </p>
    </td>
    <td><p class="tt"><a name="1022186"> </a><a href="../PalmOSReference/NetLibrary.html#1086371"><code>NetLibReceive</code></a><br><a href="../PalmOSReference/NetLibrary.html#1086458"><code>NetLibReceivePB</code></a></p>
    </td>
    <td><p class="tt"><a name="1022191"> </a>Read data from a socket. The <code>recv</code>, <code>recvmsg</code>, and <code>recvfrom</code> calls support the <code>MSG_PEEK</code> flag but not the <code>MSG_OOB</code> or <code>MSG_DONTROUTE</code> flags.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022194"> </a><code>select</code> </p>
    </td>
    <td><p class="tt"><a name="1022199"> </a><a href="../PalmOSReference/NetLibrary.html#1086574"><code>NetLibSelect</code></a></p>
    </td>
    <td><p class="tt"><a name="1022201"> </a>Allows the application to block on multiple I/O events. The system will wake up the application process when any of the multiple I/O events occurs. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022203"> </a></p>
    </td>
    <td><p class="tt"><a name="1022205"> </a></p>
    </td>
    <td><p class="tt"><a name="1022207"> </a>This function uses the <code>timeval</code> structure defined in <code>&lt;unix/sys_time.h&gt;</code> and the <code>fd_set</code> structure defined in <code>sys/types.h</code>.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022209"> </a></p>
    </td>
    <td><p class="tt"><a name="1022211"> </a></p>
    </td>
    <td><p class="tt"><a name="1022213"> </a>Also associated with this function are the following four macros defined in <code>&lt;unix/sys_types.h&gt;:</code></p>
<ul type="disc">
  <li><a name="1022214"> </a><code>FD_ZERO</code>
  <li><a name="1022215"> </a><code>FD_SET</code>
  <li><a name="1022216"> </a><code>FD_CLR</code>
  <li><a name="1022217"> </a><code>FD_ISSET</code>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022219"> </a></p>
    </td>
    <td><p class="tt"><a name="1022221"> </a></p>
    </td>
    <td><p class="tt"><a name="1022223"> </a>Besides socket descriptors, this function also works with the "stdin" descriptor, <code>sysFileDescStdIn</code>. This descriptor is marked as ready for input whenever a user or system event is available in the event queue. This includes any event that would be returned by <code>EvtGetEvent</code>. No other descriptors besides <code>sysFileDescStdIn</code> and socket <code>refnum</code>s are allowed.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022228"> </a><code>send</code>, <code>sendmsg</code>, <code>sendto</code> </p>
    </td>
    <td><p class="tt"><a name="1022234"> </a><a href="../PalmOSReference/NetLibrary.html#1086663"><code>NetLibSend</code></a><br><a href="../PalmOSReference/NetLibrary.html#1086775"><code>NetLibSendPB</code></a></p>
    </td>
    <td><p class="tt"><a name="1022239"> </a>These functions write data to a socket. These calls, unlike the <code>recv</code> calls, <i>do</i> support the <code>MSG_OOB</code> flag. The <code>MSG_PEEK</code> flag is not applicable and the <code>MSG_DONTROUTE</code> flag is not supported.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022242"> </a><code>setsockopt</code> </p>
    </td>
    <td><p class="tt"><a name="1022247"> </a><a href="../PalmOSReference/NetLibrary.html#1087723"><code>NetLibSocketOptionSet</code></a></p>
    </td>
    <td><p class="tt"><a name="1022249"> </a>This function sets control options of a socket. Only the following options are allowed:</p>
<ul type="disc">
  <li><a name="1022251"> </a><code>TCP_NODELAY</code>
  <li><a name="1022253"> </a><code>SO_KEEPALIVE</code>
  <li><a name="1022255"> </a><code>SO_LINGER</code>
</ul>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022258"> </a><code>shutdown</code> </p>
    </td>
    <td><p class="tt"><a name="1022263"> </a><a href="../PalmOSReference/NetLibrary.html#1088094"><code>NetLibSocketShutdown</code></a></p>
    </td>
    <td><p class="tt"><a name="1022265"> </a>Similar to <code>close()</code>; however, it gives the caller more control over a full-duplex connection.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022268"> </a><code>socket</code> </p>
    </td>
    <td><p class="tt"><a name="1022273"> </a><a href="../PalmOSReference/NetLibrary.html#1087549"><code>NetLibSocketOpen</code></a></p>
    </td>
    <td><p class="tt"><a name="1022275"> </a>Creates a socket for communication.The only valid address family is <code>AF_INET</code>. The only valid socket types are <code>SOCK_STREAM,</code> <code>SOCK_DGRAM</code>, and in Palm OS version 3.0 and higher, <code>SOCK_RAW</code>. The protocol parameter should be set to 0.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022278"> </a><code>write</code> </p>
    </td>
    <td><p class="tt"><a name="1022283"> </a><a href="../PalmOSReference/NetLibrary.html#1086663"><code>NetLibSend</code></a></p>
    </td>
    <td><p class="tt"><a name="1022285"> </a>Writes data to a socket.</p>
    </td>
  </tr>
</table>

</div>


<h4 class="hcH4">
  <a name="1022288"> </a>Supported Network Utility Functions
</h4>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1022291"> </a><b>Berkeley Sockets Function</b></p>
    </th>
    <th><p class="tt"><a name="1022293"> </a><b>Net Library Function</b></p>
    </th>
    <th><p class="tt"><a name="1022295"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022298"> </a><code>getdomainname</code> </p>
    </td>
    <td><p class="tt"><a name="1022303"> </a><a href="../PalmOSReference/NetLibrary.html#1087652"><code>NetLibSocketOptionGet</code></a><code>(..,<br>netSettingDomainName,...)</code></p>
    </td>
    <td><p class="tt"><a name="1022305"> </a>Returns the domain name of the local host.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022308"> </a><code>gethostbyaddr</code> </p>
    </td>
    <td><p class="tt"><a name="1022313"> </a><a href="../PalmOSReference/NetLibrary.html#1084795"><code>NetLibGetHostByAddr</code></a></p>
    </td>
    <td><p class="tt"><a name="1022315"> </a>Looks up host information given the host's IP address. It returns a <code>hostent</code> structure, as defined in <code>&lt;netdb.h&gt;</code>.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022318"> </a><code>gethostbyname</code> </p>
    </td>
    <td><p class="tt"><a name="1022323"> </a><a href="../PalmOSReference/NetLibrary.html#1084889"><code>NetLibGetHostByName</code></a></p>
    </td>
    <td><p class="tt"><a name="1022325"> </a>Looks up host information given the host's name. It returns a <code>hostent</code> structure which is defined in <code>&lt;netdb.h&gt;</code>.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022328"> </a><code>gethostname</code> </p>
    </td>
    <td><p class="tt"><a name="1022333"> </a><a href="../PalmOSReference/NetLibrary.html#1086876"><code>NetLibSettingGet</code></a><code>(..,<br>netSettingHostName,<br>...)</code></p>
    </td>
    <td><p class="tt"><a name="1022335"> </a>Returns the name of the local host.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022338"> </a><code>getservbyname</code> </p>
    </td>
    <td><p class="tt"><a name="1022343"> </a><a href="../PalmOSReference/NetLibrary.html#1085067"><code>NetLibGetServByName</code></a></p>
    </td>
    <td><p class="tt"><a name="1022345"> </a>Returns a <code>servent</code> structure, defined in <code>&lt;netdb.h&gt;</code> given a service name.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022348"> </a><code>gettimeofday</code> </p>
    </td>
    <td><p class="tt"><a name="1022350"> </a>glue code using <a href="../PalmOSReference/DateAndTimeManager.html#1098520"><code>TimGetSeconds</code></a></p>
    </td>
    <td><p class="tt"><a name="1022355"> </a>Returns the current date and time.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022358"> </a><code>setdomainname</code> </p>
    </td>
    <td><p class="tt"><a name="1022363"> </a><a href="../PalmOSReference/NetLibrary.html#1087056"><code>NetLibSettingSet</code></a><code>(..,<br>netSettingDomainName,...)</code></p>
    </td>
    <td><p class="tt"><a name="1022365"> </a>Sets the domain name of the local host.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022368"> </a><code>sethostname</code> </p>
    </td>
    <td><p class="tt"><a name="1022373"> </a><a href="../PalmOSReference/NetLibrary.html#1087056"><code>NetLibSettingSet</code></a><code>(..,<br>netSettingHostName,<br>...)</code></p>
    </td>
    <td><p class="tt"><a name="1022375"> </a>Sets the name of the local host.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022378"> </a><code>settimeofday</code> </p>
    </td>
    <td><p class="tt"><a name="1022380"> </a>glue code using <a href="../PalmOSReference/DateAndTimeManager.html#1098594"><code>TimSetSeconds</code></a> </p>
    </td>
    <td><p class="tt"><a name="1022385"> </a>Sets the current date and time.</p>
    </td>
  </tr>
</table>

</div>


<h4 class="hcH4">
  <a name="1022388"> </a>Supported Byte Ordering Macros
</h4>

<p><a name="1022389"> </a>The byte ordering macros are defined in <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">&lt;unix/netinet_in.h&gt;.</span> They convert an integer between network byte order and the host byte order. </p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1022392"> </a><b>Berkeley<br>Sockets<br>Macro</b></p>
    </th>
    <th><p class="tt"><a name="1022394"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022397"> </a><code>htonl</code> </p>
    </td>
    <td><p class="tt"><a name="1022399"> </a>Converts a 32-bit integer from host byte order to network byte order.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022402"> </a><code>htons</code> </p>
    </td>
    <td><p class="tt"><a name="1022404"> </a>Converts a 16-bit integer from host byte order to network byte order.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022407"> </a><code>ntohl</code> </p>
    </td>
    <td><p class="tt"><a name="1022409"> </a>Converts a 32-bit integer from network byte order to host byte order.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022412"> </a><code>ntohs</code> </p>
    </td>
    <td><p class="tt"><a name="1022414"> </a>Converts a 16-bit integer from network byte order to host byte order.</p>
    </td>
  </tr>
</table>

</div>


<h4 class="hcH4">
  <a name="1022417"> </a>Supported Network Address Conversion Functions
</h4>

<p><a name="1022418"> </a>The network address conversion functions are declared in the <code>&lt;unix/arpa_inet.h&gt;</code> header file. They convert a network address from one format to another, or manipulate parts of a network address.</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1022421"> </a><b>Berkeley Sockets Function</b></p>
    </th>
    <th><p class="tt"><a name="1022423"> </a><b>Net Library Function</b></p>
    </th>
    <th><p class="tt"><a name="1022425"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022428"> </a><code>inet_addr</code> </p>
    </td>
    <td><p class="tt"><a name="1022433"> </a><a href="../PalmOSReference/NetLibrary.html#1084129"><code>NetLibAddrAToIN</code></a></p>
    </td>
    <td><p class="tt"><a name="1022435"> </a>Converts an IP address from dotted decimal format to 32-bit binary format. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022438"> </a><code>inet_network</code> </p>
    </td>
    <td><p class="tt"><a name="1022440"> </a>glue code</p>
    </td>
    <td><p class="tt"><a name="1022442"> </a>Converts an IP network number from a dotted decimal format to a 32-bit binary format.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022445"> </a><code>inet_makeaddr</code> </p>
    </td>
    <td><p class="tt"><a name="1022447"> </a>glue code</p>
    </td>
    <td><p class="tt"><a name="1022449"> </a>Returns an IP address in an <code>in_addr</code> structure given an IP network number and an IP host number in 32-bit binary format.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022452"> </a><code>inet_lnaof</code> </p>
    </td>
    <td><p class="tt"><a name="1022454"> </a>glue code</p>
    </td>
    <td><p class="tt"><a name="1022456"> </a>Returns the host number part of an IP address.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022459"> </a><code>inet_netof</code> </p>
    </td>
    <td><p class="tt"><a name="1022461"> </a>glue code</p>
    </td>
    <td><p class="tt"><a name="1022463"> </a>Returns the network number part of an IP address.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022466"> </a><code>inet_ntoa</code> </p>
    </td>
    <td><p class="tt"><a name="1022471"> </a><a href="../PalmOSReference/NetLibrary.html#1084155"><code>NetLibAddrINToA</code></a></p>
    </td>
    <td><p class="tt"><a name="1022473"> </a>Converts an IP address from 32-bit format to dotted decimal format.</p>
    </td>
  </tr>
</table>

</div>

<h3 class="hbH3">
  <a name="1022476"> </a>Extending the Network Login Script Support <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022477"> </a>Beginning in Palm OS 3.3, you can write a plugin that extends the list of available script commands in the Network preferences panel. You might do so, for example, if: </p>
<ul type="disc">
  <li><a name="1022478"> </a>You are a corporate IT shop, system integrator, or a token card vendor and want the login script to properly respond to a range of different connection scenarios defined by the authentication server. 
  <li><a name="1022479"> </a>You are a token card vendor and you want to create the Palm OS version of your password generator. 
  <li><a name="1022480"> </a>You want to perform conditional tests and branching during the execution of the script. 
</ul>

<p><a name="1022481"> </a>The login script enhancement can also be installed on any Palm Powered handheld that already has network library support (that is, PalmPilot<sup>&#8482;</sup> Professional and newer devices running Palm OS 2.0 or higher). To do so, you install a file named <code>Network.prc</code> along with a PRC file for the network interface you use (i.e., PPP or SLIP). These files provide the new Network preferences panel, which contains support for some new commands and support for the ability to write script plugins. </p>

<p><a name="1022482"> </a>The sections below describe the basics of how to write a login script plugin. For more detailed information on the API you use to write a plugin, see the chapter <a href="../PalmOSReference/ScriptPlugin.html#1111757">"Script Plugin"</a> in the <i>Palm OS Programmer's API Reference</i>. </p>

<h4 class="hcH4">
  <a name="1022489"> </a>Writing the Login Script Plugin
</h4>

<p><a name="1022490"> </a>To write a login script plugin, you create a project like you normally would; however, specify <code>'scpt'</code> as the database type instead of <code>'appl'</code>. (If you're using Metrowerks CodeWarrior, you specify the database type in the PalmRez post linker panel.) </p>

<p><a name="1022494"> </a>In the <a href="../PalmOSReference/SystemManager.html#1077030"><code>PilotMain</code></a> function, the plugin should respond to two launch codes: </p>
<ul type="disc">
  <li><a name="1022499"> </a><a href="../PalmOSReference/ScriptPlugin.html#1111961"><code>scptLaunchCmdListCmds</code></a> to inform the Network preferences panel of the commands your plugin implements. 
  <li><a name="1022504"> </a><a href="../PalmOSReference/ScriptPlugin.html#1111971"><code>scptLaunchCmdExecuteCmd</code></a> to execute one of your commands. 
</ul>

<h4 class="hcH4">
  <a name="1022506"> </a>Responding to scptLaunchCmdListCmds
</h4>

<p><a name="1022507"> </a>The Network preferences panel sends the <code>scptLaunchCmdListCmds</code> launch code when it is constructing the pull-down list of available commands that it displays in its script view. The panel sends this launch code to all PRCs of type <code>'scpt'</code>. It passes an empty structure of type <a href="../PalmOSReference/ScriptPlugin.html#1111903"><code>PluginInfoType</code></a> as its parameter block. Your plugin should respond by filling in the structure with the following information: </p>
<ul type="disc">
  <ul type="disc">
    <li><a name="1022512"> </a>The name of your plugin (the name of the PRC file)
    <li><a name="1022513"> </a>The number of commands your plugin implements. No more than <code>pluginMaxNumOfCmds</code> is allowed. 
    <li><a name="1022515"> </a>An array containing the name of each command your plugin implements and a Boolean value that indicates whether your plugin takes an argument. 
  </ul>
</ul>

<p><a name="1022516"> </a>A given handheld might have multiple plugins installed. If so, the resulting pull-down list contains the union of all commands supported by all of the plugins installed on the handheld. For this reason, you should make sure the command names you supply are unique. You also should make sure the names are as brief as possible, as only 15 characters are allowed for the name. </p>

<h4 class="hcH4">
  <a name="1022517"> </a>Responding to scptLaunchCmdExecuteCmd
</h4>

<p><a name="1022519"> </a>The <code>scptLaunchCmdExecuteCmd</code> launch code is sent when the login script is being executed. That is, the user has attempted to connect to the network service specified in the Network preferences panel, and the panel is executing the script to perform authentication. </p>

<p><a name="1022521"> </a>The <code>scptLaunchCmdExecuteCmd</code> parameter block is a structure of type <a href="../PalmOSReference/ScriptPlugin.html#1111854"><code>PluginExecCmdType</code></a>. It contains: </p>
<ul type="disc">
  <li><a name="1022525"> </a>The name of the command to be executed 
  <li><a name="1022526"> </a>The command argument, if it takes one
  <li><a name="1022527"> </a>A pointer to a network interface function
  <li><a name="1022528"> </a>A handle to information specific to the current connection
</ul>

<p><a name="1022529"> </a>Your plugin should execute the specified command. When a plugin is launched with this code, it is launched as a subroutine and as such does not have access to global variables. Also keep in mind that the network library and a connection application (such as the HotSync application) are already running when the plugin is launched. Thus, available memory and stack space are extremely limited. </p>

<p><a name="1022530"> </a>To perform most of its work, the plugin command probably needs access to the network interface (such as SLIP or PPP) specified for the selected network service. For this reason, the plugin is passed a pointer to a callback function defined by the network interface. The plugin should call this function when it needs to perform the following tasks: </p>
<ul type="disc">
  <li><a name="1022531"> </a>Read a number of bytes from the network
  <li><a name="1022532"> </a>Write a number of bytes to the network
  <li><a name="1022533"> </a>Get the user's name and password information
  <li><a name="1022534"> </a>Write a string to the connection log
  <li><a name="1022535"> </a>Prompt the user for information
  <li><a name="1022536"> </a>Check to see if the user pressed the Cancel button
  <li><a name="1022537"> </a>Display a form
  <li><a name="1022538"> </a>Obtain access to the serial library
</ul>

<p><a name="1022539"> </a>The callback's prototype is defined by <a href="../PalmOSReference/ScriptPlugin.html#1112113"><code>ScriptPluginSelectorProc</code></a>. It takes as arguments the handle to the connection-specific data passed in with the launch code, the task that the network interface should perform (specified as a <code>pluginNetLib</code>... constant), followed by a series of parameters whose interpretations depend on which task is to be performed. </p>

<p><a name="1022543"> </a>For example, the following code implements the command "Send Uname", which sends the user's name to the host computer. </p>
<p class="CCodeCaption">
  <a name="1022544"> </a><b>Listing 7.2&nbsp;&nbsp;Simple Script Plugin Command</b>
</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define  pluginSecondCmd "Send Uname"<a name="1022545"> </a>
 <a name="1022546"> </a>
UInt32 PilotMain(UInt16 cmd, void *cmdPBP, 
UInt16 launchFlags) {<a name="1022547"> </a>
PluginExecCmdPtr execPtr;<a name="1022548"> </a>
UInt32 error = success;<a name="1022549"> </a>
Int16 dataSize = 0;<a name="1022550"> </a>
Char* dataBuffer = NULL;<a name="1022551"> </a>
ScriptPluginSelectorProcPtr selectorTypeP;<a name="1022552"> </a>
 <a name="1022553"> </a>
if (cmd == scptLaunchCmdExecuteCmd) {<a name="1022554"> </a>
   execPtr = (PluginExecCmdPtr)cmdPBP;<a name="1022555"> </a>
   selectorTypeP = execPtr-&gt;procP-&gt;selectorProcP;<a name="1022556"> </a>
 <a name="1022557"> </a>
   dataBuffer = MemPtrNew(pluginMaxLenTxtStringArg+1);<a name="1022558"> </a>
   if (!dataBuffer) {<a name="1022559"> </a>
      return failure;<a name="1022560"> </a>
   }<a name="1022561"> </a>
   MemSet(dataBuffer,pluginMaxLenTxtStringArg+1,0);<a name="1022562"> </a>
 <a name="1022563"> </a>
   if (!StrCompare(execPtr-&gt;commandName, pluginSecondCmd)) {<a name="1022564"> </a>
 <a name="1022565"> </a>
      /* get the user name from the network interface */<a name="1022566"> </a>
      error = (selectorTypeP)(execPtr-&gt;handle, <a name="1022567"> </a>
         pluginNetLibGetUserName, (void*)dataBufferP, 
&amp;dataSize, 0, <a name="1022568"> </a>
         NULL); <a name="1022569"> </a>
      if (error) goto Exit;<a name="1022570"> </a>
 <a name="1022571"> </a>
      dataSize = StrLen((Char*)dataBufferP);<a name="1022572"> </a>
 <a name="1022573"> </a>
/* have the network interface send the user name to the host 
*/<a name="1022574"> </a>
      error = (selectorTypeP)(execPtr-&gt;handle, <a name="1022575"> </a>
         pluginNetLibWriteBytes, (void*)dataBufferP, 
&amp;dataSize, 0, <a name="1022576"> </a>
         NULL);<a name="1022577"> </a>
 <a name="1022578"> </a>
   return error;<a name="1022579"> </a>
   }<a name="1022580"> </a>
}<a name="1022581"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1022582"> </a>If your command needs to interact with the user, it must do so through the network interface. When the connection attempt is taking place, the user sees either the Network preferences panel or the HotSync application. Your plugin does not have control of the screen, so you cannot simply display a form. You have two options: </p>
<ul type="disc">
  <li><a name="1022583"> </a>The network interface can display a prompt for you and return the value that the user enters in response. It can also query the Network preferences panel to see if the user cancelled the connection attempt. 
  <li><a name="1022584"> </a>If you want to do more than simply display a prompt or check the cancel status, you can use the command <code>pluginNetLibCallUIProc</code> to display a form and call your own user interface routine. 
</ul>

<p><a name="1022587"> </a>To use <code>pluginNetLibCallUIProc</code>, you must do the following: </p>
<ol type="1">
  <li value="1"><a name="1022588"> </a>Initialize the form using a form resource that you've created. 
  <li value="2"><a name="1022589"> </a>Create a struct that contains your form's handle and any other values that you are going to need in your user interface routine. 
  <li value="3"><a name="1022590"> </a>Call the network interface's callback function with the <code>pluginNetLibCallUIProc</code> command, the structure with the form's handle and other pertinent information, and the address of a function in your plugin that will perform the user interface routine. This function should take one argument&#8212;the struct you've passed to the network interface&#8212;and return <code>void</code>. 
  <li value="4"><a name="1022591"> </a>When the call to the network interface returns, close the form. 
</ol>

<p><a name="1029496"> </a>For an example of using <code>pluginNetLibCallUIProc</code>, see the functions <code>WaitForData</code> and <code>promptUser</code> in the example code <code>ScriptPlugin.c</code>. </p>
<h3 class="hbH3">
  <a name="1030324"> </a>Socket Notices <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1030615"> </a>Palm OS Garnet version 5.4 introduces a mechanism that allows an application to respond when a socket changes state&#8212;for instance, when a socket is closed or when the socket receives TCP data. This mechanism is called a <b>socket notice</b>. Your application registers for a socket notice by calling <a href="../PalmOSReference/NetLibrary.html#1087723"><code>NetLibSocketOptionSet()</code></a> and passing in the <span style="color: #000000;  font-style: italic; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">condition</span> (the socket state changes you are interested in) and the <span style="color: #000000;  font-style: italic; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">notice type</span> (the means by which Palm OS communicates with your application&#8212;for instance, by sending a notification).</p>

<div><hr>
  <a name="1030620"> </a> <b>NOTE: </b> In Palm OS Garnet version 5.4, socket notices can communicate with your application <i>only</i> through notifications. No other means of receiving socket notices is currently supported.
<hr>
</div>

<h4 class="hcH4">
  <a name="1030330"> </a>Socket Notifications
</h4>

<p><a name="1030331"> </a>The short-hand term for "socket notices that send notifications" is <b>socket notifications</b>. This section describes how to use socket notifications in your application:</p>
<ol type="1">
  <li value="1"><a name="1030332"> </a>Define a socket notification constant&#8212;the <b>notify type</b>. This constant must be unique to your application.
  <li value="2"><a name="1030333"> </a>Register for the notification by calling <a href="../PalmOSReference/NotifyMgr.html#1024486"><code>SysNotifyRegister()</code></a> and passing in your socket notification constant and any data your application will need to handle the notification. The other parameters you pass in are determined by whether you are registering to receive a notification through a <code>sysAppLaunchCmdNotify</code> launch code or a callback function.
  <li value="3"><a name="1030340"> </a>Prime the socket notice system by calling <code>NetLibSocketOptionSet()</code>. Among other parameters, you pass in a pointer to an option value whose type is <a href="../PalmOSReference/NetLibrary.html#1144345"><code>NetSocketNoticeType</code></a>. This structure tells Net Library the following information:
  <ol type="a">
    <li><a name="1030344"> </a>Notice type. Use the constant <code>netSocketNoticeNotify </code>to identify a socket notice that uses notifications. This constant is defined in <a href="../PalmOSReference/NetLibrary.html#1160728"><code>NoticeTypeEnum</code></a>)
    <li><a name="1030348"> </a>Notify type. This is the socket notification constant you defined for your application.
    <li><a name="1030349"> </a>Conditions. These are flags that indicate which socket changes you are interested in. If you are interested in all socket conditions, use the value <code>0xFFFFFFFF</code>. See <a href="../PalmOSReference/NetLibrary.html#1154370">"Socket Notice Trigger Conditions"</a> of <i>Palm OS Programmer's API Reference</i>.
  </ol>
  <li value="4"><a name="1030356"> </a>Handle the notification. 
  <ol type="a">
    <li><a name="1030357"> </a>Cast the incoming parameter block as a <code>SysNotifyNetSocketType</code>. (For details on this type, see <a href="../PalmOSReference/Notifications.html#1068632">"Socket Notification Specific Data"</a> of <i>Palm OS Programmer's API Reference</i>).
    <li><a name="1030364"> </a>Find out what condition(s) triggered the notification. Do this by checking the <code>condition</code> field of the <code>SysNotifyNetSocketType</code> structure.
    <li><a name="1030365"> </a>Perform the appropriate actions.
  </ol>
  <li value="5"><a name="1030366"> </a>Re-prime the socket notice system in order to receive the next notification. Normally, you do that by calling <code>NetLibSocketOptionSet()</code> in your notification handler.
</ol>

<h4 class="hcH4">
  <a name="1030367"> </a>Notice vs. Notification
</h4>

<p><a name="1030368"> </a>The terms <b>notices</b> and <b>notifications</b> refer to related, but distinct things. A <b>socket notice</b> is net library functionality that communicates to an application when a socket condition has changed. There are various means by which this communication might take place, not all of which are currently implemented. Currently, net library causes the system to send a <b>notification </b>to your application. In future, however, Net Library might be able to post an event to the event queue or to send a message to a specified mailbox ID. </p>

<h4 class="hcH4">
  <a name="1030371"> </a>Unsupported Code in NetMgr.h
</h4>

<p><a name="1030372"> </a>If you are perusing <code>NetMgr.h</code>, you may encounter code that is currently not supported but that may be supported in future versions of Palm OS. For the present, you may ignore such code, including:</p>
<ul type="disc">
  <li><a name="1030373"> </a>Most of the <code>NoticeTypeEnum</code> definition. Only <code>netSocketNoticeNotify</code> can currently be used. The other enum constants&#8212;such as <code>netSocketNoticeEvent</code> and <code>netSocketNoticeCallback</code>&#8212;are not available in Palm OS Garnet version 5.4. 
</ul>

<div><hr>
  <a name="1030581"> </a> <b>NOTE: </b> The <i>socket notice</i> callback is not supported in Palm OS Garnet version 5.4. Do not confuse it with the <i>notification</i> callback, which is implemented as indicated in <a href="NetworkCommunication.html#1030330">"Socket Notifications."</a>
<hr>
</div>
<ul type="disc">
  <li><a name="1030374"> </a>The <code>NetSocketNoticeEventType</code>, <code>NetSocketNoticeMailboxType</code>, <code>NetSocketNoticeCallbackPtr</code> definitions. These are not currently supported.
  <li><a name="1030375"> </a>Most of the <code>notice</code> union in <code>NetSocketNoticeType</code>. Only the <code>notify</code> structure of that union is supported. The <code>event</code>, <code>mailbox</code>, <code>callback</code>, and <code>wake</code> structures are not supported.
</ul>

<h4 class="hcH4">
  <a name="1030376"> </a>Related Sections
</h4>

<p><a name="1030377"> </a>In order to make socket notifications work, you will need to understand how regular notifications work. For that purpose, consult the following:</p>
<ul type="disc">
  <li><a name="1030383"> </a><a href="../PalmOSCompanion/AppStartupAndStop.html#997938">"Notifications"</a>section in <a href="../PalmOSCompanion/AppStartupAndStop.html#997517">Chapter 2, "Application Startup and Stop,"</a> of <i>Palm OS Programmer's Companion</i>, vol. I
  <li><a name="1030393"> </a><a href="../PalmOSReference/Notifications.html#1046866">Chapter 3, "Notifications,"</a> in <i>Palm OS Programmer's API Reference</i>.
  <li><a name="1030400"> </a><a href="../PalmOSReference/NotifyMgr.html#1024252">Chapter 43, "Notification Manager,"</a> in <i>Palm OS Programmer's API Reference</i>.
</ul>

<h2 class="haH2">
  <a name="1030251"> </a>Internet Library <a href="#1021267"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="1022595"> </a>The Internet library provides Palm OS applications easy access to World Wide Web documents. The Internet library uses the net library for basic network access and builds on top of the net library's socket concept to provide a socket-like API to higher level internet protocols like HTTP and HTTPS.</p>

<p><a name="1022596"> </a>Using the Internet library, an application can access a web page with as little as three calls (<a href="../PalmOSReference/INetLib.html#998571"><code>INetLibURLOpen</code></a>, <a href="../PalmOSReference/INetLib.html#998186"><code>INetLibSockRead</code></a>, and <a href="../PalmOSReference/INetLib.html#997438"><code>INetLibSockClose</code></a>). The Internet library also provides a more advanced API for those applications that need finer control.</p>

<div><hr>
  <a name="1022609"> </a> <b>NOTE: </b> The information in this section applies only to version 3.2 or later of the Palm OS on Palm VII devices. These features are implemented only if the <a href="../PalmOSReference/CompatibilityApdx.html#994199">Wireless Internet Feature Set</a> is present.
<hr>
</div>

<div><hr>
  <a name="1022616"> </a> <span class="warning">WARNING! </span> In future OS versions, PalmSource, Inc. does not intend to support or provide backward compatibility for the Internet library API.
<hr>
</div>

<p><a name="1022617"> </a>The Internet library is implemented as a system library that is installed at runtime and doesn't have to be present for the system to work properly.</p>

<p><a name="1022618"> </a>This section describes how to use the Internet library in your application. It covers:</p>
<ul type="disc">
  <li><a name="1022622"> </a><a href="NetworkCommunication.html#1022648">System Requirements</a>
  <li><a name="1022626"> </a><a href="NetworkCommunication.html#1022661">Initialization and Setup</a>
  <li><a name="1022630"> </a><a href="NetworkCommunication.html#1022689">Accessing Web Pages</a>
  <li><a name="1022634"> </a><a href="NetworkCommunication.html#1022717">Asynchronous Operation</a>
  <li><a name="1022638"> </a><a href="NetworkCommunication.html#1022743">Using the Low Level Calls</a>
  <li><a name="1022642"> </a><a href="NetworkCommunication.html#1022774">Cache Overview</a>
  <li><a name="1022646"> </a><a href="NetworkCommunication.html#1022791">Internet Library Network Configurations</a>
</ul>
<h3 class="hbH3">
  <a name="1022648"> </a>System Requirements <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022649"> </a>The Internet library is available only on version 3.2 or later of the Palm OS on Palm VII devices. Before making any Internet library calls, ensure that the Internet library is available. You can be sure it is available by using the following <a href="../PalmOSReference/FeatureManager.html#1036943"><code>FtrGet</code></a> call:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = FtrGet(inetLibFtrCreator,
inetFtrNumVersion, &amp;value);<a name="1022656"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1022657"> </a>If the Internet library is installed, the <code>value</code> parameter will be non-zero and the returned error will be zero (for no error).</p>

<p><a name="1022659"> </a>When the Internet library is present and running, it requires an estimated additional 1 KB of RAM, beyond the net library. More additional memory is used for the security library, if that is used (when accessing secure sites), and for opening a cache database, if that is used.</p>
<h3 class="hbH3">
  <a name="1022661"> </a>Initialization and Setup <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022662"> </a>Before using the Internet library, an application must call <a href="../PalmOSReference/SystemManager.html#1076670"><code>SysLibFind</code></a> to obtain a library reference number, as follows:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = SysLibFind("INet.lib", &amp;libRefNum)<a name="1022666"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1022670"> </a>Next, it must call <a href="../PalmOSReference/INetLib.html#997248"><code>INetLibOpen</code></a> to allocate an <code>inetH</code> handle. The <code>inetH</code> handle holds all application specific environment settings and each application that uses the Internet library gets its own private <code>inetH</code> handle. Any calls that change the default behavior of the Internet library affect environment settings stored in the application's own <code>inetH</code> structure, so these changes will not affect other applications that might be using the Internet library at the same time.</p>

<p><a name="1022671"> </a><code>INetLibOpen</code> also opens the net library for the application. In addition, the application can tell <code>INetLibOpen</code> the type of network service it prefers: wireline or wireless. <code>INetLibOpen</code> queries the available network interfaces and attaches the appropriate one(s) for the desired type of service. When the application calls <a href="../PalmOSReference/INetLib.html#996782"><code>INetLibClose</code></a>, the previous interface configuration is restored. For more information on configurations, see the section <a href="NetworkCommunication.html#1022791">"Internet Library Network Configurations"</a>. </p>

<p><a name="1022678"> </a>The Internet library gets some of its default behavior from the system preferences database, and some of these preference settings are made by the user via the Wireless preferences panel. The preferences set by this panel include the proxy server to use and a setting that determines whether or not the user is warned when the device ID is sent. Other settings stored in the preferences database come from Internet library network configurations (see <a href="NetworkCommunication.html#1022791">"Internet Library Network Configurations"</a>). All these settings can be queried and/or overridden by each application through the <a href="../PalmOSReference/INetLib.html#997314"><code>INetLibSettingGet</code></a> and <a href="../PalmOSReference/INetLib.html#997374"><code>INetLibSettingSet</code></a> calls. However, any changes made by an application are not stored into the system preferences, but only take effect while that <code>inetH</code> handle is open.</p>
<h3 class="hbH3">
  <a name="1022689"> </a>Accessing Web Pages <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022690"> </a>In the Palm.Net environment, all HTML documents are dynamically compressed by the Palm Web Clipping Proxy server before being transmitted to the Palm Powered handheld.</p>

<p><a name="1022692"> </a>The procedure for reading a page from the network operates as follows. First, the application passes the desired URL to the <a href="../PalmOSReference/INetLib.html#998571"><code>INetLibURLOpen</code></a> routine, which creates a socket handle to access that web page. This routine returns immediately before performing any required network I/O. Then the application calls <a href="../PalmOSReference/INetLib.html#998186"><code>INetLibSockRead</code></a> to read the data, followed by <a href="../PalmOSReference/INetLib.html#997438"><code>INetLibSockClose</code></a> to close down the socket. </p>

<p><a name="1022702"> </a>Note that if no data is available to read immediately, <code>INetLibSockRead</code> blocks until at least one byte of data is available to be read. To implement asynchronous operation using events, see the next section, <a href="NetworkCommunication.html#1022717">Asynchronous Operation</a>.</p>

<p><a name="1022706"> </a>If an application requires finer control over the operation, it can replace the call to <code>INetLibURLOpen</code> with other lower-level Internet library calls (<a href="../PalmOSReference/INetLib.html#998120"><code>INetLibSockOpen</code></a>, <a href="../PalmOSReference/INetLib.html#998301"><code>INetLibSockSettingSet</code></a>, etc.) that are described in the section <a href="NetworkCommunication.html#1022743">"Using the Low Level Calls"</a>.</p>
<h3 class="hbH3">
  <a name="1022717"> </a>Asynchronous Operation <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022718"> </a>A major challenge in writing an Internet application is handling the task of accessing content over a slow network while still providing good user-interface response. For example, a user should be able to scroll, select menus, or tap the Cancel button in the middle of a download of a web page.</p>

<p><a name="1022719"> </a>To easily enable this type of functionality, the Internet library provides the <a href="../PalmOSReference/INetLib.html#997191"><code>INetLibGetEvent</code></a> call. This call is designed to replace the <code>EvtGetEvent</code> call that all traditional, non-network Palm OS applications use. The <code>INetLibGetEvent</code> call fetches the next event that needs to be processed, whether that event is a user-interface event like a tap on the screen, or a network event like some data arriving from the remote host that needs to be read. If no events are ready, <code>INetLibGetEvent</code> automatically puts the Palm Powered handheld into low-power mode and blocks until the next event occurs.</p>

<p><a name="1022723"> </a>Using <code>INetLibGetEvent</code> is the preferred way of performing network I/O since it maximizes battery life and user-interface responsiveness. </p>

<p><a name="1022724"> </a>With <code>INetLibGetEvent</code>, the process of accessing a web page becomes only slightly more complicated. Instead of calling <code>INetLibSockRead</code> immediately after <code>INetLibURLOpen</code>, the application should instead return to its event loop and wait for the next event. When it gets a network event that says data is ready at the socket, then it should call <code>INetLibSockRead</code>.</p>

<p><a name="1022725"> </a>There are two types of network events that <code>INetLibGetEvent</code> can return in addition to the standard user-interface events. The first event is a status change event (<a href="../PalmOSReference/EventRef.html#997030"><code>inetSockStatusChangeEvent</code></a>). This event indicates that the status of a socket has changed and the application may want to update its user interface. For example, when calling <code>INetLibURLOpen</code> to access an HTTP server, the status on the socket goes from "finding host," to "connecting with host," to "waiting for data," to "reading data," etc. The event structure associated with an event of this type contains both the socket handle and the new status so that the application can update the user interface accordingly.</p>

<p><a name="1022729"> </a>The second type of event that <code>INetLibGetEvent</code> can return is a data-ready event (<a href="../PalmOSReference/EventRef.html#996971"><code>inetSockReadyEvent</code></a>). This event is returned when data is ready at the socket for reading. This event tells the application that it can call <code>INetLibSockRead</code> and be assured that it will not block while waiting for data to arrive.</p>

<p><a name="1022733"> </a>The general flow of an application that uses the Internet library is to open a URL using <code>INetLibURLOpen</code>, in response to a user command. Then it repeatedly calls <code>INetLibGetEvent</code> to process events from both the user interface and the newly created socket returned by <code>INetLibURLOpen</code>. In response to <code>inetSockStatusChangeEvent</code> events, the application should update the user interface to show the user the current status, such as finding host, connecting to host, reading data, etc. In response to <code>inetSockReadyEvent</code> events, the application should read data from the socket using <code>INetLibSockRead</code>. Finally, when all available data has been read (<code>INetLibSockRead</code> returns 0 bytes read), the application should close the socket using <code>INetLibSockClose</code>.</p>

<p><a name="1022741"> </a>Finally, the convenience call <a href="../PalmOSReference/INetLib.html#998352"><code>INetLibSockStatus</code></a> is provided so that an application can query the status of a socket handle. This call never blocks on network I/O so it is safe to call at any time. It not only returns the current status of the socket but also whether or not it is ready for reading and/or writing. It essentially returns the same information as conveyed via the events <code>inetSockReadyEvent</code> and <code>inetSockStatusChangeEvent</code>. Applications that don't use <code>INetLibGetEvent</code> could repeatedly poll <code>INetLibSockStatus</code> to check for status changes and readiness for I/O, though polling is not recommended.</p>
<h3 class="hbH3">
  <a name="1022743"> </a>Using the Low Level Calls <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022744"> </a>Applications that need finer control than <code>INetLibURLOpen</code> provides can use the lower level calls of the Internet library. These include <a href="../PalmOSReference/INetLib.html#998120"><code>INetLibSockOpen</code></a>, <a href="../PalmOSReference/INetLib.html#997478"><code>INetLibSockConnect</code></a>, <a href="../PalmOSReference/INetLib.html#998301"><code>INetLibSockSettingSet</code></a>, <a href="../PalmOSReference/INetLib.html#997668"><code>INetLibSockHTTPReqCreate</code></a>, <a href="../PalmOSReference/INetLib.html#997557"><code>INetLibSockHTTPAttrGet</code></a>, <a href="../PalmOSReference/INetLib.html#997610"><code>INetLibSockHTTPAttrSet</code></a>, and <a href="../PalmOSReference/INetLib.html#997722"><code>INetLibSockHTTPReqSend</code></a>.</p>

<p><a name="1022766"> </a>A single call to <code>INetLibURLOpen</code> for an HTTP resource is essentially equivalent to this sequence: <code>INetLibSockOpen</code>, <code>INetLibSockConnect</code>, <code>INetLibSockHTTPReqCreate</code>, and <code>INetLibSockHTTPReqSend</code>. These four calls provide the capability for the application to access non-standard ports on the server (if allowed), to modify the default HTTP request headers, and to perform HTTP PUT and POST operations. The only calls here that actually perform network I/O are <code>INetLibSockConnect</code>, which establishes a TCP connection with the remote host, and <code>INetLibSockHTTPReqSend</code>, which sends the HTTP request to the server.</p>

<p><a name="1022767"> </a><code>INetLibSockHTTPAttrSet</code> is provided so that the application can add or modify the default HTTP request headers that <code>INetLibSockHTTPReqCreate</code> creates.</p>

<p><a name="1022768"> </a><code>INetLibSockSettingSet</code> allows an application finer control over the socket settings.</p>

<p><a name="1022772"> </a>Finally, the routine <a href="../PalmOSReference/INetLib.html#998461"><code>IINetLibURLCrack</code></a> is provided as a convenient utility for breaking a URL into its component parts.</p>
<h3 class="hbH3">
  <a name="1022774"> </a>Cache Overview <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022775"> </a>The Internet library maintains a cache database of documents that have been downloaded. This is an LRU (Least Recently Used) cache; that is, the least recently used items are flushed when the cache fills. Whether or not a retrieved page is cached is determined by a flag (<code>inetOpenURLFlagKeepInCache</code>) set in the socket or by <code>INetLibURLOpen</code>. Another flag (<code>inetOpenURLFlagLookInCache</code>) determines if the Internet library should check the cache first when retrieving a URL.</p>

<p><a name="1022776"> </a>The same cache database can be used by any application using the Internet library, so that every application can share the same pool of prefetched documents. Alternately, an application can use a different cache database. The cache database to use is specified in the <code>INetLibOpen</code> call.</p>

<p><a name="1022777"> </a>Generally, a cached item is stored in one or more database records in the same format as it arrives from the server.</p>

<p><a name="1022778"> </a>In the cache used by the Web Clipping Application Viewer application, each record includes a field that contains the "master" URL of the item. This field is set to the URL of the active PQA, so all pages linked from one PQA have the same master URL. This facilitates finding all pages in a hierarchy to build a history list.</p>

<p><a name="1022779"> </a>The Internet library maintains a list of items in the cache. You can retrieve items in this list, or iterate over the whole list, by calling <a href="../PalmOSReference/INetLib.html#996687"><code>INetLibCacheList</code></a>. You can retrieve a cached document directly by using <a href="../PalmOSReference/INetLib.html#996629"><code>INetLibCacheGetObject</code></a>.</p>

<p><a name="1022789"> </a>You can check if a URL is cached by calling <a href="../PalmOSReference/INetLib.html#998524"><code>INetLibURLGetInfo</code></a>.</p>
<h3 class="hbH3">
  <a name="1022791"> </a>Internet Library Network Configurations <a href="#1021267"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="1022792"> </a>The Internet library supports network configurations. A <b>configuration</b> is a specific set of values for several of the Internet library settings (from the <a href="../PalmOSReference/INetLib.html#996186"><code>INetSettingEnum</code></a> type).</p>

<p><a name="1022796"> </a>The Internet library keeps a list of available configurations and aliases to them. There are three built-in configurations:</p>
<ul type="disc">
  <li><a name="1022797"> </a>A wireless configuration that uses the Palm.Net wireless system and the Palm Web Clipping Proxy server.
  <li><a name="1022798"> </a>A wireline configuration that uses the wireline network configuration specified in the Network preferences panel and the Palm Web Clipping Proxy server.
  <li><a name="1022799"> </a>A generic configuration that uses the wireline network configuration specified in the Network preferences panel and no proxy server.
</ul>

<p><a name="1022800"> </a>You can also define your own configuration by modifying an existing one and saving it under a different name.</p>

<p><a name="1022801"> </a>The Internet library also defines several <b>configuration aliases</b> (see <a href="../PalmOSReference/INetLib.html#996487">"Configuration Aliases"</a> in the <i>Palm OS Programmer's API Reference</i>). An alias is a configuration name that simply points to another configuration. You can specify an alias anywhere in the API you would specify a configuration. This facilitates easy re-assignment of the built-in configurations and eliminates having duplicate settings. You assign an alias by using <a href="../PalmOSReference/INetLib.html#996866"><code>INetLibConfigAliasSet</code></a> and can retrieve an alias by using <a href="../PalmOSReference/INetLib.html#996816"><code>INetLibConfigAliasGet</code></a>.</p>

<p><a name="1022814"> </a>For example, to change the default configuration used by the Internet library for a particular kind of connection, you can set up the appropriate values for a connection, save the configuration, and then set the Internet library's default alias configuration to point to your custom configuration. When an application specifies which configuration it wants to use, if it specifies the alias, it will use the custom settings.</p>

<p><a name="1022815"> </a>If you use configurations at all, it will probably be to specify a specific configuration when opening the Internet library via <code>INetLibOpen</code>. The Internet library also contains an API to allow you to manipulate configurations in your application, but doing so is rare. You can list the available configurations (<a href="../PalmOSReference/INetLib.html#997011"><code>INetLibConfigList</code></a>), get a configuration index (<a href="../PalmOSReference/INetLib.html#996967"><code>INetLibConfigIndexFromName</code></a>), select (<a href="../PalmOSReference/INetLib.html#997051"><code>INetLibConfigMakeActive</code></a>) the Internet library network configuration you would prefer to use (wireless, wireline, etc.), rename existing configurations (<a href="../PalmOSReference/INetLib.html#997097"><code>INetLibConfigRename</code></a>), and delete configurations (<a href="../PalmOSReference/INetLib.html#996918"><code>INetLibConfigDelete</code></a>).</p>

<p><a name="1022831"> </a>The configuration functions are provided primarily for use by Preferences panels while editing and saving configurations. The general procedure is to make the configuration active that you want to edit, set the settings appropriately, then save the configuration using <a href="../PalmOSReference/INetLib.html#997149"><code>INetLibConfigSaveAs</code></a>. Note that configuration changes are not saved after the Internet library is closed, unless you call <code>INetLibConfigSaveAs</code>. </p>

<h2 class="haH2">
  <a name="1022836"> </a>Summary of Network Communication <a href="#1021267"><span class="nav">^TOP^</span></a>
</h2>



<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1022839"> </a><b>Net Library Functions</b></p>
    </th>
    <th><p class="tt"><a name="1022841"> </a><b></b></p>
    </th>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1022843"> </a><b>Library Open and Close</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><p class="tt"><a name="1022850"> </a><a href="../PalmOSReference/NetLibrary.html#1084184">NetLibClose</a><br><a href="../PalmOSReference/NetLibrary.html#1084667">NetLibConnectionRefresh</a><br><a href="../PalmOSReference/NetLibrary.html#1084768">NetLibFinishCloseWait</a></p>
    </td>
    <td colspan="1" rowspan="3"><p class="tt"><a name="1022861"> </a><a href="../PalmOSReference/NetLibrary.html#1086179">NetLibOpen</a><br><a href="../PalmOSReference/NetLibrary.html#1086342">NetLibOpenCount</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1022874"> </a><b>Socket Creation and Deletion</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022881"> </a><a href="../PalmOSReference/NetLibrary.html#1087334">NetLibSocketClose</a></p>
    </td>
    <td><p class="tt"><a name="1022886"> </a><a href="../PalmOSReference/NetLibrary.html#1087549">NetLibSocketOpen</a></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1022888"> </a><b>Socket Options</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1022895"> </a><a href="../PalmOSReference/NetLibrary.html#1087652">NetLibSocketOptionGet</a></p>
    </td>
    <td><p class="tt"><a name="1022900"> </a><a href="../PalmOSReference/NetLibrary.html#1087723">NetLibSocketOptionSet</a></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1022902"> </a><b>Socket Connections</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><p class="tt"><a name="1022909"> </a><a href="../PalmOSReference/NetLibrary.html#1087121">NetLibSocketAccept</a><br><a href="../PalmOSReference/NetLibrary.html#1087195">NetLibSocketAddr</a><br><a href="../PalmOSReference/NetLibrary.html#1087258">NetLibSocketBind</a></p>
    </td>
    <td colspan="1" rowspan="3"><p class="tt"><a name="1022920"> </a><a href="../PalmOSReference/NetLibrary.html#1087391">NetLibSocketConnect</a><br><a href="../PalmOSReference/NetLibrary.html#1087462">NetLibSocketListen</a><br><a href="../PalmOSReference/NetLibrary.html#1088094">NetLibSocketShutdown</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1022936"> </a><b>Send and Receive Routines</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><p class="tt"><a name="1022943"> </a><a href="../PalmOSReference/NetLibrary.html#1084703">NetLibDmReceive</a><br><a href="../PalmOSReference/NetLibrary.html#1086371">NetLibReceive</a><br><a href="../PalmOSReference/NetLibrary.html#1086458">NetLibReceivePB</a></p>
    </td>
    <td colspan="1" rowspan="3"><p class="tt"><a name="1022954"> </a><a href="../PalmOSReference/NetLibrary.html#1086663">NetLibSend</a><br><a href="../PalmOSReference/NetLibrary.html#1086775">NetLibSendPB</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1022967"> </a><b>Utilities</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="7"><p class="tt"><a name="1022974"> </a><a href="../PalmOSReference/NetLibrary.html#1084072">NetHToNL</a><br><a href="../PalmOSReference/NetLibrary.html#1084101">NetHToNS</a><br><a href="../PalmOSReference/NetLibrary.html#1084129">NetLibAddrAToIN</a><br><a href="../PalmOSReference/NetLibrary.html#1084155">NetLibAddrINToA</a><br><a href="../PalmOSReference/NetLibrary.html#1084795">NetLibGetHostByAddr</a><br><a href="../PalmOSReference/NetLibrary.html#1084889">NetLibGetHostByName</a><br><a href="../PalmOSReference/NetLibrary.html#1084979">NetLibGetMailExchangeByName</a></p>
    </td>
    <td colspan="1" rowspan="7"><p class="tt"><a name="1022997"> </a><a href="../PalmOSReference/NetLibrary.html#1085067">NetLibGetServByName</a><br><a href="../PalmOSReference/NetLibrary.html#1085869">NetLibMaster</a><br><a href="../PalmOSReference/NetLibrary.html#1086574">NetLibSelect</a><br><a href="../PalmOSReference/NetLibrary.html#1088147">NetLibTracePrintF</a><br><a href="../PalmOSReference/NetLibrary.html#1088190">NetLibTracePutS</a><br><a href="../PalmOSReference/NetLibrary.html#1088228">NetNToHL</a><br><a href="../PalmOSReference/NetLibrary.html#1088259">NetNToHS</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023041"> </a><b>Setup</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="5"><p class="tt"><a name="1023048"> </a><a href="../PalmOSReference/NetLibrary.html#1085120">NetLibIFAttach</a><br><a href="../PalmOSReference/NetLibrary.html#1085167">NetLibIFDetach</a><br><a href="../PalmOSReference/NetLibrary.html#1085208">NetLibIFDown</a><br><a href="../PalmOSReference/NetLibrary.html#1085260">NetLibIFGet</a><br><a href="../PalmOSReference/NetLibrary.html#1085312">NetLibIFSettingGet</a></p>
    </td>
    <td colspan="1" rowspan="5"><p class="tt"><a name="1023065"> </a><a href="../PalmOSReference/NetLibrary.html#1085735">NetLibIFSettingSet</a><br><a href="../PalmOSReference/NetLibrary.html#1085807">NetLibIFUp</a><br><a href="../PalmOSReference/NetLibrary.html#1086876">NetLibSettingGet</a><br><a href="../PalmOSReference/NetLibrary.html#1087056">NetLibSettingSet</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
</table>

</div>



<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1023094"> </a><b>Network Utilities</b></p>
    </th>
    <th><p class="tt"><a name="1023096"> </a><b></b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1023101"> </a><a href="../PalmOSReference/NetworkUtils.html#1108889">NetUReadN</a></p>
    </td>
    <td><p class="tt"><a name="1023106"> </a><a href="../PalmOSReference/NetworkUtils.html#1108919">NetUTCPOpen</a><br><a href="../PalmOSReference/NetworkUtils.html#1109033">NetUWriteN</a></p>
    </td>
  </tr>
</table>

</div>



<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1023113"> </a><b>Internet Library Functions</b></p>
    </th>
    <th><p class="tt"><a name="1023115"> </a><b></b></p>
    </th>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023117"> </a><b>Library Open and Close</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1023124"> </a><a href="../PalmOSReference/INetLib.html#996782">INetLibClose</a></p>
    </td>
    <td><p class="tt"><a name="1023129"> </a><a href="../PalmOSReference/INetLib.html#997248">INetLibOpen</a></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023131"> </a><b>Settings</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1023138"> </a><a href="../PalmOSReference/INetLib.html#997314">INetLibSettingGet</a></p>
    </td>
    <td><p class="tt"><a name="1023143"> </a><a href="../PalmOSReference/INetLib.html#997374">INetLibSettingSet</a></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023145"> </a><b>Event Management</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1023152"> </a><a href="../PalmOSReference/INetLib.html#997191">INetLibGetEvent</a></p>
    </td>
    <td><p class="tt"><a name="1023154"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023156"> </a><b>High-Level Socket Calls</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="2"><p class="tt"><a name="1023163"> </a><a href="../PalmOSReference/INetLib.html#997438">INetLibSockClose</a><br><a href="../PalmOSReference/INetLib.html#998186">INetLibSockRead</a></p>
    </td>
    <td colspan="1" rowspan="2"><p class="tt"><a name="1023171"> </a><a href="../PalmOSReference/INetLib.html#998571">INetLibURLOpen</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023177"> </a><b>Low-Level Socket Calls</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><p class="tt"><a name="1023184"> </a><a href="../PalmOSReference/INetLib.html#997478">INetLibSockConnect</a><br><a href="../PalmOSReference/INetLib.html#998120">INetLibSockOpen</a><br><a href="../PalmOSReference/INetLib.html#998252">INetLibSockSettingGet</a></p>
    </td>
    <td colspan="1" rowspan="3"><p class="tt"><a name="1023195"> </a><a href="../PalmOSReference/INetLib.html#998301">INetLibSockSettingSet</a><br><a href="../PalmOSReference/INetLib.html#998352">INetLibSockStatus</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023208"> </a><b>HTTP Interface</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="2"><p class="tt"><a name="1023215"> </a><a href="../PalmOSReference/INetLib.html#997557">INetLibSockHTTPAttrGet</a><br><a href="../PalmOSReference/INetLib.html#997610">INetLibSockHTTPAttrSet</a></p>
    </td>
    <td colspan="1" rowspan="2"><p class="tt"><a name="1023223"> </a><a href="../PalmOSReference/INetLib.html#997668">INetLibSockHTTPReqCreate</a><br><a href="../PalmOSReference/INetLib.html#997722">INetLibSockHTTPReqSend</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023232"> </a><b>Utilities</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="2"><p class="tt"><a name="1023239"> </a><a href="../PalmOSReference/INetLib.html#996750">INetLibCheckAntennaState</a> <br><a href="../PalmOSReference/INetLib.html#998461">IINetLibURLCrack</a><br><a href="../PalmOSReference/INetLib.html#998524">INetLibURLGetInfo</a></p>
    </td>
    <td colspan="1" rowspan="2"><p class="tt"><a name="1023250"> </a><a href="../PalmOSReference/INetLib.html#998639">INetLibURLsAdd</a><br><a href="../PalmOSReference/INetLib.html#998711">INetLibWiCmd</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023259"> </a><b>Cache Interface</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1023266"> </a><a href="../PalmOSReference/INetLib.html#996629">INetLibCacheGetObject</a></p>
    </td>
    <td><p class="tt"><a name="1023271"> </a><a href="../PalmOSReference/INetLib.html#996687">INetLibCacheList</a></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><p class="tt"><a name="1023273"> </a><b>Configuration</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="4"><p class="tt"><a name="1023280"> </a><a href="../PalmOSReference/INetLib.html#996816">INetLibConfigAliasGet</a><br><a href="../PalmOSReference/INetLib.html#996866">INetLibConfigAliasSet</a><br><a href="../PalmOSReference/INetLib.html#996918">INetLibConfigDelete</a><br><a href="../PalmOSReference/INetLib.html#996967">INetLibConfigIndexFromName</a></p>
    </td>
    <td colspan="1" rowspan="4"><p class="tt"><a name="1023294"> </a><a href="../PalmOSReference/INetLib.html#997011">INetLibConfigList</a><br><a href="../PalmOSReference/INetLib.html#997051">INetLibConfigMakeActive</a><br><a href="../PalmOSReference/INetLib.html#997097">INetLibConfigRename</a><br><a href="../PalmOSReference/INetLib.html#997149">INetLibConfigSaveAs</a></p>
    </td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
</table>

</div>


<p><a name="1023317"> </a></p>
 

<hr> 
<p class="FNFootnote">
<a name="1021770"> </a><a href="#1021761">1</a>. Except the trace settings. These settings are global&#8212;they are not different for different configurations.</p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996-2004, PalmSource, Inc. and its affiliates.  All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Companion2Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="Companion2TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BTCompanion.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SslConcepts.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Companion2IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>