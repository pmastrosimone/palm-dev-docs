<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Exchange Library</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:10:45">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1244433"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">58  Exchange Library</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ExchangeManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="IRLib.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Reference_Front.html">Palm OS® Programmer's API Reference</a></p>
			<p class="SideTOC1-PartTab">Palm OS® 5 SDK </p>
			<p class="SideTOC1-PartTab">Part III: Communications</a> </p>
			<p class="SideTOC1"><a href="ExgLibAPI.html">58  Exchange Library</a></p>
			
<p class="SideTOC2">
<a href="#1244441">Exchange Library Functions
</a></p>

<p class="SideTOC3">
<a href="#1244444">ExgLibAccept
</a></p>

<p class="SideTOC3">
<a href="#1244482">ExgLibClose
</a></p>

<p class="SideTOC3">
<a href="#1244496">ExgLibConnect
</a></p>

<p class="SideTOC3">
<a href="#1244541">ExgLibControl
</a></p>

<p class="SideTOC3">
<a href="#1244574">ExgLibDisconnect
</a></p>

<p class="SideTOC3">
<a href="#1244630">ExgLibGet
</a></p>

<p class="SideTOC3">
<a href="#1244670">ExgLibHandleEvent
</a></p>

<p class="SideTOC3">
<a href="#1244691">ExgLibOpen
</a></p>

<p class="SideTOC3">
<a href="#1244705">ExgLibPut
</a></p>

<p class="SideTOC3">
<a href="#1244764">ExgLibReceive
</a></p>

<p class="SideTOC3">
<a href="#1244805">ExgLibRequest
</a></p>

<p class="SideTOC3">
<a href="#1244834">ExgLibSend
</a></p>

<p class="SideTOC3">
<a href="#1244873">ExgLibSleep
</a></p>

<p class="SideTOC3">
<a href="#1244890">ExgLibWake
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1244434"> </a>The Exchange Library API described in this chapter and declared in <span style="font-family: monospace">ExgLib.h</span> specifies a minimal set of functions that all exchange libraries must implement. This chapter is directed towards developers who use or create exchange libraries. Developers creating an exchange library should also read the <a href="ExchangeLibraries.html#975845">Exchange Libraries</a> chapter of the <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>.
</p>

<h2 class="HaHeadA">
  <a name="1244441"> </a>Exchange Library Functions 
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1244444"> </a>ExgLibAccept
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244445"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244446"> </a>Accept an incoming connection.
</p>
<h4 class="RefSide">
  <a name="1244447"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244448"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244449"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244450"> </a>Err ExgLibAccept(UInt16 libRefnum, ExgSocketType *exgSocketP)
</p>
<h4 class="RefSide">
  <a name="1244451"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244452"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244453"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">exgSocketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>).</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244457"> </a>Result 
</h4>
<p class="Body">
  <a name="1244458"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. <span style="font-family: monospace">exgErrNotSupported</span> is returned if a preview is in progress and the exchange library does not support preview. Other error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244459"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244463"> </a>The Exchange Manager's <a href="ExchangeManager.html#1233284"><span style="font-family: monospace">ExgAccept</span></a> function simply calls <span style="font-family: monospace">ExgLibAccept</span> in the exchange library identified by the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgAccept</span>. An application calls the Exchange Manager's <span style="font-family: monospace">ExgAccept</span> function when:
</p>

  <a name="1244467"> </a><p class="B1Bullet"> &#8226; The application wants to initiate a connection to receive data, which it does in response to <span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span>.</p>

  <a name="1244468"> </a><p class="B1Bullet"> &#8226; The application wants to initiate a connection to receive a preview of the data, which it does in response to <span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span>.</p>
<p class="Body">
  <a name="1244469"> </a>Any implementation of <span style="font-family: monospace">ExgLibAccept</span> should update any progress dialogs to indicate that data is being accepted (or received) into an application.
</p>
<h4 class="RefSide">
  <a name="1244470"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244474"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1244475"> </a>See Also 
</h4>
<p class="Body">
  <a name="1244479"> </a><a href="ExgLibAPI.html#1244705"><span style="font-family: monospace">ExgLibPut</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1244482"> </a>ExgLibClose
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244483"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244484"> </a>Library-specific. Although this function is not called by the Exchange Manager, all shared libraries normally implement it.
</p>
<h4 class="RefSide">
  <a name="1244485"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244486"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244487"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244488"> </a>Err ExgLibClose (UInt16 libRefnum)
</p>
<h4 class="RefSide">
  <a name="1244490"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244491"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244492"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244493"> </a>Exchange libraries are free to implement this function for internal or external use. The Exchange Manager does not call it.
</p>

<h2 class="HBHeadB">
  <a name="1244496"> </a>ExgLibConnect
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244497"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244498"> </a>Open a connection in preparation for sending or receiving objects.
</p>
<h4 class="RefSide">
  <a name="1244499"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244500"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244501"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244502"> </a>Err ExgLibConnect(UInt16 libRefNum,<br>ExgSocketType *exgSocketP)
</p>
<h4 class="RefSide">
  <a name="1244503"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244504"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefNum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244508"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">exgSocketP</span></td><td valign="top">A pointer to an <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure identifying the socket through which objects will be sent or received.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244509"> </a>Result 
</h4>
<p class="Body">
  <a name="1244510"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. If <span style="font-family: monospace">ExgLibConnect</span> is not supported by this library, this function returns <span style="font-family: monospace">exgErrNotSupported</span>; if its use is optional, <span style="font-family: monospace">errNone</span> is returned. Other error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244511"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244512"> </a>The Exchange Manager may call this function to initiate a connection for sending multiple objects or for performing two-way communications. Some exchange libraries support sending multiple objects but do not support this call. See <a href="ExchangeManagerConcept.html#970558">"Sending Multiple Objects"</a> of <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i> for more information. 
</p>
<p class="Body">
  <a name="1244519"> </a>Not all exchange libraries support this operation. In this case, the first call to <a href="ExgLibAPI.html#1244705"><span style="font-family: monospace">ExgLibPut</span></a> must clean up after itself before returning an error. The exchange library should not expect to get an <a href="ExgLibAPI.html#1244574"><span style="font-family: monospace">ExgLibDisconnect</span></a> call.
</p>
<p class="Body">
  <a name="1244526"> </a>If <span style="font-family: monospace">ExgLibConnect</span> is supported and an application calls <a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a>, the exchange library should delay any cleanup until <span style="font-family: monospace">ExgLibDisconnect</span>, unless <span style="font-family: monospace">ExgLibConnect</span> returns an error, in which case it should clean up after itself. The library can expect to get an <span style="font-family: monospace">ExgLibDisconnect</span> call if it returns <span style="font-family: monospace">errNone</span> from <span style="font-family: monospace">ExgLibConnect</span>. If the application does not call <span style="font-family: monospace">ExgConnect</span>, the first call to <span style="font-family: monospace">ExgLibPut</span> must clean up after itself before returning an error and the exchange library should not expect to get an <span style="font-family: monospace">ExgLibDisconnect</span> call.
</p>
<p class="Body">
  <a name="1244530"> </a>The Exchange Manager's <span style="font-family: monospace">ExgConnect</span> function calls <span style="font-family: monospace">ExgLibConnect</span> in the exchange library identified by the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgConnect</span>. If <span style="font-family: monospace">ExgLibConnect</span> is implemented to return <span style="font-family: monospace">exgErrNotEnoughPower</span>, the Exchange Manager puts up an alert, so there is no need for the exchange library to do so. Other error codes are not treated specially by the Exchange Manager; the exchange library must put up its own alerts when appropriate.
</p>
<p class="Body">
  <a name="1244534"> </a>The exchange library may prompt the user for addressing information.
</p>
<h4 class="RefSide">
  <a name="1244535"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244539"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244541"> </a>ExgLibControl
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244542"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244543"> </a>Supply information about the exchange library.
</p>
<h4 class="RefSide">
  <a name="1244544"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244545"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244546"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244548"> </a>Err ExgLibControl(UInt16 libRefNum, UInt16 op, void *valueP, UInt16 *valueLenP)
</p>
<h4 class="RefSide">
  <a name="1244549"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244550"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefNum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244551"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">op</span></td><td valign="top">The operation to perform.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244552"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">valueP</span></td><td valign="top">An operation specific parameter. See comments below.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244553"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">valueLenP</span></td><td valign="top">An operation specific parameter. See comments below.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244554"> </a>Result 
</h4>
<p class="Body">
  <a name="1244555"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. <span style="font-family: monospace">exgErrNotSupported</span> is returned if the specified operation is not supported by the exchange library. <span style="font-family: monospace">exgErrBadParam</span> is returned if the parameters (<span style="font-family: monospace">valueP</span> and <span style="font-family: monospace">valueLenP</span>) are not appropriate for the operation. Additional error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244556"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244557"> </a><span style="font-family: monospace">ExgLibControl</span> is a general purpose function that performs various minor operations based upon a selector. E<span style="font-family: monospace">xgMgr.h</span> defines three selectors: <span style="font-family: monospace">exgLibCtlGetTitle</span>, which should be supported by all exchange libraries, <span style="font-family: monospace">exgLibCtlGetVersion</span>, and <span style="font-family: monospace">exgLibCtlGetPreview</span>. Additional library-specific selectors should be numbered starting at <span style="font-family: monospace">exgLibCtlSpecificOp</span> (0x8000).
</p>
<p class="Body">
  <a name="1244558"> </a>Upon receiving <span style="font-family: monospace">exgLibCtlGetTitle</span>, the exchange library must return a library title suitable for use in Exchange Manager dialogs. Exchange libraries that are built as applications should generally return their <span style="font-family: monospace">'tAIN'</span> resource as their title. Be sure that the title returned through <span style="font-family: monospace">valueP</span> honors the maximum length specified in <span style="font-family: monospace">valueLenP</span>. 
</p>
<p class="Body">
  <a name="1244559"> </a>An exchange library that implements the Palm OS 4.0 version of the Exchange Library API needn't do anything special upon receiving <span style="font-family: monospace">exgLibCtlGetVersion</span>; it should simply return <span style="font-family: monospace">exgErrNotSupported</span>. Otherwise, set <span style="font-family: monospace">valueP</span> to a two-byte value indicating the API version number and return <span style="font-family: monospace">errNone</span>. Note that a version number of zero corresponds to the Palm OS 4.0 version of the Exchange Library API.
</p>
<p class="Body">
  <a name="1244560"> </a>The <span style="font-family: monospace">exgLibCtlGetPreview</span> operation is used by the Exchange Manager to determine whether a given exchange library supports preview. The Exchange Manager assumes that an exchange library supports preview if the exchange library doesn't implement this operation. To indicate that a library does not support preview, set <span style="font-family: monospace">valueP</span> to <span style="font-family: monospace">false</span> and return <span style="font-family: monospace">errNone</span>.
</p>
<p class="Body">
  <a name="1244564"> </a>The Exchange Manager's <a href="ExchangeManager.html#1233463"><span style="font-family: monospace">ExgControl</span></a> function simply calls <span style="font-family: monospace">ExgLibControl</span> in the exchange library identified by the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgControl</span>.
</p>
<h4 class="RefSide">
  <a name="1244568"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244572"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244574"> </a>ExgLibDisconnect
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244575"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244579"> </a>Disconnect a connection made with <a href="ExgLibAPI.html#1244496"><span style="font-family: monospace">ExgLibConnect</span></a>, <a href="ExgLibAPI.html#1244444"><span style="font-family: monospace">ExgLibAccept</span></a>, <a href="ExgLibAPI.html#1244705"><span style="font-family: monospace">ExgLibPut</span></a>, or <a href="ExgLibAPI.html#1244630"><span style="font-family: monospace">ExgLibGet</span></a>.
</p>
<h4 class="RefSide">
  <a name="1244589"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244590"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244591"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244593"> </a>Err ExgLibDisconnect(UInt16 libRefnum, ExgSocketType *exgSocketP, Err error)
</p>
<h4 class="RefSide">
  <a name="1244594"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244595"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244599"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">exgSocketP</span></td><td valign="top">A pointer to an <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure identifying the socket connection to be disconnected.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244600"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">error</span></td><td valign="top">The current error state. Used to indicate why the connection is being broken, for example, user cancel or out of memory.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244601"> </a>Result 
</h4>
<p class="Body">
  <a name="1244602"> </a>Typically the same error code passed in. However, this function may return an error even if <span style="font-family: monospace">errNone</span> is passed in.
</p>
<h4 class="RefSide">
  <a name="1244603"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244604"> </a><span style="font-family: monospace">ExgLibDisconnect</span> may be used to finish reading the data during a preview; in this case, the connection, if any, is not shut down.
</p>
<p class="Body">
  <a name="1244605"> </a>Applications call <span style="font-family: monospace">ExgLibDisconnect</span> when all data has been sent or the application wants to stop the send process. If the send data process is not completed, the caller should pass an error parameter indicating why the operation was stopped. <span style="font-family: monospace">ExgLibDisconnect</span> is responsible for completing the operation and closing any communication ports if necessary. If data was buffered for sending in <span style="font-family: monospace">ExgLibSend</span>, then the disconnect process may actually perform the entire transmit operation. It is important to note that the <span style="font-family: monospace">ExgLibDisconnect</span> function can be called for an <span style="font-family: monospace">ExgLibPut</span>, <span style="font-family: monospace">ExgLibAccept</span> or <span style="font-family: monospace">ExgLibGet</span> function. So it is equally important to keep track of the current operation in the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>. If dialogs are displayed, this function must update them as appropriate. If there are errors, <span style="font-family: monospace">ExgLibDisconnect</span> should display them (if allowed by the application).
</p>
<p class="Body">
  <a name="1244615"> </a>If <a href="ExgLibAPI.html#1244496"><span style="font-family: monospace">ExgLibConnect</span></a> is not supported, the first call to <a href="ExgLibAPI.html#1244705"><span style="font-family: monospace">ExgLibPut</span></a> must clean up after itself before returning an error and the exchange library should not expect to get an <span style="font-family: monospace">ExgLibDisconnect</span> call.
</p>
<p class="Body">
  <a name="1244616"> </a>If <span style="font-family: monospace">ExgLibConnect</span> is supported and an application calls <a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a>, the exchange library should delay any cleanup until <span style="font-family: monospace">ExgLibDisconnect</span>, unless <span style="font-family: monospace">ExgLibConnect</span> returns an error, in which case it should clean up after itself. The library can expect to get an <span style="font-family: monospace">ExgLibDisconnect</span> call if it returns <span style="font-family: monospace">errNone</span> from <span style="font-family: monospace">ExgLibConnect</span>. If the application does not call <span style="font-family: monospace">ExgConnect</span>, the first call to <span style="font-family: monospace">ExgLibPut</span> must clean up after itself before returning an error and the exchange library should not expect to get an <span style="font-family: monospace">ExgLibDisconnect</span> call.
</p>
<p class="Body">
  <a name="1244623"> </a>The Exchange Manager's <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> function simply calls <span style="font-family: monospace">ExgLibDisconnect</span> in the exchange library identified by the <span style="font-family: monospace">ExgSocketType</span> structure passed to <span style="font-family: monospace">ExgDisconnect</span>.
</p>
<h4 class="RefSide">
  <a name="1244624"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244628"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244630"> </a>ExgLibGet
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244631"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244632"> </a>Establish a connection and request data from a remote device.
</p>
<h4 class="RefSide">
  <a name="1244633"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244634"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244635"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244637"> </a>Err ExgLibGet(UInt16 libRefNum, ExgSocketType *exgSocketP)
</p>
<h4 class="RefSide">
  <a name="1244638"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244639"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefNum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244640"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">exgSocketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>).</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244644"> </a>Result 
</h4>
<p class="Body">
  <a name="1244645"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. <span style="font-family: monospace">exgErrNotSupported</span> is returned if this operation is not supported by this library. Other error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244646"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244647"> </a><span style="font-family: monospace">ExgLibGet</span> informs the library that it should make a connection to the remote device and request information from it. When an exchange library's <span style="font-family: monospace">ExgLibGet</span> function is called, it should fetch the requested data and prepare to deliver it when the application calls <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a>. After <a href="ExgLibAPI.html#1244764"><span style="font-family: monospace">ExgLibReceive</span></a> is called, possibly more than once, <a href="ExgLibAPI.html#1244574"><span style="font-family: monospace">ExgLibDisconnect</span></a> follows.
</p>
<p class="Body">
  <a name="1244660"> </a>The Exchange Manager's <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a> function calls <span style="font-family: monospace">ExgLibGet</span> in the exchange library identified in the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgGet</span>. If an exchange library's implementation of <span style="font-family: monospace">ExgLibGet</span> returns <span style="font-family: monospace">exgErrNotEnoughPower</span>, the Exchange Manager puts up an alert, so there is no need for the exchange library to do so. Other error codes are not treated specially by the Exchange Manager; an exchange library must put up its own alerts when appropriate.
</p>
<h4 class="RefSide">
  <a name="1244664"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244668"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244670"> </a>ExgLibHandleEvent
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244671"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244672"> </a>Handle exchange-library-specific events.
</p>
<h4 class="RefSide">
  <a name="1244673"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244674"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244675"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244677"> </a>Boolean ExgLibHandleEvent(UInt16 libRefnum, void *eventP)
</p>
<h4 class="RefSide">
  <a name="1244678"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244679"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244680"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">eventP</span></td><td valign="top">The event to handle.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244681"> </a>Result 
</h4>
<p class="Body">
  <a name="1244682"> </a>Returns <span style="font-family: monospace">true</span> if the event was handled.
</p>
<h4 class="RefSide">
  <a name="1244683"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244684"> </a>Exchange libraries are free to implement this function for internal or external use. The <span style="font-family: monospace">Exchange Manager</span> does not call it.
</p>

<h2 class="HBHeadB">
  <a name="1244691"> </a>ExgLibOpen
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244692"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244693"> </a>Library-specific. Although this function is not called by the Exchange Manager, all shared libraries normally implement it.
</p>
<h4 class="RefSide">
  <a name="1244694"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244695"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244696"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244697"> </a>Err ExgLibOpen (UInt16 libRefnum)
</p>
<h4 class="RefSide">
  <a name="1244699"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244700"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244701"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244702"> </a>Exchange libraries are free to implement this function for internal or external use. The <span style="font-family: monospace">ExgLibDisconnect</span> does not call it.
</p>

<h2 class="HBHeadB">
  <a name="1244705"> </a>ExgLibPut
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244706"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244707"> </a>Signals the start of an object to be transferred to the destination device.
</p>
<h4 class="RefSide">
  <a name="1244708"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244709"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244710"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244712"> </a>Err ExgLibPut(UInt16 libRefnum, ExgSocketType *exgSocketP)
</p>
<h4 class="RefSide">
  <a name="1244713"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244714"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244715"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">exgSocketP</span></td><td valign="top">Pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244719"> </a>Result 
</h4>
<p class="Body">
  <a name="1244720"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. Error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244721"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244722"> </a>Opens a connection if necessary. The actual data should be sent using <a href="ExgLibAPI.html#1244834"><span style="font-family: monospace">ExgLibSend</span></a> after which the connection should be shut down with <a href="ExgLibAPI.html#1244574"><span style="font-family: monospace">ExgLibDisconnect</span></a>. The exchange library may prompt the user for addressing information.
</p>
<p class="Body">
  <a name="1244729"> </a>The first time this library is called, it may be necessary to allocate global variables and perform other initialization steps. It is usually a good idea to keep any state information about the open connection in the <span style="font-family: monospace">socketRef</span> field of the <span style="font-family: monospace">exgSocketP</span> structure. This data can then be passed to subsequent operations on that socket.
</p>
<p class="Body">
  <a name="1244730"> </a><span style="font-family: monospace">ExgLibPut</span> should then check if the <span style="font-family: monospace">socketRef</span> field of <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">exgSocketP</span> has been initialized. In some cases, an application may already have filled <span style="font-family: monospace">socketRef</span> with addressing information. The use of <span style="font-family: monospace">socketRef</span> is entirely up to the exchange library. If <span style="font-family: monospace">socketRef</span> is empty, the exchange library needs to fill in any addressing information. In order to do this, the exchange library needs to open its own dialog asking the user for whatever addressing information would be appropriate. 
</p>
<p class="Body">
  <a name="1244731"> </a>Exchange libraries are responsible for any validation of data entered in the addressing dialog and may use Address Book lookup or other system features to improve the user experience.
</p>
<p class="Body">
  <a name="1244732"> </a>Once the user has completed addressing and confirmed the dialog, the exchange library should, in general, call the <a href="ProgressManager.html#1054813">Progress Manager</a> to open a progress dialog that remains open during the entire put operation. The progress dialog should not be opened if the <span style="font-family: monospace">noStatus</span> option was passed or if the transaction is in asynchronous mode.
</p>
<p class="Body">
  <a name="1244736"> </a>If the exchange library is displaying dialogs, it must also look for events and pass them to the Progress Manager.
</p>
<p class="Body">
  <a name="1244737"> </a>Other operations within <span style="font-family: monospace">ExgLibPut</span> depend on the exchange library. The exchange library may open communications ports and establish remote links at this time. Or it may just open a stream for buffering data until a later operation. If any errors occur in this process, the exchange library is responsible for removing any progress dialogs and returning an error. If displaying progress, the exchange library may also need to display an error using the Progress Manager before returning.
</p>
<div class="NINoteImportant"><hr>
  <a name="1244738"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> The progress dialog is converted to an error dialog and waits until the user dismisses it. This may occur in <span style="font-family: monospace">ExgLibPut</span> or later in <a href="ExgLibAPI.html#1244574"><span style="font-family: monospace">ExgLibDisconnect</span></a>. It depends on whether the connection was made in <span style="font-family: monospace">ExgLibPut</span> or whether it used an existing connection made by a previous call to <span style="font-family: monospace">ExgLibConnect</span> or <span style="font-family: monospace">ExgLibPut</span>.
<hr>
</div>
<p class="Body">
  <a name="1244745"> </a>The first call to <a href="ExgLibAPI.html#1244705"><span style="font-family: monospace">ExgLibPut</span></a> must clean up after itself before returning an error if one of the following conditions exists:
</p>

  <a name="1244749"> </a><p class="B1Bullet"> &#8226; If <a href="ExgLibAPI.html#1244496"><span style="font-family: monospace">ExgLibConnect</span></a> is not supported.</p>

  <a name="1244750"> </a><p class="B1Bullet"> &#8226; If <span style="font-family: monospace">ExgLibConnect</span> is supported and an application does not call <span style="font-family: monospace">ExgLibConnect</span>.</p>
<p class="Body">
  <a name="1244754"> </a>The Exchange Manager's <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a> function calls <span style="font-family: monospace">ExgLibPut</span> in the exchange library identified by the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgPut</span>. If <span style="font-family: monospace">ExgLibPut</span> returns <span style="font-family: monospace">exgErrNotEnoughPower</span>, the Exchange Manager puts up an alert, so there is no need for the exchange library to do so. Other error codes are not treated specially by the Exchange Manager; an exchange library must put up its own alerts when appropriate.
</p>
<h4 class="RefSide">
  <a name="1244758"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244762"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244764"> </a>ExgLibReceive
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244765"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244766"> </a>Receive data from a remote device.
</p>
<h4 class="RefSide">
  <a name="1244767"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244768"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244769"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244771"> </a>UInt32 ExgLibReceive(UInt16 libRefNum, ExgSocketType *exgSocketP, void *bufP, UInt32 bufSize, Err *errP)
</p>
<h4 class="RefSide">
  <a name="1244772"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244773"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefNum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244774"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">exgSocketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244778"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufP</span></td><td valign="top">A pointer to a buffer into which the data is put.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244779"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufSize</span></td><td valign="top">The size of the buffer in bytes.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244780"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">errP</span></td><td valign="top">The error code result: <span style="font-family: monospace">errNone</span> if no error. <span style="font-family: monospace">exgErrNotSupported</span> is returned if used during a preview and the exchange library does not support preview or if there appears to be more data available but <span style="font-family: monospace">ExgLibReceive</span> cannot obtain it.Error codes are defined by each exchange library.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244781"> </a>Result 
</h4>
<p class="Body">
  <a name="1244782"> </a>The number of bytes received. Returns 0 if the object is complete. <span style="font-family: monospace">ExgLibReceive</span> blocks until at least one byte is available or the object is complete.
</p>
<h4 class="RefSide">
  <a name="1244783"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244790"> </a>Use after <a href="ExgLibAPI.html#1244630"><span style="font-family: monospace">ExgLibGet</span></a> or <a href="ExgLibAPI.html#1244444"><span style="font-family: monospace">ExgLibAccept</span></a> to receive the contents of the object. May be used after <span style="font-family: monospace">ExgLibAccept</span> to examine the contents during a preview.
</p>
<p class="Body">
  <a name="1244791"> </a><span style="font-family: monospace">ExgLibReceive</span> must update any progress dialogs to indicate that data is being received. The <span style="font-family: monospace">ExgLibReceive</span> should fill the buffer passed as much as possible and return the actual number of bytes that were stored in the buffer. <span style="font-family: monospace">ExgLibReceive</span> must block for at least one byte if the stream is not complete. Returning zero bytes indicates the end of the data.
</p>
<p class="Body">
  <a name="1244795"> </a>The Exchange Manager's <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a> function simply calls <span style="font-family: monospace">ExgLibReceive</span> in the exchange library identified by the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgReceive</span>.
</p>
<h4 class="RefSide">
  <a name="1244799"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244803"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244805"> </a>ExgLibRequest
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244806"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244807"> </a>Requests an object using a URL, then has the Exchange Manager send it to the default application registered for the object's type.
</p>
<h4 class="RefSide">
  <a name="1244808"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244809"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244810"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244812"> </a>Err ExgLibRequest(UInt16 libRefNum, ExgSocketType *socketP)
</p>
<h4 class="RefSide">
  <a name="1244813"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244814"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefNum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244815"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">Pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). The <span style="font-family: monospace">name</span> field contains the URL of the object being requested.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244819"> </a>Result 
</h4>
<p class="Body">
  <a name="1244820"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. <span style="font-family: monospace">exgErrNotSupported</span> is returned if the exchange library does not support this operation. Other error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244821"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244822"> </a>The exchange library may prompt the user for addressing information. The socket's <span style="font-family: monospace">name</span> field may contain a URL with any of the schemes for which the exchange library registered. Not all exchange libraries support this operation.
</p>
<div class="NINoteImportant"><hr>
  <a name="1244823"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> This function is often used to tickle an exchange library to make it check to see if there are new messages. These messages are then delivered as usual. So there may or may not be a specific object being requested.
<hr>
</div>
<p class="Body">
  <a name="1244827"> </a>The Exchange Manager's <a href="ExchangeManager.html#1234667"><span style="font-family: monospace">ExgRequest</span></a> function calls <span style="font-family: monospace">ExgLibRequest</span> in the exchange library identified by the <span style="font-family: monospace">ExgSocketType</span> structure passed to <span style="font-family: monospace">ExgRequest</span>. If <span style="font-family: monospace">ExgLibRequest</span> returns <span style="font-family: monospace">exgErrNotEnoughPower</span>, the Exchange Manager puts up an alert, so there is no need for the exchange library to do so. Other error codes are not treated specially by the Exchange Manager; an exchange library must put up its own alerts when appropriate.
</p>
<h4 class="RefSide">
  <a name="1244828"> </a>See Also 
</h4>
<p class="Body">
  <a name="1244832"> </a><a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1244834"> </a>ExgLibSend
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244835"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244836"> </a>Send data for an object to a destination device.
</p>
<h4 class="RefSide">
  <a name="1244837"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244838"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244839"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244841"> </a>UInt32 ExgLibSend(UInt16 libRefNum, ExgSocketType *exgSocketP, const void *bufP, UInt32 bufLen, Err *errP)
</p>
<h4 class="RefSide">
  <a name="1244842"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244843"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefNum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244844"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">exgSocketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244848"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufP</span></td><td valign="top">A pointer to a buffer containing the data to send.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244849"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufLen</span></td><td valign="top">The number of bytes to send.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1244850"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">errP</span></td><td valign="top">The error code result. Error codes are defined by each exchange library</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244851"> </a>Result 
</h4>
<p class="Body">
  <a name="1244852"> </a>Returns the number of bytes sent.
</p>
<h4 class="RefSide">
  <a name="1244853"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244860"> </a>Applications call <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a> after <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a> and in response to <span style="font-family: monospace">sysAppLaunchCmdExgGetData</span>.
</p>
<p class="Body">
  <a name="1244861"> </a>This function blocks until all bytes to be sent are actually sent, or until an error occurs (such as device full).
</p>
<p class="Body">
  <a name="1244862"> </a><span style="font-family: monospace">ExgLibSend</span> may be called any number of times with varying size buffers to transmit information. If dialogs are being displayed, <span style="font-family: monospace">ExgLibSend</span> must keep them updated (perhaps with animation or progress information). <span style="font-family: monospace">ExgLibSend</span> must also check for events and let the Progress Manager handle them.
</p>
<p class="Body">
  <a name="1244863"> </a>The Exchange Manager's <span style="font-family: monospace">ExgSend</span> function simply calls <span style="font-family: monospace">ExgLibSend</span> in the exchange library identified by the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure passed to <span style="font-family: monospace">ExgSend</span>.
</p>
<h4 class="RefSide">
  <a name="1244867"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1244871"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1244873"> </a>ExgLibSleep
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244874"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244875"> </a>The device is going to sleep.
</p>
<h4 class="RefSide">
  <a name="1244876"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244877"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244878"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244880"> </a>Err ExgLibSleep(UInt16 libRefnum)
</p>
<h4 class="RefSide">
  <a name="1244881"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244882"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244883"> </a>Result 
</h4>
<p class="Body">
  <a name="1244884"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. Error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244885"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244886"> </a>The device goes into sleep mode when the user turns the device off, the auto-off timer expires, or power is low. All shared libraries must implement <span style="font-family: monospace">ExgLibSleep</span>; however, no processing is required and simply returning <span style="font-family: monospace">errNone</span> is enough.
</p>
<div class="NINoteImportant"><hr>
  <a name="1244887"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> Libraries must return from this function quickly to allow sufficient time for emergency shutdown situations (removal of batteries, for example).
<hr>
</div>

<h2 class="HBHeadB">
  <a name="1244890"> </a>ExgLibWake
<a href="#1244433"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1244891"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1244892"> </a>The device is waking up.
</p>
<h4 class="RefSide">
  <a name="1244893"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1244894"> </a>ExgLib.h
</p>
<h4 class="RefSide">
  <a name="1244895"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1244897"> </a>Err ExgLibWake(UInt16 libRefnum)
</p>
<h4 class="RefSide">
  <a name="1244898"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1244899"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">libRefnum</span></td><td valign="top">Reference number of this exchange library.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1244900"> </a>Result 
</h4>
<p class="Body">
  <a name="1244901"> </a>Returns <span style="font-family: monospace">errNone</span> if no error. Error codes are defined by each exchange library.
</p>
<h4 class="RefSide">
  <a name="1244902"> </a>Comments 
</h4>
<p class="Body">
  <a name="1244903"> </a>The device wakes up when the user turns the device on. All shared libraries must implement <span style="font-family: monospace">ExgLibWake</span>, although no processing is required; it is enough to simply return <span style="font-family: monospace">errNone</span>.
</p>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Reference_Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>