<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Progress Manager</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:09:58">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1054813"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">17  Progress Manager</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PrivateRecords.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Scrollbar.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Reference_Front.html">Palm OS® Programmer's API Reference</a></p>
			<p class="SideTOC1-PartTab">Palm OS® 5 SDK </p>
			<p class="SideTOC1-PartTab">Part I: User Interface</a> </p>
			<p class="SideTOC1"><a href="ProgressManager.html">17  Progress Manager</a></p>
			
<p class="SideTOC2">
<a href="#1054832">Progress Manager Functions
</a></p>

<p class="SideTOC3">
<a href="#1054835">PrgHandleEvent
</a></p>

<p class="SideTOC3">
<a href="#1054893">PrgStartDialog
</a></p>

<p class="SideTOC3">
<a href="#1054942">PrgStartDialogV31
</a></p>

<p class="SideTOC3">
<a href="#1054981">PrgStopDialog
</a></p>

<p class="SideTOC3">
<a href="#1055019">PrgUpdateDialog
</a></p>

<p class="SideTOC3">
<a href="#1055067">PrgUserCancel
</a></p>

<p class="SideTOC2">
<a href="#1055104">Application-Defined Functions
</a></p>

<p class="SideTOC3">
<a href="#1055107">PrgCallbackFunc
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1054814"> </a>This chapter provides reference material for the Progress Manager. 
</p>

  <a name="1054818"> </a><p class="B1Bullet"> &#8226; <a href="ProgressManager.html#1054832">Progress Manager Functions</a></p>

  <a name="1054822"> </a><p class="B1Bullet"> &#8226; <a href="ProgressManager.html#1055104">Application-Defined Functions</a></p>
<p class="Body">
  <a name="1054824"> </a>The header file <span style="font-family: monospace">Progress.h</span> declares the API that this chapter describes. For more information on the progress manager, see the section <a href="UserInterface.html#980498">"Progress Dialogs"</a> in the <i>Palm OS Programmer's Companion</i>, vol. I. 
</p>

<h2 class="HaHeadA">
  <a name="1054832"> </a>Progress Manager Functions 
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1054835"> </a>PrgHandleEvent
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1054836"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1054837"> </a>Handles events related to the active progress dialog.
</p>
<h4 class="RefSide">
  <a name="1054838"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1054839"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1054840"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1054841"> </a>Boolean PrgHandleEvent (ProgressPtr prgGP,<br>EventType *eventP)
</p>
<h4 class="RefSide">
  <a name="1054842"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1054843"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">prgGP</span></td><td valign="top">Pointer to a progress structure created by <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1054847"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">eventP</span></td><td valign="top">Pointer to an event. You can pass a <span style="font-family: monospace">NULL</span> event to cause this function to immediately call your <a href="ProgressManager.html#1055107"><span style="font-family: monospace">PrgCallbackFunc</span></a> function and then update the dialog (for example, after you call <span style="font-family: monospace">PrgUpdateDialog</span>).</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1054851"> </a>Result 
</h4>
<p class="Body">
  <a name="1054852"> </a>Returns <span style="font-family: monospace">true</span> if the system handled the event. If it returns <span style="font-family: monospace">false</span>, you should check if the user canceled the dialog by calling <a href="ProgressManager.html#1055067"><span style="font-family: monospace">PrgUserCancel</span></a>.
</p>
<h4 class="RefSide">
  <a name="1054856"> </a>Comments 
</h4>
<p class="Body">
  <a name="1054860"> </a>Use this function instead of <a href="SystemManager.html#1166025"><span style="font-family: monospace">SysHandleEvent</span></a> when you have a progress dialog. <span style="font-family: monospace">PrgHandleEvent</span> internally calls <span style="font-family: monospace">SysHandleEvent</span> as needed.
</p>
<p class="Body">
  <a name="1054861"> </a>Note that the auto power-off feature of the system is automatically disabled when you use this function, unless the dialog is just displaying an error. This function also prevents <span style="font-family: monospace">appStopEvent</span> events.
</p>
<p class="Body">
  <a name="1054862"> </a>If an update to the dialog is pending (from a call to <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a>, for example) this function handles that event and causes the dialog to be updated. As part of this process, the <span style="font-family: monospace">textCallback</span> function you specified in your call to <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a> is called. Your <span style="font-family: monospace">textCallback</span> function should set the <span style="font-family: monospace">textP</span> buffer in the <span style="font-family: monospace">PrgCallbackData</span> structure with the new message to be displayed in the progress dialog. Optionally, you can also set the <span style="font-family: monospace">bitmapId</span> field to include an icon in the update dialog. For more information about the <span style="font-family: monospace">textCallback</span> function, see the section <a href="ProgressManager.html#1055104">"Application-Defined Functions."</a>
</p>
<h4 class="RefSide">
  <a name="1054872"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1054876"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1054877"> </a>See Also 
</h4>
<p class="Body">
  <a name="1054887"> </a><a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>, <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>, <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a>, <a href="ProgressManager.html#1055067"><span style="font-family: monospace">PrgUserCancel</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1054893"> </a>PrgStartDialog
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1054894"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1054895"> </a>Displays a progress dialog that can be updated.
</p>
<h4 class="RefSide">
  <a name="1054896"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1054897"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1054898"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1054899"> </a>ProgressPtr PrgStartDialog (const Char *title,<br>PrgCallbackFunc textCallback, void *userDataP)
</p>
<h4 class="RefSide">
  <a name="1054900"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1054901"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">title</span></td><td valign="top">Pointer to a title for the progress dialog. Must be a null-terminated string that is no longer than <span style="font-family: monospace">progressMaxTitle</span> (20).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1054902"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">textCallback</span></td><td valign="top">Pointer to a callback function that supplies the text and icons for the current progress state. See <a href="ProgressManager.html#1055107"><span style="font-family: monospace">PrgCallbackFunc</span></a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1054906"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">userDataP</span></td><td valign="top">A pointer to data that you need to access in the callback function. This address gets passed directly to your function. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1054907"> </a>Result 
</h4>
<p class="Body">
  <a name="1054908"> </a>A pointer to a progress structure. This pointer must be passed to other progress manager functions and <b>must</b> be released by calling <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>. <span style="font-family: monospace">NULL</span> is returned if the system is unable to allocate the progress structure.
</p>
<h4 class="RefSide">
  <a name="1054912"> </a>Comments 
</h4>
<p class="Body">
  <a name="1054913"> </a>The dialog created by this function can be updated by another process via the <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a> function. The dialog can contain a Cancel or OK button. The initial dialog defaults to stage 0 and calls the <span style="font-family: monospace">textCallback</span> function to get the initial text and icon data for the progress dialog.
</p>
<p class="Body">
  <a name="1054917"> </a>This function saves the screen bits behind the progress dialog, and these are restored when you call <span style="font-family: monospace">PrgStopDialog</span>. Because of this, you should minimize changes to the screen while the progress dialog is displayed, otherwise, the restored bits may not match with what is currently being displayed.
</p>
<h4 class="RefSide">
  <a name="1054918"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1054922"> </a>This version of the function is available only if <a href="CompatibilityApdx.html#970392">3.2 New Feature Set</a> is present. On earlier systems, <span style="font-family: monospace">PrgStartDialog</span> has the prototype shown for <a href="ProgressManager.html#1054942"><span style="font-family: monospace">PrgStartDialogV31</span></a>. 
</p>
<h4 class="RefSide">
  <a name="1054926"> </a>See Also 
</h4>
<p class="Body">
  <a name="1054936"> </a><a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a>, <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>, <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a>, <a href="ProgressManager.html#1055067"><span style="font-family: monospace">PrgUserCancel</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1054942"> </a>PrgStartDialogV31
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1054943"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1054944"> </a>Displays a progress dialog that can be updated.
</p>
<h4 class="RefSide">
  <a name="1054945"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1054946"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1054947"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1054948"> </a>ProgressPtr PrgStartDialogV31 (const Char *title,<br>PrgCallbackFunc textCallback)
</p>
<h4 class="RefSide">
  <a name="1054949"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1054950"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">title</span></td><td valign="top">Pointer to a title for the progress dialog. Must be a null-terminated string that is no longer than <span style="font-family: monospace">progressMaxTitle</span> (20).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1054951"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">textCallback</span></td><td valign="top">Pointer to a callback function that supplies the text and icons for the current progress state. See <a href="ProgressManager.html#1055107"><span style="font-family: monospace">PrgCallbackFunc</span></a>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1054955"> </a>Result 
</h4>
<p class="Body">
  <a name="1054956"> </a>A pointer to a progress structure. This pointer must be passed to other progress manager functions and <b>must</b> be released by calling <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>. <span style="font-family: monospace">NULL</span> is returned if the system is unable to allocate the progress structure.
</p>
<h4 class="RefSide">
  <a name="1054960"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1054964"> </a>This function corresponds to version of <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a> available on Palm OS<sup>®</sup> 3.0 and Palm OS 3.1.
</p>
<h4 class="RefSide">
  <a name="1054965"> </a>See Also 
</h4>
<p class="Body">
  <a name="1054975"> </a><a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a>, <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>, <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a>, <a href="ProgressManager.html#1055067"><span style="font-family: monospace">PrgUserCancel</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1054981"> </a>PrgStopDialog
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1054982"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1054983"> </a>Releases memory used by the progress dialog and restores the screen to its initial state.
</p>
<h4 class="RefSide">
  <a name="1054984"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1054985"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1054986"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1054987"> </a>void PrgStopDialog (ProgressPtr prgP,<br>Boolean force)
</p>
<h4 class="RefSide">
  <a name="1054988"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1054989"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">prgP</span></td><td valign="top">Pointer to a progress structure created by <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1054993"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">force</span></td><td valign="top"><span style="font-family: monospace">true</span> removes the progress dialog immediately, <span style="font-family: monospace">false</span> causes the system to wait until the user confirms an error, if one is displayed.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1054994"> </a>Result 
</h4>
<p class="Body">
  <a name="1054995"> </a>Returns nothing.
</p>
<h4 class="RefSide">
  <a name="1054996"> </a>Comments 
</h4>
<p class="Body">
  <a name="1054997"> </a>If the progress dialog is in a state where it is displaying an error message to the user, this function normally waits for the user to confirm the dialog before it removes the dialog. If you specify <span style="font-family: monospace">true</span> for the <span style="font-family: monospace">force</span> parameter, this causes the system to remove the dialog immediately.
</p>
<h4 class="RefSide">
  <a name="1054998"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1055002"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1055003"> </a>See Also 
</h4>
<p class="Body">
  <a name="1055013"> </a><a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a>, <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>, <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a>, <a href="ProgressManager.html#1055067"><span style="font-family: monospace">PrgUserCancel</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1055019"> </a>PrgUpdateDialog
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1055020"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1055021"> </a>Updates the status of the current progress dialog.
</p>
<h4 class="RefSide">
  <a name="1055022"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1055023"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1055024"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1055025"> </a>void PrgUpdateDialog (ProgressPtr prgGP,<br>UInt16 err, UInt16 stage, const Char *messageP,<br>Boolean updateNow)
</p>
<h4 class="RefSide">
  <a name="1055026"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1055027"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">prgGP</span></td><td valign="top">Pointer to a progress structure created by <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055031"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">err</span></td><td valign="top">If non-zero, causes the dialog to go into error mode, to display an error message with only an OK button.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055032"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">stage</span></td><td valign="top">Current stage of progress. The callback function can use this to determine the correct string to display in the updated dialog.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055033"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">messageP</span></td><td valign="top">Extra text that may be useful in displaying the progress for this stage. Used by the callback function, which can append it to the base message that is based on the stage.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055034"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">updateNow</span></td><td valign="top">If <span style="font-family: monospace">true</span>, the dialog is immediately updated. Otherwise, the dialog is updated on the next call to <a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1055038"> </a>Result 
</h4>
<p class="Body">
  <a name="1055039"> </a>Returns nothing.
</p>
<h4 class="RefSide">
  <a name="1055040"> </a>Comments 
</h4>
<p class="Body">
  <a name="1055042"> </a>For more information about how the parameters are used and the callback function, see the section <a href="ProgressManager.html#1055104">"Application-Defined Functions."</a>
</p>
<h4 class="RefSide">
  <a name="1055046"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1055050"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1055051"> </a>See Also 
</h4>
<p class="Body">
  <a name="1055061"> </a><a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a>, <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>, <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>, <a href="ProgressManager.html#1055067"><span style="font-family: monospace">PrgUserCancel</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1055067"> </a>PrgUserCancel
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1055068"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1055069"> </a>Macro that returns <span style="font-family: monospace">true</span> if the user cancelled the process via the progress dialog.
</p>
<h4 class="RefSide">
  <a name="1055070"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1055071"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1055072"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1055073"> </a>PrgUserCancel (prgP)
</p>
<h4 class="RefSide">
  <a name="1055074"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1055075"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">prgP</span></td><td valign="top">Pointer to a progress structure (<span style="font-family: monospace">ProgressPtr</span>) created by <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1055079"> </a>Result 
</h4>
<p class="Body">
  <a name="1055080"> </a>Returns the value of the <span style="font-family: monospace">cancel</span> field in the progress structure (as a <span style="font-family: monospace">UInt16</span>).
</p>
<h4 class="RefSide">
  <a name="1055081"> </a>Comments 
</h4>
<p class="Body">
  <a name="1055082"> </a>This is a macro you can use to check if the user cancelled the process. If the user did cancel, you can change the progress dialog text to something like "Cancelling," or "Disconnecting," or whatever is appropriate for your application. Then you should cancel the process, end the communication session, or do whatever processing is necessary.
</p>
<h4 class="RefSide">
  <a name="1055083"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1055087"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1055088"> </a>See Also 
</h4>
<p class="Body">
  <a name="1055098"> </a><a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a>, <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>, <a href="ProgressManager.html#1054981"><span style="font-family: monospace">PrgStopDialog</span></a>, <a href="ProgressManager.html#1055019"><span style="font-family: monospace">PrgUpdateDialog</span></a>
</p>

<h2 class="HaHeadA">
  <a name="1055104"> </a>Application-Defined Functions 
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1055107"> </a>PrgCallbackFunc
<a href="#1054813"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1055108"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1055109"> </a>Supplies the text and icons for the current progress state.
</p>
<h4 class="RefSide">
  <a name="1055110"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1055111"> </a>Progress.h
</p>
<h4 class="RefSide">
  <a name="1055112"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1055113"> </a>Boolean (*PrgCallbackFunc)<br>(PrgCallbackDataPtr cbP)
</p>
<h4 class="RefSide">
  <a name="1055114"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1055116"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">cbP</span></td><td valign="top">A pointer to a <span style="font-family: monospace">PrgCallbackData</span> structure. See below. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1055117"> </a>Result 
</h4>
<p class="Body">
  <a name="1055118"> </a>Returns <span style="font-family: monospace">true</span> if the progress dialog should be updated using the values you specified in the <span style="font-family: monospace">PrgCallbackData</span> structure. If you specify <span style="font-family: monospace">false</span>, the dialog is still updated, but with default status messages. (Returning <span style="font-family: monospace">false</span> is not recommended.)
</p>
<h4 class="RefSide">
  <a name="1055119"> </a>Comments 
</h4>
<p class="Body">
  <a name="1055120"> </a>This is a callback function that you specify when you call <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a>. The callback function is called by <a href="ProgressManager.html#1054835"><span style="font-family: monospace">PrgHandleEvent</span></a> when it needs current progress information to display in the progress dialog. 
</p>
<p class="Body">
  <a name="1055127"> </a>The system passes this function one parameter, a pointer to a <span style="font-family: monospace">PrgCallbackData</span> structure. Here are the important fields in that data structure (note that -&gt; indicates you set the field in the <span style="font-family: monospace">textCallback</span> function):
</p>
<h5 class="P1"><a name="1055129"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">UInt16 stage</span></td><td valign="top">Current stage (passed from <span style="font-family: monospace">PrgUpdateDialog</span>).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055130"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">Char *textP</span></td><td valign="top">Buffer to hold the text to display in the updated dialog. You might want to look up a message in a resource file, based on the value in the <span style="font-family: monospace">stage</span> field. Also, you should append the additional text in the <span style="font-family: monospace">message</span> field, to form the full string to display. Be sure to include a null terminator at the end of the string you return, and don't exceed the length in <span style="font-family: monospace">textLen</span>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055131"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">UInt16 textLen</span></td><td valign="top">Maximum length of the text buffer <span style="font-family: monospace">textP</span>. Note that this value is set for you by the caller. Be careful not to exceed this length in <span style="font-family: monospace">textP</span>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055132"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">Char *message</span></td><td valign="top">Additional text to display in the dialog (from the <span style="font-family: monospace">messageP</span> parameter to <span style="font-family: monospace">PrgUpdateDialog</span>). This should be no longer than <span style="font-family: monospace">progressMaxMessage</span> (128).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055133"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">Err error</span></td><td valign="top">Current error (passed from the <span style="font-family: monospace">err</span> parameter to <span style="font-family: monospace">PrgUpdateDialog</span>).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055134"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">UInt16 bitmapId</span></td><td valign="top">Resource ID of the bitmap to display in the progress dialog, if any.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055135"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">UInt16 canceled:1</span></td><td valign="top"><span style="font-family: monospace">true</span> if user has pressed the cancel button.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055136"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">UInt16 showDetails:1</span></td><td valign="top"><span style="font-family: monospace">true</span> if user pressed the down arrow button on the Palm<sup>&#8482;</sup> device for more details. (Because this is a non-standard user interface technique, you shouldn't use this feature to display details that users need under normal conditions. It's more for debugging purposes.)</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055137"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">UInt16 textChanged:1</span></td><td valign="top">If <span style="font-family: monospace">true</span>, then update text (defaults to <span style="font-family: monospace">true</span>). You can set this to <span style="font-family: monospace">false</span> to avoid an update to the text.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055138"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">UInt16 timedOut:1</span></td><td valign="top"><span style="font-family: monospace">true</span> if update caused by a timeout.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055139"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">UInt32 timeout</span></td><td valign="top">Timeout in ticks to force next update. After this number of ticks, an update is automatically triggered (which sets the <span style="font-family: monospace">timedOut</span> flag). You can use this feature to do a simple animation effect. Note that you must set the timeout for <span style="font-family: monospace">EvtGetEvent</span> to a value that is equal to or less than this value, otherwise you won't get update events as frequently as you expect.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055140"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">UInt16 delay:1</span></td><td valign="top">If <span style="font-family: monospace">true</span>, delay for one second after updating the dialog. Use this value when you are displaying the final progress message so that users have a chance to see the message before the dialog closes. This field is available only if <a href="CompatibilityApdx.html#970392">3.2 New Feature Set</a> is present. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1055144"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">void *userDataP</span></td><td valign="top">A pointer to any application-defined data that the function needs to access. You specify this pointer as a parameter to <a href="ProgressManager.html#1054893"><span style="font-family: monospace">PrgStartDialog</span></a> if the callback function needs to access some application data but does not have access to application globals. This field is available only if <a href="CompatibilityApdx.html#970392">3.2 New Feature Set</a> is present. </td>
  </tr>
</table>
</div></h5>
<p class="Body">
  <a name="1055151"> </a>In this function, you should set the value of the <span style="font-family: monospace">textP</span> buffer to the string you want to display in the progress dialog when it is updated. You can use the value in the <span style="font-family: monospace">stage</span> field to look up a message in a string resource. You also might want to append the text in the <span style="font-family: monospace">message</span> field to your base string. Typically, the <span style="font-family: monospace">message</span> field would contain more dynamic information that depends on a user selection, such as a phone number, device name, or network identifier, etc.
</p>
<p class="Body">
  <a name="1055152"> </a>For example, the <span style="font-family: monospace">PrgUpdateDialog</span> function might have been called with a <span style="font-family: monospace">stage</span> of 1 and a <span style="font-family: monospace">messageP</span> parameter value of a phone number string, "555-1212". Based on the stage, you might find the string "Dialing" in a string resource, and append the phone number, to form the final text "Dialing 555-1212" that you place in the text buffer <span style="font-family: monospace">textP</span>.
</p>
<p class="Body">
  <a name="1055153"> </a>Keeping the static strings corresponding to various stages in a resource makes it easier to localize your application. More dynamic information can be passed in via the <span style="font-family: monospace">messageP</span> parameter to <span style="font-family: monospace">PrgUpdateDialog</span>.
</p>
<div class="NINoteImportant"><hr>
  <a name="1055154"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> This function is called only if the parameters passed to <span style="font-family: monospace">PrgUpdateDialog</span> have changed from the last time it was called. If <span style="font-family: monospace">PrgUpdateDialog</span> is called twice with exactly the same parameters, the <span style="font-family: monospace">textCallback</span> function is called only once. 
<hr>
</div>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Reference_Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>