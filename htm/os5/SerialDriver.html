<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Virtual Drivers</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:10:52">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1280588"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">64  Virtual Drivers</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ScriptPlugin.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SerialManager.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Reference_Front.html">Palm OS® Programmer's API Reference</a></p>
			<p class="SideTOC1-PartTab">Palm OS® 5 SDK </p>
			<p class="SideTOC1-PartTab">Part III: Communications </p>
			<p class="SideTOC1"><a href="SerialDriver.html">64  Virtual Drivers</a></p>
			
<p class="SideTOC2">
<a href="#1280619">Driver Data Structures
</a></p>

<p class="SideTOC3">
<a href="#1280621">DrvrInfoType
</a></p>

<p class="SideTOC3">
<a href="#1280689">DrvrRcvQType
</a></p>

<p class="SideTOC3">
<a href="#1280753">DrvrStatusEnum
</a></p>

<p class="SideTOC3">
<a href="#1280804">SrmRcvQType
</a></p>

<p class="SideTOC3">
<a href="#1280843">VdrvAPIType
</a></p>

<p class="SideTOC3">
<a href="#1280906">VdrvConfigType
</a></p>

<p class="SideTOC3">
<a href="#1280979">VdrvCtlOpCodeEnum
</a></p>

<p class="SideTOC2">
<a href="#1281211">Driver Constants
</a></p>

<p class="SideTOC3">
<a href="#1281213">Driver Version Constants
</a></p>

<p class="SideTOC3">
<a href="#1281259">Port Feature Constants
</a></p>

<p class="SideTOC2">
<a href="#1281341">Virtual Driver-Defined Functions
</a></p>

<p class="SideTOC3">
<a href="#1281346">DrvEntryPointProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281386">VdrvCloseProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281404">VdrvControlProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281502">VdrvControlCustomProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281531">VdrvOpenProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281555">VdrvOpenProcV4Ptr
</a></p>

<p class="SideTOC3">
<a href="#1281586">VdrvStatusProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281609">VdrvWriteProcPtr
</a></p>

<p class="SideTOC2">
<a href="#1281629">Serial Manager Queue Functions
</a></p>

<p class="SideTOC3">
<a href="#1281640">GetSizeProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281660">GetSpaceProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281679">SignalCheckPtr
</a></p>

<p class="SideTOC3">
<a href="#1281706">WriteBlockProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1281728">WriteByteProcPtr
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1280589"> </a>This chapter provides reference material for the Serial Manager virtual device driver API:
</p>

  <a name="1280593"> </a><p class="B1Bullet"> &#8226; <a href="SerialDriver.html#1280619">Driver Data Structures</a></p>

  <a name="1280597"> </a><p class="B1Bullet"> &#8226; <a href="SerialDriver.html#1281211">Driver Constants</a></p>

  <a name="1280601"> </a><p class="B1Bullet"> &#8226; <a href="SerialDriver.html#1281341">Virtual Driver-Defined Functions</a></p>

  <a name="1280605"> </a><p class="B1Bullet"> &#8226; <a href="SerialDriver.html#1281629">Serial Manager Queue Functions</a></p>
<p class="Body">
  <a name="1280608"> </a>The header files <span style="font-family: monospace">SerialVdrv.h</span> and <span style="font-family: monospace">SerialDrvr.h </span>declare the virtual driver API. For more information on writing device drivers for the Serial Manager, see section <a href="SerialCommunication.html#990006">"Writing a Virtual Device Driver"</a> in the <a href="SerialCommunication.html#989132">"Serial Communication"</a> chapter of <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. 
</p>

<h2 class="HaHeadA">
  <a name="1280619"> </a>Driver Data Structures 
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1280621"> </a>DrvrInfoType
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280623"> </a>The <span style="font-family: monospace">DrvrInfoType</span> structure defines information about the serial hardware. It is passed to and filled in by the <a href="SerialDriver.html#1281346"><span style="font-family: monospace">DrvEntryPointProcPtr</span></a> for a virtual driver.
</p>
<pre  class="Preformatted">
typedef struct {<a name="1280627"> </a>
  UInt32 drvrID;<a name="1280628"> </a>
  UInt32 drvrVersion;<a name="1280629"> </a>
  UInt32 maxBaudRate;<a name="1280630"> </a>
  UInt32 handshakeThreshold;<a name="1280631"> </a>
  UInt32 portFlags;<a name="1280632"> </a>
  const Char *portDesc;<a name="1280633"> </a>
  DrvrIRQEnum irqType;<a name="1280634"> </a>
  UInt8 multipleEnumerations;<a name="1280635"> </a>
  UInt32 dbCreator;<a name="1280636"> </a>
} DrvrInfoType;<a name="1280637"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1280638"> </a>Value Descriptions
</h4>

<h5 class="TgTable">
  <a name="1280682"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1280641"> </a><div class="CellBody"><span style="font-family: monospace">drvrID</span> </div></td>
    <td><a name="1280643"> </a><div class="CellBody">4-character creator type, such as 'u328'.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280645"> </a><div class="CellBody"><span style="font-family: monospace">drvrVersion</span> </div></td>
    <td><a name="1280647"> </a><div class="CellBody">Version of code that works for this hardware. See <a href="SerialDriver.html#1281213">Driver Version Constants</a>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280652"> </a><div class="CellBody"><span style="font-family: monospace">maxBaudRate</span> </div></td>
    <td><a name="1280654"> </a><div class="CellBody">Maximum baud rate supported by this hardware.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280656"> </a><div class="CellBody"><span style="font-family: monospace">handshakeThreshold</span> </div></td>
    <td><a name="1280658"> </a><div class="CellBody">Baud rate at which the use of hardware handshaking is necessary.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280660"> </a><div class="CellBody"><span style="font-family: monospace">portFlags</span> </div></td>
    <td><a name="1280662"> </a><div class="CellBody">Bit flags denoting features of this hardware. The flags are described in <a href="SerialDriver.html#1281259">Port Feature Constants</a>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280667"> </a><div class="CellBody"><span style="font-family: monospace">portDesc</span> </div></td>
    <td><a name="1280669"> </a><div class="CellBody">Pointer to null-terminated string describing this hardware. This string appears in the Connection panel to describe the port to the user (only if the <span style="font-family: monospace">portCncMgrVisible</span> bit in <span style="font-family: monospace">portFlags</span> is set). Can be <span style="font-family: monospace">NULL</span> if the driver contains a resource (of type 'tSTR' and id <span style="font-family: monospace">kPortDescStrID</span>) that supplies this string.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280671"> </a><div class="CellBody"><span style="font-family: monospace">irqType</span> </div></td>
    <td><a name="1280673"> </a><div class="CellBody">IRQ line being used for this hardware. For a virtual driver, specify <span style="font-family: monospace">drvrIRQNone</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280675"> </a><div class="CellBody"><span style="font-family: monospace">multipleEnumerations</span> </div></td>
    <td><a name="1280677"> </a><div class="CellBody">The number of entries in the driver table required for this driver. If 0, the driver has a single entry. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280679"> </a><div class="CellBody"><span style="font-family: monospace">dbCreator</span> </div></td>
    <td><a name="1280681"> </a><div class="CellBody">Creator ID of the database containing this driver. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1280683"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1280684"> </a>The <span style="font-family: monospace">multipleEnumerations</span> and <span style="font-family: monospace">dbCreator</span> fields are only defined if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1280689"> </a>DrvrRcvQType
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280691"> </a>The <span style="font-family: monospace">DrvrRcvQType</span> structure defines the virtual driver receive buffer and function pointers to functions that access and save data to the buffer. A pointer to this structure is passed to the <a href="SerialDriver.html#1281531"><span style="font-family: monospace">VdrvOpenProcPtr</span></a> function. The <span style="font-family: monospace">DrvrHWRcvQPtr</span> type defines a pointer to a <span style="font-family: monospace">DrvrRcvQType</span> structure.
</p>
<pre  class="Preformatted">
typedef struct DrvrRcvQType {<a name="1280695"> </a>
  void *rcvQ;<a name="1280696"> </a>
  WriteByteProcPtr qWriteByte;<a name="1280697"> </a>
  WriteBlockProcPtr qWriteBlock;<a name="1280698"> </a>
  GetSizeProcPtr qGetSize;<a name="1280699"> </a>
  GetSpaceProcPtr qGetSpace;<a name="1280700"> </a>
  SignalCheckPtr qSignalCheck;<a name="1280701"> </a>
} DrvrRcvQType;<a name="1280702"> </a>
 <a name="1280703"> </a>
typedef DrvrRcvQType *DrvrHWRcvQPtr;<a name="1280704"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1280705"> </a>Value Descriptions
</h4>

<h5 class="TgTable">
  <a name="1280746"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1280708"> </a><div class="CellBody"><span style="font-family: monospace">rcvQ</span> </div></td>
    <td><a name="1280710"> </a><div class="CellBody">Pointer to the receive buffer.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280712"> </a><div class="CellBody"><span style="font-family: monospace">qWriteByte</span> </div></td>
    <td><a name="1280714"> </a><div class="CellBody">Function pointer to a function that the virtual driver can use to write one byte to the Serial Manager's receive queue. See the <a href="SerialDriver.html#1281728"><span style="font-family: monospace">WriteByteProcPtr</span></a> function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280719"> </a><div class="CellBody"><span style="font-family: monospace">qWriteBlock</span> </div></td>
    <td><a name="1280721"> </a><div class="CellBody">Function pointer to a function that the virtual driver can use to write a block of bytes to the Serial Manager's receive queue. See the <a href="SerialDriver.html#1281706"><span style="font-family: monospace">WriteBlockProcPtr</span></a> function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280726"> </a><div class="CellBody"><span style="font-family: monospace">qGetSize</span> </div></td>
    <td><a name="1280728"> </a><div class="CellBody">Function pointer to a function that the virtual driver can use to get the total size of the Serial Manager's receive queue. See the <a href="SerialDriver.html#1281640"><span style="font-family: monospace">GetSizeProcPtr</span></a> function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280733"> </a><div class="CellBody"><span style="font-family: monospace">qGetSpace</span> </div></td>
    <td><a name="1280735"> </a><div class="CellBody">Function pointer to a function that the virtual driver can use to get the available space in the Serial Manager's receive queue. See the <a href="SerialDriver.html#1281660"><span style="font-family: monospace">GetSpaceProcPtr</span></a> function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280740"> </a><div class="CellBody"><span style="font-family: monospace">qSignalCheck</span> </div></td>
    <td><a name="1280742"> </a><div class="CellBody">Function pointer to a function that the virtual driver can use to perform a signal check for the Serial Manager's receive queue. See the <a href="SerialDriver.html#1281679"><span style="font-family: monospace">SignalCheckPtr</span></a> function. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1280747"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1280750"> </a>The <span style="font-family: monospace">qSignalCheck</span> field is only defined if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1280753"> </a>DrvrStatusEnum
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280755"> </a>The <span style="font-family: monospace">DrvrStatusEnum</span> enumerated type specifies serial status bit flags. Return these enumerated types from the <a href="SerialDriver.html#1281586"><span style="font-family: monospace">VdrvStatusProcPtr</span></a> call.
</p>
<pre  class="Preformatted">
typedef enum DrvrStatusEnum {<a name="1280759"> </a>
  drvrStatusCtsOn = 0x0001,<a name="1280760"> </a>
  drvrStatusRtsOn = 0x0002,<a name="1280761"> </a>
  drvrStatusDsrOn = 0x0004,<a name="1280762"> </a>
  drvrStatusTxFifoFull = 0x0008,<a name="1280763"> </a>
  drvrStatusTxFifoEmpty = 0x0010,<a name="1280764"> </a>
  drvrStatusBreakAsserted = 0x0020,<a name="1280765"> </a>
  drvrStatusDataReady = 0x0040,<a name="1280766"> </a>
  drvrStatusLineErr = 0x0080<a name="1280767"> </a>
} DrvrStatusEnum;<a name="1280768"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1280769"> </a>Value Descriptions
</h4>

<h5 class="TgTable">
  <a name="1280803"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1280772"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusCtsOn</span> </div></td>
    <td><a name="1280774"> </a><div class="CellBody">Set if CTS line is active.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280776"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusRtsOn</span> </div></td>
    <td><a name="1280778"> </a><div class="CellBody">Set if RTS line is active.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280780"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusDsrOn</span> </div></td>
    <td><a name="1280782"> </a><div class="CellBody">Set if DSR is on.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280784"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusTxFifoFull</span> </div></td>
    <td><a name="1280786"> </a><div class="CellBody">Set if transmit FIFO is full; cleared if FIFO has space.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280788"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusTxFifoEmpty</span> </div></td>
    <td><a name="1280790"> </a><div class="CellBody">Set if transmit FIFO is empty.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280792"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusBreakAsserted</span> </div></td>
    <td><a name="1280794"> </a><div class="CellBody">Set if sending break characters is enabled.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280796"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusDataReady</span> </div></td>
    <td><a name="1280798"> </a><div class="CellBody">Used by debugger only.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280800"> </a><div class="CellBody"><span style="font-family: monospace">drvrStatusLineErr</span> </div></td>
    <td><a name="1280802"> </a><div class="CellBody">Used by debugger only.</div></td>
  </tr>
</table>




</h5>
<h2 class="HBHeadB">
  <a name="1280804"> </a>SrmRcvQType
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280806"> </a>The <span style="font-family: monospace">SrmRcvQType</span> structure defines the Serial Manager receive queue. This queue is passed as a parameter to the virtual driver. 
</p>
<pre  class="Preformatted">
typedef struct SrmRcvQType {<a name="1280807"> </a>
  UInt32 qStart;<a name="1280808"> </a>
  UInt32 qEnd;<a name="1280809"> </a>
  UInt32 qSize;<a name="1280810"> </a>
  UInt8 *qData;<a name="1280811"> </a>
  void *qPort;<a name="1280812"> </a>
} SrmRcvQType;<a name="1280813"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1280814"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1280836"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1280817"> </a><div class="CellBody"><span style="font-family: monospace">qStart</span> </div></td>
    <td><a name="1280819"> </a><div class="CellBody">The start of the queue. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280821"> </a><div class="CellBody"><span style="font-family: monospace">qEnd</span> </div></td>
    <td><a name="1280823"> </a><div class="CellBody">The end of the queue. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280825"> </a><div class="CellBody"><span style="font-family: monospace">qSize</span> </div></td>
    <td><a name="1280827"> </a><div class="CellBody">The size of the queue. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280829"> </a><div class="CellBody"><span style="font-family: monospace">qData</span> </div></td>
    <td><a name="1280831"> </a><div class="CellBody">The data currently in the queue. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280833"> </a><div class="CellBody"><span style="font-family: monospace">qPort</span> </div></td>
    <td><a name="1280835"> </a><div class="CellBody">A pointer to the current foreground port. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1280837"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1280838"> </a>The <span style="font-family: monospace">SrmRcvQType</span> structure was previously a private structure. It is declared publicly if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1280843"> </a>VdrvAPIType
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280845"> </a>The <span style="font-family: monospace">VdrvAPIType</span> structure defines function pointers to the required virtual driver functions. When passed a pointer to this structure in the <a href="SerialDriver.html#1281346"><span style="font-family: monospace">DrvEntryPointProcPtr</span></a> function, that function must fill in the pointers to the virtual driver functions appropriately.
</p>
<pre  class="Preformatted">
typedef struct {<a name="1280849"> </a>
  VdrvOpenProcPtr drvOpen;<a name="1280850"> </a>
  VdrvCloseProcPtr drvClose;<a name="1280851"> </a>
  VdrvControlProcPtr drvControl;<a name="1280852"> </a>
  VdrvStatusProcPtr drvStatus;<a name="1280853"> </a>
  VdrvReadProcPtr drvRead;<a name="1280854"> </a>
  VdrvWriteProcPtr drvWrite;<a name="1280855"> </a>
  VdrvOpenProcV4Ptr drvOpenV4;<a name="1280856"> </a>
  VdrvControlCustomProcPtr drvControlCustom;<a name="1280857"> </a>
} VdrvAPIType;<a name="1280858"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1280859"> </a>Value Descriptions
</h4>

<h5 class="TgTable">
  <a name="1280896"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1280862"> </a><div class="CellBody"><span style="font-family: monospace">drvOpen</span> </div></td>
    <td><a name="1280864"> </a><div class="CellBody">Pointer to the driver open function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280866"> </a><div class="CellBody"><span style="font-family: monospace">drvClose</span> </div></td>
    <td><a name="1280868"> </a><div class="CellBody">Pointer to the driver close function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280870"> </a><div class="CellBody"><span style="font-family: monospace">drvControl</span> </div></td>
    <td><a name="1280872"> </a><div class="CellBody">Pointer to the driver control function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280874"> </a><div class="CellBody"><span style="font-family: monospace">drvStatus</span> </div></td>
    <td><a name="1280876"> </a><div class="CellBody">Pointer to the driver status function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280878"> </a><div class="CellBody"><span style="font-family: monospace">drvRead</span> </div></td>
    <td><a name="1280880"> </a><div class="CellBody">Pointer to the driver read function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280882"> </a><div class="CellBody"><span style="font-family: monospace">drvWrite</span> </div></td>
    <td><a name="1280884"> </a><div class="CellBody">Pointer to the driver write function.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280886"> </a><div class="CellBody"><span style="font-family: monospace">drvOpenV4</span> </div></td>
    <td><a name="1280890"> </a><div class="CellBody">Pointer to the driver open function for <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280893"> </a><div class="CellBody"><span style="font-family: monospace">drvControlCustom</span> </div></td>
    <td><a name="1280895"> </a><div class="CellBody">Pointer to the driver custom control function. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1280897"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1280900"> </a><span style="font-family: monospace">drvOpenV4</span> and <span style="font-family: monospace">drvControlCustom</span> are declared if both <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> and <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> are present. 
</p>

<h2 class="HBHeadB">
  <a name="1280906"> </a>VdrvConfigType
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280908"> </a>The <span style="font-family: monospace">VdrvConfigType</span> structure specifies parameters for opening a serial port. This structure is passed as a parameter to <a href="SerialDriver.html#1281555"><span style="font-family: monospace">VdrvOpenProcV4Ptr</span></a>. 
</p>
<pre  class="Preformatted">
typedef struct VdrvConfigType {<a name="1280912"> </a>
  UInt32 baud;<a name="1280913"> </a>
  UInt32 drvrId;<a name="1280914"> </a>
  UInt32 function;<a name="1280915"> </a>
  MemPtr drvrDataP;<a name="1280916"> </a>
  UInt16 drvrDataSize;<a name="1280917"> </a>
  UInt32 sysReserved1;<a name="1280918"> </a>
  UInt32 sysReserved2; <a name="1280919"> </a>
} VdrvConfigType;<a name="1280920"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1280921"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1280969"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1280924"> </a><div class="CellBody"><span style="font-family: monospace">baud</span> </div></td>
    <td><a name="1280926"> </a><div class="CellBody">Baud rate at which to open the connection. Serial drivers that do not require baud rates ignore this field. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280928"> </a><div class="CellBody"><span style="font-family: monospace">drvrId</span> </div></td>
    <td><a name="1280930"> </a><div class="CellBody">Creator ID of the application or library that is using the Serial Manager. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280932"> </a><div class="CellBody"><span style="font-family: monospace">function</span> </div></td>
    <td><a name="1280934"> </a><div class="CellBody">The reason why the port was opened. Specify the creator ID of the application that is opening the port or one of the following values: </div><h5 class="P1"><a name="1280936"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncUndefined</span> </td><td valign="top">Undefined function. This is the default value for this field.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1280938"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncPPPSession</span></td><td valign="top">The connection is to be used for the PPP interface. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1280940"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncSLIPSession</span></td><td valign="top">The connection is to be used for the SLIP session. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1280942"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncDebugger</span></td><td valign="top">The connection is to be used for a debugging session. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1280944"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncHotSync</span></td><td valign="top">The connection is to be used for a HotSync operation. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1280946"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncConsole</span> </td><td valign="top">The connection is to the debugging console. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1280948"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serFncTelephony</span> </td><td valign="top">The connection is to the telephony library. </td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
  <tr valign="top">
    <td><a name="1280950"> </a><div class="CellBody"><br></div></td>
    <td><a name="1280952"> </a><div class="CellBody">The <span style="font-family: monospace">function</span> field is used by protocols such as USB and Bluetooth that perform different setup tasks based on which type of application is using them. RS-232 drivers ignore this parameter. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280954"> </a><div class="CellBody"><span style="font-family: monospace">drvrDataP</span> </div></td>
    <td><a name="1280956"> </a><div class="CellBody">Pointer to a driver-specific data block. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280958"> </a><div class="CellBody"><span style="font-family: monospace">drvrDataSize</span> </div></td>
    <td><a name="1280960"> </a><div class="CellBody">The size of the data block pointed to by <span style="font-family: monospace">drvrDataP</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280962"> </a><div class="CellBody"><span style="font-family: monospace">sysReserved1</span> </div></td>
    <td><a name="1280964"> </a><div class="CellBody">Reserved for future use. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1280966"> </a><div class="CellBody"><span style="font-family: monospace">sysReserved2</span> </div></td>
    <td><a name="1280968"> </a><div class="CellBody">Reserved for future use. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1280970"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1280973"> </a>This structure is only defined if both <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> and <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> are present. 
</p>

<h2 class="HBHeadB">
  <a name="1280979"> </a>VdrvCtlOpCodeEnum
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1280981"> </a>The <span style="font-family: monospace">VdrvCtlOpCodeEnum</span> enumerated type specifies a serial control operation. You should handle each of these constants when passed for the <span style="font-family: monospace">controlCode</span> parameter to the <a href="SerialDriver.html#1281404"><span style="font-family: monospace">VdrvControlProcPtr</span></a> call.
</p>
<pre  class="Preformatted">
typedef enum VdrvCtlOpCodeEnum {<a name="1280985"> </a>
  vdrvOpCodeNoOp = 0, <a name="1280986"> </a>
  vdrvOpCodeSetBaudRate = 0x1000,<a name="1280987"> </a>
  vdrvOpCodeSetSettingsFlags,<a name="1280988"> </a>
  vdrvOpCodeSetCtsTimeout,<a name="1280989"> </a>
  vdrvOpCodeClearErr,<a name="1280990"> </a>
  vdrvOpCodeSetSleepMode,<a name="1280991"> </a>
  vdrvOpCodeSetWakeupMode,<a name="1280992"> </a>
  vdrvOpCodeFIFOCount,<a name="1280993"> </a>
  vdrvOpCodeStartBreak,<a name="1280994"> </a>
  vdrvOpCodeStopBreak,<a name="1280995"> </a>
  vdrvOpCodeStartLoopback,<a name="1280996"> </a>
  vdrvOpCodeStopLoopback,<a name="1280997"> </a>
  vdrvOpCodeFlushTxFIFO,<a name="1280998"> </a>
  vdrvOpCodeFlushRxFIFO,<a name="1280999"> </a>
  vdrvOpCodeSendBufferedData,<a name="1281000"> </a>
  vdrvOpCodeRcvCheckIdle,<a name="1281001"> </a>
  vdrvOpCodeEmuSetBlockingHook,<a name="1281002"> </a>
  vdrvOpCodeGetOptTransmitSize,<a name="1281003"> </a>
  vdrvOpCodeGetMaxRcvBlockSize,<a name="1281004"> </a>
  vdrvOpCodeNotifyBytesReadFromQ,<a name="1281005"> </a>
  vdrvOpCodeSetDTRAsserted,<a name="1281006"> </a>
  vdrvOpCodeGetDTRAsserted,<a name="1281007"> </a>
  vdrvOpCodeWaitForConfiguration,<a name="1281008"> </a>
  vdrvOpCodeGetUSBDeviceDescriptor,<a name="1281009"> </a>
  vdrvOpCodeGetUSBConfigDescriptor,<a name="1281010"> </a>
  vdrvOpCodeEnableIRDA,<a name="1281011"> </a>
  vdrvOpCodeDisableIRDA,<a name="1281012"> </a>
  vdrvOpCodeEnableUART,<a name="1281013"> </a>
  vdrvOpCodeDisableUART,<a name="1281014"> </a>
  vdrvOpCodeRxEnable,<a name="1281015"> </a>
  vdrvOpCodeRxDisable,<a name="1281016"> </a>
  vdrvOpCodeLineEnable,<a name="1281017"> </a>
  vdrvOpCodeEnableUARTInterrupts,<a name="1281018"> </a>
  vdrvOpCodeDisableUARTInterrupts,<a name="1281019"> </a>
  vdrvOpCodeSetReceiveQueue,<a name="1281020"> </a>
  vdrvOpCodeSaveState,<a name="1281021"> </a>
  vdrvOpCodeRestoreState,<a name="1281022"> </a>
  vdrvOpCodeSetYieldPortCallback,<a name="1281023"> </a>
  vdrvOpCodesetYieldPortRefCon,<a name="1281024"> </a>
  vdrvOpCodeUserDef = 0x2000,<a name="1281025"> </a>
  vdrvOpCodeSystem = 0x7000,<a name="1281026"> </a>
  vdrvOpCodeCustom = 0x8000<a name="1281027"> </a>
} VdrvCtlOpCodeEnum;<a name="1281028"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1281029"> </a>Value Descriptions
</h4>

<h5 class="TgTable">
  <a name="1281201"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1281032"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeSetBaudRate</span> </div></td>
    <td><a name="1281034"> </a><div class="CellBody">Sets the baud rate.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281036"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeSetSettingsFlags</span> </div></td>
    <td><a name="1281038"> </a><div class="CellBody">Sets the data transmission options. The bit flags are described in <a href="SerialManager.html#1288078">Serial Settings Constants</a>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281043"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeSetCtsTimeout</span> </div></td>
    <td><a name="1281045"> </a><div class="CellBody">Hardware handshake timeout.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281047"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeClearErr</span> </div></td>
    <td><a name="1281049"> </a><div class="CellBody">Clears the hardware error state.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281051"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeSetSleepMode</span> </div></td>
    <td><a name="1281053"> </a><div class="CellBody">Puts the port in sleep mode (not typically used for virtual drivers).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281055"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeSetWakeupMode</span> </div></td>
    <td><a name="1281057"> </a><div class="CellBody">Wakes up the port from sleep mode (not typically used for virtual drivers).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281059"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeFIFOCount</span> </div></td>
    <td><a name="1281061"> </a><div class="CellBody">Returns the number of bytes currently in the FIFO (or best estimate). </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281063"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeStartBreak</span> </div></td>
    <td><a name="1281065"> </a><div class="CellBody">Sends a break character or enables the sending of break characters.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281067"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeStopBreak</span> </div></td>
    <td><a name="1281069"> </a><div class="CellBody">Stops sending break characters.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281071"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeStartLoopback</span> </div></td>
    <td><a name="1281073"> </a><div class="CellBody">Starts loopback mode (not typically used for virtual drivers).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281075"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeStopLoopback</span> </div></td>
    <td><a name="1281077"> </a><div class="CellBody">Stops loopback mode (not typically used for virtual drivers).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281079"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeFlushTxFIFO</span> </div></td>
    <td><a name="1281081"> </a><div class="CellBody">Flushes the contents of the transmit FIFO.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281083"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeFlushRxFIFO</span> </div></td>
    <td><a name="1281085"> </a><div class="CellBody">Flushes the contents of the receive FIFO.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281087"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeSendBufferedData</span> </div></td>
    <td><a name="1281089"> </a><div class="CellBody">Notifies virtual device to send any buffered data it has not emptied from its internal buffers.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281091"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeRcvCheckIdle</span> </div></td>
    <td><a name="1281093"> </a><div class="CellBody">Called periodically to allow the virtual device time to check if there is data to be received. Because virtual devices execute in the same thread as applications, they can be prevented from handling notifications of received data.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281095"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeEmuSetBlockingHook</span> </div></td>
    <td><a name="1281097"> </a><div class="CellBody">Special op code for the Simulator.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281099"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeGetOptTransmitSize</span> </div></td>
    <td><a name="1281101"> </a><div class="CellBody">Returns the optimum buffer size for sending data or returns 0 to specify any buffer size is acceptable.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281103"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeGetMaxRcvBlockSize</span> </div></td>
    <td><a name="1281105"> </a><div class="CellBody">Returns the maximum receive block size that the Serial Manager should request from the virtual device. Can be used to implement flow control.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281107"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeNotifyBytesReadFromQ</span> </div></td>
    <td><a name="1281109"> </a><div class="CellBody">Tells the virtual device that some number of bytes have been read from the receive queue by the client application. Can be used to implement flow control.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281111"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeSetDTRAsserted</span> </div></td>
    <td><a name="1281113"> </a><div class="CellBody">Asserts or de-asserts the DTR signal. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281115"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeGetDTRAsserted</span> </div></td>
    <td><a name="1281117"> </a><div class="CellBody">Gets the status of the DTR signal. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281119"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeWaitForConfiguration</span> </div></td>
    <td><a name="1281121"> </a><div class="CellBody">Waits for USB enumeration to complete. Called from the send and receive functions of the Serial Manager. The driver should have a timeout for how long it waits for enumeration to complete. The driver should return with no error if enumeration has already occurred or has occurred within the driver's timeout. If the enumeration has not occurred within the driver's timeout, the driver should return <span style="font-family: monospace">serErrTimeOut</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281123"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeGetUSBDeviceDescriptor</span> </div></td>
    <td><a name="1281125"> </a><div class="CellBody">Retrieves the device descriptor of a USB driver. Used to gather information about the device's capabilities. Implementation of this op code is optional. If the driver chooses to implement this op code, then the driver should return a pointer to the device descriptor. A driver that chooses not to implement this op code should return <span style="font-family: monospace">serErrNotSupported</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281127"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeGetUSBConfigDescriptor</span> </div></td>
    <td><a name="1281129"> </a><div class="CellBody">Retrieves the configuration descriptor of a USB driver. Used to gather information about the device's capabilities. Implementation of this op code is optional. If the driver chooses to implement this op code, then the driver should return a pointer to the device descriptor. A driver that chooses not to implement this op code should return <span style="font-family: monospace">serErrNotSupported</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281131"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeEnableIRDA</span> </div></td>
    <td><a name="1281133"> </a><div class="CellBody">Enable the IrDA mode and power up the IR line drivers.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281135"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeDisableIRDA</span> </div></td>
    <td><a name="1281137"> </a><div class="CellBody">Disable the IrDA mode and disable the IR line drivers.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281139"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeEnableUART</span> </div></td>
    <td><a name="1281141"> </a><div class="CellBody">Powers up the UART and the line drivers.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281143"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeDisableUART</span> </div></td>
    <td><a name="1281145"> </a><div class="CellBody">Powers down the UART and the line drivers.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281147"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeRxEnable</span> </div></td>
    <td><a name="1281149"> </a><div class="CellBody">Enables the receive FIFO, enables UART interrupts, and does whatever else is necessary to allow the UART to receive data.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281151"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeRxDisable</span> </div></td>
    <td><a name="1281153"> </a><div class="CellBody">Disables the receive FIFO and UART interrupts and does whatever is needed to prevent the UART from receiving data.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281155"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeLineEnable</span> </div></td>
    <td><a name="1281157"> </a><div class="CellBody">Enables the main serial line driver for the UART.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281159"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeEnableUARTInterrupts</span> </div></td>
    <td><a name="1281161"> </a><div class="CellBody">Enables the appropriate UART receive interrupts.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281163"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeDisableUARTInterrupts</span> </div></td>
    <td><a name="1281165"> </a><div class="CellBody">Disables all UART interrupts.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281167"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeSetReceiveQueue</span> </div></td>
    <td><a name="1281169"> </a><div class="CellBody">This op code is used by the Serial Manager to set the driver's receive queue. This control code is called when a driver that has previously been opened as a background port is opened as a fully open bidirectional port. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281171"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeSaveState</span> </div></td>
    <td><a name="1281173"> </a><div class="CellBody">Invoked when this port is yielded. This is a hook for the driver to save any current state. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281175"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeRestoreState</span> </div></td>
    <td><a name="1281177"> </a><div class="CellBody">Invoked when the foreground port is closed and this port can become the foreground port. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281179"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeSetYieldPortCallback</span> </div></td>
    <td><a name="1281181"> </a><div class="CellBody">Set the function to be called if the Serial Manager attempts to open another port when this one is open. This op code is for system use only. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281183"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeSetYieldPortRefCon</span> </div></td>
    <td><a name="1281185"> </a><div class="CellBody">Data to pass to the yield port callback function. System use only. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281187"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdvrOpCodeUserDef</span> </div></td>
    <td><a name="1281189"> </a><div class="CellBody">User defined function invoked through <a href="SerialManager.html#1288349"><span style="font-family: monospace">SrmControl</span></a>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281194"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeSystem</span> </div></td>
    <td><a name="1281196"> </a><div class="CellBody">Reserves op codes between 0x7000 and 0x8000 for system use. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281198"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">vdrvOpCodeCustom</span> </div></td>
    <td><a name="1281200"> </a><div class="CellBody">Reserves op codes greater than 0x8000 for driver-specific use. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1281202"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281203"> </a>The op codes starting at <span style="font-family: monospace">vdrvOpCodeWaitForConfiguration</span> are defined only if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. The op codes for yieldable ports and custom operations are defined only if both <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present as well. 
</p>

<h2 class="HaHeadA">
  <a name="1281211"> </a>Driver Constants 
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1281213"> </a>Driver Version Constants
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1281214"> </a>The driver version constants specify which version of the driver API is implemented by this driver. The <a href="SerialDriver.html#1281346"><span style="font-family: monospace">DrvEntryPointProcPtr</span></a> function passes this value back to the Serial Manager in the <span style="font-family: monospace">drvrVersion</span> field of the <a href="SerialDriver.html#1280621"><span style="font-family: monospace">DrvrInfoType</span></a> function. 
</p>

<h5 class="TgTable">
  <a name="1281255"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1281223"> </a><div class="CellHeading">Constant</div></th>
    <th><a name="1281225"> </a><div class="CellHeading">Value</div></th>
    <th><a name="1281227"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1281230"> </a><div class="CellBody"><span style="font-family: monospace">kDrvrVersion</span> </div></td>
    <td><a name="1281232"> </a><div class="CellBody">4</div></td>
    <td><a name="1281234"> </a><div class="CellBody">The latest version of the API. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281237"> </a><div class="CellBody"><span style="font-family: monospace">kDrvrVersion3</span> </div></td>
    <td><a name="1281239"> </a><div class="CellBody">3</div></td>
    <td><a name="1281241"> </a><div class="CellBody">The version of the driver API that corresponds to <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> (which ships with roughly Palm OS<sup>®</sup> 3.3 up to Palm OS 4.0). </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281247"> </a><div class="CellBody"><span style="font-family: monospace">kDrvrVersion4</span> </div></td>
    <td><a name="1281249"> </a><div class="CellBody">4</div></td>
    <td><a name="1281251"> </a><div class="CellBody">The version of the driver API that corresponds to <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> (which ships with roughly Palm OS 4.0 and higher). </div></td>
  </tr>
</table>




</h5>
<h2 class="HBHeadB">
  <a name="1281259"> </a>Port Feature Constants
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1281260"> </a>The port feature constants are flags that describe serial hardware capabilities.
</p>

<h5 class="TgTable">
  <a name="1281334"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1281263"> </a><div class="CellHeading">Constant</div></th>
    <th><a name="1281265"> </a><div class="CellHeading">Value</div></th>
    <th><a name="1281267"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1281269"> </a><div class="CellBody"><span style="font-family: monospace">portPhysicalPort</span> </div></td>
    <td><a name="1281271"> </a><div class="CellBody">0x00000001 </div></td>
    <td><a name="1281273"> </a><div class="CellBody">Should be set for a physical port, unset for a virtual port.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281275"> </a><div class="CellBody"><span style="font-family: monospace">portBkgndModeSupported</span> </div></td>
    <td><a name="1281277"> </a><div class="CellBody">0x00000002</div></td>
    <td><a name="1281279"> </a><div class="CellBody">Denotes that this port can be used for background ports. This flag is only applicable to virtual drivers. Background mode support is implied on physical drivers. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281281"> </a><div class="CellBody"><span style="font-family: monospace">portRS232Capable</span> </div></td>
    <td><a name="1281283"> </a><div class="CellBody">0x00000004 </div></td>
    <td><a name="1281285"> </a><div class="CellBody">Set if this hardware has an RS-232 port.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281287"> </a><div class="CellBody"><span style="font-family: monospace">portIRDACapable</span> </div></td>
    <td><a name="1281289"> </a><div class="CellBody">0x00000008 </div></td>
    <td><a name="1281291"> </a><div class="CellBody">Set if this hardware has an IR port and supports IrDA mode.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281293"> </a><div class="CellBody"><span style="font-family: monospace">portCradlePort</span> </div></td>
    <td><a name="1281295"> </a><div class="CellBody">0x00000010 </div></td>
    <td><a name="1281297"> </a><div class="CellBody">Set if this hardware controls the cradle port.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281299"> </a><div class="CellBody"><span style="font-family: monospace">portExternalPort</span> </div></td>
    <td><a name="1281301"> </a><div class="CellBody">0x00000020 </div></td>
    <td><a name="1281303"> </a><div class="CellBody">Set if this hardware port is external or on a memory card.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281305"> </a><div class="CellBody"><span style="font-family: monospace">portModemPort</span> </div></td>
    <td><a name="1281307"> </a><div class="CellBody">0x00000040 </div></td>
    <td><a name="1281309"> </a><div class="CellBody">Set if this hardware communicates with a modem.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281311"> </a><div class="CellBody"><span style="font-family: monospace">portCncMgrVisible</span> </div></td>
    <td><a name="1281313"> </a><div class="CellBody">0x00000080 </div></td>
    <td><a name="1281315"> </a><div class="CellBody">Set if this serial port's name is to be displayed in the Connection panel.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281317"> </a><div class="CellBody"><span style="font-family: monospace">portConsolePort</span> </div></td>
    <td><a name="1281319"> </a><div class="CellBody">0x00000100</div></td>
    <td><a name="1281321"> </a><div class="CellBody">Denotes this hardware controls the console port. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281323"> </a><div class="CellBody"><span style="font-family: monospace">portUSBCapable</span> </div></td>
    <td><a name="1281325"> </a><div class="CellBody">0x00000200 </div></td>
    <td><a name="1281327"> </a><div class="CellBody">Set if this hardware has a USB port. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281329"> </a><div class="CellBody"><span style="font-family: monospace">portPrivateUse</span> </div></td>
    <td><a name="1281331"> </a><div class="CellBody">0x00001000 </div></td>
    <td><a name="1281333"> </a><div class="CellBody">Set if this driver is for special software and not general applications.</div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1281335"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281338"> </a>USB support is only available if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. 
</p>

<h2 class="HaHeadA">
  <a name="1281341"> </a>Virtual Driver-Defined Functions 
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1281343"> </a>The functions in this section must be defined by your virtual driver.
</p>

<h2 class="HBHeadB">
  <a name="1281346"> </a>DrvEntryPointProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281347"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281348"> </a>Entry point for the virtual driver.
</p>
<h4 class="RefSide">
  <a name="1281349"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281350"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281351"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281352"> </a>Err (*DrvEntryPointProcPtr) (DrvrEntryOpCodeEnum opCode, void *uartData)
</p>
<h4 class="RefSide">
  <a name="1281353"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281354"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">opCode</span></td><td valign="top">Entry function code.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281355"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">uartData</span></td><td valign="top">Pointer to data specific to <span style="font-family: monospace">opCode</span>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281356"> </a>Result 
</h4>
<h5 class="P1"><a name="1281357"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span> </td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281358"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-1</td><td valign="top">The op code is invalid or the hardware could not be found.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281359"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281360"> </a>This function's purpose is based on the value of the <span style="font-family: monospace">opCode</span> parameter. The three possible codes are <span style="font-family: monospace">drvrEntryGetUartFeatures,</span> <span style="font-family: monospace">drvrEntryGetDrvrFuncts</span>, and <span style="font-family: monospace">drvrEntryGetUartFtrsNEntries</span>.
</p>
<p class="Body">
  <a name="1281361"> </a><span style="font-family: monospace">DrvEntryPoint</span> is called with the <span style="font-family: monospace">drvrEntryGetUartFeatures</span> code when the Serial Manager is installed into the system at boot time and is looking for all installed drivers. When this op code is set, the <span style="font-family: monospace">uartData</span> pointer points to a <a href="SerialDriver.html#1280621"><span style="font-family: monospace">DrvrInfoType</span></a> structure. This function does not allocate the structure, it just fills in the fields with information.
</p>
<p class="Body">
  <a name="1281365"> </a>This function should check to make sure the associated serial device can operate under the current OS and system settings. If the hardware cannot be found, the function should leave the <span style="font-family: monospace">DrvrInfoType</span> struct untouched and return a -1 error.
</p>
<p class="Body">
  <a name="1281366"> </a>The driver needs to supply a string that describes the port it manages. This string is displayed to the user in the Connection panel and is returned by the <a href="SerialManager.html#1288705"><span style="font-family: monospace">SrmGetDeviceInfo</span></a> function. To set this string, copy it into the <span style="font-family: monospace">portDesc</span> field of the <span style="font-family: monospace">DrvrInfoType</span> structure. Alternatively, you can supply this string in a driver resource of type 'tSTR' and id <span style="font-family: monospace">kPortDescStrID</span>.
</p>
<p class="Body">
  <a name="1281370"> </a>If the <span style="font-family: monospace">DrvrInfoType</span> structure has a positive value in the <span style="font-family: monospace">multipleEnumerations</span> field upon return, the Serial Manager defines one port for each entry in the driver table. The <span style="font-family: monospace">DrvEntryPoint</span> function is called again, this time with the <span style="font-family: monospace">drvrEntryGetUartFtrsNEntries</span> code. The <span style="font-family: monospace">uartData</span> pointer points to a new <span style="font-family: monospace">DrvrInfoType</span> structure whose <span style="font-family: monospace">multipleEnumerations</span> field indicates which port is to be defined. The function should supply all information specific to this port. 
</p>
<p class="Body">
  <a name="1281371"> </a><span style="font-family: monospace">DrvEntryPoint</span> is called with the <span style="font-family: monospace">drvrEntryGetDrvrFuncts</span> code when a virtual port is opened. The <span style="font-family: monospace">uartData</span> pointer points to a <a href="SerialDriver.html#1280843"><span style="font-family: monospace">VdrvAPIType</span></a> structure and <span style="font-family: monospace">DrvEntryPoint</span> must fill in the fields of this structure with appropriate function pointers.
</p>
<h4 class="RefSide">
  <a name="1281375"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281379"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>
<p class="Body">
  <a name="1281382"> </a>The <span style="font-family: monospace">drvrEntryGetUartFtrsNEntries</span> is only supported if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. This function is fully backwards compatible. Passing 0 for the <span style="font-family: monospace">multipleEnumerations</span> field defines a single port for the driver. 
</p>

<h2 class="HBHeadB">
  <a name="1281386"> </a>VdrvCloseProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281387"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281388"> </a>Handles all activities needed to close the virtual device.
</p>
<h4 class="RefSide">
  <a name="1281389"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281390"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281391"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281392"> </a>Err (*VdrvCloseProcPtr) (VdrvDataPtr drvrData)
</p>
<h4 class="RefSide">
  <a name="1281393"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281394"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">drvrData</span></td><td valign="top">Pointer to the driver's private global area.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281395"> </a>Result 
</h4>
<h5 class="P1"><a name="1281396"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span> </td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281397"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281401"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281404"> </a>VdrvControlProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281405"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281406"> </a>Extends the <span style="font-family: monospace">SrmControl</span> function to the level of the virtual device.
</p>
<h4 class="RefSide">
  <a name="1281407"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281408"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281409"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281410"> </a>Err (*VdrvControlProcPtr) (VdrvDataPtr drvrData, VdrvCtlOpCodeEnum controlCode, void *controlData, UInt16 *controlDataLen)
</p>
<h4 class="RefSide">
  <a name="1281411"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281412"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">drvrData</span></td><td valign="top">Pointer to the driver's private global area.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281413"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">controlCode</span></td><td valign="top">Control function op code. One of the op codes listed in the <a href="SerialDriver.html#1280979"><span style="font-family: monospace">VdrvCtlOpCodeEnum</span></a> type.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281417"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">controlData</span></td><td valign="top">Pointer to data for the specified control function.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281418"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">controlDataLen</span></td><td valign="top">Pointer to length of control data being passed in or out.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281419"> </a>Result 
</h4>
<h5 class="P1"><a name="1281420"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span></td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281421"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serErrNotSupported</td><td valign="top">controlCode</span> not supported.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281422"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serErrBadParam</td><td valign="top">controlData</span> or <span style="font-family: monospace">controlDataLen</span> is bad.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281423"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281424"> </a>This function should support the op codes listed in the <a href="SerialDriver.html#1280979"><span style="font-family: monospace">VdrvCtlOpCodeEnum</span></a> type. If this function does not support an op code, it must return the <span style="font-family: monospace">serErrNotSupported</span> error code for that op code.
</p>
<p class="Body">
  <a name="1281431"> </a><a href="SerialDriver.html#1281438">Table 64.1</a> shows what is passed for the <span style="font-family: monospace">controlData</span> and <span style="font-family: monospace">controlDataLen</span> parameters for each of the control codes that use them. Control codes not listed do not use these parameters.
</p>

<h5 class="TgTable">
  <a name="1281494"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="1281438"> </a><div class="TableTitle">Table 64.1  VDrvControlProcPtr Parameters </div></caption>
  <tr valign="top">
    <td><a name="1281442"> </a><div class="CellBody"><span style="font-family: monospace">vdvrOpCodeSetBaudRate</span> </div></td>
    <td><a name="1281444"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlData</span> = Pointer to <span style="font-family: monospace">Int32</span> (baud rate), </div><a name="1281445"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Int32)</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281447"> </a><div class="CellBody"><span style="font-family: monospace">vdvrOpCodeSetSettingsFlags</span> </div></td>
    <td><a name="1281449"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlData</span> = Pointer to <span style="font-family: monospace">UInt32</span> (bitfield; see <a href="SerialManager.html#1288078">Serial Settings Constants</a>)</div><a name="1281453"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(UInt32)</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281455"> </a><div class="CellBody"><span style="font-family: monospace">vdvrOpCodeFIFOCount</span> </div></td>
    <td><a name="1281457"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlData</span> = Pointer to <span style="font-family: monospace">Int16</span>, which contains the number of bytes in the FIFO. </div><a name="1281458"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Int16)</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281460"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeGetOptTransmitSize</span> </div></td>
    <td><a name="1281462"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">controlData</span> = Pointer to <span style="font-family: monospace">Int32</span> (buffer size),</div><a name="1281463"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Int32)</span>.</div><a name="1281464"> </a><div class="CellBody">Return the optimum buffer size for sending data, or 0 to specify any buffer size is acceptable.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281466"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeGetMaxRcvBlockSize</span> </div></td>
    <td><a name="1281468"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">controlData</span> = Pointer to <span style="font-family: monospace">Int32</span> (block size),</div><a name="1281469"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Int32)</span>.</div><a name="1281470"> </a><div class="CellBody">Return the maximum block size that the Serial Manager should request from the virtual device.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281472"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeNotifyBytes<br>ReadFromQ</span> </div></td>
    <td><a name="1281474"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlData</span> = Pointer to <span style="font-family: monospace">Int32</span> (number of bytes read),</div><a name="1281475"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Int32)</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281477"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeSetDTRAsserted</span> </div></td>
    <td><a name="1281479"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlData</span> = Pointer to Boolean indicating whether to enable or disable DTR. </div><a name="1281480"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Boolean)</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281482"> </a><div class="CellBody"><span style="font-family: monospace">vdrvOpCodeGetDTRAsserted</span> </div></td>
    <td><a name="1281484"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">controlData</span> = Pointer to Boolean indicating whether DTR is enabled. </div><a name="1281485"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">controlDataLen</span> = Pointer to <span style="font-family: monospace">sizeof(Boolean)</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1281487"> </a><div class="CellBody"><span style="font-family: monospace">vdvrOpCodeUserDef</span> </div></td>
    <td><a name="1281489"> </a><div class="CellBody">&lt;-&gt; <span style="font-family: monospace">controlData </span>= Pointer from <a href="SerialManager.html#1288349"><span style="font-family: monospace">SrmControl</span></a> (user-defined data), </div><a name="1281493"> </a><div class="CellBody">&lt;-&gt; <span style="font-family: monospace">controlDataLen </span>= Pointer to <span style="font-family: monospace">sizeof(Int32)</span>.</div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1281495"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281499"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281502"> </a>VdrvControlCustomProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281503"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281504"> </a>Extends the <span style="font-family: monospace">SrmCustomControl</span> function to the level of the virtual device.
</p>
<h4 class="RefSide">
  <a name="1281505"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281506"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281507"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281508"> </a>Err (*VdrvControlCustomProcPtr) (VdrvDataPtr drvrData, UInt16 opCode, UInt32 creator, void *controlData, void *controlDataLenP)
</p>
<h4 class="RefSide">
  <a name="1281509"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281510"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">drvrData</span></td><td valign="top">Pointer to the driver's private global area.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281511"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">controlCode</span></td><td valign="top">Control function op code. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281512"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">creator</span></td><td valign="top">Creator ID of the driver that defines the op code. The combination of creator ID and op code uniquely identifies the operation to be performed. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281513"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">controlData</span></td><td valign="top">Pointer to data for the specified control function.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281514"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">controlDataLen</span></td><td valign="top">Pointer to length of control data being passed in or out.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281515"> </a>Result 
</h4>
<h5 class="P1"><a name="1281516"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span></td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281517"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serErrNotSupported</td><td valign="top">controlCode</span> not supported.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281518"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serErrBadParam</td><td valign="top">controlData</span> or <span style="font-family: monospace">controlDataLen</span> is bad.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281519"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281520"> </a>This function is a mechanism for a virtual driver to create control codes specific to that driver, allowing for the support of new technologies that have interfaces through the Serial Manager. 
</p>
<h4 class="RefSide">
  <a name="1281521"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281525"> </a>Implemented only if both <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> and <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> are present. 
</p>

<h2 class="HBHeadB">
  <a name="1281531"> </a>VdrvOpenProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281532"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281533"> </a>Initializes the virtual device to begin communication.
</p>
<h4 class="RefSide">
  <a name="1281534"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281535"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281536"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281537"> </a>Err (*VdrvOpenProcPtr) (VdrvDataPtr *drvrData, UInt32 baudRate, DrvrHWRcvQPtr rcvQP)
</p>
<h4 class="RefSide">
  <a name="1281538"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281539"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">drvrData</span></td><td valign="top">Pointer to a pointer to the driver's private global area (allocated by this function). A pointer to this private global area is passed to the other virtual driver functions.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281540"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">baudRate</span></td><td valign="top">Initial baud rate setting.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281541"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">rcvQP</span><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"></td><td valign="top"></span>Pointer to the driver's receive queue buffer structure. For details on the fields, see <a href="SerialDriver.html#1280689"><span style="font-family: monospace">DrvrRcvQType</span></a>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281545"> </a>Result 
</h4>
<h5 class="P1"><a name="1281546"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span> </td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281547"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281548"> </a>This function must allocate and initialize any global variables (and pass back a pointer to a pointer to them in <span style="font-family: monospace">drvrDataP</span>), do any set-up necessary for communicating with other software, and save the <span style="font-family: monospace">rcvQP</span> pointer since it will need the functions and pointers to structures enclosed within to be able to save received data into the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281549"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281553"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281555"> </a>VdrvOpenProcV4Ptr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281556"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281557"> </a>Initializes the virtual device to begin communication.
</p>
<h4 class="RefSide">
  <a name="1281558"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281559"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281560"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281561"> </a>Err (*VdrvOpenProcV4Ptr) (VdrvDataPtr *drvrData, VdrvConfigPtr configP, DrvrHWRcvQPtr rcvQP)
</p>
<h4 class="RefSide">
  <a name="1281562"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281563"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">drvrData</span></td><td valign="top">Pointer to a pointer to the driver's private global area (allocated by this function). A pointer to this private global area is passed to the other virtual driver functions.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281564"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">configP</span></td><td valign="top">Pointer to the configuration structure specifying the port's properties. See <a href="SerialDriver.html#1280906"><span style="font-family: monospace">VdrvConfigType</span></a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281568"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">rcvQP</span><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"></td><td valign="top"></span>Pointer to the driver's receive queue buffer structure. For details on the fields, see <a href="SerialDriver.html#1280689"><span style="font-family: monospace">DrvrRcvQType</span></a>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281572"> </a>Result 
</h4>
<h5 class="P1"><a name="1281573"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span> </td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281574"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281575"> </a>This function must allocate and initialize any global variables (and pass back a pointer to a pointer to them in <span style="font-family: monospace">drvrDataP</span>), do any set-up necessary for communicating with other software, and save the <span style="font-family: monospace">rcvQP</span> pointer since it will need the functions and pointers to structures enclosed within to be able to save received data into the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281576"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281580"> </a>Implemented only if both <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> and <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> are present. 
</p>

<h2 class="HBHeadB">
  <a name="1281586"> </a>VdrvStatusProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281587"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281588"> </a>Returns virtual device status.
</p>
<h4 class="RefSide">
  <a name="1281589"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281590"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281591"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281592"> </a>UInt16 (*VDrvStatusProcPtr) (VdrvDataPtr drvrData)
</p>
<h4 class="RefSide">
  <a name="1281593"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281594"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">drvrData</span></td><td valign="top">Pointer to the driver's private global area.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281595"> </a>Result 
</h4>
<p class="Body">
  <a name="1281596"> </a>An unsigned long bitfield denoting the status of the virtual device, but only if the virtual device is emulating hardware. The individual bit flags are described in the <a href="SerialDriver.html#1280753"><span style="font-family: monospace">DrvrStatusEnum</span></a> type.
</p>
<h4 class="RefSide">
  <a name="1281600"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281601"> </a>Generally, status is returned only to the client application using the virtual device. The Serial Manager does not use status information from virtual devices.
</p>
<h4 class="RefSide">
  <a name="1281602"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281606"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281609"> </a>VdrvWriteProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281610"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281611"> </a>Writes a block of bytes.
</p>
<h4 class="RefSide">
  <a name="1281612"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281613"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281614"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281615"> </a>UInt32 (*VdrvWriteProcPtr) (VdrvDataPtr drvrDataP, void *bufP, UInt32 size, Err *errP)
</p>
<h4 class="RefSide">
  <a name="1281616"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281617"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">drvrDataP</span></td><td valign="top">Pointer to the driver's private global area.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281618"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufP</span></td><td valign="top">Pointer to buffer containing the data to be written to the virtual device.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281619"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">size</span></td><td valign="top">Number of bytes in the buffer <span style="font-family: monospace">bufP</span>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281620"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">errP</span></td><td valign="top">Pointer to an error code resulting from the operation. Zero is returned if there is no error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281621"> </a>Result 
</h4>
<p class="Body">
  <a name="1281622"> </a>Returns the actual number of bytes written.
</p>
<h4 class="RefSide">
  <a name="1281623"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281627"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HaHeadA">
  <a name="1281629"> </a>Serial Manager Queue Functions 
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1281631"> </a>The functions in this section are supplied by the Serial Manager to the virtual driver through the <a href="SerialDriver.html#1280689"><span style="font-family: monospace">DrvrRcvQType</span></a> passed to the <a href="SerialDriver.html#1281531"><span style="font-family: monospace">VdrvOpenProcPtr</span></a> function.
</p>

<h2 class="HBHeadB">
  <a name="1281640"> </a>GetSizeProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281641"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281642"> </a>Returns the total size of the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281643"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281644"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281645"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281646"> </a>typedef UInt32 (*GetSizeProcPtr) (void *theQ)
</p>
<h4 class="RefSide">
  <a name="1281647"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281648"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">theQ</span></td><td valign="top">Pointer to the receive queue.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281649"> </a>Result 
</h4>
<p class="Body">
  <a name="1281650"> </a>Size in bytes of the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281651"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281652"> </a>This function is useful for implementing flow control.
</p>
<h4 class="RefSide">
  <a name="1281653"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281657"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281660"> </a>GetSpaceProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281661"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281662"> </a>Returns the available space in the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281663"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281664"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281665"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281666"> </a>typedef UInt32 (*GetSpaceProcPtr) (void *theQ)
</p>
<h4 class="RefSide">
  <a name="1281667"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281668"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">theQ</span></td><td valign="top">Pointer to the receive queue.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281669"> </a>Result 
</h4>
<p class="Body">
  <a name="1281670"> </a>Size in bytes of the available space in the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281671"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281672"> </a>This function is useful for implementing flow control.
</p>
<h4 class="RefSide">
  <a name="1281673"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281677"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281679"> </a>SignalCheckPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281680"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281681"> </a>Check the queue to see if the semaphore needs to be signalled. 
</p>
<h4 class="RefSide">
  <a name="1281682"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281683"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281684"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281685"> </a>typedef void (*SignalCheckPtr) (void *theQ, UInt16 lineErrsP)
</p>
<h4 class="RefSide">
  <a name="1281686"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281687"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">theQ</span></td><td valign="top">Pointer to the receive queue. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281688"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">lineErrsP</span></td><td valign="top">Any serial line errors received should be reported here. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281689"> </a>Result 
</h4>
<p class="Body">
  <a name="1281690"> </a>Returns nothing.
</p>
<h4 class="RefSide">
  <a name="1281691"> </a>Comments 
</h4>
<p class="Body">
  <a name="1281692"> </a>This function signals that there is data to be received without writing anything to the receive queue. The <a href="SerialDriver.html#1281728"><span style="font-family: monospace">WriteByteProcPtr</span></a> and <a href="SerialDriver.html#1281706"><span style="font-family: monospace">WriteBlockProcPtr</span></a> functions also signal that there is data to be received after they have written the data to the queue. 
</p>
<h4 class="RefSide">
  <a name="1281699"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281703"> </a>Implemented only if <a href="CompatibilityApdx.html#970998">New Serial Manager Feature Set Version 2</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1281706"> </a>WriteBlockProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281707"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281708"> </a>Writes a block of bytes to the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281709"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281710"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281711"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281712"> </a>typedef Err (*WriteBlockProcPtr) (void *theQ, UInt8 *bufP, UInt16 size, UInt16 lineErrs)
</p>
<h4 class="RefSide">
  <a name="1281713"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281714"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">theQ</span></td><td valign="top">Pointer to the receive queue.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281715"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufP</span></td><td valign="top">Pointer to the buffer holding bytes to be written.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281716"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">size</span></td><td valign="top">Size of <span style="font-family: monospace">bufP</span>. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281717"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">lineErrs</span></td><td valign="top">Any serial line errors received should be reported here.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281718"> </a>Result 
</h4>
<h5 class="P1"><a name="1281719"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span> </td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281720"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serErrLineErr</td><td valign="top"></span>There was a software overrun line error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281721"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281725"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1281728"> </a>WriteByteProcPtr
<a href="#1280588"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1281729"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1281730"> </a>Writes one byte to the Serial Manager's receive queue.
</p>
<h4 class="RefSide">
  <a name="1281731"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1281732"> </a>SerialDrvr.h
</p>
<h4 class="RefSide">
  <a name="1281733"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1281734"> </a>typedef Err (*WriteByteProcPtr) (void *theQ, UInt8 theByte, UInt16 lineErrs)
</p>
<h4 class="RefSide">
  <a name="1281735"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1281736"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">theQ</span></td><td valign="top">Pointer to the receive queue.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281737"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">theByte</span></td><td valign="top">The byte to be written to the queue.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281738"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">lineErrs</span></td><td valign="top">Any serial line errors received should be reported here.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281739"> </a>Result 
</h4>
<h5 class="P1"><a name="1281740"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">errNone</span> </td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1281741"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">serErrLineErr</td><td valign="top"></span>There was a software overrun line error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1281742"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1281746"> </a>Implemented only if <a href="CompatibilityApdx.html#970844">New Serial Manager Feature Set Version 1</a> is present.
</p>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Reference_Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>