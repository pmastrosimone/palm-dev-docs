<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Network Communication</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:04:20">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="996393"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">7  Network Communication</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="Companion2TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="BTCompanion.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SSLIntro.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Companion2IX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Companion2Front.html">Palm OS® Programmer's Companion</a></p>
			<p class="SideTOC1-PartTab">Volume II Communications </p>
			<p class="SideTOC1"><a href="NetworkCommunication.html">7  Network Communication</a></p>
			
<p class="SideTOC2">
<a href="#996404">Net Library
</a></p>

<p class="SideTOC3">
<a href="#996465">About the Net Library
</a></p>

<p class="SideTOC3">
<a href="#996534">Net Library Usage Steps
</a></p>

<p class="SideTOC3">
<a href="#996569">Obtaining the Net Library's Reference Number
</a></p>

<p class="SideTOC3">
<a href="#996589">Setting Up Berkeley Socket API
</a></p>

<p class="SideTOC3">
<a href="#996603">Setup and Configuration Calls
</a></p>

<p class="SideTOC3">
<a href="#1006209">Opening the Net Library
</a></p>

<p class="SideTOC3">
<a href="#996982">Closing the Net Library
</a></p>

<p class="SideTOC3">
<a href="#997003">Version Checking
</a></p>

<p class="SideTOC3">
<a href="#997042">Network I/O and Utility Calls
</a></p>

<p class="SideTOC3">
<a href="#997063">Berkeley Sockets API Functions
</a></p>

<p class="SideTOC3">
<a href="#997516">Extending the Network Login Script Support
</a></p>

<p class="SideTOC2">
<a href="#997634">Internet Library
</a></p>

<p class="SideTOC3">
<a href="#997692">System Requirements
</a></p>

<p class="SideTOC3">
<a href="#997705">Initialization and Setup
</a></p>

<p class="SideTOC3">
<a href="#997733">Accessing Web Pages
</a></p>

<p class="SideTOC3">
<a href="#997761">Asynchronous Operation
</a></p>

<p class="SideTOC3">
<a href="#997787">Using the Low Level Calls
</a></p>

<p class="SideTOC3">
<a href="#997824">Cache Overview
</a></p>

<p class="SideTOC3">
<a href="#997841">Internet Library Network Configurations
</a></p>

<p class="SideTOC2">
<a href="#997886">Summary of Network Communication
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="996394"> </a>Two different Palm OS<sup>®</sup> libraries provide network services to applications:
</p>

  <a name="996395"> </a><p class="B1Bullet"> &#8226; The net library provides basic network services using TCP and UDP via a socket API. This library is discussed in the section <a href="NetworkCommunication.html#996404">Net Library</a>.</p>

  <a name="996399"> </a><p class="B1Bullet"> &#8226; The Internet library builds on the net library to provide a socket-like API to high-level Internet protocols such as HTTP. This library is discussed in the section <a href="NetworkCommunication.html#997634">Internet Library</a>.</p>

<h2 class="HaHeadA">
  <a name="996404"> </a>Net Library 
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996405"> </a>The net library allows Palm OS applications to easily establish a connection with any other machine on the Internet and transfer data to and from that machine using the standard TCP/IP protocols.
</p>
<p class="Body">
  <a name="996407"> </a>The basic network services provided by the net library include: 
</p>

  <a name="996409"> </a><p class="B1Bullet"> &#8226; Stream-based, guaranteed delivery of data using TCP (Transmission Control Protocol).</p>

  <a name="996411"> </a><p class="B1Bullet"> &#8226; Datagram-based, best-effort delivery of data using UDP (User Datagram Protocol). </p>
<p class="Body">
  <a name="996416"> </a>You can implement higher-level Internet-based services (file transfer, e-mail, web browsing, etc.) on top of these basic delivery services. 
</p>
<div class="NINoteImportant"><hr>
  <a name="996418"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> Applications cannot directly use the net library to make wireless connections. Use the Internet library for wireless connections. 
<hr>
</div>
<p class="Body">
  <a name="996419"> </a>This section describes how to use the net library in your application. It covers:
</p>

  <a name="996423"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#996465">About the Net Library</a></p>

  <a name="996427"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#996534">Net Library Usage Steps</a></p>

  <a name="996431"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#996569">Obtaining the Net Library's Reference Number</a></p>

  <a name="996435"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#996589">Setting Up Berkeley Socket API</a></p>

  <a name="996439"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#996603">Setup and Configuration Calls</a></p>

  <a name="996443"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#1006209">Opening the Net Library</a></p>

  <a name="996447"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#996982">Closing the Net Library</a></p>

  <a name="996451"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997003">Version Checking</a></p>

  <a name="996455"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997042">Network I/O and Utility Calls</a></p>

  <a name="996459"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997063">Berkeley Sockets API Functions</a></p>

  <a name="996463"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997516">Extending the Network Login Script Support</a></p>

<h2 class="HBHeadB">
  <a name="996465"> </a>About the Net Library
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996467"> </a>The net library consists of two parts: a netlib interface and a net protocol stack. 
</p>
<p class="Body">
  <a name="996469"> </a>The <b>netlib interface</b> is the set of routines that an application calls directly when it makes a net library call. These routines execute in the caller's task like subroutines of the application. They are not linked in with the application, however, but are called through the library dispatch mechanism. 
</p>
<p class="Body">
  <a name="996470"> </a>With the exception of functions that open, close, and set up the net library, the net library's API maps almost directly to the Berkeley UNIX sockets API, the de facto standard API for Internet applications. You can compile an application written to use the Berkeley sockets API for the Palm OS with only slight changes to the source code.
</p>
<p class="Body">
  <a name="996474"> </a>The <b>net protocol stack</b> runs as a separate task in the operating system. Inside this task, the TCP/IP protocol stack runs, and received packets are processed from the network device drivers. The netlib interface communicates with the net protocol stack through an operating system mailbox queue. It posts requests from applications into the queue and blocks until the net protocol stack processes the requests.
</p>
<p class="Body">
  <a name="996478"> </a>Having the net protocol stack run as a separate task has two big advantages: 
</p>

  <a name="996479"> </a><p class="B1Bullet"> &#8226; The operating system can switch in the net protocol stack to process incoming packets from the network even if the application is currently busy. </p>

  <a name="996480"> </a><p class="B1Bullet"> &#8226; Even if an application is blocked waiting for some data to arrive off the network, the net protocol stack can continue to process requests for other applications. </p>
<p class="Body">
  <a name="996481"> </a>One or more network interfaces run inside the net protocol stack task. A <b>network interface</b> is a separately linked database containing code necessary to abstract link-level protocols. For example, there are separate network interface databases for PPP and SLIP. A network interface is generally specified by the user in the Network preference panel. In rare circumstances, interfaces can also be attached and detached from the net library at runtime as described in the section <a href="NetworkCommunication.html#996617">"Settings for Interface Selection"</a> later in this chapter. 
</p>

<h4 class="HCHeadC">
  <a name="996490"> </a>Constraints
</h4>
<p class="Body">
  <a name="996491"> </a>Because it's unclear whether all future platforms will need or want network support (especially devices with very limited amounts of memory), network support is an optional part of the operating system. For this reason, the net library is implemented as a system library that is installed at runtime and doesn't have to be present for the system to work properly. 
</p>
<p class="Body">
  <a name="996493"> </a>When the net library is present and running, it requires an estimated additional 32 KB of RAM. This in effect doubles the overall system RAM requirements, currently 32 KB without the net library. It's therefore not practical to run the net library on any platform that has 128 KB or less of total RAM available since the system itself will consume 64 KB of RAM (leaving only 64 KB for user storage in a 128 KB system). 
</p>
<p class="Body">
  <a name="996495"> </a>Because of the RAM requirements, the net library is supported only on PalmPilot Professional and newer devices running Palm OS 2.0 and later. 
</p>
<p class="Body">
  <a name="996496"> </a>All applications written for Palm OS must pay special attention to memory and CPU usage because Palm OS runs on small devices with limited amounts of memory and other hardware resources. Applications that use the net library, therefore, must pay even more attention to memory usage. After opening the net library, the total remaining amount of RAM available to an application is approximately 12 KB on a PalmPilot Professional and 36KB on a Palm III<sup>&#8482;</sup>. 
</p>

<h4 class="HCHeadC">
  <a name="996498"> </a>The Programmer's Interface
</h4>
<p class="Body">
  <a name="996499"> </a>There are essentially two sets of API into the net library: the net library's native API, and the Berkeley sockets API. The two APIs map almost directly to each other. You can use the Berkeley sockets API with no performance penalty and little or no modifications to any existing code that you have. 
</p>
<p class="Body">
  <a name="996501"> </a>The header file <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">&lt;unix/sys_socket.h&gt;</span> contains a set of macros that map Berkeley sockets calls directly to net library calls. The main difference between the net library API and the Berkeley sockets API is that most net library API calls accept additional parameters for: 
</p>

  <a name="996502"> </a><p class="B1Bullet"> &#8226; <b>A reference number.</b> All library calls in the Palm OS must have the library reference number as the first parameter. </p>

  <a name="996503"> </a><p class="B1Bullet"> &#8226; <b>A timeout.</b> In consumer systems such as the Palm Powered handheld, infinite timeouts don't work well because the end user can't "kill" a process that's stuck. The timeout allows the application to gracefully recover from hung connections. The default timeout is 2 seconds.</p>

  <a name="996504"> </a><p class="B1Bullet"> &#8226; <b>An error code.</b> The sockets API by convention returns error codes in the application's global variable <span style="font-family: monospace">errno</span>. The net library API doesn't rely on any application global variables. This allows system code (which cannot have global variables) to use the net library API. </p>
<p class="Body">
  <a name="996505"> </a>The macros in <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">sys_socket.h</span> do the following:
</p>

<h5 class="TgTable">
  <a name="996523"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="996508"> </a><div class="CellHeading">For...</div></th>
    <th><a name="996510"> </a><div class="CellHeading">The macros pass...</div></th>
  </tr>
  <tr valign="top">
    <td><a name="996512"> </a><div class="CellBody">reference number</div></td>
    <td><a name="996514"> </a><div class="CellBody"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetRefnum</span> (application global variable).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996516"> </a><div class="CellBody">timeout</div></td>
    <td><a name="996518"> </a><div class="CellBody"><span style="font-family: monospace">AppNetTimeout</span> (application global variable).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996520"> </a><div class="CellBody">error code</div></td>
    <td><a name="996522"> </a><div class="CellBody">Address of the application global <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">errno.</span></div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="996525"> </a>For example, consider the Berkeley sockets call <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socket</span>, which is declared as:
</p>
<pre  class="Preformatted">
Int16 socket(Int16 domain, Int16 type,
Int16 protocol);<a name="996526"> </a>
</pre>
<p class="Body">
  <a name="996527"> </a>The equivalent net library call is <span style="font-family: monospace">NetLibSocketOpen</span>, which is declared as:
</p>
<pre  class="Preformatted">
NetSocketRef NetLibSocketOpen(UInt16 libRefnum,
NetSocketAddrEnum domain,
NetSocketTypeEnum type, Int16 protocol,
Int32 timeout, Err* errP)<a name="996528"> </a>
</pre>
<p class="Body">
  <a name="996529"> </a>The macro for <span style="font-family: monospace">socket</span> is:
</p>
<pre  class="Preformatted">
#define socket(domain,type,protocol) \<a name="996530"> </a>
NetLibSocketOpen(AppNetRefnum, domain, type,
protocol, AppNetTimeout, &amp;errno)<a name="996531"> </a>
</pre>

<h2 class="HBHeadB">
  <a name="996534"> </a>Net Library Usage Steps
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996535"> </a>In general, using the net library involves the steps listed below. The next several sections describe some of the steps in more detail. 
</p>
<p class="Body">
  <a name="996536"> </a>For an example of using the net library, see the example application <span style="font-family: monospace">NetSample</span> in the <span style="font-family: monospace">Palm OS Examples</span> directory. It exercises many of the net library calls.
</p>
  <a name="996537"> </a><p class="N1NumList">1.	  Obtain the net library's reference number.</p><p class="Indented1"> <a name="996538"> </a>Because the net library is a system library, all net library calls take the library's reference number as the first parameter. For this reason, your first step is to obtain the reference number and save it. See "<a href="NetworkCommunication.html#996569">Obtaining the Net Library's Reference Number</a>."</p>
<p class="Indented1"> <a name="996542"> </a>Set up for using Berkeley sockets API. </p>
<p class="Indented1"> <a name="996543"> </a>You can either use the net library's native API or the Berkeley sockets API for the majority of what you do with the net library. If you're already familiar with Berkeley sockets API, you'll probably want to use it instead of the native API. If so, follow the steps in "<a href="NetworkCommunication.html#996589">Setting Up Berkeley Socket API</a>."</p>
  <a name="996547"> </a><p class="N1NumList">2.	  If necessary, configure the net library the way you want it. </p><p class="Indented1"> <a name="996548"> </a>Typically, users set up their networking services by using the Network preferences panel. Most applications don't set up the networking services themselves; they simply access them through the net library preferences database. In rare instances, your application might need to perform some network configuration, and it usually should do so before the net library is open. See "<a href="NetworkCommunication.html#996603">Setup and Configuration Calls</a>."</p>
  <a name="996552"> </a><p class="N1NumList">3.	  Open the net library right before the first network access.</p><p class="Body">
  <a name="996553"> </a>Because of the limited resources in the Palm OS environment, the net library was designed so that it only takes up extra memory from the system when an application actually needs to use its services. An Internet application must therefore inform the system when it needs to use the net library by opening the net library when it starts up and by closing it when it exits. See "<a href="NetworkCommunication.html#1006209">Opening the Net Library</a>."
</p>
  <a name="996558"> </a><p class="N1NumList">4.	  Make calls to access the network. </p><p class="Body">
  <a name="996559"> </a>Once the net library has been opened, sockets can be opened and data sent to and received from remote hosts using either the Berkeley sockets API or the native net library API. See "<a href="NetworkCommunication.html#997042">Network I/O and Utility Calls</a>."
</p>
  <a name="996563"> </a><p class="N1NumList">5.	  Close the net library when you're finished with it. </p><p class="Indented1"> <a name="996566"> </a>Closing the net library frees up the resources. See "<a href="NetworkCommunication.html#996982">Closing the Net Library</a>."</p>

<h2 class="HBHeadB">
  <a name="996569"> </a>Obtaining the Net Library's Reference Number
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996573"> </a>To determine the reference number, call <a href="SystemManager.html#1166164"><span style="font-family: monospace">SysLibFind</span></a><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">,</span> passing the name of the net library, "<span style="font-family: monospace">Net.lib</span>". In addition, if you intend to use Berkeley sockets API, save the reference number in the application global variable <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetRefnum</span>. 
</p>
<pre  class="Preformatted">
err = SysLibFind("Net.lib", &amp;AppNetRefnum);<a name="996575"> </a>
if (err) {/* error handling here */}<a name="996576"> </a>
</pre>
<p class="Body">
  <a name="996577"> </a>Remember that the net library requires Palm OS version 2.0 or later. If the <span style="font-family: monospace">SysLibFind</span> call can't find the net library, it returns an error code. 
</p>

<h2 class="HBHeadB">
  <a name="996589"> </a>Setting Up Berkeley Socket API
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996590"> </a>To set up the use of Berkeley sockets API, do the following: 
</p>

  <a name="996592"> </a><p class="B1Bullet"> &#8226; Include the header file <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">&lt;unix/sys_socket.h&gt;</span>, provided with the Palm OS SDK.</p>

  <a name="996594"> </a><p class="B1Bullet"> &#8226; Link your project with the module <span style="font-family: monospace">NetSocket.c</span>, which declares and initializes three required global variables: <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetTimeout</span>, <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">AppNetRefnum,</span> and <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">errno</span>. <span style="font-family: monospace">NetLibSocket.c</span> also contains the glue code necessary for a few of the Berkeley sockets functions. </p>

  <a name="996598"> </a><p class="B1Bullet"> &#8226; As described in the previous section, assign the net library's reference number to the variable <span style="font-family: monospace">AppNetRefnum</span>. </p>

  <a name="996599"> </a><p class="B1Bullet"> &#8226; Adjust <span style="font-family: monospace">AppNetTimeout</span>'s value if necessary. </p>
<p class="Indented1"> <a name="996600"> </a>This value represents the maximum number of system ticks to wait before a net library call expires. Most applications should adjust this timeout value and possibly adjust it for different sections of code. The following example sets the timeout value to 10 seconds. </p>
<pre  class="Preformatted">
  AppNetTimeout = SysTicksPerSecond() * 10;<a name="996601"> </a>
</pre>

<h2 class="HBHeadB">
  <a name="996603"> </a>Setup and Configuration Calls
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996605"> </a>The setup and configuration API calls of the net library are normally only used by the Network preferences panel. This includes calls to set IP addresses, host name, domain name, login script, interface settings, and so on. Each setup and configuration call saves its settings in the net library preferences database in nonvolatile storage for later retrieval by the runtime calls. 
</p>
<p class="Body">
  <a name="996607"> </a>In rare instances, an application might need to perform setup and configuration itself. For example, some applications might allow users to select a particular "service" before trying to establish a connection. Such applications present a pick list of service names and allow the user to select a service name. This functionality is provided via the Network preferences panel. The panel provides launch codes (defined in <span style="font-family: monospace">SystemMgr.h</span>) that allow an application to present a list of possible service names to let the end user pick one. The preferences panel then makes the necessary net library setup and configuration calls to set up for that particular service.
</p>
<p class="Body">
  <a name="996609"> </a>Usually, the setup and configuration calls are made while the library is closed. A subset of the calls can also be issued while the library is open and will have real-time effects on the behavior of the library. <a href="NetLibrary.html#1254075">Chapter 61, "Net Library,"</a> in <i>Palm OS Programmer's API Reference</i>, describes the behavior of each call in more detail. 
</p>

<h4 class="HCHeadC">
  <a name="996617"> </a>Settings for Interface Selection
</h4>
<p class="Body">
  <a name="996621"> </a>As you learned in the section <a href="NetworkCommunication.html#996465">"About the Net Library,"</a> the net library uses one or more network interfaces to abstract low-level networking protocols. The user specifies which network interface to use in the Network preference panel. 
</p>
<p class="Body">
  <a name="996623"> </a>You can also use net library calls to specify which interface(s) should be used:
</p>

  <a name="996628"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1255440"><span style="font-family: monospace">NetLibIFAttach</span></a> attaches an interface to the library so that it will be used when and if the library is open.</p>

  <a name="996633"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1255477"><span style="font-family: monospace">NetLibIFDetach</span></a> detaches an interface from the library. </p>

  <a name="996638"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1255553"><span style="font-family: monospace">NetLibIFGet</span></a> returns an interface's creator and instance number. </p>
<p class="Body">
  <a name="996639"> </a>Unlike most net library functions, these functions can be called while the library is open or closed. If the library is open, the specific interface is attached or detached in real time. If the library is closed, the information is saved in the active configuration. See <a href="NetworkCommunication.html#996866">"Network Configurations"</a> for more information about configurations.
</p>
<p class="Body">
  <a name="996640"> </a>Each interface is identified by a creator and an instance number. You need these values if you want to attach or detach an interface or to query or set interface settings. You use <span style="font-family: monospace">NetLibIFGet</span> to obtain this information. <span style="font-family: monospace">NetLibIFGet</span> takes four parameters: the net library's reference number, an index into the library's interface list, and addresses of two variables where the creator and instance number are returned. 
</p>
<p class="Body">
  <a name="996641"> </a>The creator is one of the following values:
</p>

  <a name="996643"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">netIFCreatorLoop</span> (Loopback network)</p>

  <a name="996645"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">netIFCreatorSLIP</span> (SLIP network)</p>

  <a name="996647"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">netIFCreatorPPP</span> (PPP network)</p>
<p class="Body">
  <a name="996653"> </a>If you know which interface you want to obtain information about, you can iterate through the network interface list, calling <span style="font-family: monospace">NetLibIFGet</span> with successive index values until the interface with the creator value you need is returned. 
</p>

<h4 class="HCHeadC">
  <a name="996655"> </a>Interface Specific Settings
</h4>
<p class="Body">
  <a name="996656"> </a>The net library configuration is structured so that network interface- specific settings can be specified for each network interface independently. These interface specific settings are called IF settings and are set and retrieved through the <a href="NetLibrary.html#1255597"><span style="font-family: monospace">NetLibIFSettingGet</span></a> and <a href="NetLibrary.html#1255981"><span style="font-family: monospace">NetLibIFSettingSet</span></a> calls. 
</p>

  <a name="996667"> </a><p class="B1Bullet"> &#8226; The <a href="NetLibrary.html#1255597"><span style="font-family: monospace">NetLibIFSettingGet</span></a> call takes a setting ID as a parameter along with a buffer pointer and buffer size for the return value of the setting. Some settings, like login script, are of variable size so the caller must be prepared to allocate a buffer large enough to retrieve the entire setting. (<span style="font-family: monospace">NetLibIFSettingGet</span> returns the required size if you pass <span style="font-family: monospace">NULL</span> for the buffer. See the <span style="font-family: monospace">NetLibIFSettingGet </span>description in the reference documentation for more information.) </p>

  <a name="996672"> </a><p class="B1Bullet"> &#8226; The <a href="NetLibrary.html#1255981"><span style="font-family: monospace">NetLibIFSettingSet</span></a> call also takes a setting ID as a parameter along with a pointer to the new setting value and the size of the new setting. </p>
<p class="Indented1"> <a name="996673"> </a>If you're using <span style="font-family: monospace">NetLibIFSettingSet</span> to set the login script, see the next section. </p>
<p class="Body">
  <a name="996674"> </a>For an example of using these functions, see the <span style="font-family: monospace">NetSample</span> example application in the <span style="font-family: monospace">Palm OS Examples</span> directory. The function <span style="font-family: monospace">CmdSettings</span> in the file <span style="font-family: monospace">CmdInfo.c</span>, for example, shows how to loop through and obtain information about all of the network interfaces. 
</p>

<h4 class="HCHeadC">
  <a name="996675"> </a>Setting an Interface's Login Script
</h4>
<p class="Body">
  <a name="996676"> </a>The <span style="font-family: monospace">netIFSettingLoginScript</span> setting is used to store the login script for an interface. The login script is generated either from the script that the user enters in the Network preferences panel or from a script file that is downloaded onto the handheld during a HotSync<sup>®</sup> operation. The format of the script is rigid; if a syntactically incorrect login script is presented to the net library, the results are unpredictable. The basic format is a series of null-terminated command lines followed by a null byte at the end of the script. Each command line has the format:
</p>
<pre  class="Preformatted">
&lt;command-byte&gt; [&lt;parameter&gt;]<a name="996677"> </a>
</pre>
<p class="Body">
  <a name="996678"> </a>where the command byte is the first character in the line and there is 1 and only 1 space between the command byte and the parameter string. <a href="NetworkCommunication.html#996688">Table 7.1</a> lists the possible commands.
</p>

<h5 class="TgTable">
  <a name="996789"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="996688"> </a><div class="TableTitle">Table 7.1  Login Script Commands </div></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="996696"> </a><div class="CellHeading">Function</div></th>
    <th><a name="996698"> </a><div class="CellHeading">Command</div></th>
    <th><a name="996700"> </a><div class="CellHeading">Parameter</div></th>
    <th><a name="996702"> </a><div class="CellHeading">Example</div></th>
  </tr>
  <tr valign="top">
    <td><a name="996704"> </a><div class="CellBody">Send </div></td>
    <td><a name="996706"> </a><div class="CellBody"><span style="font-family: monospace">s</span> </div></td>
    <td><a name="996708"> </a><div class="CellBody">string</div></td>
    <td><a name="996710"> </a><div class="CellBody"><span style="font-family: monospace">s go PPP</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="996712"> </a><div class="CellBody">Wait for</div></td>
    <td><a name="996714"> </a><div class="CellBody"><span style="font-family: monospace">w</span> </div></td>
    <td><a name="996716"> </a><div class="CellBody">string</div></td>
    <td><a name="996718"> </a><div class="CellBody"><span style="font-family: monospace">w password:</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="996720"> </a><div class="CellBody">Delay</div></td>
    <td><a name="996722"> </a><div class="CellBody"><span style="font-family: monospace">d</span> </div></td>
    <td><a name="996724"> </a><div class="CellBody">seconds</div></td>
    <td><a name="996726"> </a><div class="CellBody"><span style="font-family: monospace">d 1</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="996728"> </a><div class="CellBody">Get IP</div></td>
    <td><a name="996730"> </a><div class="CellBody"><span style="font-family: monospace">g</span> </div></td>
    <td><a name="996732"> </a><div class="CellBody"><br></div></td>
    <td><a name="996734"> </a><div class="CellBody"><span style="font-family: monospace">g</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="996736"> </a><div class="CellBody">Prompt</div></td>
    <td><a name="996738"> </a><div class="CellBody"><span style="font-family: monospace">a</span> </div></td>
    <td><a name="996740"> </a><div class="CellBody">string</div></td>
    <td><a name="996742"> </a><div class="CellBody"><span style="font-family: monospace">a Enter Name:</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="996744"> </a><div class="CellBody">Wait for prompt</div></td>
    <td><a name="996746"> </a><div class="CellBody"><span style="font-family: monospace">f </span></div></td>
    <td><a name="996748"> </a><div class="CellBody">string</div></td>
    <td><a name="996750"> </a><div class="CellBody"><span style="font-family: monospace">f ID:</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="996752"> </a><div class="CellBody">Send CR</div></td>
    <td><a name="996754"> </a><div class="CellBody"><span style="font-family: monospace">s</span> </div></td>
    <td><a name="996756"> </a><div class="CellBody">string</div></td>
    <td><a name="996758"> </a><div class="CellBody"><span style="font-family: monospace">s ^N</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="996760"> </a><div class="CellBody">Send User ID</div></td>
    <td><a name="996762"> </a><div class="CellBody"><span style="font-family: monospace">s</span> </div></td>
    <td><a name="996764"> </a><div class="CellBody">string</div></td>
    <td><a name="996766"> </a><div class="CellBody"><span style="font-family: monospace">s jdoe </span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="996768"> </a><div class="CellBody">Send Password</div></td>
    <td><a name="996770"> </a><div class="CellBody"><span style="font-family: monospace">s</span> </div></td>
    <td><a name="996772"> </a><div class="CellBody">string </div></td>
    <td><a name="996774"> </a><div class="CellBody">s <i>mypassword</i></div></td>
  </tr>
  <tr valign="top">
    <td><a name="996776"> </a><div class="CellBody">Plugin command<a href="#996782"><span class="Footnote">1</span></a></div></td>
    <td><a name="996784"> </a><div class="CellBody"><span style="font-family: monospace">sp</span> </div></td>
    <td><a name="996786"> </a><div class="CellBody">string </div></td>
    <td><a name="996788"> </a><div class="CellBody">sp <i>plugin</i><span style="font-family: monospace">:</span><i>cmd</i><span style="font-family: monospace">:</span><i>arg</i></div></td>
  </tr>
</table>

<table>
  <tr>
    <td><a name="996782"> </a><div class="FNTFootnoteTable"><a href="#996776"><span class="FootnoteNumber">1. </span></a><a name="996782"> </a><div class="FNTFootnoteTable">See <a href="NetworkCommunication.html#997516">"Extending the Network Login Script Support."</a></div></div></td>
  </tr>
</table>



</h5><p class="Body">
  <a name="996790"> </a>The parameter string to the send (<span style="font-family: monospace">s</span>) command can contain the escape sequences shown in <a href="NetworkCommunication.html#996800">Table 7.2</a>.
</p>

<h5 class="TgTable">
  <a name="996847"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="996800"> </a><div class="TableTitle">Table 7.2  Send Command Escape Sequences </div></caption>
  <tr valign="top">
    <td><a name="996804"> </a><div class="CellBody">$USERID</div></td>
    <td><a name="996806"> </a><div class="CellBody">substitutes user name</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996808"> </a><div class="CellBody">$PASSWORD</div></td>
    <td><a name="996810"> </a><div class="CellBody">substitutes password</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996812"> </a><div class="CellBody">$DBUSERID</div></td>
    <td><a name="996814"> </a><div class="CellBody">substitutes dialback user name</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996816"> </a><div class="CellBody">$DBPASSWORD</div></td>
    <td><a name="996818"> </a><div class="CellBody">substitutes dialback password</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996820"> </a><div class="CellBody"> ^c</div></td>
    <td><a name="996822"> </a><div class="CellBody">if c is '@' -&gt; '_', then byte value 0 -&gt; 31 <br>else if c is 'a' -&gt; 'z', then byte value 1 -&gt; 26<br>else c </div></td>
  </tr>
  <tr valign="top">
    <td><a name="996824"> </a><div class="CellBody">&lt;cr&gt;</div></td>
    <td><a name="996826"> </a><div class="CellBody">carriage return (0x0D)</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996828"> </a><div class="CellBody">&lt;lf&gt;</div></td>
    <td><a name="996830"> </a><div class="CellBody">line feed (0x0A)</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996832"> </a><div class="CellBody">\"</div></td>
    <td><a name="996834"> </a><div class="CellBody">"</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996836"> </a><div class="CellBody"> \^</div></td>
    <td><a name="996838"> </a><div class="CellBody">^</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996840"> </a><div class="CellBody"> \&lt;</div></td>
    <td><a name="996842"> </a><div class="CellBody">&lt;</div></td>
  </tr>
  <tr valign="top">
    <td><a name="996844"> </a><div class="CellBody"> \\</div></td>
    <td><a name="996846"> </a><div class="CellBody">\</div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="996848"> </a>Note also that login scripts can be created on a desktop computer and then installed onto the handheld during synchronization. The script commands are inspired by the Windows dial-up scripting command language for dial-up networking. For documentation from Microsoft, search for the file <span style="font-family: monospace">Script.doc</span> in the <span style="font-family: monospace">Windows</span> folder. The Network preferences panel on Palm OS supports the following subset of commands: 
</p>
<p class="Body">
  <a name="996849"> </a><span style="font-family: monospace">set serviceName<br>set userName <br>set password <br>set phoneNumber <br>set primaryDNS<br>set secondaryDNS <br>set ipAddr <br>set closewait <br>set inactivityTimeout <br>set establishmentTimeout <br>set protocol <br>set dynamicIP <br>waitfor<br>transmit <br>getip <br>delay <br>prompt <br>waitforprompt<br>plugin "</span><i>pluginname</i><span style="font-family: monospace">:</span><i>cmd</i><span style="font-family: monospace">[:</span><i>arg</i><span style="font-family: monospace">]" </span>
</p>
<p class="Body">
  <a name="996850"> </a>The <span style="font-family: monospace">plugin</span> command is a Palm OS-specific extension used to perform a command defined in a plugin. See <a href="NetworkCommunication.html#997516">"Extending the Network Login Script Support"</a> for more information on plugins. 
</p>
<p class="Body">
  <a name="996854"> </a>Create a script file with the extension <span style="font-family: monospace">.pnc</span> or <span style="font-family: monospace">.scp</span> and place it in the user's install directory. The network conduit will download it to the handheld during the next HotSync operation. Each script file should contain only one service definition. 
</p>

<h4 class="HCHeadC">
  <a name="996855"> </a>General Settings
</h4>
<p class="Body">
  <a name="996856"> </a>In addition to the interface-specific settings, there's a class of settings that don't apply to any one particular interface. These general settings are set and retrieved through the <a href="NetLibrary.html#1256999"><span style="font-family: monospace">NetLibSettingGet</span></a> and <a href="NetLibrary.html#1257169"><span style="font-family: monospace">NetLibSettingSet</span></a> calls. These calls take setting ID, buffer pointer, and buffer size parameters. 
</p>

<h4 class="HCHeadC">
  <a name="996866"> </a>Network Configurations
</h4>
<p class="Body">
  <a name="1004854"> </a>Palm OS 3.2 and later supports network configurations. A <b>configuration</b> captures a particular way the user can connect to the internet. The net library maintains an array of configurations. When the net library is opened, the network settings for the connection are supplied by one of the configurations in the array.
</p>
<p class="Body">
  <a name="1004855"> </a>A configuration contains the following information:
</p>

  <a name="1004856"> </a><p class="B1Bullet"> &#8226; the network interfaces used by the net library. When the net library is opened, it brings up these network interfaces.</p>

  <a name="1004857"> </a><p class="B1Bullet"> &#8226; general net library settings. These are the settings accessed by the <a href="NetLibrary.html#1256999"><span style="font-family: monospace">NetLibSettingGet</span></a> and <a href="NetLibrary.html#1257169"><span style="font-family: monospace">NetLibSettingSet</span></a> functions.<a href="#1004860"><span class="Footnote">1</span></a></p>
<p class="Body">
  <a name="1005805"> </a>The configuration array is unchanged after a soft reset. It is erased and reinitialized after a hard reset. See <a href="NetworkCommunication.html#1005913">Figure 7.1</a> for a diagram of the configuration array.
</p>

<p class="FFigureCaption">
  <a name="1005913"> </a>Figure 7.1	 Configuration architecture
</p>
<p class="FgFigure">
  <a name="1005917"> </a><div align="left"><img src="images/NetworkCommunicationa.gif" height="371" width="360" border="0" hspace="20" vspace="0">
</div>
</p>
<p class="Body">
  <a name="1005430"> </a>A configuration can be an <b>alias</b>. An alias does not contain any configuration information. Instead, it points to another configuration. The net library defines an alias for each of the following configurations:
</p>

  <a name="1006323"> </a><p class="B1Bullet"> &#8226; A default configuration for general use</p>

  <a name="1006345"> </a><p class="B1Bullet"> &#8226; Wireline configuration for general use</p>

  <a name="1005431"> </a><p class="B1Bullet"> &#8226; Wireless configuration for general use</p>

  <a name="1006369"> </a><p class="B1Bullet"> &#8226; Wireline configuration for use with the Palm.net proxy server</p>

  <a name="1005434"> </a><p class="B1Bullet"> &#8226; Wireless configuration for use with the Palm.net proxy server</p>
<p class="Body">
  <a name="1005442"> </a>You can specify an alias anywhere in the API you would specify a configuration. 
</p>
<p class="Body">
  <a name="1005623"> </a>An example of an alias is the first configuration in the configuration array, called the <b>default configuration</b>. When you call <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span> to open the net library, the net library gets its connection settings from this configuration. The default configuration typically points to the sixth configuration, called "<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetPanel</span>" that actually contains the settings. Therefore, when you call <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span>, the net library gets its settings from the "<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetPanel</span>" configuration. See <a href="NetworkCommunication.html#1006209">"Opening the Net Library."</a>
</p>
<p class="Body">
  <a name="1004872"> </a>The net library maintains another special configuration called the <b>active configuration</b>. This configuration is a copy of the configuration used when the net library was last opened. When you attach or detach network interfaces or modify general net library settings, you modify the active configuration. Changing the active configuration this way does not affect any stored configurations.
</p>
<div class="NINoteImportant"><hr>
  <a name="1004874"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> You cannot open the net library according to the settings in the active configuration. You need to save the active configuration before you can use its settings to open the net library.
<hr>
</div>
<p class="Body">
  <a name="1004875"> </a>The net library provides functions to manage configurations. These functions have names beginning with <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibConfig</span>.
</p>

  <a name="996891"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1254890"><span style="font-family: monospace">NetLibConfigList</span></a> returns a list of all configurations by name. You could use this to display a list of available configurations to your users and allow them to choose which one should be used. </p>

  <a name="996895"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1254850"><span style="font-family: monospace">NetLibConfigIndexFromName</span></a> obtains a configuration's index number from its name. Most configuration functions use the index number to refer to an configuration instead of its name. </p>

  <a name="996899"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1254682"><span style="font-family: monospace">NetLibConfigAliasGet</span></a> obtains the value of a configuration alias.</p>

  <a name="996903"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1254721"><span style="font-family: monospace">NetLibConfigAliasSet</span></a> sets the configuration alias to point to a specific configuration.</p>

  <a name="996907"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1255012"><span style="font-family: monospace">NetLibConfigSaveAs</span></a> defines a new configuration and saves it by name. </p>

  <a name="996911"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1254816"><span style="font-family: monospace">NetLibConfigDelete</span></a> deletes a configuration from the list.</p>
<div class="NWNoteWarning"><hr>
  <a name="1006291"> </a> <span style="color: #FF0000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">WARNING!  </span> The Network Panel may interfere with your configuration. When the user exits after making a modification to a service in the Network Panel, the Network Panel overwrites the "<span style="font-family: monospace">NetPanel</span>" configuration and resets the default configuration alias to point to the "<span style="font-family: monospace">NetPanel</span>" configuration.
<hr>
</div>
<p class="Body">
  <a name="1005310"> </a>Suppose your application requires the use of wireless communications. It could obtain access to the user's default wireless setup and use it to initialize the net library in the following way (the constant <span style="font-family: monospace">netCfgNameDefWireless</span> defines the name of the default wireless configuration alias): 
</p>
<pre  class="Preformatted">
UInt16 configIndex, ifErr;<a name="1005312"> </a>
Err err;
<a name="1005313"> </a>
err = NetLibConfigIndexFromName(ref,
	netCfgNameDefWireless, &amp;configIndex);<a name="1005314"> </a>
if (!err)
	err = NetLibOpenConfig(ref, configIndex, 0, <a name="1005315"> </a>
		&amp;ifErr);<a name="1005316"> </a>
</pre>
<p class="Body">
  <a name="1005254"> </a><a href="NetworkCommunication.html#1005094">Listing 7.1</a> shows another example of using the configuration functions. It demonstrates how to create a configuration that uses a custom network interface. The code also points the default configuration alias to the new configuration so <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span> will open the library according to the settings in the new configuration.
</p>
<p class="CCodeCaption">
  <a name="1005094"> </a>Listing 7.1  Creating a configuration
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define myNetIFCreator '....' // Set this value<a name="1005095"> </a>
<a name="1005096"> </a>
Err CreateMyConfig () {<a name="1005097"> </a>
	Err err;<a name="1005098"> </a>
	UInt16 instance;<a name="1005099"> </a>
	UInt32 creator;<a name="1005100"> </a>
	UInt16 netLibRefNum;<a name="1005101"> </a>
	UInt16 index;<a name="1005102"> </a>
	NetConfigNameType myConfigName = { "..." }; // Set this too<a name="1005103"> </a>
<a name="1005104"> </a>
	// Find the reference number of the Net Library<a name="1005105"> </a>
	err = SysLibFind("Net.lib",&amp;netLibRefNum);<a name="1005106"> </a>
	if (err) return err;<a name="1005107"> </a>
<a name="1005108"> </a>
	// Activate the default configuration<a name="1005109"> </a>
	err = NetLibConfigMakeActive(netLibRefNum,0);<a name="1005110"> </a>
	if (err) return err;<a name="1005111"> </a>
<a name="1005112"> </a>
	// Detach all network interfaces<a name="1005113"> </a>
	while (true) {<a name="1005114"> </a>
		err = NetLibIFGet(netLibRefNum,0,&amp;creator,&amp;instance);<a name="1005115"> </a>
		if (err) break;<a name="1005116"> </a>
		err = NetLibIFDetach(netLibRefNum,creator,instance,1000L);<a name="1005117"> </a>
		if (err) return err;<a name="1005118"> </a>
	}<a name="1005119"> </a>
<a name="1005120"> </a>
	// Attach the custom network interface<a name="1005121"> </a>
	err = NetLibIFAttach(netLibRefNum,myNetIFCreator,0,1000L);<a name="1005122"> </a>
	if (err) return err;<a name="1005123"> </a>
<a name="1005124"> </a>
	// Save the configuration so you can use it to open the Net Library<a name="1005125"> </a>
	err = NetLibConfigSaveAs(netLibRefNum,&amp;myConfigName);<a name="1005126"> </a>
	if (err) return err;<a name="1005127"> </a>
<a name="1005128"> </a>
	// Get the index of the new configuration<a name="1005129"> </a>
	err = NetLibConfigIndexFromName(netLibRefNum,&amp;myConfigName,&amp;index);<a name="1005130"> </a>
	if (err) return err;<a name="1005131"> </a>
<a name="1005132"> </a>
	// Point the default configuration alias to the new configuration<a name="1005133"> </a>
	err = NetLibConfigAliasSet(netLibRefNum,0,index);<a name="1005134"> </a>
	return err;<a name="1005135"> </a>
}<a name="1005136"> </a>
</pre><div class="CodeRule"><hr></div>

<h2 class="HBHeadB">
  <a name="1006209"> </a>Opening the Net Library
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996926"> </a>Call <a href="NetLibrary.html#1256393"><span style="font-family: monospace">NetLibOpen</span></a> to open the net library, passing the reference number you retrieved through <a href="SystemManager.html#1166164"><span style="font-family: monospace">SysLibFind</span></a>. Before the net library is opened, most calls issued to it fail with a <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">netErrNotOpen</span> error code. 
</p>
<pre  class="Preformatted">
err = NetLibOpen(AppNetRefnum, &amp;ifErrs);<a name="996930"> </a>
if (err || ifErrs) {/* error handling here */}<a name="996931"> </a>
</pre>
<p class="Body">
  <a name="996932"> </a>Multiple applications can have the library open at a time, so the net library may already be open when <span style="font-family: monospace">NetLibOpen</span> is called. If so, the function increments the library's <b>open count</b>, which keeps track of how many applications  are accessing it, and returns immediately. (You can retrieve the open count with the function <a href="NetLibrary.html#1256533"><span style="font-family: monospace">NetLibOpenCount</span></a>.)
</p>
<p class="Body">
  <a name="996936"> </a>If the net library is not already open, <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span> starts up the net protocol stack task, allocates memory for internal use by the net library, and brings up the network connection. Most likely, the user has configured the Palm Powered handheld to establish a SLIP or PPP connection through a modem and in this type of setup, <span style="font-family: monospace">NetLibOpen</span> dials up the modem and establishes the connection before returning. 
</p>
<p class="Body">
  <a name="996938"> </a>If any of the attached network interfaces (such as SLIP or PPP) fail to come up, the final parameter (<span style="font-family: monospace">ifErrs</span> in the example above) contains the error number of the first interface that encountered a problem.
</p>
<p class="Body">
  <a name="996939"> </a>It's possible, and quite likely, that the net library will be able to open even though one or more interfaces failed to come up (due to bad modem settings, service down, etc.). Some applications may therefore wish to close the net library using <a href="NetLibrary.html#1254641"><span style="font-family: monospace">NetLibClose</span></a> if the interface error parameter is non-zero and display an appropriate message for the user. If an application needs more detailed information, e.g. which interface(s) in particular failed to come up, it can loop through each of the attached interfaces and ask each one if it is up or not. For example:
</p>
<pre  class="Preformatted">
UInt16 index, ifInstance;<a name="996943"> </a>
UInt32 ifCreator;<a name="996944"> </a>
Err err;<a name="996945"> </a>
UInt8 up;<a name="996946"> </a>
Char ifName[32];<a name="996947"> </a>
...<a name="996948"> </a>
for (index = 0; 1; index++) {<a name="996949"> </a>
  err = NetLibIFGet(AppNetRefnum, index, <a name="996950"> </a>
    &amp;ifCreator, &amp;ifInstance);<a name="996951"> </a>
  if (err) break;<a name="996952"> </a>
 <a name="996953"> </a>
  settingSize = sizeof(up);<a name="996954"> </a>
  err = NetLibIFSettingGet(AppNetRefnum, <a name="996955"> </a>
    ifCreator, ifInstance, netIFSettingUp, &amp;up, <a name="996956"> </a>
    &amp;settingSize);<a name="996957"> </a>
  if (err || up) continue;<a name="996958"> </a>
  settingSize = 32;<a name="996959"> </a>
  err = NetLibIFSettingGet(AppNetRefnum, 
    ifCreator, ifInstance, netIFSettingName, 
    ifName, &amp;settingSize);<a name="996960"> </a>
  if (err) continue;<a name="996961"> </a>
 <a name="996962"> </a>
  //display interface didn't come up message<a name="996963"> </a>
}<a name="996964"> </a>
NetLibClose(AppNetRefnum, true);<a name="1003625"> </a>
</pre>
<p class="Body">
  <a name="1003840"> </a>On Palm OS 3.2 or later, you can open the net library with a specific network configuration (see <a href="NetworkCommunication.html#996866">"Network Configurations"</a>) with the function <a href="NetLibrary.html#1256449"><span style="font-family: monospace">NetLibOpenConfig</span></a>. Typically, you'd specify one of the configuration aliases. For example, your application might require a wireline network, so you would open the net library with the configuration <span style="font-family: monospace">netCfgNameDefWireline</span> to specify the user's default wireline connection. On Palm OS 3.2 or later, <span style="font-family: monospace">NetLibOpen</span> simply calls <span style="font-family: monospace">NetLibOpenConfig</span> specifying the user's default configuration. 
</p>

<h2 class="HBHeadB">
  <a name="996982"> </a>Closing the Net Library
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="996984"> </a>Before an application quits, or if it no longer needs to do network   I/O, it should call <a href="NetLibrary.html#1254641"><span style="font-family: monospace">NetLibClose</span></a>. 
</p>
<pre  class="Preformatted">
err = NetLibClose(AppNetRefnum, false);<a name="996988"> </a>
</pre>
<p class="Body">
  <a name="996989"> </a><span style="font-family: monospace">NetLibClose</span> simply decrements the open count. The <span style="font-family: monospace">false</span> parameter specifies that if the open count has reached 0, the net library should not immediately close. Instead, <span style="font-family: monospace">NetLibClose</span> schedules a timer to shut down the net library unless another <a href="NetLibrary.html#1256393"><span style="font-family: monospace">NetLibOpen</span></a> is issued before the timer expires. When the net library's open count is 0 but its timer hasn't yet expired, it's referred to as being in the <b>close-wait state</b>. 
</p>
<p class="Body">
  <a name="996994"> </a>Just how long the net library waits before closing is set by the user in the Network preferences panel. This timeout value allows users to quit from one network application and launch another application within a certain time period without having to wait for another network connection establishment. 
</p>
<p class="Body">
  <a name="996995"> </a>If <span style="font-family: monospace">NetLibOpen</span> is called before the close timer expires, it simply cancels the timer and marks the library as fully open with an open count of 1 before returning. If the timer expires before another <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">NetLibOpen</span> is issued, all existing network connections are brought down, the net protocol stack task is terminated, and all memory allocated for internal use by the net library is freed. 
</p>
<p class="Body">
  <a name="996996"> </a>It's recommended that you allow the net library to enter the close-wait state. However, if you do need the net library to close immediately, you can do one of two things:
</p>

  <a name="996997"> </a><p class="B1Bullet"> &#8226; Set <span style="font-family: monospace">NetLibClose</span>'s second parameter to <span style="font-family: monospace">true</span>. This parameter specifies whether the library should close immediately or not. </p>

  <a name="997001"> </a><p class="B1Bullet"> &#8226; Call <a href="NetLibrary.html#1255137"><span style="font-family: monospace">NetLibFinishCloseWait</span></a>. This function checks the net library to see if it's in the close-wait state and if so, performs an immediate close. </p>

<h2 class="HBHeadB">
  <a name="997003"> </a>Version Checking
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997008"> </a>Besides using <a href="SystemManager.html#1166164"><span style="font-family: monospace">SysLibFind</span></a> to determine if the net library is installed, an application can also look for the net library version feature. This feature is only present if the net library is installed. This feature can be used to get the version number of the net library as follows: 
</p>
<pre  class="Preformatted">
UInt32* version;<a name="997009"> </a>
err = FtrGet(netFtrCreator, netFtrNumVersion,<a name="997010"> </a>
               &amp;version);<a name="997011"> </a>
</pre>
<p class="Body">
  <a name="997012"> </a>If the net library is not installed, <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">FtrGet</span> returns a non-zero result code.
</p>
<p class="Body">
  <a name="997013"> </a>The version number is encoded in the format <span style="font-family: monospace">0xMMmfsbbb</span>, where: 
</p>

<h5 class="TgTable">
  <a name="997035"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="997016"> </a><div class="CellBody">MM</div></td>
    <td><a name="997018"> </a><div class="CellBody">major version </div></td>
  </tr>
  <tr valign="top">
    <td><a name="997020"> </a><div class="CellBody">m</div></td>
    <td><a name="997022"> </a><div class="CellBody">minor version</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997024"> </a><div class="CellBody"> f </div></td>
    <td><a name="997026"> </a><div class="CellBody">bug fix level</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997028"> </a><div class="CellBody"> s </div></td>
    <td><a name="997030"> </a><div class="CellBody">stage: 3-release, 2-beta, 1-alpha, 0-development</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997032"> </a><div class="CellBody">bbb </div></td>
    <td><a name="997034"> </a><div class="CellBody">build number for non-releases </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="997036"> </a>For example:
</p>
<p class="Body">
  <a name="997037"> </a>	V1.1.2b3 would be encoded as 0x01122003
</p>
<p class="Body">
  <a name="997038"> </a>	V2.0a2 would be encoded as 0x02001002
</p>
<p class="Body">
  <a name="997039"> </a>	V1.0.1 would be encoded as 0x01013000
</p>
<p class="Body">
  <a name="997040"> </a>This document describes version 2.01 of the net library (0x02013000). 
</p>

<h2 class="HBHeadB">
  <a name="997042"> </a>Network I/O and Utility Calls
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997043"> </a>For the network I/O and utility calls, you can either make calls using Berkeley sockets API or using the net library's native API. 
</p>
<p class="Body">
  <a name="997044"> </a>Several books have been published that describe how to use Berkeley sockets API to perform network communication. Net library API closely mirrors Berkeley sockets API in this regard. However, you should keep in mind these important differences between using networking I/O on a typical computer and using net library on a Palm Powered handheld:
</p>

  <a name="997046"> </a><p class="B1Bullet"> &#8226; You can open a maximum of four sockets at once in the net library. This is to keep net library's memory requirements to a minimum. </p>

  <a name="997047"> </a><p class="B1Bullet"> &#8226; When you try to send a large block of data, the net library automatically buffers only a portion of that block because of the limited available dynamic memory. The function call returns the number of bytes of data that it actually transmitted. You must check the return value and if there's more data to send, call the function again until the transmission is finished. </p>

  <a name="997048"> </a><p class="B1Bullet"> &#8226; If you expect to also receive data during a large transmission, you should send a smaller block, then read back whatever is available to read before sending the next block. In this way, the amount of memory in the dynamic heap that must be used to buffer data waiting to send out and data waiting to be read back in by the application is kept to a minimum.</p>
<p class="Body">
  <a name="997049"> </a>For more information, see the following:
</p>

  <a name="997053"> </a><p class="B1Bullet"> &#8226; The next section, <a href="NetworkCommunication.html#997063">"Berkeley Sockets API Functions,"</a> provides tables that list the supported Berkeley sockets calls, the corresponding native net library call, and gives a brief description of what each call does. </p>

  <a name="997059"> </a><p class="B1Bullet"> &#8226; <a href="NetLibrary.html#1254075">Chapter 61, "Net Library,"</a> of the <i>Palm OS Programmer's API Reference</i> provides detailed descriptions of each net library call. Where applicable, it gives the equivalent sockets API call for each net library native call. </p>

  <a name="997061"> </a><p class="B1Bullet"> &#8226; The <span style="font-family: monospace">NetSample</span> example application in the <span style="font-family: monospace">Palm OS Examples</span> directory shows how to use the Berkeley sockets API in Palm OS applications. </p>

<h2 class="HBHeadB">
  <a name="997063"> </a>Berkeley Sockets API Functions
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997064"> </a>This section provides tables that list the functions in the Berkeley sockets API that are supported by the net library. In some cases, the calls have limited functionality from what's found in a full implementation of the sockets API and these limitations are described here. 
</p>

<h4 class="HCHeadC">
  <a name="997066"> </a>Socket Functions
</h4>

<h5 class="TgTable">
  <a name="997326"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="997069"> </a><div class="CellHeading">Berkeley Sockets Function</div></th>
    <th><a name="997071"> </a><div class="CellHeading">Net Library Function</div></th>
    <th><a name="997073"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="997075"> </a><div class="CellBody">accept </div></td>
    <td><a name="997080"> </a><div class="CellBody"><a href="NetLibrary.html#1257221"><span style="font-family: monospace">NetLibSocketAccept</span></a></div></td>
    <td><a name="997082"> </a><div class="CellBody">Accepts a connection from a stream-based socket.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997085"> </a><div class="CellBody"><span style="font-family: monospace">bind</span> </div></td>
    <td><a name="997090"> </a><div class="CellBody"><a href="NetLibrary.html#1257334"><span style="font-family: monospace">NetLibSocketBind</span></a></div></td>
    <td><a name="997092"> </a><div class="CellBody">Binds a socket to a local address.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997095"> </a><div class="CellBody"><span style="font-family: monospace">close</span></div></td>
    <td><a name="997100"> </a><div class="CellBody"><a href="NetLibrary.html#1257399"><span style="font-family: monospace">NetLibSocketClose</span></a></div></td>
    <td><a name="997102"> </a><div class="CellBody">Closes a socket.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997105"> </a><div class="CellBody"><span style="font-family: monospace">connect</span> </div></td>
    <td><a name="997110"> </a><div class="CellBody"><a href="NetLibrary.html#1257447"><span style="font-family: monospace">NetLibSocketConnect</span></a></div></td>
    <td><a name="997112"> </a><div class="CellBody">Connects a socket to a remote endpoint to establish a connection.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997115"> </a><div class="CellBody"><span style="font-family: monospace">fcntl</span> </div></td>
    <td><a name="997120"> </a><div class="CellBody"><a href="NetLibrary.html#1257731"><span style="font-family: monospace">NetLibSocketOptionSet</span></a></div><a name="997124"> </a><div class="CellBody"><a href="NetLibrary.html#1257673"><span style="font-family: monospace">NetLibSocketOptionGet</span></a><br><span style="font-family: monospace">(...,netSocketOptSockNonBlocking,...)</span></div></td>
    <td><a name="997126"> </a><div class="CellBody">Supported only for socket <span style="font-family: monospace">refnum</span>s and the only commands it supports are <span style="font-family: monospace">F_SETFL</span> and <span style="font-family: monospace">F_GETFL</span>. The commands can be used to put a socket into non-blocking mode by setting the <span style="font-family: monospace">FNDELAY</span> flag in the argument parameter appropriately - all other flags are ignored. The <span style="font-family: monospace">F_SETFL</span>, <span style="font-family: monospace">F_GETFL</span>, and <span style="font-family: monospace">FNDELAY</span> constants are defined in <span style="font-family: monospace">&lt;unix/unix_fcntl.h&gt;</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="997129"> </a><div class="CellBody"><span style="font-family: monospace">getpeername</span> </div></td>
    <td><a name="997134"> </a><div class="CellBody"><a href="NetLibrary.html#1257284"><span style="font-family: monospace">NetLibSocketAddr</span></a></div></td>
    <td><a name="997136"> </a><div class="CellBody">Gets the remote socket address for a connection.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997139"> </a><div class="CellBody"><span style="font-family: monospace">getsockname</span> </div></td>
    <td><a name="997144"> </a><div class="CellBody"><a href="NetLibrary.html#1257284"><span style="font-family: monospace">NetLibSocketAddr</span></a></div></td>
    <td><a name="997146"> </a><div class="CellBody">Gets the local socket address of a connection. </div><a name="997147"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td><a name="997150"> </a><div class="CellBody"><span style="font-family: monospace">getsockopt</span> </div></td>
    <td><a name="997155"> </a><div class="CellBody"><a href="NetLibrary.html#1257673"><span style="font-family: monospace">NetLibSocketOptionGet</span></a></div></td>
    <td><a name="997157"> </a><div class="CellBody">Gets a socket's control options. Only the following options are implemented:</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997159"> </a><div class="CellBody"><br></div></td>
    <td><a name="997161"> </a><div class="CellBody"><br></div></td>
    <td>
  <a name="997164"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">TCP_NODELAY</span></p>
<p class="Indented1"> <a name="997165"> </a>Allows the application to disable the TCP output buffering algorithm so that TCP sends small packets as soon as possible. This constant is defined in <span style="font-family: monospace">&lt;unix/netinet_tcp.h&gt;</span>.</p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997167"> </a><div class="CellBody"><br></div></td>
    <td><a name="997169"> </a><div class="CellBody"><br></div></td>
    <td>
  <a name="997172"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">TCP_MAXSEG</span></p>
<p class="Indented1"> <a name="997173"> </a>Get the TCP maximum segment size. This constant is defined in <span style="font-family: monospace">&lt;unix/netinet_tcp.h&gt;</span>.</p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997175"> </a><div class="CellBody"><br></div></td>
    <td><a name="997177"> </a><div class="CellBody"><br></div></td>
    <td>
  <a name="997180"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">SO_KEEPALIVE</span></p>
<p class="Indented1"> <a name="997181"> </a>Enables periodic transmission of probe segments when there is no data exchanged on a connection. If the remote endpoint doesn't respond, the connection is considered broken, and <span style="font-family: monospace">so_error</span> is set to <span style="font-family: monospace">ETIMEOUT</span>.</p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997183"> </a><div class="CellBody"><br></div></td>
    <td><a name="997185"> </a><div class="CellBody"><br></div></td>
    <td>
  <a name="997188"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">SO_LINGER</span></p>
<p class="Indented1"> <a name="997189"> </a>Specifies what to do with the unsent data when a socket is closed. It uses the <span style="font-family: monospace">linger</span> structure defined in <span style="font-family: monospace">&lt;unix/sys_socket.h&gt;</span>.</p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997191"> </a><div class="CellBody"><br></div></td>
    <td><a name="997193"> </a><div class="CellBody"><br></div></td>
    <td>
  <a name="997196"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">SO_ERROR</span></p>
<p class="Indented1"> <a name="997197"> </a>Returns the current value of the variable <span style="font-family: monospace">so_error</span>, defined in <span style="font-family: monospace">&lt;unix/sys_socketvar.h&gt;</span></p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997199"> </a><div class="CellBody"><br></div></td>
    <td><a name="997201"> </a><div class="CellBody"><br></div></td>
    <td>
  <a name="997204"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">SO_TYPE</span></p>
<p class="Indented1"> <a name="997205"> </a>Returns the socket type to the caller. </p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997208"> </a><div class="CellBody"><span style="font-family: monospace">listen</span> </div></td>
    <td><a name="997213"> </a><div class="CellBody"><a href="NetLibrary.html#1257506"><span style="font-family: monospace">NetLibSocketListen</span></a></div></td>
    <td><a name="997215"> </a><div class="CellBody">Sets up the socket to listen for incoming connection requests. The queue size is quietly limited to 1. (Higher values are ignored.)</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997219"> </a><div class="CellBody"><span style="font-family: monospace">read</span>, <span style="font-family: monospace">recv</span>, <span style="font-family: monospace">recvmsg</span>, <span style="font-family: monospace">recvfrom</span> </div></td>
    <td><a name="997226"> </a><div class="CellBody"><a href="NetLibrary.html#1256558"><span style="font-family: monospace">NetLibReceive</span></a><br><a href="NetLibrary.html#1256631"><span style="font-family: monospace">NetLibReceivePB</span></a></div></td>
    <td><a name="997231"> </a><div class="CellBody">Read data from a socket. The <span style="font-family: monospace">recv</span>, <span style="font-family: monospace">recvmsg</span>, and <span style="font-family: monospace">recvfrom</span> calls support the <span style="font-family: monospace">MSG_PEEK</span> flag but not the <span style="font-family: monospace">MSG_OOB</span> or <span style="font-family: monospace">MSG_DONTROUTE</span> flags.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997234"> </a><div class="CellBody"><span style="font-family: monospace">select</span> </div></td>
    <td><a name="997239"> </a><div class="CellBody"><a href="NetLibrary.html#1256733"><span style="font-family: monospace">NetLibSelect</span></a></div></td>
    <td><a name="997241"> </a><div class="CellBody">Allows the application to block on multiple I/O events. The system will wake up the application process when any of the multiple I/O events occurs. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="997243"> </a><div class="CellBody"><br></div></td>
    <td><a name="997245"> </a><div class="CellBody"><br></div></td>
    <td><a name="997247"> </a><div class="CellBody">This function uses the <span style="font-family: monospace">timeval</span> structure defined in <span style="font-family: monospace">&lt;unix/sys_time.h&gt;</span> and the <span style="font-family: monospace">fd_set</span> structure defined in <span style="font-family: monospace">sys/types.h</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997249"> </a><div class="CellBody"><br></div></td>
    <td><a name="997251"> </a><div class="CellBody"><br></div></td>
    <td><a name="997253"> </a><div class="CellBody">Also associated with this function are the following four macros defined in <span style="font-family: monospace">&lt;unix/sys_types.h&gt;:</span></div>
  <a name="997254"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">FD_ZERO</span></p>

  <a name="997255"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">FD_SET</span></p>

  <a name="997256"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">FD_CLR</span></p>

  <a name="997257"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">FD_ISSET</span></p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997259"> </a><div class="CellBody"><br></div></td>
    <td><a name="997261"> </a><div class="CellBody"><br></div></td>
    <td><a name="997263"> </a><div class="CellBody">Besides socket descriptors, this function also works with the "stdin" descriptor, <span style="font-family: monospace">sysFileDescStdIn</span>. This descriptor is marked as ready for input whenever a user or system event is available in the event queue. This includes any event that would be returned by <span style="font-family: monospace">EvtGetEvent</span>. No other descriptors besides <span style="font-family: monospace">sysFileDescStdIn</span> and socket <span style="font-family: monospace">refnum</span>s are allowed.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997268"> </a><div class="CellBody"><span style="font-family: monospace">send</span>, <span style="font-family: monospace">sendmsg</span>, <span style="font-family: monospace">sendto</span> </div></td>
    <td><a name="997274"> </a><div class="CellBody"><a href="NetLibrary.html#1256811"><span style="font-family: monospace">NetLibSend</span></a><br><a href="NetLibrary.html#1256909"><span style="font-family: monospace">NetLibSendPB</span></a></div></td>
    <td><a name="997279"> </a><div class="CellBody">These functions write data to a socket. These calls, unlike the <span style="font-family: monospace">recv</span> calls, <b>do</b> support the <span style="font-family: monospace">MSG_OOB</span> flag. The <span style="font-family: monospace">MSG_PEEK</span> flag is not applicable and the <span style="font-family: monospace">MSG_DONTROUTE</span> flag is not supported.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997282"> </a><div class="CellBody"><span style="font-family: monospace">setsockopt</span> </div></td>
    <td><a name="997287"> </a><div class="CellBody"><a href="NetLibrary.html#1257731"><span style="font-family: monospace">NetLibSocketOptionSet</span></a></div></td>
    <td><a name="997289"> </a><div class="CellBody">This function sets control options of a socket. Only the following options are allowed:</div>
  <a name="997291"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">TCP_NODELAY</span></p>

  <a name="997293"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">SO_KEEPALIVE</span></p>

  <a name="997295"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">SO_LINGER</span></p>
</td>
  </tr>
  <tr valign="top">
    <td><a name="997298"> </a><div class="CellBody"><span style="font-family: monospace">shutdown</span> </div></td>
    <td><a name="997303"> </a><div class="CellBody"><a href="NetLibrary.html#1258090"><span style="font-family: monospace">NetLibSocketShutdown</span></a></div></td>
    <td><a name="997305"> </a><div class="CellBody">Similar to <span style="font-family: monospace">close()</span>; however, it gives the caller more control over a full-duplex connection.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997308"> </a><div class="CellBody"><span style="font-family: monospace">socket</span> </div></td>
    <td><a name="997313"> </a><div class="CellBody"><a href="NetLibrary.html#1257581"><span style="font-family: monospace">NetLibSocketOpen</span></a></div></td>
    <td><a name="997315"> </a><div class="CellBody">Creates a socket for communication.The only valid address family is <span style="font-family: monospace">AF_INET</span>. The only valid socket types are <span style="font-family: monospace">SOCK_STREAM,</span> <span style="font-family: monospace">SOCK_DGRAM</span>, and in Palm OS version 3.0 and higher, <span style="font-family: monospace">SOCK_RAW</span>. The protocol parameter should be set to 0.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997318"> </a><div class="CellBody"><span style="font-family: monospace">write</span> </div></td>
    <td><a name="997323"> </a><div class="CellBody"><a href="NetLibrary.html#1256811"><span style="font-family: monospace">NetLibSend</span></a></div></td>
    <td><a name="997325"> </a><div class="CellBody">Writes data to a socket.</div></td>
  </tr>
</table>




</h5>
<h4 class="HCHeadC">
  <a name="997328"> </a>Supported Network Utility Functions
</h4>

<h5 class="TgTable">
  <a name="997426"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="997331"> </a><div class="CellHeading">Berkeley Sockets Function</div></th>
    <th><a name="997333"> </a><div class="CellHeading">Net Library Function</div></th>
    <th><a name="997335"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="997338"> </a><div class="CellBody"><span style="font-family: monospace">getdomainname</span> </div></td>
    <td><a name="997343"> </a><div class="CellBody"><a href="NetLibrary.html#1257673"><span style="font-family: monospace">NetLibSocketOptionGet</span></a><span style="font-family: monospace">(..,<br>netSettingDomainName,...)</span></div></td>
    <td><a name="997345"> </a><div class="CellBody">Returns the domain name of the local host.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997348"> </a><div class="CellBody"><span style="font-family: monospace">gethostbyaddr</span> </div></td>
    <td><a name="997353"> </a><div class="CellBody"><a href="NetLibrary.html#1255160"><span style="font-family: monospace">NetLibGetHostByAddr</span></a></div></td>
    <td><a name="997355"> </a><div class="CellBody">Looks up host information given the host's IP address. It returns a <span style="font-family: monospace">hostent</span> structure, as defined in <span style="font-family: monospace">&lt;netdb.h&gt;</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997358"> </a><div class="CellBody"><span style="font-family: monospace">gethostbyname</span> </div></td>
    <td><a name="997363"> </a><div class="CellBody"><a href="NetLibrary.html#1255242"><span style="font-family: monospace">NetLibGetHostByName</span></a></div></td>
    <td><a name="997365"> </a><div class="CellBody">Looks up host information given the host's name. It returns a <span style="font-family: monospace">hostent</span> structure which is defined in <span style="font-family: monospace">&lt;netdb.h&gt;</span>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997368"> </a><div class="CellBody"><span style="font-family: monospace">gethostname</span> </div></td>
    <td><a name="997373"> </a><div class="CellBody"><a href="NetLibrary.html#1256999"><span style="font-family: monospace">NetLibSettingGet</span></a><span style="font-family: monospace">(..,<br>netSettingHostName,<br>...)</span></div></td>
    <td><a name="997375"> </a><div class="CellBody">Returns the name of the local host.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997378"> </a><div class="CellBody"><span style="font-family: monospace">getservbyname</span> </div></td>
    <td><a name="997383"> </a><div class="CellBody"><a href="NetLibrary.html#1255398"><span style="font-family: monospace">NetLibGetServByName</span></a></div></td>
    <td><a name="997385"> </a><div class="CellBody">Returns a <span style="font-family: monospace">servent</span> structure, defined in <span style="font-family: monospace">&lt;netdb.h&gt;</span> given a service name.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997388"> </a><div class="CellBody"><span style="font-family: monospace">gettimeofday</span> </div></td>
    <td><a name="997390"> </a><div class="CellBody">glue code using <a href="DateAndTimeManager.html#1174695"><span style="font-family: monospace">TimGetSeconds</span></a></div></td>
    <td><a name="997395"> </a><div class="CellBody">Returns the current date and time.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997398"> </a><div class="CellBody"><span style="font-family: monospace">setdomainname</span> </div></td>
    <td><a name="997403"> </a><div class="CellBody"><a href="NetLibrary.html#1257169"><span style="font-family: monospace">NetLibSettingSet</span></a><span style="font-family: monospace">(..,<br>netSettingDomainName,...)</span></div></td>
    <td><a name="997405"> </a><div class="CellBody">Sets the domain name of the local host.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997408"> </a><div class="CellBody"><span style="font-family: monospace">sethostname</span> </div></td>
    <td><a name="997413"> </a><div class="CellBody"><a href="NetLibrary.html#1257169"><span style="font-family: monospace">NetLibSettingSet</span></a><span style="font-family: monospace">(..,<br>netSettingHostName,<br>...)</span></div></td>
    <td><a name="997415"> </a><div class="CellBody">Sets the name of the local host.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997418"> </a><div class="CellBody"><span style="font-family: monospace">settimeofday</span> </div></td>
    <td><a name="997420"> </a><div class="CellBody">glue code using <a href="DateAndTimeManager.html#1174761"><span style="font-family: monospace">TimSetSeconds</span></a> </div></td>
    <td><a name="997425"> </a><div class="CellBody">Sets the current date and time.</div></td>
  </tr>
</table>




</h5>
<h4 class="HCHeadC">
  <a name="997428"> </a>Supported Byte Ordering Macros
</h4>
<p class="Body">
  <a name="997429"> </a>The byte ordering macros are defined in <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">&lt;unix/netinet_in.h&gt;.</span> They convert an integer between network byte order and the host byte order. 
</p>

<h5 class="TgTable">
  <a name="997455"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="997432"> </a><div class="CellHeading">Berkeley<br>Sockets<br>Macro</div></th>
    <th><a name="997434"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="997437"> </a><div class="CellBody"><span style="font-family: monospace">htonl</span> </div></td>
    <td><a name="997439"> </a><div class="CellBody">Converts a 32-bit integer from host byte order to network byte order.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997442"> </a><div class="CellBody"><span style="font-family: monospace">htons</span> </div></td>
    <td><a name="997444"> </a><div class="CellBody">Converts a 16-bit integer from host byte order to network byte order.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997447"> </a><div class="CellBody"><span style="font-family: monospace">ntohl</span> </div></td>
    <td><a name="997449"> </a><div class="CellBody">Converts a 32-bit integer from network byte order to host byte order.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997452"> </a><div class="CellBody"><span style="font-family: monospace">ntohs</span> </div></td>
    <td><a name="997454"> </a><div class="CellBody">Converts a 16-bit integer from network byte order to host byte order.</div></td>
  </tr>
</table>




</h5>
<h4 class="HCHeadC">
  <a name="997457"> </a>Supported Network Address Conversion Functions
</h4>
<p class="Body">
  <a name="997458"> </a>The network address conversion functions are declared in the <span style="font-family: monospace">&lt;unix/arpa_inet.h&gt;</span> header file. They convert a network address from one format to another, or manipulate parts of a network address.
</p>

<h5 class="TgTable">
  <a name="997514"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="997461"> </a><div class="CellHeading">Berkeley Sockets Function</div></th>
    <th><a name="997463"> </a><div class="CellHeading">Net Library Function</div></th>
    <th><a name="997465"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="997468"> </a><div class="CellBody"><span style="font-family: monospace">inet_addr</span> </div></td>
    <td><a name="997473"> </a><div class="CellBody"><a href="NetLibrary.html#1254595"><span style="font-family: monospace">NetLibAddrAToIN</span></a></div></td>
    <td><a name="997475"> </a><div class="CellBody">Converts an IP address from dotted decimal format to 32-bit binary format. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="997478"> </a><div class="CellBody"><span style="font-family: monospace">inet_network</span> </div></td>
    <td><a name="997480"> </a><div class="CellBody">glue code</div></td>
    <td><a name="997482"> </a><div class="CellBody">Converts an IP network number from a dotted decimal format to a 32-bit binary format.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997485"> </a><div class="CellBody"><span style="font-family: monospace">inet_makeaddr</span> </div></td>
    <td><a name="997487"> </a><div class="CellBody">glue code</div></td>
    <td><a name="997489"> </a><div class="CellBody">Returns an IP address in an <span style="font-family: monospace">in_addr</span> structure given an IP network number and an IP host number in 32-bit binary format.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997492"> </a><div class="CellBody"><span style="font-family: monospace">inet_lnaof</span> </div></td>
    <td><a name="997494"> </a><div class="CellBody">glue code</div></td>
    <td><a name="997496"> </a><div class="CellBody">Returns the host number part of an IP address.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997499"> </a><div class="CellBody"><span style="font-family: monospace">inet_netof</span> </div></td>
    <td><a name="997501"> </a><div class="CellBody">glue code</div></td>
    <td><a name="997503"> </a><div class="CellBody">Returns the network number part of an IP address.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997506"> </a><div class="CellBody"><span style="font-family: monospace">inet_ntoa</span> </div></td>
    <td><a name="997511"> </a><div class="CellBody"><a href="NetLibrary.html#1254617"><span style="font-family: monospace">NetLibAddrINToA</span></a></div></td>
    <td><a name="997513"> </a><div class="CellBody">Converts an IP address from 32-bit format to dotted decimal format.</div></td>
  </tr>
</table>




</h5>
<h2 class="HBHeadB">
  <a name="997516"> </a>Extending the Network Login Script Support
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997517"> </a>Beginning in Palm OS 3.3, you can write a plugin that extends the list of available script commands in the Network preferences panel. You might do so, for example, if: 
</p>

  <a name="997518"> </a><p class="B1Bullet"> &#8226; You are a corporate IT shop, system integrator, or a token card vendor and want the login script to properly respond to a range of different connection scenarios defined by the authentication server. </p>

  <a name="997519"> </a><p class="B1Bullet"> &#8226; You are a token card vendor and you want to create the Palm OS version of your password generator. </p>

  <a name="997520"> </a><p class="B1Bullet"> &#8226; You want to perform conditional tests and branching during the execution of the script. </p>
<p class="Body">
  <a name="997521"> </a>The login script enhancement can also be installed on any Palm Powered handheld that already has network library support (that is, PalmPilot<sup>&#8482;</sup> Professional and newer devices running Palm OS 2.0 or higher). To do so, you install a file named <span style="font-family: monospace">Network.prc</span> along with a PRC file for the network interface you use (i.e., PPP or SLIP). These files provide the new Network preferences panel, which contains support for some new commands and support for the ability to write script plugins. 
</p>
<p class="Body">
  <a name="997522"> </a>The sections below describe the basics of how to write a login script plugin. For more detailed information on the API you use to write a plugin, see the chapter <a href="ScriptPlugin.html#1278148">"Script Plugin"</a> in the <i>Palm OS Programmer's API Reference</i>. 
</p>

<h4 class="HCHeadC">
  <a name="997529"> </a>Writing the Login Script Plugin
</h4>
<p class="Body">
  <a name="997530"> </a>To write a login script plugin, you create a project like you normally would; however, specify <span style="font-family: monospace">'scpt'</span> as the database type instead of <span style="font-family: monospace">'appl'</span>. (If you're using Metrowerks CodeWarrior, you specify the database type in the PalmRez post linker panel.) 
</p>
<p class="Body">
  <a name="997534"> </a>In the <a href="SystemManager.html#1166472"><span style="font-family: monospace">PilotMain</span></a> function, the plugin should respond to two launch codes: 
</p>

  <a name="997539"> </a><p class="B1Bullet"> &#8226; <a href="ScriptPlugin.html#1278324"><span style="font-family: monospace">scptLaunchCmdListCmds</span></a> to inform the Network preferences panel of the commands your plugin implements. </p>

  <a name="997544"> </a><p class="B1Bullet"> &#8226; <a href="ScriptPlugin.html#1278334"><span style="font-family: monospace">scptLaunchCmdExecuteCmd</span></a> to execute one of your commands. </p>

<h4 class="HCHeadC">
  <a name="997546"> </a>Responding to scptLaunchCmdListCmds
</h4>
<p class="Body">
  <a name="997547"> </a>The Network preferences panel sends the <span style="font-family: monospace">scptLaunchCmdListCmds</span> launch code when it is constructing the pull-down list of available commands that it displays in its script view. The panel sends this launch code to all PRCs of type <span style="font-family: monospace">'scpt'</span>. It passes an empty structure of type <a href="ScriptPlugin.html#1278273"><span style="font-family: monospace">PluginInfoType</span></a> as its parameter block. Your plugin should respond by filling in the structure with the following information: 
</p>
  <a name="997552"> </a><p class="B2BulletSub"> -	 The name of your plugin (the name of the PRC file)</p>  <a name="997553"> </a><p class="B2BulletSub"> -	 The number of commands your plugin implements. No more than <span style="font-family: monospace">pluginMaxNumOfCmds</span> is allowed. </p>  <a name="997555"> </a><p class="B2BulletSub"> -	 An array containing the name of each command your plugin implements and a Boolean value that indicates whether your plugin takes an argument. </p><p class="Body">
  <a name="997556"> </a>A given handheld might have multiple plugins installed. If so, the resulting pull-down list contains the union of all commands supported by all of the plugins installed on the handheld. For this reason, you should make sure the command names you supply are unique. You also should make sure the names are as brief as possible, as only 15 characters are allowed for the name. 
</p>

<h4 class="HCHeadC">
  <a name="997557"> </a>Responding to scptLaunchCmdExecuteCmd
</h4>
<p class="Body">
  <a name="997559"> </a>The <span style="font-family: monospace">scptLaunchCmdExecuteCmd</span> launch code is sent when the login script is being executed. That is, the user has attempted to connect to the network service specified in the Network preferences panel, and the panel is executing the script to perform authentication. 
</p>
<p class="Body">
  <a name="997561"> </a>The <span style="font-family: monospace">scptLaunchCmdExecuteCmd</span> parameter block is a structure of type <a href="ScriptPlugin.html#1278232"><span style="font-family: monospace">PluginExecCmdType</span></a>. It contains: 
</p>

  <a name="997565"> </a><p class="B1Bullet"> &#8226; The name of the command to be executed </p>

  <a name="997566"> </a><p class="B1Bullet"> &#8226; The command argument, if it takes one</p>

  <a name="997567"> </a><p class="B1Bullet"> &#8226; A pointer to a network interface function</p>

  <a name="997568"> </a><p class="B1Bullet"> &#8226; A handle to information specific to the current connection</p>
<p class="Body">
  <a name="997569"> </a>Your plugin should execute the specified command. When a plugin is launched with this code, it is launched as a subroutine and as such does not have access to global variables. Also keep in mind that the network library and a connection application (such as the HotSync application) are already running when the plugin is launched. Thus, available memory and stack space are extremely limited. 
</p>
<p class="Body">
  <a name="997570"> </a>To perform most of its work, the plugin command probably needs access to the network interface (such as SLIP or PPP) specified for the selected network service. For this reason, the plugin is passed a pointer to a callback function defined by the network interface. The plugin should call this function when it needs to perform the following tasks: 
</p>

  <a name="997571"> </a><p class="B1Bullet"> &#8226; Read a number of bytes from the network</p>

  <a name="997572"> </a><p class="B1Bullet"> &#8226; Write a number of bytes to the network</p>

  <a name="997573"> </a><p class="B1Bullet"> &#8226; Get the user's name and password information</p>

  <a name="997574"> </a><p class="B1Bullet"> &#8226; Write a string to the connection log</p>

  <a name="997575"> </a><p class="B1Bullet"> &#8226; Prompt the user for information</p>

  <a name="997576"> </a><p class="B1Bullet"> &#8226; Check to see if the user pressed the Cancel button</p>

  <a name="997577"> </a><p class="B1Bullet"> &#8226; Display a form</p>

  <a name="997578"> </a><p class="B1Bullet"> &#8226; Obtain access to the serial library</p>
<p class="Body">
  <a name="997579"> </a>The callback's prototype is defined by <a href="ScriptPlugin.html#1278475"><span style="font-family: monospace">ScriptPluginSelectorProc</span></a>. It takes as arguments the handle to the connection-specific data passed in with the launch code, the task that the network interface should perform (specified as a <span style="font-family: monospace">pluginNetLib</span>... constant), followed by a series of parameters whose interpretations depend on which task is to be performed. 
</p>
<p class="Body">
  <a name="997583"> </a>For example, the following code implements the command "Send Uname", which sends the user's name to the host computer. 
</p>
<p class="CCodeCaption">
  <a name="997584"> </a>Listing 7.2  Simple Script Plugin Command
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define  pluginSecondCmd "Send Uname"<a name="997585"> </a>
 <a name="997586"> </a>
UInt32 PilotMain(UInt16 cmd, void *cmdPBP, UInt16 launchFlags) {<a name="997587"> </a>
PluginExecCmdPtr execPtr;<a name="997588"> </a>
UInt32 error = success;<a name="997589"> </a>
Int16 dataSize = 0;<a name="997590"> </a>
Char* dataBuffer = NULL;<a name="997591"> </a>
ScriptPluginSelectorProcPtr selectorTypeP;<a name="997592"> </a>
 <a name="997593"> </a>
if (cmd == scptLaunchCmdExecuteCmd) {<a name="997594"> </a>
   execPtr = (PluginExecCmdPtr)cmdPBP;<a name="997595"> </a>
   selectorTypeP = execPtr-&gt;procP-&gt;selectorProcP;<a name="997596"> </a>
 <a name="997597"> </a>
   dataBuffer = MemPtrNew(pluginMaxLenTxtStringArg+1);<a name="997598"> </a>
   if (!dataBuffer) {<a name="997599"> </a>
      return failure;<a name="997600"> </a>
   }<a name="997601"> </a>
   MemSet(dataBuffer,pluginMaxLenTxtStringArg+1,0);<a name="997602"> </a>
 <a name="997603"> </a>
   if (!StrCompare(execPtr-&gt;commandName, pluginSecondCmd)) {<a name="997604"> </a>
 <a name="997605"> </a>
      /* get the user name from the network interface */<a name="997606"> </a>
      error = (selectorTypeP)(execPtr-&gt;handle, <a name="997607"> </a>
         pluginNetLibGetUserName, (void*)dataBufferP, &amp;dataSize, 0, <a name="997608"> </a>
         NULL); <a name="997609"> </a>
      if (error) goto Exit;<a name="997610"> </a>
 <a name="997611"> </a>
      dataSize = StrLen((Char*)dataBufferP);<a name="997612"> </a>
 <a name="997613"> </a>
/* have the network interface send the user name to the host */<a name="997614"> </a>
      error = (selectorTypeP)(execPtr-&gt;handle, <a name="997615"> </a>
         pluginNetLibWriteBytes, (void*)dataBufferP, &amp;dataSize, 0, <a name="997616"> </a>
         NULL);<a name="997617"> </a>
 <a name="997618"> </a>
   return error;<a name="997619"> </a>
   }<a name="997620"> </a>
}<a name="997621"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="997622"> </a>If your command needs to interact with the user, it must do so through the network interface. When the connection attempt is taking place, the user sees either the Network preferences panel or the HotSync application. Your plugin does not have control of the screen, so you cannot simply display a form. You have two options: 
</p>

  <a name="997623"> </a><p class="B1Bullet"> &#8226; The network interface can display a prompt for you and return the value that the user enters in response. It can also query the Network preferences panel to see if the user cancelled the connection attempt. </p>

  <a name="997624"> </a><p class="B1Bullet"> &#8226; If you want to do more than simply display a prompt or check the cancel status, you can use the command <span style="font-family: monospace">pluginNetLibCallUIProc</span> to display a form and call your own user interface routine. </p>
<p class="Body">
  <a name="997627"> </a>To use <span style="font-family: monospace">pluginNetLibCallUIProc</span>, you must do the following: 
</p>
  <a name="997628"> </a><p class="N1NumList">1.	  Initialize the form using a form resource that you've created. </p>  <a name="997629"> </a><p class="N1NumList">2.	  Create a struct that contains your form's handle and any other values that you are going to need in your user interface routine. </p>  <a name="997630"> </a><p class="N1NumList">3.	  Call the network interface's callback function with the <span style="font-family: monospace">pluginNetLibCallUIProc</span> command, the structure with the form's handle and other pertinent information, and the address of a function in your plugin that will perform the user interface routine. This function should take one argument-the struct you've passed to the network interface-and return <span style="font-family: monospace">void</span>. </p>  <a name="997631"> </a><p class="N1NumList">4.	  When the call to the network interface returns, close the form. </p><p class="Body">
  <a name="997632"> </a>For an example of using <span style="font-family: monospace">pluginNetLibCallUIProc</span>, see the functions <span style="font-family: monospace">WaitForData</span> and <span style="font-family: monospace">promptUser</span> in the example code <span style="font-family: monospace">ScriptPlugin.c</span>. 
</p>

<h2 class="HaHeadA">
  <a name="997634"> </a>Internet Library 
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997635"> </a>The Internet library provides Palm OS applications easy access to World Wide Web documents. The Internet library uses the net library for basic network access and builds on top of the net library's socket concept to provide a socket-like API to higher level internet protocols like HTTP and HTTPS.
</p>
<p class="Body">
  <a name="997636"> </a>Using the Internet library, an application can access a web page with as little as three calls (<a href="INetLib.html#1366419"><span style="font-family: monospace">INetLibURLOpen</span></a>, <a href="INetLib.html#1366076"><span style="font-family: monospace">INetLibSockRead</span></a>, and <a href="INetLib.html#1365402"><span style="font-family: monospace">INetLibSockClose</span></a>). The Internet library also provides a more advanced API for those applications that need finer control.
</p>
<div class="NINoteImportant"><hr>
  <a name="997649"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> The information in this section applies only to version 3.2 or later of the Palm OS on Palm VII devices. These features are implemented only if the <a href="CompatibilityApdx.html#970641">Wireless Internet Feature Set</a> is present.
<hr>
</div>
<div class="NWNoteWarning"><hr>
  <a name="997656"> </a> <span style="color: #FF0000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">WARNING!  </span> In future OS versions, PalmSource, Inc. does not intend to support or provide backward compatibility for the Internet library API.
<hr>
</div>
<p class="Body">
  <a name="997657"> </a>The Internet library is implemented as a system library that is installed at runtime and doesn't have to be present for the system to work properly.
</p>
<p class="Body">
  <a name="997658"> </a>This section describes how to use the Internet library in your application. It covers:
</p>

  <a name="997662"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997692">System Requirements</a></p>

  <a name="997666"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997705">Initialization and Setup</a></p>

  <a name="997670"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997733">Accessing Web Pages</a></p>

  <a name="997674"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997761">Asynchronous Operation</a></p>

  <a name="997678"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997787">Using the Low Level Calls</a></p>

  <a name="997686"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997824">Cache Overview</a></p>

  <a name="997690"> </a><p class="B1Bullet"> &#8226; <a href="NetworkCommunication.html#997841">Internet Library Network Configurations</a></p>

<h2 class="HBHeadB">
  <a name="997692"> </a>System Requirements
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1007891"> </a>The Internet library is available only on version 3.2 or later of the Palm OS on Palm VII devices. Before making any Internet library calls, ensure that the Internet library is available. You can be sure it is available by using the following <a href="FeatureManager.html#1110037"><span style="font-family: monospace">FtrGet</span></a> call:
</p>
<pre  class="Preformatted">
err = FtrGet(inetLibFtrCreator,
inetFtrNumVersion, &amp;value);<a name="1007898"> </a>
</pre>
<p class="Body">
  <a name="997701"> </a>If the Internet library is installed, the <span style="font-family: monospace">value</span> parameter will be non-zero and the returned error will be zero (for no error).
</p>
<p class="Body">
  <a name="997703"> </a>When the Internet library is present and running, it requires an estimated additional 1 KB of RAM, beyond the net library. More additional memory is used for the security library, if that is used (when accessing secure sites), and for opening a cache database, if that is used.
</p>

<h2 class="HBHeadB">
  <a name="997705"> </a>Initialization and Setup
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997706"> </a>Before using the Internet library, an application must call <a href="SystemManager.html#1166164"><span style="font-family: monospace">SysLibFind</span></a> to obtain a library reference number, as follows:
</p>
<pre  class="Preformatted">
err = SysLibFind("INet.lib", &amp;libRefNum)<a name="997710"> </a>
</pre>
<p class="Body">
  <a name="997714"> </a>Next, it must call <a href="INetLib.html#1365231"><span style="font-family: monospace">INetLibOpen</span></a> to allocate an <span style="font-family: monospace">inetH</span> handle. The <span style="font-family: monospace">inetH</span> handle holds all application specific environment settings and each application that uses the Internet library gets its own private <span style="font-family: monospace">inetH</span> handle. Any calls that change the default behavior of the Internet library affect environment settings stored in the application's own <span style="font-family: monospace">inetH</span> structure, so these changes will not affect other applications that might be using the Internet library at the same time.
</p>
<p class="Body">
  <a name="997715"> </a><span style="font-family: monospace">INetLibOpen</span> also opens the net library for the application. In addition, the application can tell <span style="font-family: monospace">INetLibOpen</span> the type of network service it prefers: wireline or wireless. <span style="font-family: monospace">INetLibOpen</span> queries the available network interfaces and attaches the appropriate one(s) for the desired type of service. When the application calls <a href="INetLib.html#1364805"><span style="font-family: monospace">INetLibClose</span></a>, the previous interface configuration is restored. For more information on configurations, see the section <a href="NetworkCommunication.html#997841">"Internet Library Network Configurations"</a>. 
</p>
<p class="Body">
  <a name="997722"> </a>The Internet library gets some of its default behavior from the system preferences database, and some of these preference settings are made by the user via the Wireless preferences panel. The preferences set by this panel include the proxy server to use and a setting that determines whether or not the user is warned when the device ID is sent. Other settings stored in the preferences database come from Internet library network configurations (see <a href="NetworkCommunication.html#997841">"Internet Library Network Configurations"</a>). All these settings can be queried and/or overridden by each application through the <a href="INetLib.html#1365290"><span style="font-family: monospace">INetLibSettingGet</span></a> and <a href="INetLib.html#1365344"><span style="font-family: monospace">INetLibSettingSet</span></a> calls. However, any changes made by an application are not stored into the system preferences, but only take effect while that <span style="font-family: monospace">inetH</span> handle is open.
</p>

<h2 class="HBHeadB">
  <a name="997733"> </a>Accessing Web Pages
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997734"> </a>In the Palm.Net environment, all HTML documents are dynamically compressed by the Palm Web Clipping Proxy server before being transmitted to the Palm Powered handheld.
</p>
<p class="Body">
  <a name="997736"> </a>The procedure for reading a page from the network operates as follows. First, the application passes the desired URL to the <a href="INetLib.html#1366419"><span style="font-family: monospace">INetLibURLOpen</span></a> routine, which creates a socket handle to access that web page. This routine returns immediately before performing any required network I/O. Then the application calls <a href="INetLib.html#1366076"><span style="font-family: monospace">INetLibSockRead</span></a> to read the data, followed by <a href="INetLib.html#1365402"><span style="font-family: monospace">INetLibSockClose</span></a> to close down the socket. 
</p>
<p class="Body">
  <a name="997746"> </a>Note that if no data is available to read immediately, <span style="font-family: monospace">INetLibSockRead</span> blocks until at least one byte of data is available to be read. To implement asynchronous operation using events, see the next section, <a href="NetworkCommunication.html#997761">Asynchronous Operation</a>.
</p>
<p class="Body">
  <a name="997750"> </a>If an application requires finer control over the operation, it can replace the call to <span style="font-family: monospace">INetLibURLOpen</span> with other lower-level Internet library calls (<a href="INetLib.html#1366015"><span style="font-family: monospace">INetLibSockOpen</span></a>, <a href="INetLib.html#1366178"><span style="font-family: monospace">INetLibSockSettingSet</span></a>, etc.) that are described in the section <a href="NetworkCommunication.html#997787">"Using the Low Level Calls"</a>.
</p>

<h2 class="HBHeadB">
  <a name="997761"> </a>Asynchronous Operation
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997762"> </a>A major challenge in writing an Internet application is handling the task of accessing content over a slow network while still providing good user-interface response. For example, a user should be able to scroll, select menus, or tap the Cancel button in the middle of a download of a web page.
</p>
<p class="Body">
  <a name="997763"> </a>To easily enable this type of functionality, the Internet library provides the <a href="INetLib.html#1365179"><span style="font-family: monospace">INetLibGetEvent</span></a> call. This call is designed to replace the <span style="font-family: monospace">EvtGetEvent</span> call that all traditional, non-network Palm OS applications use. The <span style="font-family: monospace">INetLibGetEvent</span> call fetches the next event that needs to be processed, whether that event is a user-interface event like a tap on the screen, or a network event like some data arriving from the remote host that needs to be read. If no events are ready, <span style="font-family: monospace">INetLibGetEvent</span> automatically puts the Palm Powered handheld into low-power mode and blocks until the next event occurs.
</p>
<p class="Body">
  <a name="997767"> </a>Using <span style="font-family: monospace">INetLibGetEvent</span> is the preferred way of performing network I/O since it maximizes battery life and user-interface responsiveness. 
</p>
<p class="Body">
  <a name="997768"> </a>With <span style="font-family: monospace">INetLibGetEvent</span>, the process of accessing a web page becomes only slightly more complicated. Instead of calling <span style="font-family: monospace">INetLibSockRead</span> immediately after <span style="font-family: monospace">INetLibURLOpen</span>, the application should instead return to its event loop and wait for the next event. When it gets a network event that says data is ready at the socket, then it should call <span style="font-family: monospace">INetLibSockRead</span>.
</p>
<p class="Body">
  <a name="997769"> </a>There are two types of network events that <span style="font-family: monospace">INetLibGetEvent</span> can return in addition to the standard user-interface events. The first event is a status change event (<a href="EventRef.html#972659"><span style="font-family: monospace">inetSockStatusChangeEvent</span></a>). This event indicates that the status of a socket has changed and the application may want to update its user interface. For example, when calling <span style="font-family: monospace">INetLibURLOpen</span> to access an HTTP server, the status on the socket goes from "finding host," to "connecting with host," to "waiting for data," to "reading data," etc. The event structure associated with an event of this type contains both the socket handle and the new status so that the application can update the user interface accordingly.
</p>
<p class="Body">
  <a name="997773"> </a>The second type of event that <span style="font-family: monospace">INetLibGetEvent</span> can return is a data-ready event (<a href="EventRef.html#972602"><span style="font-family: monospace">inetSockReadyEvent</span></a>). This event is returned when data is ready at the socket for reading. This event tells the application that it can call <span style="font-family: monospace">INetLibSockRead</span> and be assured that it will not block while waiting for data to arrive.
</p>
<p class="Body">
  <a name="997777"> </a>The general flow of an application that uses the Internet library is to open a URL using <span style="font-family: monospace">INetLibURLOpen</span>, in response to a user command. Then it repeatedly calls <span style="font-family: monospace">INetLibGetEvent</span> to process events from both the user interface and the newly created socket returned by <span style="font-family: monospace">INetLibURLOpen</span>. In response to <span style="font-family: monospace">inetSockStatusChangeEvent</span> events, the application should update the user interface to show the user the current status, such as finding host, connecting to host, reading data, etc. In response to <span style="font-family: monospace">inetSockReadyEvent</span> events, the application should read data from the socket using <span style="font-family: monospace">INetLibSockRead</span>. Finally, when all available data has been read (<span style="font-family: monospace">INetLibSockRead</span> returns 0 bytes read), the application should close the socket using <span style="font-family: monospace">INetLibSockClose</span>.
</p>
<p class="Body">
  <a name="997785"> </a>Finally, the convenience call <a href="INetLib.html#1366223"><span style="font-family: monospace">INetLibSockStatus</span></a> is provided so that an application can query the status of a socket handle. This call never blocks on network I/O so it is safe to call at any time. It not only returns the current status of the socket but also whether or not it is ready for reading and/or writing. It essentially returns the same information as conveyed via the events <span style="font-family: monospace">inetSockReadyEvent</span> and <span style="font-family: monospace">inetSockStatusChangeEvent</span>. Applications that don't use <span style="font-family: monospace">INetLibGetEvent</span> could repeatedly poll <span style="font-family: monospace">INetLibSockStatus</span> to check for status changes and readiness for I/O, though polling is not recommended.
</p>

<h2 class="HBHeadB">
  <a name="997787"> </a>Using the Low Level Calls
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997788"> </a>Applications that need finer control than <span style="font-family: monospace">INetLibURLOpen</span> provides can use the lower level calls of the Internet library. These include <a href="INetLib.html#1366015"><span style="font-family: monospace">INetLibSockOpen</span></a>, <a href="INetLib.html#1365439"><span style="font-family: monospace">INetLibSockConnect</span></a>, <a href="INetLib.html#1366178"><span style="font-family: monospace">INetLibSockSettingSet</span></a>, <a href="INetLib.html#1365603"><span style="font-family: monospace">INetLibSockHTTPReqCreate</span></a>, <a href="INetLib.html#1365507"><span style="font-family: monospace">INetLibSockHTTPAttrGet</span></a>, <a href="INetLib.html#1365553"><span style="font-family: monospace">INetLibSockHTTPAttrSet</span></a>, and <a href="INetLib.html#1365651"><span style="font-family: monospace">INetLibSockHTTPReqSend</span></a>.
</p>
<p class="Body">
  <a name="997810"> </a>A single call to <span style="font-family: monospace">INetLibURLOpen</span> for an HTTP resource is essentially equivalent to this sequence: <span style="font-family: monospace">INetLibSockOpen</span>, <span style="font-family: monospace">INetLibSockConnect</span>, <span style="font-family: monospace">INetLibSockHTTPReqCreate</span>, and <span style="font-family: monospace">INetLibSockHTTPReqSend</span>. These four calls provide the capability for the application to access non-standard ports on the server (if allowed), to modify the default HTTP request headers, and to perform HTTP PUT and POST operations. The only calls here that actually perform network I/O are <span style="font-family: monospace">INetLibSockConnect</span>, which establishes a TCP connection with the remote host, and <span style="font-family: monospace">INetLibSockHTTPReqSend</span>, which sends the HTTP request to the server.
</p>
<p class="Body">
  <a name="997811"> </a><span style="font-family: monospace">INetLibSockHTTPAttrSet</span> is provided so that the application can add or modify the default HTTP request headers that <span style="font-family: monospace">INetLibSockHTTPReqCreate</span> creates.
</p>
<p class="Body">
  <a name="997812"> </a><span style="font-family: monospace">INetLibSockSettingSet</span> allows an application finer control over the socket settings.
</p>
<p class="Body">
  <a name="997817"> </a>Finally, the routine <a href="INetLib.html#1366318"><span style="font-family: monospace">INetLibURLCrack</span></a> is provided as a convenient utility for breaking a URL into its component parts.
</p>

<h2 class="HBHeadB">
  <a name="997824"> </a>Cache Overview
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997825"> </a>The Internet library maintains a cache database of documents that have been downloaded. This is an LRU (Least Recently Used) cache; that is, the least recently used items are flushed when the cache fills. Whether or not a retrieved page is cached is determined by a flag (<span style="font-family: monospace">inetOpenURLFlagKeepInCache</span>) set in the socket or by <span style="font-family: monospace">INetLibURLOpen</span>. Another flag (<span style="font-family: monospace">inetOpenURLFlagLookInCache</span>) determines if the Internet library should check the cache first when retrieving a URL.
</p>
<p class="Body">
  <a name="997826"> </a>The same cache database can be used by any application using the Internet library, so that every application can share the same pool of prefetched documents. Alternately, an application can use a different cache database. The cache database to use is specified in the <span style="font-family: monospace">INetLibOpen</span> call.
</p>
<p class="Body">
  <a name="997827"> </a>Generally, a cached item is stored in one or more database records in the same format as it arrives from the server.
</p>
<p class="Body">
  <a name="997828"> </a>In the cache used by the Web Clipping Application Viewer application, each record includes a field that contains the "master" URL of the item. This field is set to the URL of the active PQA, so all pages linked from one PQA have the same master URL. This facilitates finding all pages in a hierarchy to build a history list.
</p>
<p class="Body">
  <a name="997829"> </a>The Internet library maintains a list of items in the cache. You can retrieve items in this list, or iterate over the whole list, by calling <a href="INetLib.html#1364719"><span style="font-family: monospace">INetLibCacheList</span></a>. You can retrieve a cached document directly by using <a href="INetLib.html#1364668"><span style="font-family: monospace">INetLibCacheGetObject</span></a>.
</p>
<p class="Body">
  <a name="997839"> </a>You can check if a URL is cached by calling <a href="INetLib.html#1366377"><span style="font-family: monospace">INetLibURLGetInfo</span></a>.
</p>

<h2 class="HBHeadB">
  <a name="997841"> </a>Internet Library Network Configurations
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="997842"> </a>The Internet library supports network configurations. A <b>configuration</b> is a specific set of values for several of the Internet library settings (from the <a href="INetLib.html#1364229"><span style="font-family: monospace">INetSettingEnum</span></a> type).
</p>
<p class="Body">
  <a name="997846"> </a>The Internet library keeps a list of available configurations and aliases to them. There are three built-in configurations:
</p>

  <a name="997847"> </a><p class="B1Bullet"> &#8226; A wireless configuration that uses the Palm.Net wireless system and the Palm Web Clipping Proxy server.</p>

  <a name="997848"> </a><p class="B1Bullet"> &#8226; A wireline configuration that uses the wireline network configuration specified in the Network preferences panel and the Palm Web Clipping Proxy server.</p>

  <a name="997849"> </a><p class="B1Bullet"> &#8226; A generic configuration that uses the wireline network configuration specified in the Network preferences panel and no proxy server.</p>
<p class="Body">
  <a name="997850"> </a>You can also define your own configuration by modifying an existing one and saving it under a different name.
</p>
<p class="Body">
  <a name="1004161"> </a>The Internet library also defines several <b>configuration aliases</b> (see <a href="INetLib.html#1364527">"Configuration Aliases"</a> in the <i>Palm OS Programmer's API Reference</i>). An alias is a configuration name that simply points to another configuration. You can specify an alias anywhere in the API you would specify a configuration. This facilitates easy re-assignment of the built-in configurations and eliminates having duplicate settings. You assign an alias by using <a href="INetLib.html#1364881"><span style="font-family: monospace">INetLibConfigAliasSet</span></a> and can retrieve an alias by using <a href="INetLib.html#1364836"><span style="font-family: monospace">INetLibConfigAliasGet</span></a>.
</p>
<p class="Body">
  <a name="1004174"> </a>For example, to change the default configuration used by the Internet library for a particular kind of connection, you can set up the appropriate values for a connection, save the configuration, and then set the Internet library's default alias configuration to point to your custom configuration. When an application specifies which configuration it wants to use, if it specifies the alias, it will use the custom settings.
</p>
<p class="Body">
  <a name="997865"> </a>If you use configurations at all, it will probably be to specify a specific configuration when opening the Internet library via <span style="font-family: monospace">INetLibOpen</span>. The Internet library also contains an API to allow you to manipulate configurations in your application, but doing so is rare. You can list the available configurations (<a href="INetLib.html#1365015"><span style="font-family: monospace">INetLibConfigList</span></a>), get a configuration index (<a href="INetLib.html#1364975"><span style="font-family: monospace">INetLibConfigIndexFromName</span></a>), select (<a href="INetLib.html#1365051"><span style="font-family: monospace">INetLibConfigMakeActive</span></a>) the Internet library network configuration you would prefer to use (wireless, wireline, etc.), rename existing configurations (<a href="INetLib.html#1365093"><span style="font-family: monospace">INetLibConfigRename</span></a>), and delete configurations (<a href="INetLib.html#1364929"><span style="font-family: monospace">INetLibConfigDelete</span></a>).
</p>
<p class="Body">
  <a name="997881"> </a>The configuration functions are provided primarily for use by Preferences panels while editing and saving configurations. The general procedure is to make the configuration active that you want to edit, set the settings appropriately, then save the configuration using <a href="INetLib.html#1365141"><span style="font-family: monospace">INetLibConfigSaveAs</span></a>. Note that configuration changes are not saved after the Internet library is closed, unless you call <span style="font-family: monospace">INetLibConfigSaveAs</span>. 
</p>

<h2 class="HaHeadA">
  <a name="997886"> </a>Summary of Network Communication 
<a href="#996393"><img src="images/top.gif" border="0"></a></h2>


<h5 class="TgTable">
  <a name="998144"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="997889"> </a><div class="CellHeading">Net Library Functions</div></th>
    <th><a name="997891"> </a><div class="CellHeading"><br></div></th>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="997893"> </a><div class="CellHeading">Library Open and Close</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="997900"> </a><div class="CellBody"><a href="NetLibrary.html#1254641">NetLibClose</a><br><a href="NetLibrary.html#1255058">NetLibConnectionRefresh</a><br><a href="NetLibrary.html#1255137">NetLibFinishCloseWait</a></div></td>
    <td colspan="1" rowspan="3"><a name="997911"> </a><div class="CellBody"><a href="NetLibrary.html#1256393">NetLibOpen</a><br><a href="NetLibrary.html#1256533">NetLibOpenCount</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="997927"> </a><div class="CellHeading">Socket Creation and Deletion</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997934"> </a><div class="CellBody"><a href="NetLibrary.html#1257399">NetLibSocketClose</a></div></td>
    <td><a name="997939"> </a><div class="CellBody"><a href="NetLibrary.html#1257581">NetLibSocketOpen</a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="997941"> </a><div class="CellHeading">Socket Options</div></td>
  </tr>
  <tr valign="top">
    <td><a name="997948"> </a><div class="CellBody"><a href="NetLibrary.html#1257673">NetLibSocketOptionGet</a></div></td>
    <td><a name="997953"> </a><div class="CellBody"><a href="NetLibrary.html#1257731">NetLibSocketOptionSet</a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="997955"> </a><div class="CellHeading">Socket Connections</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="997962"> </a><div class="CellBody"><a href="NetLibrary.html#1257221">NetLibSocketAccept</a><br><a href="NetLibrary.html#1257284">NetLibSocketAddr</a><br><a href="NetLibrary.html#1257334">NetLibSocketBind</a></div></td>
    <td colspan="1" rowspan="3"><a name="997973"> </a><div class="CellBody"><a href="NetLibrary.html#1257447">NetLibSocketConnect</a><br><a href="NetLibrary.html#1257506">NetLibSocketListen</a><br><a href="NetLibrary.html#1258090">NetLibSocketShutdown</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="997989"> </a><div class="CellHeading">Send and Receive Routines</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="997996"> </a><div class="CellBody"><a href="NetLibrary.html#1255087">NetLibDmReceive</a><br><a href="NetLibrary.html#1256558">NetLibReceive</a><br><a href="NetLibrary.html#1256631">NetLibReceivePB</a></div></td>
    <td colspan="1" rowspan="3"><a name="998007"> </a><div class="CellBody"><a href="NetLibrary.html#1256811">NetLibSend</a><br><a href="NetLibrary.html#1256909">NetLibSendPB</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998020"> </a><div class="CellHeading">Utilities</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="7"><a name="998027"> </a><div class="CellBody"><a href="NetLibrary.html#1254543">NetHToNL</a><br><a href="NetLibrary.html#1254570">NetHToNS</a><br><a href="NetLibrary.html#1254595">NetLibAddrAToIN</a><br><a href="NetLibrary.html#1254617">NetLibAddrINToA</a><br><a href="NetLibrary.html#1255160">NetLibGetHostByAddr</a><br><a href="NetLibrary.html#1255242">NetLibGetHostByName</a><br><a href="NetLibrary.html#1255322">NetLibGetMailExchangeByName</a></div></td>
    <td colspan="1" rowspan="7"><a name="998050"> </a><div class="CellBody"><a href="NetLibrary.html#1255398">NetLibGetServByName</a><br><a href="NetLibrary.html#1256097">NetLibMaster</a><br><a href="NetLibrary.html#1256733">NetLibSelect</a><br><a href="NetLibrary.html#1258131">NetLibTracePrintF</a><br><a href="NetLibrary.html#1258169">NetLibTracePutS</a><br><a href="NetLibrary.html#1258203">NetNToHL</a><br><a href="NetLibrary.html#1258231">NetNToHS</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998094"> </a><div class="CellHeading">Setup</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="5"><a name="998101"> </a><div class="CellBody"><a href="NetLibrary.html#1255440">NetLibIFAttach</a><br><a href="NetLibrary.html#1255477">NetLibIFDetach</a><br><a href="NetLibrary.html#1255509">NetLibIFDown</a><br><a href="NetLibrary.html#1255553">NetLibIFGet</a><br><a href="NetLibrary.html#1255597">NetLibIFSettingGet</a></div></td>
    <td colspan="1" rowspan="5"><a name="998118"> </a><div class="CellBody"><a href="NetLibrary.html#1255981">NetLibIFSettingSet</a><br><a href="NetLibrary.html#1256042">NetLibIFUp</a><br><a href="NetLibrary.html#1256999">NetLibSettingGet</a><br><a href="NetLibrary.html#1257169">NetLibSettingSet</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
</table>




</h5>
<h5 class="TgTable">
  <a name="998170"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="998147"> </a><div class="CellHeading">Network Utilities</div></th>
    <th><a name="998149"> </a><div class="CellHeading"><br></div></th>
  </tr>
  <tr valign="top">
    <td><a name="998158"> </a><div class="CellBody"><a href="NetworkUtils.html#1276035">NetUReadN</a></div></td>
    <td><a name="998166"> </a><div class="CellBody"><a href="NetworkUtils.html#1276061">NetUTCPOpen</a><br><a href="NetworkUtils.html#1276167">NetUWriteN</a></div></td>
  </tr>
</table>




</h5>
<h5 class="TgTable">
  <a name="998376"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="998173"> </a><div class="CellHeading">Internet Library Functions</div></th>
    <th><a name="998175"> </a><div class="CellHeading"><br></div></th>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998177"> </a><div class="CellHeading">Library Open and Close</div></td>
  </tr>
  <tr valign="top">
    <td><a name="998184"> </a><div class="CellBody"><a href="INetLib.html#1364805">INetLibClose</a></div></td>
    <td><a name="998189"> </a><div class="CellBody"><a href="INetLib.html#1365231">INetLibOpen</a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998191"> </a><div class="CellHeading">Settings</div></td>
  </tr>
  <tr valign="top">
    <td><a name="998198"> </a><div class="CellBody"><a href="INetLib.html#1365290">INetLibSettingGet</a></div></td>
    <td><a name="998203"> </a><div class="CellBody"><a href="INetLib.html#1365344">INetLibSettingSet</a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998205"> </a><div class="CellHeading">Event Management</div></td>
  </tr>
  <tr valign="top">
    <td><a name="998212"> </a><div class="CellBody"><a href="INetLib.html#1365179">INetLibGetEvent</a></div></td>
    <td><a name="998214"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998216"> </a><div class="CellHeading">High-Level Socket Calls</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="2"><a name="998223"> </a><div class="CellBody"><a href="INetLib.html#1365402">INetLibSockClose</a><br><a href="INetLib.html#1366076">INetLibSockRead</a></div></td>
    <td colspan="1" rowspan="2"><a name="998231"> </a><div class="CellBody"><a href="INetLib.html#1366419">INetLibURLOpen</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998237"> </a><div class="CellHeading">Low-Level Socket Calls</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="998244"> </a><div class="CellBody"><a href="INetLib.html#1365439">INetLibSockConnect</a><br><a href="INetLib.html#1366015">INetLibSockOpen</a><br><a href="INetLib.html#1366135">INetLibSockSettingGet</a></div></td>
    <td colspan="1" rowspan="3"><a name="998255"> </a><div class="CellBody"><a href="INetLib.html#1366178">INetLibSockSettingSet</a><br><a href="INetLib.html#1366223">INetLibSockStatus</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998268"> </a><div class="CellHeading">HTTP Interface</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="2"><a name="998275"> </a><div class="CellBody"><a href="INetLib.html#1365507">INetLibSockHTTPAttrGet</a><br><a href="INetLib.html#1365553">INetLibSockHTTPAttrSet</a></div></td>
    <td colspan="1" rowspan="2"><a name="998283"> </a><div class="CellBody"><a href="INetLib.html#1365603">INetLibSockHTTPReqCreate</a><br><a href="INetLib.html#1365651">INetLibSockHTTPReqSend</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998292"> </a><div class="CellHeading">Utilities</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="2"><a name="998299"> </a><div class="CellBody"><a href="INetLib.html#1364775">INetLibCheckAntennaState</a> <br><a href="INetLib.html#1366318">INetLibURLCrack</a><br><a href="INetLib.html#1366377">INetLibURLGetInfo</a></div></td>
    <td colspan="1" rowspan="2"><a name="998310"> </a><div class="CellBody"><a href="INetLib.html#1366479">INetLibURLsAdd</a><br><a href="INetLib.html#1366544">INetLibWiCmd</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998319"> </a><div class="CellHeading">Cache Interface</div></td>
  </tr>
  <tr valign="top">
    <td><a name="998326"> </a><div class="CellBody"><a href="INetLib.html#1364668">INetLibCacheGetObject</a></div></td>
    <td><a name="998331"> </a><div class="CellBody"><a href="INetLib.html#1364719">INetLibCacheList</a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="998333"> </a><div class="CellHeading">Configuration</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="4"><a name="998340"> </a><div class="CellBody"><a href="INetLib.html#1364836">INetLibConfigAliasGet</a><br><a href="INetLib.html#1364881">INetLibConfigAliasSet</a><br><a href="INetLib.html#1364929">INetLibConfigDelete</a><br><a href="INetLib.html#1364975">INetLibConfigIndexFromName</a></div></td>
    <td colspan="1" rowspan="4"><a name="998354"> </a><div class="CellBody"><a href="INetLib.html#1365015">INetLibConfigList</a><br><a href="INetLib.html#1365051">INetLibConfigMakeActive</a><br><a href="INetLib.html#1365093">INetLibConfigRename</a><br><a href="INetLib.html#1365141">INetLibConfigSaveAs</a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
</table>




</h5><p class="Body">
  <a name="998421"> </a>
</p>
 

<p class="Body">&nbsp;</p><hr> <p class="FNFootnote">
  <a name="1004860"> </a><a href="#1004857"><span class="FootnoteNumber">1. </span></a><p class="FNFootnote">
  <a name="1004860"> </a>Except the trace settings. These settings are global-they are not different for different configurations.
</p>

</p>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Companion2Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>