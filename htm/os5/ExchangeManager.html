<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Exchange Manager</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:10:42">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1232736"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">57  Exchange Manager</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ConnectionMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ExgLibAPI.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Reference_Front.html">Palm OS® Programmer's API Reference</a></p>
			<p class="SideTOC1-PartTab">Palm OS® 5 SDK </p>
			<p class="SideTOC1-PartTab">Part III: Communications</a> </p>
			<p class="SideTOC1"><a href="ExchangeManager.html">57  Exchange Manager</a></p>
			
<p class="SideTOC2">
<a href="#1232764">Exchange Manager Data Structures
</a></p>

<p class="SideTOC3">
<a href="#1232765">ExgAskResultType
</a></p>

<p class="SideTOC3">
<a href="#1232798">ExgGoToType
</a></p>

<p class="SideTOC3">
<a href="#1232839">ExgLocalSocketInfoType
</a></p>

<p class="SideTOC3">
<a href="#1232903">ExgPreviewInfoType
</a></p>

<p class="SideTOC3">
<a href="#1232995">ExgSocketType
</a></p>

<p class="SideTOC2">
<a href="#1233138">Exchange Manager Constants
</a></p>

<p class="SideTOC3">
<a href="#1233140">Registry ID Constants
</a></p>

<p class="SideTOC3">
<a href="#1233191">Predefined URL Schemes
</a></p>

<p class="SideTOC3">
<a href="#1233228">Predefined URL Prefixes
</a></p>

<p class="SideTOC2">
<a href="#1233281">Exchange Manager Functions
</a></p>

<p class="SideTOC3">
<a href="#1233284">ExgAccept
</a></p>

<p class="SideTOC3">
<a href="#1233358">ExgConnect
</a></p>

<p class="SideTOC3">
<a href="#1233463">ExgControl
</a></p>

<p class="SideTOC3">
<a href="#1233561">ExgDBRead
</a></p>

<p class="SideTOC3">
<a href="#1233629">ExgDBWrite
</a></p>

<p class="SideTOC3">
<a href="#1233680">ExgDisconnect
</a></p>

<p class="SideTOC3">
<a href="#1233779">ExgDoDialog
</a></p>

<p class="SideTOC3">
<a href="#1233876">ExgGet
</a></p>

<p class="SideTOC3">
<a href="#1233946">ExgGetDefaultApplication
</a></p>

<p class="SideTOC3">
<a href="#1234003">ExgGetRegisteredApplications
</a></p>

<p class="SideTOC3">
<a href="#1234054">ExgGetRegisteredTypes
</a></p>

<p class="SideTOC3">
<a href="#1234097">ExgGetTargetApplication
</a></p>

<p class="SideTOC3">
<a href="#1234166">ExgNotifyGoto
</a></p>

<p class="SideTOC3">
<a href="#1234222">ExgNotifyPreview
</a></p>

<p class="SideTOC3">
<a href="#1234294">ExgNotifyReceive
</a></p>

<p class="SideTOC3">
<a href="#1234399">ExgPut
</a></p>

<p class="SideTOC3">
<a href="#1234473">ExgReceive
</a></p>

<p class="SideTOC3">
<a href="#1234538">ExgRegisterDatatype
</a></p>

<p class="SideTOC3">
<a href="#1234639">ExgRegisterData
</a></p>

<p class="SideTOC3">
<a href="#1234667">ExgRequest
</a></p>

<p class="SideTOC3">
<a href="#1234730">ExgSend
</a></p>

<p class="SideTOC3">
<a href="#1234775">ExgSetDefaultApplication
</a></p>

<p class="SideTOC2">
<a href="#1234820">Application-Defined Functions
</a></p>

<p class="SideTOC3">
<a href="#1234823">ExgDBDeleteProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1234851">ExgDBReadProcPtr
</a></p>

<p class="SideTOC3">
<a href="#1234892">ExgDBWriteProcPtr
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1232737"> </a>This chapter describes the Exchange Manager API declared in the header file <span style="font-family: monospace">ExgMgr.h</span> and the Exchange Local Library API declared in the header file <span style="font-family: monospace">ExgLocalLib.h</span>. It discusses the following topics: 
</p>

  <a name="1232743"> </a><p class="B1Bullet"> &#8226; <a href="ExchangeManager.html#1232764">Exchange Manager Data Structures</a></p>

  <a name="1232747"> </a><p class="B1Bullet"> &#8226; <a href="ExchangeManager.html#1233138">Exchange Manager Constants</a></p>

  <a name="1232751"> </a><p class="B1Bullet"> &#8226; <a href="ExchangeManager.html#1233281">Exchange Manager Functions</a></p>

  <a name="1232755"> </a><p class="B1Bullet"> &#8226; <a href="ExchangeManager.html#1234820">Application-Defined Functions</a></p>
<p class="Body">
  <a name="1232756"> </a>For more information on the Exchange Manager, see the chapter <a href="ExchangeManagerConcept.html#969979">"Object Exchange"</a> of <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. 
</p>

<h2 class="HaHeadA">
  <a name="1232764"> </a>Exchange Manager Data Structures 
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1232765"> </a>ExgAskResultType
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1232767"> </a>The <span style="font-family: monospace">ExgAskResultType</span> enum defines possible values for the <span style="font-family: monospace">result</span> field of the <a href="AppLaunchCodes.html#970542"><span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span></a> launch code parameter block. 
</p>
<pre  class="Preformatted">
typedef enum { <a name="1232772"> </a>
  exgAskDialog,<a name="1232773"> </a>
  exgAskOk,<a name="1232774"> </a>
  exgAskCancel } <a name="1232775"> </a>
ExgAskResultType;<a name="1232776"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1232777"> </a>Value Descriptions
</h4>

<h5 class="TgTable">
  <a name="1232795"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1232780"> </a><div class="CellBody"><span style="font-family: monospace">exgAskDialog </span></div></td>
    <td><a name="1232782"> </a><div class="CellBody">The Exchange Manager should display a dialog that prompts the user to confirm the receipt of data. See <a href="ExchangeManager.html#1233779"><span style="font-family: monospace">ExgDoDialog</span></a>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232788"> </a><div class="CellBody"><span style="font-family: monospace">exgAskOk </span></div></td>
    <td><a name="1232790"> </a><div class="CellBody">Accept the data.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232792"> </a><div class="CellBody"><span style="font-family: monospace">exgAskCancel </span></div></td>
    <td><a name="1232794"> </a><div class="CellBody">Reject the data.</div></td>
  </tr>
</table>




</h5>
<h2 class="HBHeadB">
  <a name="1232798"> </a>ExgGoToType
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1232799"> </a>The <span style="font-family: monospace">ExgGoToType</span> structure defines the <span style="font-family: monospace">goToParams</span> field of the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure. Applications that want to be launched after the data is received place their creator IDs in the <span style="font-family: monospace">goToCreator</span> field and define the <span style="font-family: monospace">goToParams</span> field. The values in this structure are copied to the <a href="AppLaunchCodes.html#970812"><span style="font-family: monospace">sysAppLaunchCmdGoto</span></a> launch code's parameter block. 
</p>
<pre  class="Preformatted">
typedef struct {<a name="1232808"> </a>
  UInt16 dbCardNo;<a name="1232809"> </a>
  LocalID dbID;<a name="1232810"> </a>
  UInt16 recordNum;<a name="1232811"> </a>
  UInt32 uniqueID;<a name="1232812"> </a>
  UInt32 matchCustom;<a name="1232813"> </a>
} ExgGoToType;<a name="1232814"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1232815"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1232837"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1232818"> </a><div class="CellBody"><span style="font-family: monospace">dbCardNo</span></div></td>
    <td><a name="1232820"> </a><div class="CellBody">The card number of the database that contains the added record. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232822"> </a><div class="CellBody"><span style="font-family: monospace">dbID</span></div></td>
    <td><a name="1232824"> </a><div class="CellBody">The local ID of the database that contains the added record.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232826"> </a><div class="CellBody"><span style="font-family: monospace">recordNum</span></div></td>
    <td><a name="1232828"> </a><div class="CellBody">The index of the record that was added. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232830"> </a><div class="CellBody"><span style="font-family: monospace">uniqueID</span></div></td>
    <td><a name="1232832"> </a><div class="CellBody">The unique ID of the record that was added. This field is not used. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232834"> </a><div class="CellBody"><span style="font-family: monospace">matchCustom </span></div></td>
    <td><a name="1232836"> </a><div class="CellBody">Application-specific information.</div></td>
  </tr>
</table>




</h5>
<h2 class="HBHeadB">
  <a name="1232839"> </a>ExgLocalSocketInfoType
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1232841"> </a>The <span style="font-family: monospace">ExgLocalSocketInfoType</span> structure identifies information specific to the Local Exchange Library. The <span style="font-family: monospace">socketRef</span> field of the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure is set to this structure when you send and receive data using the Local Exchange Library. The Local Exchange Library creates this structure if it does not already exist. You only need to create it if you want to supply non-default values for the <span style="font-family: monospace">noAsk</span> or <span style="font-family: monospace">previewInfoP</span> fields. 
</p>
<pre  class="Preformatted">
typedef struct {<a name="1232845"> </a>
  Boolean freeOnDisconnect;<a name="1232846"> </a>
  Boolean noAsk;<a name="1232847"> </a>
  ExgPreviewInfoType *previewInfoP;<a name="1232848"> </a>
  FileHand tempFileH;<a name="1232849"> </a>
  Err err;<a name="1232850"> </a>
  ExgLocalOpType op;<a name="1232852"> </a>
} ExgLocalSocketInfoType;<a name="1232853"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1232854"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1232900"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1232857"> </a><div class="CellBody"><span style="font-family: monospace">freeOnDisconnect </span></div></td>
    <td><a name="1232859"> </a><div class="CellBody">Whether the structure is freed when the <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> call is made. The default is <span style="font-family: monospace">true</span>. In general, code that allocates a structure should be responsible for freeing that structure. Therefore, if you have allocated <span style="font-family: monospace">ExgLocalSocketInfoType</span>, you should set this field to <span style="font-family: monospace">false</span> and explicitly free the structure when you are finished with it. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232864"> </a><div class="CellBody"><span style="font-family: monospace">noAsk </span></div></td>
    <td><a name="1232866"> </a><div class="CellBody">Set to <span style="font-family: monospace">true</span> to disable the display of the exchange dialog. If you want to, for example, create a vCalendar object and send it to the Datebook application in response to a user command, you probably want to set <span style="font-family: monospace">noAsk</span> to <span style="font-family: monospace">true</span> so that the user does not have to confirm the receipt of the data they just requested you to send. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232868"> </a><div class="CellBody"><span style="font-family: monospace">previewInfoP </span></div></td>
    <td><a name="1232874"> </a><div class="CellBody">A pointer to an <a href="ExchangeManager.html#1232903"><span style="font-family: monospace">ExgPreviewInfoType</span></a> structure, used to display a preview of the data. If you wanted to simply use another application to help display data, you would create and initialize this structure. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232876"> </a><div class="CellBody"><span style="font-family: monospace">tempFileH</span> </div></td>
    <td><a name="1232878"> </a><div class="CellBody">A temporary buffer that the Local Exchange Library uses. Do not set this field directly; the Local Exchange Library should set it. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232880"> </a><div class="CellBody"><span style="font-family: monospace">err</span> </div></td>
    <td><a name="1232882"> </a><div class="CellBody">The error code returned from the Local Exchange Library. Do not set this field directly; the Local Exchange Library should set it. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232884"> </a><div class="CellBody"><span style="font-family: monospace">op</span> </div></td>
    <td><a name="1232886"> </a><div class="CellBody">The operation in progress. Do not set this field directly. The Local Exchange Library sets this field to one of the following: </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232888"> </a><div class="CellBody"><br></div></td>
    <td><h5 class="P1"><a name="1232891"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgLocalOpNone</span> </td><td valign="top">No operation in progress. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1232893"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgLocalOpPut</span> </td><td valign="top">A send is in progress. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1232895"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgLocalOpAccept</span> </td><td valign="top">A receive is in progress. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1232897"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgLocalOpGet</span> </td><td valign="top">A get is in progress. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1232899"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgLocalOpGetSender</span> </td><td valign="top">The library is receiving information from the sending application during a get operation.</td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
</table>




</h5>
<h2 class="HBHeadB">
  <a name="1232903"> </a>ExgPreviewInfoType
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1232905"> </a>The <span style="font-family: monospace">ExgPreviewInfoType</span> structure provides information to the <a href="ExchangeManager.html#1234222"><span style="font-family: monospace">ExgNotifyPreview</span></a> function. The <span style="font-family: monospace">ExgNotifyPreview</span> function uses this information to have the application display a preview of the data to be received in the exchange dialog. 
</p>
<pre  class="Preformatted">
typedef struct {<a name="1232910"> </a>
  UInt16         version;<a name="1232911"> </a>
  ExgSocketType  *socketP;<a name="1232912"> </a>
  UInt16         op;<a name="1232913"> </a>
  Char           *string;<a name="1232914"> </a>
  UInt32         size;<a name="1232915"> </a>
  RectangleType  bounds;<a name="1232916"> </a>
  UInt16         types;<a name="1232917"> </a>
  Err            error;<a name="1232918"> </a>
} ExgPreviewInfoType;<a name="1232919"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1232920"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1232983"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1232923"> </a><div class="CellBody">-&gt;<span style="font-family: monospace"> version</span> </div></td>
    <td><a name="1232925"> </a><div class="CellBody">Set this field to 0 to specify version 0 of this structure. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232927"> </a><div class="CellBody">-&gt;<span style="font-family: monospace"> socketP</span> </div></td>
    <td><a name="1232929"> </a><div class="CellBody">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). The <span style="font-family: monospace">libraryRef</span> field must identify the exchange library from which preview data should be received, and the <span style="font-family: monospace">target</span>, <span style="font-family: monospace">type</span>, or <span style="font-family: monospace">name</span> field should be defined as well. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232934"> </a><div class="CellBody">-&gt;<span style="font-family: monospace"> op</span> </div></td>
    <td><a name="1232936"> </a><div class="CellBody">One of the following constants: </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232938"> </a><div class="CellBody"><br></div></td>
    <td><h5 class="P1"><a name="1232941"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgPreviewDialog</span></td><td valign="top">Display a modal dialog containing the preview. This constant is only used in situations where one application launches another to display data. </td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
  <tr valign="top">
    <td><a name="1232943"> </a><div class="CellBody"><br></div></td>
    <td><h5 class="P1"><a name="1232946"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgPreviewDraw</span></td><td valign="top">The preview is a graphic. </td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
  <tr valign="top">
    <td><a name="1232948"> </a><div class="CellBody"><br></div></td>
    <td><h5 class="P1"><a name="1232951"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgPreviewLongString</span></td><td valign="top">The preview is a long string. </td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
  <tr valign="top">
    <td><a name="1232953"> </a><div class="CellBody"><br></div></td>
    <td><h5 class="P1"><a name="1232956"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgPreviewQuery</span></td><td valign="top">Ask the application which preview operations it supports. The answer is returned in the <span style="font-family: monospace">types</span> field. If the application does not support any preview modes, the <span style="font-family: monospace">error</span> field contains <span style="font-family: monospace">exgErrNotSupported</span>. </td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
  <tr valign="top">
    <td><a name="1232959"> </a><div class="CellBody"><br></div></td>
    <td><h5 class="P1"><a name="1232962"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">exgPreviewShortString</span></td><td valign="top">The preview is a short string. </td>
  </tr>
</table>
</div></h5>
</td>
  </tr>
  <tr valign="top">
    <td><a name="1232964"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">string</span> </div></td>
    <td><a name="1232966"> </a><div class="CellBody">A buffer into which the application places the string preview if <span style="font-family: monospace">exgPreviewLongString</span> or <span style="font-family: monospace">exgPreviewShortString</span> is specified. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232968"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">size</span> </div></td>
    <td><a name="1232970"> </a><div class="CellBody">The allocated size of the <span style="font-family: monospace">string</span> field. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232972"> </a><div class="CellBody">-&gt; <span style="font-family: monospace">bounds</span> </div></td>
    <td><a name="1232974"> </a><div class="CellBody">The bounds of the rectangle in which the application draws the graphic if <span style="font-family: monospace">exgPreviewDraw</span> is specified. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232976"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">types</span> </div></td>
    <td><a name="1232978"> </a><div class="CellBody">Upon return from an <span style="font-family: monospace">exgPreviewQuery</span> operation, a bit field identifying the types of previews the application supports. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1232980"> </a><div class="CellBody">&lt;- <span style="font-family: monospace">error</span> </div></td>
    <td><a name="1232982"> </a><div class="CellBody">The error code returned from the application. If <span style="font-family: monospace">errNone</span>, the preview operation was successful. </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1232984"> </a>Applications can define and use their own constants for the preview operation. Operations specific to an application are numbered starting at <span style="font-family: monospace">exgPreviewFirstUser</span> and should be no greater than <span style="font-family: monospace">exgPreviewLastUser</span>. 
</p>
<h4 class="RefSide">
  <a name="1232987"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1232991"> </a>This structure is only defined if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1232995"> </a>ExgSocketType
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1232996"> </a>The <span style="font-family: monospace">ExgSocketType</span> structure defines an Exchange Manager socket, which is passed to most Exchange Manager functions. The <span style="font-family: monospace">ExgSocketPtr</span> type points to a <span style="font-family: monospace">ExgSocketType</span> structure.
</p>
<pre  class="Preformatted">
typedef struct ExgSocketType {
  UInt16 libraryRef;<a name="1232997"> </a>
  UInt32 socketRef;<a name="1232998"> </a>
  UInt32 target;<a name="1232999"> </a>
  UInt32 count;<a name="1233000"> </a>
  UInt32 length;<a name="1233001"> </a>
  UInt32 time;<a name="1233002"> </a>
  UInt32 appData;<a name="1233003"> </a>
  UInt32 goToCreator;<a name="1233004"> </a>
  ExgGoToType goToParams;<a name="1233005"> </a>
  UInt16 localMode:1;<a name="1233006"> </a>
  UInt16 packetMode:1;<a name="1233007"> </a>
  UInt16 noGoTo:1;<a name="1233008"> </a>
  UInt16 noStatus:1;<a name="1233009"> </a>
  UInt16 preview:1;<a name="1233010"> </a>
  UInt16 reserved:11;<a name="1233011"> </a>
  Char *description;<a name="1233012"> </a>
  Char *type;<a name="1233013"> </a>
  Char *name;<a name="1233014"> </a>
} ExgSocketType;<a name="1233015"> </a>
 <a name="1233016"> </a>
typedef ExgSocketType* ExgSocketPtr;<a name="1233017"> </a>
</pre>
<p class="Body">
  <a name="1233018"> </a>Note that when data is received, some of the fields in this structure may not have values. When you are sending data, it is recommended that you provide values for all of these fields, but you should not rely on receiving values for the fields marked optional. 
</p>

<h4 class="HCHeadC">
  <a name="1233019"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1233125"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1233022"> </a><div class="CellBody"><span style="font-family: monospace">libraryRef</span></div></td>
    <td><a name="1233024"> </a><div class="CellBody">The exchange library in use. When an application or library receives a socket, this field is already assigned. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233026"> </a><div class="CellBody"><br></div></td>
    <td><a name="1233028"> </a><div class="CellBody">When sending data, applications may identify the exchange library they want to connect with by providing a URL in the <span style="font-family: monospace">name</span> field. If so, they should use 0 for the <span style="font-family: monospace">libraryRef</span> field. The Exchange Manager then determines which library corresponds to the URL and assigns the <span style="font-family: monospace">libraryRef</span> field. See the Comments in the <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a> function description for more information. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233033"> </a><div class="CellBody"><span style="font-family: monospace">socketRef</span></div></td>
    <td><a name="1233035"> </a><div class="CellBody">The connection identifier. This value is supplied by the exchange library when a connection is established. It contains any necessary library-specific data. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233037"> </a><div class="CellBody"><span style="font-family: monospace">target</span></div></td>
    <td><a name="1233039"> </a><div class="CellBody">The creator ID of the application that should receive the message. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233041"> </a><div class="CellBody"><span style="font-family: monospace">count</span></div></td>
    <td><a name="1233043"> </a><div class="CellBody">The number of objects in this connection, usually 1 (optional). </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233045"> </a><div class="CellBody"><span style="font-family: monospace">length </span></div></td>
    <td><a name="1233047"> </a><div class="CellBody">The total byte count for all objects being sent (optional).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233049"> </a><div class="CellBody"><span style="font-family: monospace">time</span></div></td>
    <td><a name="1233051"> </a><div class="CellBody">The last modified time of object (optional).</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233053"> </a><div class="CellBody"><span style="font-family: monospace">appData</span></div></td>
    <td><a name="1233055"> </a><div class="CellBody">Application-specific information (optional). </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233057"> </a><div class="CellBody"><span style="font-family: monospace">goToCreator</span></div></td>
    <td><a name="1233059"> </a><div class="CellBody">The creator ID of the application to launch using the <a href="AppLaunchCodes.html#970812"><span style="font-family: monospace">sysAppLaunchCmdGoto</span></a> launch code after the item is received if <span style="font-family: monospace">noGoTo</span> is 0. The value is assigned by the application that receives the object. See the Comments section in <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> for more information. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233067"> </a><div class="CellBody"><span style="font-family: monospace">goToParams</span></div></td>
    <td><a name="1233069"> </a><div class="CellBody">If <span style="font-family: monospace">goToCreator</span> is specified, then this field contains data that is copied into the launch code's parameter block. See <a href="ExchangeManager.html#1232798"><span style="font-family: monospace">ExgGoToType</span></a>.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233074"> </a><div class="CellBody"><span style="font-family: monospace">localMode</span></div></td>
    <td><a name="1233076"> </a><div class="CellBody">Set to 1 to exchange with local device only. A <span style="font-family: monospace">localMode</span> of 1 is equivalent to specifying a URL with the <span style="font-family: monospace">exgLocalPrefix</span>. Set to 0 to enable an exchange with a remote machine. The default is 0.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233079"> </a><div class="CellBody"><span style="font-family: monospace">packetMode</span></div></td>
    <td><a name="1233081"> </a><div class="CellBody">Set to 1 to use connectionless packet mode (Ultra). The default is 0. Ultra mode is not currently supported. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233083"> </a><div class="CellBody"><span style="font-family: monospace">noGoTo</span> </div></td>
    <td><a name="1233085"> </a><div class="CellBody">Set to 1 to disable launching the application with <a href="AppLaunchCodes.html#970812"><span style="font-family: monospace">sysAppLaunchCmdGoto</span></a>. The default is 0. </div><a name="1233089"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233091"> </a><div class="CellBody"><span style="font-family: monospace">noStatus</span> </div></td>
    <td><a name="1233093"> </a><div class="CellBody">If <span style="font-family: monospace">true</span>, the exchange library should not display a progress dialog. If <span style="font-family: monospace">false</span>, the library can display a progress dialog. The default is <span style="font-family: monospace">false</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233095"> </a><div class="CellBody"><br></div></td>
    <td><a name="1233097"> </a><div class="CellBody">The Exchange Manager sets and clears this bit at various times while data is received. Applications may also want to set this bit if they use the Local Exchange Library and want to prevent the progress dialog from being displayed during a send. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233099"> </a><div class="CellBody"><span style="font-family: monospace">preview</span> </div></td>
    <td><a name="1233101"> </a><div class="CellBody">If <span style="font-family: monospace">true</span>, a preview is in progress. The <a href="ExchangeManager.html#1234222"><span style="font-family: monospace">ExgNotifyPreview</span></a> function sets this bit while the preview takes place and clears it when the preview is finished. Exchange libraries should not discard any data while a preview is in progress because the full data must be sent later if the receiving user accepts it. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233106"> </a><div class="CellBody"><span style="font-family: monospace">reserved</span></div></td>
    <td><a name="1233108"> </a><div class="CellBody">Reserved system flags.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233110"> </a><div class="CellBody"><span style="font-family: monospace">description</span></div></td>
    <td><a name="1233112"> </a><div class="CellBody">A pointer to the text description of the object (optional). </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233114"> </a><div class="CellBody"><span style="font-family: monospace">type</span></div></td>
    <td><a name="1233116"> </a><div class="CellBody">A pointer to the MIME type of the object (optional). </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233118"> </a><div class="CellBody"><span style="font-family: monospace">name</span></div></td>
    <td><a name="1233120"> </a><div class="CellBody">The name of the object being sent. This can be a URL whose scheme identifies the exchange library to connect with. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233122"> </a><div class="CellBody"><br></div></td>
    <td><a name="1233124"> </a><div class="CellBody">If the name has a colon, it is treated as a URL. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1233126"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233129"> </a>The <span style="font-family: monospace">noGoTo</span> and <span style="font-family: monospace">noStatus</span> flags are only defined if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present, and the <span style="font-family: monospace">noStatus</span> flag has no effect unless <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. The <span style="font-family: monospace">preview</span> flag is only defined if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>

<h2 class="HaHeadA">
  <a name="1233138"> </a>Exchange Manager Constants 
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1233140"> </a>Registry ID Constants
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1233141"> </a>The registry ID constants are used in the Exchange Manager registry. Exchange libraries register for the URL prefixes they handle, and applications register for the types of data they receive. The registry ID constants specify which type of data is being registered for. 
</p>

<h5 class="TgTable">
  <a name="1233183"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1233144"> </a><div class="CellHeading">Constant</div></th>
    <th><a name="1233146"> </a><div class="CellHeading">Value</div></th>
    <th><a name="1233148"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1233151"> </a><div class="CellBody"><span style="font-family: monospace">exgRegCreatorID</span> </div></td>
    <td><a name="1233153"> </a><div class="CellBody">0xfffb </div></td>
    <td><a name="1233155"> </a><div class="CellBody">Register for a creator ID. The <span style="font-family: monospace">target</span> field of the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> contains the creator ID of the application that should receive the data. Typically, the application with the matching creator ID receives the data, but it is possible for one application to register for another's creator ID and receive data in its place. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233161"> </a><div class="CellBody"><span style="font-family: monospace">exgRegSchemeID</span> </div></td>
    <td><a name="1233163"> </a><div class="CellBody">0xfffc </div></td>
    <td><a name="1233165"> </a><div class="CellBody">Register for a URL scheme. Typically, only exchange libraries register for URL schemes. Applications can register for URL schemes, but they only receive the URL when <a href="ExchangeManager.html#1234667"><span style="font-family: monospace">ExgRequest</span></a> is called. If the <span style="font-family: monospace">name</span> field of the <span style="font-family: monospace">ExgSocketType</span> contains a colon (:), the portion of the URL before the colon is the URL scheme. The default library registered for URLs with that scheme will handle the message. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233171"> </a><div class="CellBody"><span style="font-family: monospace">exgRegExtensionID</span> </div></td>
    <td><a name="1233173"> </a><div class="CellBody">0xfffd </div></td>
    <td><a name="1233175"> </a><div class="CellBody">Register for a filename extension. If the <span style="font-family: monospace">name</span> field of the <span style="font-family: monospace">ExgSocketType</span> contains a period (.), the portion of the name after the last period is the filename extension. The application registered to handle files of that extension will handle the message. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233178"> </a><div class="CellBody"><span style="font-family: monospace">exgRegTypeID</span> </div></td>
    <td><a name="1233180"> </a><div class="CellBody">0xfffe </div></td>
    <td><a name="1233182"> </a><div class="CellBody">Register for a MIME type. If the <span style="font-family: monospace">type</span> field of the <span style="font-family: monospace">ExgSocketType</span> contains a value, the application registered to receive that MIME type handles the message. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1233184"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233187"> </a>The <span style="font-family: monospace">exgRegCreatorID</span> and <span style="font-family: monospace">exgRegSchemeID</span> constants are only defined if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1233191"> </a>Predefined URL Schemes
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1233192"> </a>The Exchange Manager provides these predefined URL schemes, for which exchange libraries can register. 
</p>

<h5 class="TgTable">
  <a name="1233221"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1233195"> </a><div class="CellHeading">Constant</div></th>
    <th><a name="1233197"> </a><div class="CellHeading">Value</div></th>
    <th><a name="1233199"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1233202"> </a><div class="CellBody"><span style="font-family: monospace">exgBeamScheme</span> </div></td>
    <td><a name="1233204"> </a><div class="CellBody">"_beam" </div></td>
    <td><a name="1233206"> </a><div class="CellBody">The URL scheme for Beam commands. By default, the IR Library handles this scheme. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233209"> </a><div class="CellBody"><span style="font-family: monospace">exgSendScheme</span> </div></td>
    <td><a name="1233211"> </a><div class="CellBody">"_send" </div></td>
    <td><a name="1233213"> </a><div class="CellBody">The URL scheme for Send commands. The purpose of the Send command is to provide a choice of transport mechanisms to the user; therefore, any exchange library that sends data should register for this scheme. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233216"> </a><div class="CellBody"><span style="font-family: monospace">exgLocalScheme</span> </div></td>
    <td><a name="1233218"> </a><div class="CellBody">"_local"</div></td>
    <td><a name="1233220"> </a><div class="CellBody">The URL scheme for the Local Exchange Library. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1233222"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233226"> </a>These constants are only defined if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1233228"> </a>Predefined URL Prefixes
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1233229"> </a>The Exchange Manager provides the following prefixes, which can be used to construct URLs appropriate for the <span style="font-family: monospace">name</span> field of the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure. When sending data, applications provide a URL to identify the exchange library that should transport the data. 
</p>

<h5 class="TgTable">
  <a name="1233274"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1233235"> </a><div class="CellHeading">Constant</div></th>
    <th><a name="1233237"> </a><div class="CellHeading">Value</div></th>
    <th><a name="1233239"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1233242"> </a><div class="CellBody"><span style="font-family: monospace">exgBeamPrefix</span> </div></td>
    <td><a name="1233245"> </a><div class="CellBody">(<span style="font-family: monospace">exgBeamScheme</span> ":") </div></td>
    <td><a name="1233247"> </a><div class="CellBody">The URL to beam data. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233250"> </a><div class="CellBody"><span style="font-family: monospace">exgSendPrefix</span> </div></td>
    <td><a name="1233253"> </a><div class="CellBody">("?" <span style="font-family: monospace">exgSendScheme</span> ":") </div></td>
    <td><a name="1233255"> </a><div class="CellBody">A URL for the general Send command. Because this URL begins with a question mark (?), the Exchange Manager displays a dialog with a list of exchange libraries registered for the <span style="font-family: monospace">exgSendScheme</span>. The user then chooses the desired exchange library. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233258"> </a><div class="CellBody"><span style="font-family: monospace">exgSendBeamPrefix</span> </div></td>
    <td><a name="1233261"> </a><div class="CellBody">("?" <span style="font-family: monospace">exgSendScheme</span> ";" </div><a name="1233263"> </a><div class="CellBody"><span style="font-family: monospace">exgBeamScheme</span> ":") </div></td>
    <td><a name="1233265"> </a><div class="CellBody">A URL for the general Send command. The Exchange Manager displays a dialog with a list of exchange libraries registered for either the <span style="font-family: monospace">exgSendScheme</span> or the <span style="font-family: monospace">exgBeamScheme</span>. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233268"> </a><div class="CellBody"><span style="font-family: monospace">exgLocalPrefix</span> </div></td>
    <td><a name="1233271"> </a><div class="CellBody">(<span style="font-family: monospace">exgLocalScheme</span> ":")</div></td>
    <td><a name="1233273"> </a><div class="CellBody">The URL for using the Local Exchange Library. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1233275"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233279"> </a>These constants are only defined if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>

<h2 class="HaHeadA">
  <a name="1233281"> </a>Exchange Manager Functions 
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1233284"> </a>ExgAccept
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233285"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233286"> </a>Accepts a connection from a remote device.
</p>
<h4 class="RefSide">
  <a name="1233287"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233288"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233289"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233290"> </a>Err ExgAccept (ExgSocketType *socketP)
</p>
<h4 class="RefSide">
  <a name="1233291"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233292"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233296"> </a>Result 
</h4>
<p class="Body">
  <a name="1233297"> </a>Returns one of the following error codes:
</p>

<h5 class="TgTable">
  <a name="1233311"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1233300"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span></div></td>
    <td><a name="1233302"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233304"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1233306"> </a><div class="CellBody">Couldn't find default exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233308"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotSupported</span> </div></td>
    <td><a name="1233310"> </a><div class="CellBody">A preview is in progress, and the exchange library identified by <span style="font-family: monospace">libraryRef</span> doesn't support preview mode </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1233312"> </a>Other error codes depend on the exchange library. 
</p>
<p class="Body">
  <a name="1233313"> </a>Displays a fatal error message if <span style="font-family: monospace">socketP</span> does not have a <span style="font-family: monospace">libraryRef</span> specified. 
</p>
<h4 class="RefSide">
  <a name="1233314"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233315"> </a>Applications call this function when launched with the <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a> or <a href="AppLaunchCodes.html#970614"><span style="font-family: monospace">sysAppLaunchCmdExgPreview</span></a> launch code. The launch code contains <span style="font-family: monospace">socketP</span> in its parameter block. Applications should pass this socket to <span style="font-family: monospace">ExgAccept</span> to accept the connection, then call <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a> one or more times to receive the data, and then call <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> to disconnect.
</p>
<div class="NINoteImportant"><hr>
  <a name="1233330"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> Don't create the socket on the receiving side of an exchange. The socket is passed to you in the command parameter block of the <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a> or <a href="AppLaunchCodes.html#970614"><span style="font-family: monospace">sysAppLaunchCmdExgPreview</span></a> launch code.
<hr>
</div>
<h4 class="RefSide">
  <a name="1233337"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233341"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present. Preview mode is supported only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1233345"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233355"> </a><a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a>, <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>, <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1233358"> </a>ExgConnect
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233359"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233360"> </a>Establishes a connection with a remote socket. 
</p>
<h4 class="RefSide">
  <a name="1233361"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233362"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233363"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233364"> </a>Err ExgConnect (ExgSocketType *socketP)
</p>
<h4 class="RefSide">
  <a name="1233365"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233366"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). Specify either a value for the <span style="font-family: monospace">libraryRef</span> field or a URL in the <span style="font-family: monospace">name</span> field. <span style="font-family: monospace">libraryRef</span> should be 0 if the <span style="font-family: monospace">name</span> field contains a URL. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233370"> </a>Result 
</h4>
<p class="Body">
  <a name="1233371"> </a>Returns one of the following error codes:
</p>

<h5 class="TgTable">
  <a name="1233397"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1233374"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span></div></td>
    <td><a name="1233376"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233378"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1233380"> </a><div class="CellBody">Couldn't find exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233382"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotSupported</span> </div></td>
    <td><a name="1233384"> </a><div class="CellBody">The library doesn't support the operation specified in <span style="font-family: monospace">socketP</span> </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233386"> </a><div class="CellBody"><span style="font-family: monospace">exgErrUserCancel</span> </div></td>
    <td><a name="1233388"> </a><div class="CellBody">The user cancelled the connection operation </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233390"> </a><div class="CellBody"><span style="font-family: monospace">exgMemError</span> </div></td>
    <td><a name="1233392"> </a><div class="CellBody">There isn't enough free memory to respond to the request</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233394"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotEnoughPower</span> </div></td>
    <td><a name="1233396"> </a><div class="CellBody">The battery does not have enough power to perform the operation </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1233398"> </a>Other error codes depend on the exchange library. 
</p>
<h4 class="RefSide">
  <a name="1233399"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233400"> </a>Applications can call this function to initiate a connection for sending multiple objects or for performing two-way communications. Some exchange libraries support sending multiple objects but do not support this call. See <a href="ExchangeManagerConcept.html#970558">"Sending Multiple Objects"</a> of <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i> for more information. 
</p>
<p class="Body">
  <a name="1233411"> </a>Before calling this function, the application must initialize the <span style="font-family: monospace">socketP</span> parameter. The socket should identify the exchange library to connect with by providing either a library reference number in the <span style="font-family: monospace">libraryRef</span> field or a URL in the <span style="font-family: monospace">name</span> field. The default exchange library registered for that type of URL handles the connection. 
</p>
<p class="Body">
  <a name="1233412"> </a>To provide users with a choice of transport mechanisms, specify a URL that begins with a question mark (?). The Exchange Manager displays a dialog with a list of all exchange libraries that respond to URLs of the specified type. If only one exchange library is registered for this URL scheme, no dialog is displayed. 
</p>
<p class="Body">
  <a name="1233413"> </a>For example, many applications on Palm OS<sup>®</sup> 4.0 or higher support a Send command. This command generates a URL with the prefix <span style="font-family: monospace">exgSendPrefix</span> (see <a href="ExchangeManager.html#1233228">Predefined URL Prefixes</a>). The Exchange Manager displays a dialog containing a list of libraries registered for that URL scheme. The user selects an exchange library, and that library's <span style="font-family: monospace">ExgLibConnect</span> function is called. 
</p>
<p class="Body">
  <a name="1233417"> </a>If the library is not specified by either URL or library reference number (in the <span style="font-family: monospace">libraryRef</span> field), the Exchange Manager by default uses the IR Library; however, if the <span style="font-family: monospace">localMode</span> flag is set, the Local Exchange Library is used instead. 
</p>
<p class="Body">
  <a name="1233418"> </a>In addition to specifying the library, you can set the <span style="font-family: monospace">count</span> field in <span style="font-family: monospace">socketP</span> before making this call to indicate the number of objects that are going to be sent. Use a <span style="font-family: monospace">count</span> of 0 if the number of objects isn't known in advance. 
</p>
<p class="Body">
  <a name="1233419"> </a>If no error is returned from <span style="font-family: monospace">ExgConnect</span>, applications can follow this call either by sending multiple objects or requesting data from the remote device or both. To send an object, call <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a> at the beginning of each object and call <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a> one or more times per object to send the data. To request data from the remote device, use <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a> (and then use <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a> to receive the requested data). You can use these calls in combination with each other to support two-way communications. After all of the objects have been sent and received, call <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> to disconnect. 
</p>
<div class="NINoteImportant"><hr>
  <a name="1233440"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> Not all exchange libraries support the sending of multiple objects or using <span style="font-family: monospace">ExgGet</span> to request data. 
<hr>
</div>
<h4 class="RefSide">
  <a name="1233441"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233445"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present. <span style="font-family: monospace">ExgConnect</span> was for system use only until the release of Palm OS 4.0. Multiple object sending and identifying exchange libraries by URL are supported only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. On earlier releases, this function is an alias for the <span style="font-family: monospace">ExgPut</span> function. 
</p>
<h4 class="RefSide">
  <a name="1233450"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233460"> </a><a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>, <a href="ExchangeManager.html#1233284"><span style="font-family: monospace">ExgAccept</span></a>, <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1233463"> </a>ExgControl
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233464"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233465"> </a>Requests that an exchange library perform an operation. 
</p>
<h4 class="RefSide">
  <a name="1233466"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233467"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233468"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233469"> </a>Err ExgControl (ExgSocketType *socketP, UInt16 op,<br>void *valueP, UInt16 *valueLenP)
</p>
<h4 class="RefSide">
  <a name="1233470"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233471"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). Specify either a value for the <span style="font-family: monospace">libraryRef</span> field or a URL in the <span style="font-family: monospace">name</span> field. <span style="font-family: monospace">libraryRef</span> should be 0 if the <span style="font-family: monospace">name</span> field contains a URL. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233475"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">op</span></td><td valign="top">A constant identifying the operation that the exchange library should perform. See the Comments section for more information. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233476"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">valueP</span></td><td valign="top">Upon entry, a parameter that the exchange library requires to perform the operation, if any. Most operations do not require an input parameter. Upon return, contains the result of the operation. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233477"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">valueLenP</span></td><td valign="top">The size of the <span style="font-family: monospace">valueP</span> buffer. The size is updated upon return to show the actual length of the content returned. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233478"> </a>Result 
</h4>
<p class="Body">
  <a name="1233479"> </a>Returns one of the following error codes:
</p>

<h5 class="TgTable">
  <a name="1233493"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1233482"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span></div></td>
    <td><a name="1233484"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233486"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1233488"> </a><div class="CellBody">Couldn't find the requested exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233490"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotSupported</span></div></td>
    <td><a name="1233492"> </a><div class="CellBody">The exchange library does not support the requested operation </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1233494"> </a>Other error codes depend on the exchange library. 
</p>
<h4 class="RefSide">
  <a name="1233495"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233496"> </a>The Exchange Manager uses this function to request information from the exchange library. Applications may also call this function. 
</p>
<p class="Body">
  <a name="1233497"> </a>The Exchange Manager defines and uses a set of operation constants that it might send to any exchange library. These constants begin with the prefix <span style="font-family: monospace">exgLibCtlGet</span>. The type of the variable pointed to by <span style="font-family: monospace">valueP</span> depends on the type of operation to be performed. <a href="ExchangeManager.html#1233507">Table 57.1</a> lists and describes the predefined Exchange Manager operations. 
</p>

<h5 class="TgTable">
  <a name="1233541"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="1233507"> </a><div class="TableTitle">Table 57.1  ExgControl operations for all exchange libraries </div></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1233513"> </a><div class="CellHeading">Operation exgLibCtlGet...</div></th>
    <th><a name="1233515"> </a><div class="CellHeading">value Data Type</div></th>
    <th><a name="1233517"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1233520"> </a><div class="CellBody"><span style="font-family: monospace">Preview</span> </div></td>
    <td><a name="1233522"> </a><div class="CellBody">Boolean. Output only. </div></td>
    <td><a name="1233524"> </a><div class="CellBody">Returns <span style="font-family: monospace">true</span> if the exchange library supports preview mode or <span style="font-family: monospace">false</span> if not. If the exchange library does not respond to this operation, it is assumed to support preview mode. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233527"> </a><div class="CellBody"><span style="font-family: monospace">Title</span></div></td>
    <td><a name="1233529"> </a><div class="CellBody">String buffer of size <span style="font-family: monospace">exgTitleBufferSize</span> bytes. Output only. </div></td>
    <td><a name="1233532"> </a><div class="CellBody">Returns the name of the exchange library as it should appear in the Send dialog. All exchange libraries must respond to this operation. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233535"> </a><div class="CellBody"><span style="font-family: monospace">Version</span></div></td>
    <td><a name="1233537"> </a><div class="CellBody"><span style="font-family: monospace">UInt16</span>. Output only. </div></td>
    <td><a name="1233539"> </a><div class="CellBody">Returns the version of the exchange library API that this library implements. The constant <span style="font-family: monospace">exgLibAPIVersion</span> defines the current version number. If the exchange library does not respond to this operation, the library supports the version of the Exchange Library API defined in Palm OS 4.0. </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1233542"> </a>An exchange library may also define its own operations. For example, the IR Library supports operations to enable or disable beaming, to set the baud rates, or to use the serial port (see <a href="IRLib.html#1247968">"IR Control Constants"</a>). The SMS Library supports operations that allow you to set the SMS preferences for sending messages or to manipulate multipart messages (see <a href="SmsLib.html#1391905">"SMS Control Constants"</a>). Operations specific to an exchange library are numbered starting at <span style="font-family: monospace">exgLibCtlSpecificOp</span>. 
</p>
<p class="Body">
  <a name="1233550"> </a>The <span style="font-family: monospace">socketP</span> passed to this function must identify an exchange library either using the <span style="font-family: monospace">libraryRef</span> field or using a URL in the <span style="font-family: monospace">name</span> field. The Comments section in <a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a> describes how an application should identify the exchange library. 
</p>
<h4 class="RefSide">
  <a name="1233554"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233558"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1233561"> </a>ExgDBRead
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233562"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233563"> </a>Converts a Palm OS database from its internal format and writes it to storage RAM. 
</p>
<h4 class="RefSide">
  <a name="1233564"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233565"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233566"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233567"> </a>Err ExgDBRead (ExgDBReadProcPtr readProcP, ExgDBDeleteProcPtr deleteProcP, void* userDataP, LocalID* dbIDP, UInt16 cardNo, Boolean* needResetP, Boolean keepDates)
</p>
<h4 class="RefSide">
  <a name="1233568"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233569"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">readProcP</span></td><td valign="top">A pointer to a function that reads in the database and passes it to <span style="font-family: monospace">ExgDBRead</span>. See <a href="ExchangeManager.html#1234851"><span style="font-family: monospace">ExgDBReadProcPtr</span></a> for details.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233575"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">deleteProcP</span></td><td valign="top">A pointer to a function that is called if a database with an identical name already exists on the device. See <a href="ExchangeManager.html#1234823"><span style="font-family: monospace">ExgDBDeleteProcPtr</span></a> for details.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233580"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">userDataP</span></td><td valign="top">A pointer to any data you want to pass to either the <span style="font-family: monospace">readProcP</span> or <span style="font-family: monospace">deleteProcP</span> functions. Often, this parameter is used to pass the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> that is required by many Exchange Manager functions. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233585"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">dbIDP</span></td><td valign="top">The ID of the database that <span style="font-family: monospace">ExgDBRead</span> created on the local device.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233586"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">cardNo</span></td><td valign="top">The number of the card on which the database was stored by <span style="font-family: monospace">ExgDBRead</span>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233587"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">needResetP</span></td><td valign="top">Set to <span style="font-family: monospace">true</span> by <span style="font-family: monospace">ExgDBRead</span> if the <span style="font-family: monospace">dmHdrAttrResetAfterInstall</span> attribute bit is set in the received database.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233588"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">keepDates</td><td valign="top"></span>Specify <span style="font-family: monospace">true</span> to retain the creation, modification, and last backup dates as set in the received database header. Specify <span style="font-family: monospace">false</span> to reset these dates to the current date.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233589"> </a>Result 
</h4>
<p class="Body">
  <a name="1233590"> </a>Returns <span style="font-family: monospace">errNone</span> if successful; otherwise, returns one of the data manager error codes (<span style="font-family: monospace">dmErr...</span>) or a callback-specific error code. (If the <span style="font-family: monospace">readProcP</span> function returns an error, it is also returned by <span style="font-family: monospace">ExgDBRead</span>.)
</p>
<h4 class="RefSide">
  <a name="1233592"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233593"> </a>This function converts data received from an exchange library or from any other transport mechanism into a Palm OS database and stores that database in the storage heap. It is not required that you use this function in conjunction with Exchange Manager calls. That is, it's possible to use this function to perform other operations, such as converting a database created on the desktop computer to a Palm OS formatted database in the storage heap.
</p>
<p class="Body">
  <a name="1233595"> </a>The primary use of this function, however, is to receive a database that has been beamed onto the device. In this case, call <span style="font-family: monospace">ExgDBRead</span> in response to the launch code <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a> after calling <a href="ExchangeManager.html#1233284"><span style="font-family: monospace">ExgAccept</span></a> to accept the connection. Place the call to <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a> in the read callback function you passed as the <span style="font-family: monospace">readProcP</span> parameter. Pass the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure returned from <span style="font-family: monospace">ExgAccept</span> in the <span style="font-family: monospace">userDataP</span> parameter so that you have access to it in the read callback function. 
</p>
<p class="Body">
  <a name="1233611"> </a>The read callback function performs the actual reading of data. <span style="font-family: monospace">ExgDBRead</span> calls the read callback function multiple times. Each time, the <span style="font-family: monospace">sizeP</span> parameter contains the number of bytes <span style="font-family: monospace">ExgDBRead</span> expects the data returned in <span style="font-family: monospace">dataP</span> to contain. It's important for the read callback function to set the number of bytes (in <span style="font-family: monospace">sizeP</span>) that it actually placed in <span style="font-family: monospace">dataP</span> if it's not the same as what <span style="font-family: monospace">ExgDBRead</span> expected. <span style="font-family: monospace">ExgDBRead</span> stops calling the read callback function after 0 is returned in <span style="font-family: monospace">sizeP</span>.
</p>
<p class="Body">
  <a name="1233612"> </a>The callback function you pass in <span style="font-family: monospace">deleteProcP</span> handles the case where the database being read already exists on the device. It is called only in that circumstance. The callback function may want to close the database if it is open, change the existing database's name, or delete the existing database to allow an overwrite. See <a href="ExchangeManager.html#1234823"><span style="font-family: monospace">ExgDBDeleteProcPtr</span></a> for more information. 
</p>
<h4 class="RefSide">
  <a name="1233617"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233621"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1233622"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233626"> </a><a href="ExchangeManager.html#1233629"><span style="font-family: monospace">ExgDBWrite</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1233629"> </a>ExgDBWrite
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233630"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233631"> </a>Converts a given Palm OS database from its internal format on the local device and writes it using a function you supply. 
</p>
<h4 class="RefSide">
  <a name="1233632"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233633"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233634"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233635"> </a>Err ExgDBWrite (ExgDBWriteProcPtr writeProcP, void* userDataP, const char* nameP, LocalID dbID, UInt16 cardNo)
</p>
<h4 class="RefSide">
  <a name="1233636"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233638"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">writeProcP</span></td><td valign="top">A pointer to a function that writes out the database identified by <span style="font-family: monospace">dbID</span>. See <a href="ExchangeManager.html#1234892"><span style="font-family: monospace">ExgDBWriteProcPtr</span></a> for details.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233643"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">userDataP</span></td><td valign="top">A pointer to any data you want to pass to the <span style="font-family: monospace">writeProcP</span> function. Often, this parameter is used to pass the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> that is required by many Exchange Manager functions. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233648"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">nameP</td><td valign="top"></span>A pointer to the name of the database that you want <span style="font-family: monospace">ExgDBWrite</span> to write. This database is passed to <span style="font-family: monospace">writeProcP</span>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233649"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dbID</span></td><td valign="top">The ID of the database that you want <span style="font-family: monospace">ExgDBWrite</span> to pass to <span style="font-family: monospace">writeProcP</span>. If you don't supply an ID, then <span style="font-family: monospace">nameP</span> is used to search for the database by name.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233650"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">cardNo</span></td><td valign="top">The number of the card on which to look for the database identified by <span style="font-family: monospace">nameP</span>.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233651"> </a>Result 
</h4>
<p class="Body">
  <a name="1233652"> </a>Returns <span style="font-family: monospace">errNone</span> if successful; otherwise, returns one of the data manager error codes (<span style="font-family: monospace">dmErr...</span>) or a callback-specific error code. (If the <span style="font-family: monospace">writeProcP</span> function returns an error, it is also returned by <span style="font-family: monospace">ExgDBWrite</span>.)
</p>
<h4 class="RefSide">
  <a name="1233653"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233654"> </a>This function converts a Palm OS formatted database on the storage heap into a stream of bytes that can be sent over the Internet or over any other transport mechanism. It is not required that you use this function in conjunction with Exchange Manager calls. 
</p>
<p class="Body">
  <a name="1233655"> </a>The primary use of this function, however, is to write a database that is going to be beamed onto another device. In this case, call <span style="font-family: monospace">ExgDBWrite</span> after establishing the connection with <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>. Place the call to <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a> in the write callback function you passed as the <span style="font-family: monospace">writeProcP</span> parameter. Pass the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure returned from <span style="font-family: monospace">ExgSend</span> in the <span style="font-family: monospace">userDataP</span> parameter so that you have access to it in the write callback function. 
</p>
<p class="Body">
  <a name="1233667"> </a>The write callback function performs the actual writing of data. <span style="font-family: monospace">ExgDBWrite</span> calls the write callback function multiple times. Each time, the <span style="font-family: monospace">sizeP</span> parameter contains the number of bytes of <span style="font-family: monospace">dataP</span> that are to be written. If the write callback function didn't handle it all, it's important that it set in <span style="font-family: monospace">sizeP</span> the number of bytes that it did handle successfully. <span style="font-family: monospace">ExgDBWrite</span> stops calling the write callback function after 0 is returned in <span style="font-family: monospace">sizeP</span>.
</p>
<h4 class="RefSide">
  <a name="1233668"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233672"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1233673"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233677"> </a><a href="ExchangeManager.html#1233561"><span style="font-family: monospace">ExgDBRead</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1233680"> </a>ExgDisconnect
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233681"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233682"> </a>Terminates an Exchange Manager transfer and disconnects.
</p>
<h4 class="RefSide">
  <a name="1233683"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233684"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233685"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233686"> </a>Err ExgDisconnect (ExgSocketType *socketP, Err error)
</p>
<h4 class="RefSide">
  <a name="1233687"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233688"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>) identifying the connection to terminate. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233692"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">error</span></td><td valign="top">Any error that occurred. This parameter tells the exchange library why the connection is being broken. Normally the error code from <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a> or <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a> is passed in here. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233699"> </a>Result 
</h4>
<p class="Body">
  <a name="1233700"> </a>Returns one of the following error codes:
</p>

<h5 class="TgTable">
  <a name="1233718"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1233703"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span> </div></td>
    <td><a name="1233705"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233707"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1233709"> </a><div class="CellBody">Couldn't find default exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233711"> </a><div class="CellBody"><span style="font-family: monospace">exgMemError</span></div></td>
    <td><a name="1233713"> </a><div class="CellBody">Couldn't read data to send</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233715"> </a><div class="CellBody"><span style="font-family: monospace">exgErrUserCancel</span></div></td>
    <td><a name="1233717"> </a><div class="CellBody">User cancelled transfer</div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1233719"> </a>Other error codes depend on the exchange library. 
</p>
<p class="Body">
  <a name="1233720"> </a>May display a fatal error message if <span style="font-family: monospace">socketP</span> doesn't contain a <span style="font-family: monospace">libraryRef</span> value. 
</p>
<h4 class="RefSide">
  <a name="1233721"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233722"> </a>Applications must call this function when finished sending data or receiving data. It terminates the connection made with <a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a>, <a href="ExchangeManager.html#1233284"><span style="font-family: monospace">ExgAccept</span></a>, <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>, or <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a>. 
</p>
<p class="Body">
  <a name="1233739"> </a>In the <span style="font-family: monospace">error</span> parameter, pass any error that occurs during the application loop, including errors returned from other Exchange Manager functions. This ensures that the connection is shut down knowing that it failed rather than succeeded.
</p>
<p class="Body">
  <a name="1233740"> </a>It's especially important to check the result code from this function, since this will tell you if the transfer was successful. An <span style="font-family: monospace">errNone</span> return value means that the item was delivered to the destination successfully. It does not mean that the user on the other end actually kept the data. 
</p>
<p class="Body">
  <a name="1233741"> </a><span style="font-family: monospace">ExgDisconnect</span> is used after sending and receiving. When receiving, the application can insert its creator ID into the <span style="font-family: monospace">goToCreator</span> field in the socket structure and add other goto information in the <span style="font-family: monospace">goToParams</span> field. After the application returns from the <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a> launch code, the exchange library may call <a href="ExchangeManager.html#1234166"><span style="font-family: monospace">ExgNotifyGoto</span></a>, which launches the <span style="font-family: monospace">goToCreator</span> application with the standard launch code <a href="AppLaunchCodes.html#970812"><span style="font-family: monospace">sysAppLaunchCmdGoto</span></a>.
</p>
<div class="NINoteImportant"><hr>
  <a name="1233754"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> Placing your creator ID in the <span style="font-family: monospace">goToCreator</span> field is no longer a guarantee that you receive this launch code starting in Palm OS 4.0 because Palm OS 4.0 supports the sending of multiple objects at once. Thus, another application might overwrite the <span style="font-family: monospace">goToCreator</span> field after your application has disconnected, making that application the recipient of the launch code. 
<hr>
</div>
<p class="Body">
  <a name="1233755"> </a>Note that some exchange libraries wait to establish a connection until <span style="font-family: monospace">ExgDisconnect</span> is called. The IR Library, for example, buffers the data that it receives and then waits until <span style="font-family: monospace">ExgDisconnect</span> to actually send this data unless <span style="font-family: monospace">ExgConnect</span> is called to establish a multi-object send connection. 
</p>
<h4 class="RefSide">
  <a name="1233756"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233760"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present. 
</p>
<p class="Body">
  <a name="1233761"> </a>Prior to Palm OS release 4.0, the Exchange Manager always launched the <span style="font-family: monospace">goToCreator</span> application, if one was provided, upon return from this function. If <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present, the Exchange Manager does not launch the <span style="font-family: monospace">goToCreator</span> application. Exchange libraries that want the previous behavior must explicitly call <a href="ExchangeManager.html#1234166"><span style="font-family: monospace">ExgNotifyGoto</span></a>. 
</p>
<h4 class="RefSide">
  <a name="1233769"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233776"> </a><a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a>, <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1233779"> </a>ExgDoDialog
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233780"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233781"> </a>Displays a dialog that allows users to accept or reject the receipt of data. 
</p>
<h4 class="RefSide">
  <a name="1233782"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233783"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233784"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233785"> </a>Boolean ExgDoDialog (ExgSocketType *socketP, ExgDialogInfoType *infoP, Err *errP)
</p>
<h4 class="RefSide">
  <a name="1233786"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233787"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>) identifying the connection. A value must be provided for the <span style="font-family: monospace">libraryRef</span> field. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233791"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"></td><td valign="top">Applications can obtain the socket structure from the <a href="AppLaunchCodes.html#970542"><span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span></a> launch code parameter block. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233797"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">infoP</span></td><td valign="top">A pointer to an <span style="font-family: monospace">ExgDialogInfoType</span> structure (see the Comments section below). </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233799"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">errP</span></td><td valign="top"><span style="font-family: monospace">errNone</span> if no error, or the error code if an error occurred. Currently, no errors are returned.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233800"> </a>Result 
</h4>
<p class="Body">
  <a name="1233801"> </a>Returns <span style="font-family: monospace">true</span> if the user clicks the OK button on the dialog, or <span style="font-family: monospace">false</span> otherwise. 
</p>
<h4 class="RefSide">
  <a name="1233802"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233803"> </a>This function displays the exchange dialog, which prompts the user to accept or reject incoming data. 
</p>
<p class="Body">
  <a name="1233804"> </a>By default, the Exchange Manager calls this function if the receiving application doesn't handle the <a href="AppLaunchCodes.html#970542"><span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span></a> launch code or if it returns <span style="font-family: monospace">exgAskDialog</span> from the launch code handler. When the Exchange Manager calls <span style="font-family: monospace">ExgDoDialog</span>, the dialog displays a message similar to "Do you want to accept 'John Doe' into Address Book?" and allows the user to accept or reject the data. If the user clicks OK, the data should be received as an unfiled record. 
</p>
<p class="Body">
  <a name="1233809"> </a>The Exchange Manager attempts to display a preview of the data in the exchange dialog to provide users with enough information to determine if they want to accept or reject the data. To display the preview data, it calls <a href="ExchangeManager.html#1234222"><span style="font-family: monospace">ExgNotifyPreview</span></a>. Applications wishing to support preview mode should respond to the launch code <a href="AppLaunchCodes.html#970614"><span style="font-family: monospace">sysAppLaunchCmdExgPreview</span></a>. See the <span style="font-family: monospace">ExgNotifyPreview</span> function's description for more information. 
</p>
<p class="Body">
  <a name="1233818"> </a>Applications may also want to allow users to select a category in which to accept the incoming data. To do so, handle <span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span> to call <span style="font-family: monospace">ExgDoDialog</span> directly and pass it a pointer to an <span style="font-family: monospace">ExgDialogInfoType</span> structure. The <span style="font-family: monospace">ExgDialogInfoType</span> structure is defined as follows: 
</p>
<pre  class="Preformatted">
typedef struct {<a name="1233819"> </a>
  UInt16     version;<a name="1233820"> </a>
  DmOpenRef  db;<a name="1233821"> </a>
  UInt16     categoryIndex;<a name="1233822"> </a>
} ExgDialogInfoType;<a name="1233824"> </a>
</pre>
<h5 class="P1"><a name="1233825"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">version</span></td><td valign="top">Set this field to 0 to specify version 0 of this structure. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233826"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">db</span></td><td valign="top">A pointer to an open database that defines the categories the dialog should display. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233827"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">categoryIndex</span></td><td valign="top">The index of the category in which the user wants to file the incoming data. </td>
  </tr>
</table>
</div></h5>
<p class="Body">
  <a name="1233828"> </a>If <span style="font-family: monospace">db</span> is valid, the function extracts the category information from the specified database and displays it in a pop-up list. Upon return, the <span style="font-family: monospace">categoryIndex</span> field contains the index of the category the user selected, or <span style="font-family: monospace">dmUnfiledCategory</span> if the user did not select a category. 
</p>
<p class="Body">
  <a name="1233830"> </a>If the call to <span style="font-family: monospace">ExgDoDialog</span> is successful, your application is responsible for retaining the value returned in <span style="font-family: monospace">categoryIndex</span> and using it to file the incoming data as a record in that category. One way to do this is to store the <span style="font-family: monospace">categoryIndex</span> in the socket's <span style="font-family: monospace">appData</span> field (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>) and then extract it from the socket in your response to the launch code <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a>. For example: 
</p>
<pre  class="Preformatted">
if (cmd == sysAppLaunchCmdExgReceiveData) {<a name="1233838"> </a>
  UInt16 category = <a name="1233839"> </a>
    (ExgSocketPtr)cmdPBP-&gt;appData;<a name="1233840"> </a>
  /* other declarations */<a name="1233841"> </a>
 <a name="1233842"> </a>
/* Receive the data, and create a new record <a name="1233843"> </a>
  using the received data. indexNew is the <a name="1233844"> </a>
  index of this record. */<a name="1233845"> </a>
  if (category !- <span style="font-family: monospace">dmUnfiledCategory</span>) {<a name="1233846"> </a>
    UInt16 attr;<a name="1233847"> </a>
    Err err;<a name="1233848"> </a>
    err = DmRecordInfo(dbP, indexNew, &amp;attr, <a name="1233849"> </a>
      NULL, NULL);<a name="1233850"> </a>
 <a name="1233851"> </a>
    // Set the category to the one the user <a name="1233852"> </a>
    // specified, and mark the record dirty. <a name="1233853"> </a>
    if ((attr &amp; dmRecAttrCategoryMask) != <a name="1233854"> </a>
      category) {<a name="1233855"> </a>
      attr &amp;= ~dmRecAttrCategoryMask;<a name="1233856"> </a>
      attr |= category | dmRecAttrDirty;<a name="1233857"> </a>
      err = DmSetRecordInfo(dbP, indexNew, <a name="1233858"> </a>
        &amp;attr, NULL);<a name="1233859"> </a>
    }<a name="1233860"> </a>
  }<a name="1233861"> </a>
}<a name="1233862"> </a>
</pre>
<p class="Body">
  <a name="1233863"> </a>Some of the Palm OS built-in applications (Address Book, Memo, and ToDo) use this method of setting the category on data received through beaming. Refer to the example code for these applications provided in the SDK for a more complete example of how to use <span style="font-family: monospace">ExgDoDialog</span>.
</p>
<p class="Body">
  <a name="1233864"> </a>When you explicitly call <span style="font-family: monospace">ExgDoDialog</span>, you must set the <span style="font-family: monospace">result</span> field of the <span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span> launch code's parameter block to either <span style="font-family: monospace">exgAskOk</span> (upon success) or <span style="font-family: monospace">exgAskCancel</span> (upon failure) to prevent the system from displaying the dialog a second time. 
</p>
<h4 class="RefSide">
  <a name="1233865"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233869"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. 
</p>
<p class="Body">
  <a name="1233870"> </a>Preview mode display in the exchange dialog is implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1233876"> </a>ExgGet
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233877"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233878"> </a>Establishes a connection and requests an object from a remote device. 
</p>
<h4 class="RefSide">
  <a name="1233879"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233880"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233881"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233882"> </a>Err ExgGet (ExgSocketType *socketP)
</p>
<h4 class="RefSide">
  <a name="1233883"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233884"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). Specify either a value for the <span style="font-family: monospace">libraryRef</span> field or a URL in the <span style="font-family: monospace">name</span> field. <span style="font-family: monospace">libraryRef</span> should be 0 if the <span style="font-family: monospace">name</span> field contains a URL. The <span style="font-family: monospace">target</span>, <span style="font-family: monospace">type</span>, or <span style="font-family: monospace">name</span> fields should identify the data being requested. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233888"> </a>Result 
</h4>
<p class="Body">
  <a name="1233889"> </a>Returns one of the following error codes: 
</p>

<h5 class="TgTable">
  <a name="1233907"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1233892"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span> </div></td>
    <td><a name="1233894"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233896"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1233898"> </a><div class="CellBody">Couldn't find default exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233900"> </a><div class="CellBody"><span style="font-family: monospace">exgErrUserCancel</span> </div></td>
    <td><a name="1233902"> </a><div class="CellBody">The user cancelled the operation </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1233904"> </a><div class="CellBody"><span style="font-family: monospace">exgMemError</span> </div></td>
    <td><a name="1233906"> </a><div class="CellBody">There is not enough free memory to perform the operation </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1233908"> </a>Other error codes depend on the exchange library. 
</p>
<h4 class="RefSide">
  <a name="1233909"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233910"> </a>Applications use this function to request data (initiate a send) from a remote device. Not all exchange libraries support this operation. 
</p>
<p class="Body">
  <a name="1233911"> </a>Before calling this function, the application must initialize the <span style="font-family: monospace">socketP</span> parameter. The socket should identify the exchange library to connect with by providing either a library reference number in the <span style="font-family: monospace">libraryRef</span> field or a URL in the <span style="font-family: monospace">name</span> field. The default exchange library registered for the URL's scheme handles the connection. The socket should also specify what data it is requesting by providing values for at least one of the <span style="font-family: monospace">target</span>, <span style="font-family: monospace">name</span>, and <span style="font-family: monospace">type</span> fields. Specifying the data in the <span style="font-family: monospace">name</span> field is the most common method.
</p>
<p class="Body">
  <a name="1233912"> </a>To provide users with a choice of transport mechanisms, the application can provide a URL that begins with a question mark (?). The Exchange Manager displays a dialog with a list of all exchange libraries that respond to URLs of the specified type. If only one exchange library is registered for this URL scheme, no dialog is displayed. 
</p>
<p class="Body">
  <a name="1233913"> </a>If the library is not specified by either URL or library reference number, the Exchange Manager by default uses the IR Library; however, if the <span style="font-family: monospace">localMode</span> flag is set, the Local Exchange Library is used instead. 
</p>
<p class="Body">
  <a name="1233915"> </a>Applications can use <span style="font-family: monospace">ExgGet</span> to initiate a send from the Local Exchange Library. For more information, see <a href="ExchangeManagerConcept.html#971117">"Sending and Receiving Locally"</a> of the <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. 
</p>
<p class="Body">
  <a name="1233922"> </a>If no error is returned, applications should follow this call with one or more calls to <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a>, to receive the data, or <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a>, to disconnect. 
</p>
<h4 class="RefSide">
  <a name="1233931"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233935"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1233936"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233943"> </a><a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>, <a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1233946"> </a>ExgGetDefaultApplication
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1233947"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1233948"> </a>Retrieves the default application for the specified type of data or the default exchange library for URLs with the specified scheme. 
</p>
<h4 class="RefSide">
  <a name="1233949"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1233950"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1233951"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1233952"> </a>Err ExgGetDefaultApplication (UInt32 *creatorIDP, UInt16 id, const Char *dataTypeP)
</p>
<h4 class="RefSide">
  <a name="1233953"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1233954"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">creatorIDP</span></td><td valign="top">A pointer to the creator ID of the default application or default exchange library. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233955"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">id</span></td><td valign="top">The registry ID constant identifying the type of data in <span style="font-family: monospace">dataTypeP</span>. See <a href="ExchangeManager.html#1233140">Registry ID Constants</a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1233959"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dataTypeP</span></td><td valign="top">A pointer to a string that contains the type of data for which to retrieve the default application or library. If <span style="font-family: monospace">dataTypeP</span> is a file extension, do not include the period (.). If it is a URL, do not include the colon (:).</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1233960"> </a>Result 
</h4>
<p class="Body">
  <a name="1233961"> </a>Returns <span style="font-family: monospace">errNone</span> if a match was found or <span style="font-family: monospace">exgErrNoKnownTarget</span> if there is no default application or library for this type of data. 
</p>
<h4 class="RefSide">
  <a name="1233963"> </a>Comments 
</h4>
<p class="Body">
  <a name="1233964"> </a>You might use this function to see which application on this device will receive a particular type of data or to see which library on this device handles URLs of a particular scheme. 
</p>
<p class="Body">
  <a name="1233965"> </a>For example, to find out which application receives TXT files on this device, do the following: 
</p>
<pre  class="Preformatted">
UInt32 creatorID;<a name="1233966"> </a>
Err error;<a name="1233967"> </a>
error = ExgGetDefaultApplication(&amp;creatorID, <a name="1233968"> </a>
  <span style="font-family: monospace">exgRegExtensionID, "TXT");</span><a name="1233970"> </a>
if (!error) {<a name="1233971"> </a>
    //creatorID contains default application.<a name="1233972"> </a>
</pre>
<p class="Body">
  <a name="1233973"> </a>To find out which exchange library handles URLs that use the beam prefix, do the following: 
</p>
<pre  class="Preformatted">
UInt32 creatorID;<a name="1233974"> </a>
Err error;<a name="1233975"> </a>
error = ExgGetDefaultApplication(&amp;creatorID, <a name="1233976"> </a>
  <span style="font-family: monospace">exgRegSchemeID, exgBeamScheme);</span><a name="1233978"> </a>
if (!error) {<a name="1233979"> </a>
    //creatorID contains default library.<a name="1233980"> </a>
</pre>
<p class="Body">
  <a name="1233981"> </a>It's possible to have several applications registered to receive the same type of data, but none of them is the default. When the Exchange Manager receives an object of that type, it selects an application to receive the data, and it selects that same application every time. The selected application effectively becomes the default for the data type even though it is not explicitly set as the default. If this is the case, the <span style="font-family: monospace">ExgGetDefaultApplication</span> function returns the creator ID of this de-facto default application. 
</p>
<h4 class="RefSide">
  <a name="1233982"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1233986"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1233987"> </a>See Also 
</h4>
<p class="Body">
  <a name="1233993"> </a><a href="ExchangeManager.html#1234003"><span style="font-family: monospace">ExgGetRegisteredApplications</span></a>, <a href="ExchangeManager.html#1234054"><span style="font-family: monospace">ExgGetRegisteredTypes</span></a>, <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>, <a href="ExchangeManager.html#1234775"><span style="font-family: monospace">ExgSetDefaultApplication</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234003"> </a>ExgGetRegisteredApplications
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234004"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234005"> </a>Retrieves a list of all applications registered to receive data of a specified type.
</p>
<h4 class="RefSide">
  <a name="1234006"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234007"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234008"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234009"> </a>Err ExgGetRegisteredApplications (UInt32 **creatorIDsP, UInt32 *numAppsP, Char **namesP, Char **descriptionsP, UInt16 id, const Char *dataTypeP)
</p>
<h4 class="RefSide">
  <a name="1234010"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234011"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">creatorIDsP</span></td><td valign="top">An array of the creator IDs of the applications registered to receive objects of this type. Pass <span style="font-family: monospace">NULL</span> for this parameter if you only want to know how many applications are registered for this type. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234012"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">numAppsP</span></td><td valign="top">The number of applications registered to receive objects of this type. This is the number of elements in the <span style="font-family: monospace">creatorIDsP</span> array, the <span style="font-family: monospace">namesP</span> array, and the <span style="font-family: monospace">descriptionsP</span> array. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234013"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">namesP</span></td><td valign="top">A packed list of strings, suitable for passing to <a href="SystemManager.html#1165885"><span style="font-family: monospace">SysFormPointerArrayToStrings</span></a>, containing the names of the applications or libraries. Each string is no more than <span style="font-family: monospace">exgMaxTitleLen</span> characters. Pass <span style="font-family: monospace">NULL</span> for this parameter if you don't want to retrieve it. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234019"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">descriptionsP</span></td><td valign="top">A packed list of strings, suitable for passing to <span style="font-family: monospace">SysFormPointerArrayToStrings</span>, containing the descriptions of the applications or libraries. Descriptions are specified when the applications or libraries register for data. Each string is no more than <span style="font-family: monospace">exgMaxDescriptionLength</span> characters. Pass <span style="font-family: monospace">NULL</span> for this parameter if you don't want to retrieve it. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234021"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">id</span></td><td valign="top">The registry ID constant identifying the type of data in <span style="font-family: monospace">dataTypeP</span>. See <a href="ExchangeManager.html#1233140">Registry ID Constants</a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234025"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dataTypesP</span></td><td valign="top">A pointer to a tab-delimited, null-terminated string listing the items to register. (Use <span style="font-family: monospace">\t </span>for the tab character.) Each item in the string must be no more than <span style="font-family: monospace">exgMaxTypeLength</span> characters. There can be no more than 16 types total. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234027"> </a>Result 
</h4>
<p class="Body">
  <a name="1234028"> </a>Returns <span style="font-family: monospace">errNone</span> upon success or <span style="font-family: monospace">exgMemError</span> if the function cannot allocate space for the creator IDs, names, or descriptions. 
</p>
<div class="NINoteImportant"><hr>
  <a name="1234029"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> This function allocates enough space for the <span style="font-family: monospace">creatorIDsP</span>, <span style="font-family: monospace">namesP</span>, and <span style="font-family: monospace">descriptionsP</span> arrays as long as you do not pass <span style="font-family: monospace">NULL</span> for the parameters. You are still responsible for freeing these arrays. 
<hr>
</div>
<h4 class="RefSide">
  <a name="1234030"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234031"> </a>You might use this function to see which applications on this device can receive a particular type of data or to see which libraries on this device handle URLs of a particular scheme. You can also use it to built a list of choices from which the user can select a default application or default exchange library for a particular data type or URL scheme. For example, iMessenger uses this function to build a list of mailto handlers so that the user can choose one of them to be the default. 
</p>
<p class="Body">
  <a name="1234032"> </a>The Exchange Manager itself uses <span style="font-family: monospace">ExgGetRegisteredApplications</span> to find exchange libraries when it is given a URL that begins with a question mark (?). It displays the returned list to the user in the Send With dialog. 
</p>
<h4 class="RefSide">
  <a name="1234033"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234037"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1234038"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234045"> </a><a href="ExchangeManager.html#1233946"><span style="font-family: monospace">ExgGetDefaultApplication</span></a>, <a href="ExchangeManager.html#1234054"><span style="font-family: monospace">ExgGetRegisteredTypes</span></a>, <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>, <a href="ExchangeManager.html#1234775"><span style="font-family: monospace">ExgSetDefaultApplication</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234054"> </a>ExgGetRegisteredTypes
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234055"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234056"> </a>Retrieve a list of all data types for which a registration exists. 
</p>
<h4 class="RefSide">
  <a name="1234057"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234058"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234059"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234060"> </a>Err ExgGetRegisteredTypes (Char **dataTypesP, UInt32 *sizeP, UInt16 id)
</p>
<h4 class="RefSide">
  <a name="1234061"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234062"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">dataTypesP</span></td><td valign="top">A packed list of strings, suitable for passing to <a href="SystemManager.html#1165885"><span style="font-family: monospace">SysFormPointerArrayToStrings</span></a>, containing a sorted list of data types for which a registration exists. Each string is no more than <span style="font-family: monospace">exgMaxTypeLength</span> characters. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234068"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">sizeP</span></td><td valign="top">The number of elements in the <span style="font-family: monospace">dataTypesP</span> array. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234069"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">id</span></td><td valign="top">The type of data to search for. For example, you can search for all registered creator IDs, all registered MIME types, and so on. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234070"> </a>Result 
</h4>
<p class="Body">
  <a name="1234072"> </a>Returns <span style="font-family: monospace">errNone</span> upon success or <span style="font-family: monospace">exgMemError</span> if the function cannot allocate space for the data types array. 
</p>
<div class="NINoteImportant"><hr>
  <a name="1234073"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> This function allocates enough space for the <span style="font-family: monospace">dataTypesP</span> array as long as you do not pass <span style="font-family: monospace">NULL</span> for the parameter. You are still responsible for freeing this array. 
<hr>
</div>
<h4 class="RefSide">
  <a name="1234074"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234075"> </a>This function could be used to create an application that allows users to choose the default application for each data type. 
</p>
<h4 class="RefSide">
  <a name="1234076"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234080"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1234081"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234087"> </a><a href="ExchangeManager.html#1233946"><span style="font-family: monospace">ExgGetDefaultApplication</span></a>, <a href="ExchangeManager.html#1234003"><span style="font-family: monospace">ExgGetRegisteredApplications</span></a>, <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>, <a href="ExchangeManager.html#1234775"><span style="font-family: monospace">ExgSetDefaultApplication</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234097"> </a>ExgGetTargetApplication
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234098"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234099"> </a>Retrieves the application that should receive a specific message. This function does not search for libraries. 
</p>
<h4 class="RefSide">
  <a name="1234100"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234101"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234102"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234103"> </a>Err ExgGetTargetApplication (ExgSocketType *socketP, Boolean unwrap, UInt32 *creatorIDP, Char *descriptionP, UInt32 descriptionSize)
</p>
<h4 class="RefSide">
  <a name="1234104"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234105"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). The structure should contain values for the <span style="font-family: monospace">target</span>, <span style="font-family: monospace">type</span>, or <span style="font-family: monospace">name</span> fields. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234109"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">unwrap</span></td><td valign="top">If <span style="font-family: monospace">true</span>, only an application that registered to receive the data type with the <span style="font-family: monospace">exgUnwrap</span> flag set should be the target application. If <span style="font-family: monospace">false</span>, the target application should be an application that registered with the <span style="font-family: monospace">exgUnwrap</span> flag clear. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234110"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">creatorIDP</span></td><td valign="top">The creator ID of the application that should receive this object. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234111"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">descriptionP</span></td><td valign="top">The application's description from the registry, if any. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234112"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">descriptionSize</span></td><td valign="top">The size of the <span style="font-family: monospace">descriptionP</span> buffer. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234113"> </a>Result 
</h4>
<p class="Body">
  <a name="1234114"> </a>Returns one of the following error codes: 
</p>

<h5 class="TgTable">
  <a name="1234129"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1234117"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span> </div></td>
    <td><a name="1234119"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234121"> </a><div class="CellBody"><span style="font-family: monospace">exgErrTargetMissing </span></div></td>
    <td><a name="1234123"> </a><div class="CellBody">The <span style="font-family: monospace">target</span> field contains a creator ID, but the application with that creator ID does not exist </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234126"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNoKnownTarget</span> </div></td>
    <td><a name="1234128"> </a><div class="CellBody">No application is registered to receive the data type </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1234130"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234131"> </a>The Exchange Manager uses this function to determine which application should be launched to receive incoming data. Applications and libraries may call this function as well. 
</p>
<p class="Body">
  <a name="1234132"> </a><span style="font-family: monospace">ExgGetTargetApplication</span> determines the target application by doing the following: 
</p>

  <a name="1234133"> </a><p class="B1Bullet"> &#8226; If the <span style="font-family: monospace">socketP-&gt;target</span> field contains a creator ID, the Exchange Manager searches the registry to see if an application is registered for that creator ID as the default application. If the registry does not contain an entry for the creator ID, it checks to see if the application identified by the creator ID is installed on this device. If an application is found for the <span style="font-family: monospace">target</span>, that is the application returned. </p>

  <a name="1234134"> </a><p class="B1Bullet"> &#8226; If the <span style="font-family: monospace">socketP-&gt;type</span> field contains a MIME type, the Exchange Manager searches the registry for an application registered to receive objects of that type. If one is found, that is the application returned. </p>

  <a name="1234135"> </a><p class="B1Bullet"> &#8226; If the <span style="font-family: monospace">socketP-&gt;name</span> field contains a period (.), the portion after the last period is taken to be the file extension. The Exchange Manager searches the registry for an application registered to receive a file with the specified extension. If one is found, that is the application returned. If not, <span style="font-family: monospace">exgErrNoKnownTarget</span> is returned. </p>
<p class="Body">
  <a name="1234137"> </a>If more than one application is registered for the target, type, or file extension, this function returns the one that is registered as the default. If no application is registered as the default, then a specific application is chosen. The Exchange Manager chooses this same application each time. That is, each time a file with a TXT extension is sent with no target or MIME type specified, the <span style="font-family: monospace">ExgGetTargetApplication</span> returns the same application to handle the receipt. 
</p>
<p class="Body">
  <a name="1234138"> </a>Set the <span style="font-family: monospace">unwrap</span> parameter to <span style="font-family: monospace">true</span> if the object was sent as part of another object, such as a vStock object that was sent as an attachment to an e-mail message. In this case, the Exchange Manager searches for an application that registered to receive the target, the type, or the file extension of the vStock object with the <span style="font-family: monospace">exgUnwrap</span> flag set. If an application is found, the vStock object is delivered, and the exchange library should discard the object that contained it (the e-mail message). If there is no application registered to receive the data with the <span style="font-family: monospace">exgUnwrap</span> flag set, this function returns <span style="font-family: monospace">exgErrNoKnownTarget</span>. In this case, the exchange library should call <a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a> again passing the entire e-mail message instead of just the vStock attachment. 
</p>
<h4 class="RefSide">
  <a name="1234144"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234148"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1234149"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234156"> </a><a href="ExchangeManager.html#1234775"><span style="font-family: monospace">ExgSetDefaultApplication</span></a>, <a href="ExchangeManager.html#1234222"><span style="font-family: monospace">ExgNotifyPreview</span></a>, <a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a>, <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234166"> </a>ExgNotifyGoto
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234167"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234172"> </a>Launches the target application using <a href="AppLaunchCodes.html#970812"><span style="font-family: monospace">sysAppLaunchCmdGoto</span></a>. 
</p>
<h4 class="RefSide">
  <a name="1234173"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234174"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234175"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234176"> </a>Err ExgNotifyGoto (ExgSocketType *socketP, UInt16 flags)
</p>
<h4 class="RefSide">
  <a name="1234177"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234178"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">A socket identifying the object to deliver (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). The <span style="font-family: monospace">goToCreator</span> field contains the application to be launched, and the <span style="font-family: monospace">goToParams</span> field contains data for the launch code's parameter block. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234182"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">flags</span></td><td valign="top">Not currently used. Pass 0 for this parameter. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234183"> </a>Result 
</h4>
<p class="Body">
  <a name="1234184"> </a>Returns one of the following error codes: 
</p>

<h5 class="TgTable">
  <a name="1234198"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1234187"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span> </div></td>
    <td><a name="1234189"> </a><div class="CellBody">Success or the <span style="font-family: monospace">goToCreator</span> field is empty </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234191"> </a><div class="CellBody"><span style="font-family: monospace">dmErr...</span> (one of the data manager error codes)</div></td>
    <td><a name="1234193"> </a><div class="CellBody">The specified application could not be found</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234195"> </a><div class="CellBody"><span style="font-family: monospace">memErrNotEnoughSpace </span></div></td>
    <td><a name="1234197"> </a><div class="CellBody">Not enough memory available to create the launch code's parameter block</div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1234199"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234200"> </a>Exchange libraries call this function if they want to support immediate display of the received object. Applications do not call this function. 
</p>
<p class="Body">
  <a name="1234201"> </a>Most exchange libraries should call <span style="font-family: monospace">ExgNotifyGoto</span> after the return from <a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a> so that the user can inspect the newly received data. If the exchange library is most often used by a single application that does not require the launch code, this call to <span style="font-family: monospace">ExgNotifyGoto</span> can be skipped. For example, the SMS Library does not call <span style="font-family: monospace">ExgNotifyGoto</span>. SMS messages are received by the SMS Messenger application, which does not launch upon receiving data. 
</p>
<p class="Body">
  <a name="1234206"> </a><span style="font-family: monospace">ExgNotifyGoto</span> only launches an application if one is specified in the <span style="font-family: monospace">goToCreator</span> field and the <span style="font-family: monospace">noGoTo</span> parameter is <span style="font-family: monospace">false</span>. If a <span style="font-family: monospace">goToCreator</span> is not specified, it is not considered an error. This gives the application a way to override the default behavior. 
</p>
<h4 class="RefSide">
  <a name="1234207"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234211"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1234212"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234219"> </a><a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a>, <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234222"> </a>ExgNotifyPreview
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234223"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234224"> </a>Displays a preview in the exchange dialog of the data to be received. 
</p>
<h4 class="RefSide">
  <a name="1234225"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234226"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234227"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234228"> </a>Err ExgNotifyPreview (ExgPreviewInfoType *infoP)
</p>
<h4 class="RefSide">
  <a name="1234229"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234234"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">infoP</span></td><td valign="top">An <a href="ExchangeManager.html#1232903"><span style="font-family: monospace">ExgPreviewInfoType</span></a> structure containing information about the preview operation. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234235"> </a>Result 
</h4>
<p class="Body">
  <a name="1234236"> </a>Returns one of the following error codes: 
</p>

<h5 class="TgTable">
  <a name="1234252"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1234239"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span> </div></td>
    <td><a name="1234241"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234244"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotSupported </span></div></td>
    <td><a name="1234246"> </a><div class="CellBody">The exchange library doesn't support preview mode </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234249"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNoKnownTarget</span> </div></td>
    <td><a name="1234251"> </a><div class="CellBody">There is no application registered to receive the type of object </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1234253"> </a>Other error codes depend on the application. 
</p>
<h4 class="RefSide">
  <a name="1234254"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234255"> </a>This function performs the preview operation specified in the <span style="font-family: monospace">op</span> field of the <span style="font-family: monospace">infoP</span> parameter. The <a href="ExchangeManager.html#1233779"><span style="font-family: monospace">ExgDoDialog</span></a> function calls this function to show a data preview in the exchange dialog. Exchange libraries might want to call this function in certain circumstances. An application rarely calls this function, but it may do so if it displays its own dialog in response to the launch code <a href="AppLaunchCodes.html#970542"><span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span></a>. 
</p>
<p class="Body">
  <a name="1234268"> </a><span style="font-family: monospace">ExgNotifyPreview</span> uses <a href="ExchangeManager.html#1234097"><span style="font-family: monospace">ExgGetTargetApplication</span></a> to determine the appropriate target application for this data and then launches that application with the launch code <a href="AppLaunchCodes.html#970614"><span style="font-family: monospace">sysAppLaunchCmdExgPreview</span></a>, passing <span style="font-family: monospace">infoP</span> as the parameter block. The application responds to this launch code by accepting the connection, receiving the data from the exchange library, and depending on the operation requested, drawing the data into the <span style="font-family: monospace">infoP-&gt;bounds</span> rectangle or returning it in the <span style="font-family: monospace">infoP-&gt;string</span> field, and then disconnecting. The <span style="font-family: monospace">ExgDoDialog</span> function uses the returned information to draw the preview portion of the dialog. 
</p>
<p class="Body">
  <a name="1234273"> </a>If the preview data is a string, the <span style="font-family: monospace">ExgNotifyPreview</span> provides a series of fallback strings that are used if the exchange library doesn't support preview or the application doesn't respond to the launch code. If the application fails to return a string, this function provides one of the following: 
</p>

  <a name="1234274"> </a><p class="B1Bullet"> &#8226; the data's description from <span style="font-family: monospace">socketP-&gt;description</span> </p>

  <a name="1234275"> </a><p class="B1Bullet"> &#8226; the filename in <span style="font-family: monospace">socketP-&gt;name</span> </p>

  <a name="1234276"> </a><p class="B1Bullet"> &#8226; the target application's description as stored in the exchange registry </p>

  <a name="1234277"> </a><p class="B1Bullet"> &#8226; the MIME type in <span style="font-family: monospace">socketP-&gt;type</span> </p>

  <a name="1234278"> </a><p class="B1Bullet"> &#8226; the file extension in <span style="font-family: monospace">socketP-&gt;name</span></p>
<h4 class="RefSide">
  <a name="1234279"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234283"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1234284"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234291"> </a><a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a>, <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1234294"> </a>ExgNotifyReceive
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234295"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234296"> </a>Delivers an object to the appropriate application using the registry. 
</p>
<h4 class="RefSide">
  <a name="1234297"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234298"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234299"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234300"> </a>Err ExgNotifyReceive (ExgSocketType *socketP, UInt16 flags)
</p>
<h4 class="RefSide">
  <a name="1234301"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234302"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234306"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">flags</span></td><td valign="top">A bit field. Pass 0 or a combination of the following constants (OR the constants together to specify more than one): </td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="1234308"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">exgUnwrap</span> </td><td valign="top">The object being delivered should only be handled by an application that registered to receive it with the <span style="font-family: monospace">exgUnwrap</span> flag set.</td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="1234311"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">exgNoAsk</span> </td><td valign="top">Do not ask the user to confirm receipt of data. If this constant is passed, the target application does not receive the <a href="AppLaunchCodes.html#970542"><span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span></a> launch code, and the Exchange Manager does not call <a href="ExchangeManager.html#1233779"><span style="font-family: monospace">ExgDoDialog</span></a> to display the user confirmation dialog. </td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="1234321"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">exgGet</span> </td><td valign="top">Specifies that this is a request for the application to send data rather than to receive data. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234322"> </a>Result 
</h4>
<p class="Body">
  <a name="1234323"> </a>Returns one of the following error codes: 
</p>

<h5 class="TgTable">
  <a name="1234342"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1234326"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span> </div></td>
    <td><a name="1234328"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234330"> </a><div class="CellBody"><span style="font-family: monospace">exgErrTargetMissing </span></div></td>
    <td><a name="1234332"> </a><div class="CellBody">The <span style="font-family: monospace">target</span> field contains a creator ID, but the application with that creator ID does not exist </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234335"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNoKnownTarget</span> </div></td>
    <td><a name="1234337"> </a><div class="CellBody">No application is registered to receive the data type </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234339"> </a><div class="CellBody"><span style="font-family: monospace">exgErrUserCancel</span> </div></td>
    <td><a name="1234341"> </a><div class="CellBody">The user cancelled the operation </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1234343"> </a>Other error codes depend on the application that is launched. 
</p>
<h4 class="RefSide">
  <a name="1234344"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234345"> </a>Exchange libraries call this function to initiate a receive operation on the receiving device. Applications do not call this function. 
</p>
<p class="Body">
  <a name="1234346"> </a>The <span style="font-family: monospace">ExgNotifyReceive</span> function uses <a href="ExchangeManager.html#1234097"><span style="font-family: monospace">ExgGetTargetApplication</span></a> to determine which application should receive the data, then sends that application the appropriate launch codes. 
</p>
<p class="Body">
  <a name="1234351"> </a>If the <span style="font-family: monospace">flags</span> parameter is 0, a receive operation is assumed. The <span style="font-family: monospace">ExgNotifyReceive</span> function does the following: 
</p>
  <a name="1234352"> </a><p class="N1NumList">1.	  It sends the application the <a href="AppLaunchCodes.html#970542"><span style="font-family: monospace">sysAppLaunchCmdExgAskUser</span></a> launch code. </p>  <a name="1234356"> </a><p class="N1NumList">2.	  If the application returns <span style="font-family: monospace">exgAskDialog</span> or does not respond to the launch code, it calls <a href="ExchangeManager.html#1233779"><span style="font-family: monospace">ExgDoDialog</span></a>, which sends the application the <a href="AppLaunchCodes.html#970614"><span style="font-family: monospace">sysAppLaunchCmdExgPreview</span></a> launch code to have the application receive preview data for the dialog. </p>  <a name="1234363"> </a><p class="N1NumList">3.	  It sends the application the <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a> launch code to tell the application to receive the data. </p><p class="Body">
  <a name="1234367"> </a>If the <span style="font-family: monospace">flags</span> field contains the <span style="font-family: monospace">exgNoAsk</span> flag, the first and second steps are skipped. 
</p>
<p class="Body">
  <a name="1234368"> </a>If the <span style="font-family: monospace">flags</span> field contains <span style="font-family: monospace">exgGet</span>, this function is a request for data to send to the remote device, not a request to receive data from the remote device. In this case, <span style="font-family: monospace">ExgNotifyReceive</span> launches the target application with the <a href="AppLaunchCodes.html#970581"><span style="font-family: monospace">sysAppLaunchCmdExgGetData</span></a> launch code. 
</p>
<p class="Body">
  <a name="1234373"> </a>If the <span style="font-family: monospace">flags</span> field has the <span style="font-family: monospace">exgUnwrap</span> bit set, it means that the object to be received was sent as part of another object, and it should only be sent to an application that registered to receive it with the <span style="font-family: monospace">exgUnwrap</span> flag set. For example, if the exchange library receives an e-mail message with an attached vStock object, the exchange library may call <span style="font-family: monospace">ExgNotifyReceive</span> with the <span style="font-family: monospace">exgUnwrap</span> flag set and a socket that describes the vStock data type to see if there is an application that registered to receive it directly. If no application is registered to receive vStock objects with the <span style="font-family: monospace">exgUnwrap</span> flag set, <span style="font-family: monospace">ExgNotifyReceive</span> returns <span style="font-family: monospace">exgErrNoKnownTarget</span>. The exchange library should then call <span style="font-family: monospace">ExgNotifyReceive</span> again, but this time without the <span style="font-family: monospace">exgUnwrap</span> flag and with a socket that describes the e-mail message data type. This second call sends the object to the application registered to receive the e-mail message rather than its vStock attachment. That application may extract the vStock attachment from the message and use the Local Exchange Library to send it to an application registered to receive vStock objects normally (without the <span style="font-family: monospace">exgUnwrap</span> flag). 
</p>
<h4 class="RefSide">
  <a name="1234376"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234380"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present. <span style="font-family: monospace">ExgNotifyReceive</span> was a system use only function until the release of Palm OS 4.0. 
</p>
<p class="Body">
  <a name="1234384"> </a>If the <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is <b>not</b> present, the <span style="font-family: monospace">flags</span> parameter is not supported, so libraries cannot suppress the exchange dialog, send objects with attachments, or perform a get operation. These features are all added in the <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a>. Also, if the 4.0 new feature set is not present, this function performs the equivalent of <a href="ExchangeManager.html#1234166"><span style="font-family: monospace">ExgNotifyGoto</span></a> after the application has returned from receiving data. Exchange libraries wishing to support this functionality should call <span style="font-family: monospace">ExgNotifyGoto</span> immediately after calling <span style="font-family: monospace">ExgNotifyReceive</span>. 
</p>
<h4 class="RefSide">
  <a name="1234392"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234396"> </a><a href="ExchangeManager.html#1234222"><span style="font-family: monospace">ExgNotifyPreview</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234399"> </a>ExgPut
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234400"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234401"> </a>Initiates the transfer of data to the destination device.
</p>
<h4 class="RefSide">
  <a name="1234402"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234403"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234404"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234405"> </a>Err ExgPut (ExgSocketType *socketP)
</p>
<h4 class="RefSide">
  <a name="1234406"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234407"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">Pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). Specify either a value for the <span style="font-family: monospace">libraryRef</span> field or a URL in the <span style="font-family: monospace">name</span> field. <span style="font-family: monospace">libraryRef</span> should be 0 if the <span style="font-family: monospace">name</span> field contains a URL. The structure should also contain a value for the <span style="font-family: monospace">target</span>, <span style="font-family: monospace">type</span>, or <span style="font-family: monospace">name</span> field. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234411"> </a>Result 
</h4>
<p class="Body">
  <a name="1234412"> </a>Returns one of the following error codes:
</p>

<h5 class="TgTable">
  <a name="1234430"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1234415"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span></div></td>
    <td><a name="1234417"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234419"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1234421"> </a><div class="CellBody">Couldn't find default exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234423"> </a><div class="CellBody"><span style="font-family: monospace">exgMemError</span></div></td>
    <td><a name="1234425"> </a><div class="CellBody">Not enough memory to initialize transfer</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234427"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotEnoughPower</span> </div></td>
    <td><a name="1234429"> </a><div class="CellBody">The battery does not have enough power to perform the operation </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1234431"> </a>Other error codes depend on the exchange library. 
</p>
<h4 class="RefSide">
  <a name="1234432"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234433"> </a>Applications call this function to start a send operation. 
</p>
<p class="Body">
  <a name="1234434"> </a>If the connection does not already exist, this function establishes one. You must create and initialize an <span style="font-family: monospace">ExgSocketType</span> structure containing information about the data to send and the destination application. All unused fields in the structure <b>must</b> be set to 0. 
</p>
<p class="Body">
  <a name="1234439"> </a>If no error is returned, this call <b>must</b> be followed by <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a>, to begin sending data, or <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a>, to disconnect. You may need to call <span style="font-family: monospace">ExgSend</span> multiple times to send all the data.
</p>
<p class="Body">
  <a name="1234444"> </a>The socket's <span style="font-family: monospace">libraryRef</span> field or the <span style="font-family: monospace">name</span> field must identify the library that performs the transfer. The <span style="font-family: monospace">libraryRef</span> field identifies the exchange library by its library reference number. The <span style="font-family: monospace">name</span> field identifies the library by URL. The socket should also specify what data is being sent by providing values for at least one of the <span style="font-family: monospace">target</span>, <span style="font-family: monospace">name</span>, and <span style="font-family: monospace">type</span> fields. Use of the <span style="font-family: monospace">name</span> field is the most common method.
</p>
<p class="Body">
  <a name="1234445"> </a>To provide users with a choice of transport mechanisms, the application can provide a URL that begins with a question mark (?). The Exchange Manager displays a dialog with a list of all exchange libraries that respond to URLs of the specified type. If only one exchange library is registered for this URL scheme, no dialog is displayed. 
</p>
<p class="Body">
  <a name="1234446"> </a>For example, many applications on Palm OS 4.0 or higher support a Send command. This command generates a URL with the prefix <span style="font-family: monospace">exgSendPrefix</span> (see <a href="ExchangeManager.html#1233228">Predefined URL Prefixes</a>). The Exchange Manager displays a dialog containing a list of libraries registered for that URL scheme. The user selects an exchange library, and that library's <span style="font-family: monospace">ExgLibSend</span> function is called. 
</p>
<p class="Body">
  <a name="1234450"> </a>If the library is not specified by either URL or library reference number, the Exchange Manager by default uses the IR Library; however, if the <span style="font-family: monospace">localMode</span> flag is set, the Local Exchange Library is used instead. 
</p>
<h4 class="RefSide">
  <a name="1234451"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234455"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<p class="Body">
  <a name="1234456"> </a>Support for identifying exchange libraries by URL is implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1234460"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234470"> </a><a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a>, <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a>, <a href="ExchangeManager.html#1233358"><span style="font-family: monospace">ExgConnect</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234473"> </a>ExgReceive
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234474"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234475"> </a>Receives data from a remote device.
</p>
<h4 class="RefSide">
  <a name="1234476"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234477"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234478"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234479"> </a>UInt32 ExgReceive (ExgSocketType *socketP, void *bufP, UInt32 bufLen, Err *err)
</p>
<h4 class="RefSide">
  <a name="1234480"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234481"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234485"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">bufP</span></td><td valign="top">A pointer to the buffer in which to receive the data.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234486"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufLen</span></td><td valign="top">The number of bytes to receive.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234487"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">err</span></td><td valign="top">A pointer to an error code result. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234488"> </a>Result 
</h4>
<p class="Body">
  <a name="1234489"> </a>Returns the number of bytes actually received. A zero result indicates the end of the transmission. 
</p>
<p class="Body">
  <a name="1234490"> </a>An error code is returned in the address indicated by <span style="font-family: monospace">err</span>. The error code <span style="font-family: monospace">exgErrUserCancel</span> is returned if the user cancels the operation. The error code <span style="font-family: monospace">exgErrNotSupported</span> is returned if the application calls this function during a preview and the exchange library does not have any more data available or does not support preview. 
</p>
<p class="Body">
  <a name="1234491"> </a>May display a fatal error message if the library reference number is not provided in <span style="font-family: monospace">socketP</span>. 
</p>
<h4 class="RefSide">
  <a name="1234492"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234493"> </a>Applications call this function in the following circumstances: 
</p>

  <a name="1234498"> </a><p class="B1Bullet"> &#8226; In response to the <a href="AppLaunchCodes.html#970682"><span style="font-family: monospace">sysAppLaunchCmdExgReceiveData</span></a> launch code, following a successful call to <a href="ExchangeManager.html#1233284"><span style="font-family: monospace">ExgAccept</span></a>. </p>

  <a name="1234507"> </a><p class="B1Bullet"> &#8226; In response to the <a href="AppLaunchCodes.html#970614"><span style="font-family: monospace">sysAppLaunchCmdExgPreview</span></a> launch code, following a successful call to <span style="font-family: monospace">ExgAccept</span>. </p>

  <a name="1234508"> </a><p class="B1Bullet"> &#8226; To receive requested data following a successful call to <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a>. </p>
<p class="Body">
  <a name="1234517"> </a>After receiving the data, applications call <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> to terminate the connection.
</p>
<p class="Body">
  <a name="1234518"> </a>This function blocks the application until the end of the transmission or until the requested number of bytes has been received. However, exchange libraries can provide their own user interface that is shown during this call, is updated as necessary, and allows the user to cancel the operation in progress. 
</p>
<h4 class="RefSide">
  <a name="1234519"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234523"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present. Preview mode and <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a> are only supported if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1234531"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234535"> </a><a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234538"> </a>ExgRegisterDatatype
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234539"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234540"> </a>Registers an application to receive a specific type of data, or registers an exchange library to handle specific URL schemes.
</p>
<h4 class="RefSide">
  <a name="1234541"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234542"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234543"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234544"> </a>Err ExgRegisterDatatype (UInt32 creatorID, UInt16 id, const Char *dataTypesP, const Char *descriptionsP, UInt16 flags)
</p>
<h4 class="RefSide">
  <a name="1234545"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234546"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">creatorID</span></td><td valign="top">The creator ID of the registering application or exchange library.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234547"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">id</span></td><td valign="top">A registry ID constant identifying the type of the items being registered. See <a href="ExchangeManager.html#1233140">Registry ID Constants</a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234551"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dataTypesP</span></td><td valign="top">Pointer to a tab-delimited, null-terminated string listing the items to register. (Use <span style="font-family: monospace">"\t"</span> for the tab character.) To unregister, pass a <span style="font-family: monospace">NULL</span> value. Each item in the string must be no more than <span style="font-family: monospace">exgMaxTypeLength</span> characters. There can be no more than 16 types total. </td>
  </tr>
</table>
</div></h5>
<div class="NINoteImportant"><hr>
  <a name="1234553"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> If specifying file extensions, do not include the period (.) that precedes the extension. If specifying URL prefixes, do not include the colon (:) at the end of the prefix. 
<hr>
</div>
<h5 class="P1"><a name="1234554"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">descriptionsP</span></td><td valign="top">Pointer to a tab-delimited, null-terminated string that lists descriptions for the items in the <span style="font-family: monospace">dataTypesP</span> parameter. (Use <span style="font-family: monospace">"\t"</span> for the tab character.) Each description must be no longer than <span style="font-family: monospace">exgMaxDescriptionLength</span>. Pass <span style="font-family: monospace">NULL</span> to leave out the descriptions. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234556"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"></td><td valign="top">There must either be one description for all types or the number of descriptions must match the number of types.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234557"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"></td><td valign="top">The descriptions are used in dialogs displayed by Exchange Manager to identify applications or libraries. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234558"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">flags</span></td><td valign="top">A bit field specifying registration options. Currently, only one bit is used: the unwrap bit. Pass the <span style="font-family: monospace">exgUnwrap</span> constant to specify that the application is registering to receive objects of this type directly if the object is sent as part of another object. For example, if a vStock object is sent as an attachment to an email message, the Exchange Manager should send the vStock object to this application directly rather than sending the message to the email application. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234560"> </a>Result 
</h4>
<p class="Body">
  <a name="1234562"> </a>Returns <span style="font-family: monospace">errNone</span> if successful, <span style="font-family: monospace">exgMemError</span> if there is not enough memory to save the registration info, or one of the data manager error codes (<span style="font-family: monospace">dmErr</span>...). 
</p>
<h4 class="RefSide">
  <a name="1234563"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234564"> </a>Both applications and exchange libraries use this function to register with the Exchange Manager to receive certain types of data. 
</p>
<p class="Body">
  <a name="1234565"> </a>Applications must register with the Exchange Manager to receive data objects that do not specifically target that application using the creator ID in the <span style="font-family: monospace">target</span> field. 
</p>
<p class="Body">
  <a name="1234566"> </a>Exchange libraries register to receive data with certain URL schemes. If an exchange library is not registered to receive URLs, it only handles the receipt and sending of data if its library reference number is explicitly specified in the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure. Otherwise, the IR Library handles all incoming data for which a library could not be found. 
</p>
<p class="Body">
  <a name="1234570"> </a>Both applications and libraries should register to receive data as soon as possible after they are installed and as soon as possible after a hard reset. For example, applications can call <span style="font-family: monospace">ExgRegisterDatatype</span> in response to the <a href="AppLaunchCodes.html#970999"><span style="font-family: monospace">sysAppLaunchCmdSyncNotify</span></a> launch code, which they receive immediately after install. Exchange libraries implemented as applications can also use this strategy. Exchange libraries implemented as shared libraries should call <span style="font-family: monospace">ExgRegisterDatatype</span> in their startup functions. 
</p>
<p class="Body">
  <a name="1234575"> </a>Make only one call to <span style="font-family: monospace">ExgRegisterDatatype</span> per registry type. If you want to register to receive multiple items, use a tab character (<span style="font-family: monospace">\t</span>) to separate the items. If you were to, for example, make one call to register for the DOC file extension and one call to register for the TXT extension, the second call overwrites the first. However, if you want to register with the <span style="font-family: monospace">exgUnwrap</span> flag set, make one call without the <span style="font-family: monospace">exgUnwrap</span> flag and one call with the <span style="font-family: monospace">exgUnwrap</span> flag set. The application registered with the <span style="font-family: monospace">exgUnwrap</span> flag set is stored in a different part of the registry. 
</p>
<p class="Body">
  <a name="1234576"> </a>Specify <span style="font-family: monospace">exgRegExtensionID</span> to register to receive data that has a filename with a particular extension. For example, if your application wants to receive files with a TXT extension, it could register like this:
</p>
<pre  class="Preformatted">
<span style="font-family: monospace">ExgRegisterDatatype(myCreator, </span><a name="1234577"> </a>
<span style="font-family: monospace">  exgRegExtensionID, "TXT", NULL, 0);</span><a name="1234578"> </a>
</pre>
<p class="Body">
  <a name="1234579"> </a>If the application wants to receive files with a TXT extension or with a DOC extension, it could register like this: 
</p>
<pre  class="Preformatted">
<span style="font-family: monospace">ExgRegisterDatatype(myCreator, </span><a name="1234580"> </a>
<span style="font-family: monospace">  exgRegExtensionID, "TXT\tDOC", NULL, 0);</span><a name="1234581"> </a>
</pre>
<p class="Body">
  <a name="1234583"> </a>Specify <span style="font-family: monospace">exgRegTypeID</span> to register to receive data with a specific MIME type. For example, if your application wants to receive "setext" text files, it could register like this:
</p>
<pre  class="Preformatted">
<span style="font-family: monospace">ExgRegisterDatatype(myCreator, exgRegTypeID, 
"text/x-setext", NULL, 0);</span><a name="1234584"> </a>
</pre>
<p class="Body">
  <a name="1234586"> </a>Specify <span style="font-family: monospace">exgRegCreatorID</span> to register to receive data targeted for a particular creator ID. For example, if your application wants to handle all data intended for the ToDo application, it could register like this:
</p>
<pre  class="Preformatted">
<span style="font-family: monospace">Char toDoCreatorStr[5];</span><a name="1234587"> </a>
<span style="font-family: monospace">MemMove(toDoCreatorStr, sysFileCToDo, 4);</span><a name="1234588"> </a>
toDoCreatorStr[4] = chrNull;<a name="1234589"> </a>
<span style="font-family: monospace">ExgRegisterDatatype(myCreator, exgRegCreatorID,
</span>  toDoCreatorStr<span style="font-family: monospace">, NULL, 0);</span><a name="1234590"> </a>
</pre>
<div class="NINoteImportant"><hr>
  <a name="1234591"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> To override one application's receipt of data, you need to also set your application as the default for this creator ID. See <a href="ExchangeManager.html#1234775"><span style="font-family: monospace">ExgSetDefaultApplication</span></a>. 
<hr>
</div>
<p class="Body">
  <a name="1234596"> </a>Most exchange libraries will want to register for a unique URL scheme that identifies only that library, plus they should register for a more general scheme, such as the send scheme (<span style="font-family: monospace">exgSendScheme</span>), which causes the library to be listed in the Send With dialog when the user performs the Send command. The registry ID constant for URL prefixes is <span style="font-family: monospace">exgRegSchemeID</span>. 
</p>
<pre  class="Preformatted">
<span style="font-family: monospace">ExgRegisterDatatype(myLibCreator, </span><a name="1234599"> </a>
  <span style="font-family: monospace">exgRegSchemeID, myScheme "\t" exgSendScheme, </span><a name="1234600"> </a>
  <span style="font-family: monospace">NULL, 0);</span><a name="1234601"> </a>
</pre>
<p class="Body">
  <a name="1234602"> </a>Registrations are active until a hard reset or until the application or library is removed. The registration information is preserved across a soft reset. When an application is removed, its registry information is also automatically removed from the registry, so there is not normally a need to unregister. If you want to unregister, you can call <span style="font-family: monospace">ExgRegisterDatatype</span> with a <span style="font-family: monospace">NULL</span> value for the <span style="font-family: monospace">dataTypesP</span> parameter.
</p>
<p class="Body">
  <a name="1234603"> </a>Multiple applications can be registered to receive the same type of data. If this is the case, the application that is registered as the default (using <a href="ExchangeManager.html#1234775"><span style="font-family: monospace">ExgSetDefaultApplication</span></a>) is the one that receives the data unless the exchange socket explicitly specifies another application should receive it. If there is no default specified, the Exchange Manager determines a default. 
</p>
<p class="Body">
  <a name="1234608"> </a>Multiple libraries may also be registered to receive the same type of URL. In this case, if the URL begins with a question mark (?), the Exchange Manager displays a dialog so that the user can select which exchange library to use. If the URL does not begin with a question mark, the exchange library registered as the default is used. If there is no default specified, the Exchange Manager determines a default. 
</p>
<h4 class="RefSide">
  <a name="1234609"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234613"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. <span style="font-family: monospace">ExgRegisterDatatype</span> replaces the <a href="ExchangeManager.html#1234639"><span style="font-family: monospace">ExgRegisterData</span></a> function. 
</p>
<h4 class="RefSide">
  <a name="1234617"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234627"> </a><a href="ExchangeManager.html#1234639"><span style="font-family: monospace">ExgRegisterData</span></a>, <a href="ExchangeManager.html#1234097"><span style="font-family: monospace">ExgGetTargetApplication</span></a>, <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>, <a href="ExchangeManager.html#1233946"><span style="font-family: monospace">ExgGetDefaultApplication</span></a>, <a href="ExchangeManager.html#1234003"><span style="font-family: monospace">ExgGetRegisteredApplications</span></a>, <a href="ExchangeManager.html#1234054"><span style="font-family: monospace">ExgGetRegisteredTypes</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234639"> </a>ExgRegisterData
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234640"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234641"> </a>Registers an application to receive a specific type of data. This function is deprecated and replaced with <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>.
</p>
<h4 class="RefSide">
  <a name="1234645"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234646"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234647"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234648"> </a>Err ExgRegisterData (UInt32 creatorID, UInt16 id, const Char *dataTypesP)
</p>
<h4 class="RefSide">
  <a name="1234649"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234650"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">creatorID</span></td><td valign="top">Creator ID of the registering application.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234651"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">id</span></td><td valign="top">Registry ID identifying the type of the items being registered. Specify <span style="font-family: monospace">exgRegExtensionID</span> or <span style="font-family: monospace">exgRegTypeID</span>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234652"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dataTypesP</span></td><td valign="top">Pointer to a tab-delimited, null-terminated string listing the items to register. (Use \t for the tab character.) These include file extensions or MIME types. To unregister, pass a <span style="font-family: monospace">NULL</span> value.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234653"> </a>Result 
</h4>
<p class="Body">
  <a name="1234654"> </a>Returns <span style="font-family: monospace">errNone</span> if successful, otherwise, one of the data manager error codes (<span style="font-family: monospace">dmErr</span>...).
</p>
<h4 class="RefSide">
  <a name="1234655"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234656"> </a>Applications that wish to receive data from anything other than another Palm Powered<sup>&#8482;</sup> handheld running the same application must use this function to register for the kinds of data they can receive. Call this function when your application is loaded on the device.
</p>
<h4 class="RefSide">
  <a name="1234657"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234658"> </a>This function corresponds to the Palm OS 3.5 version of <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>. It is implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1234667"> </a>ExgRequest
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234668"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234669"> </a>Requests some data from an exchange library or an application using a URL. 
</p>
<h4 class="RefSide">
  <a name="1234670"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234671"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234672"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234673"> </a>Err ExgRequest (ExgSocketType *socketP)
</p>
<h4 class="RefSide">
  <a name="1234674"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234675"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">socketP</span></td><td valign="top">Pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). Specify a URL in the <span style="font-family: monospace">name</span> field and a <span style="font-family: monospace">libraryRef</span> of 0. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234679"> </a>Result 
</h4>
<p class="Body">
  <a name="1234680"> </a>Returns one of the following error codes:
</p>

<h5 class="TgTable">
  <a name="1234698"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1234683"> </a><div class="CellBody"><span style="font-family: monospace">errNone</span></div></td>
    <td><a name="1234685"> </a><div class="CellBody">Success</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234687"> </a><div class="CellBody"><span style="font-family: monospace">exgErrBadLibrary</span></div></td>
    <td><a name="1234689"> </a><div class="CellBody">Couldn't find default exchange library</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234691"> </a><div class="CellBody"><span style="font-family: monospace">exgErrNotEnoughPower</span> </div></td>
    <td><a name="1234693"> </a><div class="CellBody">The device does not have enough power to perform the operation </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1234695"> </a><div class="CellBody"><span style="font-family: monospace">sysErrLibNotFound</span></div></td>
    <td><a name="1234697"> </a><div class="CellBody">Couldn't find library or application to respond to URL </div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1234699"> </a>Other error codes depend on the exchange library or application. 
</p>
<h4 class="RefSide">
  <a name="1234700"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234704"> </a>The <span style="font-family: monospace">ExgRequest</span> function is similar to <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a> in that both are used to request data. The difference is that the application that calls <span style="font-family: monospace">ExgGet</span> is always the application that receives the data. When you call <span style="font-family: monospace">ExgRequest</span>, the application that receives the data is the application that is registered to receive it. For example, using <span style="font-family: monospace">ExgRequest</span>, it is possible for one application to use the Exchange Manager to retrieve a vCard using any supported transport mechanism and have that data sent directly to the Address Book application instead of to the calling application. 
</p>
<p class="Body">
  <a name="1234705"> </a>The <span style="font-family: monospace">socketP</span> passed to this function identifies the exchange library using a URL in the <span style="font-family: monospace">name</span> field. The application must know before-hand the proper URL prefix for the exchange library with which it wants to connect. See <a href="ExchangeManager.html#1233228">Predefined URL Prefixes</a> for a list of URL prefixes that the Exchange Manager provides. 
</p>
<p class="Body">
  <a name="1234709"> </a>If the provided URL begins with a question mark (?) and there are several exchange libraries registered for the specified URL scheme, the Exchange Manager displays a dialog from which the user selects the appropriate transport mechanism. 
</p>
<p class="Body">
  <a name="1234710"> </a>If the Exchange Manager cannot find a library that is registered for the specified URL, it assumes that an application is registered to receive the URL, and it launches that application with the <a href="AppLaunchCodes.html#970856"><span style="font-family: monospace">sysAppLaunchCmdGoToURL</span></a> launch code. 
</p>
<h4 class="RefSide">
  <a name="1234715"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234719"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1234720"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234727"> </a><a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a>, <a href="ExchangeManager.html#1234294"><span style="font-family: monospace">ExgNotifyReceive</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234730"> </a>ExgSend
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234731"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234732"> </a>Sends data to the destination device.
</p>
<h4 class="RefSide">
  <a name="1234733"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234734"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234735"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234736"> </a>UInt32 ExgSend (ExgSocketType *socketP, const void *bufP, UInt32 bufLen, Err * err)
</p>
<h4 class="RefSide">
  <a name="1234737"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234738"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">A pointer to the socket structure (see <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a>). A value must be provided for the <span style="font-family: monospace">libraryRef</span> field. The structure should also contain values for the <span style="font-family: monospace">target</span>, <span style="font-family: monospace">type</span>, or <span style="font-family: monospace">name</span> fields. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234742"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufP</span></td><td valign="top">A pointer to the data to send.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234743"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bufLen</span></td><td valign="top">The number of bytes to send.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234744"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">err</span></td><td valign="top">A pointer to an error code result.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234745"> </a>Result 
</h4>
<p class="Body">
  <a name="1234746"> </a>Returns the number of bytes actually sent, normally the same number as specified in <span style="font-family: monospace">bufLen</span>. An error code is returned in the address indicated by <span style="font-family: monospace">err</span>. The error code <span style="font-family: monospace">exgErrUserCancel</span> is returned if the user cancels the operation.
</p>
<p class="Body">
  <a name="1234747"> </a>May display a fatal error message if the <span style="font-family: monospace">socketP</span> parameter does not contain a value for the <span style="font-family: monospace">libraryRef</span> field. 
</p>
<h4 class="RefSide">
  <a name="1234748"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234749"> </a>Call this function one or more times to send all the data, following a successful call to <a href="ExchangeManager.html#1234399"><span style="font-family: monospace">ExgPut</span></a>. After sending the data, call <a href="ExchangeManager.html#1233680"><span style="font-family: monospace">ExgDisconnect</span></a> to terminate the connection.
</p>
<p class="Body">
  <a name="1234758"> </a>The exchange library may break large amounts of data into multiple packets or assemble small send commands together into larger packets, but the application will not be aware of these transport level details.
</p>
<p class="Body">
  <a name="1234759"> </a>This function blocks the application until all the data is sent. However, the exchange library may provide its own user interface that is updated as necessary and allows the user to cancel the operation in progress.
</p>
<h4 class="RefSide">
  <a name="1234760"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234764"> </a>Implemented only if <a href="CompatibilityApdx.html#969650">3.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1234765"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234772"> </a><a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a>, <a href="ExchangeManager.html#1233876"><span style="font-family: monospace">ExgGet</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1234775"> </a>ExgSetDefaultApplication
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234776"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234777"> </a>Sets the application that receives a specified type of data by default. This function also sets the default exchange library that handles particular URL schemes. 
</p>
<h4 class="RefSide">
  <a name="1234778"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234779"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234780"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234781"> </a>Err ExgSetDefaultApplication (UInt32 creatorID, UInt16 id, const Char *dataTypeP)
</p>
<h4 class="RefSide">
  <a name="1234782"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234783"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">creatorID</span></td><td valign="top">The creator ID of the application or library that should become the default for this type of data. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234784"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">id</span></td><td valign="top">A registry ID constant identifying the type of data in <span style="font-family: monospace">dataTypeP</span>. See <a href="ExchangeManager.html#1233140">Registry ID Constants</a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234788"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dataTypesP</span></td><td valign="top">A pointer to a null-terminated string containing the desired type of data. </td>
  </tr>
</table>
</div></h5>
<div class="NINoteImportant"><hr>
  <a name="1234789"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> If specifying a file extension, do not include the period (.) that precedes the extension. If specifying a URL prefix, do not include the colon (:) at the end of the prefix. 
<hr>
</div>
<h4 class="RefSide">
  <a name="1234790"> </a>Result 
</h4>
<p class="Body">
  <a name="1234792"> </a>Returns <span style="font-family: monospace">errNone</span> upon success or <span style="font-family: monospace">exgErrNoKnownTarget</span> if the specified application is not registered to receive the specified data type. 
</p>
<h4 class="RefSide">
  <a name="1234793"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234794"> </a>This function sets the default application that receives data of a certain type when no target is specified and the default exchange library that handles URLs with a certain prefix if no library reference number is specified. 
</p>
<p class="Body">
  <a name="1234795"> </a>Palm<sup>&#8482;</sup> strongly recommends that applications allow the user to determine which application should become the default recipient for a data type. To do so, an application can use <a href="ExchangeManager.html#1234003"><span style="font-family: monospace">ExgGetRegisteredApplications</span></a> to get the list of applications registered for the same type of data as it is, and then display a dialog listing those applications and allow the user to select it. Then it should call <span style="font-family: monospace">ExgSetDefaultApplication</span> with the user-specified default. 
</p>
<p class="Body">
  <a name="1234799"> </a>If you call <span style="font-family: monospace">ExgSetDefaultApplication</span> with an application or library that is already the default, this function has no effect. 
</p>
<p class="Body">
  <a name="1234800"> </a>An application can become the default for its own creator ID even if it has not specifically registered to receive its own creator ID. That is, suppose several applications are registered to receive objects targeted for the ToDo application's creator ID. The ToDo application itself is not registered for its own creator ID, as it is not necessary to do so. However, an application can use code like the following to set the ToDo application as the default for its own creator ID. 
</p>
<pre  class="Preformatted">
<span style="font-family: monospace">Char toDoCreatorStr[5];</span><a name="1234801"> </a>
<span style="font-family: monospace">MemMove(toDoCreatorStr, sysFileCToDo, 4);</span><a name="1234802"> </a>
toDoCreatorStr[4] = chrNull;<a name="1234803"> </a>
ExgSetDefaultApplication(sysFileCToDo, <a name="1234804"> </a>
  exgRegCreatorID, <span style="font-family: monospace">toDoCreatorStr</span>); <a name="1234805"> </a>
</pre>
<h4 class="RefSide">
  <a name="1234806"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1234810"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present.
</p>
<h4 class="RefSide">
  <a name="1234811"> </a>See Also 
</h4>
<p class="Body">
  <a name="1234818"> </a><a href="ExchangeManager.html#1233946"><span style="font-family: monospace">ExgGetDefaultApplication</span></a>, <a href="ExchangeManager.html#1234538"><span style="font-family: monospace">ExgRegisterDatatype</span></a>
</p>

<h2 class="HaHeadA">
  <a name="1234820"> </a>Application-Defined Functions 
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1234823"> </a>ExgDBDeleteProcPtr
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234824"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234825"> </a>Handles the case where a database with an identical name already exists on the device. 
</p>
<h4 class="RefSide">
  <a name="1234826"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234827"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234828"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234829"> </a>Boolean (*ExgDBDeleteProcPtr) (const char* nameP, UInt16 version, UInt16 cardNo, LocalID dbID, void* userDataP)
</p>
<h4 class="RefSide">
  <a name="1234830"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234831"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">nameP</td><td valign="top"></span>A pointer to the name of the identical database.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234832"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">version</span></td><td valign="top">The version of the identical database.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234833"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">cardNo</span></td><td valign="top">The card number of the identical database.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234834"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dbID</span></td><td valign="top">The database ID of the identical database.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234835"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">userDataP</span></td><td valign="top">The <span style="font-family: monospace">userDataP</span> parameter you passed to <a href="ExchangeManager.html#1233561"><span style="font-family: monospace">ExgDBRead</span></a>. If used, this parameter contains any application-specific data you find necessary. If the <a href="ExchangeManager.html#1234851"><span style="font-family: monospace">ExgDBReadProcPtr</span></a> function is implemented using Exchange Manager calls, this often contains the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234845"> </a>Result 
</h4>
<p class="Body">
  <a name="1234846"> </a>Return <span style="font-family: monospace">true</span> to have the <span style="font-family: monospace">ExgDBRead</span> function continue to read the database. Use this return value if you have deleted or moved the existing database or if you want the database to be overwritten. Return <span style="font-family: monospace">false</span> to have <span style="font-family: monospace">ExgDBRead</span> exit without reading the database.
</p>
<h4 class="RefSide">
  <a name="1234847"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234848"> </a>This function is called if the Data Manager can't create the incoming database because a database with the same name already exists. You should delete the existing database or take some other action, such as changing the database name. It is appropriate to prompt the user before choosing to delete or move the database. 
</p>

<h2 class="HBHeadB">
  <a name="1234851"> </a>ExgDBReadProcPtr
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234852"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234857"> </a>Reads in the database and pass it to <a href="ExchangeManager.html#1233561"><span style="font-family: monospace">ExgDBRead</span></a>.
</p>
<h4 class="RefSide">
  <a name="1234858"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234859"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234860"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234861"> </a>Err (*ExgDBReadProcPtr) (void* dataP, UInt32* sizeP, void* userDataP)
</p>
<h4 class="RefSide">
  <a name="1234862"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234863"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">dataP</span></td><td valign="top">A pointer to a buffer where this function should place the database data. This buffer is allocated in the dynamic heap by <span style="font-family: monospace">ExgDBRead</span>; you don't need to use <a href="DataAndResourceManager.html#1097774"><span style="font-family: monospace">DmWrite</span></a> when filling it.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234867"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">sizeP</span></td><td valign="top">The size of <span style="font-family: monospace">dataP</span>. This value is set by <span style="font-family: monospace">ExgDBRead</span> to the number of bytes it expects to receive in <span style="font-family: monospace">dataP</span>. You must set this value to the number of bytes you return in <span style="font-family: monospace">dataP</span> (if it's not the same).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234868"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">userDataP</span></td><td valign="top">The <span style="font-family: monospace">userDataP</span> parameter you passed to <span style="font-family: monospace">ExgDBRead</span>. Pass the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure if you implement this function using Exchange Manager calls. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234872"> </a>Result 
</h4>
<p class="Body">
  <a name="1234873"> </a>Return an error number, or <span style="font-family: monospace">errNone</span> if there is no error. If this function returns an error, <span style="font-family: monospace">ExgDBRead</span> deletes the database it was creating, cleans up any memory it allocated, then exits, returning the error passed back from this function.
</p>
<h4 class="RefSide">
  <a name="1234874"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234875"> </a><span style="font-family: monospace">ExgDBRead</span> is commonly used to receive a database from a beam or from some other transport mechanism. In this case, an appropriate implementation of this callback function is to call <a href="ExchangeManager.html#1234473"><span style="font-family: monospace">ExgReceive</span></a> as shown here: 
</p>
<pre  class="Preformatted">
Err MyReadDBProc (void *dataP, UInt32 *sizeP, <a name="1234880"> </a>
  void *userDataP) <a name="1234881"> </a>
{<a name="1234882"> </a>
  Err err = errNone;<a name="1234883"> </a>
  //userDataP contains ExgSocketType pointer. <a name="1234884"> </a>
  *sizeP = <a name="1234885"> </a>
    ExgReceive((ExgSocketType *)userDataP, <a name="1234886"> </a>
      dataP, *sizeP, &amp;err);<a name="1234887"> </a>
  return err;<a name="1234888"> </a>
}<a name="1234889"> </a>
</pre>

<h2 class="HBHeadB">
  <a name="1234892"> </a>ExgDBWriteProcPtr
<a href="#1232736"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1234893"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1234894"> </a>Writes out the database.
</p>
<h4 class="RefSide">
  <a name="1234895"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1234896"> </a>ExgMgr.h
</p>
<h4 class="RefSide">
  <a name="1234897"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1234898"> </a>Err (*ExgDBWriteProcPtr) (const void* dataP, UInt32* sizeP, void* userDataP)
</p>
<h4 class="RefSide">
  <a name="1234899"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1234900"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">dataP</span></td><td valign="top">A pointer to a buffer containing the database data, placed there by <a href="ExchangeManager.html#1233629"><span style="font-family: monospace">ExgDBWrite</span></a>.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234904"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">sizeP</span></td><td valign="top">The number of bytes placed in <span style="font-family: monospace">dataP</span> by <span style="font-family: monospace">ExgDBWrite</span>. If you were unable to write out or send all of the data in this chunk, on exit, set <span style="font-family: monospace">sizeP</span> to the number of bytes you did write.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1234905"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">userDataP</span></td><td valign="top">The <span style="font-family: monospace">userDataP</span> parameter you passed to <span style="font-family: monospace">ExgDBWrite</span>. You can use it for application-specific data. Pass the <a href="ExchangeManager.html#1232995"><span style="font-family: monospace">ExgSocketType</span></a> structure if you implement this function using Exchange Manager calls. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1234909"> </a>Result 
</h4>
<p class="Body">
  <a name="1234910"> </a>Return an error number, or <span style="font-family: monospace">errNone</span> if there is no error. If this function returns an error, <span style="font-family: monospace">ExgDBWrite</span> closes the database it was reading, cleans up any memory it allocated, then exits, returning the error passed back from this function.
</p>
<h4 class="RefSide">
  <a name="1234911"> </a>Comments 
</h4>
<p class="Body">
  <a name="1234912"> </a><span style="font-family: monospace">ExgDBWrite</span> is commonly used to write a database that is going to be beamed to another device (or sent through some other transport mechanism). In this case, an appropriate implementation of this callback function is to call <a href="ExchangeManager.html#1234730"><span style="font-family: monospace">ExgSend</span></a> as shown here: 
</p>
<pre  class="Preformatted">
Err MyWriteDBProc (void *dataP, UInt32 *sizeP, <a name="1234917"> </a>
  void *userDataP) <a name="1234918"> </a>
{<a name="1234919"> </a>
  Err err = errNone;<a name="1234920"> </a>
  //userDataP contains ExgSocketType pointer. <a name="1234921"> </a>
  *sizeP = <a name="1234922"> </a>
    ExgSend((ExgSocketType *)userDataP, <a name="1234923"> </a>
      dataP, *sizeP, &amp;err);<a name="1234924"> </a>
  return err;<a name="1234925"> </a>
}<a name="1234926"> </a>
</pre>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Reference_Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>