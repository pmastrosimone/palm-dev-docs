<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Telephony Manager</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:04:23">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1005467"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">10  Telephony Manager</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="Companion2TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="InternetApps.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Companion2IX.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Companion2IX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Companion2Front.html">Palm OS® Programmer's Companion</a></p>
			<p class="SideTOC1-PartTab">Volume II Communications </p>
			<p class="SideTOC1"><a href="TelephonyMgr.html">10  Telephony Manager</a></p>
			
<p class="SideTOC2">
<a href="#1005515">Telephony Service Types
</a></p>

<p class="SideTOC2">
<a href="#1005627">Using the Telephony API
</a></p>

<p class="SideTOC3">
<a href="#1005633">Accessing the Telephony Manager Library
</a></p>

<p class="SideTOC3">
<a href="#1005674">Closing the Telephony Manager Library
</a></p>

<p class="SideTOC3">
<a href="#1005695">Using Synchronous and Asynchronous Calls
</a></p>

<p class="SideTOC3">
<a href="#1005729">Using Data Structures With Variably-sized Fields
</a></p>

<p class="SideTOC3">
<a href="#1005784">Testing the Telephony Environment
</a></p>

<p class="SideTOC2">
<a href="#1005841">Using the Phone Book Capabilities
</a></p>

<p class="SideTOC3">
<a href="#1005868">About the PhBkApp Program
</a></p>

<p class="SideTOC3">
<a href="#1005928">Launching the PhBkApp Program
</a></p>

<p class="SideTOC3">
<a href="#1006002">Event Processing in the PhBkApp Program
</a></p>

<p class="SideTOC3">
<a href="#1006020">Displaying the Phone Book
</a></p>

<p class="SideTOC3">
<a href="#1006077">Retrieving the List of Phone Book Entries
</a></p>

<p class="SideTOC3">
<a href="#1006237">Editing Phone Book Entries
</a></p>

<p class="SideTOC2">
<a href="#1006449">Summary of Telephony Manager
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1005469"> </a>You can use the Palm OS<sup>®</sup> Telephony Manager to access a variety of telephony services in your applications. This chapter contains the following sections that describe how to use the Palm OS Telephony API:
</p>

  <a name="1005473"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1005515">Telephony Service Types</a> describes the component parts of the telephony API.</p>

  <a name="1005477"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1005627">Using the Telephony API</a> describes how to use the telephony API in your applications.</p>

  <a name="1005481"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1005841">Using the Phone Book Capabilities</a> describes the PhBkApp sample program, which provides an excellent example of a program that uses the Telephony Manager.</p>
<p class="Body">
  <a name="1005482"> </a>For detailed information about the Telephony Manager data types, constants, and functions, see the following chapters in the <i>Palm OS Programmer's API Reference</i>:
</p>

  <a name="1005489"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyBasic.html#1311348">Chapter 68, "Telephony Basic Services."</a></p>

  <a name="1005493"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyConfig.html#1327180">Chapter 69, "Telephony Security and Configuration."</a></p>

  <a name="1005497"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyNetwork.html#1330866">Chapter 70, "Telephony Network."</a></p>

  <a name="1005501"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyCalls.html#1335010">Chapter 71, "Telephony Calls."</a></p>

  <a name="1005505"> </a><p class="B1Bullet"> &#8226; <a href="TelephonySMS.html#1344350">Chapter 72, "Telephony SMS."</a></p>

  <a name="1005509"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyPhonebook.html#1358925">Chapter 73, "Telephony Phone Book."</a></p>
<p class="Body">
  <a name="1005513"> </a>The <a href="TelephonyBasic.html#1311348">"Telephony Basic Services"</a> chapter describes the basic services and provides a map to the other functions.
</p>

<h2 class="HaHeadA">
  <a name="1005515"> </a>Telephony Service Types 
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005516"> </a>The telephony API organizes functions within sets called <b>service sets</b>. Each service set contains a related set of functions that may or may not be available on a particular mobile device or network. You can use the <a href="TelephonyBasic.html#1314205"><span style="font-family: monospace">TelIs&lt;ServiceSet&gt;Available</span></a> macro to determine if a service set is supported in the current environment, and you can use the <a href="TelephonyBasic.html#1314134"><span style="font-family: monospace">TelIs&lt;FunctionName&gt;Supported</span></a> macro to determine if a specific function is supported in the current environment.
</p>
<div class="NINoteImportant"><hr>
  <a name="1005523"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> Sometimes a service set is supported, but not all of the functions in that service set are supported. See <a href="TelephonyMgr.html#1005784">Testing the Telephony Environment</a> for more information.
<hr>
</div>
<p class="Body">
  <a name="1005527"> </a>Each function in the telephony API is prefixed with <span style="font-family: monospace">Tel</span>; each telephony service set adds an addition 3 characters to the prefix. <a href="TelephonyMgr.html#1005537">Table 10.1</a> describes the telephony service sets.

<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="1005537"> </a><div class="TableTitle">Table 10.1  Telephony API service sets </div></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1005543"> </a><div class="CellHeading">Service set</div></th>
    <th><a name="1005545"> </a><div class="CellHeading">Functionality</div></th>
    <th><a name="1005547"> </a><div class="CellHeading">Service prefix</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1005549"> </a><div class="CellBody">Basic</div></td>
    <td><a name="1005551"> </a><div class="CellBody">Basic functions that are always available</div></td>
    <td><a name="1005553"> </a><div class="CellBody"><span style="font-family: monospace">Tel</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005555"> </a><div class="CellBody">Configuration</div></td>
    <td><a name="1005557"> </a><div class="CellBody">Services that allow you to configure phones, including SMS configuration.</div></td>
    <td><a name="1005559"> </a><div class="CellBody"><span style="font-family: monospace">TelCfg</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005561"> </a><div class="CellBody">Data calls</div></td>
    <td><a name="1005563"> </a><div class="CellBody">Data call handling</div></td>
    <td><a name="1005565"> </a><div class="CellBody"><span style="font-family: monospace">TelDtc</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005567"> </a><div class="CellBody">Emergency calls</div></td>
    <td><a name="1005569"> </a><div class="CellBody">Emergency call handling</div></td>
    <td><a name="1005571"> </a><div class="CellBody"><span style="font-family: monospace">TelEmc</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005573"> </a><div class="CellBody">Information</div></td>
    <td><a name="1005575"> </a><div class="CellBody">Functions to retrieve information about the current phone.</div></td>
    <td><a name="1005577"> </a><div class="CellBody"><span style="font-family: monospace">TelInf</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005579"> </a><div class="CellBody">Network</div></td>
    <td><a name="1005581"> </a><div class="CellBody">Functions the provide network-oriented services, including authorized networks, current network, signal level, and search mode information</div></td>
    <td><a name="1005583"> </a><div class="CellBody"><span style="font-family: monospace">TelNwk</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005585"> </a><div class="CellBody">OEM</div></td>
    <td><a name="1005587"> </a><div class="CellBody">Functions that allow hardware manufacturers to extend the Telephony Manager. Each manufacturer can provide a specific set of OEM functions for a particular device</div></td>
    <td><a name="1005589"> </a><div class="CellBody"><span style="font-family: monospace">TelOem</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005591"> </a><div class="CellBody">Phone book</div></td>
    <td><a name="1005593"> </a><div class="CellBody">Functions to access the phone's SIM and address book, including the ability to create, view, and delete phone book entries.</div></td>
    <td><a name="1005595"> </a><div class="CellBody"><span style="font-family: monospace">TelPhb</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005597"> </a><div class="CellBody">Power</div></td>
    <td><a name="1005599"> </a><div class="CellBody">Power supply level functions.</div></td>
    <td><a name="1005601"> </a><div class="CellBody"><span style="font-family: monospace">TelPow</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005603"> </a><div class="CellBody">Security</div></td>
    <td><a name="1005605"> </a><div class="CellBody">Functions that provide PIN code management and related services for phone and SIM security-related features</div></td>
    <td><a name="1005607"> </a><div class="CellBody"><span style="font-family: monospace">TelSty</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005609"> </a><div class="CellBody">Short Message Service</div></td>
    <td><a name="1005611"> </a><div class="CellBody">Services to handle Short Message Service (SMS) and to enable the reading, sending, and deleting of short messages</div></td>
    <td><a name="1005613"> </a><div class="CellBody"><span style="font-family: monospace">TelSms</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005615"> </a><div class="CellBody">Sound</div></td>
    <td><a name="1005617"> </a><div class="CellBody">Phone sound management, including the playing of key tones and muting.</div></td>
    <td><a name="1005619"> </a><div class="CellBody"><span style="font-family: monospace">TelSnd</span></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1005621"> </a><div class="CellBody">Speech calls</div></td>
    <td><a name="1005623"> </a><div class="CellBody">Functions to handle the sending and receiving of speech calls. This service also includes functions that handle DTMF.</div></td>
    <td><a name="1005625"> </a><div class="CellBody"><span style="font-family: monospace">TelSpc</span></div></td>
  </tr>
</table>




</p>

<h2 class="HaHeadA">
  <a name="1005627"> </a>Using the Telephony API 
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005628"> </a>This section provides examples excerpted from the Phone Book Application (<span style="font-family: monospace">PhBkApp</span>) sample program, which provides the following capabilities:
</p>

  <a name="1005629"> </a><p class="B1Bullet"> &#8226; creates, modifies, and deletes entries on a phone, using the SIM and built-in storage on the phone device</p>

  <a name="1005630"> </a><p class="B1Bullet"> &#8226; imports entries from the Address Book application</p>

  <a name="1005631"> </a><p class="B1Bullet"> &#8226; exports entries to the Address Book application</p>
<p class="Body">
  <a name="1005632"> </a>The <span style="font-family: monospace">PhBkApp</span> program opens and accesses the Telephony Manager library and makes a number of calls into the library. It provides an excellent example of using telephony services in your applications.
</p>

<h2 class="HBHeadB">
  <a name="1005633"> </a>Accessing the Telephony Manager Library
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005634"> </a>Before you can use the Telephony Manager library, you must load the library and obtain a reference number for it. Each of the functions in the library requires a reference number argument, which is used with the system code to access a shared library.
</p>
<p class="Body">
  <a name="1005635"> </a>Each of the functions in the library also requires an application attachment identifier, which you can obtain by calling the <a href="TelephonyBasic.html#1313682"><span style="font-family: monospace">TelOpen</span></a> function.
</p>
<p class="Body">
  <a name="1005639"> </a>The example function <span style="font-family: monospace">LoadTelMgrLibrary</span>, which is shown in <a href="TelephonyMgr.html#1005644">Listing 10.1</a>, makes sure that the Telephony Manager library is loaded, obtains an application attachment identifier, and returns a reference number for it.
</p>
<p class="CCodeCaption">
  <a name="1005644"> </a>Listing 10.1  Loading the Telephony Manager library
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err LoadTelMgrLibrary(UInt16 *telRefNumP, UInt16 *telAppIdP)<a name="1005645"> </a>
{<a name="1005646"> </a>
   Err err;<a name="1005647"> </a>
   <a name="1005648"> </a>
   err = SysLibFind(kTelMgrLibName, telRefNumP);<a name="1005649"> </a>
   if (err != errNone)<a name="1005650"> </a>
   {<a name="1005651"> </a>
      err = SysLibLoad(kTelMgrDatabaseType,<a name="1005652"> </a>
                    kTelMgrDatabaseCreator, telRefNumP);<a name="1005653"> </a>
      if (err)<a name="1005654"> </a>
         return err;<a name="1005655"> </a>
   }<a name="1005656"> </a>
   <a name="1005657"> </a>
   err = TelOpen(*telRefNumP, kTelMgrVersion, telAppIdP);<a name="1005658"> </a>
   return err;<a name="1005659"> </a>
}<a name="1005660"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1005664"> </a>The <span style="font-family: monospace">LoadTelMgrLibrary</span> function first calls the <a href="SystemManager.html#1166164"><span style="font-family: monospace">SysLibFind</span></a> function to determine if the library has already been loaded, which might be the case if your code has been called by another application that has already loaded the library.
</p>
<p class="Body">
  <a name="1005665"> </a>If the library has not already been loaded, <span style="font-family: monospace">LoadTelMgrLibrary</span> calls the <a href="SystemManager.html#1166207"><span style="font-family: monospace">SysLibLoad</span></a> function to load the library and obtain a reference number for it.
</p>
<p class="Body">
  <a name="1005669"> </a>After obtaining a reference number for the library, <span style="font-family: monospace">LoadTelMgrLibrary</span> calls the <a href="TelephonyBasic.html#1313682"><span style="font-family: monospace">TelOpen</span></a> function to open the loaded library.
</p>

<h2 class="HBHeadB">
  <a name="1005674"> </a>Closing the Telephony Manager Library
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005675"> </a>When you are done with the library, you should close it by calling the <a href="TelephonyBasic.html#1312590"><span style="font-family: monospace">TelClose</span></a> function, which releases any resources associated with your use of the Telephony Manager. 
</p>
<p class="Body">
  <a name="1005682"> </a>As shown in <a href="TelephonyMgr.html#1005687">Listing 10.2</a>, you must test the return value of the <span style="font-family: monospace">TelClose</span> function; if the result is not <span style="font-family: monospace">telErrLibStillInUse</span>, you must unload the shared library by calling the <a href="SystemManager.html#1166237"><span style="font-family: monospace">SysLibRemove</span></a> function.
</p>
<p class="CCodeCaption">
  <a name="1005687"> </a>Listing 10.2  Closing the Telephony Manager library
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err UnloadTelMgrLibrary(UInt16 telRefNum, UInt16 telAppId)<a name="1005688"> </a>
{<a name="1005689"> </a>
   if ((TelClose(telRefNum, telAppId)!= telErrLibStillInUse))<a name="1005690"> </a>
      SysLibRemove(telRefNum);<a name="1005691"> </a>
 <a name="1005692"> </a>
   return errNone;<a name="1005693"> </a>
}<a name="1005694"> </a>
</pre><div class="CodeRule"><hr></div>

<h2 class="HBHeadB">
  <a name="1005695"> </a>Using Synchronous and Asynchronous Calls
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005696"> </a>Almost all of the telephony API functions can be called either synchronously or asynchronously. If you call a function asynchronously, your application receives an event to notify it that the function has completed; the event that you receive contains status and other information returned by the function.
</p>
<p class="Body">
  <a name="1005697"> </a>This section provides a simple example of calling the <span style="font-family: monospace">TelPhbAddEntry</span> function both synchronously and asynchronously to illustrate the difference. 
</p>
<p class="Body">
  <a name="1005698"> </a>When you call a function synchronously, you need to test the result value returned by the function to determine if the call was successful. For example, the code in <a href="TelephonyMgr.html#1005703">Listing 10.3</a> calls the <span style="font-family: monospace">TelPhAddEntry</span> function synchronously.
</p>
<p class="CCodeCaption">
  <a name="1005703"> </a>Listing 10.3  Calling a function synchronously
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
   err = TelPhbAddEntry(gPrefsP-&gt;telRefNum, 
                         gPrefsP-&gt;telAppID, &amp;gEntry, NULL);<a name="1005704"> </a>
   printf("Result of adding entry is %d", err);<a name="1005705"> </a>
 <a name="1005706"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1005707"> </a>To call the same function asynchronously, you specify a transaction ID in the call, instead of specifying <span style="font-family: monospace">NULL</span> as the last argument. The transaction ID (transId in <a href="TelephonyMgr.html#1005712">Listing 10.4</a>) is an unsigned integer value that is filled in with a value associated with the asynchronous operation that is begun. This same ID value is found in the <span style="font-family: monospace">transId</span> field of event you receive when the operation completes.
</p>
<p class="CCodeCaption">
  <a name="1005712"> </a>Listing 10.4  Calling a function asynchronously
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
err = TelPhbAddEntry(gPrefsP-&gt;telRefNum,<a name="1005713"> </a>
                      gPrefsP-&gt;telAppID, &amp;gEntry, &amp;transId);<a name="1005714"> </a>
 <a name="1005715"> </a>
 <a name="1005716"> </a>
static void ProcessTelephonyEvent(TelEventType *eventP)<a name="1005717"> </a>
{<a name="1005718"> </a>
   switch( eventP-&gt;functionId )<a name="1005719"> </a>
   {<a name="1005720"> </a>
...<a name="1005721"> </a>
      case kTelPhbAddEntryMessage:<a name="1005722"> </a>
         printf("Result of adding entry is %d",<a name="1005723"> </a>
                                           eventP-&gt;returnCode);<a name="1005724"> </a>
         break;<a name="1005725"> </a>
...<a name="1005726"> </a>
   }<a name="1005727"> </a>
 <a name="1005728"> </a>
</pre><div class="CodeRule"><hr></div>

<h2 class="HBHeadB">
  <a name="1005729"> </a>Using Data Structures With Variably-sized Fields
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005730"> </a>Many of the telephony functions use data structures that have variably-sized buffer fields. For example, the <a href="TelephonyPhonebook.html#1359479"><span style="font-family: monospace">TelPhbGetEntry</span></a> function uses the <a href="TelephonyPhonebook.html#1358953"><span style="font-family: monospace">TelPhbEntryType</span></a> structure, which contains two such fields.
</p>
<pre  class="Preformatted">
typedef struct _TelPhbEntryType<a name="1005737"> </a>
{<a name="1005738"> </a>
   UInt16   phoneIndex;<a name="1005739"> </a>
   Char*    fullName;<a name="1005740"> </a>
   UInt8    fullNameSize; <a name="1005741"> </a>
   Char*    dialNumber;<a name="1005742"> </a>
   UInt8    dialNumberSize;<a name="1005743"> </a>
} TelPhbEntryType;<a name="1005744"> </a>
</pre>
<p class="Body">
  <a name="1005745"> </a>The <span style="font-family: monospace">fullName</span> and <span style="font-family: monospace">dialNumber</span> buffers are variable-sized strings that you allocate in the heap. When you initialize one of these structures to pass to the <a href="TelephonyPhonebook.html#1359479"><span style="font-family: monospace">TelPhbGetEntry</span></a> function, you must preallocate the buffers and store the allocated size in the corresponding size fields. 
</p>
<p class="Body">
  <a name="1005749"> </a>The following code sample initializes a <span style="font-family: monospace">TelPhbEntryType</span> data structure and passes it to the <span style="font-family: monospace">TelPhbGetEntry</span> function to retrieve an entry from the phone book. 
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define maxNameSize         45<a name="1005750"> </a>
#define maxNumSize          20<a name="1005751"> </a>
TelPhbEntryType myEntry;<a name="1005752"> </a>
UInt16 theIndex = 1;<a name="1005753"> </a>
 <a name="1005754"> </a>
myEntry.phoneIndex =             theIndex;<a name="1005755"> </a>
myEntry.fullName =               MemPtrNew(maxNameSize);<a name="1005756"> </a>
myEntry.fullNameSize =           maxNameSize;<a name="1005757"> </a>
myEntry.dialNumber =             MemPtrNew(maxNumSize);<a name="1005758"> </a>
myEntry.dialNumberSize =         maxNumSize;<a name="1005759"> </a>
 <a name="1005760"> </a>
err = TelPhbGetEntry(gPrefs-&gt;telRefNum, gPrefsP-&gt;telAppId,<a name="1005761"> </a>
                          &amp;myEntry, NULL);<a name="1005762"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1005766"> </a>Note that you can call the <a href="TelephonyPhonebook.html#1359614"><span style="font-family: monospace">TelPhbGetEntryMaxSizes</span></a> function to retrieve the maximum name size (in addition to other information) instead of hardcoding it, as done in the above example.
</p>
<p class="Body">
  <a name="1005767"> </a>Upon return from the function, the buffer fields are filled in, and the size fields contain the actual number of bytes that were stored into the buffer fields. 
</p>
<p class="Body">
  <a name="1005768"> </a>If the allocated size of a buffer is not large enough to contain the entire value, the command function does the following:
</p>

  <a name="1005769"> </a><p class="B1Bullet"> &#8226; Returns the <span style="font-family: monospace">telErrBufferSize</span> error.</p>

  <a name="1005770"> </a><p class="B1Bullet"> &#8226; Fills the buffer with as much data as it can, and truncates the data that does not fit. If the data ends with a null terminator and is truncated, the null terminator is retained.</p>

  <a name="1005771"> </a><p class="B1Bullet"> &#8226; Sets the value of the size field to the actual size required to contain all of the data.</p>
<p class="Body">
  <a name="1005772"> </a>Note that for string buffers, the size includes the byte required for the null terminator character.
</p>
<div class="NINoteImportant"><hr>
  <a name="1005781"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> When you call a function asynchronously, the <span style="font-family: monospace">telErrBufferSize</span> error is returned in the <span style="font-family: monospace">returnCode</span> field of the event you receive upon completion of the function's execution.<br><br>Also, when you call a function asynchronously, it is your responsibility to ensure that any data structure used by the function remains in memory until you receive the completion event.
<hr>
</div>

<h2 class="HBHeadB">
  <a name="1005784"> </a>Testing the Telephony Environment
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005785"> </a>Before running your application, you need to verify that the environment in which it is running (the Palm Powered<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: super">&#8482;</span> handheld and the telephone device) supports the facilities that your application needs. The Telephony Manager allows you to determine if a specific service set is available, and also allows you to determine if a specific function call is supported.
</p>
<p class="Body">
  <a name="1005789"> </a>The code excerpt in <a href="TelephonyMgr.html#1005791">Listing 10.5</a> shows how the <span style="font-family: monospace">PhBkApp</span> program verifies that the environment supports the capabilities that it needs, which include all of the phone book-related features of the Telephony Manager. The <span style="font-family: monospace">PhBkApp</span> program first tests for the availability of the phone book services, and then determines if several specific functions are supported. Note that the <span style="font-family: monospace">PhBkApp</span> refuses to run if any of the capabilities it is using are not available.
</p>
<p class="CCodeCaption">
  <a name="1005791"> </a>Listing 10.5  Testing for the presence of specific capabilities
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
   err = TelIsPhbServiceAvailable(gDataP-&gt;refNum, gDataP-&gt;appId, NULL);<a name="1005792"> </a>
      // Test if phone book capabilities are present<a name="1005793"> </a>
   if (err != errNone)<a name="1005794"> </a>
      return err;<a name="1005795"> </a>
 <a name="1005796"> </a>
      // Check that this phone supports adding entry services<a name="1005797"> </a>
   err = TelIsPhbAddEntrySupported(gDataP-&gt;refNum, gDataP-&gt;appId, NULL);<a name="1005798"> </a>
   if (err != errNone)<a name="1005799"> </a>
      return err;<a name="1005800"> </a>
 <a name="1005801"> </a>
      // Check that this phone supports selecting a phone book<a name="1005802"> </a>
   err = TelIsPhbSelectPhonebookSupported(gDataP-&gt;refNum, gDataP-&gt;appId, NULL);<a name="1005803"> </a>
   if (err != errNone)<a name="1005804"> </a>
      return err;<a name="1005805"> </a>
 <a name="1005806"> </a>
      // Check that this phone supports getting entries<a name="1005807"> </a>
   err = TelIsPhbGetEntriesSupported(gDataP-&gt;refNum, gDataP-&gt;appId, NULL);<a name="1005808"> </a>
   if (err != errNone)<a name="1005809"> </a>
      return err;<a name="1005810"> </a>
 <a name="1005811"> </a>
      // Check that this phone supports getting entry count<a name="1005812"> </a>
   err = TelIsPhbGetEntryCountSupported(gDataP-&gt;refNum, gDataP-&gt;appId, NULL);<a name="1005813"> </a>
   if (err != errNone)<a name="1005814"> </a>
      return err;<a name="1005815"> </a>
 <a name="1005816"> </a>
   // Check that this phone supports deleting an entry<a name="1005817"> </a>
   err = TelIsPhbDeleteEntrySupported(gDataP-&gt;refNum, gDataP-&gt;appId, NULL);<a name="1005818"> </a>
   return err;<a name="1005819"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1005820"> </a>For a complete list of the service availability macros, see <a href="TelephonyBasic.html#1314205"><span style="font-family: monospace">TelIs&lt;ServiceSet&gt;Available</span></a> in <a href="TelephonyBasic.html#1311348">Chapter 68, "Telephony Basic Services,"</a> in <i>Palm OS Programmer's API Reference</i>.
</p>
<p class="Body">
  <a name="1005830"> </a>For more information about determining if a specific function is supported, see <a href="TelephonyBasic.html#1314134"><span style="font-family: monospace">TelIs&lt;FunctionName&gt;Supported</span></a> in <a href="TelephonyBasic.html#1311348">Chapter 68, "Telephony Basic Services,"</a> in <i>Palm OS Programmer's API Reference</i>.
</p>

<h2 class="HaHeadA">
  <a name="1005841"> </a>Using the Phone Book Capabilities 
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005842"> </a>This section describes the implementation of the <span style="font-family: monospace">PhBkApp</span> program, which you can use as a model for implementing your own telephony-based applications. The <span style="font-family: monospace">PhBkApp</span> code is described in the following sections:
</p>

  <a name="1005846"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1005868">About the PhBkApp Program</a> provides an overview of the <span style="font-family: monospace">PhBkApp</span> program user interface.</p>

  <a name="1005850"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1005928">Launching the PhBkApp Program</a> describes the main entry point in the program, which performs initialization and verifies that the environment supports the required telephony services.</p>

  <a name="1005854"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1006002">Event Processing in the PhBkApp Program</a> describes how the program fields events and calls the appropriate functions for each event type.</p>

  <a name="1005858"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1006020">Displaying the Phone Book</a> describes how the <span style="font-family: monospace">PhBkApp</span> program accesses and provides a user interface to the phone book entries in the connected phone.</p>

  <a name="1005862"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1006077">Retrieving the List of Phone Book Entries</a> provides a detailed walkthrough of how <span style="font-family: monospace">PhBkApp</span> retrieves the current entries from one of the phone books on the connected phone.</p>

  <a name="1005866"> </a><p class="B1Bullet"> &#8226; <a href="TelephonyMgr.html#1006237">Editing Phone Book Entries</a> describes how the <span style="font-family: monospace">PhBkApp</span> program makes modifications to the phone book entries in the connected phone.</p>

<h2 class="HBHeadB">
  <a name="1005868"> </a>About the PhBkApp Program
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005869"> </a>The <span style="font-family: monospace">PhBkApp</span> sample program uses Telephony Manager services and provides an interface to the phone book on a connected phone device. 
</p>
<div class="NINoteImportant"><hr>
  <a name="1005870"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> The PhBkApp program makes asynchronous calls to the Telephony Manager, which allows for operations to be cancelled, and allows the program to display progress to the user.
<hr>
</div>
<p class="Body">
  <a name="1005874"> </a>The <span style="font-family: monospace">PhBkApp</span> program uses the simple form shown in <a href="TelephonyMgr.html#1005876">Figure 10.1</a> as its initial interface.
</p>

<p class="FFigureCaption">
  <a name="1005876"> </a>Figure 10.1	 The initial screen of the PhBkApp program
</p>
<p class="FgFigure">
  <a name="1005882"> </a><div align="left"><img src="images/TelephonyMgra.gif" height="187" width="480" border="0" hspace="20" vspace="0">
</div>
</p>
<p class="Body">
  <a name="1005883"> </a>When the user taps the <b>Get List</b> button, <span style="font-family: monospace">PhBkApp</span> reads the entries in the selected phone book (SIM, built-in, or other) on the connected phone, and displays the list to the user. <a href="TelephonyMgr.html#1005888">Figure 10.2</a> shows a sample display of the phone list.
</p>

<p class="FFigureCaption">
  <a name="1005888"> </a>Figure 10.2	 Phone book display in the PhBkApp program
</p>
<p class="FgFigure">
  <a name="1005894"> </a><div align="left"><img src="images/TelephonyMgr2.gif" height="189" width="480" border="0" hspace="20" vspace="0">
</div>
</p>
<p class="FgFigure">
  <a name="1005895"> </a>
</p>
<p class="Body">
  <a name="1005896"> </a>Note that the phone book indicator in the upper right corner of <a href="TelephonyMgr.html#1005888">Figure 10.2</a> shows "Phone," which indicates that the displayed list is the built-in phone book. The user can switch to a different phone book by tapping the arrow and choosing from the popup list.
</p>
<p class="Body">
  <a name="1005900"> </a>The user can tap on an entry in the list to edit or delete that entry. If the user deletes an entry, the list maintains an empty entry in that position, as shown in <a href="TelephonyMgr.html#1005905">Figure 10.3</a>, in which the entry for Harry (the seventh entry) has been deleted.
</p>

<p class="FFigureCaption">
  <a name="1005905"> </a>Figure 10.3	 Phone list with deleted entry
</p>
<p class="FgFigure">
  <a name="1005911"> </a><div align="left"><img src="images/TelephonyMgr3.gif" height="191" width="480" border="0" hspace="20" vspace="0">
</div>
</p>
<p class="Body">
  <a name="1005912"> </a>To create a new entry, or look up an existing entry in the phone book, the user can tap the <b>New</b> button, which displays the editing form shown in <a href="TelephonyMgr.html#1005917">Figure 10.4</a>. 
</p>

<p class="FFigureCaption">
  <a name="1005917"> </a>Figure 10.4	 The phone book entry editing form
</p>
<p class="FgFigure">
  <a name="1005923"> </a><div align="left"><img src="images/TelephonyMgr4.gif" height="190" width="480" border="0" hspace="20" vspace="0">
</div>
</p>
<p class="FgFigure">
  <a name="1005924"> </a>
</p>
<p class="Body">
  <a name="1005925"> </a><span style="font-family: monospace">PhBkApp</span> also displays the editing form when the user taps on an entry.
</p>
<p class="Body">
  <a name="1005926"> </a>The next sections describe how the <span style="font-family: monospace">PhBkApp</span> program implements this interface. 
</p>

<h2 class="HBHeadB">
  <a name="1005928"> </a>Launching the PhBkApp Program
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1005929"> </a>The main entry point for the <span style="font-family: monospace">PhBkApp</span> program, <span style="font-family: monospace">PilotMain</span>, first verifies that the handheld device is version compatible with the program, which means that the device is running version 4.0 or later of the Palm OS. If so, then <span style="font-family: monospace">PilotMain</span>, which is shown in <a href="TelephonyMgr.html#1005941">Listing 10.6</a>, performs the following actions:
</p>

  <a name="1005933"> </a><p class="B1Bullet"> &#8226; Calls <span style="font-family: monospace">PrvPhbkAppStart</span> to start the application. This function creates the database used by <span style="font-family: monospace">PhBkApp</span>, opens the telephony library, and initializes the form that the program uses to display the phone book entries.</p>

  <a name="1005934"> </a><p class="B1Bullet"> &#8226; Calls its main loop, <span style="font-family: monospace">PrvPhbkAppEventLoop</span>, which is described in <a href="TelephonyMgr.html#1006002">Event Processing in the PhBkApp Program</a>.</p>

  <a name="1005938"> </a><p class="B1Bullet"> &#8226; Calls <span style="font-family: monospace">PrvPhbkAppStop</span> to stop the application. This function closes the database and form, and deallocates the storage that <span style="font-family: monospace">PhBkApp</span> allocated for its structures.</p>
<p class="CCodeCaption">
  <a name="1005941"> </a>Listing 10.6  Launching the PhBkApp program
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
UInt32 PilotMain(UInt16 cmd, MemPtr cmdPBP, UInt16 launchFlags)<a name="1005942"> </a>
{<a name="1005943"> </a>
#pragma unused (cmdPBP)<a name="1005944"> </a>
   Err err = errNone;<a name="1005945"> </a>
 <a name="1005946"> </a>
 <a name="1005947"> </a>
   switch (cmd)<a name="1005948"> </a>
   {<a name="1005949"> </a>
      case sysAppLaunchCmdNormalLaunch:<a name="1005950"> </a>
         err = PrvPhbkAppRomVersionCompatible(kPhbkMinVersion, launchFlags);<a name="1005951"> </a>
         if (err != errNone) <a name="1005952"> </a>
            return (err);<a name="1005953"> </a>
 <a name="1005954"> </a>
         err = PrvPhbkAppStart();<a name="1005955"> </a>
         if (err == errNone) <a name="1005956"> </a>
            PrvPhbkAppEventLoop();<a name="1005957"> </a>
         PrvPhbkAppStop();<a name="1005958"> </a>
         break;<a name="1005959"> </a>
 <a name="1005960"> </a>
      default:<a name="1005961"> </a>
         break;<a name="1005962"> </a>
 <a name="1005963"> </a>
   }<a name="1005964"> </a>
   <a name="1005965"> </a>
   return 0;<a name="1005966"> </a>
}<a name="1005967"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1005968"> </a>Note that <span style="font-family: monospace">PilotMain</span> passes a version value to the <span style="font-family: monospace">RomVersionCompatible</span> function. This value is defined as follows:
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define kPhbkMinVersion sysMakeROMVersion(4,0,0,sysROMStageDevelopment,0)<a name="1005969"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1005970"> </a>The <span style="font-family: monospace">PrvPhbkAppRomVersionCompatible</span> function, which is shown in <a href="TelephonyMgr.html#1005976">Listing 10.7</a>, determines if the device has a compatible ROM, returning <span style="font-family: monospace">0</span> if so.
</p>
<p class="CCodeCaption">
  <a name="1005976"> </a>Listing 10.7  The PrvPhbkAppRomVersionCompatible function
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
static Err PrvPhbkAppRomVersionCompatible(UInt32 requiredVersion, UInt16 launchFlags)<a name="1005977"> </a>
{<a name="1005978"> </a>
   UInt32 romVersion;<a name="1005979"> </a>
 <a name="1005980"> </a>
   FtrGet(sysFtrCreator, sysFtrNumROMVersion, &amp;romVersion);<a name="1005981"> </a>
   if (romVersion &lt; requiredVersion)<a name="1005982"> </a>
   {<a name="1005983"> </a>
      if ((launchFlags &amp; (sysAppLaunchFlagNewGlobals | sysAppLaunchFlagUIApp))<a name="1005984"> </a>
                        ==(sysAppLaunchFlagNewGlobals | sysAppLaunchFlagUIApp))<a name="1005985"> </a>
      {<a name="1005986"> </a>
         ErrNonFatalDisplay("Incompatible ROM");<a name="1005987"> </a>
         // Palm OS 1.0 will continuously relaunch this app unless we switch to <a name="1005988"> </a>
         // another safe one.<a name="1005989"> </a>
         if (romVersion &lt; sysMakeROMVersion(2,0,0,sysROMStageRelease,0))<a name="1005990"> </a>
        {<a name="1005991"> </a>
         AppLaunchWithCommand(sysFileCDefaultApp, sysAppLaunchCmdNormalLaunch,<a name="1005992"> </a>
                                      NULL);<a name="1005993"> </a>
        }<a name="1005994"> </a>
      }<a name="1005995"> </a>
      <a name="1005996"> </a>
      return (sysErrRomIncompatible);<a name="1005997"> </a>
   }<a name="1005998"> </a>
   return 0;  //ROM is compatible<a name="1005999"> </a>
}<a name="1006000"> </a>
</pre><div class="CodeRule"><hr></div>

<h2 class="HBHeadB">
  <a name="1006002"> </a>Event Processing in the PhBkApp Program
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1006003"> </a>The main loop of the <span style="font-family: monospace">PhBkApp</span> program processes events for the program, branching to the appropriate functions when certain events arrive. This is a standard event loop, as described in <a href="EventLoop.html#977590">The Application Event Loop</a> in <a href="EventLoop.html#977418">Chapter 3, "Event Loop."</a>
</p>
<p class="Body">
  <a name="1006010"> </a>The <span style="font-family: monospace">PhBkApp</span> main loop function, <span style="font-family: monospace">PrvPhbkAppEventLoop</span>, calls the <span style="font-family: monospace">PrvPhbkAppHandleEvent</span> function to process <span style="font-family: monospace">PhBkApp</span> events, which pertain to one of two forms:
</p>

  <a name="1006011"> </a><p class="B1Bullet"> &#8226; The List form displays the list of numbers in the phone book. List form handling is described in <a href="TelephonyMgr.html#1006020">Displaying the Phone Book</a>.</p>

  <a name="1006015"> </a><p class="B1Bullet"> &#8226; The Edit form allows the user to edit an entry in the phone book. Edit form handling is described in <a href="TelephonyMgr.html#1006237">Editing Phone Book Entries</a>.</p>

<h2 class="HBHeadB">
  <a name="1006020"> </a>Displaying the Phone Book
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1006021"> </a>The <span style="font-family: monospace">PhBkApp</span> list form manages display of the phone book entries. The <span style="font-family: monospace">PrvPhbkListFormDoCommand</span> function processes user command events in this form, which include:
</p>

  <a name="1006022"> </a><p class="B1Bullet"> &#8226; The form's menu commands:</p>
  <a name="1006023"> </a><p class="B2BulletSub"> -	 When the user taps the <b>About Phone Book</b> command, <span style="font-family: monospace">PhBkApp</span> displays an about screen.</p>  <a name="1006024"> </a><p class="B2BulletSub"> -	 When the user taps the <b>Export to Address Book</b> command, <span style="font-family: monospace">PhBkApp</span> uses the UDA and PDI interfaces to export a category from the phone book to the Palm Powered handheld's address book. </p><p class="Indented2"> <a name="1006025"> </a>For more information about the PDI library, see <a href="PersonalDataInterchange.html#978818">Chapter 3, "Personal Data Interchange."</a></p>

  <a name="1006029"> </a><p class="B1Bullet"> &#8226; Selection of items in the list for editing.</p>

  <a name="1006030"> </a><p class="B1Bullet"> &#8226; Handling of the phone book selection control, which the user can tap to pick from among the phone books available on the device. For example, most phones feature a phone book stored on the SIM and a phone book in the phone's memory.</p>

  <a name="1006031"> </a><p class="B1Bullet"> &#8226; Standard form handling, including scrolling and key handling.</p>

  <a name="1006032"> </a><p class="B1Bullet"> &#8226; Retrieving of the phone book entries from the connected phone when the user taps the <b>Get List</b> button, as described in <a href="TelephonyMgr.html#1006077">Retrieving the List of Phone Book Entries</a>.</p>

  <a name="1006036"> </a><p class="B1Bullet"> &#8226; Adding a new entry in <span style="font-family: monospace">PhBkApp's</span> database and displaying the Edit form to insert values into the fields in the new entry when the user taps the <b>New</b> button or double-taps an empty entry in the list. For more information, see <a href="TelephonyMgr.html#1006237">Editing Phone Book Entries</a>.</p>
<p class="Body">
  <a name="1006043"> </a><a href="TelephonyMgr.html#1006045">Listing 10.8</a> shows the <span style="font-family: monospace">PrvPhbkListFormDoCommand</span>, which processes form commands.
</p>
<p class="CCodeCaption">
  <a name="1006045"> </a>Listing 10.8  Processing phone list form commands
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
static Boolean PrvPhbkListFormDoCommand( DmResID cmdId )<a name="1006046"> </a>
{<a name="1006047"> </a>
   switch (cmdId)<a name="1006048"> </a>
   {<a name="1006049"> </a>
      case PhbkListGetButton:<a name="1006050"> </a>
         PhbkGetList();<a name="1006051"> </a>
         break;<a name="1006052"> </a>
   <a name="1006053"> </a>
      case PhbkListNewButton:<a name="1006054"> </a>
         gAction = kPhbkActionNew;<a name="1006055"> </a>
         PrvPhbkListFormNewEntry();<a name="1006056"> </a>
         break;<a name="1006057"> </a>
   <a name="1006058"> </a>
      case MenuExporttoAddressBook:<a name="1006059"> </a>
         if ((gStorage[gCurCategory].canEdit == true) <a name="1006060"> </a>
            &amp;&amp; (gStorage[gCurCategory].entryCount != 0))<a name="1006061"> </a>
            if (!HostGremlinIsRunning())<a name="1006062"> </a>
               TransferExportCategory(gCurCategory);<a name="1006063"> </a>
         break;<a name="1006064"> </a>
         <a name="1006065"> </a>
      case MenuAboutPhoneBook:<a name="1006066"> </a>
         MenuEraseStatus(0);<a name="1006067"> </a>
         AbtShowAbout(kPhbkAppCreator);<a name="1006068"> </a>
         break;<a name="1006069"> </a>
        <a name="1006070"> </a>
      default:<a name="1006071"> </a>
         return false;<a name="1006072"> </a>
   }<a name="1006073"> </a>
   return true;<a name="1006074"> </a>
}<a name="1006075"> </a>
</pre><div class="CodeRule"><hr></div>

<h2 class="HBHeadB">
  <a name="1006077"> </a>Retrieving the List of Phone Book Entries
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1006078"> </a>The <span style="font-family: monospace">PhBkApp</span> program retrieves the entries in the selected phone book by calling the <span style="font-family: monospace">PhbkGetList</span> function, which is shown in <a href="TelephonyMgr.html#1006084">Listing 10.9</a>. This function displays a progress bar and calls the <span style="font-family: monospace">PrvPhbkGetListHandleEvent</span> function to read phone book entries and store them in the linked list managed by <span style="font-family: monospace">PhBkApp</span>.
</p>
<p class="CCodeCaption">
  <a name="1006084"> </a>Listing 10.9  Retrieving the phone book entries
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err PhbkGetList( void )<a name="1006085"> </a>
{	<a name="1006086"> </a>
   Err err;<a name="1006087"> </a>
   EventType evt;<a name="1006088"> </a>
   Boolean handled = false;<a name="1006089"> </a>
   UInt16 linkedListCount;<a name="1006090"> </a>
   <a name="1006091"> </a>
   err = PrvPhbkGetListStart();<a name="1006092"> </a>
   if (err)<a name="1006093"> </a>
      return err;<a name="1006094"> </a>
      <a name="1006095"> </a>
   gStorage[gCurCategory].canEdit = true;<a name="1006096"> </a>
 <a name="1006097"> </a>
   do<a name="1006098"> </a>
   {<a name="1006099"> </a>
      TelGetEvent(gDataP-&gt;refNum, gDataP-&gt;appId, &amp;evt, kPhbkMidBallRefreshRate);<a name="1006100"> </a>
      PrgHandleEvent(gDataP-&gt;prgP, &amp;evt);<a name="1006101"> </a>
      PrvPhbkGetListHandleEvent(&amp;evt);<a name="1006102"> </a>
 <a name="1006103"> </a>
      if (gDataP-&gt;prgP == 0)<a name="1006104"> </a>
         gDataP-&gt;exit = true;<a name="1006105"> </a>
         <a name="1006106"> </a>
      // When a phone UI error dialog is displayed, progress is closed<a name="1006107"> </a>
      if ( (gDataP-&gt;prgP != 0) &amp;&amp; ( (gDataP-&gt;prgP-&gt;stage ==<a name="1006108"> </a>
kPhbkStageClosingConnection) || PrgUserCancel(gDataP-&gt;prgP) || ( evt.eType ==<a name="1006109"> </a>
appStopEvent) ) )<a name="1006110"> </a>
      {<a name="1006111"> </a>
         if (PrgUserCancel(gDataP-&gt;prgP))<a name="1006112"> </a>
         {<a name="1006113"> </a>
            gStorage[gCurCategory].canEdit = false;<a name="1006114"> </a>
            PhbkTelMgrCancel();<a name="1006115"> </a>
         }<a name="1006116"> </a>
         gDataP-&gt;exit = true;<a name="1006117"> </a>
      }<a name="1006118"> </a>
      <a name="1006119"> </a>
      linkedListCount = PhbkToolsLinkedListCount();<a name="1006120"> </a>
   } while (!(gDataP-&gt;exit) &amp;&amp; (linkedListCount));<a name="1006121"> </a>
                              // Close the progress if not done before<a name="1006122"> </a>
   PrvPhbkGetListPrgClose();<a name="1006123"> </a>
 <a name="1006124"> </a>
   FrmUpdateForm(FrmGetActiveFormID(), frmRedrawUpdateCode);<a name="1006125"> </a>
   return errNone;<a name="1006126"> </a>
}<a name="1006127"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="1006128"> </a>The <span style="font-family: monospace">PhBkApp</span> program uses a progression of states to manage retrieving phone book entries from the connected device. When it enters into a state, the program updates the progress dialog and sends an asynchronous request to the Telephony Manager.
</p>
<div class="NINoteImportant"><hr>
  <a name="1006129"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> The functions mentioned in this section are found in the <span style="font-family: monospace">PhBkGetList</span> module, the <span style="font-family: monospace">PhBkTelMgr</span> module, or in the Telephony Manager API.
<hr>
</div>
<p class="Body">
  <a name="1006130"> </a>The <span style="font-family: monospace">PrvPhbkGetListHandleEvent</span> function processes the events returned from the Telephony Manager. When it receives a response back from a previous request, <span style="font-family: monospace">PrvPhbkGetListHandleEvent</span> transitions to the next state, performs whatever tasks go along with entering that state, and sends the next request to the Telephony Manager.
</p>
<p class="Body">
  <a name="1006134"> </a><a href="TelephonyMgr.html#1006141">Table 10.2</a> shows the progression of states used to retrieve phone book entries. 
</p>

<h5 class="TgTable">
  <a name="1006197"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="1006141"> </a><div class="TableTitle">Table 10.2  Phone book list retrieval states </div></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1006147"> </a><div class="CellHeading">#</div></th>
    <th><a name="1006149"> </a><div class="CellHeading">State name constant</div></th>
    <th><a name="1006151"> </a><div class="CellHeading">Description of state</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1006153"> </a><div class="CellBody">1.</div></td>
    <td><a name="1006155"> </a><div class="CellBody"><span style="font-family: monospace">kPhbkStageConnecting</span></div></td>
    <td><a name="1006157"> </a><div class="CellBody"><span style="font-family: monospace">PhBkApp</span> is opening a connection to the phone device; a call to <a href="TelephonyBasic.html#1313714"><span style="font-family: monospace">TelOpenPhoneConnection</span></a> is pending.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006162"> </a><div class="CellBody">2.</div></td>
    <td><a name="1006164"> </a><div class="CellBody"><span style="font-family: monospace">kPhbkStageSelectingPhonebook</span></div></td>
    <td><a name="1006166"> </a><div class="CellBody"><span style="font-family: monospace">PhBkApp</span> is selecting the current phone book (such as SIM or built-in); a call to <a href="TelephonyPhonebook.html#1359742"><span style="font-family: monospace">TelPhbSelectPhonebook</span></a> is pending.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006171"> </a><div class="CellBody">3.</div></td>
    <td><a name="1006173"> </a><div class="CellBody"><span style="font-family: monospace">kPhbkStageGettingPhonebookInfo</span></div></td>
    <td><a name="1006175"> </a><div class="CellBody"><span style="font-family: monospace">PhBkApp</span> is retrieving information about the entries in the selected phone book; a call to <a href="TelephonyPhonebook.html#1359548"><span style="font-family: monospace">TelPhbGetEntryCount</span></a> is pending.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006180"> </a><div class="CellBody">4.</div></td>
    <td><a name="1006182"> </a><div class="CellBody"><span style="font-family: monospace">kPhbkStageGettingEntries</span></div></td>
    <td><a name="1006184"> </a><div class="CellBody"><span style="font-family: monospace">PhBkApp</span> is retrieving entries from the selected phone book; a call to <a href="TelephonyPhonebook.html#1359398"><span style="font-family: monospace">TelPhbGetEntries</span></a> is pending.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006189"> </a><div class="CellBody">5.</div></td>
    <td><a name="1006191"> </a><div class="CellBody"><span style="font-family: monospace">kPhbkStageClosingConnection</span></div></td>
    <td><a name="1006193"> </a><div class="CellBody"><span style="font-family: monospace">PhBkApp</span> is closing the connection with the phone device; a call to <a href="TelephonyBasic.html#1312612"><span style="font-family: monospace">TelClosePhoneConnection</span></a> is pending.</div></td>
  </tr>
</table>




</h5><p class="Body">
  <a name="1006198"> </a>Each state transition involves updating the progress dialog display, so <span style="font-family: monospace">PhBkApp</span> signals the transitions by passing the new state to the <span style="font-family: monospace">PrgUpdateDialog</span> function, which passes the state onto the progress dialog's callback function, <span style="font-family: monospace">PrvPhbkGetListCallback</span>. 
</p>

<h4 class="HCHeadC">
  <a name="1006199"> </a>Connecting with the Phone
</h4>
<p class="Body">
  <a name="1006200"> </a>When the user taps the <b>Get List</b> button, the <span style="font-family: monospace">PrvPhbkGetListStart</span> function form code initializes the progress dialog display and:
</p>

  <a name="1006201"> </a><p class="B1Bullet"> &#8226; sets the current state to <span style="font-family: monospace">kPhbkStageConnecting</span></p>

  <a name="1006202"> </a><p class="B1Bullet"> &#8226; calls the <span style="font-family: monospace">PhbkTelMgrConnect</span> function, which issues an asynchronous call to the <a href="TelephonyBasic.html#1313714"><span style="font-family: monospace">TelOpenPhoneConnection</span></a> telephony function</p>

<h4 class="HCHeadC">
  <a name="1006206"> </a>Selecting the Phone Book on the Phone
</h4>
<p class="Body">
  <a name="1006207"> </a>When the list form event handler receives a response from the Telephony Manager indicating that it has connected with the phone, it does the following:
</p>

  <a name="1006208"> </a><p class="B1Bullet"> &#8226; sets the current state to <span style="font-family: monospace">kPhbkStageSelectingPhonebook</span></p>

  <a name="1006209"> </a><p class="B1Bullet"> &#8226; calls the <span style="font-family: monospace">PhbkTelMgrSelectPhoneBook</span> function, which issues an asynchronous call to the <a href="TelephonyPhonebook.html#1359742"><span style="font-family: monospace">TelPhbSelectPhonebook</span></a> function to select the phone book that was chosen by the user</p>

<h4 class="HCHeadC">
  <a name="1006213"> </a>Retrieving Phone Book Information from the Phone
</h4>
<p class="Body">
  <a name="1006214"> </a>When the list form event handler receives a response from the Telephony Manager indicating that it has selected the phone book on the phone, it does the following:
</p>

  <a name="1006215"> </a><p class="B1Bullet"> &#8226; sets the current state to <span style="font-family: monospace">kPhbkStageGettingPhonebookInfo</span></p>

  <a name="1006216"> </a><p class="B1Bullet"> &#8226; calls the <span style="font-family: monospace">PhbkTelMgrGetEntryCount</span> function, which issues an asynchronous call to the <a href="TelephonyPhonebook.html#1359548"><span style="font-family: monospace">TelPhbGetEntryCount</span></a> function to retrieve the number of entries in the selected phone book</p>

<h4 class="HCHeadC">
  <a name="1006220"> </a>Retrieving Phone Book Entries from the Phone
</h4>
<p class="Body">
  <a name="1006221"> </a>When the list form event handler receives a response from the Telephony Manager that specifies the number of entries in the selected phone book, it does the following:
</p>

  <a name="1006222"> </a><p class="B1Bullet"> &#8226; sets the current state to <span style="font-family: monospace">kPhbkStageGettingEntries</span></p>

  <a name="1006223"> </a><p class="B1Bullet"> &#8226; creates space in the internal data storage system for the entries</p>

  <a name="1006227"> </a><p class="B1Bullet"> &#8226; issues an asynchronous call to the <a href="TelephonyPhonebook.html#1359398"><span style="font-family: monospace">TelPhbGetEntries</span></a> function to retrieve the phone book data</p>

<h4 class="HCHeadC">
  <a name="1006228"> </a>Closing the Connection
</h4>
<p class="Body">
  <a name="1006229"> </a>When the list form event handler receives the entry data back from the Telephony Manager, it does the following:
</p>

  <a name="1006230"> </a><p class="B1Bullet"> &#8226; sets the current state to <span style="font-family: monospace">kPhbkStageClosingConnection</span></p>

  <a name="1006231"> </a><p class="B1Bullet"> &#8226; calls the <span style="font-family: monospace">PhbkTelMgrCloseConnection</span> function, which issues an asynchronous call to the <a href="TelephonyBasic.html#1312612"><span style="font-family: monospace">TelClosePhoneConnection</span></a> function to close the connection</p>

  <a name="1006235"> </a><p class="B1Bullet"> &#8226; adds the downloaded phone book entries to the <span style="font-family: monospace">PhBkApp</span> program's internal data storage system</p>

<h2 class="HBHeadB">
  <a name="1006237"> </a>Editing Phone Book Entries
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1006238"> </a>The <span style="font-family: monospace">PhBkApp</span> edit form manages editing of the phone book entries, including the following actions:
</p>

  <a name="1006239"> </a><p class="B1Bullet"> &#8226; adding a new entry to the phone book</p>

  <a name="1006240"> </a><p class="B1Bullet"> &#8226; modifying the name or number data in an existing entry</p>

  <a name="1006241"> </a><p class="B1Bullet"> &#8226; deleting an entry</p>
<p class="Body">
  <a name="1006242"> </a><span style="font-family: monospace">PhBkApp</span> displays the edit form when the user taps the <b>New</b> button or when the user taps on an entry in the displayed list. The edit form, which allows either modification or deletion of the selected entry, is shown in <a href="TelephonyMgr.html#1005917">Figure 10.4</a>.
</p>
<p class="Body">
  <a name="1006246"> </a>This form operates in a analogous manner to the list form: a state machine tracks which Telephony Manager call is pending and performs the appropriate actions according to the current state. In addition to calling the <a href="TelephonyBasic.html#1313714"><span style="font-family: monospace">TelOpenPhoneConnection</span></a>, <a href="TelephonyPhonebook.html#1359742"><span style="font-family: monospace">TelPhbSelectPhonebook</span></a>, and <a href="TelephonyBasic.html#1312612"><span style="font-family: monospace">TelClosePhoneConnection</span></a> functions, the edit form calls the <a href="TelephonyPhonebook.html#1359203"><span style="font-family: monospace">TelPhbAddEntry</span></a> and <a href="TelephonyPhonebook.html#1359272"><span style="font-family: monospace">TelPhbDeleteEntry</span></a> functions.
</p>

<h2 class="HaHeadA">
  <a name="1006449"> </a>Summary of Telephony Manager 
<a href="#1005467"><img src="images/top.gif" border="0"></a></h2>


<h5 class="TgTable">
  <a name="1007046"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1006452"> </a><div class="CellHeading">Telephony Manager Functions</div></th>
    <th><a name="1006454"> </a><div class="CellHeading"><br></div></th>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006456"> </a><div class="CellHeading">Basic Functions</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006463"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312542"><span style="font-family: monospace">TelCancel</span></a></div></td>
    <td><a name="1006468"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313258"><span style="font-family: monospace">TelIsPhoneConnected</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006473"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312590"><span style="font-family: monospace">TelClose</span></a></div></td>
    <td><a name="1006478"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313305"><span style="font-family: monospace">TelIsPowServiceAvailable</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006483"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312612"><span style="font-family: monospace">TelClosePhoneConnection</span></a></div></td>
    <td><a name="1006488"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313357"><span style="font-family: monospace">TelIsSmsServiceAvailable</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006493"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312663"><span style="font-family: monospace">TelGetCallState</span></a></div></td>
    <td><a name="1006498"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313412"><span style="font-family: monospace">TelIsSndServiceAvailable</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006503"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312733"><span style="font-family: monospace">TelGetEvent</span></a></div></td>
    <td><a name="1006508"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313464"><span style="font-family: monospace">TelIsSpcServiceAvailable</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006513"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312777"><span style="font-family: monospace">TelGetTelephonyEvent</span></a></div></td>
    <td><a name="1006518"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313519"><span style="font-family: monospace">TelIsStyServiceAvailable</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006523"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312815"><span style="font-family: monospace">TelInfGetInformation</span></a></div></td>
    <td><a name="1006528"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313574"><span style="font-family: monospace">TelMatchPhoneDriver</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006533"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312879"><span style="font-family: monospace">TelIsCfgServiceAvailable</span></a></div></td>
    <td><a name="1006538"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313618"><span style="font-family: monospace">TelOemCall</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006543"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312934"><span style="font-family: monospace">TelIsDtcServiceAvailable</span></a></div></td>
    <td><a name="1006548"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313682"><span style="font-family: monospace">TelOpen</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006553"> </a><div class="CellBody"><a href="TelephonyBasic.html#1312989"><span style="font-family: monospace">TelIsEmcServiceAvailable</span></a></div></td>
    <td><a name="1006558"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313714"><span style="font-family: monospace">TelOpenPhoneConnection</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006563"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313044"><span style="font-family: monospace">TelIsInfServiceAvailable</span></a></div></td>
    <td><a name="1006568"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313906"><span style="font-family: monospace">TelSendCommandString</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006573"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313096"><span style="font-family: monospace">TelIsNwkServiceAvailable</span></a></div></td>
    <td><a name="1006578"> </a><div class="CellBody"><a href="TelephonyBasic.html#1314134"><span style="font-family: monospace">TelIs&lt;FunctionName&gt;Supported</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006583"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313151"><span style="font-family: monospace">TelIsOemServiceAvailable</span></a></div></td>
    <td><a name="1006588"> </a><div class="CellBody"><a href="TelephonyBasic.html#1314205"><span style="font-family: monospace">TelIs&lt;ServiceSet&gt;Available</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006593"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313203"><span style="font-family: monospace">TelIsPhbServiceAvailable</span></a></div></td>
    <td><a name="1006595"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006597"> </a><div class="CellHeading">Data Calls</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="1006604"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335263"><span style="font-family: monospace">TelDtcCallNumber</span></a></div></td>
    <td colspan="1" rowspan="3"><a name="1006609"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335385"><span style="font-family: monospace">TelDtcReceiveData</span></a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td><a name="1006622"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335326"><span style="font-family: monospace">TelDtcCloseLine</span></a></div></td>
    <td><a name="1006627"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335454"><span style="font-family: monospace">TelDtcSendData</span></a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006629"> </a><div class="CellHeading">Emergency Calls</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006636"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335523"><span style="font-family: monospace">TelEmcCall</span></a></div></td>
    <td><a name="1006641"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335732"><span style="font-family: monospace">TelEmcGetNumberCount</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006646"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335604"><span style="font-family: monospace">TelEmcCloseLine</span></a></div></td>
    <td><a name="1006651"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335798"><span style="font-family: monospace">TelEmcSelectNumber</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006656"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335659"><span style="font-family: monospace">TelEmcGetNumber</span></a></div></td>
    <td><a name="1006661"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335865"><span style="font-family: monospace">TelEmcSetNumber</span></a></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006663"> </a><div class="CellHeading">Network Interface</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="1006670"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331066"><span style="font-family: monospace">TelNwkGetLocation</span></a></div></td>
    <td colspan="1" rowspan="3"><a name="1006675"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331387"><span style="font-family: monospace">TelNwkGetSelectedNetwork</span></a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td><a name="1006688"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331128"><span style="font-family: monospace">TelNwkGetNetworkName</span></a></div></td>
    <td><a name="1006693"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331449"><span style="font-family: monospace">TelNwkGetSignalLevel</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006698"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331208"><span style="font-family: monospace">TelNwkGetNetworks</span></a></div></td>
    <td><a name="1006703"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331528"><span style="font-family: monospace">TelNwkSelectNetwork</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006708"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331274"><span style="font-family: monospace">TelNwkGetNetworkType</span></a></div></td>
    <td><a name="1006713"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331589"><span style="font-family: monospace">TelNwkSetSearchMode</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006718"> </a><div class="CellBody"><a href="TelephonyNetwork.html#1331328"><span style="font-family: monospace">TelNwkGetSearchMode</span></a></div></td>
    <td><a name="1006720"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006722"> </a><div class="CellHeading">Phone Book</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="3"><a name="1006729"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359203"><span style="font-family: monospace">TelPhbAddEntry</span></a></div></td>
    <td colspan="1" rowspan="3"><a name="1006734"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359548"><span style="font-family: monospace">TelPhbGetEntryCount</span></a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td><a name="1006747"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359272"><span style="font-family: monospace">TelPhbDeleteEntry</span></a></div></td>
    <td><a name="1006752"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359614"><span style="font-family: monospace">TelPhbGetEntryMaxSizes</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006757"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359331"><span style="font-family: monospace">TelPhbGetAvailablePhonebooks</span></a></div></td>
    <td><a name="1006762"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359683"><span style="font-family: monospace">TelPhbGetSelectedPhonebook</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006767"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359398"><span style="font-family: monospace">TelPhbGetEntries</span></a></div></td>
    <td><a name="1006772"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359742"><span style="font-family: monospace">TelPhbSelectPhonebook</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006777"> </a><div class="CellBody"><a href="TelephonyPhonebook.html#1359479"><span style="font-family: monospace">TelPhbGetEntry</span></a></div></td>
    <td><a name="1006779"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006781"> </a><div class="CellHeading">Power Management</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006788"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313763"><span style="font-family: monospace">TelPowGetBatteryStatus</span></a></div></td>
    <td><a name="1006793"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313879"><span style="font-family: monospace">TelPowSetPhonePower</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006798"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313822"><span style="font-family: monospace">TelPowGetPowerLevel</span></a></div></td>
    <td><a name="1006800"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006802"> </a><div class="CellHeading">Security</div></td>
  </tr>
  <tr valign="top">
    <td colspan="1" rowspan="7"><a name="1006809"> </a><div class="CellBody"><a href="TelephonyConfig.html#1327273"><span style="font-family: monospace">TelStyChangeAuthenticationType</span></a></div></td>
    <td colspan="1" rowspan="7"><a name="1006814"> </a><div class="CellBody"><a href="TelephonyConfig.html#1327687"><span style="font-family: monospace">TelStyGetAuthenticationState</span></a></div></td>
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
  </tr>
  <tr valign="top">
    <td><a name="1006843"> </a><div class="CellBody"><a href="TelephonyConfig.html#1327628"><span style="font-family: monospace">TelStyEnterAuthenticationCode</span></a></div></td>
    <td><a name="1006845"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006847"> </a><div class="CellHeading">Short Message Services</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006854"> </a><div class="CellBody"><a href="TelephonyConfig.html#1327438"><span style="font-family: monospace">TelCfgGetSmsCenter</span></a></div></td>
    <td><a name="1006859"> </a><div class="CellBody"><a href="TelephonySMS.html#1346693"><span style="font-family: monospace">TelSmsReadMessages</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006864"> </a><div class="CellBody"><a href="TelephonyConfig.html#1327507"><span style="font-family: monospace">TelCfgSetSmsCenter</span></a></div></td>
    <td><a name="1006869"> </a><div class="CellBody"><a href="TelephonySMS.html#1346769"><span style="font-family: monospace">TelSmsReadReport</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006874"> </a><div class="CellBody"><a href="TelephonySMS.html#1346175"><span style="font-family: monospace">TelSmsDeleteMessage</span></a></div></td>
    <td><a name="1006879"> </a><div class="CellBody"><a href="TelephonySMS.html#1346844"><span style="font-family: monospace">TelSmsReadReports</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006884"> </a><div class="CellBody"><a href="TelephonySMS.html#1346235"><span style="font-family: monospace">TelSmsGetAvailableStorage</span></a></div></td>
    <td><a name="1006889"> </a><div class="CellBody"><a href="TelephonySMS.html#1346922"><span style="font-family: monospace">TelSmsReadSubmittedMessage</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006894"> </a><div class="CellBody"><a href="TelephonySMS.html#1346301"><span style="font-family: monospace">TelSmsGetDataMaxSize</span></a></div></td>
    <td><a name="1006899"> </a><div class="CellBody"><a href="TelephonySMS.html#1346994"><span style="font-family: monospace">TelSmsReadSubmittedMessages</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006904"> </a><div class="CellBody"><a href="TelephonySMS.html#1346361"><span style="font-family: monospace">TelSmsGetMessageCount</span></a></div></td>
    <td><a name="1006909"> </a><div class="CellBody"><a href="TelephonySMS.html#1347072"><span style="font-family: monospace">TelSmsSelectStorage</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006914"> </a><div class="CellBody"><a href="TelephonySMS.html#1346485"><span style="font-family: monospace">TelSmsGetSelectedStorage</span></a></div></td>
    <td><a name="1006919"> </a><div class="CellBody"><a href="TelephonySMS.html#1347133"><span style="font-family: monospace">TelSmsSendManualAcknowledge</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006924"> </a><div class="CellBody"><a href="TelephonySMS.html#1346545"><span style="font-family: monospace">TelSmsGetUniquePartId</span></a></div></td>
    <td><a name="1006929"> </a><div class="CellBody"><a href="TelephonySMS.html#1347191"><span style="font-family: monospace">TelSmsSendMessage</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006934"> </a><div class="CellBody"><a href="TelephonySMS.html#1346602"><span style="font-family: monospace">TelSmsReadMessage</span></a></div></td>
    <td><a name="1006936"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006938"> </a><div class="CellHeading">Sound</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006945"> </a><div class="CellBody"><a href="TelephonyBasic.html#1313961"><span style="font-family: monospace">TelSndMute</span></a></div></td>
    <td><a name="1006950"> </a><div class="CellBody"><a href="TelephonyBasic.html#1314078"><span style="font-family: monospace">TelSndStopKeyTone</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006955"> </a><div class="CellBody"><a href="TelephonyBasic.html#1314016"><span style="font-family: monospace">TelSndPlayKeyTone</span></a></div></td>
    <td><a name="1006957"> </a><div class="CellBody"><br></div></td>
  </tr>
  <tr valign="top">
    <td colspan="2" rowspan="1"><a name="1006959"> </a><div class="CellHeading">Speech Calls</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006966"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335929"><span style="font-family: monospace">TelSpcAcceptCall</span></a></div></td>
    <td><a name="1006971"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336403"><span style="font-family: monospace">TelSpcRejectCall</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006976"> </a><div class="CellBody"><a href="TelephonyCalls.html#1335989"><span style="font-family: monospace">TelSpcCallNumber</span></a></div></td>
    <td><a name="1006981"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336460"><span style="font-family: monospace">TelSpcRetrieveHeldLine</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006986"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336087"><span style="font-family: monospace">TelSpcCloseLine</span></a></div></td>
    <td><a name="1006991"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336515"><span style="font-family: monospace">TelSpcSelectLine</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1006996"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336145"><span style="font-family: monospace">TelSpcConference</span></a></div></td>
    <td><a name="1007001"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336574"><span style="font-family: monospace">TelSpcSendBurstDTMF</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1007006"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336213"><span style="font-family: monospace">TelSpcGetCallerNumber</span></a></div></td>
    <td><a name="1007011"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336640"><span style="font-family: monospace">TelSpcStartContinuousDTMF</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1007016"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336280"><span style="font-family: monospace">TelSpcHoldLine</span></a></div></td>
    <td><a name="1007021"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336708"><span style="font-family: monospace">TelSpcStopContinuousDTMF</span></a></div></td>
  </tr>
  <tr valign="top">
    <td><a name="1007026"> </a><div class="CellBody"><a href="TelephonyCalls.html#1336335"><span style="font-family: monospace">TelSpcPlayDTMF</span></a></div></td>
    <td><a name="1007028"> </a><div class="CellBody"><br></div></td>
  </tr>
</table>




</h5>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Companion2Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>