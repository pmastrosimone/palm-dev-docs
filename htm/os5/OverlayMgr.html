<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Overlay Manager</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:10:19">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1141222"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">40  Overlay Manager</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="NotifyMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Password.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Reference_Front.html">Palm OS® Programmer's API Reference</a></p>
			<p class="SideTOC1-PartTab">Palm OS® 5 SDK </p>
			<p class="SideTOC1-PartTab">Part II: System Management</a> </p>
			<p class="SideTOC1"><a href="OverlayMgr.html">40  Overlay Manager</a></p>
			
<p class="SideTOC2">
<a href="#1141245">Overlay Manager Data Structures
</a></p>

<p class="SideTOC3">
<a href="#1141247">OmLocaleType
</a></p>

<p class="SideTOC2">
<a href="#1141390">Overlay Manager Constants
</a></p>

<p class="SideTOC2">
<a href="#1141464">Overlay Manager Functions
</a></p>

<p class="SideTOC3">
<a href="#1141467">OmGetCurrentLocale
</a></p>

<p class="SideTOC3">
<a href="#1141502">OmGetIndexedLocale
</a></p>

<p class="SideTOC3">
<a href="#1141543">OmGetNextSystemLocale
</a></p>

<p class="SideTOC3">
<a href="#1141572">OmGetRoutineAddress
</a></p>

<p class="SideTOC3">
<a href="#1141601">OmGetSystemLocale
</a></p>

<p class="SideTOC3">
<a href="#1141637">OmLocaleToOverlayDBName
</a></p>

<p class="SideTOC3">
<a href="#1141675">OmOverlayDBNameToLocale
</a></p>

<p class="SideTOC3">
<a href="#1141704">OmSetSystemLocale
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1141223"> </a>This chapter describes the overlay manager API as declared in the header file <span style="font-family: monospace">OverlayMgr.h</span>. It discusses the following topics:
</p>

  <a name="1141228"> </a><p class="B1Bullet"> &#8226; <a href="OverlayMgr.html#1141245">Overlay Manager Data Structures</a></p>

  <a name="1141232"> </a><p class="B1Bullet"> &#8226; <a href="OverlayMgr.html#1141390">Overlay Manager Constants</a></p>

  <a name="1141236"> </a><p class="B1Bullet"> &#8226; <a href="OverlayMgr.html#1141464">Overlay Manager Functions</a></p>
<p class="Body">
  <a name="1141239"> </a>For more information on the overlay manager, see <a href="Localization.html#1021462">"Using Overlays to Localize Resources"</a> of the <i>Palm OS Programmer's Companion</i>, vol. I. 
</p>

<h2 class="HaHeadA">
  <a name="1141245"> </a>Overlay Manager Data Structures 
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1141247"> </a>OmLocaleType
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<p class="Body">
  <a name="1141249"> </a>The <span style="font-family: monospace">OmLocaleType</span> struct specifies a locale.
</p>
<pre  class="Preformatted">
typedef struct {<a name="1141250"> </a>
  UInt16   language;<a name="1141251"> </a>
  UInt16   country;<a name="1141252"> </a>
} OmLocaleType;<a name="1141253"> </a>
</pre>

<h4 class="HCHeadC">
  <a name="1141254"> </a>Field Descriptions
</h4>

<h5 class="TgTable">
  <a name="1141266"> </a>

<table width="450" border="0" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr valign="top">
    <td><a name="1141257"> </a><div class="CellBody"><span style="font-family: monospace">language</span> </div></td>
    <td><a name="1141259"> </a><div class="CellBody">The language spoken in the locale. This value is one of the <span style="font-family: monospace">LanguageType</span> constants. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1141262"> </a><div class="CellBody"><span style="font-family: monospace">country</span> </div></td>
    <td><a name="1141264"> </a><div class="CellBody">The country or region where the language is spoken. This value is one of the <span style="font-family: monospace">CountryType</span> constants. </div></td>
  </tr>
</table>




</h5><h4 class="RefSide">
  <a name="1141267"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141274"> </a>If Palm OS<sup>®</sup> <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present, the <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a> replaces <span style="font-family: monospace">OmLocaleType</span>. For backward compatibility, <span style="font-family: monospace">OmLocaleType</span> is mapped to <span style="font-family: monospace">LmLocaleType</span>. 
</p>

<h2 class="HaHeadA">
  <a name="1141390"> </a>Overlay Manager Constants 
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>


<h5 class="TgTable">
  <a name="1141462"> </a>

<table border="1" cellpadding="5" cellspacing="0">
  <caption></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="1141393"> </a><div class="CellHeading">Constant</div></th>
    <th><a name="1141395"> </a><div class="CellHeading">Value</div></th>
    <th><a name="1141397"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="1141414"> </a><div class="CellBody"><span style="font-family: monospace">omOverlayRscType</span> </div></td>
    <td><a name="1141416"> </a><div class="CellBody"><span style="font-family: monospace">'ovly'</span></div></td>
    <td><a name="1141418"> </a><div class="CellBody">Symbolic name of an overlay resource that is contained in both the base database and the overlay database.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="1141424"> </a><div class="CellBody"><span style="font-family: monospace">omOverlayRscID</span> </div></td>
    <td><a name="1141426"> </a><div class="CellBody">1000</div></td>
    <td><a name="1141428"> </a><div class="CellBody">Resource ID of the overlay resource in both the base database and the overlay database. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1141431"> </a><div class="CellBody"><span style="font-family: monospace">omFtrCreator</span> </div></td>
    <td><a name="1141433"> </a><div class="CellBody"><span style="font-family: monospace">'ovly'</span></div></td>
    <td><a name="1141435"> </a><div class="CellBody">Creator value used for the <span style="font-family: monospace">omFtrShowErrorsFlag</span> feature. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1141438"> </a><div class="CellBody"><span style="font-family: monospace">omFtrDefaultLocale</span> </div></td>
    <td><a name="1141440"> </a><div class="CellBody">1</div></td>
    <td><a name="1141442"> </a><div class="CellBody">Feature that specifies the default locale stored in the ROM. The default locale is used in cases where the system is attempting to open a "stripped" database (one that requires an overlay) and an overlay matching the current locale cannot be found. In this case, the system then looks for an overlay matching the default locale. Use <a href="FeatureManager.html#1110037"><span style="font-family: monospace">FtrGet</span></a> and <a href="FeatureManager.html#1110193"><span style="font-family: monospace">FtrSet</span></a> to retrieve and set this value. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="1141451"> </a><div class="CellBody"><span style="font-family: monospace">omFtrShowErrorsFlag</span> </div></td>
    <td><a name="1141453"> </a><div class="CellBody">0</div></td>
    <td><a name="1141455"> </a><div class="CellBody">Feature that controls the number of error messages displayed by the overlay manager. If this feature is set to <span style="font-family: monospace">true</span>, the overlay manager may display several more error messages when validating an overlay against its base database. This feature only takes effect when the error checking level is set to full (common on debug ROMs, not on release ROMs). Use <a href="FeatureManager.html#1110037"><span style="font-family: monospace">FtrGet</span></a> and <a href="FeatureManager.html#1110193"><span style="font-family: monospace">FtrSet</span></a> to retrieve and set this value. </div></td>
  </tr>
</table>




</h5>
<h2 class="HaHeadA">
  <a name="1141464"> </a>Overlay Manager Functions 
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1141467"> </a>OmGetCurrentLocale
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141468"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141469"> </a>Return the current locale. 
</p>
<h4 class="RefSide">
  <a name="1141470"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141471"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141472"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141473"> </a>void OmGetCurrentLocale<br>(LmLocaleType *currentLocale)
</p>
<h4 class="RefSide">
  <a name="1141474"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141475"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">currentLocale</span></td><td valign="top">Points to an <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a> struct that identifies the current locale. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141479"> </a>Result 
</h4>
<p class="Body">
  <a name="1141480"> </a>Returns nothing. 
</p>
<h4 class="RefSide">
  <a name="1141481"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141482"> </a>This function returns the current locale. The current locale controls which overlays are used for resource databases. For example, suppose you have one application and two associated overlays installed, one for US English and one for British English. In this case, if the country specified in the locale returned by this function is <span style="font-family: monospace">cUnitedKingdom</span>, the British English overlay is used for the application. If the country returned is <span style="font-family: monospace">cUnitedStates</span>, the US English overlay is used. 
</p>
<h4 class="RefSide">
  <a name="1141486"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141490"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. To use this function in code intended to be run on earlier versions of Palm OS, link with the PalmOSGlue library and call <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">OmGlueGetCurrentLocale</span>. For more information, see <a href="PalmOSGlueLib.html#1386348">Chapter 75, "PalmOSGlue Library."</a>
</p>
<h4 class="RefSide">
  <a name="1141495"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141499"> </a><a href="OverlayMgr.html#1141601"><span style="font-family: monospace">OmGetSystemLocale</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1141502"> </a>OmGetIndexedLocale
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141503"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141504"> </a>Return a system locale by index. 
</p>
<h4 class="RefSide">
  <a name="1141505"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141506"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141507"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141508"> </a>Err OmGetIndexedLocale (UInt16 localeIndex,<br>LmLocaleType *theLocale)
</p>
<h4 class="RefSide">
  <a name="1141509"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141510"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">localeIndex</span></td><td valign="top">Zero-based index of the locale to return. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141514"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">theLocale</span></td><td valign="top">Points to an <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a> struct that identifies the locale at that index. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141515"> </a>Result 
</h4>
<p class="Body">
  <a name="1141517"> </a>Returns <span style="font-family: monospace">errNone</span> upon success, or <span style="font-family: monospace">omErrInvalidLocaleIndex</span> if the index is out of bounds. 
</p>
<h4 class="RefSide">
  <a name="1141518"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141519"> </a><span style="font-family: monospace">OmGetIndexedLocale</span> is used in a loop to discover how many system overlays are installed for system resources. 
</p>
<p class="Body">
  <a name="1141523"> </a>If the <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present, use <a href="OverlayMgr.html#1141543"><span style="font-family: monospace">OmGetNextSystemLocale</span></a> instead of this function. <span style="font-family: monospace">OmGetIndexedLocale</span> can be slow on ROMs that contain many valid system locales. 
</p>
<h4 class="RefSide">
  <a name="1141527"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141531"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. 
</p>
<p class="Body">
  <a name="1141532"> </a>In Palm OS 3.5, this function would not return a system overlay that was located in RAM. The Palm OS 4.0 version of this function does return system overlays located in RAM. 
</p>
<h4 class="RefSide">
  <a name="1141533"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141540"> </a><a href="OverlayMgr.html#1141601"><span style="font-family: monospace">OmGetSystemLocale</span></a>, <a href="OverlayMgr.html#1141543"><span style="font-family: monospace">OmGetNextSystemLocale</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1141543"> </a>OmGetNextSystemLocale
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141544"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141545"> </a>Return a system locale. 
</p>
<h4 class="RefSide">
  <a name="1141546"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141547"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141548"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141549"> </a>Err OmGetNextSystemLocale (Boolean iNewSearch,<br>OmSearchStateType *ioStateInfoP,<br>LmLocaleType *oLocaleP)
</p>
<h4 class="RefSide">
  <a name="1141550"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141551"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">iNewSearch</span></td><td valign="top"><span style="font-family: monospace">true</span> if this function call is starting a new search, or <span style="font-family: monospace">false</span> if this function call is a continuation of a search. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141552"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">ioStateInfoP</span></td><td valign="top">If <span style="font-family: monospace">iNewSearch</span> is <span style="font-family: monospace">false</span>, this must point to the same data used for the previous invocation. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141553"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">oLocaleP</span></td><td valign="top">The found locale. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141554"> </a>Result 
</h4>
<p class="Body">
  <a name="1141556"> </a>Returns <span style="font-family: monospace">errNone</span> if no error or <span style="font-family: monospace">omErrNoNextSystemLocale</span> if no matches were found. 
</p>
<h4 class="RefSide">
  <a name="1141557"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141558"> </a>You can call this function successively to discover how many system overlays are installed for system resources. Each system overlay found determines a separate valid system locale. Any locale returned by this function can be sent to <a href="OverlayMgr.html#1141704"><span style="font-family: monospace">OmSetSystemLocale</span></a> to change the system locale. 
</p>
<p class="Body">
  <a name="1141562"> </a>To start the search, pass <span style="font-family: monospace">true</span> for <span style="font-family: monospace">iNewSearch</span>. Allocate an <span style="font-family: monospace">OmSearchStateType</span> structure and pass its address as <span style="font-family: monospace">ioStateInfoP</span>. <span style="font-family: monospace">OmGetNextSystemLocale</span> stores private information in <span style="font-family: monospace">ioStateInfoP</span> and uses it if the search is continued. 
</p>
<p class="Body">
  <a name="1141563"> </a>To continue a search where the previous one left off, pass <span style="font-family: monospace">false</span> for <span style="font-family: monospace">iNewSearch</span> and pass the same <span style="font-family: monospace">ioStateInfoP</span> that you used during the previous call to this function. 
</p>
<p class="Body">
  <a name="1141564"> </a>When called successively, this function eventually returns all system overlays that are in ROM or RAM. 
</p>
<h4 class="RefSide">
  <a name="1141565"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141569"> </a>Implemented only if <a href="CompatibilityApdx.html#971763">4.0 New Feature Set</a> is present. 
</p>

<h2 class="HBHeadB">
  <a name="1141572"> </a>OmGetRoutineAddress
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141573"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141574"> </a>Return the address of an overlay manager function. 
</p>
<h4 class="RefSide">
  <a name="1141575"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141576"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141577"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141578"> </a>void *OmGetRoutineAddress (OmSelector inSelector)
</p>
<h4 class="RefSide">
  <a name="1141579"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141580"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">inSelector</span></td><td valign="top">One of the routine selectors defined in <span style="font-family: monospace">OverlayMgr.h. </span></td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141582"> </a>Result 
</h4>
<p class="Body">
  <a name="1141583"> </a>Returns the address of the corresponding function. Returns <span style="font-family: monospace">NULL</span> if an invalid routine selector is passed. 
</p>
<h4 class="RefSide">
  <a name="1141584"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141585"> </a>You typically use this function to determine whether an overlay manager function exists on the device. As future releases of Palm OS add new functions, older devices with earlier versions of the overlay manager will not implement these newer functions. If <span style="font-family: monospace">OmGetRoutineAddress</span> returns <span style="font-family: monospace">NULL</span>, the function is unavailable. 
</p>
<h4 class="RefSide">
  <a name="1141586"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141590"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1141591"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141598"> </a><a href="MiscSys.html#1216119"><span style="font-family: monospace">IntlGetRoutineAddress</span></a>, <a href="SystemManager.html#1165975"><span style="font-family: monospace">SysGetTrapAddress</span></a>
</p>

<h2 class="HBHeadB">
  <a name="1141601"> </a>OmGetSystemLocale
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141602"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141603"> </a>Return the system locale. 
</p>
<h4 class="RefSide">
  <a name="1141604"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141605"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141606"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141607"> </a>void OmGetSystemLocale<br>(LmLocaleType *systemLocale)
</p>
<h4 class="RefSide">
  <a name="1141608"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141612"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">systemLocale</span></td><td valign="top">Points to an <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a> struct that identifies the system locale. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141613"> </a>Result 
</h4>
<p class="Body">
  <a name="1141614"> </a>Returns nothing. 
</p>
<h4 class="RefSide">
  <a name="1141615"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141616"> </a>You typically don't use this function. Instead, use <a href="OverlayMgr.html#1141467"><span style="font-family: monospace">OmGetCurrentLocale</span></a>, which returns the locale that determines which overlays are used. 
</p>
<p class="Body">
  <a name="1141620"> </a>The system locale is saved in the storage heap header and persists across soft resets. When the device is reset, the system locale is used to set the current locale. 
</p>
<h4 class="RefSide">
  <a name="1141621"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141625"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. To use this function in code intended to be run on earlier versions of Palm OS, link with the PalmOSGlue library and call <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">OmGlueGetSystemLocale</span>. For more information, see <a href="PalmOSGlueLib.html#1386348">Chapter 75, "PalmOSGlue Library."</a>
</p>
<h4 class="RefSide">
  <a name="1141630"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141634"> </a><a href="OverlayMgr.html#1141467"><span style="font-family: monospace">OmGetCurrentLocale</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1141637"> </a>OmLocaleToOverlayDBName
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141638"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141639"> </a>Return the overlay database's name given the base database name and the locale. 
</p>
<h4 class="RefSide">
  <a name="1141640"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141641"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141642"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141643"> </a>Err OmLocaleToOverlayDBName<br>(const Char *baseDBName,<br>const LmLocaleType *targetLocale,<br>Char *overlayDBName)
</p>
<h4 class="RefSide">
  <a name="1141644"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141645"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">baseDBName</span></td><td valign="top">The name of the base resource database associated with the overlay. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141646"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">targetLocale</span></td><td valign="top">The locale to which this overlay applies. See <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a>. Pass <span style="font-family: monospace">NULL</span> to use the current locale. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141650"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">overlayDBName</span></td><td valign="top">The overlay database name given the base database name and the target locale. This buffer must be at least <span style="font-family: monospace">dmDBNameLength</span> bytes. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141651"> </a>Result 
</h4>
<p class="Body">
  <a name="1141653"> </a>Returns <span style="font-family: monospace">errNone</span> upon success, or <span style="font-family: monospace">omErrUnknownLocale</span> if the <span style="font-family: monospace">targetLocale</span> parameter is invalid. 
</p>
<h4 class="RefSide">
  <a name="1141654"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141655"> </a>The appropriate overlay database name is currently: 
</p>
<pre  class="Preformatted">
<i>baseDBName</i><span style="font-family: monospace">_</span><i>llCC</i> <a name="1141656"> </a>
</pre>
<p class="Body">
  <a name="1141657"> </a>where:
</p>
<h5 class="P1"><a name="1141658"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><i>baseDBName</i></td><td valign="top">The name of the base database as you passed it in. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141659"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><i>ll</i></td><td valign="top">A two-character code identifying the language. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141660"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><i>CC</i></td><td valign="top">A two-character code identifying the country. </td>
  </tr>
</table>
</div></h5>
<p class="Body">
  <a name="1141661"> </a>The base database name is truncated if necessary to allow for this suffix. 
</p>
<p class="Body">
  <a name="1141662"> </a>For example, the base database "MemoPad" might have an overlay for US English named "MemoPad_enUS".
</p>
<h4 class="RefSide">
  <a name="1141663"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141667"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1141668"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141672"> </a><a href="OverlayMgr.html#1141675"><span style="font-family: monospace">OmOverlayDBNameToLocale</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1141675"> </a>OmOverlayDBNameToLocale
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141676"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141677"> </a>Return an overlay database's locale given its name. 
</p>
<h4 class="RefSide">
  <a name="1141678"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141679"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141680"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141681"> </a>Err OmOverlayDBNameToLocale<br>(const Char *overlayDBName,<br>LmLocaleType *overlayLocale)
</p>
<h4 class="RefSide">
  <a name="1141682"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141683"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">overlayDBName</span></td><td valign="top">The name of the overlay database. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141684"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;- <span style="font-family: monospace">overlayLocale</span></td><td valign="top">Points to an <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a> structure identifying the overlay's locale. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141688"> </a>Result 
</h4>
<p class="Body">
  <a name="1141690"> </a>Returns <span style="font-family: monospace">errNone</span> upon success, <span style="font-family: monospace">omErrBadOverlayDBName</span> if the string <span style="font-family: monospace">overlayDBName</span> is not long enough to have a locale suffix, or <span style="font-family: monospace">omErrUnknownLocale</span> if the locale cannot be determined. 
</p>
<h4 class="RefSide">
  <a name="1141692"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141696"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. 
</p>
<h4 class="RefSide">
  <a name="1141697"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141701"> </a><a href="OverlayMgr.html#1141637"><span style="font-family: monospace">OmLocaleToOverlayDBName</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1141704"> </a>OmSetSystemLocale
<a href="#1141222"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1141705"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1141706"> </a>Set the system locale and reset the device. 
</p>
<h4 class="RefSide">
  <a name="1141707"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1141708"> </a>OverlayMgr.h
</p>
<h4 class="RefSide">
  <a name="1141709"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1141710"> </a>Err OmSetSystemLocale<br>(const LmLocaleType *systemLocale)
</p>
<h4 class="RefSide">
  <a name="1141711"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1141715"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">systemLocale</span></td><td valign="top">An <a href="LocaleMgr.html#1129743"><span style="font-family: monospace">LmLocaleType</span></a> structure specifying the locale to switch the system to. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141716"> </a>Result 
</h4>
<p class="Body">
  <a name="1141717"> </a>Returns <span style="font-family: monospace">errNone</span> upon success, or one of the following if an error occurs: 
</p>
<h5 class="P1"><a name="1141718"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">omErrUnknownLocale</span></td><td valign="top">There is no system overlay for <span style="font-family: monospace">systemLocale</span>. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141719"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">omErrInvalidLocale</td><td valign="top"></span>The system overlay for <span style="font-family: monospace">systemLocale</span> has been found but is invalid. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141720"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">dmErrInvalidParam</span></td><td valign="top">An error occurred while opening the overlay. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141721"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">dmErrMemError</span></td><td valign="top">A memory error occurred while opening the overlay. </td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1141722"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">dmErrDatabaseOpen</span></td><td valign="top">The system overlay was already open. </td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1141723"> </a>Comments 
</h4>
<p class="Body">
  <a name="1141724"> </a>This function changes the system locale to the specified locale if it exists. It first determines that the system overlay exists for the requested locale and that it matches the base system database. If so, it updates the system locale information saved in the storage heap header and resets the device. After the device is reset, the current locale is set to the system locale. 
</p>
<p class="Body">
  <a name="1141725"> </a>A Palm Powered<sup>&#8482;</sup> device has a default locale hard-coded into the ROM. This locale is used to set the system locale after a hard reset or any time that the storage heap header is invalid. The storage heap header is typically only invalid when the device is turned on for the first time. 
</p>
<h4 class="RefSide">
  <a name="1141726"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1141730"> </a>Implemented only if <a href="CompatibilityApdx.html#971113">3.5 New Feature Set</a> is present. 
</p>
<p class="Body">
  <a name="1141731"> </a>In Palm OS 3.5, this function would not switch to a system overlay that was located in the RAM. The Palm OS 4.0 version of this function does return system overlays located in the RAM. 
</p>
<h4 class="RefSide">
  <a name="1141732"> </a>See Also 
</h4>
<p class="Body">
  <a name="1141736"> </a><a href="OverlayMgr.html#1141601"><span style="font-family: monospace">OmGetSystemLocale</span></a> 
</p>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Reference_Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>