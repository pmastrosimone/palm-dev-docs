<HTML>

<HEAD>
<SMALLSCREENIGNORE> 
<LINK HREF="copy_of_palmos.css" REL="stylesheet" TYPE="text/css">
<LINK HREF="document.css" REL="StyleSheet" TYPE="text/css" media="screen">
<!-- SCRIPT_START -->
<!-- SCRIPT_END -->
</SMALLSCREENIGNORE>
<TITLE>Serial Link Manager</TITLE>

<META NAME="PALMTEMPLATE" CONTENT="1006-002 Palm HTML 20020513">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="TEMPLATEBASE" CONTENT="Palm HTML 20010625">
<META NAME="LASTUPDATED" CONTENT="12/13/02 10:10:57">
<META HTTP-EQUIV="content-type" CONTENT="text/html;charset=ISO-8859-1">

</HEAD>

<BODY LEFTMARGIN="0" MARGINWIDTH="0" TOPMARGIN="0" MARGINHEIGHT="0">
<SMALLSCREENIGNORE> 
<table width="100%" border="0" cellspacing="0" cellpadding="0">
  <tr>
	<td><a name="1309309"></a>
      <table border="0" cellpadding="0" cellspacing="0" width="100%">
        <tr height="35"> 
          <td height="35" colspan="2" bgcolor="#6699CC">&nbsp;</td>
        </tr>
        <tr valign="top"> 
          <td width="160" align="left"><a href="http://www.palmos.com"><img src="images/bigorb.gif" width="160" height="110" border="0"></a></td>
          <td align="left" width="100%"> 
            </SMALLSCREENIGNORE>
            <!-- CONTENTCELL_START -->
            <img border="0" height="45" src="images/orb_bkgrnd_600.gif" width="600"><br>
            <!--PAGENAV_START-->
            <SPAN CLASS="subnav">&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
              &nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span><BR>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             <h2 class="HeadDocPage">67  Serial Link Manager</h2>
             <img src="images/pixel_ltblue.gif" width="600" height="1" border="0" vspace="2"><br>
             &nbsp;<span class="subnav"><a href="ReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="OldSerialManager.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelephonyBasic.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ReferenceIX.html">Index</a></span>  
            <!--PAGENAV_END-->
          </td>
        </tr>
      </table>
    </td>
			</tr>
  <tr>
				<td> 
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr>
							<td>&nbsp;&nbsp;&nbsp;</td>
						</tr>
        <tr>
		<td valign="top" width="10">&nbsp;&nbsp;&nbsp;</td>
		<td valign="top" width="175">
			<p class="SideTitle">Title - <br><a href="Reference_Front.html">Palm OS® Programmer's API Reference</a></p>
			<p class="SideTOC1-PartTab">Palm OS® 5 SDK </p>
			<p class="SideTOC1-PartTab">Part III: Communications </p>
			<p class="SideTOC1"><a href="SerialLinkManager.html">67  Serial Link Manager</a></p>
			
<p class="SideTOC2">
<a href="#1309318">Serial Link Manager Functions
</a></p>

<p class="SideTOC3">
<a href="#1309321">SlkClose
</a></p>

<p class="SideTOC3">
<a href="#1309339">SlkCloseSocket
</a></p>

<p class="SideTOC3">
<a href="#1309372">SlkFlushSocket
</a></p>

<p class="SideTOC3">
<a href="#1309389">SlkOpen
</a></p>

<p class="SideTOC3">
<a href="#1309411">SlkOpenSocket
</a></p>

<p class="SideTOC3">
<a href="#1309440">SlkReceivePacket
</a></p>

<p class="SideTOC3">
<a href="#1309476">SlkSendPacket
</a></p>

<p class="SideTOC3">
<a href="#1309498">SlkSetSocketListener
</a></p>

<p class="SideTOC3">
<a href="#1309531">SlkSocketPortID
</a></p>

<p class="SideTOC3">
<a href="#1309567">SlkSocketSetTimeout
</a></p>

		</td>

		<td width="5">&nbsp;&nbsp;</td>
		<td width="1" bgcolor="#6699cc">&nbsp;</td>
		<td width="5">&nbsp;&nbsp;</td>
		<td> 

				<!-- CONTENT_START -->

<p class="Body">
  <a name="1309310"> </a>This chapter provides reference material for the serial link manager API. The header file <span style="font-family: monospace">SerialLinkMgr.h</span> declares the serial link manager API. For more information on the serial link manager, see the chapter <a href="SerialCommunication.html#989132">"Serial Communication"</a> in the <i>Palm OS Programmer's Companion</i>, vol. II, <i>Communications</i>. 
</p>

<h2 class="HaHeadA">
  <a name="1309318"> </a>Serial Link Manager Functions 
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>


<h2 class="HBHeadB">
  <a name="1309321"> </a>SlkClose
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309322"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309323"> </a>Close down the serial link manager.
</p>
<h4 class="RefSide">
  <a name="1309324"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309325"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309326"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309328"> </a>Err SlkClose (void)
</p>
<h4 class="RefSide">
  <a name="1309329"> </a>Parameters 
</h4>
<p class="Body">
  <a name="1309330"> </a>None.
</p>
<h4 class="RefSide">
  <a name="1309331"> </a>Result 
</h4>
<h5 class="P1"><a name="1309332"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309334"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrNotOpen</span></td><td valign="top">The serial link manager was not open.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309335"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309336"> </a>When the open count reaches zero, this routine frees resources allocated by serial link manager.
</p>

<h2 class="HBHeadB">
  <a name="1309339"> </a>SlkCloseSocket
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309340"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309344"> </a>Closes a socket previously opened with <a href="SerialLinkManager.html#1309411"><span style="font-family: monospace">SlkOpenSocket</span></a>.
</p>
<p class="Body">
  <a name="1309345"> </a>The caller is responsible for closing the communications library used by this socket, if necessary.
</p>
<h4 class="RefSide">
  <a name="1309346"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309347"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309348"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309350"> </a>Err<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>SlkCloseSocket (UInt16 socket)
</p>
<h4 class="RefSide">
  <a name="1309351"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309352"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">socket</span></td><td valign="top">The socket ID to close.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309353"> </a>Result 
</h4>
<h5 class="P1"><a name="1309354"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309356"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrSocketNotOpen</td><td valign="top"></span>The socket was not open.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309357"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309358"> </a><span style="font-family: monospace">SlkCloseSocket</span> frees system resources the serial link manager allocated for the socket. It does not free resources allocated and passed by the client, such as the buffers passed to <a href="SerialLinkManager.html#1309498"><span style="font-family: monospace">SlkSetSocketListener</span></a>; this is the client's responsibility. The caller is also responsible for closing the communications library used by this socket.
</p>
<h4 class="RefSide">
  <a name="1309362"> </a>See Also 
</h4>
<p class="Body">
  <a name="1309366"> </a><a href="SerialLinkManager.html#1309411"><span style="font-family: monospace">SlkOpenSocket</span></a> 
</p>

<h2 class="HBHeadB">
  <a name="1309372"> </a>SlkFlushSocket
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309373"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309374"> </a>Flush the receive queue of the communications library associated with the given socket.
</p>
<h4 class="RefSide">
  <a name="1309375"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309376"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309377"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309379"> </a>Err SlkFlushSocket (UInt16 socket, Int32 timeout)
</p>
<h4 class="RefSide">
  <a name="1309380"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309381"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socket</span></td><td valign="top">Socket ID.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309382"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">timeout</span></td><td valign="top">Interbyte timeout in system ticks.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309383"> </a>Result 
</h4>
<h5 class="P1"><a name="1309384"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309386"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrSocketNotOpen</td><td valign="top"></span>The socket wasn't open.</td>
  </tr>
</table>
</div></h5>

<h2 class="HBHeadB">
  <a name="1309389"> </a>SlkOpen
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309390"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309391"> </a>Initialize the serial link manager.
</p>
<h4 class="RefSide">
  <a name="1309392"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309393"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309394"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309396"> </a>Err SlkOpen (void)
</p>
<h4 class="RefSide">
  <a name="1309397"> </a>Parameters 
</h4>
<p class="Body">
  <a name="1309398"> </a>None.
</p>
<h4 class="RefSide">
  <a name="1309399"> </a>Result 
</h4>
<h5 class="P1"><a name="1309400"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309402"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrAlreadyOpen</td><td valign="top"></span>No error.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309403"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309404"> </a>Initializes the serial link manager, allocating necessary resources. Return codes of 0 (zero) and <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrAlreadyOpen</span> both indicate success. Any other return code indicates failure. The <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrAlreadyOpen</span> function informs the client that someone else is also using the serial link manager. If the serial link manager was successfully opened by the client, the client needs to call <a href="SerialLinkManager.html#1309321"><span style="font-family: monospace">SlkClose</span></a> when it finishes using the serial link manager.
</p>

<h2 class="HBHeadB">
  <a name="1309411"> </a>SlkOpenSocket
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309412"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309413"> </a>Open a serial link socket and associate it with a communications library. The socket may be a known static socket or a dynamically assigned socket.
</p>
<h4 class="RefSide">
  <a name="1309414"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309415"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309416"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309418"> </a>Err SlkOpenSocket (UInt16 portID, UInt16 *socketP, Boolean staticSocket)
</p>
<h4 class="RefSide">
  <a name="1309419"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309420"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">portID</span></td><td valign="top">Comm library reference number for socket.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309421"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">socketP</span></td><td valign="top">Pointer to location for returning the socket ID.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309422"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">staticSocket</span></td><td valign="top">If <span style="font-family: monospace">TRUE</span>, *<span style="font-family: monospace">socketP</span> contains the desired static socket number to open. If <span style="font-family: monospace">FALSE</span>, any free socket number is assigned dynamically and opened.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309423"> </a>Result 
</h4>
<h5 class="P1"><a name="1309424"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309426"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrOutOfSockets</td><td valign="top"></span>No more sockets can be opened.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309427"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309428"> </a>The communications library must already be initialized and opened (see <a href="OldSerialManager.html#1305038"><span style="font-family: monospace">SerOpen</span></a>). When finished using the socket, the caller must call <a href="SerialLinkManager.html#1309339"><span style="font-family: monospace">SlkCloseSocket</span></a> to free system resources allocated for the socket. For information about well-known static socket IDs, see <a href="SerialCommunication.html#990174">The Serial Link Protocol</a>.
</p>

<h2 class="HBHeadB">
  <a name="1309440"> </a>SlkReceivePacket
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309441"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309442"> </a>Receive and validate a packet for a particular socket or for any socket. Check for format and checksum errors.
</p>
<h4 class="RefSide">
  <a name="1309443"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309444"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309445"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309447"> </a>Err SlkReceivePacket (UInt16 socket, Boolean andOtherSockets, SlkPktHeaderPtr headerP, void* bodyP, UInt16 bodySize, Int32 timeout)
</p>
<h4 class="RefSide">
  <a name="1309448"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309449"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socket</span></td><td valign="top">The socket ID.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309450"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">andOtherSockets</td><td valign="top"></span>If <span style="font-family: monospace">TRUE</span>, ignore destination in packet header.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309451"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">headerP</span></td><td valign="top">Pointer to the packet header buffer (size of <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SlkPktHeaderType</span>).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309452"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">bodyP</span></td><td valign="top">Pointer to the packet client data buffer.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309453"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">bodySize</span></td><td valign="top">Size of the client data buffer (maximum client data size which can be accommodated).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309454"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">timeout</span></td><td valign="top">Maximum number of system ticks to wait for beginning of a packet; -1 means wait forever.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309455"> </a>Result 
</h4>
<h5 class="P1"><a name="1309456"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309458"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrSocketNotOpen</td><td valign="top"></span>The socket was not open.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309460"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrTimeOut</span></td><td valign="top">Timed out waiting for a packet.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309462"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrWrongDestSocket</td><td valign="top"></span>The packet being received had an unexpected destination.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309464"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrChecksum</span></td><td valign="top">Invalid header checksum or packet CRC-16.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309466"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrBuffer</span></td><td valign="top">Client data buffer was too small for packet's client data.</td>
  </tr>
</table>
</div></h5>
<p class="Body">
  <a name="1309467"> </a>If <span style="font-family: monospace">andOtherSockets</span> is <span style="font-family: monospace">FALSE</span>, this routine returns with an error code unless it gets a packet for the specific socket.
</p>
<p class="Body">
  <a name="1309468"> </a>If <span style="font-family: monospace">andOtherSockets</span> is <span style="font-family: monospace">TRUE</span>, this routine returns successfully if it sees any incoming packet from the communications library used by <span style="font-family: monospace">socket</span>.
</p>
<h4 class="RefSide">
  <a name="1309469"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309470"> </a>You may request to receive a packet for the passed socket ID only, or for any open socket which does not have a socket listener. The parameters also specify buffers for the packet header and client data, and a timeout. The timeout indicates how long the receiver should wait for a packet to begin arriving before timing out. If a packet is received for a socket with a registered socket listener, it will be dispatched via its socket listener procedure. On success, the packet header buffer and packet client data buffer is filled in with the actual size of the packet's client data in the packet header's <span style="font-family: monospace">bodySize</span> field.
</p>

<h2 class="HBHeadB">
  <a name="1309476"> </a>SlkSendPacket
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309477"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309478"> </a>Send a serial link packet via the serial output driver. 
</p>
<h4 class="RefSide">
  <a name="1309479"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309480"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309481"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309483"> </a>Err<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>SlkSendPacket (SlkPktHeaderPtr headerP, SlkWriteDataPtr writeList)
</p>
<h4 class="RefSide">
  <a name="1309484"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309485"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">headerP</span></td><td valign="top">Pointer to the packet header structure with client information filled in (see Comments).</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309486"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">writeList</span></td><td valign="top">List of packet client data blocks (see Comments).</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309487"> </a>Result 
</h4>
<h5 class="P1"><a name="1309488"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309490"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrSocketNotOpen</td><td valign="top"></span>The socket was not open.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309492"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrTimeOut</span></td><td valign="top">Handshake timeout.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309493"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309494"> </a><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SlkSendPacket</span> stuffs the signature, client data size, and the checksum fields of the packet header. The caller must fill in all other packet header fields. If the transaction ID field is set to 0 (zero), the serial link manager automatically generates and stuffs a new non-zero transaction ID. The array of <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SlkWriteDataType</span> structures enables the caller to specify the client data part of the packet as a list of noncontiguous blocks. The end of list is indicated by an array element with the <span style="font-family: monospace">size</span> field set to 0 (zero). This call blocks until the entire packet is sent out or until an error occurs.
</p>

<h2 class="HBHeadB">
  <a name="1309498"> </a>SlkSetSocketListener
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309499"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309500"> </a>Register a socket listener for a particular socket. 
</p>
<h4 class="RefSide">
  <a name="1309501"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309502"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309503"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309505"> </a>Err SlkSetSocketListener (UInt16 socket, SlkSocketListenPtr socketP)
</p>
<h4 class="RefSide">
  <a name="1309506"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309507"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socket</span></td><td valign="top">Socket ID.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309508"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socketP</span></td><td valign="top">Pointer to a <span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">SlkSocketListenType</span> structure.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309509"> </a>Result 
</h4>
<h5 class="P1"><a name="1309510"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309512"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrBadParam</span></td><td valign="top">Invalid parameter.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309514"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="font-family: monospace">slkErrSocketNotOpen</td><td valign="top"></span>The socket was not open.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309515"> </a>Comments 
</h4>
<p class="Body">
  <a name="1309516"> </a>Called by applications to set up a socket listener.
</p>
<p class="Body">
  <a name="1309517"> </a>Since the serial link manager does not make a copy of the <span style="font-family: monospace">SlkSocketListenType</span> structure, but instead saves the passed pointer to it, the structure 
</p>

  <a name="1309518"> </a><p class="B1Bullet"> &#8226; must <span style="color: #333;;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">not</span> be an automatic variable (that is, local variable allocated on the stack) </p>

  <a name="1309519"> </a><p class="B1Bullet"> &#8226; may be a global variable in an application</p>

  <a name="1309520"> </a><p class="B1Bullet"> &#8226; may be a locked chunk allocated from the dynamic heap </p>
<p class="Body">
  <a name="1309522"> </a>The <span style="font-family: monospace">SlkSocketListenType</span> structure specifies pointers to the socket listener procedure and the data buffers for dispatching packets destined for this socket. Pointers to two buffers must be specified: the packet header buffer (size of <span style="font-family: monospace">SlkPktHeaderType</span>), and the packet body (client data) buffer. The packet body buffer must be large enough for the largest expected client data size. Both buffers may be application global variables or locked chunks allocated from the dynamic heap. 
</p>
<p class="Body">
  <a name="1309526"> </a>The socket listener procedure is called when a valid packet is received for the socket. Pointers to the packet header buffer and the packet body buffer are passed as parameters to the socket listener procedure. 
</p>
<div class="NINoteImportant"><hr>
  <a name="1309527"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> The application is responsible for freeing the <span style="font-family: monospace">SlkSocketListenType</span> structure or the allocated buffers when the socket is closed. The serial link manager doesn't do it. 
<hr>
</div>
<h4 class="RefSide">
  <a name="1311816"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1311822"> </a>If <a href="CompatibilityApdx.html#973074">5.0 New Feature Set</a> is present this function is unimplemented.
</p>

<h2 class="HBHeadB">
  <a name="1309531"> </a>SlkSocketPortID
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309532"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309533"> </a>Get the port ID associated with a particular socket; for use with the new serial manager.
</p>
<h4 class="RefSide">
  <a name="1309534"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309535"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309536"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309537"> </a>Err<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">	</span>SlkSocketPortID (UInt16 socket, UInt16 * portIDP)
</p>
<h4 class="RefSide">
  <a name="1309538"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309539"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socket</span></td><td valign="top">The socket ID.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309540"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">&lt;-&gt; <span style="font-family: monospace">portIDP</span></td><td valign="top">Pointer to location for returning the port ID.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309541"> </a>Result 
</h4>
<h5 class="P1"><a name="1309542"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309544"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrSocketNotOpen</td><td valign="top"></span>The socket was not open.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309545"> </a>Compatibility 
</h4>
<p class="Body">
  <a name="1309549"> </a>Implemented only if <a href="CompatibilityApdx.html#970840">New Serial Manager Feature Set</a> is present.
</p>

<h2 class="HBHeadB">
  <a name="1309567"> </a>SlkSocketSetTimeout
<a href="#1309309"><img src="images/top.gif" border="0"></a></h2>

<h4 class="RefSide">
  <a name="1309568"> </a>Purpose 
</h4>
<p class="Body">
  <a name="1309569"> </a>Set the interbyte packet receive-timeout for a particular socket.
</p>
<h4 class="RefSide">
  <a name="1309570"> </a>Declared In 
</h4>
<p class="Body">
  <a name="1309571"> </a>SerialLinkMgr.h
</p>
<h4 class="RefSide">
  <a name="1309572"> </a>Prototype 
</h4>
<p class="RefPrototype">
  <a name="1309574"> </a>Err<span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span>SlkSocketSetTimeout (UInt16 socket, Int32 timeout)
</p>
<h4 class="RefSide">
  <a name="1309575"> </a>Parameters 
</h4>
<h5 class="P1"><a name="1309576"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">socket</span></td><td valign="top">Socket ID.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309577"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">-&gt; <span style="font-family: monospace">timeout</span></td><td valign="top">Interbyte packet receive-timeout in system ticks.</td>
  </tr>
</table>
</div></h5>
<h4 class="RefSide">
  <a name="1309578"> </a>Result 
</h4>
<h5 class="P1"><a name="1309579"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">0</td><td valign="top">No error.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="1309581"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top"><span style="color: #333;;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">slkErrSocketNotOpen</td><td valign="top"></span>The socket was not open.</td>
  </tr>
</table>
</div></h5>
&nbsp;<br>
				<!-- CONTENT_END -->

		</td>
		<td width="5">&nbsp;&nbsp;</td>
	</tr>
      </table>
    </td>
			</tr>
  <tr>
				<td>
					<table border="0" cellpadding="0" cellspacing="0" width="760">
        <!-- CONTENTCELL_END -->
        <tr valign="top"> 
          <td width="10">&nbsp;<!-- FOOTER_START --></td>
          <td width="72">&nbsp;</td>
          <td width="25" bgcolor="white" background="images/bkgrnd.gif">&nbsp;</td>
          <td width="600"> 
            <table border="0" cellpadding="0" cellspacing="0" width="600">
              <tr> 
                <td><img src="images/rule_10-1-5_ltblue.gif" width="600" height="16" border="0"></td>
              </tr>
              <tr> 
                <td> 
                  <p align="center" class="footer"> ©2002 PalmSource, Inc. and its affiliates.  All rights reserved. 
<a href="http://www.palmos.com/dev/training/">Training</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a>&nbsp;|&nbsp;<a href="http://www.palmos.com/">Palm&nbsp;OS&nbsp;Platform</a>&nbsp;|&nbsp;<a href="Reference_Front.html" target="_blank">Legal Notices</a>&nbsp;<br>
												<!-- FOOTER_END --><br>
											</p>
                </td>
              </tr>
            </table>
          </td>
        </tr>
      </table>
				</td>
			</tr>
</table>
</BODY>
</HTML>