<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on 2003-09-18 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>GNU <CODE>make</CODE>: Parallel</TITLE>

<META NAME="description" CONTENT="GNU <CODE>make</CODE>: Parallel">
<META NAME="keywords" CONTENT="GNU <CODE>make</CODE>: Parallel">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY >

<A NAME="SEC55"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_50.html#SEC54"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_52.html#SEC56"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_48.html#SEC52"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_48.html#SEC52"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_61.html#SEC65"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> 5.3 Parallel Execution </H2>
<!--docid::SEC55::-->
<P>

GNU <CODE>make</CODE> knows how to execute several commands at once.
Normally, <CODE>make</CODE> will execute only one command at a time, waiting
for it to finish before executing the next.  However, the <SAMP>`-j'</SAMP> or
<SAMP>`--jobs'</SAMP> option tells <CODE>make</CODE> to execute many commands
simultaneously.</P><P>

On MS-DOS, the <SAMP>`-j'</SAMP> option has no effect, since that system doesn't
support multi-processing.
</P><P>

If the <SAMP>`-j'</SAMP> option is followed by an integer, this is the number of
commands to execute at once; this is called the number of <EM>job slots</EM>.
If there is nothing looking like an integer after the <SAMP>`-j'</SAMP> option,
there is no limit on the number of job slots.  The default number of job
slots is one, which means serial execution (one thing at a time).
</P><P>

One unpleasant consequence of running several commands simultaneously is
that output generated by the commands appears whenever each command
sends it, so messages from different commands may be interspersed.
</P><P>

Another problem is that two processes cannot both take input from the
same device; so to make sure that only one command tries to take input
from the terminal at once, <CODE>make</CODE> will invalidate the standard
input streams of all but one running command.  This means that
attempting to read from standard input will usually be a fatal error (a
<SAMP>`Broken pipe'</SAMP> signal) for most child processes if there are
several.
<A NAME="IDX174"></A>
<A NAME="IDX175"></A>
</P><P>

It is unpredictable which command will have a valid standard input stream
(which will come from the terminal, or wherever you redirect the standard
input of <CODE>make</CODE>).  The first command run will always get it first, and
the first command started after that one finishes will get it next, and so
on.
</P><P>

We will change how this aspect of <CODE>make</CODE> works if we find a better
alternative.  In the mean time, you should not rely on any command using
standard input at all if you are using the parallel execution feature; but
if you are not using this feature, then standard input works normally in
all commands.
</P><P>

Finally, handling recursive <CODE>make</CODE> invocations raises issues.  For
more information on this, see
<A HREF="make_57.html#SEC61">Communicating Options to a Sub-<CODE>make</CODE></A>.
</P><P>

If a command fails (is killed by a signal or exits with a nonzero
status), and errors are not ignored for that command
(see section <A HREF="make_52.html#SEC56">Errors in Commands</A>),
the remaining command lines to remake the same target will not be run.
If a command fails and the <SAMP>`-k'</SAMP> or <SAMP>`--keep-going'</SAMP>
option was not given
(see section <A HREF="make_98.html#SEC102">Summary of Options</A>),
<CODE>make</CODE> aborts execution.  If make
terminates for any reason (including a signal) with child processes
running, it waits for them to finish before actually exiting.</P><P>

<A NAME="IDX176"></A>
<A NAME="IDX177"></A>
<A NAME="IDX178"></A>
<A NAME="IDX179"></A>
<A NAME="IDX180"></A>
<A NAME="IDX181"></A>
When the system is heavily loaded, you will probably want to run fewer jobs
than when it is lightly loaded.  You can use the <SAMP>`-l'</SAMP> option to tell
<CODE>make</CODE> to limit the number of jobs to run at once, based on the load
average.  The <SAMP>`-l'</SAMP> or <SAMP>`--max-load'</SAMP>
option is followed by a floating-point number.  For
example,
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=example><pre>-l 2.5
</pre></td></tr></table></P><P>

will not let <CODE>make</CODE> start more than one job if the load average is
above 2.5.  The <SAMP>`-l'</SAMP> option with no following number removes the
load limit, if one was given with a previous <SAMP>`-l'</SAMP> option.</P><P>

More precisely, when <CODE>make</CODE> goes to start up a job, and it already has
at least one job running, it checks the current load average; if it is not
lower than the limit given with <SAMP>`-l'</SAMP>, <CODE>make</CODE> waits until the load
average goes below that limit, or until all the other jobs finish.
</P><P>

By default, there is no load limit.
</P><P>

<A NAME="Errors"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_50.html#SEC54"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_52.html#SEC56"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_48.html#SEC52"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_48.html#SEC52"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_61.html#SEC65"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[Index]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="make_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>

</BODY>
</HTML>
