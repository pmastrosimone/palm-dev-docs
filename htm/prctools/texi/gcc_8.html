<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on 2003-09-18 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Using the GNU Compiler Collection: Warning Options</TITLE>

<META NAME="description" CONTENT="Using the GNU Compiler Collection: Warning Options">
<META NAME="keywords" CONTENT="Using the GNU Compiler Collection: Warning Options">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY >

<A NAME="SEC8"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_7.html#SEC7"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_9.html#SEC9"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_9.html#SEC9"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_2.html#SEC2"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_46.html#SEC46"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_157.html#SEC157">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H2> 2.6 Options to Request or Suppress Warnings </H2>
<!--docid::SEC8::-->
<P>

Warnings are diagnostic messages that report constructions which
are not inherently erroneous but which are risky or suggest there
may have been an error.
</P><P>

You can request many specific warnings with options beginning <SAMP>`-W'</SAMP>,
for example <SAMP>`-Wimplicit'</SAMP> to request warnings on implicit
declarations.  Each of these specific warning options also has a
negative form beginning <SAMP>`-Wno-'</SAMP> to turn off warnings;
for example, <SAMP>`-Wno-implicit'</SAMP>.  This manual lists only one of the
two forms, whichever is not the default.
</P><P>

These options control the amount and kinds of warnings produced by GCC:
</P><P>

<DL COMPACT>
<A NAME="IDX59"></A>
<DT><CODE>-fsyntax-only</CODE>
<DD>Check the code for syntax errors, but don't do anything beyond that.
<P>

<DT><CODE>-pedantic</CODE>
<DD>Issue all the warnings demanded by strict ANSI C and ISO C++;
reject all programs that use forbidden extensions.
<P>

Valid ANSI C and ISO C++ programs should compile properly with or without
this option (though a rare few will require <SAMP>`-ansi'</SAMP>).  However,
without this option, certain GNU extensions and traditional C and C++
features are supported as well.  With this option, they are rejected.
</P><P>

<SAMP>`-pedantic'</SAMP> does not cause warning messages for use of the
alternate keywords whose names begin and end with <SAMP>`__'</SAMP>.  Pedantic
warnings are also disabled in the expression that follows
<CODE>__extension__</CODE>.  However, only system header files should use
these escape routes; application programs should avoid them.
See section <A HREF="gcc_104.html#SEC104">4.36 Alternate Keywords</A>.
</P><P>

This option is not intended to be <I>useful</I>; it exists only to satisfy
pedants who would otherwise claim that GCC fails to support the ANSI
standard.
</P><P>

Some users try to use <SAMP>`-pedantic'</SAMP> to check programs for strict ANSI
C conformance.  They soon find that it does not do quite what they want:
it finds some non-ANSI practices, but not all--only those for which
ANSI C <EM>requires</EM> a diagnostic.
</P><P>

A feature to report any failure to conform to ANSI C might be useful in
some instances, but would require considerable additional work and would
be quite different from <SAMP>`-pedantic'</SAMP>.  We don't have plans to
support such a feature in the near future.
</P><P>

<DT><CODE>-pedantic-errors</CODE>
<DD>Like <SAMP>`-pedantic'</SAMP>, except that errors are produced rather than
warnings.
<P>

<DT><CODE>-w</CODE>
<DD>Inhibit all warning messages.
<P>

<DT><CODE>-Wno-import</CODE>
<DD>Inhibit warning messages about the use of <SAMP>`#import'</SAMP>.
<P>

<DT><CODE>-Wchar-subscripts</CODE>
<DD>Warn if an array subscript has type <CODE>char</CODE>.  This is a common cause
of error, as programmers often forget that this type is signed on some
machines.
<P>

<DT><CODE>-Wcomment</CODE>
<DD>Warn whenever a comment-start sequence <SAMP>`/*'</SAMP> appears in a <SAMP>`/*'</SAMP>
comment, or whenever a Backslash-Newline appears in a <SAMP>`//'</SAMP> comment.
<P>

<DT><CODE>-Wformat</CODE>
<DD>Check calls to <CODE>printf</CODE> and <CODE>scanf</CODE>, etc., to make sure that
the arguments supplied have types appropriate to the format string
specified.
<P>

<DT><CODE>-Wimplicit-int</CODE>
<DD>Warn when a declaration does not specify a type.
<P>

<DT><CODE>-Wimplicit-function-declaration</CODE>
<DD><DT><CODE>-Werror-implicit-function-declaration</CODE>
<DD>Give a warning (or error) whenever a function is used before being
declared.
<P>

<DT><CODE>-Wimplicit</CODE>
<DD>Same as <SAMP>`-Wimplicit-int'</SAMP> and <SAMP>`-Wimplicit-function-'</SAMP><BR>
<SAMP>`declaration'</SAMP>.
<P>

<DT><CODE>-Wmain</CODE>
<DD>Warn if the type of <SAMP>`main'</SAMP> is suspicious.  <SAMP>`main'</SAMP> should be a
function with external linkage, returning int, taking either zero
arguments, two, or three arguments of appropriate types.
<P>

<DT><CODE>-Wmultichar</CODE>
<DD>Warn if a multicharacter constant (<SAMP>`'FOOF''</SAMP>) is used.  Usually they
indicate a typo in the user's code, as they have implementation-defined
values, and should not be used in portable code.
  
<DT><CODE>-Wparentheses</CODE>
<DD>Warn if parentheses are omitted in certain contexts, such
as when there is an assignment in a context where a truth value
is expected, or when operators are nested whose precedence people
often get confused about.
<P>

Also warn about constructions where there may be confusion to which
<CODE>if</CODE> statement an <CODE>else</CODE> branch belongs.  Here is an example of
such a case:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>{
  if (a)
    if (b)
      foo ();
  else
    bar ();
}
</FONT></pre></td></tr></table></P><P>

In C, every <CODE>else</CODE> branch belongs to the innermost possible <CODE>if</CODE>
statement, which in this example is <CODE>if (b)</CODE>.  This is often not
what the programmer expected, as illustrated in the above example by
indentation the programmer chose.  When there is the potential for this
confusion, GNU C will issue a warning when this flag is specified.
To eliminate the warning, add explicit braces around the innermost
<CODE>if</CODE> statement so there is no way the <CODE>else</CODE> could belong to
the enclosing <CODE>if</CODE>.  The resulting code would look like this:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>{
  if (a)
    {
      if (b)
        foo ();
      else
        bar ();
    }
}
</FONT></pre></td></tr></table></P><P>

<DT><CODE>-Wreturn-type</CODE>
<DD>Warn whenever a function is defined with a return-type that defaults
to <CODE>int</CODE>.  Also warn about any <CODE>return</CODE> statement with no
return-value in a function whose return-type is not <CODE>void</CODE>.
<P>

<DT><CODE>-Wswitch</CODE>
<DD>Warn whenever a <CODE>switch</CODE> statement has an index of enumeral type
and lacks a <CODE>case</CODE> for one or more of the named codes of that
enumeration.  (The presence of a <CODE>default</CODE> label prevents this
warning.)  <CODE>case</CODE> labels outside the enumeration range also
provoke warnings when this option is used.
<P>

<DT><CODE>-Wtrigraphs</CODE>
<DD>Warn if any trigraphs are encountered (assuming they are enabled).
<P>

<DT><CODE>-Wunused</CODE>
<DD>Warn whenever a variable is unused aside from its declaration,
whenever a function is declared static but never defined, whenever a
label is declared but not used, and whenever a statement computes a
result that is explicitly not used.
<P>

In order to get a warning about an unused function parameter, you must
specify both <SAMP>`-W'</SAMP> and <SAMP>`-Wunused'</SAMP>.
</P><P>

To suppress this warning for an expression, simply cast it to void.  For
unused variables, parameters and labels, use the <SAMP>`unused'</SAMP> attribute
(see section <A HREF="gcc_90.html#SEC90">4.29 Specifying Attributes of Variables</A>).
</P><P>

<DT><CODE>-Wuninitialized</CODE>
<DD>An automatic variable is used without first being initialized.
<P>

These warnings are possible only in optimizing compilation,
because they require data flow information that is computed only
when optimizing.  If you don't specify <SAMP>`-O'</SAMP>, you simply won't
get these warnings.
</P><P>

These warnings occur only for variables that are candidates for
register allocation.  Therefore, they do not occur for a variable that
is declared <CODE>volatile</CODE>, or whose address is taken, or whose size
is other than 1, 2, 4 or 8 bytes.  Also, they do not occur for
structures, unions or arrays, even when they are in registers.
</P><P>

Note that there may be no warning about a variable that is used only
to compute a value that itself is never used, because such
computations may be deleted by data flow analysis before the warnings
are printed.
</P><P>

These warnings are made optional because GCC is not smart
enough to see all the reasons why the code might be correct
despite appearing to have an error.  Here is one example of how
this can happen:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>{
  int x;
  switch (y)
    {
    case 1: x = 1;
      break;
    case 2: x = 4;
      break;
    case 3: x = 5;
    }
  foo (x);
}
</FONT></pre></td></tr></table></P><P>

If the value of <CODE>y</CODE> is always 1, 2 or 3, then <CODE>x</CODE> is
always initialized, but GCC doesn't know this.  Here is
another common case:
</P><P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>{
  int save_y;
  if (change_y) save_y = y, y = new_y;
  <small>...</small>
  if (change_y) y = save_y;
}
</FONT></pre></td></tr></table></P><P>

This has no bug because <CODE>save_y</CODE> is used only if it is set.
</P><P>

Some spurious warnings can be avoided if you declare all the functions
you use that never return as <CODE>noreturn</CODE>.  See section <A HREF="gcc_84.html#SEC84">4.23 Declaring Attributes of Functions</A>.
</P><P>

<DT><CODE>-Wunknown-pragmas</CODE>
<DD><A NAME="IDX60"></A>
<A NAME="IDX61"></A>
<A NAME="IDX62"></A>
Warn when a #pragma directive is encountered which is not understood by
GCC.  If this command line option is used, warnings will even be issued
for unknown pragmas in system header files.  This is not the case if
the warnings were only enabled by the <SAMP>`-Wall'</SAMP> command line option.
<P>

<DT><CODE>-Wall</CODE>
<DD>All of the above <SAMP>`-W'</SAMP> options combined.  This enables all the
warnings about constructions that some users consider questionable, and
that are easy to avoid (or modify to prevent the warning), even in
conjunction with macros.
</DL>
<P>

The following <SAMP>`-W<small>...</small>'</SAMP> options are not implied by <SAMP>`-Wall'</SAMP>.
Some of them warn about constructions that users generally do not
consider questionable, but which occasionally you might wish to check
for; others warn about constructions that are necessary or hard to avoid
in some cases, and there is no simple way to modify the code to suppress
the warning.
</P><P>

<DL COMPACT>
<DT><CODE>-W</CODE>
<DD>Print extra warning messages for these events:
<P>

<UL>
<A NAME="IDX63"></A>
<LI>
A nonvolatile automatic variable might be changed by a call to
<CODE>longjmp</CODE>.  These warnings as well are possible only in
optimizing compilation.
<P>

The compiler sees only the calls to <CODE>setjmp</CODE>.  It cannot know
where <CODE>longjmp</CODE> will be called; in fact, a signal handler could
call it at any point in the code.  As a result, you may get a warning
even when there is in fact no problem because <CODE>longjmp</CODE> cannot
in fact be called at the place which would cause a problem.
</P><P>

<LI>
A function can return either with or without a value.  (Falling
off the end of the function body is considered returning without
a value.)  For example, this function would evoke such a
warning:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>foo (a)
{
  if (a &#62; 0)
    return a;
}
</FONT></pre></td></tr></table></P><P>

<LI>
An expression-statement or the left-hand side of a comma expression
contains no side effects.
To suppress the warning, cast the unused expression to void.
For example, an expression such as <SAMP>`x[i,j]'</SAMP> will cause a warning,
but <SAMP>`x[(void)i,j]'</SAMP> will not.
<P>

<LI>
An unsigned value is compared against zero with <SAMP>`&#60;'</SAMP> or <SAMP>`&#60;='</SAMP>.
<P>

<LI>
A comparison like <SAMP>`x&#60;=y&#60;=z'</SAMP> appears; this is equivalent to
<SAMP>`(x&#60;=y ? 1 : 0) &#60;= z'</SAMP>, which is a different interpretation from
that of ordinary mathematical notation.
<P>

<LI>
Storage-class specifiers like <CODE>static</CODE> are not the first things in
a declaration.  According to the C Standard, this usage is obsolescent.
<P>

<LI>
If <SAMP>`-Wall'</SAMP> or <SAMP>`-Wunused'</SAMP> is also specified, warn about unused
arguments.
<P>

<LI>
A comparison between signed and unsigned values could produce an
incorrect result when the signed value is converted to unsigned.
(But don't warn if <SAMP>`-Wno-sign-compare'</SAMP> is also specified.)
<P>

<LI>
An aggregate has a partly bracketed initializer.
For example, the following code would evoke such a warning,
because braces are missing around the initializer for <CODE>x.h</CODE>:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>struct s { int f, g; };
struct t { struct s h; int i; };
struct t x = { 1, 2, 3 };
</FONT></pre></td></tr></table></P><P>

<LI>
An aggregate has an initializer which does not initialize all members.
For example, the following code would cause such a warning, because
<CODE>x.h</CODE> would be implicitly initialized to zero:
<P>

<TABLE><tr><td>&nbsp;</td><td class=smallexample><FONT SIZE=-1><pre>struct s { int f, g, h; };
struct s x = { 3, 4 };
</FONT></pre></td></tr></table></UL>
<P>

<DT><CODE>-Wtraditional</CODE>
<DD>Warn about certain constructs that behave differently in traditional and
ANSI C.
<P>

<UL>
<LI>
Macro arguments occurring within string constants in the macro body.
These would substitute the argument in traditional C, but are part of
the constant in ANSI C.
<P>

<LI>
A function declared external in one block and then used after the end of
the block.
<P>

<LI>
A <CODE>switch</CODE> statement has an operand of type <CODE>long</CODE>.
<P>

<LI>
A non-<CODE>static</CODE> function declaration follows a <CODE>static</CODE> one.
This construct is not accepted by some traditional C compilers.
</UL>
<P>

<DT><CODE>-Wundef</CODE>
<DD>Warn if an undefined identifier is evaluated in an <SAMP>`#if'</SAMP> directive.
<P>

<DT><CODE>-Wshadow</CODE>
<DD>Warn whenever a local variable shadows another local variable.
<P>

<DT><CODE>-Wid-clash-<VAR>len</VAR></CODE>
<DD>Warn whenever two distinct identifiers match in the first <VAR>len</VAR>
characters.  This may help you prepare a program that will compile
with certain obsolete, brain-damaged compilers.
<P>

<DT><CODE>-Wlarger-than-<VAR>len</VAR></CODE>
<DD>Warn whenever an object of larger than <VAR>len</VAR> bytes is defined.
<P>

<DT><CODE>-Wpointer-arith</CODE>
<DD>Warn about anything that depends on the "size of" a function type or
of <CODE>void</CODE>.  GNU C assigns these types a size of 1, for
convenience in calculations with <CODE>void *</CODE> pointers and pointers
to functions.
<P>

<DT><CODE>-Wbad-function-cast</CODE>
<DD>Warn whenever a function call is cast to a non-matching type.
For example, warn if <CODE>int malloc()</CODE> is cast to <CODE>anything *</CODE>.
<P>

<DT><CODE>-Wcast-qual</CODE>
<DD>Warn whenever a pointer is cast so as to remove a type qualifier from
the target type.  For example, warn if a <CODE>const char *</CODE> is cast
to an ordinary <CODE>char *</CODE>.
<P>

<DT><CODE>-Wcast-align</CODE>
<DD>Warn whenever a pointer is cast such that the required alignment of the
target is increased.  For example, warn if a <CODE>char *</CODE> is cast to
an <CODE>int *</CODE> on machines where integers can only be accessed at
two- or four-byte boundaries.
<P>

<DT><CODE>-Wwrite-strings</CODE>
<DD>Give string constants the type <CODE>const char[<VAR>length</VAR>]</CODE> so that
copying the address of one into a non-<CODE>const</CODE> <CODE>char *</CODE>
pointer will get a warning.  These warnings will help you find at
compile time code that can try to write into a string constant, but
only if you have been very careful about using <CODE>const</CODE> in
declarations and prototypes.  Otherwise, it will just be a nuisance;
this is why we did not make <SAMP>`-Wall'</SAMP> request these warnings.
<P>

<DT><CODE>-Wconversion</CODE>
<DD>Warn if a prototype causes a type conversion that is different from what
would happen to the same argument in the absence of a prototype.  This
includes conversions of fixed point to floating and vice versa, and
conversions changing the width or signedness of a fixed point argument
except when the same as the default promotion.
<P>

Also, warn if a negative integer constant expression is implicitly
converted to an unsigned type.  For example, warn about the assignment
<CODE>x = -1</CODE> if <CODE>x</CODE> is unsigned.  But do not warn about explicit
casts like <CODE>(unsigned) -1</CODE>.
</P><P>

<DT><CODE>-Wsign-compare</CODE>
<DD><A NAME="IDX64"></A>
<A NAME="IDX65"></A>
<A NAME="IDX66"></A>
Warn when a comparison between signed and unsigned values could produce
an incorrect result when the signed value is converted to unsigned.
This warning is also enabled by <SAMP>`-W'</SAMP>; to get the other warnings
of <SAMP>`-W'</SAMP> without this warning, use <SAMP>`-W -Wno-sign-compare'</SAMP>.
<P>

<DT><CODE>-Waggregate-return</CODE>
<DD>Warn if any functions that return structures or unions are defined or
called.  (In languages where you can return an array, this also elicits
a warning.)
<P>

<DT><CODE>-Wstrict-prototypes</CODE>
<DD>Warn if a function is declared or defined without specifying the
argument types.  (An old-style function definition is permitted without
a warning if preceded by a declaration which specifies the argument
types.)
<P>

<DT><CODE>-Wmissing-prototypes</CODE>
<DD>Warn if a global function is defined without a previous prototype
declaration.  This warning is issued even if the definition itself
provides a prototype.  The aim is to detect global functions that fail
to be declared in header files.
<P>

<DT><CODE>-Wmissing-declarations</CODE>
<DD>Warn if a global function is defined without a previous declaration.
Do so even if the definition itself provides a prototype.
Use this option to detect global functions that are not declared in
header files.
<P>

<DT><CODE>-Wmissing-noreturn</CODE>
<DD>Warn about functions which might be candidates for attribute <CODE>noreturn</CODE>.
Note these are only possible candidates, not absolute ones.  Care should
be taken to manually verify functions actually do not ever return before
adding the <CODE>noreturn</CODE> attribute, otherwise subtle code generation
bugs could be introduced.
<P>

<DT><CODE>-Wredundant-decls</CODE>
<DD>Warn if anything is declared more than once in the same scope, even in
cases where multiple declaration is valid and changes nothing.
<P>

<DT><CODE>-Wnested-externs</CODE>
<DD>Warn if an <CODE>extern</CODE> declaration is encountered within an function.
<P>

<DT><CODE>-Winline</CODE>
<DD>Warn if a function can not be inlined, and either it was declared as inline,
or else the <SAMP>`-finline-functions'</SAMP> option was given.
<P>

<DT><CODE>-Wlong-long</CODE>
<DD>Warn if <SAMP>`long long'</SAMP> type is used.  This is default.  To inhibit
the warning messages, use <SAMP>`-Wno-long-long'</SAMP>.  Flags
<SAMP>`-Wlong-long'</SAMP> and <SAMP>`-Wno-long-long'</SAMP> are taken into account
only when <SAMP>`-pedantic'</SAMP> flag is used.
<P>

<DT><CODE>-Werror</CODE>
<DD>Make all warnings into errors.
</DL>
<P>

<A NAME="Debugging Options"></A>
<HR SIZE=1>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_7.html#SEC7"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_9.html#SEC9"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_9.html#SEC9"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_2.html#SEC2"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_46.html#SEC46"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_157.html#SEC157">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="gcc_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>

</BODY>
</HTML>
