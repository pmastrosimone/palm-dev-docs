<HTML>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!-- Created on 2003-09-18 by texi2html 1.64 -->
<!-- 
Written by: Lionel Cons <Lionel.Cons@cern.ch> (original author)
            Karl Berry  <karl@freefriends.org>
            Olaf Bachmann <obachman@mathematik.uni-kl.de>
            and many others.
Maintained by: Olaf Bachmann <obachman@mathematik.uni-kl.de>
Send bugs and suggestions to <texi2html@mathematik.uni-kl.de>
 
-->
<HEAD>
<TITLE>Using as: MIPS Object</TITLE>

<META NAME="description" CONTENT="Using as: MIPS Object">
<META NAME="keywords" CONTENT="Using as: MIPS Object">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META NAME="Generator" CONTENT="texi2html 1.64">

</HEAD>

<BODY >

<A NAME="SEC321"></A>
<TABLE CELLPADDING=1 CELLSPACING=1 BORDER=0>
<TR><TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_311.html#SEC320"> &lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_313.html#SEC322"> &gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_313.html#SEC322"> &lt;&lt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_310.html#SEC319"> Up </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_319.html#SEC328"> &gt;&gt; </A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT"> &nbsp; <TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as.html#SEC_Top">Top</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_toc.html#SEC_Contents">Contents</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_438.html#SEC447">Index</A>]</TD>
<TD VALIGN="MIDDLE" ALIGN="LEFT">[<A HREF="as_abt.html#SEC_About"> ? </A>]</TD>
</TR></TABLE>
<HR SIZE=1>
<H3> 8.20.2 MIPS ECOFF object code </H3>
<!--docid::SEC321::-->
<P>

<A NAME="IDX988"></A>
<A NAME="IDX989"></A>
Assembling for a MIPS ECOFF target supports some additional sections
besides the usual <CODE>.text</CODE>, <CODE>.data</CODE> and <CODE>.bss</CODE>.  The
additional sections are <CODE>.rdata</CODE>, used for read-only data,
<CODE>.sdata</CODE>, used for small data, and <CODE>.sbss</CODE>, used for small
common objects.
</P><P>

<A NAME="IDX990"></A>
<A NAME="IDX991"></A>
When assembling for ECOFF, the assembler uses the <CODE>$gp</CODE> (<CODE>$28</CODE>)
register to form the address of a "small object".  Any object in the
<CODE>.sdata</CODE> or <CODE>.sbss</CODE> sections is considered "small" in this sense.
For external objects, or for objects in the <CODE>.bss</CODE> section, you can use
the <CODE>gcc</CODE> <SAMP>`-G'</SAMP> option to control the size of objects addressed via
<CODE>$gp</CODE>; the default value is 8, meaning that a reference to any object
eight bytes or smaller uses <CODE>$gp</CODE>.  Passing <SAMP>`-G 0'</SAMP> to
<CODE>as</CODE> prevents it from using the <CODE>$gp</CODE> register on the basis
of object size (but the assembler uses <CODE>$gp</CODE> for objects in <CODE>.sdata</CODE>
or <CODE>sbss</CODE> in any case).  The size of an object in the <CODE>.bss</CODE> section
is set by the <CODE>.comm</CODE> or <CODE>.lcomm</CODE> directive that defines it.  The
size of an external object may be set with the <CODE>.extern</CODE> directive.  For
example, <SAMP>`.extern sym,4'</SAMP> declares that the object at <CODE>sym</CODE> is 4 bytes
in length, whie leaving <CODE>sym</CODE> otherwise undefined.
</P><P>

Using small ECOFF objects requires linker support, and assumes that the
<CODE>$gp</CODE> register is correctly initialized (normally done automatically by
the startup code).  MIPS ECOFF assembly code must not modify the
<CODE>$gp</CODE> register.
</P><P>

<A NAME="MIPS Stabs"></A>
<HR SIZE=1>

</BODY>
</HTML>
