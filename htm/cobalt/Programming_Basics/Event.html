<html>
<head>
<title>(Protein) Event | Programming Basics</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:22:05">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="992934"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ProgrammingBasicsTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CmnLaunchCodes.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="EventCodes.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ProgrammingBasicsIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">7 &nbsp;&nbsp;
Event</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Programming Basics</p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="ProgrammingBasics_Part2.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="Event.html">7  Event</a></h1>

   <h2 class="SideTOC2"><a href="#992942">
   Event Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#992950">
      EventType</a></h3>

      <h3 class="SideTOC3"><a href="#992975">
      EvtQueueHandle</a></h3>

      <h3 class="SideTOC3"><a href="#993000">
      SysAppLaunchCmdBackgroundType</a></h3>

   <h2 class="SideTOC2"><a href="#994612">
   Event Constants</a></h2>

      <h3 class="SideTOC3"><a href="#994829">
      Event Flags</a></h3>

      <h3 class="SideTOC3"><a href="#1048811">
      Event Dispatch Types</a></h3>

      <h3 class="SideTOC3"><a href="#1045256">
      Event Error Codes</a></h3>

      <h3 class="SideTOC3"><a href="#1034100">
      Miscellaneous Event Constants</a></h3>

   <h2 class="SideTOC2"><a href="#1026540">
   Event Launch Codes</a></h2>

      <h3 class="SideTOC3"><a href="#1026557">
      sysAppLaunchCmdBackground</a></h3>

   <h2 class="SideTOC2"><a href="#994856">
   Event Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#1039050">
      EvtAcquireEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#994892">
      EvtAddEventToEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#995243">
      EvtAddEventToQueue</a></h3>

      <h3 class="SideTOC3"><a href="#995285">
      EvtAddEventToQueueAtTime</a></h3>

      <h3 class="SideTOC3"><a href="#1050907">
      EvtAddUniqueEventToEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#995335">
      EvtAddUniqueEventToQueue</a></h3>

      <h3 class="SideTOC3"><a href="#995385">
      EvtAddUniqueEventToQueueAtTime</a></h3>

      <h3 class="SideTOC3"><a href="#995443">
      EvtCreateBackgroundThread</a></h3>

      <h3 class="SideTOC3"><a href="#1053071">
      EvtDequeueKeyEvent</a></h3>

      <h3 class="SideTOC3"><a href="#995555">
      EvtDequeuePenPoint</a></h3>

      <h3 class="SideTOC3"><a href="#995662">
      EvtDequeuePenStrokeInfo</a></h3>

      <h3 class="SideTOC3"><a href="#995708">
      EvtEnqueueKey</a></h3>

      <h3 class="SideTOC3"><a href="#995797">
      EvtEventAvail</a></h3>

      <h3 class="SideTOC3"><a href="#995845">
      EvtEventToString</a></h3>

      <h3 class="SideTOC3"><a href="#995895">
      EvtFinishLastEvent</a></h3>

      <h3 class="SideTOC3"><a href="#995939">
      EvtFlushKeyQueue</a></h3>

      <h3 class="SideTOC3"><a href="#995979">
      EvtFlushNextPenStroke</a></h3>

      <h3 class="SideTOC3"><a href="#996019">
      EvtFlushPenQueue</a></h3>

      <h3 class="SideTOC3"><a href="#996063">
      EvtGetEvent</a></h3>

      <h3 class="SideTOC3"><a href="#996109">
      EvtGetEventDescriptor</a></h3>

      <h3 class="SideTOC3"><a href="#996188">
      EvtGetFocusWindow</a></h3>

      <h3 class="SideTOC3"><a href="#996236">
      EvtGetPen</a></h3>

      <h3 class="SideTOC3"><a href="#996286">
      EvtGetPenNative</a></h3>

      <h3 class="SideTOC3"><a href="#1037636">
      EvtGetReplyEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#996384">
      EvtGetThreadEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#996492">
      EvtKeydownIsVirtual</a></h3>

      <h3 class="SideTOC3"><a href="#996534">
      EvtKeyQueueEmpty</a></h3>

      <h3 class="SideTOC3"><a href="#996602">
      EvtLookupEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#996668">
      EvtPublishEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#996714">
      EvtReleaseEventQueue</a></h3>

      <h3 class="SideTOC3"><a href="#997028">
      EvtSetNullEventTick</a></h3>

      <h3 class="SideTOC3"><a href="#1049939">
      EvtSetPenDispatchFunc</a></h3>

      <h3 class="SideTOC3"><a href="#997070">
      EvtSysEventAvail</a></h3>

      <h3 class="SideTOC3"><a href="#997155">
      EvtWakeup</a></h3>

      <h3 class="SideTOC3"><a href="#997219">
      EvtWakeupWithoutNilEvent</a></h3>

   <h2 class="SideTOC2"><a href="#992930">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#1049306">
      EvtPenDispatchFunc</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="992936"> </a>This chapter provides reference documentation for the structures and functions that you use to manipulate events and event queues. This includes functions that allow you to create and communicate with threads in the background process.</p>

<p><a name="1038744"> </a>The contents of this chapter are organized as follows:</p>
   <blockquote class = "bq"><a name="992948"> </a><a href="Event.html#992942">Event Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="994618"> </a><a href="Event.html#994612">Event Constants</a></blockquote>
   <blockquote class = "bq"><a name="1040997"> </a><a href="Event.html#1026540">Event Launch Codes</a></blockquote>
   <blockquote class = "bq"><a name="994862"> </a><a href="Event.html#994856">Event Functions and Macros</a></blockquote>
   <blockquote class = "bq"><a name="1049311"> </a><a href="Event.html#992930">Application-Defined Functions</a></blockquote>

<p><a name="992938"> </a>The header file <code>Event.h</code> declares the API that this chapter describes. For reference documentation on some common system events, see <a href="EventCodes.html#992934">Chapter 8, "Event Codes."</a> For conceptual information on events and event queues, see <a href="EventLoop.html#977418">Chapter 3, "Events and the Event Loop."</a></p>

<h2 class="haH2">
  <a name="992942"> </a>Event Structures and Types <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="992950"> </a>EventType Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997268"> </a>Purpose 
</h4>

<p><a name="1020091"> </a>The <code>EventType</code> structure contains all of the data associated with a system event. All event types have some common data. Most events also have data specific to those events. The event-specific data uses a union that is part of the <code>EventType</code> data structure.</p>

<p><a name="1020094"> </a>The common data is documented below the structure. <a href="EventCodes.html#992934">Chapter 8, "Event Codes,"</a> documents each event and provides details on the important data associated with each type of event.</p>
<h4>
  <a name="997270"> </a>Declared In 
</h4>
<code>Event.h<a name="997271"> </a></code><h4>
  <a name="997272"> </a>Prototype 
</h4>
<pre class="proto"><a name="1006144"></a>typedef struct EventType {
   eventsEnum eType;
   Boolean penDown;
   uint8_t padding_1;
   uint16_t padding_2;
   uint32_t tapCount;
   Coord screenX;
   Coord screenY;
   union {
      ...
   } data;
} EventType;
</pre>
<pre class="proto"><a name="1003033"></a>typedef EventType *EventPtr
</pre>
<h4>
  <a name="1009613"> </a>Fields 
</h4>

<dl>
<dt><a name="1009856"> </a><code>eType</code></dt>
<dd><a name="1010161"> </a>The type of the event. See <a href="EventCodes.html#995464">"Event Codes Events"</a> for a complete list of events.</dd>

<dt><a name="1010274"> </a><code>penDown</code></dt>
<dd><a name="1010383"> </a><code>true</code> if the pen was down at the time of the event, otherwise <code>false</code>.</dd>

<dt><a name="1010970"> </a><code>padding_1</code></dt>
<dd><a name="1010971"> </a>Padding bytes, for alignment purposes.</dd>

<dt><a name="1010972"> </a><code>padding_2</code></dt>
<dd><a name="1010615"> </a>Padding bytes, for alignment purposes.</dd>

<dt><a name="1010616"> </a><code>tapCount</code></dt>
<dd><a name="1010617"> </a>The number of taps received at this location. This value is used mainly by fields. When the user taps in a text field, two taps selects a word, and three taps selects the entire line. </dd>

<dt><a name="1010674"> </a><code>screenX</code></dt>
<dd><a name="1010735"> </a>Window-relative position of the pen in pixels (number of pixels from the left bound of the window).</dd>

<dt><a name="1010788"> </a><code>screenY</code></dt>
<dd><a name="1010833"> </a>Window-relative position of the pen in pixels (number of pixels from the top left of the window).</dd>

<dt><a name="1010878"> </a><code>data</code></dt>
<dd><a name="1010879"> </a>The specific data for an event, if any. The data is a union, and its exact contents depend on the <code class="par">eType</code> field. See <a href="EventCodes.html#992934">Chapter 8, "Event Codes,"</a> for more information on the event types and the structures that may accompany them.</dd>

</dl>

<h3 class="hbH3">
  <a name="992975"> </a>EvtQueueHandle Typedef <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="992980"> </a>Purpose 
</h4>

<p><a name="992983"> </a>A handle for a thread's event queue.</p>
<h4>
  <a name="992985"> </a>Declared In 
</h4>
<code>Event.h<a name="992988"> </a></code><h4>
  <a name="992990"> </a>Prototype 
</h4>
<pre class="proto"><a name="992993"></a>typedef void *EvtQueueHandle
</pre>
<h4>
  <a name="1026066"> </a>See Also 
</h4>

<p><a name="1026165"> </a><a href="Event.html#994892"><code>EvtAddEventToEventQueue()</code></a>, <a href="Event.html#995443"><code>EvtCreateBackgroundThread()</code></a>, <a href="Event.html#1037636"><code>EvtGetReplyEventQueue()</code></a>, <a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="993000"> </a>SysAppLaunchCmdBackgroundType Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993005"> </a>Purpose 
</h4>

<p><a name="993008"> </a>Structure that accompanies a <a href="Event.html#1026557"><code>sysAppLaunchCmdBackground</code></a> launch code and provides data supplied to the <a href="Event.html#995443"><code>EvtCreateBackgroundThread()</code></a> call that created the background thread.</p>
<h4>
  <a name="993010"> </a>Declared In 
</h4>
<code>Event.h<a name="993023"> </a></code><h4>
  <a name="993043"> </a>Prototype 
</h4>
<pre class="proto"><a name="993080"></a>typedef struct SysAppLaunchCmdBackgroundType {
   EvtQueueHandle callerQueue;
   MemPtr data;
   size_t dataSize;
} SysAppLaunchCmdBackgroundType
</pre>
<h4>
  <a name="993140"> </a>Fields 
</h4>

<dl>
<dt><a name="993183"> </a><code>callerQueue</code></dt>
<dd><a name="1025396"> </a>Event queue handle supplied when <a href="Event.html#995443"><code>EvtCreateBackgroundThread()</code></a> was called, or <code>NULL</code> if no handle was supplied. This handle is automatically released by the system when the thread terminates. This queue allows the background thread to post events back to the calling application.</dd>

<dt><a name="993267"> </a><code>data</code></dt>
<dd><a name="1025733"> </a>Pointer to a data block supplied when <code>EvtCreateBackgroundThread()</code> was called, or <code>NULL</code> if no data block pointer was supplied. This pointer is automatically released by the system when the thread terminates.</dd>

<dt><a name="993311"> </a><code>dataSize</code></dt>
<dd><a name="993313"> </a>Size of the data block pointed to by the <code>data</code> field. This is the value supplied to the call to <code>EvtCreateBackgroundThread()</code> that created the background thread. </dd>

</dl>

<h2 class="haH2">
  <a name="994612"> </a>Event Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="994829"> </a>Event Flags Enum <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994834"> </a>Purpose 
</h4>

<p><a name="994837"> </a>Flags that accompany certain events.</p>
<h4>
  <a name="994839"> </a>Declared In 
</h4>
<code>Event.h<a name="994842"> </a></code><h4>
  <a name="994844"> </a>Constants 
</h4>

<dl>
<dt><a name="994847"> </a><code>evtPenPressureFlag = 0x0001</code></dt>
<dd><a name="994849"> </a>This flag is set in the <code>flags</code> field of the <code>penDownMove</code> structure that accompanies a <code>penDownEvent</code> or <code>penMoveEvent</code> if there is pen pressure information available. The pen pressure value, if available, can be found in the <code>penDownMove</code> structure's <code>pressure</code> field.</dd>

</dl>

<h3 class="hbH3">
  <a name="1048811"> </a>Event Dispatch Types Enum <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1048869"> </a>Purpose 
</h4>

<p><a name="1048892"> </a>Values returned by your pen event filter function indicating how a given pen event should be handled.</p>
<h4>
  <a name="1048893"> </a>Declared In 
</h4>
<code>Event.h<a name="1048896"> </a></code><h4>
  <a name="1048905"> </a>Prototype 
</h4>
<pre class="proto"><a name="1048924"></a>typedef uint32_t EvtDispatchType;
</pre>
<h4>
  <a name="1048933"> </a>Constants 
</h4>

<dl>
<dt><a name="1048952"> </a><code>evtDispatchAbsorb = 0</code></dt>
<dd><a name="1048961"> </a>Deliver the event to the window and consume it. </dd>

<dt><a name="1048966"> </a><code>evtDispatchFallthrough = 1</code></dt>
<dd><a name="1049142"> </a>Ignore the pen event, and send it to the next window. Note that once you have allowed an event to fall through, you will not see this or any more events in the current motion delivered to your window.</dd>

</dl>

<h3 class="hbH3">
  <a name="1045256"> </a>Event Error Codes <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1045257"> </a>Purpose 
</h4>

<p><a name="1045258"> </a>Error codes returned by the various Event and System Event Manager functions (those defined here and those defined in <code>SysEvtMgr.h</code>).</p>
<h4>
  <a name="1045259"> </a>Declared In 
</h4>
<code>Event.h<a name="1045260"> </a></code><h4>
  <a name="1045261"> </a>Constants 
</h4>

<dl>
<dt><a name="1045263"> </a><code>#define evtErrNoQueue (evtErrorClass | 5)</code></dt>
<dd><a name="1045264"> </a>The specified event queue does not exist.</dd>

<dt><a name="1045266"> </a><code>#define evtErrParamErr (evtErrorClass | 1)</code></dt>
<dd><a name="1045267"> </a>One of the specified parameters is invalid.</dd>

<dt><a name="1045269"> </a><code>#define evtErrQueueBusy (evtErrorClass | 4)</code></dt>
<dd><a name="1045270"> </a></dd>

<dt><a name="1045272"> </a><code>#define evtErrQueueEmpty (evtErrorClass | 3)</code></dt>
<dd><a name="1045273"> </a>There are no events in the specified event queue.</dd>

<dt><a name="1045275"> </a><code>#define evtErrQueueFull (evtErrorClass | 2)</code></dt>
<dd><a name="1045276"> </a>The event could not be added to the queue because the event queue is full.</dd>

</dl>

<h3 class="hbH3">
  <a name="1034100"> </a>Miscellaneous Event Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1034101"> </a>Purpose 
</h4>

<p><a name="1034102"> </a>The header file <code>Event.h</code> defines these constants.</p>
<h4>
  <a name="1034103"> </a>Declared In 
</h4>
<code>Event.h<a name="1034104"> </a></code><h4>
  <a name="1034105"> </a>Constants 
</h4>

<dl>
<dt><a name="1034107"> </a><code>#define evtNoWait 0</code></dt>
<dd><a name="1034111"> </a>A timeout value you can supply to <a href="Event.html#996063"><code>EvtGetEvent()</code></a> to cause it to return immediately if there are no events waiting in the event queue.</dd>

<dt><a name="1034113"> </a><code>#define evtWaitForever -1</code></dt>
<dd><a name="1034117"> </a>A timeout value you can supply to <a href="Event.html#996063"><code>EvtGetEvent()</code></a> to cause the CPU to go into doze mode until the user provides input.</dd>

<dt><a name="1034119"> </a><code>#define virtualKeyMask (appEvtHookKeyMask | libEvtHookKeyMask | commandKeyMask)</code></dt>
<dd><a name="1034120"> </a>Mask value used by the <a href="Event.html#996492"><code>EvtKeydownIsVirtual()</code></a> macro to determine if a given event is a virtual character key down event.</dd>

</dl>

<h2 class="haH2">
  <a name="1026540"> </a>Event Launch Codes <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1026557"> </a>sysAppLaunchCmdBackground <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1026758"> </a>Purpose 
</h4>

<p><a name="1026931"> </a>Sent to the executable module that is launched in a background thread with <a href="Event.html#995443"><code>EvtCreateBackgroundThread()</code></a>.</p>
<h4>
  <a name="1027018"> </a>Declared In 
</h4>
<code>CmnLaunchCodes.h<a name="1027096"> </a></code><h4>
  <a name="1027174"> </a>Prototype 
</h4>
<pre class="proto"><a name="1027244"></a>#define sysAppLaunchCmdBackground 73


</pre>
<h4>
  <a name="1027389"> </a>Parameters 
</h4>

<p><a name="1027395"> </a>The launch code's parameter block pointer references a <a href="Event.html#993000"><code>SysAppLaunchCmdBackgroundType</code></a> structure.</p>

<h2 class="haH2">
  <a name="994856"> </a>Event Functions and Macros <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1039050"> </a>EvtAcquireEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1039064"> </a>Purpose 
</h4>

<p><a name="1039087"> </a>Acquires a reference on the given queue so that it won't become invalid until another <a href="Event.html#996714"><code>EvtReleaseEventQueue()</code></a> call is made on it.</p>
<h4>
  <a name="1039247"> </a>Declared In 
</h4>
<code>Event.h<a name="1039887"> </a></code><h4>
  <a name="1040043"> </a>Prototype 
</h4>
<pre class="proto"><a name="1040679"></a>void EvtAcquireEventQueue (
   EvtQueueHandle <code class="par">queue</code>
)
</pre>
<h4>
  <a name="1040835"> </a>Parameters 
</h4>

<dl>
<dt><a name="1040878"> </a><code>&rarr;  <i>queue</i></code></dt>
<dd><a name="1040911"> </a>Handle to the event queue.</dd>

</dl>
<h4>
  <a name="1040932"> </a>Returns 
</h4>

<p><a name="1040967"> </a>Nothing.</p>
<h4>
  <a name="1042049"> </a>Comments 
</h4>

<p><a name="1042211"> </a>This function is useful if, for example, you've gotten an <a href="Event.html#992975"><code>EvtQueueHandle</code></a> from somewhere and now want to give it to another thread. Call <code>EvtAcquireEventQueue()</code> and then pass the <code>EvtQueueHandle</code> to the other thread. When the other thread is done with the event queue, it should call <code>EvtReleaseEventQueue()</code>. Unlike <a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a>, <code>EvtAcquireEventQueue()</code> allows you to pass a handle to any event queue, not just the one associated with your thread.</p>

<h3 class="hbH3">
  <a name="994892"> </a>EvtAddEventToEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994897"> </a>Purpose 
</h4>

<p><a name="1021260"> </a>Send an event to a specific event queue.</p>
<h4>
  <a name="994902"> </a>Declared In 
</h4>
<code>Event.h<a name="994905"> </a></code><h4>
  <a name="994907"> </a>Prototype 
</h4>
<pre class="proto"><a name="994910"></a>status_t EvtAddEventToEventQueue (
   EvtQueueHandle <code class="par">queue</code>,
   const EventType <code class="par">*event</code>,
   EvtQueueHandle <code class="par">replyQueue</code>
)
</pre>
<h4>
  <a name="994933"> </a>Parameters 
</h4>

<dl>
<dt><a name="995002"> </a><code>&rarr;  <i>queue</i></code></dt>
<dd><a name="995074"> </a>Handle of the event queue to which the event is to be sent.</dd>

<dt><a name="995148"> </a><code>&rarr;  <i>event</i></code></dt>
<dd><a name="995222"> </a>Pointer to the event structure representing the event to be sent.</dd>

<dt><a name="995224"> </a><code>&rarr;  <i>replyQueue</i></code></dt>
<dd><a name="995226"> </a>Handle of the event queue to which a reply is to be sent, or <code>NULL</code> if the event handler doesn't need to generate an event in reply. The event handler can retrieve this value by calling <a href="Event.html#1037636"><code>EvtGetReplyEventQueue()</code></a>.</dd>

</dl>
<h4>
  <a name="995228"> </a>Returns 
</h4>

<p><a name="995231"> </a>Returns <code>errNone</code> if the event was successfully added to the queue, or one of the following otherwise:</p>

<dl>
<dt><a name="1043544"> </a><code>bndErrorDead</code></dt>
<dd><a name="1043545"> </a>The process that was hosting the event queue has gone away.</dd>

<dt><a name="1028237"> </a><code>evtErrQueueFull</code></dt>
<dd><a name="1028241"> </a>The event queue is full, or the target thread associated with the queue has gone away.</dd>

<dt><a name="1028243"> </a><code>evtErrNoQueue</code></dt>
<dd><a name="1028447"> </a><code class="par">queue</code> is <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1043963"> </a>Comments 
</h4>

<p><a name="1044044"> </a>Events can be sent with the restriction that only the top-level contents of the event structure will be copied. The event structure cannot contain pointers to strings or other data or objects.</p>
<h4>
  <a name="995238"> </a>See Also 
</h4>

<p><a name="995241"> </a><a href="Event.html#995443"><code>EvtCreateBackgroundThread()</code></a>, <a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a>, <a href="Event.html#996602"><code>EvtLookupEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="995243"> </a>EvtAddEventToQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995248"> </a>Purpose 
</h4>

<p><a name="995251"> </a>Add an event to the event queue.</p>
<h4>
  <a name="995253"> </a>Declared In 
</h4>
<code>Event.h<a name="995256"> </a></code><h4>
  <a name="995258"> </a>Prototype 
</h4>
<pre class="proto"><a name="995261"></a>status_t EvtAddEventToQueue (
   const EventType <code class="par">*event</code>
)
</pre>
<h4>
  <a name="995263"> </a>Parameters 
</h4>

<dl>
<dt><a name="995266"> </a><code>&rarr;  <i>event</i></code></dt>
<dd><a name="995268"> </a>Pointer to the structure that contains the event.</dd>

</dl>
<h4>
  <a name="995270"> </a>Returns 
</h4>

<p><a name="995273"> </a>Returns <code>errNone</code> if the event was successfully added to the event queue, or <code>evtErrQueueFull</code> otherwise.</p>
<h4>
  <a name="995275"> </a>Comments 
</h4>

<p><a name="995278"> </a>This function makes a copy of the structure that you pass in and adds it to the event queue.</p>

<h3 class="hbH3">
  <a name="995285"> </a>EvtAddEventToQueueAtTime Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995294"> </a>Purpose 
</h4>

<p><a name="995297"> </a>Add an event to the event queue at a specified time.</p>
<h4>
  <a name="995299"> </a>Declared In 
</h4>
<code>Event.h<a name="995302"> </a></code><h4>
  <a name="995304"> </a>Prototype 
</h4>
<pre class="proto"><a name="995307"></a>status_t EvtAddEventToQueueAtTime (
   uint64_t <code class="par">absoluteTime</code>,
   const EventType <code class="par">*event</code>
)
</pre>
<h4>
  <a name="995309"> </a>Parameters 
</h4>

<dl>
<dt><a name="995312"> </a><code>&rarr;  <i>absoluteTime</i></code></dt>
<dd><a name="995314"> </a>The time, in milliseconds. This value is the number of milliseconds since the device was last reset; you can get the current time by calling <a href="../System_Management/SysThread.html#994892"><code>SysGetRunTime()</code></a> and converting the resulting value to milliseconds with the <a href="PalmTypes.html#995457"><code>P_NS2MS()</code></a> macro.</dd>

<dt><a name="1022103"> </a><code>&rarr;  <i>event</i></code></dt>
<dd><a name="1022104"> </a>Pointer to the structure that contains the event.</dd>

</dl>
<h4>
  <a name="995320"> </a>Returns 
</h4>

<p><a name="1030910"> </a>Returns <code>errNone</code> if the event was successfully added to the event queue.</p>
<h4>
  <a name="1030911"> </a>Comments 
</h4>

<p><a name="1030912"> </a>This function makes a copy of the structure that you pass in and adds it to the event queue.</p>

<h3 class="hbH3">
  <a name="1050907"> </a>EvtAddUniqueEventToEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1050909"> </a>Purpose 
</h4>

<p><a name="1050910"> </a>Add an event to a specific event queue, replacing one of the same type if it is found. </p>
<h4>
  <a name="1050911"> </a>Declared In 
</h4>
<code>Event.h<a name="1050912"> </a></code><h4>
  <a name="1050913"> </a>Prototype 
</h4>
<pre class="proto"><a name="1050914"></a>status_t EvtAddUniqueEventToEventQueue (
   EvtQueueHandle <code class="par">queue</code>,
   const EventType <code class="par">*event</code>,
   uint32_t <code class="par">userCookie</code>,
   Boolean <code class="par">inPlace</code>
)
</pre>
<h4>
  <a name="1050915"> </a>Parameters 
</h4>

<dl>
<dt><a name="1051327"> </a><code>&rarr;  <i>queue</i></code></dt>
<dd><a name="1051328"> </a>Handle of the event queue to which the event is to be sent.</dd>

<dt><a name="1050916"> </a><code>&rarr;  <i>event</i></code></dt>
<dd><a name="1050917"> </a>Pointer to the structure that contains the event.</dd>

<dt><a name="1050918"> </a><code>&rarr;  <i>userCookie</i></code></dt>
<dd><a name="1050919"> </a>Event identifier. If this value is 0, this function matches on the first existing event that has the given type. Otherwise, it matches only on an event that has both the given type and the identifier supplied in this parameter.</dd>

<dt><a name="1050920"> </a><code>&rarr;  <i>inPlace</i></code></dt>
<dd><a name="1050921"> </a>If <code>true</code>, any existing event is replaced. If <code>false</code>, the existing event is deleted and a new event is added to end of queue.</dd>

</dl>
<h4>
  <a name="1050922"> </a>Returns 
</h4>

<p><a name="1050923"> </a>Returns <code>errNone</code> if the event was successfully added to the event queue, or <code>evtErrQueueFull</code> otherwise.</p>
<h4>
  <a name="1050924"> </a>Comments 
</h4>

<p><a name="1050925"> </a>This function looks in the specified event queue for an event of the same event type and <code class="par">userCookie</code> (if specified). The function replaces it with the new event, if found. </p>

<p><a name="1050926"> </a>If no existing event is found, the new event is copied to the specified queue. </p>

<p><a name="1050927"> </a>If an existing event is found, the function proceeds as follows:</p>
<ul type="disc">
  <li><a name="1050928"> </a>If <code class="par">inPlace</code> is <code>true</code>, the existing event is replaced with a copy of the new event.
  <li><a name="1050929"> </a>If <code class="par">inPlace</code> is <code>false</code>, the existing event is removed and the new event is added to the end of the queue.
</ul>

<h3 class="hbH3">
  <a name="995335"> </a>EvtAddUniqueEventToQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995340"> </a>Purpose 
</h4>

<p><a name="995343"> </a>Add an event to the event queue, replacing one of the same type if it is found. </p>
<h4>
  <a name="995345"> </a>Declared In 
</h4>
<code>Event.h<a name="995348"> </a></code><h4>
  <a name="995350"> </a>Prototype 
</h4>
<pre class="proto"><a name="995353"></a>status_t EvtAddUniqueEventToQueue (
   const EventType <code class="par">*eventP</code>,
   uint32_t <code class="par">userCookie</code>,
   Boolean <code class="par">inPlace</code>
)
</pre>
<h4>
  <a name="995355"> </a>Parameters 
</h4>

<dl>
<dt><a name="995358"> </a><code>&rarr;  <i>eventP</i></code></dt>
<dd><a name="995360"> </a>Pointer to the structure that contains the event.</dd>

<dt><a name="995362"> </a><code>&rarr;  <i>userCookie</i></code></dt>
<dd><a name="1031063"> </a>Event identifier. If this value is 0, this function matches on the first existing event that has the given type. Otherwise, it matches only on an event that has both the given type and the identifier supplied in this parameter.</dd>

<dt><a name="995366"> </a><code>&rarr;  <i>inPlace</i></code></dt>
<dd><a name="995368"> </a>If <code>true</code>, any existing event is replaced. If <code>false</code>, the existing event is deleted and a new event is added to end of queue.</dd>

</dl>
<h4>
  <a name="995370"> </a>Returns 
</h4>

<p><a name="1031034"> </a>Returns <code>errNone</code> if the event was successfully added to the event queue, or <code>evtErrQueueFull</code> otherwise.</p>
<h4>
  <a name="995375"> </a>Comments 
</h4>

<p><a name="999397"> </a>This function looks in the event queue for an event of the same event type and <code class="par">userCookie</code> (if specified). The routine replaces it with the new event, if found. </p>

<p><a name="999398"> </a>If no existing event is found, the new event is copied to the queue. </p>

<p><a name="999399"> </a>If an existing event is found, the routine proceeds as follows:</p>
<ul type="disc">
  <li><a name="999400"> </a>If <code class="par">inPlace</code> is <code>true</code>, the existing event is replaced with a copy of the new event.
  <li><a name="995378"> </a>If <code class="par">inPlace</code> is <code>false</code>, the existing event is removed and the new event is added to the end of the queue.
</ul>

<h3 class="hbH3">
  <a name="995385"> </a>EvtAddUniqueEventToQueueAtTime Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995394"> </a>Purpose 
</h4>

<p><a name="1022123"> </a>Add an event to the event queue at a specified time, replacing one of the same type if it is found. </p>
<h4>
  <a name="995399"> </a>Declared In 
</h4>
<code>Event.h<a name="995402"> </a></code><h4>
  <a name="995404"> </a>Prototype 
</h4>
<pre class="proto"><a name="995407"></a>status_t EvtAddUniqueEventToQueueAtTime (
   uint64_t <code class="par">absoluteTime</code>,
   const EventType <code class="par">*eventP</code>,
   uint32_t <code class="par">userCookie</code>,
   Boolean <code class="par">inPlace</code>
)
</pre>
<h4>
  <a name="995409"> </a>Parameters 
</h4>

<dl>
<dt><a name="995412"> </a><code>&rarr;  <i>absoluteTime</i></code></dt>
<dd><a name="1043730"> </a>The time, in milliseconds. This value is the number of milliseconds since the device was last reset; you can get the current time by calling <a href="../System_Management/SysThread.html#994892"><code>SysGetRunTime()</code></a> and converting the resulting value to milliseconds with the <a href="PalmTypes.html#995457"><code>P_NS2MS()</code></a> macro.</dd>

<dt><a name="1022127"> </a><code>&rarr;  <i>eventP</i></code></dt>
<dd><a name="1022128"> </a>Pointer to the structure that contains the event.</dd>

<dt><a name="1022136"> </a><code>&rarr;  <i>userCookie</i></code></dt>
<dd><a name="1032917"> </a>Event identifier. If this value is 0, this function matches on the first existing event that has the given type. Otherwise, it matches only on an event that has both the given type and the identifier supplied in this parameter.</dd>

<dt><a name="1022141"> </a><code>&rarr;  <i>inPlace</i></code></dt>
<dd><a name="1022142"> </a>If <code>true</code>, any existing event is replaced. If <code>false</code>, the existing event is deleted and a new event is added to end of queue.</dd>

</dl>
<h4>
  <a name="995428"> </a>Returns 
</h4>

<p><a name="1031038"> </a>Returns <code>errNone</code> if the event was successfully added to the event queue, or <code>evtErrQueueFull</code> otherwise.</p>
<h4>
  <a name="995433"> </a>Comments 
</h4>

<p><a name="1022162"> </a>This function looks for an event in the event queue of the same event type and <code class="par">userCookie</code> (if specified). The routine replaces it with the new event, if found. </p>

<p><a name="1022163"> </a>If no existing event is found, the new event is copied to the queue. </p>

<p><a name="1022164"> </a>If an existing event is found, the routine proceeds as follows:</p>
<ul type="disc">
  <li><a name="1022165"> </a>If <code class="par">inPlace</code> is <code>true</code>, the existing event is replaced with a copy of the new event.
</ul>

<p><a name="1022166"> </a>If <code class="par">inPlace</code> is <code>false</code>, the existing event is removed and the new event is added to the end of the queue.</p>

<h3 class="hbH3">
  <a name="995443"> </a>EvtCreateBackgroundThread Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995448"> </a>Purpose 
</h4>

<p><a name="995451"> </a>Create a thread in the background process and return a handle to the thread's event queue, through which you can communicate with the background thread.</p>
<h4>
  <a name="995453"> </a>Declared In 
</h4>
<code>Event.h<a name="995456"> </a></code><h4>
  <a name="995458"> </a>Prototype 
</h4>
<pre class="proto"><a name="995461"></a>EvtQueueHandle EvtCreateBackgroundThread (
   DatabaseID <code class="par">db</code>,
   size_t <code class="par">stackSize</code>,
   uint8_t <code class="par">priority</code>,
   EvtQueueHandle <code class="par">callerQueue</code>,
   MemPtr <code class="par">data</code>,
   size_t <code class="par">dataSize</code>
)
</pre>
<h4>
  <a name="995463"> </a>Parameters 
</h4>

<dl>
<dt><a name="995466"> </a><code>&rarr;  <i>db</i></code></dt>
<dd><a name="995468"> </a>Unique identifier for the database containing the code to be executed in the background thread.</dd>

<dt><a name="995470"> </a><code>&rarr;  <i>stackSize</i></code></dt>
<dd><a name="995472"> </a>Size, in bytes, to be allocated to the background thread's stack.</dd>

<dt><a name="995474"> </a><code>&rarr;  <i>priority</i></code></dt>
<dd><a name="995476"> </a>The requested thread priority. See <a href="../System_Management/SysThread.html#1002445">"Thread Priorities"</a> of <i>Exploring Palm OS: System Management</i> for constants that represent commonly-used thread priorities.</dd>

<dt><a name="995482"> </a><code>&rarr;  <i>callerQueue</i></code></dt>
<dd><a name="1030075"> </a>Event queue handle for the queue that the background thread is to use to communicate with the calling thread, or <code>NULL</code> if the background thread doesn't need to send events back to the calling thread. This is usually the calling application's event queue, which can be obtained by calling <a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a>.</dd>

<dt><a name="995486"> </a><code>&rarr;  <i>data</i></code></dt>
<dd><a name="995488"> </a>Pointer to a block of data that will be made accessible to the background thread. This pointer accompanies the <a href="Event.html#1026557"><code>sysAppLaunchCmdBackground</code></a> launch code. The data block cannot be more than 3kb in size (approximately).</dd>

<dt><a name="995490"> </a><code>&rarr;  <i>dataSize</i></code></dt>
<dd><a name="995492"> </a>Size, in bytes, of the data block pointed to by <code class="par">data</code>. This value is passed to the code running in the background thread.</dd>

</dl>
<h4>
  <a name="995494"> </a>Returns 
</h4>

<p><a name="995497"> </a>Returns a handle to the background thread's event queue, or <code>NULL</code> if the background thread couldn't be started.</p>
<h4>
  <a name="995499"> </a>Comments 
</h4>

<p><a name="1023702"> </a>Events can be sent to the background thread through the queue as in the local process, with the restriction that only top-level contents of the event structure will be copied. The event structure cannot contain pointers to strings or other data or objects.</p>

<p><a name="1023714"> </a>The caller queue and data are propagated to the new thread through the launch code as described below. Supplying <code>NULL</code> for any of these is valid.</p>

<p><a name="1023722"> </a>Be sure to call <a href="Event.html#996714"><code>EvtReleaseEventQueue()</code></a> when you are done with this queue (though only doing that will <i>not</i> make the thread go away). You'll need a handle to the caller queue; this means that you should <i>not</i> do something like this:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
myHandle = EvtCreateBackgroundThread(..., 
EvtGetThreadEventQueue(), ...);<a name="1043842"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1025376"> </a>The above function enters <code>PilotMain()</code> with the launch code <a href="Event.html#1026557"><code>sysAppLaunchCmdBackground</code></a> and a <a href="Event.html#993000"><code>SysAppLaunchCmdBackgroundType</code></a> data structure.</p>

<div><hr>
  <a name="1053068"> </a> <b>NOTE: </b> <code>EvtCreateBackgroundThread()</code> does not guarantee that the requested priority will be satisfied. A return value of <code>errNone</code> does not guarantee that the thread has been created at requested priority. Depending upon the context in which the function was called, the actual thread priority may be lower than what was requested.
<hr>
</div>
<h4>
  <a name="1053074"> </a>See Also 
</h4>

<p><a name="1053082"> </a><a href="../System_Management/SysThread.html#995791"><code>SysThreadCreate()</code></a></p>

<h3 class="hbH3">
  <a name="1053071"> </a>EvtDequeueKeyEvent Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995514"> </a>Purpose 
</h4>

<p><a name="995517"> </a>Obtain the next key event from the key queue.</p>
<h4>
  <a name="995519"> </a>Declared In 
</h4>
<code>Event.h<a name="995522"> </a></code><h4>
  <a name="995524"> </a>Prototype 
</h4>
<pre class="proto"><a name="995527"></a>status_t EvtDequeueKeyEvent (
   EventType <code class="par">*event</code>,
   Boolean <code class="par">peek</code>
)
</pre>
<h4>
  <a name="995529"> </a>Parameters 
</h4>

<dl>
<dt><a name="995532"> </a><code>&larr;  <i>event</i></code></dt>
<dd><a name="995534"> </a>Pointer to an event structure that is filled in with the details of the next event on the key queue.</dd>

<dt><a name="1034363"> </a><code>&rarr;  <i>peek</i></code></dt>
<dd><a name="1034364"> </a>If <code>false</code>, the key event is removed from the key queue. If <code>true</code>, it is left in the key queue.</dd>

</dl>
<h4>
  <a name="995540"> </a>Returns 
</h4>

<p><a name="995543"> </a>Returns <code>errNone</code> if the key queue contained at least one key event, or <code>evtErrQueueEmpty</code> if there are no key events in the key queue.</p>

<h3 class="hbH3">
  <a name="995555"> </a>EvtDequeuePenPoint Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995560"> </a>Purpose 
</h4>

<p><a name="995563"> </a>Get the next pen point out of the pen queue. This function is called by recognizers. </p>
<h4>
  <a name="995565"> </a>Declared In 
</h4>
<code>Event.h<a name="995568"> </a></code><h4>
  <a name="995570"> </a>Prototype 
</h4>
<pre class="proto"><a name="995573"></a>status_t EvtDequeuePenPoint (
   PointType <code class="par">*retP</code>
)
</pre>
<h4>
  <a name="995575"> </a>Parameters 
</h4>

<dl>
<dt><a name="995578"> </a><code>&larr;  <i>retP</i></code></dt>
<dd><a name="995580"> </a>Return point.</dd>

</dl>
<h4>
  <a name="995586"> </a>Returns 
</h4>

<p><a name="995636"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="995644"> </a>Comments 
</h4>

<p><a name="999773"> </a>Called by a recognizer that wishes to extract the points of a stroke. Returns the point (-1, -1) at the end of a stroke.</p>

<p><a name="995655"> </a>Before calling this routine, you must call <a href="Event.html#995662"><code>EvtDequeuePenStrokeInfo()</code></a>.</p>

<h3 class="hbH3">
  <a name="995662"> </a>EvtDequeuePenStrokeInfo Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995667"> </a>Purpose 
</h4>

<p><a name="995670"> </a>Initiate the extraction of a stroke from the pen queue. </p>
<h4>
  <a name="995672"> </a>Declared In 
</h4>
<code>Event.h<a name="995675"> </a></code><h4>
  <a name="995677"> </a>Prototype 
</h4>
<pre class="proto"><a name="995680"></a>status_t EvtDequeuePenStrokeInfo (
   PointType <code class="par">*startPtP</code>,
   PointType <code class="par">*endPtP</code>
)
</pre>
<h4>
  <a name="995682"> </a>Parameters 
</h4>

<dl>
<dt><a name="995685"> </a><code>&larr;  <i>startPtP</i></code></dt>
<dd><a name="995687"> </a>Start point returned here.</dd>

<dt><a name="995689"> </a><code>&larr;  <i>endPtP</i></code></dt>
<dd><a name="995691"> </a>End point returned here.</dd>

</dl>
<h4>
  <a name="995693"> </a>Returns 
</h4>

<p><a name="999893"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="995698"> </a>Comments 
</h4>

<p><a name="1000123"> </a>This routine must be called before <a href="Event.html#995555"><code>EvtDequeuePenPoint()</code></a> is called. </p>

<p><a name="995701"> </a>Subsequent calls to <code>EvtDequeuePenPoint()</code> return points at the starting point in the stroke and including the end point. After the end point is returned, the next call to <code>EvtDequeuePenPoint()</code> returns the point -1, -1.</p>

<h3 class="hbH3">
  <a name="995708"> </a>EvtEnqueueKey Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995713"> </a>Purpose 
</h4>

<p><a name="995716"> </a>Place keys into the key queue. </p>
<h4>
  <a name="995718"> </a>Declared In 
</h4>
<code>Event.h<a name="995721"> </a></code><h4>
  <a name="995723"> </a>Prototype 
</h4>
<pre class="proto"><a name="995726"></a>status_t EvtEnqueueKey (
   wchar32_t <code class="par">ascii</code>,
   uint16_t <code class="par">keycode</code>,
   uint16_t <code class="par">modifiers</code>
)
</pre>
<h4>
  <a name="995728"> </a>Parameters 
</h4>

<dl>
<dt><a name="995731"> </a><code>&rarr;  <i>ascii</i></code></dt>
<dd><a name="995733"> </a>Character code for the key.</dd>

<dt><a name="995735"> </a><code>&rarr;  <i>keycode</i></code></dt>
<dd><a name="995737"> </a>Virtual key code of key. This is the <code>keyCode</code> field of the <a href="../Input_Services/In_LowEvents.html#993792"><code>keyDownEvent</code></a> and is currently unused. </dd>

<dt><a name="995739"> </a><code>&rarr;  <i>modifiers</i></code></dt>
<dd><a name="995741"> </a>Modifiers for <code>keyDownEvent</code>.</dd>

</dl>
<h4>
  <a name="995747"> </a>Returns 
</h4>

<p><a name="995752"> </a>Returns <code>errNone</code> if successful, or <code>evtErrParamErr</code> if an error occurs.</p>
<h4>
  <a name="995762"> </a>Comments 
</h4>

<div><hr>
  <a name="1000235"> </a> <b>IMPORTANT: </b> Make sure you pass a <code>wchar32_t</code> as the <code>ascii</code> parameter, not a <code>char</code>. If you pass a high-ASCII <code>char</code>, the compiler sign-extends it to be a 32-bit value, resulting in the wrong character being added to the key queue. 
<hr>
</div>

<h3 class="hbH3">
  <a name="995797"> </a>EvtEventAvail Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995810"> </a>Purpose 
</h4>

<p><a name="995813"> </a>Determine if an event is available.</p>
<h4>
  <a name="995815"> </a>Declared In 
</h4>
<code>Event.h<a name="995818"> </a></code><h4>
  <a name="995820"> </a>Prototype 
</h4>
<pre class="proto"><a name="995823"></a>Boolean EvtEventAvail (
   void
)
</pre>
<h4>
  <a name="995825"> </a>Parameters 
</h4>

<p><a name="995828"> </a>None.</p>
<h4>
  <a name="995830"> </a>Returns 
</h4>

<p><a name="995833"> </a>Returns <code>true</code> if an event is available, <code>false</code> otherwise. </p>

<h3 class="hbH3">
  <a name="995845"> </a>EvtEventToString Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995850"> </a>Purpose 
</h4>

<p><a name="995853"> </a>Creates a string representation of an event, for debugging purposes.</p>
<h4>
  <a name="995855"> </a>Declared In 
</h4>
<code>Event.h<a name="995858"> </a></code><h4>
  <a name="995860"> </a>Prototype 
</h4>
<pre class="proto"><a name="995863"></a>void EvtEventToString (
   EventType <code class="par">*event</code>,
   char <code class="par">*str</code>,
   uint32_t <code class="par">bufsize</code>
)
</pre>
<h4>
  <a name="995865"> </a>Parameters 
</h4>

<dl>
<dt><a name="995868"> </a><code>&rarr;  <i>event</i></code></dt>
<dd><a name="995870"> </a>The event for which a string representation is to be created.</dd>

<dt><a name="995872"> </a><code>&larr;  <i>str</i></code></dt>
<dd><a name="995874"> </a>A string buffer into which the string representation is written.</dd>

<dt><a name="995876"> </a><code>&rarr;  <i>bufsize</i></code></dt>
<dd><a name="995878"> </a>The size of the string buffer <code class="par">str</code>.</dd>

</dl>
<h4>
  <a name="995880"> </a>Returns 
</h4>

<p><a name="995883"> </a>Nothing.</p>
<h4>
  <a name="995885"> </a>Comments 
</h4>

<p><a name="995888"> </a>The string representation includes the event type, an indication of whether the pen was touching the screen at the time the event was generated, the tap count, and the x and y coordinates identifying the pen location. It also includes event-specific information, if appropriate. You can use the string produced by this function to log events as an aid to debugging.</p>

<h3 class="hbH3">
  <a name="995895"> </a>EvtFinishLastEvent Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995904"> </a>Purpose 
</h4>

<p><a name="995907"> </a>Indicate that you are done processing an event obtained before blocking on the IOS file descriptor for the event queue.</p>
<h4>
  <a name="995909"> </a>Declared In 
</h4>
<code>Event.h<a name="995912"> </a></code><h4>
  <a name="995914"> </a>Prototype 
</h4>
<pre class="proto"><a name="995917"></a>void EvtFinishLastEvent (
   void
)
</pre>
<h4>
  <a name="995919"> </a>Parameters 
</h4>

<p><a name="995922"> </a>None.</p>
<h4>
  <a name="995924"> </a>Returns 
</h4>

<p><a name="995927"> </a>Nothing.</p>
<h4>
  <a name="995929"> </a>Comments 
</h4>

<p><a name="1020250"> </a>Normally you don't need to call this function. <a href="Event.html#996063"><code>EvtGetEvent()</code></a> and <code>IOSPoll()</code> both call it for you.</p>
<h4>
  <a name="995934"> </a>See Also 
</h4>

<p><a name="995937"> </a><a href="Event.html#996109"><code>EvtGetEventDescriptor()</code></a></p>

<h3 class="hbH3">
  <a name="995939"> </a>EvtFlushKeyQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995944"> </a>Purpose 
</h4>

<p><a name="995947"> </a>Flush all keys out of the key queue.</p>
<h4>
  <a name="995949"> </a>Declared In 
</h4>
<code>Event.h<a name="995952"> </a></code><h4>
  <a name="995954"> </a>Prototype 
</h4>
<pre class="proto"><a name="995957"></a>status_t EvtFlushKeyQueue (
   void
)
</pre>
<h4>
  <a name="995959"> </a>Parameters 
</h4>

<p><a name="995962"> </a>None.</p>
<h4>
  <a name="995964"> </a>Returns 
</h4>

<p><a name="995967"> </a>Always returns <code>errNone</code>.</p>

<h3 class="hbH3">
  <a name="995979"> </a>EvtFlushNextPenStroke Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995984"> </a>Purpose 
</h4>

<p><a name="995987"> </a>Flush the next stroke out of the pen queue. </p>
<h4>
  <a name="995989"> </a>Declared In 
</h4>
<code>Event.h<a name="995992"> </a></code><h4>
  <a name="995994"> </a>Prototype 
</h4>
<pre class="proto"><a name="995997"></a>status_t EvtFlushNextPenStroke (
   void
)
</pre>
<h4>
  <a name="995999"> </a>Parameters 
</h4>

<p><a name="996002"> </a>None.</p>
<h4>
  <a name="996004"> </a>Returns 
</h4>

<p><a name="1000614"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="996009"> </a>Comments 
</h4>

<p><a name="1000648"> </a>Called by recognizers that need only the start and end points of a stroke. If a stroke has already been partially dequeued (by <a href="Event.html#995662"><code>EvtDequeuePenStrokeInfo()</code></a>) this routine finishes the stroke dequeueing. Otherwise, this routine flushes the next stroke in the queue.</p>
<h4>
  <a name="996014"> </a>See Also 
</h4>

<p><a name="996017"> </a><a href="Event.html#995555"><code>EvtDequeuePenPoint()</code></a></p>

<h3 class="hbH3">
  <a name="996019"> </a>EvtFlushPenQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996028"> </a>Purpose 
</h4>

<p><a name="996031"> </a>Flush all points out of the pen queue.</p>
<h4>
  <a name="996033"> </a>Declared In 
</h4>
<code>Event.h<a name="996036"> </a></code><h4>
  <a name="996038"> </a>Prototype 
</h4>
<pre class="proto"><a name="996041"></a>status_t EvtFlushPenQueue (
   void
)
</pre>
<h4>
  <a name="996043"> </a>Parameters 
</h4>

<p><a name="996046"> </a>None.</p>
<h4>
  <a name="996048"> </a>Returns 
</h4>

<p><a name="1000696"> </a>Always returns <code>errNone</code>.</p>

<h3 class="hbH3">
  <a name="996063"> </a>EvtGetEvent Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996068"> </a>Purpose 
</h4>

<p><a name="996071"> </a>Return the next available event from the current thread's event queue.</p>
<h4>
  <a name="996073"> </a>Declared In 
</h4>
<code>Event.h<a name="996076"> </a></code><h4>
  <a name="996078"> </a>Prototype 
</h4>
<pre class="proto"><a name="996081"></a>void EvtGetEvent (
   EventType <code class="par">*event</code>,
   int32_t <code class="par">timeout</code>
)
</pre>
<h4>
  <a name="996083"> </a>Parameters 
</h4>

<dl>
<dt><a name="996086"> </a><code>&larr;  <i>event</i></code></dt>
<dd><a name="996088"> </a>Pointer to the structure to hold the event returned.</dd>

<dt><a name="996090"> </a><code>&rarr;  <i>timeout</i></code></dt>
<dd><a name="996092"> </a>Maximum number of ticks to wait before an event is returned (<code>evtWaitForever</code> means wait indefinitely, <code>evtNoWait</code> means don't wait at all).</dd>

</dl>
<h4>
  <a name="996094"> </a>Returns 
</h4>

<p><a name="996097"> </a>Nothing.</p>
<h4>
  <a name="996099"> </a>Comments 
</h4>

<p><a name="1000803"> </a>Pass <code>evtWaitForever</code> as the timeout in most instances. When running on the device, this makes the CPU go into doze mode until the user provides input. For applications that do animation, pass a <code class="par">timeout</code> value greater than or equal to zero (<code>evtNoWait</code> has a value of zero).</p>

<p><a name="1000804"> </a>Note that a timeout value greater than or equal to zero is simply the <i>maximum</i> number of ticks which can elapse before <code>EvtGetEvent()</code> returns an event. If any other event&#8212;including a <code>nilEvent</code>&#8212;occurs before this time has elapsed, <code>EvtGetEvent()</code> returns that event. Otherwise, once the specified time has elapsed <code>EvtGetEvent()</code> generates and returns a <code>nilEvent</code>. If you supply a value of zero for the timeout parameter, <code>EvtGetEvent()</code> returns the event currently in the queue, or, if there aren't any events in the queue, it immediately generates and returns a <code>nilEvent</code>.</p>

<h3 class="hbH3">
  <a name="996109"> </a>EvtGetEventDescriptor Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1034879"> </a>Purpose 
</h4>

<p><a name="1034880"> </a>Get an IOS file descriptor that you can block on until events arrive in your queue.</p>
<h4>
  <a name="1034881"> </a>Declared In 
</h4>
<code>Event.h<a name="996122"> </a></code><h4>
  <a name="996124"> </a>Prototype 
</h4>
<pre class="proto"><a name="996127"></a>int32_t EvtGetEventDescriptor (
   void
)
</pre>
<h4>
  <a name="996129"> </a>Parameters 
</h4>

<p><a name="996132"> </a>None.</p>
<h4>
  <a name="996134"> </a>Returns 
</h4>

<p><a name="996143"> </a>Returns the IOS file descriptor for the event queue, or a value less than zero if an error occurred while obtaining the file descriptor.</p>
<h4>
  <a name="996153"> </a>Comments 
</h4>

<p><a name="1021197"> </a>This function only works for the main UI thread. Outside of the main UI thread you should use the multithreading APIs to do I/O instead of multiplexing with an event thread.</p>

<p><a name="1035022"> </a>Rather than making repeated calls to <a href="Event.html#996063"><code>EvtGetEvent()</code></a>, you can instead obtain an IOS file descriptor using this function and block on that file descriptor. When an event is posted to your event queue, your application will wake up and can then process the event. Note that when using this technique you must let the operating system know when you are done with the event. <code>IOSPoll()</code> does this for you, or you can make a call to <a href="Event.html#995895"><code>EvtFinishLastEvent()</code></a>.</p>

<p><a name="1035055"> </a>On debug ROMs, this function displays a fatal alert if the calling thread is not the main UI thread.</p>

<h3 class="hbH3">
  <a name="996188"> </a>EvtGetFocusWindow Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996201"> </a>Purpose 
</h4>

<p><a name="996204"> </a>Get a handle to the window that currently has the focus.</p>
<h4>
  <a name="996206"> </a>Declared In 
</h4>
<code>Event.h<a name="996209"> </a></code><h4>
  <a name="996211"> </a>Prototype 
</h4>
<pre class="proto"><a name="996214"></a>WinHandle EvtGetFocusWindow (
   void
)
</pre>
<h4>
  <a name="996216"> </a>Parameters 
</h4>

<p><a name="996219"> </a>None.</p>
<h4>
  <a name="996221"> </a>Returns 
</h4>

<p><a name="996224"> </a>Returns a handle to the last window that received a <code>winFocusGainedEvent</code>, or, if a <code>winFocusGainedEvent</code> has not been returned from <a href="Event.html#996063"><code>EvtGetEvent()</code></a> since the last <code>winFocusLostEvent</code>, returns <code>invalidWindowHandle</code> (this constant is defined in <code>Window.h</code>).</p>

<h3 class="hbH3">
  <a name="996236"> </a>EvtGetPen Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996241"> </a>Purpose 
</h4>

<p><a name="996244"> </a>Return the current status of the pen.</p>
<h4>
  <a name="996246"> </a>Declared In 
</h4>
<code>Event.h<a name="996249"> </a></code><h4>
  <a name="996251"> </a>Prototype 
</h4>
<pre class="proto"><a name="996254"></a>status_t EvtGetPen (
   Coord <code class="par">*pScreenX</code>,
   Coord <code class="par">*pScreenY</code>,
   Boolean <code class="par">*pPenDown</code>
)
</pre>
<h4>
  <a name="996256"> </a>Parameters 
</h4>

<dl>
<dt><a name="996259"> </a><code>&larr;  <i>pScreenX</i></code></dt>
<dd><a name="996261"> </a>x location, in standard coordinates, relative to the draw window.</dd>

<dt><a name="996263"> </a><code>&larr;  <i>pScreenY</i></code></dt>
<dd><a name="996265"> </a>y location, in standard coordinates, relative to the draw window.</dd>

<dt><a name="996267"> </a><code>&larr;  <i>pPenDown</i></code></dt>
<dd><a name="996269"> </a><code>true</code> or <code>false</code>, indicating whether or not the pen is currently touching the screen.</dd>

</dl>
<h4>
  <a name="996271"> </a>Returns 
</h4>

<p><a name="996274"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="996281"> </a>See Also 
</h4>

<p><a name="996284"> </a><a href="Event.html#996286"><code>EvtGetPenNative()</code></a></p>

<h3 class="hbH3">
  <a name="996286"> </a>EvtGetPenNative Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996295"> </a>Purpose 
</h4>

<p><a name="996298"> </a>Get the current status of the pen using a window's active coordinate system.</p>
<h4>
  <a name="996300"> </a>Declared In 
</h4>
<code>Event.h<a name="996303"> </a></code><h4>
  <a name="996305"> </a>Prototype 
</h4>
<pre class="proto"><a name="996308"></a>status_t EvtGetPenNative (
   WinHandle <code class="par">winH</code>,
   Coord <code class="par">*pScreenX</code>,
   Coord <code class="par">*pScreenY</code>,
   Boolean <code class="par">*pPenDown</code>
)
</pre>
<h4>
  <a name="996310"> </a>Parameters 
</h4>

<dl>
<dt><a name="996313"> </a><code>&rarr;  <i>winH</i></code></dt>
<dd><a name="996315"> </a>Handle to a valid window.</dd>

<dt><a name="996317"> </a><code>&larr;  <i>pScreenX</i></code></dt>
<dd><a name="1037193"> </a>x location, in active coordinates, relative to the window.</dd>

<dt><a name="996321"> </a><code>&larr;  <i>pScreenY</i></code></dt>
<dd><a name="1037406"> </a>y location, in active coordinates, relative to the window.</dd>

<dt><a name="996325"> </a><code>&larr;  <i>pPenDown</i></code></dt>
<dd><a name="996327"> </a><code>true</code> if the pen is down, <code>false</code> otherwise.</dd>

</dl>
<h4>
  <a name="996329"> </a>Returns 
</h4>

<p><a name="1037085"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="996334"> </a>Comments 
</h4>

<p><a name="1002019"> </a>This function is a variation on <a href="Event.html#996236"><code>EvtGetPen()</code></a>. <code>EvtGetPen()</code> returns a pen sample using the standard coordinate system, relative to the draw window, whereas <code>EvtGetPenNative()</code> returns a pen sample using the active coordinate system of <code class="par">winH</code>, relative to the window origin. If the active coordinate system is high density, the returned pen sample uses high-density coordinates.</p>

<p><a name="1002020"> </a>On a debug ROM this function displays an error if <code class="par">winH</code> doesn't reference a valid window object.</p>

<h3 class="hbH3">
  <a name="1037636"> </a>EvtGetReplyEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996349"> </a>Purpose 
</h4>

<p><a name="996352"> </a>Obtain the event queue through which you can post a reply to the event being processed.</p>
<h4>
  <a name="996354"> </a>Declared In 
</h4>
<code>Event.h<a name="996357"> </a></code><h4>
  <a name="996359"> </a>Prototype 
</h4>
<pre class="proto"><a name="996362"></a>EvtQueueHandle EvtGetReplyEventQueue (
   void
)
</pre>
<h4>
  <a name="996364"> </a>Parameters 
</h4>

<p><a name="996367"> </a>None.</p>
<h4>
  <a name="996369"> </a>Returns 
</h4>

<p><a name="996372"> </a>A handle to the reply event queue, or <code>NULL</code> if the event handler isn't expected to post a reply.</p>
<h4>
  <a name="996374"> </a>Comments 
</h4>

<p><a name="1023455"> </a>Used by event handlers to post a response to the thread that sent the event. The reply queue handle is specified when the event is originally sent, as a parameter to <a href="Event.html#994892"><code>EvtAddEventToEventQueue()</code></a>.</p>

<p><a name="1044622"> </a>You must call <a href="Event.html#996714"><code>EvtReleaseEventQueue()</code></a> when done with the queue returned by this function.</p>
<h4>
  <a name="996379"> </a>See Also 
</h4>

<p><a name="996382"> </a><a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a>, <a href="Event.html#996602"><code>EvtLookupEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="996384"> </a>EvtGetThreadEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996393"> </a>Purpose 
</h4>

<p><a name="996398"> </a>Obtain a handle to the current thread's event queue.</p>
<h4>
  <a name="996406"> </a>Declared In 
</h4>
<code>Event.h<a name="996417"> </a></code><h4>
  <a name="996427"> </a>Prototype 
</h4>
<pre class="proto"><a name="996438"></a>EvtQueueHandle EvtGetThreadEventQueue (
   void
)
</pre>
<h4>
  <a name="996448"> </a>Parameters 
</h4>

<p><a name="996459"> </a>None.</p>
<h4>
  <a name="996469"> </a>Returns 
</h4>

<p><a name="996480"> </a>Returns a handle to the event queue.</p>
<h4>
  <a name="996482"> </a>Comments 
</h4>

<p><a name="1022969"> </a>Given a handle to a thread's event queue, you can use <a href="Event.html#994892"><code>EvtAddEventToEventQueue()</code></a> to add events to the thread's event queue from any other thread in the process. When you are done with the thread's event queue, call <a href="Event.html#996714"><code>EvtReleaseEventQueue()</code></a> to allow the system to reclaim the queue's resources.</p>
<h4>
  <a name="996487"> </a>See Also 
</h4>

<p><a name="996490"> </a><a href="Event.html#1037636"><code>EvtGetReplyEventQueue()</code></a>, <a href="Event.html#996602"><code>EvtLookupEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="996492"> </a>EvtKeydownIsVirtual Macro <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1002112"> </a>Purpose 
</h4>

<p><a name="1002113"> </a>Determine if a given event is a virtual character key down event.</p>
<h4>
  <a name="1002114"> </a>Declared In 
</h4>
<code>Event.h<a name="996505"> </a></code><h4>
  <a name="996507"> </a>Prototype 
</h4>
<pre class="proto"><a name="996510"></a>#define EvtKeydownIsVirtual (
   <code class="par">eventP</code>
)
</pre>
<h4>
  <a name="996512"> </a>Parameters 
</h4>

<dl>
<dt><a name="996515"> </a><code>&rarr;  <i>eventP</i></code></dt>
<dd><a name="996517"> </a>Pointer to an <a href="Event.html#992950"><code>EventType</code></a> structure.</dd>

</dl>
<h4>
  <a name="996519"> </a>Returns 
</h4>

<p><a name="996522"> </a>Evaluates to <code>true</code> if the character is a letter in an alphabet or a numeric digit, <code>false</code> otherwise.</p>
<h4>
  <a name="996524"> </a>Comments 
</h4>

<p><a name="1002354"> </a>The macro assumes that the caller has already determined the event is a <code>keyDownEvent</code>. </p>

<p><a name="1002355"> </a>This macro is intended for use by the system.</p>

<h3 class="hbH3">
  <a name="996534"> </a>EvtKeyQueueEmpty Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996539"> </a>Purpose 
</h4>

<p><a name="996542"> </a>Determine whether the key queue is currently empty.</p>
<h4>
  <a name="996544"> </a>Declared In 
</h4>
<code>Event.h<a name="996547"> </a></code><h4>
  <a name="996549"> </a>Prototype 
</h4>
<pre class="proto"><a name="996552"></a>Boolean EvtKeyQueueEmpty (
   void
)
</pre>
<h4>
  <a name="996554"> </a>Parameters 
</h4>

<p><a name="996557"> </a>None.</p>
<h4>
  <a name="996559"> </a>Returns 
</h4>

<p><a name="996562"> </a>Returns <code>true</code> if the key queue is currently empty, otherwise returns <code>false</code>.</p>

<h3 class="hbH3">
  <a name="996602"> </a>EvtLookupEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996631"> </a>Purpose 
</h4>

<p><a name="996634"> </a>Look up an event queue by name. </p>
<h4>
  <a name="996636"> </a>Declared In 
</h4>
<code>Event.h<a name="996639"> </a></code><h4>
  <a name="996641"> </a>Prototype 
</h4>
<pre class="proto"><a name="996644"></a>EvtQueueHandle EvtLookupEventQueue (
   const char <code class="par">*name</code>
)
</pre>
<h4>
  <a name="996646"> </a>Parameters 
</h4>

<dl>
<dt><a name="996649"> </a><code>&rarr;  <i>name</i></code></dt>
<dd><a name="996651"> </a>The name of the event queue, as published by <a href="Event.html#996668"><code>EvtPublishEventQueue()</code></a>.</dd>

</dl>
<h4>
  <a name="996653"> </a>Returns 
</h4>

<p><a name="996656"> </a>Returns a handle to the event queue if the named queue was found, or <code>NULL</code> if an event queue with the given name couldn't be located.</p>
<h4>
  <a name="996658"> </a>Comments 
</h4>

<p><a name="1026002"> </a>You must call <a href="Event.html#996714"><code>EvtReleaseEventQueue()</code></a> when you are done with the queue returned by this function. </p>

<p><a name="1029356"> </a>Published queues persist across application switches, but note that if the queue refers to a thread in the Application process, after an application switch that queue will be dead and errors will be returned if you attempt to use it.</p>
<h4>
  <a name="996663"> </a>See Also 
</h4>

<p><a name="996666"> </a><a href="Event.html#1037636"><code>EvtGetReplyEventQueue()</code></a>, <a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a>, <a href="Event.html#996668"><code>EvtPublishEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="996668"> </a>EvtPublishEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996673"> </a>Purpose 
</h4>

<p><a name="996676"> </a>Publish (or withdraw from publication) an event queue name, so that code executing in other threads can gain access to the queue simply by knowing the event queue name.</p>
<h4>
  <a name="996678"> </a>Declared In 
</h4>
<code>Event.h<a name="996681"> </a></code><h4>
  <a name="996683"> </a>Prototype 
</h4>
<pre class="proto"><a name="996686"></a>status_t EvtPublishEventQueue (
   const char <code class="par">*name</code>,
   EvtQueueHandle <code class="par">queue</code>
)
</pre>
<h4>
  <a name="996688"> </a>Parameters 
</h4>

<dl>
<dt><a name="996691"> </a><code>&rarr;  <i>name</i></code></dt>
<dd><a name="996693"> </a>The name by which the event queue is to be known (or the name of the published event queue that is to be withdrawn from publication).</dd>

<dt><a name="996695"> </a><code>&rarr;  <i>queue</i></code></dt>
<dd><a name="996697"> </a>The event queue's handle, if publishing, or <code>NULL</code> to withdraw an event queue from publication.</dd>

</dl>
<h4>
  <a name="996699"> </a>Returns 
</h4>

<p><a name="996702"> </a>Returns <code>errNone</code> if the operation was successfully completed, or an error value otherwise.</p>
<h4>
  <a name="996704"> </a>Comments 
</h4>

<p><a name="1025818"> </a>The functionality provided by this function and by <a href="Event.html#996602"><code>EvtLookupEventQueue()</code></a> allows an application that operates in conjunction with a background thread to attach to its already running background thread whenever the application starts. For instance, a media player that uses a background thread to perform playback or recording operations could use this to reestablish communications with the background thread after the user has switched away from and then back to the media player UI application.</p>

<p><a name="1046074"> </a>Event queues should use Java-style naming conventions. For example, "com.palmsource.someapp.myqueue".</p>

<p><a name="1029410"> </a>Published queues persist across application switches, but note that if the queue refers to a thread in the Application process, after an application switch that queue will be dead and errors will be returned if you attempt to use it.</p>
<h4>
  <a name="996709"> </a>See Also 
</h4>

<p><a name="996712"> </a><a href="Event.html#996602"><code>EvtLookupEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="996714"> </a>EvtReleaseEventQueue Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996719"> </a>Purpose 
</h4>

<p><a name="996722"> </a>Release a reference on an event queue.</p>
<h4>
  <a name="996724"> </a>Declared In 
</h4>
<code>Event.h<a name="996727"> </a></code><h4>
  <a name="996729"> </a>Prototype 
</h4>
<pre class="proto"><a name="996758"></a>void EvtReleaseEventQueue (
   EvtQueueHandle <code class="par">queue</code>
)
</pre>
<h4>
  <a name="996790"> </a>Parameters 
</h4>

<dl>
<dt><a name="996843"> </a><code>&rarr;  <i>queue</i></code></dt>
<dd><a name="996899"> </a>Handle to the event queue to be released.</dd>

</dl>
<h4>
  <a name="996957"> </a>Returns 
</h4>

<p><a name="997016"> </a>Nothing.</p>
<h4>
  <a name="997018"> </a>Comments 
</h4>

<p><a name="1023241"> </a>Call this function to release a reference on the queue. Once all references are gone&#8212;including the one implicitly held by the thread running the queue and from publishing the queue&#8212;the system will reclaim the queue's resources.</p>
<h4>
  <a name="997023"> </a>See Also 
</h4>

<p><a name="997026"> </a><a href="Event.html#995443"><code>EvtCreateBackgroundThread()</code></a>, <a href="Event.html#1037636"><code>EvtGetReplyEventQueue()</code></a>, <a href="Event.html#996384"><code>EvtGetThreadEventQueue()</code></a>, <a href="Event.html#996602"><code>EvtLookupEventQueue()</code></a></p>

<h3 class="hbH3">
  <a name="997028"> </a>EvtSetNullEventTick Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997033"> </a>Purpose 
</h4>

<p><a name="997036"> </a>Make sure that a <a href="EventCodes.html#994900"><code>nilEvent</code></a> occurs in at least the specified amount of time.</p>
<h4>
  <a name="997038"> </a>Declared In 
</h4>
<code>Event.h<a name="997041"> </a></code><h4>
  <a name="997043"> </a>Prototype 
</h4>
<pre class="proto"><a name="997046"></a>Boolean EvtSetNullEventTick (
   int64_t <code class="par">milliseconds</code>
)
</pre>
<h4>
  <a name="997048"> </a>Parameters 
</h4>

<dl>
<dt><a name="997051"> </a><code>&rarr;  <i>milliseconds</i></code></dt>
<dd><a name="997053"> </a>Maximum amount of time, in milliseconds, that should elapse before a <code>nilEvent</code> is added to the queue.</dd>

</dl>
<h4>
  <a name="997055"> </a>Returns 
</h4>

<p><a name="1002665"> </a>Returns <code>true</code> if timeout value changed, or <code>false</code> if it did not change. </p>

<h3 class="hbH3">
  <a name="1049939"> </a>EvtSetPenDispatchFunc Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1049967"> </a>Purpose 
</h4>

<p><a name="1049970"> </a>Set the pen event filter function for a given window.</p>
<h4>
  <a name="1049976"> </a>Declared In 
</h4>
<code>Event.h<a name="1049990"> </a></code><h4>
  <a name="1049996"> </a>Prototype 
</h4>
<pre class="proto"><a name="1050007"></a>extern status_t EvtSetPenDispatchFunc (
   WinHandle winHandle,
   EvtPenDispatchFunc penDispatch,
   void *userData
)
</pre>
<h4>
  <a name="1050068"> </a>Parameters 
</h4>

<dl>
<dt><a name="1050212"> </a><code>&rarr;  <i>winHandle</i></code></dt>
<dd><a name="1050240"> </a>Handle to the window for which the pen event filter function is being set.</dd>

<dt><a name="1050273"> </a><code>&rarr;  <i>penDispatch</i></code></dt>
<dd><a name="1050547"> </a>Pointer to the filter function, which must have a prototype as defined by <a href="Event.html#1049306"><code>EvtPenDispatchFunc()</code></a>. If this parameter is <code>NULL</code>, the default filter function (which always returns <code>evtDispatchAbsorb</code>) is used.</dd>

<dt><a name="1050323"> </a><code>&rarr;  <i>userData</i></code></dt>
<dd><a name="1050340"> </a>Pointer that can be used to pass application-specific data to the pen event filter function. If the filter function requires no such data, pass <code>NULL</code> for this parameter.</dd>

</dl>
<h4>
  <a name="1050341"> </a>Returns 
</h4>

<p><a name="1050371"> </a>Always returns <code>errNone</code>. On a debug ROM, this function generates a fatal error if the supplied window handle is invalid.</p>
<h4>
  <a name="1050387"> </a>Comments 
</h4>

<p><a name="1050817"> </a>A pen event filter function is a function that you write that allows you to control which pen taps are passed on to your window's event queue, and which are passed on to other windows that may be beneath yours. Such "pen event filters" are used primarily by overlay pinlets, although they can be used by any window; they are not limited to use by pinlets.</p>

<h3 class="hbH3">
  <a name="997070"> </a>EvtSysEventAvail Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997075"> </a>Purpose 
</h4>

<p><a name="997078"> </a>Return <code>true</code> if a low-level system event (such as a pen or key event) is available.</p>
<h4>
  <a name="997080"> </a>Declared In 
</h4>
<code>Event.h<a name="997083"> </a></code><h4>
  <a name="997085"> </a>Prototype 
</h4>
<pre class="proto"><a name="997088"></a>Boolean EvtSysEventAvail (
   Boolean <code class="par">ignorePenUps</code>
)
</pre>
<h4>
  <a name="997090"> </a>Parameters 
</h4>

<dl>
<dt><a name="997093"> </a><code>&rarr;  <i>ignorePenUps</i></code></dt>
<dd><a name="997095"> </a>If <code>true</code>, this function ignores pen-up events when determining if there are any system events available.</dd>

</dl>
<h4>
  <a name="997097"> </a>Returns 
</h4>

<p><a name="997100"> </a>Returns <code>true</code> if a system event is available.</p>
<h4>
  <a name="997102"> </a>Comments 
</h4>

<p><a name="1002717"> </a>Call <a href="Event.html#995797"><code>EvtEventAvail()</code></a> to determine whether high-level software events are available.</p>

<h3 class="hbH3">
  <a name="997155"> </a>EvtWakeup Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997184"> </a>Purpose 
</h4>

<p><a name="997187"> </a>Force the Event Manager to wake up and send a <a href="EventCodes.html#994900"><code>nilEvent</code></a> to the current application. </p>
<h4>
  <a name="997189"> </a>Declared In 
</h4>
<code>Event.h<a name="997192"> </a></code><h4>
  <a name="997194"> </a>Prototype 
</h4>
<pre class="proto"><a name="997197"></a>status_t EvtWakeup (
   void
)
</pre>
<h4>
  <a name="997199"> </a>Parameters 
</h4>

<p><a name="997202"> </a>None.</p>
<h4>
  <a name="997204"> </a>Returns 
</h4>

<p><a name="997207"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="997209"> </a>Comments 
</h4>

<p><a name="1002733"> </a>Called by interrupt routines, like the Sound Manager and Alarm Manager.</p>
<h4>
  <a name="997214"> </a>See Also 
</h4>

<p><a name="997217"> </a><a href="Event.html#997219"><code>EvtWakeupWithoutNilEvent()</code></a></p>

<h3 class="hbH3">
  <a name="997219"> </a>EvtWakeupWithoutNilEvent Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997224"> </a>Purpose 
</h4>

<p><a name="997227"> </a>Force the Event Manager to wake up without sending a <code>nilEvent</code> to the current application.</p>
<h4>
  <a name="997229"> </a>Declared In 
</h4>
<code>Event.h<a name="997232"> </a></code><h4>
  <a name="997234"> </a>Prototype 
</h4>
<pre class="proto"><a name="997237"></a>status_t EvtWakeupWithoutNilEvent (
   void
)
</pre>
<h4>
  <a name="997239"> </a>Parameters 
</h4>

<p><a name="997242"> </a>None.</p>
<h4>
  <a name="997244"> </a>Returns 
</h4>

<p><a name="1002764"> </a>Always returns <code>errNone</code>.</p>
<h4>
  <a name="997249"> </a>Comments 
</h4>

<p><a name="1002768"> </a>Called by interrupt routines.</p>
<h4>
  <a name="997254"> </a>See Also 
</h4>

<p><a name="1002775"> </a><a href="Event.html#997155"><code>EvtWakeup()</code></a></p>

<h2 class="haH2">
  <a name="992930"> </a>Application-Defined Functions <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1049306"> </a>EvtPenDispatchFunc Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1049309"> </a>Purpose 
</h4>

<p><a name="1049340"> </a>A callback function that allows you to control which pen taps are passed on to your window's event queue, and which are passed on to other windows that may be beneath yours. Such "pen event filters" are used primarily by overlay ("on screen input") pinlets, although they can be used by any window; they are not limited to use by pinlets. They can be used to implement windows with irregular shapes and more sophisticated effects.</p>
<h4>
  <a name="1049346"> </a>Declared In 
</h4>
<code>Event.h<a name="1049348"> </a></code><h4>
  <a name="1049350"> </a>Prototype 
</h4>
<pre class="proto"><a name="1049352"></a>typedef EvtDispatchType (
   *EvtPenDispatchFunc
) (
   const EventType *<code class="par">penEvent</code>,
   const RectangleType *<code class="par">nativeFrame</code>,
   void *<code class="par">userData</code>
)
</pre>
<h4>
  <a name="1049375"> </a>Parameters 
</h4>

<dl>
<dt><a name="1049503"> </a><code>&rarr;  <i>penEvent</i></code></dt>
<dd><a name="1049537"> </a>The pen event to be filtered.</dd>

<dt><a name="1049570"> </a><code>&rarr;  <i>nativeFrame</i></code></dt>
<dd><a name="1049603"> </a>The target window's frame.</dd>

<dt><a name="1049604"> </a><code>&harr;  <i>userData</i></code></dt>
<dd><a name="1049605"> </a>Pointer to an optional application-defined data block specified during the call to <a href="Event.html#1049939"><code>EvtSetPenDispatchFunc()</code></a>.</dd>

</dl>
<h4>
  <a name="1049606"> </a>Returns 
</h4>

<p><a name="1049608"> </a>Return one of the values defined by the <a href="Event.html#1048811">Event Dispatch Types</a> enum to indicate whether the event should be absorbed or passed on to the next window layer.</p>
<h4>
  <a name="1049678"> </a>Comments 
</h4>

<p><a name="1049683"> </a>This function is called for each pen event delivered to the window, allowing you to decide what to do with the event. Return <code>evtDispatchAbsorb</code> for those events that should be placed on your window's event queue, or <code>evtDispatchFallthrough</code> for those that should "fall through" to the next window beneath. Note that once you have allowed an event to fall through, <i>any subsequent events in the current motion will not be delivered to your window</i>.</p>

<div><hr>
  <a name="1049695"> </a> <b>NOTE: </b> This function is called from outside of the window's event thread. You cannot access any UI state from it.
<hr>
</div>

<p><a name="1049890"> </a>A typical <code>EvtPenDispatchFunc()</code> implementation will usually do nothing more than check if the pen is in a certain region of the window (and possibly check some internal state of the pinlet) before returning the appropriate value.</p>

<p><a name="1051544"> </a>It is important to understand that the dispatch function set here is called as part of the system's lower-level event dispatching mechanism, before the event is placed in the target window's event queue. This means:</p>
<ul type="disc">
  <li><a name="1051545"> </a>The function is called in a system thread, <i>not</i> in the window's event thread, and so it cannot access any of that thread's UI state. In particular it can't make any Window Manager or standard Event Manager calls. You can use the multi-threaded Event Manager functions to communicate from this thread to the UI thread, however. You can also count on the thread running in the same process as your window, so you can access common globals and the <code class="par">userData</code> parameter can contain a pointer to a shared data structure on the local heap.
  <li><a name="1051546"> </a>When using this function you must have a good understanding of multithreading to correctly synchronize calls to the dispatch function with whatever is going on in the UI thread. Not properly taking care of multi-threaded issues can result in application crashes and other bad behavior.
  <li><a name="1051547"> </a>This dispatch function is called as part of the low-level system event dispatching, and thus should do as little possible to decide what to do with each event it is given.
</ul>

<p><a name="1051548"> </a>This function provides very direct access to the operating system's event processing, and as such developers should be very careful when using it. Take care to call as few operating system functions as possible: avoid the Data Manager, any UI functions besides the multithreaded Event Manager functions, and any other high level functions such as those involving the status bar, the dynamic input area, and the like. While some of these functions may happen to work in current versions of the operating system, future versions of the system may not be able to support them.</p>

<p><a name="1051542"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="ProgrammingBasics_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="ProgrammingBasicsTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CmnLaunchCodes.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="EventCodes.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="ProgrammingBasicsIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>