<html>
<head>
<title>(Protein) Customizing the Dynamic Input Area | Input Services </title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:12:25">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="987255"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="In_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_PIMConcept.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_HardKeys.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">3 &nbsp;&nbsp;
Customizing the Dynamic Input Area</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Input Services </p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="In_ConceptPart.html">Part I: Concepts</a> </h1>
<h1 class="SideTOC1"><a href="In_PinletConcept.html">3  Customizing the Dynamic Input Area</a></h1>

   <h2 class="SideTOC2"><a href="#983627">
   How Pinlets Work</a></h2>

   <h2 class="SideTOC2"><a href="#992084">
   Building Pinlets and Handwriting Recognition Engines</a></h2>

   <h2 class="SideTOC2"><a href="#983673">
   Starting Up and Shutting Down a Pinlet</a></h2>

      <h3 class="SideTOC3"><a href="#990978">
      Startup</a></h3>

      <h3 class="SideTOC3"><a href="#990980">
      Starting up the Handwriting Recognition Engine</a></h3>

      <h3 class="SideTOC3"><a href="#990959">
      Shutdown</a></h3>

   <h2 class="SideTOC2"><a href="#988833">
   Presenting a User Interface</a></h2>

      <h3 class="SideTOC3"><a href="#990890">
      Main Pinlet Form</a></h3>

      <h3 class="SideTOC3"><a href="#992379">
      Pinlet Style</a></h3>

      <h3 class="SideTOC3"><a href="#992288">
      Internal Pinlet Name</a></h3>

      <h3 class="SideTOC3"><a href="#990899">
      Status Bar Icons and Name</a></h3>

      <h3 class="SideTOC3"><a href="#990910">
      FEP Creator ID </a></h3>

      <h3 class="SideTOC3"><a href="#990925">
      Help Dialog</a></h3>

      <h3 class="SideTOC3"><a href="#988834">
      Input Mode Indicator</a></h3>

   <h2 class="SideTOC2"><a href="#983676">
   Interpreting Pen Strokes</a></h2>

      <h3 class="SideTOC3"><a href="#983607">
      Receiving Pen Events</a></h3>

      <h3 class="SideTOC3"><a href="#985570">
      Sending Results to Pen Input Manager</a></h3>

      <h3 class="SideTOC3"><a href="#983611">
      Considering the Input Modes</a></h3>

      <h3 class="SideTOC3"><a href="#989240">
      Handling Multistroke Characters</a></h3>

      <h3 class="SideTOC3"><a href="#990522">
      Implementing Live Ink</a></h3>

   <h2 class="SideTOC2"><a href="#983657">
   Specifying the Default Pinlet</a></h2>

      <h3 class="SideTOC3"><a href="#997364">
      Guidelines for Default Pinlets</a></h3>

      <h3 class="SideTOC3"><a href="#997352">
      User Interface Considerations</a></h3>

   <h2 class="SideTOC2"><a href="#996845">
   Summary</a></h2>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="991451"> </a>The dynamic input area is simply a window that displays the user interface of a separate executable called a <b>pinlet</b>. A pinlet receives user input in the form of pen taps or pen strokes and converts that input into character data that an application can use. </p>

<p><a name="986875"> </a>Pinlets come in two general types. <b>Keyboard pinlets</b> offer a user interface where users tap the characters they want to enter. <b>Handwriting recognition pinlets</b> interpret pen strokes as handwriting. Handwriting recognition pinlets typically use a handwriting recognition engine. You may use the provided Graffiti<sup>&#174;</sup> 2 engine or replace it with one of your own. </p>

<p><a name="984594"> </a>A single device may have more than one pinlet installed on it, and users may control which pinlet they want to use. </p>

<p><a name="984662"> </a>This chapter provides guidelines for implementing pinlets. It covers:</p>
   <blockquote class = "bq"><a name="991475"> </a><a href="In_PinletConcept.html#983627">How Pinlets Work</a></blockquote>
   <blockquote class = "bq"><a name="991479"> </a><a href="In_PinletConcept.html#983673">Starting Up and Shutting Down a Pinlet</a></blockquote>
   <blockquote class = "bq"><a name="991492"> </a><a href="In_PinletConcept.html#988833">Presenting a User Interface</a></blockquote>
   <blockquote class = "bq"><a name="991505"> </a><a href="In_PinletConcept.html#983676">Interpreting Pen Strokes</a></blockquote>
   <blockquote class = "bq"><a name="997290"> </a><a href="In_PinletConcept.html#983657">Specifying the Default Pinlet</a></blockquote>

<h2 class="haH2">
  <a name="983627"> </a>How Pinlets Work <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="983672"> </a>In most cases, pinlets interact only with the Pen Input Manager. The Pen Input Manager provides a window into which the pinlet draws its user interface. Through this window, the pinlet receives all pen events. The pinlet converts the pen events to character data and passes that back to the Pen Input Manager. Handwriting recognition pinlets may also use a handwriting recognition engine to interpret pen strokes. (See <a href="In_PinletConcept.html#986545">Figure 3.1</a>.) </p>

<p class="FFigureCaption">
  <a name="986545"> </a><b>Figure 3.1&nbsp;&nbsp;Flow of data through pinlets </b>
</p>
<div align="left"><img src="images/PINSInputFlow.jpg" height="242" width="400" border="0" hspace="0" vspace="0">
</div>

<p><a name="986786"> </a>Some systems use a Front-End Processor (FEP) to convert characters. For example, many existing Japanese devices use handwriting recognition engines to convert pen strokes to Romaji (the Roman alphabet). On these devices, text fields send sequences of characters to the FEP, which converts the characters to Hiragana or Katakana characters. The user can perform a further translation from these alphabets into Kanji. The character recognition performed by the Pen Input Manager is completely separate from the FEP. If you were to add the Pen Input Manager and pinlets to a device with a FEP, the Pen Input Manager still sends its events to Palm OS<sup>&#174;</sup>, and the text field code in Palm OS sends those characters to the FEP (see <a href="In_PinletConcept.html#984982">Figure 3.2</a>). </p>

<p class="FFigureCaption">
  <a name="984982"> </a><b>Figure 3.2&nbsp;&nbsp;Flow of data with a FEP</b>
</p>
<div align="left"><img src="images/PINSWithFEP2.jpg" height="245" width="466" border="0" hspace="0" vspace="0">
</div>

<p><a name="988760"> </a>In rare circumstances, a pinlet depends so much on a FEP that it should only be made active if that FEP is active. For this reason, the pinlet has a FEP class attribute to specify which FEPs the pinlet works with. If the FEP class attribute is defined, the status bar does not advertise the pinlet as available unless it works with a FEP that is currently enabled. </p>

<p><a name="988771"> </a>A pinlet represents a single means of receiving pen input, and only one pinlet is active at a time. Writing characters is one means of receiving input that is controlled by one pinlet. Tapping characters on an on-screen keyboard is another means of receiving input and thus is controlled by another pinlet. You may have more than one means of receiving input within one pinlet if one pinlet can use multiple FEPs, but in all other cases, you should design one pinlet per character input system. </p>

<h2 class="haH2">
  <a name="992084"> </a>Building Pinlets and Handwriting Recognition Engines <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="992099"> </a>To build a pinlet, create a shared library of type <code>'pnlt'</code> (defined by the constant <code>sysFileTPinletApp</code>). </p>

<p><a name="992195"> </a>A handwriting recognition engine is also a shared library. If your pinlet is a handwriting recognition pinlet, link it with the engine you want to use. If you want to use the Graffiti 2 engine, link with the <code>Graffiti2Lib</code> library, which is included in the SDK. </p>

<p><a name="992085"> </a>If you want to replace the Graffiti 2 engine with your own, create a shared library project with type <code>'libr'</code> for the engine and export all of the functions described in <a href="In_HandWriting.html#993097">Chapter 7, "Handwriting Recognition Engine."</a> Then link your pinlet with this library. </p>

<p><a name="992215"> </a>You do not have to separate your handwriting recognition code from your pinlet. You can interpret strokes in the pinlet directly if you don't intend to reuse or share your handwriting recognition engine. </p>

<h2 class="haH2">
  <a name="983673"> </a>Starting Up and Shutting Down a Pinlet <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="990971"> </a>Programmatically, a pinlet looks very similar to a Palm OS application: it starts up by receiving and responding to launch codes, and it has an identical event loop that receives the same types of events that an application does. </p>
<h3 class="hbH3">
  <a name="990978"> </a>Startup <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="992276"> </a>The Pen Input Manager starts up a pinlet when the user selects that pinlet from the status bar or an application calls the <a href="In_PenInputMgr.html#993888"><code>PINSwitchToPinlet()</code></a> function. </p>

<p><a name="990646"> </a>To start up the pinlet, the Pen Input Manager sends launch codes to the pinlet's <code>PilotMain()</code> function: </p>
<pre class="sl">uint32_t PilotMain(uint16_t <code class="par">cmd</code>, void *<code class="par">cmdPBP</code>, 
uint16_t <code class="par">launchFlags</code>)</pre>

<p><a name="988166"> </a>The pinlet must respond to the following launch codes: </p>

<dl>
<dt><a name="995188"> </a><code>sysPinletLaunchCmdLoadProcPtrs</code></dt>
<dd><a name="995189"> </a>The Pen Input Manager calls pinlet functions to set and retrieve the input mode, display a help dialog, and clear the input state. The Pen Input Manager sends this launch code to retrieve pointers to those pinlet functions. The pinlet should return its function pointers in a <a href="In_Pinlet.html#992956"><code>PinletAPIType</code></a> structure and pass it back as the <code class="par">cmdPBP</code> parameter. (The rest of this chapter describes how and when those functions are called.) </dd>

<dt><a name="988167"> </a><code>sysAppLaunchCmdPinletLaunch</code></dt>
<dd><a name="988168"> </a>The pinlet has become the active pinlet, and it should initialize itself. </dd>

</dl>

<p><a name="990935"> </a>When the pinlet is launched, it should:</p>
<ul type="disc">
  <li><a name="990784"> </a>Initialize its state.
  <li><a name="990786"> </a>Display its user interface.
  <li><a name="990938"> </a>If it is a handwriting recognition pinlet, it should start up the engine it uses as described in <a href="In_PinletConcept.html#990980">"Starting up the Handwriting Recognition Engine."</a>
  <li><a name="990787"> </a>Start its event loop. 
   <p><a name="990958"> </a>The event loop is identical to the event loop used in an application. </p>
</ul>
<h3 class="hbH3">
  <a name="990980"> </a>Starting up the Handwriting Recognition Engine <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="990990"> </a>To start up the handwriting recognition engine, you call <a href="In_HandWriting.html#993951"><code>HWRInit()</code></a> and pass it a <a href="In_HandWriting.html#993113"><code>HWRConfig</code></a> structure. This structure identifies the following:</p>
<ul type="disc">
  <li><a name="991088"> </a>The number of horizontal and vertical pixels per inch. 
  <li><a name="991097"> </a>The bounds of the area into which the user is allowed to draw strokes.
  <li><a name="991106"> </a>The number and bounds of any special areas for special input modes, excluding the writing area for the normal input mode. 
   <p><a name="991132"> </a>For example, the Graffiti 2 engine in normal mode translates strokes into lowercase letters. The virtual silkscreen pinlet has two writing areas: one for letters and one for numbers. It specifies only one mode area in its <code>HWRInit()</code> call because one of its writing areas is for the normal mode. </p>
</ul>

<p><a name="993357"> </a>Note that much of this information is dependent on the size of the pinlet's form. In Palm OS Cobalt, you do not know a form's size until runtime when your pinlet receives the <a href="../User_Interface/UI_Window.html#1357625"><code>winResizedEvent</code></a>. Therefore, you may have to wait until you receive that event before you can start up the handwriting recognition engine. This is acceptable as long as you call <code>HWRInit()</code> before you call any other handwriting function. </p>
<h3 class="hbH3">
  <a name="990959"> </a>Shutdown <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="994979"> </a>When the user switches to a new pinlet, the Pen Input Manager sends the <a href="../Programming_Basics/EventCodes.html#994789"><code>appStopEvent</code></a> to your pinlet. In response to this event, the pinlet must shut down its event loop, clear all state, and exit. If your pinlet works with a handwriting recognition engine, you should call <a href="In_HandWriting.html#1003592"><code>HWRShutdown()</code></a> to shut down the engine. </p>

<p><a name="990625"> </a>You don't have to worry that you're getting an <code>appStopEvent</code> intended for some other application or process. The pinlet runs in its own thread and has its own event queue. It only receives events that are intended for it. </p>

<h2 class="haH2">
  <a name="988833"> </a>Presenting a User Interface <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="990883"> </a>You create a pinlet's user interface in a resource file in the same way that you create a user interface for an application. The pinlet's user interface consists of one or more forms containing one or more user interface controls. </p>

<p><a name="990889"> </a>The resource file must also contain the following resources that are unique to pinlets: </p>
   <blockquote class = "bq"><a name="992374"> </a><a href="In_PinletConcept.html#990890">Main Pinlet Form</a></blockquote>
   <blockquote class = "bq"><a name="992424"> </a><a href="In_PinletConcept.html#992379">Pinlet Style</a></blockquote>
   <blockquote class = "bq"><a name="991298"> </a><a href="In_PinletConcept.html#992288">Internal Pinlet Name</a></blockquote>
   <blockquote class = "bq"><a name="991320"> </a><a href="In_PinletConcept.html#990899">Status Bar Icons and Name</a></blockquote>
   <blockquote class = "bq"><a name="991325"> </a><a href="In_PinletConcept.html#990910">FEP Creator ID</a></blockquote>
   <blockquote class = "bq"><a name="991334"> </a><a href="In_PinletConcept.html#990925">Help Dialog</a></blockquote>
   <blockquote class = "bq"><a name="991339"> </a><a href="In_PinletConcept.html#988834">Input Mode Indicator</a></blockquote>
<h3 class="hbH3">
  <a name="990890"> </a>Main Pinlet Form <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="992289"> </a>The main form for your pinlet must be update-based. That is, it must contain a <code>WINDOW_CONSTRAINTS_RESOURCE</code> that does <i>not</i> have the back-buffer attribute set. Palm OS places the pinlet form in the appropriate window layer. If you try to specify the window layer or any other window creation attributes in the <code>WINDOW_CONSTRAINTS_RESOURCE</code>, they are ignored. </p>

<p><a name="992299"> </a>Try to design this form so that a minimum and preferred size of 65 standard coordinates high or less works well. This allows the application to be 160 coordinates high, which is the height used by all legacy application windows. Users prefer to see as much of the application as possible, so your pinlet should be as small as possible while still being usable. </p>

<div><hr>
  <a name="995339"> </a> <b>IMPORTANT: </b> Pinlets cannot display other windows. This means that you cannot include a pop-up list in a pinlet because a pop-up list is a window. 
<hr>
</div>

<p><a name="992302"> </a>Remember that in Palm OS Cobalt, the system controls the size of each window. You cannot guarantee that your pinlet is a specific size. The form's event handler must respond to the <a href="../User_Interface/UI_Window.html#1357625"><code>winResizedEvent</code></a> to find out what size it actually is, and you must only draw the pinlet's form in response to the <a href="../User_Interface/UI_Form.html#1089359"><code>frmUpdateEvent</code></a>.</p>

<div><hr>
  <a name="992506"> </a> <b>NOTE: </b> When the Pen Input Manager closes the input area, the pinlet receives a <code>winResizedEvent</code> specifying a size of 0. 
<hr>
</div>
<h3 class="hbH3">
  <a name="992379"> </a>Pinlet Style <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="992406"> </a>The Pen Input Manager needs to know the style of the pinlet. This pinlet style is used as a possible return value to <a href="In_PenInputMgr.html#993642"><code>PINGetPinletInfo()</code></a>. Include in your pinlet's resource file a <code>SOFT_CONSTANT_RESOURCE</code> with ID 1000. Use one of the constants described in <a href="In_PenInputMgr.html#1000786">"Pinlet Styles"</a> for its value. </p>
<h3 class="hbH3">
  <a name="992288"> </a>Internal Pinlet Name <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="991135"> </a>The Pen Input Manager uses an internal pinlet name to identify each pinlet. Create a <code>STRING_RESOURCE</code> of ID 1001 and specify a name of the form: </p>
<pre class="sl">com.<code class="par">companyName</code>.pinlet.<code class="par">pinletName</code></pre>

<p><a name="991890"> </a>where <code class="par">companyName</code> is the name of your organization and could be used for all pinlets that you write. <code class="par">pinletName</code> is the unique name for your pinlet. </p>

<p><a name="991142"> </a>This name is returned by the functions <a href="In_PenInputMgr.html#993518"><code>PINGetCurrentPinletName()</code></a> and <a href="In_PenInputMgr.html#993642"><code>PINGetPinletInfo()</code></a> and used as input to <a href="In_PenInputMgr.html#993888"><code>PINSwitchToPinlet()</code></a>. It is never shown externally, so there is no need to localize this name.</p>
<h3 class="hbH3">
  <a name="990899"> </a>Status Bar Icons and Name <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="991159"> </a>The status bar displays an icon and name for all pinlets installed on the device. If the user holds the pen down on the input area icon, a list of the names and icons of all pinlets are displayed. This is how the user switches between pinlets. </p>

<p><a name="990916"> </a>Use the <code>APP_ICON_BITMAP_RESOURCE</code> resource type with ID 1001 to specify the status bar icon. This icon should be 15 standard coordinates wide by 11 coordinates high. </p>

<p><a name="990922"> </a>The external pinlet name is contained in an <code>APP_ICON_NAME_RESOURCE</code> with ID 1000. Ideally, the width of this name is no more than 100 coordinates, but it can be as wide as the screen if necessary. Because the status bar displays this name, it is localizable. </p>
<h3 class="hbH3">
  <a name="990910"> </a>FEP Creator ID  <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="991174"> </a>If the pinlet is associated with a FEP, you must supply an <code>SOFT_CONSTANT_RESOURCE</code> with ID 1001 that gives the creator ID of the FEP. </p>
<h3 class="hbH3">
  <a name="990925"> </a>Help Dialog <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="991219"> </a>The function <a href="In_PenInputMgr.html#993780"><code>PINShowReferenceDialog()</code></a> calls <a href="In_Pinlet.html#993262"><code>PinletShowReferenceDialogProcPtr()</code></a> to display a help dialog that specifies how to enter characters. </p>

<p><a name="991234"> </a>Pinlets that use a handwriting recognition engine can call through to <a href="In_HandWriting.html#1003646"><code>HWRShowReferenceDialog()</code></a>, which displays the help for you. If you're not using a handwriting recognition engine, you should supply a help dialog in your resource file. </p>

<p><a name="993759"> </a>In the <code>WINDOW_CONSTRAINTS_RESOURCE</code> for the help dialog, specify <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">winLayerPriority</span> as the window layer. This ensures that the help dialog appears on top of the application form if necessary. </p>

<p><a name="995167"> </a>The <b>Edit</b> menu used in most Palm OS applications has a <b>Graffiti 2 Help</b> menu item that displays help for the Graffiti 2 engine only. If you use a different handwriting recognition engine and want to display help for it, include a control on the pinlet that does so. </p>

<div><hr>
  <a name="996578"> </a> <b>IMPORTANT: </b> Pinlets cannot display more than one window. To launch a help dialog, you must spawn a separate thread, give that thread a user interface context, and then display the dialog in that thread. See <i>Exploring Palm OS: System Management</i> for more information on multithreading. 
<hr>
</div>
<h3 class="hbH3">
  <a name="988834"> </a>Input Mode Indicator <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="991249"> </a>The pinlet should display some visual indication of the current input mode. This indication is typically only given for unusual modes (anything other than normal). See <a href="In_PinletConcept.html#983611">"Considering the Input Modes"</a> for more information. </p>

<h2 class="haH2">
  <a name="983676"> </a>Interpreting Pen Strokes <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="985557"> </a>The pinlet receives pen events, translates the events into characters, and passes the characters to the Pen Input Manager. The pinlet must decide how to interpret the pen strokes. It should respect the input mode set by the user or application, and it might need to store internal state or set timers when interpreting the pen events. It should respond to application requests to clear that internal state. This section discusses these issues: </p>
   <blockquote class = "bq"><a name="991360"> </a><a href="In_PinletConcept.html#983607">Receiving Pen Events</a></blockquote>
   <blockquote class = "bq"><a name="991364"> </a><a href="In_PinletConcept.html#985570">Sending Results to Pen Input Manager</a></blockquote>
   <blockquote class = "bq"><a name="991369"> </a><a href="In_PinletConcept.html#983611">Considering the Input Modes</a></blockquote>
   <blockquote class = "bq"><a name="991373"> </a><a href="In_PinletConcept.html#989240">Handling Multistroke Characters</a></blockquote>
   <blockquote class = "bq"><a name="991377"> </a><a href="In_PinletConcept.html#990522">Implementing Live Ink</a></blockquote>
<h3 class="hbH3">
  <a name="983607"> </a>Receiving Pen Events <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="988248"> </a>Your pinlet has a form with its own event handler, just like an application has a form with an event handler. This event handler should check for and interpret user input. How it does so depends on the type of pinlet you are writing and how you've designed it. If you're doing a keyboard pinlet and each key is implemented as a button, you'll receive <a href="../User_Interface/UI_Control.html#999609"><code>ctlSelectEvent</code></a><code>s </code>for each button the user taps. </p>

<p><a name="988251"> </a>If you are implementing a handwriting recognition pinlet, you should do something like the following:</p>
<ol type="1">
  <li value="1"><a name="989085"> </a>On <a href="In_LowEvents.html#994048"><code>penDownEvent</code></a>, check to see if the pen is down within the writing area. If so, track the pen. 
  <li value="2"><a name="989089"> </a>On <a href="In_LowEvents.html#994072"><code>penMoveEvent</code></a>s, record the points sent in the event. 
  <li value="3"><a name="989103"> </a>On the <a href="In_LowEvents.html#994097"><code>penUpEvent</code></a>, call <a href="In_HandWriting.html#994058"><code>HWRProcessStroke()</code></a>, sending it the points you recorded upon each <code>penMoveEvent</code>. 
   <p><a name="989121"> </a>The handwriting recognition engine returns a <a href="In_HandWriting.html#993214"><code>HWRResult</code></a> containing characters, an input mode indication, an inking hint, and a Boolean that indicates if a timeout should be set. More details about each of these are given later in this chapter. </p>
</ol>

<div><hr>
  <a name="996453"> </a> <b>TIP: </b> If you're using a gadget to track the pen, call <a href="../User_Interface/UI_Form.html#1004018"><code>FrmSetPenTracking()</code></a> in the gadget's event handler in response to <a href="../User_Interface/UI_Form.html#1089105"><code>frmGadgetEnterEvent</code></a>. See the description of <a href="../User_Interface/UI_Form.html#1004659"><code>FormGadgetHandlerType()</code></a> for more information. 
<hr>
</div>
<h3 class="hbH3">
  <a name="985570"> </a>Sending Results to Pen Input Manager <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="985800"> </a>To send the character input to the Pen Input Manager, use the call <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> or <a href="In_Pinlet.html#997680"><code>PINFeedString()</code></a>. You must supply UTF8 data to these functions.</p>

<p><a name="989139"> </a>If you are writing a handwriting recognition pinlet that uses the Graffiti 2 engine, that engine returns characters in the device's native encoding. Check the <code>flags</code> field of each character that the engine has returned. If it is <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">pinCharFlagVirtual</span>, the character is a virtual character and you can pass that directly to <code>PINFeedChar()</code> without conversion. If no modifiers are set, the character is textual data. Use <a href="../Text_and_Localization/TextMgr.html#1026712"><code>TxtConvertEncoding()</code></a><code> </code>to convert it to UTF8.</p>
<h3 class="hbH3">
  <a name="983611"> </a>Considering the Input Modes <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="989138"> </a>As described in the section <a href="In_PIMConcept.html#999089">"Setting the Pinlet Input Mode,"</a> the input mode affects how pen events are converted to characters. </p>

<p><a name="989162"> </a>The pinlet receives a call to the function <a href="In_Pinlet.html#993220"><code>PinletSetInputModeProcPtr()</code></a> when the application changes the input mode. It should also implement <a href="In_Pinlet.html#993154"><code>PinletGetInputModeProcPtr()</code></a>, which is used to retrieve the current input mode from the pinlet. </p>

<p><a name="991561"> </a>If the pinlet uses a handwriting recognition engine, these functions can simply call through to the functions <a href="In_HandWriting.html#1003722"><code>HWRSetInputMode()</code></a> and <a href="In_HandWriting.html#1004124"><code>HWRGetInputMode()</code></a>. For the set function, it must also invalidate the display so that it is redrawn in response to the <code>frmUpdateEvent</code> to indicate the change in mode. </p>

<p><a name="991635"> </a>Note that the engine does not have to respect all input modes. Some modes might not make sense, in which case the engine sets the mode to a reasonably close value. For example, if a handwriting recognition engine does not implement caps lock mode, it might set the mode to shift instead. If the engine interprets the Latin alphabet and receives a request to switch to Hiragana, it could just remain in the default mode. For this reason, the pinlet should always call <a href="In_HandWriting.html#1004124"><code>HWRGetInputMode()</code></a> after calling <a href="In_HandWriting.html#1003722"><code>HWRSetInputMode()</code></a> to see if the change actually took place before invalidating the display. </p>

<p><a name="989154"> </a>If the pinlet performs the conversion to character data itself, it should take the input mode into consideration. It should store the input mode in such a way that it will be taken into consideration for the next series of pen events. Like the handwriting recognition engine, the pinlet does not have to respect all input modes. </p>

<p><a name="984288"> </a>Many handwriting recognition pinlets will have multiple "mode areas," that is, areas in which the pen stroke is interpreted in a certain way such as numeric or shifted. The effect of <code>PinletSetInputModeProcPtr()</code> on these mode areas is implementation-defined.</p>

<p><a name="989210"> </a>In addition to receiving <a href="In_Pinlet.html#993220"><code>PinletSetInputModeProcPtr()</code></a>, a handwriting recognition pinlet may have to change its mode in response to the return value for <a href="In_HandWriting.html#994058"><code>HWRProcessStroke()</code></a>. If the user has entered a stroke that changes the input mode, the engine sets the <code>inputMode</code> field of the returned structure. Pinlets need to check this value and change their input mode accordingly. </p>
<h3 class="hbH3">
  <a name="989240"> </a>Handling Multistroke Characters <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="989241"> </a>Handwriting recognition pinlets might need to deal with multistroke characters. Consider the K character in Graffiti 2 writing. This character takes two strokes to draw, and the first stroke is identical to the stroke for an L character. </p>

<p><a name="989248"> </a>If the pinlet is working with a handwriting recognition engine, it should send each stroke to the engine in separate <a href="In_HandWriting.html#994058"><code>HWRProcessStroke()</code></a> calls. The handwriting recognition engine determines what to do with the information. It might do either or both of the following: </p>
<ul type="disc">
  <li><a name="989249"> </a>If the first stroke could be interpreted as a character by itself, the engine might return the character but set the <code>uncertain</code> field in the structure to indicate that the character may later have to be erased. 
  <li><a name="989256"> </a>It might request a timeout value be set by returning <code>true</code> for the <code>timeout</code> field. The pinlet should set a timeout and if that time period elapses with no other strokes being received, call <a href="In_HandWriting.html#994289"><code>HWRTimeout()</code></a>. 
</ul>

<p><a name="994189"> </a>If the handwriting recognition engine uses the <code>uncertain</code> field, it might process an ambiguous character such as the stroke for the letter L as described in <a href="In_PinletConcept.html#995501">Table 3.1</a>. </p>

<p class="caption"><a name="995501"> </a><b>Table 3.1&nbsp;&nbsp;Processing an L stroke option 1  </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="995507"> </a><b>User Action</b></p>
    </th>
    <th><p class="tt"><a name="995509"> </a><b>Pinlet Action </b></p>
    </th>
    <th><p class="tt"><a name="995511"> </a><b>Handwriting Recognition Engine Action </b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995513"> </a>Draws the stroke for an L character</p>
    </td>
    <td><p class="tt"><a name="995516"> </a>Calls <code>HWRProcessStroke()</code> in response to the <code>penUpEvent</code>. </p>
    </td>
    <td><p class="tt"><a name="995520"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="995521"> </a><div class="BTBulletTable">&#8226; a <code>chars</code> array containing the L character</div>
  <a name="995522"> </a><div class="BTBulletTable">&#8226; the <code>uncertain</code> field set to 1</div>
  <a name="995523"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>true</code></div>    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995525"> </a></p>
    </td>
    <td>
  <a name="995527"> </a><div class="BTBulletTable">&#8226; Stores the L character. </div>
  <a name="995532"> </a><div class="BTBulletTable">&#8226; Calls <a href="../System_Management/TimeMgr.html#993351"><code>TimGetTicks()</code></a> and records the time. </div>
  <a name="995533"> </a><div class="BTBulletTable">&#8226; Passes a timeout value to <a href="../Programming_Basics/Event.html#996063"><code>EvtGetEvent()</code></a>. </div>
  <a name="995538"> </a><div class="BTBulletTable">&#8226; Upon each <code>nilEvent</code>, checks to see if timeout period has elapsed. </div>    </td>
    <td><p class="tt"><a name="995540"> </a></p>
    </td>
  </tr>
</table>

</div>


<p><a name="995352"> </a>Then, it would process the second potential stroke as described in <a href="In_PinletConcept.html#994200">Table 3.2</a>. Early versions of the Graffiti 2 engine worked in this manner. </p>

<p class="caption"><a name="994200"> </a><b>Table 3.2&nbsp;&nbsp;Processing a stroke after the L stroke option 1 </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="994206"> </a><b>User Action</b></p>
    </th>
    <th><p class="tt"><a name="994208"> </a><b>Pinlet Action </b></p>
    </th>
    <th><p class="tt"><a name="994210"> </a><b>Handwriting Recognition Engine Action </b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="994241"> </a>Draws the second stroke of the K character </p>
    </td>
    <td><ul type="disc">
  <li><a name="994243"> </a>Cancels the timeout in response to any pen event. 
  <li><a name="994244"> </a>Calls <code>HWRProcessStroke()</code> in response to the <code>penUpEvent</code>.
</ul>
<p class="tt"><a name="994247"> </a></p>
    </td>
    <td><p class="tt"><a name="994250"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="994251"> </a><div class="BTBulletTable">&#8226; a <code>chars</code> array containing the K character</div>
  <a name="994252"> </a><div class="BTBulletTable">&#8226; the <code>deleteUncertain</code> field set to 1</div>
  <a name="994253"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>false</code></div><p class="tt"><a name="994254"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="994256"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="994258"> </a>Discards the L character. 
  <li><a name="994262"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the K character. 
</ul>
    </td>
    <td><p class="tt"><a name="994264"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="994266"> </a>Draws a different character (instead of the second stroke for the K character) </p>
    </td>
    <td><ul type="disc">
  <li><a name="994268"> </a>Cancels the timeout in response to any pen event. 
  <li><a name="994269"> </a>Calls <code>HWRProcessStroke()</code> in response to the <code>penUpEvent</code>.
</ul>
<p class="tt"><a name="994272"> </a></p>
    </td>
    <td><p class="tt"><a name="994275"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="994276"> </a><div class="BTBulletTable">&#8226; a <code>chars</code> array containing the new character</div>
  <a name="994277"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>false</code></div><p class="tt"><a name="994278"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="994280"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="994285"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the L character. 
  <li><a name="994289"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the new character. 
</ul>
    </td>
    <td><p class="tt"><a name="994291"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="994293"> </a>Does nothing (instead of drawing a second stroke)</p>
    </td>
    <td><ul type="disc">
  <li><a name="994298"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the L character. 
  <li><a name="994302"> </a>Calls <a href="In_HandWriting.html#994289"><code>HWRTimeout()</code></a>
</ul>
    </td>
    <td><p class="tt"><a name="994305"> </a>Returns an <code>HWRResult</code> structure with the <code>timeout</code> field set to <code>false</code>. </p>
    </td>
  </tr>
</table>

</div>


<p><a name="996057"> </a>The current Graffiti 2 engine does not use the <code>uncertain</code> field. It processes the L character as described in <a href="In_PinletConcept.html#996066">Table 3.3</a>. </p>

<p class="caption"><a name="996066"> </a><b>Table 3.3&nbsp;&nbsp;Processing an L stroke option 2 </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="996072"> </a><b>User Action </b></p>
    </th>
    <th><p class="tt"><a name="996074"> </a><b>Pinlet Action </b></p>
    </th>
    <th><p class="tt"><a name="996076"> </a><b>Handwriting Recognition Engine Action </b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996078"> </a>Draws the stroke for an L character</p>
    </td>
    <td><p class="tt"><a name="996081"> </a>Calls <code>HWRProcessStroke()</code> in response to the <code>penUpEvent</code>. </p>
<p class="tt"><a name="996083"> </a></p>
    </td>
    <td><p class="tt"><a name="996086"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="996087"> </a><div class="BTBulletTable">&#8226; an empty <code>chars</code> array </div>
  <a name="996088"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>true</code></div><p class="tt"><a name="996089"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996091"> </a></p>
    </td>
    <td>
  <a name="996097"> </a><div class="BTBulletTable">&#8226; Calls <a href="../System_Management/TimeMgr.html#993351"><code>TimGetTicks()</code></a> and records the time. </div>
  <a name="996098"> </a><div class="BTBulletTable">&#8226; Passes a timeout value to <a href="../Programming_Basics/Event.html#996063"><code>EvtGetEvent()</code></a>. </div>
  <a name="996103"> </a><div class="BTBulletTable">&#8226; Upon <code>nilEvent</code>, check to see if timeout period has elapsed. </div><p class="tt"><a name="996104"> </a></p>
    </td>
    <td><p class="tt"><a name="996106"> </a></p>
    </td>
  </tr>
</table>

</div>


<p><a name="996109"> </a>Then it processes the next stroke as described in <a href="In_PinletConcept.html#996119">Table 3.4</a>. </p>

<p class="caption"><a name="996119"> </a><b>Table 3.4&nbsp;&nbsp;Processing a stroke after the L stroke option 2  </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="996125"> </a><b>User Action </b></p>
    </th>
    <th><p class="tt"><a name="996127"> </a><b>Pinlet Action </b></p>
    </th>
    <th><p class="tt"><a name="996129"> </a><b>Handwriting Recognition Engine Action </b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996161"> </a>Draws the second stroke of the K character </p>
    </td>
    <td><ul type="disc">
  <li><a name="996163"> </a>Cancels the timeout in response to any pen event. 
  <li><a name="996164"> </a>Calls <code>HWRProcessStroke()</code> in response to the <code>penUpEvent</code>. 
</ul>
<p class="tt"><a name="996167"> </a></p>
    </td>
    <td><p class="tt"><a name="996170"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="996171"> </a><div class="BTBulletTable">&#8226; a <code>chars</code> array containing the K character</div>
  <a name="996172"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>false</code></div><p class="tt"><a name="996173"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996175"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="996180"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the K character. 
</ul>
    </td>
    <td><p class="tt"><a name="996182"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996184"> </a>Draws a different character (instead of the second stroke for the K character) </p>
    </td>
    <td><ul type="disc">
  <li><a name="996186"> </a>Cancels the timeout in response to any pen event. 
  <li><a name="996187"> </a>Calls <code>HWRProcessStroke()</code> in response to the <code>penUpEvent</code>. 
</ul>
<p class="tt"><a name="996190"> </a></p>
    </td>
    <td><p class="tt"><a name="996193"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="996194"> </a><div class="BTBulletTable">&#8226; a <code>chars</code> array containing the L character and the new character</div>
  <a name="996195"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>false</code></div><p class="tt"><a name="996196"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996198"> </a></p>
    </td>
    <td><ul type="disc">
  <li><a name="996203"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the L character. 
  <li><a name="996207"> </a>Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the new character. 
</ul>
    </td>
    <td><p class="tt"><a name="996209"> </a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996211"> </a>Does nothing (instead of drawing a second stroke)</p>
    </td>
    <td><p class="tt"><a name="996216"> </a>Calls <a href="In_HandWriting.html#994289"><code>HWRTimeout()</code></a>.</p>
    </td>
    <td><p class="tt"><a name="996219"> </a>Returns an <code>HWRResult</code> structure with: </p>

  <a name="996220"> </a><div class="BTBulletTable">&#8226; a <code>chars</code> array containing the L character </div>
  <a name="996221"> </a><div class="BTBulletTable">&#8226; the <code>timeout</code> field set to <code>false</code></div>    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996223"> </a></p>
    </td>
    <td>
  <a name="996225"> </a><div class="BTBulletTable">&#8226; Resets the timeout. </div>
  <a name="996229"> </a><div class="BTBulletTable">&#8226; Calls <a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a> with the L character. </div>    </td>
    <td><p class="tt"><a name="996231"> </a></p>
    </td>
  </tr>
</table>

</div>


<p><a name="996025"> </a>Another case that might occur in both scenarios is that the pinlet may receive a <a href="In_Pinlet.html#993084"><code>PinletClearStateProcPtr()</code></a> call indicating all internal state should be cleared. This occurs when the user has moved to a new text field, tapped a control, switched applications, or performed any other action that indicates that the pinlet should start over when interpreting the next set of events. In response to this call, the pinlet should:</p>
<ul type="disc">
  <li><a name="994455"> </a>Clear its timeout, its input mode, and any other internal state that it keeps.
  <li><a name="994460"> </a>Call <a href="In_HandWriting.html#1004145"><code>HWRClearInputState()</code></a> to have the handwriting recognition engine do the same. 
</ul>
<h3 class="hbH3">
  <a name="990522"> </a>Implementing Live Ink <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="990527"> </a><b>Live ink</b> is a popular feature with handwriting recognition pinlets in which the user's pen movement is echoed on the screen. This feature helps users understand which character their strokes become. </p>

<p><a name="990565"> </a>If you want to implement a live ink feature, do so in the pinlet. The handwriting recognition engine helps with this feature by returning information in the <code>inkHint</code> field. The handwriting recognition engine provides one of the following values: </p>

<dl>
<dt><a name="990581"> </a><code>hwrInkHintNone</code></dt>
<dd><a name="994475"> </a>The pinlet should erase the last stroke drawn. Any strokes that were previously kept are still kept. This is the default behavior. </dd>

<dt><a name="994474"> </a><code>hwrInkHintEraseAll</code></dt>
<dd><a name="990582"> </a>The pinlet should erase all strokes currently being displayed. This is typically sent when the engine has successfully converted a character. </dd>

<dt><a name="990589"> </a><code>hwrInkHintKeepAll</code></dt>
<dd><a name="990594"> </a>The pinlet should retain all strokes currently being displayed. </dd>

<dt><a name="990599"> </a><code>hwrInkHintKeepLastOnly</code></dt>
<dd><a name="990612"> </a>The user is in the middle of a multistroke character. The pinlet should display only the last stroke. It should erase any previous strokes. </dd>

</dl>

<h2 class="haH2">
  <a name="983657"> </a>Specifying the Default Pinlet <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="996850"> </a>The PalmSource-provided pinlets have buttons on the right side that allow the user to switch between the default handwriting recognition pinlet and the different panes of the default keyboard pinlet. All other pinlets are only available from the pop-up menu in the status bar. </p>

<p class="FFigureCaption">
  <a name="996905"> </a><b>Figure 3.3&nbsp;&nbsp;Default pinlet buttons</b>
</p>
<div align="left"><img src="images/InputAreaHWPinlet3.jpg" height="112" width="480" border="0" hspace="0" vspace="0">
</div>

<p><a name="996897"> </a>If you want users to be able to access your pinlet from these buttons, you can set your pinlet as either the default handwriting recognition pinlet or the default keyboard pinlet. To do so, use <a href="In_PenInputMgr.html#1011130"><code>PINSetDefaultPinlet()</code></a>. </p>
<h3 class="hbH3">
  <a name="997364"> </a>Guidelines for Default Pinlets <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997041"> </a>If you want your pinlet to be selected as a default, follow these guidelines: </p>
<ul type="disc">
  <li><a name="997098"> </a>Users should be allowed to decide which pinlets they want to be the default. You might install a separate application that allows the user to set preferences for your pinlet and allows them to specify your pinlet as the default. 
  <li><a name="997145"> </a>There are only two possible default pinlets, one handwriting and one keyboard. The three buttons for keyboard pinlets access different input modes of a single default keyboard pinlet, as described in <a href="In_PinletConcept.html#996905">Figure 3.3</a>. 
  <li><a name="997124"> </a>If your pinlet does something other than recognize handwriting or display a keyboard, do not set it as a default pinlet. If, for example, your pinlet is written specifically to work with a certain set of applications, you should have the applications call <a href="In_PenInputMgr.html#993888"><code>PINSwitchToPinlet()</code></a> to make that pinlet active. Do not set the default pinlet. 
</ul>
<h3 class="hbH3">
  <a name="997352"> </a>User Interface Considerations <a href="#987255"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997401"> </a>If you want your pinlet to be chosen as a default, its user interface should include a way to select the other style of default pinlet. That is, if yours is a handwriting recognition pinlet, it should include a button that allows the user to switch to the keyboard pinlet. If yours is a keyboard pinlet, it must include a way to select the default handwriting recognition pinlet. </p>

<p><a name="997353"> </a>On devices with no dynamic input area when the user opens the keyboard dialog, the default keyboard pinlet is displayed in the dialog. In this case, the user interface must <i>not</i> include a button that switches to the default handwriting recognition pinlet. When a keyboard pinlet is displayed in a dialog, it is opened with the input mode <code>pinInputAreaNone</code>. </p>

<p><a name="997391"> </a>There is no way to replace the images that appear in the buttons shown in <a href="In_PinletConcept.html#996905">Figure 3.3</a>. Therefore, if you are replacing the default keyboard pinlet, you cannot replace the icons in the default handwriting recognition pinlet with your own icons. </p>

<h2 class="haH2">
  <a name="996845"> </a>Summary <a href="#987255"><span class="nav">^TOP^</span></a>
</h2>



<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="993268"> </a><b>Pinlet Functions</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="993273"> </a><a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a><br><a href="In_Pinlet.html#997680"><code>PINFeedString()</code></a><br><a href="In_PenInputMgr.html#1011130"><code>PINSetDefaultPinlet()</code></a><br><a href="In_PenInputMgr.html#1011004"><code>PINGetDefaultPinlet()</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="993277"> </a><a href="In_Pinlet.html#993084"><code>PinletClearStateProcPtr()</code></a><br><a href="In_Pinlet.html#993154"><code>PinletGetInputModeProcPtr()</code></a><br><a href="In_Pinlet.html#993220"><code>PinletSetInputModeProcPtr()</code></a><br><a href="In_Pinlet.html#993262"><code>PinletShowReferenceDialogProcPtr()</code></a></p>
    </td>
  </tr>
</table>

</div>



<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th colspan="2" rowspan="1"><p class="tt"><a name="993291"> </a><b>Handwriting Recognition Engine Functions</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="993295"> </a><a href="In_HandWriting.html#1003592"><code>HWRShutdown()</code></a><br><a href="In_HandWriting.html#993951"><code>HWRInit()</code></a><br><a href="In_HandWriting.html#1003646"><code>HWRShowReferenceDialog()</code></a><br><a href="In_HandWriting.html#1003722"><code>HWRSetInputMode()</code></a></p>
    </td>
    <td><p class="tt"><a name="993297"> </a><a href="In_HandWriting.html#1004124"><code>HWRGetInputMode()</code></a><br><a href="In_HandWriting.html#994058"><code>HWRProcessStroke()</code></a><br><a href="In_HandWriting.html#1004145"><code>HWRClearInputState()</code></a><br><a href="In_HandWriting.html#994289"><code>HWRTimeout()</code></a></p>
    </td>
  </tr>
</table>

</div>


<p><a name="993288"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 2003, 2004, PalmSource, Inc. and its affiliates. All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="In_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="In_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_PIMConcept.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_HardKeys.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>