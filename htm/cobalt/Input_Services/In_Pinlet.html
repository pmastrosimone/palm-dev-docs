<html>
<head>
<title>(Protein) Pinlet | Input Services </title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:12:34">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="992940"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="In_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_PenInputMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_ShiftIndicator.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">11 &nbsp;&nbsp;
Pinlet</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Input Services </p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="In_RefPart.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="In_Pinlet.html">11  Pinlet</a></h1>

   <h2 class="SideTOC2"><a href="#992948">
   Pinlet Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#992956">
      PinletAPIType</a></h3>

   <h2 class="SideTOC2"><a href="#993010">
   Pinlet Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#996104">
      PINFeedChar</a></h3>

      <h3 class="SideTOC3"><a href="#997680">
      PINFeedString</a></h3>

   <h2 class="SideTOC2"><a href="#997598">
   Pinlet-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#993084">
      PinletClearStateProcPtr</a></h3>

      <h3 class="SideTOC3"><a href="#993154">
      PinletGetInputModeProcPtr</a></h3>

      <h3 class="SideTOC3"><a href="#993220">
      PinletSetInputModeProcPtr</a></h3>

      <h3 class="SideTOC3"><a href="#993262">
      PinletShowReferenceDialogProcPtr</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="992954"> </a>This chapter describes the APIs that must be implemented in a pinlet. It covers: </p>
   <blockquote class = "bq"><a name="994085"> </a><a href="In_Pinlet.html#992948">Pinlet Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="993019"> </a><a href="In_Pinlet.html#993010">Pinlet Functions and Macros</a></blockquote>
   <blockquote class = "bq"><a name="993079"> </a><a href="In_Pinlet.html#997598">Pinlet-Defined Functions</a></blockquote>

<p><a name="992944"> </a>The header file <code>Pinlet.h</code> declares the API that this chapter describes.</p>

<p><a name="992946"> </a>For more information about implementing pinlets, see <a href="In_PinletConcept.html#987255">Chapter 3, "Customizing the Dynamic Input Area."</a></p>

<h2 class="haH2">
  <a name="992948"> </a>Pinlet Structures and Types <a href="#992940"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="992956"> </a>PinletAPIType Struct <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="992961"> </a>Purpose 
</h4>

<p><a name="992964"> </a>Defines the functions that the pinlet implements. </p>
<h4>
  <a name="992966"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="992969"> </a></code><h4>
  <a name="992971"> </a>Prototype 
</h4>
<pre class="proto"><a name="992974"></a>typedef struct {
   PinletClearStateProcPtr pinletClearState;
   PinletGetInputModeProcPtr pinletGetInputMode;
   PinletSetInputModeProcPtr pinletSetInputMode;
   PinletShowReferenceDialogProcPtr 
      pinletShowReferenceDialog;
} PinletAPIType
</pre>
<h4>
  <a name="992976"> </a>Fields 
</h4>

<dl>
<dt><a name="995234"> </a><code>pinletClearState</code></dt>
<dd><a name="995235"> </a>Pointer to the function that clears the pinlet state. See <a href="In_Pinlet.html#993084"><code>PinletClearStateProcPtr()</code></a>.</dd>

<dt><a name="995239"> </a><code>pinletGetInputMode</code></dt>
<dd><a name="992985"> </a>Pointer to the function that returns the pinlet's input mode. See <a href="In_Pinlet.html#993154"><code>PinletGetInputModeProcPtr()</code></a>.</dd>

<dt><a name="992987"> </a><code>pinletSetInputMode</code></dt>
<dd><a name="992989"> </a>Pointer to the function that sets the pinlet's input mode. See <a href="In_Pinlet.html#993220"><code>PinletSetInputModeProcPtr()</code></a>.</dd>

<dt><a name="992991"> </a><code>pinletShowReferenceDialog</code></dt>
<dd><a name="992993"> </a>Pointer to the function that displays pinlet help. See <a href="In_Pinlet.html#993262"><code>PinletShowReferenceDialogProcPtr()</code></a>.</dd>

</dl>
<h4>
  <a name="992995"> </a>Comments 
</h4>

<p><a name="993000"> </a>You pass this structure back to the Pen Input Manager in the parameter block for the <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">sysPinletLaunchCmdLoadProcPtrs</span> launch code. </p>

<p><a name="995615"> </a>The Pen Input Manager only calls the functions you specify while the pinlet is running. </p>

<h2 class="haH2">
  <a name="993010"> </a>Pinlet Functions and Macros <a href="#992940"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996104"> </a>PINFeedChar Function <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993032"> </a>Purpose 
</h4>

<p><a name="993035"> </a>Sends a character key to Palm OS<sup>&#174;</sup>. </p>
<h4>
  <a name="993037"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="993040"> </a></code><h4>
  <a name="993042"> </a>Prototype 
</h4>
<pre class="proto"><a name="993045"></a>void PINFeedChar (
   wchar32_t <i>chr</i>,
   uint32_t <code class="par">flags</code>
)
</pre>
<h4>
  <a name="993047"> </a>Parameters 
</h4>

<dl>
<dt><a name="993050"> </a><code>&rarr;  <i>chr</i></code></dt>
<dd><a name="996565"> </a>The character to be sent. This character must use the UTF8 character encoding. </dd>

<dt><a name="996057"> </a><code>&rarr;  <i>flags</i></code></dt>
<dd><a name="996058"> </a>0 or <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">pinCharFlagVirtual</span> if the character is a virtual character. </dd>

</dl>
<h4>
  <a name="993058"> </a>Returns 
</h4>

<p><a name="993061"> </a>Nothing.</p>
<h4>
  <a name="993063"> </a>Comments 
</h4>

<p><a name="997591"> </a>The Pen Input Manager expects characters in the UTF8 encoding. If necessary, use <a href="../Text_and_Localization/TextMgr.html#1026712"><code>TxtConvertEncoding()</code></a><code> </code>to convert a character from the device's native encoding to UTF8 before calling this function. Note that the character gets converted back to the device's native encoding before the application receives the <code>keyDownEvent</code>. </p>
<h4>
  <a name="997890"> </a>See Also 
</h4>

<p><a name="997919"> </a><a href="In_Pinlet.html#997680"><code>PINFeedString()</code></a></p>

<h3 class="hbH3">
  <a name="997680"> </a>PINFeedString Function <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997682"> </a>Purpose 
</h4>

<p><a name="997683"> </a>Sends a string of characters to Palm OS. </p>
<h4>
  <a name="997684"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="997685"> </a></code><h4>
  <a name="997686"> </a>Prototype 
</h4>
<pre class="proto"><a name="997687"></a>void PINFeedString (
   const char <code class="par">*str</code>
)
</pre>
<h4>
  <a name="997688"> </a>Parameters 
</h4>

<dl>
<dt><a name="997689"> </a><code>&rarr;  <i>str</i></code></dt>
<dd><a name="997690"> </a>A string containing the characters to be sent. The characters must use the UTF8 character encoding. </dd>

</dl>
<h4>
  <a name="997691"> </a>Returns 
</h4>

<p><a name="997692"> </a>Nothing. </p>
<h4>
  <a name="997693"> </a>Comments 
</h4>

<p><a name="997876"> </a>This function is a convenient way to send more than one character to the Pen Input Manager at once. A <code>keyDownEvent</code> is created for each character in the string. You cannot send virtual characters using this function. </p>

<p><a name="997964"> </a>The Pen Input Manager expects characters in the UTF8 encoding. If necessary, use <a href="../Text_and_Localization/TextMgr.html#1026712"><code>TxtConvertEncoding()</code></a> to convert characters from the device's native encoding to UTF8 before calling this function. Note that the characters get converted back to the device's native encoding before the application receives the <code>keyDownEvent</code>. </p>
<h4>
  <a name="997695"> </a>See Also 
</h4>

<p><a name="997696"> </a><a href="In_Pinlet.html#996104"><code>PINFeedChar()</code></a></p>

<h2 class="haH2">
  <a name="997598"> </a>Pinlet-Defined Functions <a href="#992940"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993084"> </a>PinletClearStateProcPtr Function <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993089"> </a>Purpose 
</h4>

<p><a name="993092"> </a>Clears the current internal state of the pinlet. </p>
<h4>
  <a name="993094"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="993097"> </a></code><h4>
  <a name="993099"> </a>Prototype 
</h4>
<pre class="proto"><a name="993102"></a>void (
   *PinletClearStateProcPtr
) (
   void
)
</pre>
<h4>
  <a name="993104"> </a>Parameters 
</h4>

<p><a name="993109"> </a>None.</p>
<h4>
  <a name="993111"> </a>Returns 
</h4>

<p><a name="993114"> </a>Nothing.</p>
<h4>
  <a name="993116"> </a>Comments 
</h4>

<p><a name="994030"> </a>This function should clear any such internal state and should reset the input mode back to the normal mode. The Pen Input Manager calls this function when it receives the <a href="In_PenInputMgr.html#993214"><code>PINClearPinletState()</code></a> call. </p>

<p><a name="993339"> </a>As described in <a href="In_PinletConcept.html#989240">"Handling Multistroke Characters,"</a> a pinlet may need to keep some internal state while it is running. <code>PinletClearStateProcPtr()</code> is called when the user has performed an action, such as switching to a new text field, that clearly indicates that they are done writing that character, so the internal state should be cleared. </p>
<h4>
  <a name="995336"> </a>See Also 
</h4>

<p><a name="995360"> </a><a href="In_HandWriting.html#1004145"><code>HWRClearInputState()</code></a></p>

<h3 class="hbH3">
  <a name="993154"> </a>PinletGetInputModeProcPtr Function <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993183"> </a>Purpose 
</h4>

<p><a name="993186"> </a>Returns the current input mode of the pinlet. </p>
<h4>
  <a name="993188"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="993191"> </a></code><h4>
  <a name="993193"> </a>Prototype 
</h4>
<pre class="proto"><a name="993196"></a>uint16_t (
   *PinletGetInputModeProcPtr
) (
   void
)
</pre>
<h4>
  <a name="993198"> </a>Parameters 
</h4>

<p><a name="993203"> </a>None.</p>
<h4>
  <a name="993205"> </a>Returns 
</h4>

<p><a name="993208"> </a>One of the input mode constants listed in the section <a href="In_PenInputMgr.html#1007514">"Pinlet Input Modes."</a> </p>
<h4>
  <a name="993210"> </a>Comments 
</h4>

<p><a name="995499"> </a>The Pen Input Manager calls this function when it receives the <a href="In_PenInputMgr.html#993602"><code>PINGetInputMode()</code></a> call. Handwriting recognition pinlets should call through to the <a href="In_HandWriting.html#1004124"><code>HWRGetInputMode()</code></a> function. </p>
<h4>
  <a name="995507"> </a>See Also 
</h4>

<p><a name="993218"> </a><a href="In_Pinlet.html#993220"><code>PinletSetInputModeProcPtr()</code></a>, <a href="In_PinletConcept.html#983611">"Considering the Input Modes"</a></p>

<h3 class="hbH3">
  <a name="993220"> </a>PinletSetInputModeProcPtr Function <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993225"> </a>Purpose 
</h4>

<p><a name="993228"> </a>Sets the pinlet input mode. </p>
<h4>
  <a name="993230"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="993233"> </a></code><h4>
  <a name="993235"> </a>Prototype 
</h4>
<pre class="proto"><a name="993238"></a>void (
   *PinletSetInputModeProcPtr
) (
   uint16_t <i>mode</i>
)
</pre>
<h4>
  <a name="993240"> </a>Parameters 
</h4>

<dl>
<dt><a name="993243"> </a><code>&rarr;  <i>mode</i></code></dt>
<dd><a name="993245"> </a>The mode to which the pinlet should be set. This is one of the constants listed in the <a href="In_PenInputMgr.html#1007514">"Pinlet Input Modes"</a> section. </dd>

</dl>
<h4>
  <a name="993247"> </a>Returns 
</h4>

<p><a name="993250"> </a>Nothing.</p>
<h4>
  <a name="993252"> </a>Comments 
</h4>

<p><a name="993511"> </a>The Pen Input Manager calls this function in response to the <a href="In_PenInputMgr.html#993738"><code>PINSetInputMode()</code></a> function. </p>

<p><a name="993512"> </a>The pinlet input mode determines how the pinlet translates the next set of input from the user. The modes that a pinlet uses or accepts are up to the pinlet. Typically, in the normal or default input mode, the pinlet translates user input into lowercase letters. Translation into any other type of character or symbol requires a different input mode. </p>

<p><a name="993513"> </a>The input mode should be considered a hint that the pinlet can use to coordinate with the application. If the pinlet does respect the input mode, it should have a visible indication of what its current input mode is. </p>

<p><a name="993514"> </a>Not all input modes apply to all pinlets. If the pinlet does not support the specified input mode, it should choose the closest equivalent that is supported, which could be the default mode. </p>

<p><a name="995532"> </a>Handwriting recognition pinlets can call through to the function <a href="In_HandWriting.html#1003722"><code>HWRSetInputMode()</code></a>. </p>
<h4>
  <a name="993257"> </a>See Also 
</h4>

<p><a name="993260"> </a><a href="In_Pinlet.html#993154"><code>PinletGetInputModeProcPtr()</code></a>, <a href="In_PinletConcept.html#983611">"Considering the Input Modes"</a></p>

<h3 class="hbH3">
  <a name="993262"> </a>PinletShowReferenceDialogProcPtr Function <a href="#992940"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993267"> </a>Purpose 
</h4>

<p><a name="993270"> </a>Displays the help or reference dialog for the pinlet. </p>
<h4>
  <a name="993272"> </a>Declared In 
</h4>
<code>Pinlet.h<a name="993275"> </a></code><h4>
  <a name="993277"> </a>Prototype 
</h4>
<pre class="proto"><a name="993280"></a>void (
   *PinletShowReferenceDialogProcPtr
) (
   void
)
</pre>
<h4>
  <a name="993282"> </a>Parameters 
</h4>

<p><a name="993287"> </a>None.</p>
<h4>
  <a name="993289"> </a>Returns 
</h4>

<p><a name="993292"> </a>Nothing.</p>
<h4>
  <a name="993294"> </a>Comments 
</h4>

<p><a name="993608"> </a>The Pen Input Manager calls this function in response to the <a href="In_PenInputMgr.html#993780"><code>PINShowReferenceDialog()</code></a> function. </p>

<p><a name="994711"> </a>The pinlet should display a dialog that teaches the user how to use the pinlet. Handwriting recognition pinlets can call through to <a href="In_HandWriting.html#1003646"><code>HWRShowReferenceDialog()</code></a>. </p>

<p><a name="994712"> </a>Some pinlets may not require a help dialog. For example, keyboard pinlets rarely need explanatory text. If the pinlet has no help to display, this function should display an alert that says no help is available for this pinlet. </p>
<h4>
  <a name="993299"> </a>See Also 
</h4>

<p><a name="992936"> </a><a href="In_PinletConcept.html#990925">"Help Dialog"</a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 2003, 2004, PalmSource, Inc. and its affiliates. All rights reserved. <br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="In_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="In_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_PenInputMgr.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_ShiftIndicator.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="In_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>