<html>
<head>
<title>(Protein) SMS Exchange Library Reference | Telephony and SMS</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:29:43">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="608590"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="TelSMS_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelSMS_SMSPartTab.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelSMS_IX.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelSMS_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">5 &nbsp;&nbsp;
SMS Exchange Library Reference</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Telephony and SMS</p>
<p class="SubTitle">Exploring Palm OS&#174;  </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="TelSMS_SMSPartTab.html">Part II: SMS Exchange Library</a> </h1>
<h1 class="SideTOC1"><a href="TelSMS_SMSRef.html">5  SMS Exchange Library Reference</a></h1>

   <h2 class="SideTOC2"><a href="#1002941">
   SMS Exchange Library Data Structures</a></h2>

      <h3 class="SideTOC3"><a href="#1004104">
      SmsParamsType</a></h3>

      <h3 class="SideTOC3"><a href="#1003051">
      SmsPrefType </a></h3>

   <h2 class="SideTOC2"><a href="#1003565">
   SMS Exchange Library Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1003567">
      SMS Control Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1007339">
      SMS Extension Types</a></h3>

      <h3 class="SideTOC3"><a href="#1007850">
      SMS Extension Type Length</a></h3>

      <h3 class="SideTOC3"><a href="#1007675">
      SMS Message Types</a></h3>

      <h3 class="SideTOC3"><a href="#1007879">
      SMS Scheme</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="1004075"> </a>This chapter describes the SMS Exchange Library API declared in the header file <code>SmsLib.h</code>. It discusses the following topics: </p>
<ul type="disc">
  <li><a name="1002925"> </a><a href="TelSMS_SMSRef.html#1002941">SMS Exchange Library Data Structures</a>
  <li><a name="1002929"> </a><a href="TelSMS_SMSRef.html#1003565">SMS Exchange Library Constants</a>
</ul>

<p><a name="1002930"> </a>You interact with the SMS Exchange Library using the Exchange Manager APIs described in <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1322464">Chapter 5, "Exchange Manager Reference,"</a> of the book <i>Exploring Palm OS: High-Level Communications</i>. For further information on using Exchange Manager, see <a href="../High-Level_Communications/HLC_ExgMgrConcept.html#994958">Chapter 4, "Object Exchange,"</a> of the book <i>Exploring Palm OS: High-Level Communications</i>.</p>

<p><a name="1009618"> </a>Note that the SMS Exchange Library does not implement the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1269590"><code>ExgGet()</code></a> function.</p>

<h2 class="haH2">
  <a name="1002941"> </a>SMS Exchange Library Data Structures <a href="#608590"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1004104"> </a>SmsParamsType Struct <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1004106"> </a>Purpose 
</h4>

<p><a name="1004332"> </a>Identifies information specific to the SMS Exchange Library.</p>
<h4>
  <a name="1004108"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1004109"> </a></code><h4>
  <a name="1004110"> </a>Prototype 
</h4>
<pre class="proto"><a name="1004111"></a>typedef struct SmsParamsType {
   uint32_t creator;
   char *extension;
   char *mimeTypes;
   uint32_t appCreator;
   TelSmsMessageType message;
   uint16_t requestType;
   uint16_t storageId;
   Boolean leaveOnPhone;
   Boolean forceSlotMode;
   Boolean ignoreDefaultValue;
   uint8_t padding[1];
} SmsParamsType, *SmsParamsPtr
</pre>
<h4>
  <a name="1004112"> </a>Fields 
</h4>

<dl>
<dt><a name="1004113"> </a><code>creator</code></dt>
<dd><a name="1004114"> </a>Creator ID of the SMS Exchange Library. Always set this to <code>sysFileCSmsLib</code>.</dd>

<dt><a name="1004376"> </a><code>extension</code></dt>
<dd><a name="1004377"> </a>If the SMS message has an attachment, this field specifies the attachment name. Do not set this field directly; the SMS Exchange Library sets it if necessary. See the <code>appCreator</code> field description for details.</dd>

<dt><a name="1004378"> </a><code>mimeTypes</code></dt>
<dd><a name="1004118"> </a>If the SMS message has an attachment, this field specifies the MIME type of the attachment. Do not set this field directly; the SMS Exchange Library sets it if necessary. See the <code>appCreator</code> field description for details.</dd>

<dt><a name="1004119"> </a><code>appCreator</code></dt>
<dd><a name="1004887"> </a>The creator ID of the target application for the attachment to the SMS message. Do not set this field directly; the SMS Exchange Library sets it if necessary. </dd>

<dd><a name="1004889"> </a>When the SMS Exchange Library receives a message with an attachment, it unwraps the message and attempts to deliver the attachment directly to an application that is registered to receive it. If no application is registered to receive unwrapped attachments of that type, the SMS Exchange Library sends the entire SMS message, and it sets the <code>extension</code>, <code>mimeTypes</code>, and <code>appCreator</code> fields in this structure. The SMS application can use this information to have the Exchange Manager deliver the attachment to the appropriate application using the Local Exchange Library. </dd>

<dt><a name="1004121"> </a><code>message</code></dt>
<dd><a name="1004122"> </a>A <a href="TelSMS_TelMgrRef.html#2717874"><code>TelSmsMessageType</code></a> structure holding the message that was sent. Do not set this field directly; the SMS Exchange Library should set it.</dd>

<dt><a name="1004123"> </a><code>requestType</code></dt>
<dd><a name="1007402"> </a>One of the constants described in <a href="TelSMS_SMSRef.html#1007675">"SMS Message Types."</a> These constants can be ORed together.</dd>

<dt><a name="1004125"> </a><code>storageId</code></dt>
<dd><a name="1004126"> </a>Used internally to retrieve a specific message.</dd>

<dt><a name="1004129"> </a><code>leaveOnPhone</code></dt>
<dd><a name="1004130"> </a>Set this to <code>true</code> on input to leave received messages on the phone; set to <code>false</code> (default) to delete messages from the phone once they are received. Received messages are stored in the SMS Messenger inbox.</dd>

<dt><a name="1004131"> </a><code>forceSlotMode</code></dt>
<dd><a name="1004132"> </a>Set this to <code>true</code> on input to force the parsing method to slot mode; set to <code>false</code> to use block mode (default). In slot mode, SMS messages are read one at a time and in block mode, they are read all in one block.</dd>

<dt><a name="1004133"> </a><code>ignoreDefaultValue</code></dt>
<dd><a name="1004134"> </a>Set this to <code>true</code> on input to ignore the default values for validity period and SMS delivery request that are saved in the preferences; instead use the parameters in the structure. Set to <code>false</code> to use the values in the preferences.</dd>

<dt><a name="1004135"> </a><code>padding</code></dt>
<dd><a name="1004136"> </a>Padding byte.</dd>

</dl>
<h4>
  <a name="1010343"> </a>Comments 
</h4>

<p><a name="1010400"> </a>The <code>socketRef</code> field of the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1268710"><code>ExgSocketType</code></a> structure is set to this structure when you send or receive data using the SMS Exchange Library. You need to create this structure and assign it to the <code>socketRef</code> field only if you have an SMS message to send and want to use non-default values for some of the fields; otherwise, the SMS Exchange Library creates this structure for you and provides default values.</p>

<p><a name="1010501"> </a>When receiving an SMS message, the application is sub-launched by the Exchange Manager using the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1327402"><code>sysAppLaunchCmdExgReceiveData</code></a> launch code. A flattened <code>SMSParamsType</code> structure is defined in the <code>ExgSocketType.socketRef</code> field and its size is in the <code>ExgSocketType.socketRefSize</code> field. You must unflatten the <code>SMSParamsType</code> structure before using it. This can be done with the code shown in the Example section.</p>
<h4>
  <a name="1010640"> </a>Example 
</h4>

<p><a name="1010669"> </a>This example shows how to unflatten the <code>SMSParamsType</code> structure when receiving an SMS message.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
// Accept will open a progress dialog and wait for your receive commands<a name="1010679"> </a>
err = ExgAccept(exgSocketP);<a name="1010680"> </a>
if (err &gt;= errNone)<a name="1010683"> </a>
{<a name="1010684"> </a>
  // Get all application specific info, unflatten it first<a name="1010685"> </a>
  if ((err = PrvSmsExgUnflattenSmsParamsType((uint8_t*)exgSocketP-&gt;socketRef,<a name="1010686"> </a>
     (size_t) exgSocketP-&gt;socketRefSize, &amp;smsParam)) != errNone)<a name="1011456"> </a>
    goto Exit;<a name="1010687"> </a>
<a name="1010688"> </a>
  err = exgErrBadParam;<a name="1010690"> </a>
<a name="1010692"> </a>
  messageType = kSmsMessageTypeIn;<a name="1010693"> </a>
<a name="1010695"> </a>
  switch(smsParam.message.messageType)<a name="1010696"> </a>
  {<a name="1011647"> </a>
    case kTelSmsMessageTypeDelivered:<a name="1011648"> </a>
      if (smsParam.message.message.deliver.networkParams.gsm.messageClass == <a name="1011649"> </a>
             kTelSmsClass0)<a name="1011698"> </a>
        messageType = kSmsMessageTypeFlash;<a name="1010700"> </a>
      break;<a name="1010701"> </a>
<a name="1010703"> </a>
    case kTelSmsMessageTypeReport:<a name="1010704"> </a>
      messageType = kSmsMessageTypeReport;<a name="1010705"> </a>
      break;<a name="1010706"> </a>
  }<a name="1010707"> </a>
  // your code continues here . . . <a name="1010708"> </a>
}<a name="1011882"> </a>
<a name="1010710"> </a>
// The unflatten code should be:<a name="1010711"> </a>
/******************************************************************************<a name="1010712"> </a>
 *<a name="1010713"> </a>
 * Function:    PrvSmsExgUnflattenSmsParamsType<a name="1010714"> </a>
 *<a name="1010715"> </a>
 * Description: Unflatten an input buffer into an SmsParamsType structure<a name="1010716"> </a>
 *<a name="1010717"> </a>
 * Parameters: <a name="1010718"> </a>
 * bufferP - input: pointer to a flat buffer.<a name="1011980"> </a>
 * bufferSize - input: the size of the flat buffer.<a name="1010719"> </a>
 * smsParamsP - output: pointer to a filled SmsParamsType structure.<a name="1010720"> </a>
 *<a name="1010721"> </a>
 * Returned:    error if any.<a name="1010722"> </a>
******************************************************************************/<a name="1010726"> </a>
static status_t PrvSmsExgUnflattenSmsParamsType(uint8_t* bufferP, size_t<a name="1010727"> </a>
bufferSize, SmsParamsType* smsParamsP )<a name="1014611"> </a>
{<a name="1010728"> </a>
  uint8_t* offsetP = bufferP;<a name="1010729"> </a>
  int32_t lenRemaining = bufferSize;<a name="1010730"> </a>
<a name="1010732"> </a>
// Initialize the structure<a name="1010737"> </a>
  memset(smsParamsP, 0, sizeof(SmsParamsType));<a name="1010738"> </a>
<a name="1010740"> </a>
  // Check the tag<a name="1010741"> </a>
  if (lenRemaining &lt; (int32_t)sizeof(uint32_t))<a name="1010742"> </a>
  {<a name="1010743"> </a>
    uint32_t value;<a name="1010744"> </a>
    memmove(&amp;value, offsetP, sizeof(uint32_t));<a name="1010745"> </a>
    if (value != sysFileCSmsLib)<a name="1010746"> </a>
      return exgErrBadParam;<a name="1010747"> </a>
  }<a name="1010748"> </a>
  offsetP += sizeof(uint32_t);<a name="1012217"> </a>
  lenRemaining -= sizeof(uint32_t);<a name="1012218"> </a>
<a name="1012219"> </a>
  // Get the structure<a name="1010753"> </a>
  if (lenRemaining &gt;= (int32_t)sizeof(SmsParamsType))<a name="1010754"> </a>
  {<a name="1010755"> </a>
    memmove(smsParamsP, offsetP, sizeof(SmsParamsType));<a name="1010756"> </a>
  }<a name="1010757"> </a>
  offsetP += sizeof(SmsParamsType);<a name="1010758"> </a>
  lenRemaining -= sizeof(SmsParamsType);<a name="1010759"> </a>
<a name="1012352"> </a>
  // Get the address 1<a name="1012353"> </a>
  if (smsParamsP-&gt;message.address1.size &amp;&amp; (lenRemaining &gt;= <a name="1012354"> </a>
       (int32_t)smsParamsP-&gt;message.address1.size))<a name="1012371"> </a>
  {<a name="1010764"> </a>
    // Allocate address 1 memory<a name="1010765"> </a>
    if ((smsParamsP-&gt;message.address1.numberP = <a name="1010766"> </a>
        (char*)MemPtrNew(smsParamsP-&gt;message.address1.size)) == NULL)<a name="1012409"> </a>
      goto cleanup;<a name="1010767"> </a>
<a name="1010768"> </a>
    memmove(smsParamsP-&gt;message.address1.numberP, offsetP, <a name="1010770"> </a>
      smsParamsP-&gt;message.address1.size);<a name="1012471"> </a>
  }<a name="1010771"> </a>
  offsetP += smsParamsP-&gt;message.address1.size;<a name="1010772"> </a>
  lenRemaining -= smsParamsP-&gt;message.address1.size;<a name="1010773"> </a>
<a name="1010775"> </a>
  // Get the address 2<a name="1010776"> </a>
  if (smsParamsP-&gt;message.address2.size &amp;&amp; (lenRemaining &gt;=<a name="1010777"> </a>
        (int32_t)smsParamsP-&gt;message.address2.size))<a name="1012511"> </a>
  {<a name="1010778"> </a>
    // Allocate address 2 memory<a name="1010779"> </a>
    if ((smsParamsP-&gt;message.address2.numberP = <a name="1010780"> </a>
        (char*)MemPtrNew(smsParamsP-&gt;message.address2.size)) == NULL)<a name="1012550"> </a>
    goto cleanup;<a name="1010781"> </a>
<a name="1010782"> </a>
    memmove(smsParamsP-&gt;message.address2.numberP, offsetP, <a name="1010784"> </a>
      smsParamsP-&gt;message.address2.size);<a name="1012592"> </a>
  }<a name="1010785"> </a>
  offsetP += smsParamsP-&gt;message.address2.size;<a name="1010786"> </a>
  lenRemaining -= smsParamsP-&gt;message.address2.size;<a name="1010787"> </a>
<a name="1010789"> </a>
  // Get the extensions<a name="1010790"> </a>
  if (smsParamsP-&gt;message.extensionCount &amp;&amp; (lenRemaining &gt;= (int32_t)<a name="1010791"> </a>
      (sizeof(TelSmsExtensionType) * smsParamsP-&gt;message.extensionCount)))<a name="1012635"> </a>
  {<a name="1010792"> </a>
    // Allocate extensions memory<a name="1010793"> </a>
    if ((smsParamsP-&gt;message.extensionP = (TelSmsExtensionType*)MemPtrNew((size_t)<a name="1010794"> </a>
       (sizeof(TelSmsExtensionType) * smsParamsP-&gt;message.extensionCount))) == NULL)<a name="1012682"> </a>
      goto cleanup;<a name="1010795"> </a>
<a name="1010797"> </a>
    memmove(smsParamsP-&gt;message.extensionP, offsetP,<a name="1010798"> </a>
      sizeof(TelSmsExtensionType) * smsParamsP-&gt;message.extensionCount);<a name="1012863"> </a>
  }<a name="1010799"> </a>
  offsetP +=  sizeof(TelSmsExtensionType) * smsParamsP-&gt;message.extensionCount;<a name="1010800"> </a>
  lenRemaining -= (int32_t)sizeof(TelSmsExtensionType) * <a name="1010801"> </a>
      smsParamsP-&gt;message.extensionCount;<a name="1012901"> </a>
<a name="1010803"> </a>
  // Get the extension string<a name="1010804"> </a>
  if ( smsParamsP-&gt;extension &amp;&amp; lenRemaining)<a name="1010805"> </a>
  {<a name="1010806"> </a>
    // Allocate extension string memory<a name="1010807"> </a>
    if ((smsParamsP-&gt;extension = (char*)MemPtrNew((size_t)<a name="1010808"> </a>
        (strlen((char*)offsetP) + 1))) == NULL)<a name="1012963"> </a>
      goto cleanup;<a name="1010809"> </a>
<a name="1010811"> </a>
    memmove(smsParamsP-&gt;extension, offsetP, strlen((char*)offsetP) + 1);<a name="1010812"> </a>
    lenRemaining -= (int32_t)strlen((char*)offsetP) + 1;<a name="1010813"> </a>
    offsetP +=  strlen((char*)offsetP) + 1;<a name="1010814"> </a>
  }<a name="1010815"> </a>
<a name="1010817"> </a>
  // Get the mimeTypes string<a name="1010818"> </a>
  if ( smsParamsP-&gt;mimeTypes &amp;&amp; lenRemaining)<a name="1010819"> </a>
  {<a name="1010820"> </a>
    // Allocate extension string memory<a name="1010821"> </a>
    if ((smsParamsP-&gt;mimeTypes = (char*)MemPtrNew((size_t)<a name="1010822"> </a>
        (strlen((char*)offsetP) + 1))) == NULL)<a name="1013126"> </a>
      goto cleanup;<a name="1010823"> </a>
<a name="1010825"> </a>
    memmove(smsParamsP-&gt;mimeTypes, offsetP, strlen((char*)offsetP) + 1);<a name="1010826"> </a>
    lenRemaining -= (int32_t)strlen((char*)offsetP) + 1;<a name="1010827"> </a>
    offsetP +=  strlen((char*)offsetP) + 1;<a name="1010828"> </a>
  }<a name="1010829"> </a>
<a name="1010831"> </a>
  if (lenRemaining &gt;= 0)<a name="1010832"> </a>
    return errNone;<a name="1010833"> </a>
  return exgErrBadParam;<a name="1010836"> </a>
<a name="1010839"> </a>
cleanup:<a name="1013407"> </a>
  // Free only what was really allocated<a name="1010842"> </a>
  if (smsParamsP-&gt;message.address1.size &amp;&amp; smsParamsP-&gt;message.address1.numberP)<a name="1010843"> </a>
  {<a name="1010844"> </a>
    MemPtrFree(smsParamsP-&gt;message.address1.numberP);<a name="1010845"> </a>
    if (smsParamsP-&gt;message.address2.size &amp;&amp; smsParamsP-&gt;message.address2.numberP)<a name="1010846"> </a>
    {<a name="1010847"> </a>
      MemPtrFree(smsParamsP-&gt;message.address2.numberP);<a name="1010848"> </a>
      if (smsParamsP-&gt;message.extensionCount &amp;&amp; smsParamsP-&gt;message.extensionP)<a name="1010849"> </a>
      {<a name="1010850"> </a>
        MemPtrFree(smsParamsP-&gt;message.extensionP);<a name="1010851"> </a>
        if (smsParamsP-&gt;extension)<a name="1010852"> </a>
        {<a name="1010853"> </a>
          MemPtrFree(smsParamsP-&gt;extension);<a name="1010854"> </a>
          if (smsParamsP-&gt;mimeTypes)<a name="1010855"> </a>
          {<a name="1010856"> </a>
            MemPtrFree(smsParamsP-&gt;mimeTypes);<a name="1010857"> </a>
          }<a name="1010858"> </a>
        }<a name="1010859"> </a>
      }<a name="1010860"> </a>
    }<a name="1010861"> </a>
  }<a name="1010862"> </a>
<a name="1010864"> </a>
  return exgMemError;<a name="1010865"> </a>
}<a name="1010868"> </a>
</pre><div class="CodeRule"><hr></div>


<h3 class="hbH3">
  <a name="1003051"> </a>SmsPrefType  Struct <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1003053"> </a>Purpose 
</h4>

<p><a name="1003055"> </a>Defines the SMS Exchange Library preferences for sending and receiving SMS messages. Applications can use the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1269178"><code>ExgControl()</code></a> function to get, set, or display these preferences to the user. </p>
<h4>
  <a name="1005945"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1005946"> </a></code><h4>
  <a name="1005947"> </a>Prototype 
</h4>
<pre class="proto"><a name="1005948"></a>typedef struct SmsPrefType {
   uint32_t validity;
   uint16_t warnOver;
   Boolean leaveOnPhone;
   Boolean report;
   Boolean autoSmsCenter;
   uint8_t padding[3];
   char smsCenterNumberP[kTelPhoneNumberMaxLen];
} SmsPrefType, *SmsPrefPtr
</pre>
<h4>
  <a name="1006124"> </a>Fields 
</h4>

<dl>
<dt><a name="1006125"> </a><code>validity</code></dt>
<dd><a name="1006126"> </a>Number of seconds before the message expires. If the message cannot be delivered to the recipient, the service center repeatedly attempts to deliver the message until it expires. The default is one day (86400 seconds). </dd>

<dt><a name="1006127"> </a><code>warnOver</code></dt>
<dd><a name="1006128"> </a>Number of parts a user can send without confirmation. If the user attempts to send a message with more than this number of parts, an alert is displayed, and the user can choose to send the message anyway. The default is 3 parts. (If the user attempts to send a message with more than 3 parts, an alert is displayed.)</dd>

<dt><a name="1006131"> </a><code>leaveOnPhone</code></dt>
<dd><a name="1006132"> </a>If <code>true</code>, any incoming messages retrieved from a phone remain on the phone as well. If <code>false</code>, the messages are deleted from the phone's inbox.</dd>

<dt><a name="1006133"> </a><code>report</code></dt>
<dd><a name="1006134"> </a>If <code>true</code>, the user receives confirmation that an SMS message was delivered.</dd>

<dt><a name="1006137"> </a><code>autoSmsCenter</code></dt>
<dd><a name="1006138"> </a>If <code>true</code>, don't use the value stored in the <code>smscNumberP</code> field.</dd>

<dt><a name="1008116"> </a><code>padding</code></dt>
<dd><a name="1008117"> </a>Padding bytes.</dd>

<dt><a name="1006139"> </a><code>smsCenterNumberP</code></dt>
<dd><a name="1006140"> </a>A pointer to the message center to be used. If <code>NULL</code> or the empty string, the SMS message center set by the phone is used.</dd>

</dl>

<h2 class="haH2">
  <a name="1003565"> </a>SMS Exchange Library Constants <a href="#608590"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1003567"> </a>SMS Control Constants <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1006623"> </a>Purpose 
</h4>

<p><a name="1007109"> </a>These constants are passed as the <code class="par">operation</code> parameter to the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1269178"><code>ExgControl()</code></a> function. The <code>ExgControl()</code> function is a way to communicate directly with the SMS Exchange Library. </p>
<h4>
  <a name="1007114"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1007115"> </a></code><h4>
  <a name="1006627"> </a>Constants 
</h4>

<dl>
<dt><a name="1006708"> </a><code>#define exgLibSmsPrefGetOp (exgLibCtlSpecificOp | 1)</code></dt>
<dt><a name="1006767"> </a><code>#define exgLibSmsPrefGetDefaultOp (exgLibCtlSpecificOp | 2)</code></dt>
<dt><a name="1006770"> </a><code>#define exgLibSmsPrefSetOp (exgLibCtlSpecificOp | 3)</code></dt>
<dt><a name="1006819"> </a><code>#define exgLibSmsPrefDisplayOp (exgLibCtlSpecificOp | 4)</code></dt>
<dt><a name="1006863"> </a><code>#define exgLibSmsIncompleteGetCountOp (exgLibCtlSpecificOp | 5)</code></dt>
<dt><a name="1006629"> </a><code>#define exgLibSmsIncompleteDeleteOp (exgLibCtlSpecificOp | 6)</code></dt>
</dl>
<h4>
  <a name="1007123"> </a>Comments 
</h4>

<p><a name="1007140"> </a>The following table lists the operation constant, the type of data that should be passed as the <code class="par">valueP</code> parameter to <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1269178"><code>ExgControl()</code></a>, and what the SMS Exchange Library does in response.</p>

<p class="caption"><a name="1003581"> </a><b>Table 5.1&nbsp;&nbsp;ExgControl operations for SMS library </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1003587"> </a><b>Operation</b></p>
    </th>
    <th><p class="tt"><a name="1003589"> </a><b>value Data Type</b></p>
    </th>
    <th><p class="tt"><a name="1003591"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1003594"> </a><code>exgLibSmsPrefGetOp</code> </p>
    </td>
    <td><p class="tt"><a name="1003599"> </a><a href="TelSMS_SMSRef.html#1003051"><code>SmsPrefType</code></a></p>
    </td>
    <td><p class="tt"><a name="1003601"> </a>Returns a pointer to the SMS Exchange Libraries preferences in <code class="par">valueP</code>, and creates the preferences and sets them to the default values if they do not exist. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1003604"> </a><code>exgLibSmsPrefGetDefaultOp</code> </p>
    </td>
    <td><p class="tt"><a name="1003609"> </a><a href="TelSMS_SMSRef.html#1003051"><code>SmsPrefType</code></a></p>
    </td>
    <td><p class="tt"><a name="1003611"> </a>Returns the default values for the SMS Exchange Library preferences. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1003614"> </a><code>exgLibSmsPrefSetOp</code> </p>
    </td>
    <td><p class="tt"><a name="1003619"> </a><a href="TelSMS_SMSRef.html#1003051"><code>SmsPrefType</code></a></p>
    </td>
    <td><p class="tt"><a name="1003621"> </a>Sets the SMS Exchange Library preferences to the values passed in <code class="par">valueP</code>. </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1003624"> </a><code>exgLibSmsPrefDisplayOp</code> </p>
    </td>
    <td><p class="tt"><a name="1003626"> </a>One of the <a href="TelSMS_TelMgrRef.html#3210977">"Network Operator Types."</a> Note that only <code>kTelNwkTypeGsmGprs</code> is supported in Palm OS<sup>&#174;</sup> Cobalt.</p>
    </td>
    <td><p class="tt"><a name="1003628"> </a>Displays a form that allows the user to set the SMS preferences.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1003631"> </a><code>exgLibSmsIncompleteGetCountOp</code> </p>
    </td>
    <td><p class="tt"><a name="1003633"> </a><code>uint16_t</code>. Output only. </p>
    </td>
    <td><p class="tt"><a name="1003635"> </a>Gets the number of incomplete messages currently stored in the SMS Exchange Library. The library stores message parts as it receives them. When it has received all of the parts, it reassembles the message and delivers it. This operation tells how many messages are currently under assembly.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1003638"> </a><code>exgLibSmsIncompleteDeleteOp</code> </p>
    </td>
    <td><p class="tt"><a name="1003640"> </a><code>uint16_t</code>. Input only. </p>
    </td>
    <td><p class="tt"><a name="1003642"> </a>Deletes the incomplete message with the ID passed in <code class="par">valueP</code>. Pass -1 to delete all incomplete messages. </p>
    </td>
  </tr>
</table>

</div>


<h3 class="hbH3">
  <a name="1007339"> </a>SMS Extension Types <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1007649"> </a>Purpose 
</h4>

<p><a name="1007656"> </a>Defines Exchange Manager extensions that an application can register for to receive SMS messages of those types.</p>
<h4>
  <a name="1007662"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1007663"> </a></code><h4>
  <a name="1007664"> </a>Constants 
</h4>

<dl>
<dt><a name="1007689"> </a><code>#define kSmsRegExtensionTypeEMailInd "ewi"</code></dt>
<dd><a name="1007690"> </a>Email waiting indication.</dd>

<dt><a name="1007692"> </a><code>#define kSmsRegExtensionTypeFaxInd "fwi"</code></dt>
<dd><a name="1007693"> </a>Fax waiting indication.</dd>

<dt><a name="1007695"> </a><code>#define kSmsRegExtensionTypeFlash "fhs"</code></dt>
<dd><a name="1007696"> </a>Flash SMS message</dd>

<dt><a name="1007701"> </a><code>#define kSmsRegExtensionTypeMessage "sms"</code></dt>
<dd><a name="1007702"> </a>SMS message.</dd>

<dt><a name="1007704"> </a><code>#define kSmsRegExtensionTypeOtherInd "owi"</code></dt>
<dd><a name="1007705"> </a>Other message waiting indication.</dd>

<dt><a name="1007707"> </a><code>#define kSmsRegExtensionTypeReport "rps"</code></dt>
<dd><a name="1007708"> </a>Report message.</dd>

<dt><a name="1007710"> </a><code>#define kSmsRegExtensionTypeVoiceMailInd "vwi"</code></dt>
<dd><a name="1007711"> </a>Voice mail waiting indication.</dd>

</dl>

<h3 class="hbH3">
  <a name="1007850"> </a>SMS Extension Type Length <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1007851"> </a>Purpose 
</h4>

<p><a name="1007852"> </a>Defines the length of an extension type constant value.</p>
<h4>
  <a name="1007853"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1007854"> </a></code><h4>
  <a name="1007855"> </a>Constants 
</h4>

<dl>
<dt><a name="1007872"> </a><code>#define kSmsRegExtensionTypeLength 3</code></dt>
<dd><a name="1007873"> </a>The length of an extension type constant value.</dd>

</dl>

<h3 class="hbH3">
  <a name="1007675"> </a>SMS Message Types <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1007340"> </a>Purpose 
</h4>

<p><a name="1007379"> </a>The SMS message type constants identify the type of message being sent. They are used in the <code>requestType</code> field of the <a href="TelSMS_SMSRef.html#1004104"><code>SmsParamsType</code></a> structure and can be combined with an OR operation.</p>
<h4>
  <a name="1007345"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1007346"> </a></code><h4>
  <a name="1007347"> </a>Constants 
</h4>

<dl>
<dt><a name="1007531"> </a><code>#define kSmsMessageTypeIn ((uint16_t) 0x0001)</code></dt>
<dd><a name="1007614"> </a>Classic message.</dd>

<dt><a name="1007539"> </a><code>#define kSmsMessageTypeReport ((uint16_t) 0x0002)</code></dt>
<dd><a name="1007540"> </a>Report message.</dd>

<dt><a name="1007547"> </a><code>#define kSmsMessageTypePart ((uint16_t) 0x0004)</code></dt>
<dd><a name="1007548"> </a>Internal use only; do not use. For multipart SMS reassembly. </dd>

<dt><a name="1007555"> </a><code>#define kSmsMessageTypeMultipart ((uint16_t) 0x0008)</code></dt>
<dd><a name="1007556"> </a>An incomplete multipart message.</dd>

<dt><a name="1007497"> </a><code>#define kSmsMessageTypeFlash ((uint16_t) 0x0010)</code></dt>
<dd><a name="1007498"> </a>Flash message.</dd>

<dt><a name="1007563"> </a><code>#define kSmsMessageTypeIndication ((uint16_t) 0x0020)</code></dt>
<dd><a name="1007590"> </a>Indication that signals a message is waiting.</dd>

<dt><a name="1007503"> </a><code>#define kSmsMessageTypeIncoming ((uint16_t) 0xFFFF)</code></dt>
<dd><a name="1007504"> </a>Internal use only; do not use. For getting an incoming message.</dd>

</dl>

<h3 class="hbH3">
  <a name="1007879"> </a>SMS Scheme <a href="#608590"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1007880"> </a>Purpose 
</h4>

<p><a name="1007881"> </a>Defines the Exchange Manager URL scheme for the SMS Exchange Library.</p>
<h4>
  <a name="1007882"> </a>Declared In 
</h4>
<code>SmsLib.h<a name="1007883"> </a></code><h4>
  <a name="1007884"> </a>Constants 
</h4>

<dl>
<dt><a name="1007902"> </a><code>#define kSmsScheme "_sms"</code></dt>
<dd><a name="1007903"> </a>The URL scheme for the SMS Exchange Library.</dd>

</dl>

<p><a name="1003757"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="TelSMS_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="TelSMS_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelSMS_SMSPartTab.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelSMS_IX.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="TelSMS_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>