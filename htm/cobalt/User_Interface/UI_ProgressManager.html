<html>
<head>
<title>(Protein) Progress Manager Reference | User Interface </title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 12:20:09">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="993254"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="UI_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_PrivateRecords.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_Rectangle.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">26 &nbsp;&nbsp;
Progress Manager Reference</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">User Interface </p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="UI_PartRef.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="UI_ProgressManager.html">26  Progress Manager Reference</a></h1>

   <h2 class="SideTOC2"><a href="#993262">
   Progress Manager Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#993270">
      PrgCallbackData</a></h3>

      <h3 class="SideTOC3"><a href="#993671">
      ProgressType</a></h3>

   <h2 class="SideTOC2"><a href="#993701">
   Progress Manager Constants</a></h2>

      <h3 class="SideTOC3"><a href="#993741">
      Progress Manager String Length Constants</a></h3>

   <h2 class="SideTOC2"><a href="#994987">
   Progress Manager Events</a></h2>

      <h3 class="SideTOC3"><a href="#994988">
      prgUpdateEvent</a></h3>

   <h2 class="SideTOC2"><a href="#993773">
   Progress Manager Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#993822">
      PrgGetError</a></h3>

      <h3 class="SideTOC3"><a href="#994062">
      PrgHandleEvent</a></h3>

      <h3 class="SideTOC3"><a href="#994108">
      PrgStartDialog</a></h3>

      <h3 class="SideTOC3"><a href="#994162">
      PrgStartDialogWithFlags</a></h3>

      <h3 class="SideTOC3"><a href="#994220">
      PrgStopDialog</a></h3>

      <h3 class="SideTOC3"><a href="#994266">
      PrgUpdateDialog</a></h3>

      <h3 class="SideTOC3"><a href="#994518">
      PrgUserCancel</a></h3>

      <h3 class="SideTOC3"><a href="#994599">
      PrgUserSkip</a></h3>

   <h2 class="SideTOC2"><a href="#994649">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#994689">
      PrgCallbackFunc</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="994768"> </a>This chapter provides reference material for the Progress Manager. </p>
   <blockquote class = "bq"><a name="993268"> </a><a href="UI_ProgressManager.html#993262">Progress Manager Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="993707"> </a><a href="UI_ProgressManager.html#993701">Progress Manager Constants</a></blockquote>
   <blockquote class = "bq"><a name="995072"> </a><a href="UI_ProgressManager.html#994987">Progress Manager Events</a></blockquote>
   <blockquote class = "bq"><a name="993788"> </a><a href="UI_ProgressManager.html#993773">Progress Manager Functions and Macros</a></blockquote>
   <blockquote class = "bq"><a name="994655"> </a><a href="UI_ProgressManager.html#994649">Application-Defined Functions</a></blockquote>

<p><a name="994945"> </a>The header file <code>Progress.h</code> declares the API that this chapter describes. For more information on the Progress Manager, see the section <a href="UI_FormConcept.html#998412">"Progress Dialogs."</a> </p>

<h2 class="haH2">
  <a name="993262"> </a>Progress Manager Structures and Types <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993270"> </a>PrgCallbackData Struct <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993275"> </a>Purpose 
</h4>

<p><a name="993278"> </a>Structure used to share information between the Progress Manager and the <a href="UI_ProgressManager.html#994689"><code>PrgCallbackFunc()</code></a> callback function. </p>
<h4>
  <a name="993280"> </a>Declared In 
</h4>
<code>Progress.h<a name="993283"> </a></code><h4>
  <a name="993285"> </a>Prototype 
</h4>
<pre class="proto"><a name="998183"></a>typedef struct {
   uint16_t stage;
   uint16_t bitmapId;
   DmOpenRef bitmapDatabase;
   uint32_t textLen;
   char *textP;
   char *message;
   status_t error;
   uint16_t canceled:1;
   uint16_t showDetails:1;
   uint16_t textChanged:1;
   uint16_t timedOut:1;
   uint16_t displaySkipBtn:1;
   uint16_t skipped:1;
   uint16_t spareBits1:10;
   uint16_t padding1;
   uint32_t timeout;
   uint32_t padding2;
   uint32_t barMaxValue;
   uint32_t barCurValue;
   char *barMessage;
   uint16_t barFlags;
   uint16_t delay:1;
   uint16_t spareBits2:15;
   void *userDataP;
} PrgCallbackData, *PrgCallbackDataPtr
</pre>
<h4>
  <a name="998185"> </a>Fields 
</h4>

<dl>
<dt><a name="993374"> </a><code>&rarr; stage</code></dt>
<dd><a name="1000714"> </a>Current stage passed from <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a>.</dd>

<dt><a name="993506"> </a><code>&harr; bitmapId</code></dt>
<dd><a name="1001095"> </a>Resource ID of the bitmap to display in the progress dialog, if any.</dd>

<dt><a name="993574"> </a><code>&harr; bitmapDatabase</code></dt>
<dd><a name="993576"> </a>Open database containing <code>bitmapId</code>. </dd>

<dt><a name="993578"> </a><code>&rarr; textLen</code></dt>
<dd><a name="1000921"> </a>Size in bytes of the text buffer <code>textP</code>. Note that this value is defined by the system, not by your callback function. Be careful not to exceed this length in <code>textP</code>.</dd>

<dt><a name="993586"> </a><code>&harr; textP</code></dt>
<dd><a name="1000903"> </a>Buffer to hold the text to display in the updated dialog. You might want to look up a message in a resource file, based on the value in the <code>stage</code> field. Also, you should append the additional text in the <code>message</code> field, to form the full string to display. Be sure to include a null terminator at the end of the string you return, and don't exceed the length in <code>textLen</code>.</dd>

<dt><a name="993590"> </a><code>&rarr; message</code></dt>
<dd><a name="1000956"> </a>Additional text to display in the dialog (from the <code class="par">messageP</code> parameter to <code>PrgUpdateDialog()</code>). This string is no longer than <code>progressMaxMessage</code>.</dd>

<dt><a name="993594"> </a><code>&harr; error</code></dt>
<dd><a name="1001039"> </a>Current error (passed from the <code class="par">err</code> parameter to <code>PrgUpdateDialog()</code>).</dd>

<dt><a name="993598"> </a><code>&harr; canceled</code></dt>
<dd><a name="1001142"> </a><code>true</code> if user has pressed the Cancel button.</dd>

<dt><a name="993602"> </a><code>&rarr; showDetails</code></dt>
<dd><a name="1001589"> </a><code>true</code> if user pressed the down arrow button on the device for more details. (Because this is a non-standard user interface technique, you shouldn't use this feature to display details that users need under normal conditions. It's more for debugging purposes.)</dd>

<dt><a name="993606"> </a><code>&larr; textChanged</code></dt>
<dd><a name="1001778"> </a>If <code>true</code>, then the system should update text (defaults to <code>true</code>). You can set this to <code>false</code> to avoid an update to the text.</dd>

<dt><a name="993610"> </a><code>&rarr; timedOut</code></dt>
<dd><a name="1002136"> </a><code>true</code> if and only if the update was caused by a timeout. If an application calls <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a> and a timeout occurs before the callback is called, this field is <code>false</code>. </dd>

<dt><a name="993614"> </a><code>&larr; displaySkipBtn</code></dt>
<dd><a name="993616"> </a>If <code>true</code>, the progress dialog displays a skip button, which allows the user to skip the current stage. </dd>

<dt><a name="993618"> </a><code>&harr; skipped</code></dt>
<dd><a name="1004003"> </a>If <code>true</code>, the user tapped the skip button to skip the current stage. </dd>

<dt><a name="993622"> </a><code>spareBits1</code></dt>
<dd><a name="993624"> </a>Not used. </dd>

<dt><a name="993626"> </a><code>padding1</code></dt>
<dd><a name="1004093"> </a>Not used. </dd>

<dt><a name="993630"> </a><code>&harr; timeout</code></dt>
<dd><a name="1002594"> </a>Timeout in ticks to force next update. After this number of ticks, an update is automatically triggered (which sets the <code>timedOut</code> flag). You can use this feature to do a simple animation effect. Note that you must set the timeout for <code>EvtGetEvent()</code> to a value that is equal to or less than this value, otherwise you won't get update events as frequently as you expect.</dd>

<dt><a name="1006526"> </a><code>padding2</code></dt>
<dd><a name="1006527"> </a>Not used. </dd>

<dt><a name="993634"> </a><code>&harr; barMaxValue</code></dt>
<dd><a name="993636"> </a>The maximum value for the progress bar. </dd>

<dt><a name="993638"> </a><code>&harr; barCurValue</code></dt>
<dd><a name="993640"> </a>The current value that the progress bar should display. </dd>

<dt><a name="993642"> </a><code>barMessage</code></dt>
<dd><a name="1004125"> </a>Not used. </dd>

<dt><a name="993646"> </a><code>barFlags</code></dt>
<dd><a name="1004153"> </a>Not used. </dd>

<dt><a name="993654"> </a><code>&harr; delay</code></dt>
<dd><a name="1003038"> </a>If <code>true</code>, delay for one second after updating the dialog. Use this value when you are displaying the final progress message so that users have a chance to see the message before the dialog closes. </dd>

<dt><a name="993658"> </a><code>spareBits2</code></dt>
<dd><a name="1004097"> </a>Not used. </dd>

<dt><a name="993662"> </a><code>&rarr; userDataP</code></dt>
<dd><a name="1003271"> </a>A pointer to any application-defined data that the function needs to access. You specify this pointer as a parameter to <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> if the callback function needs to access some application data but does not have access to the application's global variables. </dd>

</dl>

<h3 class="hbH3">
  <a name="993671"> </a>ProgressType Struct <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993676"> </a>Purpose 
</h4>

<p><a name="993679"> </a>Internal structure that identifies the current progress. This structure is created with <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> and passed to all other Progress Manager functions. A <code>ProgressPtr</code> defines a pointer to a <code>ProgressType</code> structure. </p>
<h4>
  <a name="993681"> </a>Declared In 
</h4>
<code>Progress.h<a name="993684"> </a></code><h4>
  <a name="993686"> </a>Prototype 
</h4>
<pre class="proto"><a name="993689"></a>typedef struct ProgressType ProgressType, 
*ProgressPtr
</pre>
<h4>
  <a name="993691"> </a>Fields 
</h4>

<p><a name="993694"> </a>None.</p>

<h2 class="haH2">
  <a name="993701"> </a>Progress Manager Constants <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993741"> </a>Progress Manager String Length Constants <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993743"> </a>Purpose 
</h4>

<p><a name="993746"> </a>Specify the maximum sizes of the strings that are displayed in the progress dialog. </p>
<h4>
  <a name="993748"> </a>Declared In 
</h4>
<code>Progress.h<a name="993751"> </a></code><h4>
  <a name="993753"> </a>Constants 
</h4>

<dl>
<dt><a name="993756"> </a><code>#define progressMaxButtonText 7</code></dt>
<dd><a name="993758"> </a>Maximum length of the text in the OK or Cancel button. </dd>

<dt><a name="993760"> </a><code>#define progressMaxMessage 128</code></dt>
<dd><a name="993762"> </a>Maximum length of the <code>message</code> field in <a href="UI_ProgressManager.html#993270"><code>PrgCallbackData</code></a>. </dd>

<dt><a name="993764"> </a><code>#define progressMaxTitle 31</code></dt>
<dd><a name="999332"> </a>Maximum length in bytes for a title to a progress dialog. </dd>

</dl>

<h2 class="haH2">
  <a name="994987"> </a>Progress Manager Events <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="994988"> </a>prgUpdateEvent <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994989"> </a>Purpose 
</h4>

<p><a name="994990"> </a>Sent when another thread has updated the progress. </p>
<h4>
  <a name="1003533"> </a>Declared In 
</h4>
<code>EventCodes.h<a name="1003535"> </a></code><h4>
  <a name="1003537"> </a>Prototype 
</h4>

<p><a name="1003605"> </a>None. </p>

<h2 class="haH2">
  <a name="993773"> </a>Progress Manager Functions and Macros <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993822"> </a>PrgGetError Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993857"> </a>Purpose 
</h4>

<p><a name="993876"> </a>Returns the current error, if any. </p>
<h4>
  <a name="993894"> </a>Declared In 
</h4>
<code>Progress.h<a name="993913"> </a></code><h4>
  <a name="993931"> </a>Prototype 
</h4>
<pre class="proto"><a name="993950"></a>status_t PrgGetError (
   const ProgressType <code class="par">*prgP</code>
)
</pre>
<h4>
  <a name="993968"> </a>Parameters 
</h4>

<dl>
<dt><a name="993987"> </a><code>&rarr;  <i>prgP</i></code></dt>
<dd><a name="1003406"> </a>Pointer to a progress structure created by <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> or <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>.</dd>

</dl>
<h4>
  <a name="994031"> </a>Returns 
</h4>

<p><a name="994050"> </a>The value of the <code>error</code> field in <a href="UI_ProgressManager.html#993270"><code>PrgCallbackData</code></a>. </p>

<h3 class="hbH3">
  <a name="994062"> </a>PrgHandleEvent Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994067"> </a>Purpose 
</h4>

<p><a name="995142"> </a>Handles events related to the active progress dialog.</p>
<h4>
  <a name="994072"> </a>Declared In 
</h4>
<code>Progress.h<a name="994075"> </a></code><h4>
  <a name="994077"> </a>Prototype 
</h4>
<pre class="proto"><a name="994080"></a>Boolean PrgHandleEvent (
   ProgressPtr <code class="par">prgGP</code>,
   EventType <code class="par">*eventP</code>
)
</pre>
<h4>
  <a name="994082"> </a>Parameters 
</h4>

<dl>
<dt><a name="995146"> </a><code>&rarr;  <i><code>prgGP</code></i></code></dt>
<dd><a name="1003392"> </a>Pointer to a progress structure created by <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> or <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>.</dd>

<dt><a name="995240"> </a><code>&rarr;  <i><code>eventP</code></i></code></dt>
<dd><a name="995241"> </a>Pointer to an event. You can pass a <code>NULL</code> event to cause this function to immediately call your <a href="UI_ProgressManager.html#994689"><code>PrgCallbackFunc()</code></a> function and then update the dialog (for example, after you call <code>PrgUpdateDialog()</code>).</dd>

</dl>
<h4>
  <a name="994093"> </a>Returns 
</h4>

<p><a name="995332"> </a><code>true</code> if the system handled the event. If it returns <code>false</code>, you should check if the user cancelled the dialog by calling <a href="UI_ProgressManager.html#994518"><code>PrgUserCancel()</code></a>.</p>
<h4>
  <a name="995336"> </a>Comments 
</h4>

<p><a name="995340"> </a>Use this function instead of <a href="../System_Management/SystemMgr.html#994346"><code>SysHandleEvent()</code></a> when you have a progress dialog. <code>PrgHandleEvent()</code> internally calls <code>SysHandleEvent()</code> as needed.</p>

<p><a name="995342"> </a>If an update to the dialog is pending (from a call to <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a>, for example) this function handles that event and causes the dialog to be updated. As part of this process, the <a href="UI_ProgressManager.html#994689"><code>PrgCallbackFunc()</code></a> function you specified in your call to <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> is called. Your <code>PrgCallbackFunc()</code> function should set the <code>textP</code> buffer in the <a href="UI_ProgressManager.html#993270"><code>PrgCallbackData</code></a> structure with the new message to be displayed in the progress dialog. Optionally, you can also set the <code>bitmapId</code> and <code>bitmapDatabase</code> fields to include an icon in the update dialog. </p>
<h4>
  <a name="995378"> </a>See Also 
</h4>

<p><a name="995388"> </a><a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a>, <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>, <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a>, <a href="UI_ProgressManager.html#994518"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="994108"> </a>PrgStartDialog Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994117"> </a>Purpose 
</h4>

<p><a name="995449"> </a>Displays a progress dialog that can be updated.</p>
<h4>
  <a name="994122"> </a>Declared In 
</h4>
<code>Progress.h<a name="994125"> </a></code><h4>
  <a name="994127"> </a>Prototype 
</h4>
<pre class="proto"><a name="994130"></a>ProgressPtr PrgStartDialog (
   const char <code class="par">*title</code>,
   PrgCallbackFunc <code class="par">textCallback</code>,
   void <code class="par">*userDataP</code>
)
</pre>
<h4>
  <a name="994132"> </a>Parameters 
</h4>

<dl>
<dt><a name="995479"> </a><code>&rarr;  <i><code>title</code></i></code></dt>
<dd><a name="995480"> </a>Pointer to a title for the progress dialog. Must be a null-terminated string that is no longer than <code>progressMaxTitle</code>.</dd>

<dt><a name="995481"> </a><code>&rarr;  <i><code>textCallback</code></i></code></dt>
<dd><a name="995482"> </a>Pointer to a callback function that supplies the text and icons for the current progress state. See <a href="UI_ProgressManager.html#994689"><code>PrgCallbackFunc()</code></a>.</dd>

<dt><a name="995486"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="995487"> </a>A pointer to data that you need to access in the callback function. This address gets passed directly to your function. </dd>

</dl>
<h4>
  <a name="994147"> </a>Returns 
</h4>

<p><a name="999876"> </a>A pointer to a progress structure. This pointer must be passed to other Progress Manager functions and <i>must</i> be released by calling <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>. <code>NULL</code> is returned if the system is unable to allocate the progress structure.</p>
<h4>
  <a name="995525"> </a>Comments 
</h4>

<p><a name="995526"> </a>The dialog created by this function can be updated by another thread using the <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a> function. The dialog can contain a Cancel or OK button. The initial dialog defaults to stage 0 and calls the <code class="par">textCallback</code> function to get the initial text and icon data for the progress dialog.</p>

<p><a name="1000173"> </a>Progress dialogs cannot be associated with window constraints resources, and usually one is not necessary. The UI Library makes sure that the dialog is always the same size and snaps to the bottom of the application area. If you need to set window creation attributes that you would normally set in a constraints resource, use <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>. </p>
<h4>
  <a name="995531"> </a>See Also 
</h4>

<p><a name="995541"> </a><a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a>, <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>, <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a>, <a href="UI_ProgressManager.html#994518"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="994162"> </a>PrgStartDialogWithFlags Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994167"> </a>Purpose 
</h4>

<p><a name="999915"> </a>Displays a progress dialog that can be updated. Uses the specified window flags to create the dialog. </p>
<h4>
  <a name="994172"> </a>Declared In 
</h4>
<code>Progress.h<a name="994175"> </a></code><h4>
  <a name="994177"> </a>Prototype 
</h4>
<pre class="proto"><a name="994180"></a>ProgressPtr PrgStartDialogWithFlags (
   const char <code class="par">*title</code>,
   PrgCallbackFunc <code class="par">textCallback</code>,
   void <code class="par">*userDataP</code>,
   WinFlagsType <code class="par">flags</code>
)
</pre>
<h4>
  <a name="994182"> </a>Parameters 
</h4>

<dl>
<dt><a name="999959"> </a><code>&rarr;  <i><code>title</code></i></code></dt>
<dd><a name="999960"> </a>Pointer to a title for the progress dialog. Must be a null-terminated string that is no longer than <code>progressMaxTitle</code>.</dd>

<dt><a name="994189"> </a><code>&rarr;  <i>textCallback</i></code></dt>
<dd><a name="999984"> </a>Pointer to a callback function that supplies the text and icons for the current progress state. See <a href="UI_ProgressManager.html#994689"><code>PrgCallbackFunc()</code></a>.</dd>

<dt><a name="1000004"> </a><code>&rarr;  <i><code>userDataP</code></i></code></dt>
<dd><a name="1000005"> </a>A pointer to data that you need to access in the callback function. This address gets passed directly to your function. </dd>

<dt><a name="1000029"> </a><code>&rarr;  <i>flags</i></code></dt>
<dd><a name="1000030"> </a>Window attributes to use when creating the dialog. See <a href="UI_Window.html#994040"><code>WinFlagsType</code></a>. The attribute <code>winFlagModal</code> is set for you. </dd>

</dl>
<h4>
  <a name="994205"> </a>Returns 
</h4>

<p><a name="1000051"> </a>A pointer to a progress structure. This pointer must be passed to other Progress Manager functions and <i>must</i> be released by calling <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>. <code>NULL</code> is returned if the system is unable to allocate the progress structure.</p>
<h4>
  <a name="994210"> </a>Comments 
</h4>

<p><a name="1000059"> </a>Use this function instead of <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> in one of two circumstances: </p>
<ul type="disc">
  <li><a name="1000060"> </a>You need the window created for the progress dialog to be a transitional window so that you can draw to it outside of <a href="UI_Form.html#1089359"><code>frmUpdateEvent</code></a>s. In this case set the <span style="color: #000000;  font-family: Courier; font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">winFlagBackBuffer</span> bit in <code class="par">flags</code>. 
  <li><a name="1000066"> </a>You are displaying a progress dialog outside of the application process and it should appear in the same window layer as all of the other windows in that process. 
</ul>
<h4>
  <a name="994215"> </a>See Also 
</h4>

<p><a name="1000249"> </a><a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a>, <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>, <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a>, <a href="UI_ProgressManager.html#994518"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="994220"> </a>PrgStopDialog Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994225"> </a>Purpose 
</h4>

<p><a name="995617"> </a>Releases memory used by the progress dialog and restores the screen to its initial state.</p>
<h4>
  <a name="994230"> </a>Declared In 
</h4>
<code>Progress.h<a name="994233"> </a></code><h4>
  <a name="994235"> </a>Prototype 
</h4>
<pre class="proto"><a name="994238"></a>void PrgStopDialog (
   ProgressPtr <code class="par">prgP</code>,
   Boolean <code class="par">force</code>
)
</pre>
<h4>
  <a name="994240"> </a>Parameters 
</h4>

<dl>
<dt><a name="995672"> </a><code>&rarr;  <i><code>prgP</code></i></code></dt>
<dd><a name="995673"> </a>Pointer to a progress structure created by <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> or <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>.</dd>

<dt><a name="995677"> </a><code>&rarr;  <i><code>force</code></i></code></dt>
<dd><a name="995678"> </a><code>true</code> removes the progress dialog immediately, <code>false</code> causes the system to wait until the user confirms an error, if one is displayed.</dd>

</dl>
<h4>
  <a name="995679"> </a>Returns 
</h4>

<p><a name="995680"> </a>Nothing.</p>
<h4>
  <a name="995681"> </a>Comments 
</h4>

<p><a name="995682"> </a>If the progress dialog is in a state where it is displaying an error message to the user, this function normally waits for the user to confirm the dialog before it removes the dialog. If you specify <code>true</code> for the <code class="par">force</code> parameter, this causes the system to remove the dialog immediately.</p>
<h4>
  <a name="995683"> </a>See Also 
</h4>

<p><a name="995693"> </a><a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a>, <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a>, <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a>, <a href="UI_ProgressManager.html#994518"><code>PrgUserCancel()</code></a> </p>

<h3 class="hbH3">
  <a name="994266"> </a>PrgUpdateDialog Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994271"> </a>Purpose 
</h4>

<p><a name="995719"> </a>Updates the status of the current progress dialog.</p>
<h4>
  <a name="994276"> </a>Declared In 
</h4>
<code>Progress.h<a name="994279"> </a></code><h4>
  <a name="994281"> </a>Prototype 
</h4>
<pre class="proto"><a name="994284"></a>void PrgUpdateDialog (
   ProgressPtr <code class="par">prgGP</code>,
   status_t <code class="par">err</code>,
   uint16_t <code class="par">stage</code>,
   const char <code class="par">*messageP</code>,
   Boolean <code class="par">updateNow</code>
)
</pre>
<h4>
  <a name="994286"> </a>Parameters 
</h4>

<dl>
<dt><a name="995735"> </a><code>&rarr;  <i><code>prgGP</code></i></code></dt>
<dd><a name="995736"> </a>Pointer to a progress structure created by <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> or <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>.</dd>

<dt><a name="995740"> </a><code>&rarr;  <i><code>err</code></i></code></dt>
<dd><a name="995741"> </a>If nonzero, causes the dialog to go into error mode, to display an error message with only an OK button.</dd>

<dt><a name="995742"> </a><code>&rarr;  <i><code>stage</code></i></code></dt>
<dd><a name="995743"> </a>Current stage of progress. The callback function can use this to determine the correct string to display in the updated dialog.</dd>

<dt><a name="995744"> </a><code>&rarr;  <i><code>messageP</code></i></code></dt>
<dd><a name="995745"> </a>Extra text that may be useful in displaying the progress for this stage. Used by the callback function, which can append it to the base message that is based on the stage.</dd>

<dt><a name="995746"> </a><code>&rarr;  <i><code>updateNow</code></i></code></dt>
<dd><a name="995747"> </a>If <code>true</code>, the dialog is immediately updated. If <code>false</code>, sends a <a href="UI_ProgressManager.html#994988"><code>prgUpdateEvent</code></a>, which causes the dialog to be updated on the next call to <a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a>.</dd>

</dl>
<h4>
  <a name="995751"> </a>Returns 
</h4>

<p><a name="995752"> </a>Nothing.</p>
<h4>
  <a name="995753"> </a>Comments 
</h4>

<p><a name="1003553"> </a>This function can be called from a background thread to update the dialog in the application thread. The <code class="par">updateNow</code> parameter must be <code>false</code> in this situation. </p>

<p><a name="995755"> </a>For more information about how the parameters are used and the callback function, see the section <a href="UI_ProgressManager.html#994649">"Application-Defined Functions."</a></p>
<h4>
  <a name="995759"> </a>See Also 
</h4>

<p><a name="995769"> </a><a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a>, <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a>, <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>, <a href="UI_ProgressManager.html#994518"><code>PrgUserCancel()</code></a></p>

<h3 class="hbH3">
  <a name="994518"> </a>PrgUserCancel Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994523"> </a>Purpose 
</h4>

<p><a name="995791"> </a>Returns <code>true</code> if the user cancelled the process using the progress dialog.</p>
<h4>
  <a name="994528"> </a>Declared In 
</h4>
<code>Progress.h<a name="994531"> </a></code><h4>
  <a name="994533"> </a>Prototype 
</h4>
<pre class="proto"><a name="994536"></a>Boolean PrgUserCancel (
   const ProgressType <code class="par">*prgP</code>
)
</pre>
<h4>
  <a name="994538"> </a>Parameters 
</h4>

<dl>
<dt><a name="995814"> </a><code>&rarr;  <i><code>prgP</code></i></code></dt>
<dd><a name="995815"> </a>Pointer to a progress structure created by <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> or <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>.</dd>

</dl>
<h4>
  <a name="1000696"> </a>Returns 
</h4>

<p><a name="1000697"> </a><code>true</code> if the user tapped the Cancel button; <code>false</code> otherwise. </p>
<h4>
  <a name="1000698"> </a>Comments 
</h4>

<p><a name="995822"> </a>This is a function you can use to check if the user cancelled the process. If the user did cancel, you can change the progress dialog text to something like "Cancelling," or "Disconnecting," or whatever is appropriate for your application. Then you should cancel the process, end the communication session, or do whatever processing is necessary.</p>
<h4>
  <a name="995823"> </a>See Also 
</h4>

<p><a name="995833"> </a><a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a>, <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a>, <a href="UI_ProgressManager.html#994220"><code>PrgStopDialog()</code></a>, <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a></p>

<h3 class="hbH3">
  <a name="994599"> </a>PrgUserSkip Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994612"> </a>Purpose 
</h4>

<p><a name="1004227"> </a>Returns <code>true</code> if the user skipped the current stage of the process using the progress dialog.</p>
<h4>
  <a name="994617"> </a>Declared In 
</h4>
<code>Progress.h<a name="994620"> </a></code><h4>
  <a name="994622"> </a>Prototype 
</h4>
<pre class="proto"><a name="994625"></a>Boolean PrgUserSkip (
   const ProgressType <code class="par">*prgP</code>
)
</pre>
<h4>
  <a name="994627"> </a>Parameters 
</h4>

<dl>
<dt><a name="994630"> </a><code>&rarr;  <i>prgP</i></code></dt>
<dd><a name="1004266"> </a>Pointer to a progress structure created by <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a> or <a href="UI_ProgressManager.html#994162"><code>PrgStartDialogWithFlags()</code></a>.</dd>

</dl>
<h4>
  <a name="994634"> </a>Returns 
</h4>

<p><a name="1004283"> </a><code>true</code> if the user tapped the Skip button; <code>false</code> otherwise. </p>
<h4>
  <a name="994639"> </a>Comments 
</h4>

<p><a name="1004289"> </a>This is a function you can use to check if the user skipped the current stage of the process. If the user did skip, you can change the progress dialog text to something like "Skipping," or whatever is appropriate for your application. Then you should move on to the next stage of the process, or do whatever processing is necessary.</p>

<p><a name="1004361"> </a>The progress dialog only has a skip button if you specifically enable it by setting <code>displaySkipBtn</code> to <code>true</code> in the <a href="UI_ProgressManager.html#993270"><code>PrgCallbackData</code></a> structure. </p>

<h2 class="haH2">
  <a name="994649"> </a>Application-Defined Functions <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="994689"> </a>PrgCallbackFunc Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994694"> </a>Purpose 
</h4>

<p><a name="995854"> </a>Supplies the text and icons for the current progress state.</p>
<h4>
  <a name="994699"> </a>Declared In 
</h4>
<code>Progress.h<a name="994702"> </a></code><h4>
  <a name="994704"> </a>Prototype 
</h4>
<pre class="proto"><a name="994707"></a>Boolean (
   *PrgCallbackFunc
) (
   PrgCallbackDataPtr <code class="par">cbP</code>
)
</pre>
<h4>
  <a name="994709"> </a>Parameters 
</h4>

<dl>
<dt><a name="995858"> </a><code>&harr;  <i><code>cbP</code></i></code></dt>
<dd><a name="995860"> </a>A pointer to a <a href="UI_ProgressManager.html#993270"><code>PrgCallbackData</code></a> structure. </dd>

</dl>
<h4>
  <a name="995861"> </a>Returns 
</h4>

<p><a name="995862"> </a><code>true</code> if the progress dialog should be updated using the values you specified in the <code>PrgCallbackData</code> structure. If you return <code>false</code>, the dialog is still updated, but with default status messages. (Returning <code>false</code> is not recommended.)</p>
<h4>
  <a name="995863"> </a>Comments 
</h4>

<p><a name="995864"> </a>This is a callback function that you specify when you call <a href="UI_ProgressManager.html#994108"><code>PrgStartDialog()</code></a>. The callback function is called by <a href="UI_ProgressManager.html#994062"><code>PrgHandleEvent()</code></a> when it needs current progress information to display in the progress dialog. </p>

<p><a name="995908"> </a>In this function, you should set the value of the <code>textP</code> buffer to the string you want to display in the progress dialog when it is updated. You can use the value in the <code>stage</code> field to look up a message in a string resource. You also might want to append the text in the <code>message</code> field to your base string. Typically, the <code>message</code> field would contain more dynamic information that depends on a user selection, such as a phone number, device name, or network identifier, etc.</p>

<p><a name="995909"> </a>For example, the <a href="UI_ProgressManager.html#994266"><code>PrgUpdateDialog()</code></a> function might have been called with a stage of 1 and a message parameter value of a phone number string, "555-1212". Based on the stage, you might find the string "Dialing" in a string resource, and append the phone number, to form the final text "Dialing 555-1212" that you place in the text buffer <code>textP</code>.</p>

<p><a name="995910"> </a>Keeping the static strings corresponding to various stages in a resource makes it easier to localize your application. More dynamic information can be passed in by calling <code>PrgUpdateDialog()</code> with a <code class="par">messageP</code> parameter.</p>

<div><hr>
  <a name="995911"> </a> <b>NOTE: </b> This function is called only if the parameters passed to <code>PrgUpdateDialog()</code> have changed from the last time it was called. If <code>PrgUpdateDialog()</code> is called twice with exactly the same parameters, the callback function is called only once. 
<hr>
</div>

<p><a name="993250"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 2003&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="UI_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="UI_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_PrivateRecords.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_Rectangle.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>