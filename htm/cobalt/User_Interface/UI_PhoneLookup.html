<html>
<head>
<title>(Protein) Phone Lookup Reference | User Interface </title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 12:19:59">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="993254"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="UI_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_Menu.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_PrivateRecords.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">24 &nbsp;&nbsp;
Phone Lookup Reference</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">User Interface </p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="UI_PartRef.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="UI_PhoneLookup.html">24  Phone Lookup Reference</a></h1>

   <h2 class="SideTOC2"><a href="#993262">
   Phone Lookup Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#993320">
      AddrLookupParamsType</a></h3>

   <h2 class="SideTOC2"><a href="#993682">
   Phone Lookup Constants</a></h2>

      <h3 class="SideTOC3"><a href="#994272">
      AddressLookupFields</a></h3>

      <h3 class="SideTOC3"><a href="#996982">
      Lookup String Length Constant</a></h3>

   <h2 class="SideTOC2"><a href="#993947">
   Phone Lookup Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#993971">
      PhoneNumberLookup</a></h3>

      <h3 class="SideTOC3"><a href="#994013">
      PhoneNumberLookupCustom</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="994087"> </a>This chapter provides descriptions of the phone lookup functions. It covers the following topics:</p>
   <blockquote class = "bq"><a name="993268"> </a><a href="UI_PhoneLookup.html#993262">Phone Lookup Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="993691"> </a><a href="UI_PhoneLookup.html#993682">Phone Lookup Constants</a></blockquote>
   <blockquote class = "bq"><a name="993961"> </a><a href="UI_PhoneLookup.html#993947">Phone Lookup Functions and Macros</a></blockquote>

<p><a name="993258"> </a>The header file <code>PhoneLookup.h</code> declares the API that this chapter describes.</p>

<h2 class="haH2">
  <a name="993262"> </a>Phone Lookup Structures and Types <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993320"> </a>AddrLookupParamsType Struct <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993325"> </a>Purpose 
</h4>

<p><a name="994539"> </a>Structure to pass to <a href="UI_PhoneLookup.html#994013"><code>PhoneNumberLookupCustom()</code></a> to precisely control the phone number lookup dialog and paste process. The <code>AddrLookupParamsPtr</code> type defines a pointer to an <code>AddrLookupParamsType</code> structure. </p>
<h4>
  <a name="993330"> </a>Declared In 
</h4>
<code>PhoneLookup.h<a name="993343"> </a></code><h4>
  <a name="993363"> </a>Prototype 
</h4>
<pre class="proto"><a name="993400"></a>typedef struct {
   char *title;
   char *pasteButtonText;
   char lookupString[addrLookupStringLength];
   AddressLookupFields field1;
   AddressLookupFields field2;
   Boolean field2Optional;
   Boolean userShouldInteract;
   char *formatStringP;
   MemHandle resultStringH;
   uint32_t uniqueID;
} AddrLookupParamsType;
</pre>
<pre class="proto"><a name="994453"></a>typedef AddrLookupParamsType *AddrLookupParamsPtr
</pre>
<h4>
  <a name="993460"> </a>Fields 
</h4>

<dl>
<dt><a name="993503"> </a><code>title</code></dt>
<dd><a name="994651"> </a>Title to appear in the title bar. Supply <code>NULL</code> to use the default title.</dd>

<dt><a name="993587"> </a><code>pasteButtonText</code></dt>
<dd><a name="994675"> </a>Text to appear in paste button. Supply <code>NULL</code> to use the default, "paste".</dd>

<dt><a name="993631"> </a><code>lookupString</code></dt>
<dd><a name="994683"> </a>Buffer containing the string to look up. If the string matches only one record, that record is used without presenting the lookup dialog to the user. <a href="UI_PhoneLookup.html#993971"><code>PhoneNumberLookup()</code></a> and <a href="UI_PhoneLookup.html#994013"><code>PhoneNumberLookupCustom()</code></a> both set this field based upon the current selection or cursor position.</dd>

<dt><a name="993635"> </a><code>field1</code></dt>
<dd><a name="996419"> </a>Field to search by. This field appears on the left side of the lookup dialog. If the field is the sort field, the search is performed using a binary search. If the field isn't the sort field, searching is performed by a linear search, which can be slow. Supply one of the values in the <a href="UI_PhoneLookup.html#994272"><code>AddressLookupFields</code></a> enum to specify the field to search by.</dd>

<dt><a name="993639"> </a><code>field2</code></dt>
<dd><a name="994738"> </a>Field to display on the right. Often displays some information about the person. If it is a phone field and a record has multiple instances of the phone type then the person appears once per instance of the phone type. Either <code>field1</code> or <code>field2</code> may be a phone field, but not both. Supply one of the values in the <a href="UI_PhoneLookup.html#994272"><code>AddressLookupFields</code></a> enum to specify the field to display.</dd>

<dt><a name="993643"> </a><code>field2Optional</code></dt>
<dd><a name="994745"> </a>A value of <code>true</code> means that the record need not have <code>field2</code> in order to be listed. A value of <code>false</code> indicates that <code>field2</code> is required in order for the record to be listed. </dd>

<dt><a name="993647"> </a><code>userShouldInteract</code></dt>
<dd><a name="994749"> </a>A value of <code>true</code> forces the user to resolve non-unique lookups. A <code>false</code> value means a non-unique and complete lookup causes <code>resultStringH</code> to be set to <code>NULL</code> and <code>uniqueID</code> to be set to 0.</dd>

<dt><a name="993651"> </a><code>formatStringP</code></dt>
<dd><a name="994809"> </a>Controls the format of the paste string. All characters in the format string are literal unless they identify a field (signified by a caret (^) followed by the field name). For example, the format string "^first - ^home" might result in "Roger - 123-4567". Allowable field names are:</dd>

</dl>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><ul type="disc">
  <ul type="disc">
    <li><a name="997383"> </a><span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">name</span>
    <li><a name="997384"> </a>first
    <li><a name="997385"> </a>company
    <li><a name="997386"> </a>address
    <li><a name="997387"> </a>city
    <li><a name="997388"> </a>state
    <li><a name="997389"> </a>zipcode
    <li><a name="997390"> </a>country
    <li><a name="997391"> </a>title
    <li><a name="997392"> </a>custom1
    <li><a name="997393"> </a>custom2
  </ul>
</ul>
    </td>
    <td><ul type="disc">
  <ul type="disc">
    <li><a name="997535"> </a>custom3
    <li><a name="997536"> </a>custom4
    <li><a name="997537"> </a>work
    <li><a name="997538"> </a>home
    <li><a name="997539"> </a>fax
    <li><a name="997540"> </a>other
    <li><a name="997541"> </a>email
    <li><a name="997542"> </a>main
    <li><a name="997543"> </a>pager
    <li><a name="997544"> </a>mobile
    <li><a name="997545"> </a>listname
  </ul>
</ul>
    </td>
  </tr>
</table>

</div>


<dl>
<dt><a name="993655"> </a><code>resultStringH</code></dt>
<dd><a name="995125"> </a>If there is a format string, a result string is allocated on the dynamic heap and its handle is returned here.</dd>

<dt><a name="993659"> </a><code>uniqueID</code></dt>
<dd><a name="995129"> </a>The unique ID of the found record, or 0 if none was found, is returned here.</dd>

</dl>

<h2 class="haH2">
  <a name="993682"> </a>Phone Lookup Constants <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="994272"> </a>AddressLookupFields Typedef <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994274"> </a>Purpose 
</h4>

<p><a name="994275"> </a>Specifies the fields you can search by and the corresponding fields to return using the <code>field1</code> and <code>field2</code> elements of the <a href="UI_PhoneLookup.html#993320"><code>AddrLookupParamsType</code></a> structure. For both <code>field1</code> and <code>field2</code>, pass one of the values up to but not including <code>addrLookupFieldCount</code>. </p>
<h4>
  <a name="994276"> </a>Declared In 
</h4>
<code>PhoneLookup.h<a name="994277"> </a></code><h4>
  <a name="994278"> </a>Prototype 
</h4>
<pre class="proto"><a name="994279"></a>typedef Enum8 AddressLookupFields
</pre>
<h4>
  <a name="993818"> </a>Constants 
</h4>

<dl>
<dt><a name="993821"> </a><code>addrLookupName</code></dt>
<dt><a name="993825"> </a><code>addrLookupFirstName</code></dt>
<dt><a name="993829"> </a><code>addrLookupCompany</code></dt>
<dt><a name="993833"> </a><code>addrLookupAddress</code></dt>
<dt><a name="993837"> </a><code>addrLookupCity</code></dt>
<dt><a name="993841"> </a><code>addrLookupState</code></dt>
<dt><a name="993845"> </a><code>addrLookupZipCode</code></dt>
<dt><a name="993849"> </a><code>addrLookupCountry</code></dt>
<dt><a name="993853"> </a><code>addrLookupTitle</code></dt>
<dt><a name="993861"> </a><code>addrLookupCustom1</code></dt>
<dt><a name="993865"> </a><code>addrLookupCustom2</code></dt>
<dt><a name="993869"> </a><code>addrLookupCustom3</code></dt>
<dt><a name="993873"> </a><code>addrLookupCustom4</code></dt>
<dt><a name="993877"> </a><code>addrLookupNote</code></dt>
<dt><a name="993881"> </a><code>addrLookupWork</code></dt>
<dt><a name="993885"> </a><code>addrLookupHome</code></dt>
<dt><a name="993889"> </a><code>addrLookupFax</code></dt>
<dt><a name="993893"> </a><code>addrLookupOther</code></dt>
<dt><a name="993897"> </a><code>addrLookupEmail</code></dt>
<dt><a name="993901"> </a><code>addrLookupMain</code></dt>
<dt><a name="993905"> </a><code>addrLookupPager</code></dt>
<dt><a name="993909"> </a><code>addrLookupMobile</code></dt>
<dt><a name="993913"> </a><code>addrLookupSortField</code></dt>
<dt><a name="993917"> </a><code>addrLookupListPhone</code></dt>
<dt><a name="993921"> </a><code>addrLookupFieldCount</code></dt>
<dt><a name="993925"> </a><code>addrLookupNoField = 0xff</code></dt>
</dl>

<h3 class="hbH3">
  <a name="996982"> </a>Lookup String Length Constant <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996983"> </a>Purpose 
</h4>

<p><a name="996984"> </a>Maximum size of the lookup string. </p>
<h4>
  <a name="996985"> </a>Declared In 
</h4>
<code>PhoneLookup.h<a name="996986"> </a></code><h4>
  <a name="996987"> </a>Constants 
</h4>

<dl>
<dt><a name="996989"> </a><code>#define addrLookupStringLength 20</code></dt>
<dd><a name="996990"> </a>Size of the string contained in the <code>lookupString</code> field of <a href="UI_PhoneLookup.html#993320"><code>AddrLookupParamsType</code></a>.</dd>

</dl>

<h2 class="haH2">
  <a name="993947"> </a>Phone Lookup Functions and Macros <a href="#993254"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993971"> </a>PhoneNumberLookup Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993976"> </a>Purpose 
</h4>

<p><a name="995171"> </a>Calls the Address Book application to look up a phone number. </p>
<h4>
  <a name="993981"> </a>Declared In 
</h4>
<code>PhoneLookup.h<a name="993984"> </a></code><h4>
  <a name="993986"> </a>Prototype 
</h4>
<pre class="proto"><a name="993989"></a>void PhoneNumberLookup (
   FieldType <code class="par">*fldP</code>
)
</pre>
<h4>
  <a name="993991"> </a>Parameters 
</h4>

<dl>
<dt><a name="995175"> </a><code>&rarr;  <i><code>fldP</code></i></code></dt>
<dd><a name="995176"> </a>Field in which the text to match is found.</dd>

</dl>
<h4>
  <a name="993998"> </a>Returns 
</h4>

<p><a name="995184"> </a>Nothing.</p>
<h4>
  <a name="995185"> </a>Comments 
</h4>

<p><a name="995186"> </a>This function displays the user's phone list and inserts the chosen name and number (or company name, name, and number, if that's how the user's Address Book preferences indicate that the phone list should be sorted) into the specified field. When displaying the phone list, <code>PhoneNumberLookup()</code> scrolls the list to the entry that best matches the supplied field. The match compares the field contents against the name or company name (depending on the user's preferences) as follows:</p>
<ul type="disc">
  <li><a name="995187"> </a>If the field contains selected text, <code>PhoneNumberLookup()</code> tries to match against the selected text. The selected text is then replaced with the text of the chosen address list entry. 
  <li><a name="995188"> </a>If there is no selected text in the field, <code>PhoneNumberLookup()</code> matches against the word in which the cursor lies (the match will take place if the cursor is at the beginning, the end, or within a word). The matched word is replaced with the text of the chosen address list entry.
  <li><a name="995189"> </a>If the cursor does not lie within or adjoin a word, <code>PhoneNumberLookup()</code> displays the address list starting at the first entry, and the text of the chosen entry is inserted at the current position within the text field. 
</ul>

<p><a name="995190"> </a>If the user chooses Cancel when the address list is displayed, the field contents are left unaltered. The paste operation takes place through the clipboard so that Undo can be used to restore the field to its previous state.</p>
<h4>
  <a name="994008"> </a>See Also 
</h4>

<p><a name="995210"> </a><a href="UI_PhoneLookup.html#994013"><code>PhoneNumberLookupCustom()</code></a></p>

<h3 class="hbH3">
  <a name="994013"> </a>PhoneNumberLookupCustom Function <a href="#993254"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994018"> </a>Purpose 
</h4>

<p><a name="995218"> </a>Calls the Address Book application to look up a phone number. </p>
<h4>
  <a name="994023"> </a>Declared In 
</h4>
<code>PhoneLookup.h<a name="994026"> </a></code><h4>
  <a name="994028"> </a>Prototype 
</h4>
<pre class="proto"><a name="994031"></a>void PhoneNumberLookupCustom (
   FieldType <code class="par">*fldP</code>,
   AddrLookupParamsType <code class="par">*params</code>,
   Boolean <code class="par">useClipboard</code>
)
</pre>
<h4>
  <a name="994033"> </a>Parameters 
</h4>

<dl>
<dt><a name="995226"> </a><code>&rarr;  <i><code>fldP</code></i></code></dt>
<dd><a name="995227"> </a>Field in which the text to match is found.</dd>

<dt><a name="995228"> </a><code>&harr;  <i><code>params</code></i></code></dt>
<dd><a name="995229"> </a>A structure that allows full control over the find dialog and the format of the resulting paste string. See <a href="UI_PhoneLookup.html#993320"><code>AddrLookupParamsType</code></a> for a description of the fields in this structure.</dd>

<dt><a name="995233"> </a><code>&rarr;  <i><code>useClipboard</code></i></code></dt>
<dd><a name="995234"> </a>If true, <code>PhoneNumberLookupCustom()</code> pastes the result into the field through the clipboard, thereby enabling undo.</dd>

</dl>
<h4>
  <a name="995235"> </a>Returns 
</h4>

<p><a name="995236"> </a>Nothing.</p>
<h4>
  <a name="995237"> </a>Comments 
</h4>

<p><a name="995238"> </a>This function displays two fields from each record in the user's address list and inserts a formatted string based upon fields in the chosen record into the specified field. When displaying the address list, <code>PhoneNumberLookupCustom()</code> scrolls the list to that entry that best matches the supplied field. The match compares the field contents against the field specified in the <code>params</code> structure's <code>field1</code> element as follows:</p>
<ul type="disc">
  <li><a name="995239"> </a>If the field contains selected text, <code>PhoneNumberLookupCustom()</code> tries to match against the selected text. The selected text is then replaced with the text of the chosen address list entry. 
  <li><a name="995240"> </a>If there is no selected text in the field, <code>PhoneNumberLookupCustom()</code> matches against the word in which the cursor lies (the match will take place if the cursor is at the beginning, the end, or within a word). The matched word is replaced with the text of the chosen address list entry.
  <li><a name="995241"> </a>If the cursor does not lie within or adjoin a word, <code>PhoneNumberLookupCustom()</code> displays the address list starting at the first entry, and the text of the chosen entry is inserted at the current position within the text field.
</ul>

<p><a name="995242"> </a><code>PhoneNumberLookupCustom()</code> copies the portion of the field used for the search&#8212;the selected text or the word in which the cursor lies&#8212;into the <code>lookupString</code> field in the <code>params</code> structure prior to replacing that part of the field with the user-selected entry.</p>

<p><a name="995243"> </a>If the user chooses Cancel when the address list is displayed, the field contents are left unaltered. Depending on the value of the <code>useClipboard</code> parameter, the paste operation can take place through the clipboard so that Undo can be used to restore the field to its previous state.</p>

<p><a name="993250"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 2003&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="UI_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="UI_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_Menu.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_PrivateRecords.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="UI_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>