<html>
<head>
<title>(Protein) PDB and PRC Database Formats | Palm OS&#174; File Formats  </title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:10:08">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="972428"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="FileFormatsTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Intro.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="AddressBookSchema.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="FileFormatsIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">2 &nbsp;&nbsp;
PDB and PRC Database Formats</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Palm OS&#174; File Formats  </p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1"><a href="PDBandPRCFormat.html">2  PDB and PRC Database Formats</a></h1>

   <h2 class="SideTOC2"><a href="#972464">
   Overview of PDB and PRC Databases</a></h2>

   <h2 class="SideTOC2"><a href="#972547">
   Record and Resource Entries</a></h2>

      <h3 class="SideTOC3"><a href="#972552">
      PDB Record Entries</a></h3>

      <h3 class="SideTOC3"><a href="#972576">
      PRC Resource Entry Fields</a></h3>

   <h2 class="SideTOC2"><a href="#972602">
   The Application Information Block<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span></a></h2>

      <h3 class="SideTOC3"><a href="#972610">
      Finding the Length of the Application Information Block</a></h3>

      <h3 class="SideTOC3"><a href="#972615">
      Standard Category Data in an Application Information Block</a></h3>

   <h2 class="SideTOC2"><a href="#972720">
   The Sort Information Block<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span></a></h2>

      <h3 class="SideTOC3"><a href="#972723">
      Finding the Length of the Sort Information Block</a></h3>

   <h2 class="SideTOC2"><a href="#972728">
   PDB and PRC Raw Data</a></h2>

   <h2 class="SideTOC2"><a href="#972733">
   Reading and Writing PDB and PRC Data</a></h2>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="972430"> </a>This chapter describes the format of Palm OS<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: super">&#174;</span> record (PDB) and resource (PRC) databases. Palm<sup>&#8482;</sup> record databases contain records that are used with applications that run on Palm Powered<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: super">&#8482;</span> handhelds. Palm resource databases contain application resources, including the code and the user interface objects for the application.</p>

<p><a name="972432"> </a>These databases are stored in memory on handheld devices, and are stored in file form on desktop computers. This chapter describes the file format of these databases, which is slightly different than their in-memory format. The in-memory format is subject to change and is not documented by PalmSource, Inc.</p>

<p><a name="972433"> </a>This chapter contains the following sections:</p>
<ul type="disc">
  <li><a name="972437"> </a><a href="PDBandPRCFormat.html#972464">"Overview of PDB and PRC Databases"</a> provides an overview of the database representation and shows an image of that representation.
  <li><a name="972441"> </a><a href="PDBandPRCFormat.html#972547">"Record and Resource Entries"</a> describes the entries that provide information about each record or resource in a database.
  <li><a name="972445"> </a><a href="PDBandPRCFormat.html#972602">"The Application Information Block"</a> describes the application information block that can optionally be included in PDB and PRC databases.
  <li><a name="972449"> </a><a href="PDBandPRCFormat.html#972720">"The Sort Information Block"</a> describes the sorting information block that can optionally be included in PDB and PRC databases.
  <li><a name="972453"> </a><a href="PDBandPRCFormat.html#972728">"PDB and PRC Raw Data"</a> describes how the raw record data is stored in PDB and PRC databases.
  <li><a name="972457"> </a><a href="PDBandPRCFormat.html#972733">"Reading and Writing PDB and PRC Data"</a> describes the Palm OS functions that you can use to convert a chunk of data to a Palm database, or convert a Palm database to a chunk of data.
</ul>

<p><a name="972458"> </a>For an overview of Palm databases and file formats, including a detailed description of the database header format, see <a href="Intro.html#969980">Chapter 1, "Introduction to File Formats."</a></p>

<div><hr>
  <a name="972462"> </a> <b>NOTE: </b> This chapter describes the format of PDB and PRC databases that are stored in files on desktop computers. When one of these databases is loaded into a Palm Powered handheld, the database is stored in memory in a format that is similar to, but different than the format described here. The in-memory format of PDBs and PRCs is subject to change and is not documented by PalmSource, Inc.
<hr>
</div>

<h2 class="haH2">
  <a name="972464"> </a>Overview of PDB and PRC Databases <a href="#972428"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="972466"> </a>Each PDB and PRC database contains the following components:</p>
<ul type="disc">
  <li><a name="972467"> </a>A header containing fields that describe the database and refer to the information blocks and raw record data in the database. The Palm Database header is described in <a href="Intro.html#970318">"The Palm Database Header."</a>
  <li><a name="972471"> </a>A list of record entries, each of which describes a block of raw record or resource data. 
  <li><a name="972472"> </a>Two optional information blocks: the application information block and the sort information block.
  <li><a name="972473"> </a>The raw record data, which is stored in linear format and referenced from the record list in the header. 
</ul>

<p><a name="972477"> </a><a href="PDBandPRCFormat.html#972479">Figure 2.1</a> shows the structure of a Palm database, as stored in a file on a desktop computer.</p>

<p class="FFigureCaption">
  <a name="972479"> </a><b>Figure 2.1&nbsp;&nbsp;PDB and PRC database format</b>
</p>
<div align="left"><img src="images/PDBandPRCFormatb.jpg" height="287" width="480" border="0" hspace="0" vspace="0">
</div>


<h2 class="haH2">
  <a name="972547"> </a>Record and Resource Entries <a href="#972428"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="972548"> </a>The record list in the Palm database header contains a list of entries that describe the raw data records or resources in the database. The record list is described in <a href="Intro.html#970473">"The Record List."</a> The entries in PDB and PRC databases have different structures, and are described separately in this section.</p>
<h3 class="hbH3">
  <a name="972552"> </a>PDB Record Entries <a href="#972428"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="972553"> </a>The following structure declaration represents a record entry in a PDB file:</p>
<h4>
  <a name="976410"> </a>Prototype 
</h4>
<pre class="proto"><a name="972554"></a>typedef struct {
   LocalID localChunkID;
   UInt8 attributes;
   UInt8 uniqueID[3];
} RecordEntryType;
</pre>
<h4>
  <a name="976493"> </a>Fields 
</h4>

<dl>
<dt><a name="972562"> </a><code><code>localChunkID</code></code></dt>
<dd><a name="972564"> </a>The local offset from the top of the PDB to the start of the raw record data for this entry. </dd>

<dd><a name="972566"> </a>Note that you can determine the size of each chunk of raw record data by subtracting the starting offset of the chunk from the starting offset of the following chunk. If the chunk is the last chunk, its end is determined by the end of the file.</dd>

<dt><a name="972568"> </a><code><code>attributes</code></code></dt>
<dd><a name="972570"> </a>Attributes of the record.</dd>

<dt><a name="972572"> </a><code><code>uniqueID</code></code></dt>
<dd><a name="972574"> </a>A three-byte long unique ID for the record.</dd>

</dl>
<h3 class="hbH3">
  <a name="972576"> </a>PRC Resource Entry Fields <a href="#972428"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="972577"> </a>The following structure declaration represents a resource entry in a PRC file:</p>
<h4>
  <a name="976572"> </a>Prototype 
</h4>
<pre class="proto"><a name="972578"></a>typedef struct {
   UInt32 type;
   UInt16 id;
   LocalID localChunkID;
} RsrcEntryType;
</pre>
<h4>
  <a name="976591"> </a>Fields 
</h4>

<dl>
<dt><a name="972586"> </a><code><code>type</code></code></dt>
<dd><a name="972588"> </a>The resource type.</dd>

<dt><a name="972590"> </a><code><code>id</code></code></dt>
<dd><a name="972592"> </a>The ID of the resource.</dd>

<dt><a name="972594"> </a><code><code>localChunkID</code></code></dt>
<dd><a name="972596"> </a>The local offset from the top of the PRC to the start of the resource data for this entry. </dd>

<dd><a name="972598"> </a>Note that you can determine the size of each chunk of raw resource data by subtracting the starting offset of the chunk from the starting offset of the following chunk. If the chunk is the last chunk, its end is determined by the end of the file.</dd>

</dl>

<h2 class="haH2">
  <a name="972602"> </a>The Application Information Block<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span> <a href="#972428"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="972603"> </a>Each Palm Database can optionally include an application information (<code>appInfo</code>) block that contains arbitrary information.</p>

<p><a name="972604"> </a>The format of the <code>appInfo</code> block is determined by the creator of the database. However, PDBs that support the standard Palm OS category data, the <code>appInfo</code> block contains specific information, as described in <a href="PDBandPRCFormat.html#972610">"Finding the Length of the Application Information Block,"</a> below.</p>

<div><hr>
  <a name="972608"> </a> <b>NOTE: </b> PRCs can also contain application information blocks; however, this is rarely the case.
<hr>
</div>
<h3 class="hbH3">
  <a name="972610"> </a>Finding the Length of the Application Information Block <a href="#972428"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="972611"> </a>If the database includes an application information block, you can find its length by finding the block that follows it:</p>
<ul type="disc">
  <li><a name="972612"> </a>If the database includes a sort information block, that block immediately follows the application information block. 
  <li><a name="972613"> </a>If the database does not include a sort information block, but does include one or more records, then the end of the application information block is just before the start of the first record block.
  <li><a name="972614"> </a>If the database does not contain a sort information block and does not contain any records, then the end of the application information block is the end of the file.
</ul>
<h3 class="hbH3">
  <a name="972615"> </a>Standard Category Data in an Application Information Block <a href="#972428"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="972616"> </a>A PDB for an application that supports standard Palm OS category data includes the category data in the standard format shown in <a href="PDBandPRCFormat.html#972621">Figure 2.2</a>.</p>

<p class="FFigureCaption">
  <a name="972621"> </a><b>Figure 2.2&nbsp;&nbsp;PDB appInfo bock for standard category data</b>
</p>
<div align="left"><img src="images/PDBandPRCFormat2.jpg" height="360" width="480" border="0" hspace="0" vspace="0">
</div>

<p><a name="972687"> </a>The following structure declaration represents an application information block for an application that uses standard Palm OS category information:</p>
<h4>
  <a name="976621"> </a>Prototype 
</h4>
<pre class="proto"><a name="972688"></a>typedef struct {
   UInt16 renamedCategories;
   Char categoryLabels[16][16];
   UInt8 categoryUniqIDs[16];
   UInt8 lastUniqID;
   UInt8 padding;
} AppInfoType;
</pre>
<h4>
  <a name="976638"> </a>Fields 
</h4>

<dl>
<dt><a name="972698"> </a><code><code>renamedCategories</code></code></dt>
<dd><a name="972700"> </a>Specifies which categories have been renamed. </dd>

<dt><a name="972702"> </a><code><code>categoryLabel</code></code></dt>
<dd><a name="972704"> </a>An array of 16 null-terminated category labels, each of which is 16 bytes long.</dd>

<dt><a name="972706"> </a><code><code>categoryUniqID</code></code></dt>
<dd><a name="972708"> </a>An array of 16 category ID values, each of which is one byte long.</dd>

<dt><a name="972710"> </a><code><code>lastUniqID</code></code></dt>
<dd><a name="972712"> </a>The last unique category ID assigned.</dd>

<dt><a name="972714"> </a><code><code>padding</code></code></dt>
<dd><a name="972716"> </a>Unused.</dd>

</dl>

<h2 class="haH2">
  <a name="972720"> </a>The Sort Information Block<span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline"> </span> <a href="#972428"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="972721"> </a>The structure of the optional <code>sortInfo</code> block is completely up to the application; there is no standard format, nor is there a structure declared for this block. Most PDBs that contain a <code>sortInfo</code> block use it to store ordering information based on record IDs.</p>

<div><hr>
  <a name="975120"> </a> <b>NOTE: </b> PRCs can also contain sort information blocks; however, this is rarely the case.
<hr>
</div>
<h3 class="hbH3">
  <a name="972723"> </a>Finding the Length of the Sort Information Block <a href="#972428"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="972724"> </a>If the database includes a sort information block, you can find its length by finding the block that follows it:</p>
<ul type="disc">
  <li><a name="972725"> </a>If the database includes one or more records, then the end of the sort information block is just before the start of the first record block.
  <li><a name="972726"> </a>If the database does not contain any records, then the end of the sort information block is the end of the file.
</ul>

<h2 class="haH2">
  <a name="972728"> </a>PDB and PRC Raw Data <a href="#972428"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="972729"> </a>Record data in a PDB is stored as a block of contiguous records. The local offset to the beginning of each record is stored in the record list(s) in the database header. The length and format of the record data is application-specific.</p>

<p><a name="972731"> </a>Similarly, resource data in a PRC database is stored as a block of contiguous resources. The local offset to the beginning of each resource is stored in the record list(s) in the database header. The length and format of the resource data is not documented in this book.</p>

<h2 class="haH2">
  <a name="972733"> </a>Reading and Writing PDB and PRC Data <a href="#972428"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="972734"> </a>The Palm OS provides functions that you can use to convert data into or out of Palm Database formats:</p>
<ul type="disc">
  <li><a name="972735"> </a>If you have a chunk of data on the handheld device that is formatted as described in this chapter, you can use either the <a href="../Memory_Databases_Files/DataMgr.html#995834"><code>DmCreateDatabaseFromImage()</code></a> function or the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1269276"><code>ExgDBRead()</code></a> function to convert that data into a Palm Database.
  <li><a name="972736"> </a>If you want to convert a Palm Database into a chunk of data on the handheld device, you can use the <a href="../High-Level_Communications/HLC_ExgMgrRef.html#1269343"><code>ExgDBWrite()</code></a> function.
</ul>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="FRONT.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="FileFormatsTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Intro.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="AddressBookSchema.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="FileFormatsIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>