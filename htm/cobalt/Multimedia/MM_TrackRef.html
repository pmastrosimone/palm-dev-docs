<html>
<head>
<title>(Protein) Multimedia Tracks | Multimedia</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:17:04">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="995984"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="MM_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MM_SessionRef.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MM_Glossary.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MM_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">9 &nbsp;&nbsp;
Multimedia Tracks</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Multimedia</p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="MM_MultimediaPart.html">Part II: Multimedia Library</a> </h1>
<h1 class="SideTOC1"><a href="MM_TrackRef.html">9  Multimedia Tracks</a></h1>

   <h2 class="SideTOC2"><a href="#995992">
   Multimedia Track Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#996006">
      FilterCallbackInfo</a></h3>

   <h2 class="SideTOC2"><a href="#996087">
   Multimedia Track Constants</a></h2>

      <h3 class="SideTOC3"><a href="#996989">
      Track Property Key Constants</a></h3>

   <h2 class="SideTOC2"><a href="#996474">
   Multimedia Track Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#996493">
      MMTrackInsertCallbackFilter</a></h3>

      <h3 class="SideTOC3"><a href="#996606">
      MMTrackRemoveCallbackFilter</a></h3>

   <h2 class="SideTOC2"><a href="#996782">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#996801">
      MMFilterCallbackFn</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="997345"> </a>This chapter describes multimedia structures, constants, and functions related to tracks: </p>
   <blockquote class = "bq"><a name="996001"> </a><a href="MM_TrackRef.html#995992">Multimedia Track Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="996096"> </a><a href="MM_TrackRef.html#996087">Multimedia Track Constants</a></blockquote>
   <blockquote class = "bq"><a name="996483"> </a><a href="MM_TrackRef.html#996474">Multimedia Track Functions and Macros</a></blockquote>
   <blockquote class = "bq"><a name="996791"> </a><a href="MM_TrackRef.html#996782">Application-Defined Functions</a></blockquote>

<p><a name="995990"> </a>The header file <code>MMTrack.h</code> declares the API that this chapter describes.</p>

<h2 class="haH2">
  <a name="995992"> </a>Multimedia Track Structures and Types <a href="#995984"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996006"> </a>FilterCallbackInfo Struct <a href="#995984"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996017"> </a>Purpose 
</h4>

<p><a name="996023"> </a>Holds information about a buffer of data for which <a href="MM_TrackRef.html#996801"><code>MMFilterCallbackFn()</code></a> has been called.</p>
<h4>
  <a name="996028"> </a>Declared In 
</h4>
<code>MMTrack.h<a name="996034"> </a></code><h4>
  <a name="996039"> </a>Prototype 
</h4>
<pre class="proto"><a name="996045"></a>typedef struct _FilterCallbackInfo {
   int64_t timeStamp;
   size_t bufferSize;
} FilterCallbackInfo
</pre>
<h4>
  <a name="996050"> </a>Fields 
</h4>

<dl>
<dt><a name="996056"> </a><code>timeStamp</code></dt>
<dd><a name="996061"> </a>Timestamp of the data in nanoseconds. For a playback session, this indicates the actual position in the file, counting from 0 at the start. </dd>

<dd><a name="998578"> </a>Timestamps in a capture session are generated by the hardware driver and may be continuously incrementing even when no data is being captured. In this case, you should treat the value received in the first callback as the "base" value, and measure offsets from there.</dd>

<dt><a name="996066"> </a><code>bufferSize</code></dt>
<dd><a name="996071"> </a>Size of the buffer passed to the callback function, in bytes.</dd>

</dl>

<h2 class="haH2">
  <a name="996087"> </a>Multimedia Track Constants <a href="#995984"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996989"> </a>Track Property Key Constants <a href="#995984"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996990"> </a>Purpose 
</h4>

<p><a name="996994"> </a>Values used to retrieve track object properties. </p>
<h4>
  <a name="996995"> </a>Declared In 
</h4>
<code>MMTrack.h<a name="996996"> </a></code><h4>
  <a name="996997"> </a>Constants 
</h4>

<dl>
<dt><a name="996999"> </a><code>#define P_MM_TRACK_PROP_CODEC_CLASS (P_MM_TRACK_PROP_BASE | 0x0008L)</code></dt>
<dd><a name="997000"> </a>The 32-bit ID of the class used for encoding or decoding data on the track. </dd>

<dt><a name="997002"> </a><code>#define P_MM_TRACK_PROP_CURRENT_TIME (P_MM_TRACK_PROP_BASE | 0x0009L)</code></dt>
<dd><a name="997003"> </a>The current location in the track stream identified as a time value in nanoseconds. </dd>

<dt><a name="997005"> </a><code>#define P_MM_TRACK_PROP_DEST (P_MM_TRACK_PROP_BASE | 0x0006L)</code></dt>
<dd><a name="997009"> </a>ID of the destination object associated with track's destination stream. </dd>

<dt><a name="997011"> </a><code>#define P_MM_TRACK_PROP_DEST_FORMAT (P_MM_TRACK_PROP_BASE | 0x0002L)</code></dt>
<dd><a name="997012"> </a>A string specifying the track's destination format.</dd>

<dt><a name="997014"> </a><code>#define P_MM_TRACK_PROP_DEST_RECT (P_MM_TRACK_PROP_BASE | 0x0031L)</code></dt>
<dd><a name="997015"> </a>The region of the screen to be drawn in native screen pixels. </dd>

<dt><a name="997017"> </a><code>#define P_MM_TRACK_PROP_DEST_STREAM (P_MM_TRACK_PROP_BASE | 0x0007L)</code></dt>
<dd><a name="997021"> </a>ID of the stream object associated with the track's destination. </dd>

<dt><a name="997023"> </a><code>#define P_MM_TRACK_PROP_ENABLE (P_MM_TRACK_PROP_BASE | 0x0003L)</code></dt>
<dd><a name="997024"> </a>Boolean that describes whether the track is enabled or disabled. </dd>

<dt><a name="997026"> </a><code>#define P_MM_TRACK_PROP_SOURCE (P_MM_TRACK_PROP_BASE | 0x0004L)</code></dt>
<dd><a name="997030"> </a>ID of the source object associated with the track. </dd>

<dt><a name="997032"> </a><code>#define P_MM_TRACK_PROP_SOURCE_FORMAT (P_MM_TRACK_PROP_BASE | 0x0001L)</code></dt>
<dd><a name="997033"> </a>A string specifying the track's source format.</dd>

<dt><a name="997035"> </a><code>#define P_MM_TRACK_PROP_SOURCE_RECT (P_MM_TRACK_PROP_BASE | 0x0030L)</code></dt>
<dd><a name="997036"> </a>The region of the source buffer to be displayed in native screen pixels. </dd>

<dt><a name="997038"> </a><code>#define P_MM_TRACK_PROP_SOURCE_STREAM (P_MM_TRACK_PROP_BASE | 0x0005L)</code></dt>
<dd><a name="997039"> </a>ID of the stream object associated with the track's source. </dd>

<dt><a name="997041"> </a><code>#define P_MM_TRACK_PROP_VOLUME (P_MM_TRACK_PROP_BASE | 0x0020L)</code></dt>
<dd><a name="997042"> </a>An integer from 0 to 1024 specifying the current volume level.</dd>

</dl>

<h2 class="haH2">
  <a name="996474"> </a>Multimedia Track Functions and Macros <a href="#995984"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996493"> </a>MMTrackInsertCallbackFilter Function <a href="#995984"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997614"> </a>Purpose 
</h4>

<p><a name="997615"> </a>Registers a callback function to process data for a track.</p>
<h4>
  <a name="997616"> </a>Declared In 
</h4>
<code>MMTrack.h<a name="996521"> </a></code><h4>
  <a name="996526"> </a>Prototype 
</h4>
<pre class="proto"><a name="996532"></a>status_t MMTrackInsertCallbackFilter (
   MMTrackID <code class="par">track</code>,
   MMFilterCallbackFn <code class="par">callback</code>,
   void <code class="par">*userdata</code>
)
</pre>
<h4>
  <a name="996537"> </a>Parameters 
</h4>

<dl>
<dt><a name="996543"> </a><code>&rarr;  <i>track</i></code></dt>
<dd><a name="996548"> </a>A valid track ID.</dd>

<dt><a name="996553"> </a><code>&rarr;  <i>callback</i></code></dt>
<dd><a name="997658"> </a>Pointer to the callback function (for details, see <a href="MM_TrackRef.html#996801"><code>MMFilterCallbackFn()</code></a>).</dd>

<dt><a name="996563"> </a><code>&rarr;  <i>userdata</i></code></dt>
<dd><a name="997669"> </a>Pointer to arbitrary user-provided data, or <code>NULL</code>. This pointer is passed to the callback function.</dd>

</dl>
<h4>
  <a name="996573"> </a>Returns 
</h4>

<p><a name="997738"> </a>The following result codes:</p>

<dl>
<dt><a name="997739"> </a><code>errNone</code></dt>
<dd><a name="997740"> </a>No error.</dd>

<dt><a name="997741"> </a><code>sysErrParamErr</code></dt>
<dd><a name="997742"> </a>One of the parameters is invalid.</dd>

<dt><a name="997743"> </a><code>sysErrNotAllowed</code></dt>
<dd><a name="997744"> </a>There is already a callback registered for this track.</dd>

</dl>
<h4>
  <a name="996584"> </a>Comments 
</h4>

<p><a name="997712"> </a>Only one callback may be installed for a track.</p>
<h4>
  <a name="996595"> </a>See Also 
</h4>

<p><a name="996601"> </a><a href="MM_TrackRef.html#996606"><code>MMTrackRemoveCallbackFilter()</code></a></p>

<h3 class="hbH3">
  <a name="996606"> </a>MMTrackRemoveCallbackFilter Function <a href="#995984"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996624"> </a>Purpose 
</h4>

<p><a name="996632"> </a>Unregisters a callback function for a track.</p>
<h4>
  <a name="996643"> </a>Declared In 
</h4>
<code>MMTrack.h<a name="996657"> </a></code><h4>
  <a name="996670"> </a>Prototype 
</h4>
<pre class="proto"><a name="996684"></a>status_t MMTrackRemoveCallbackFilter (
   MMTrackID <code class="par">track</code>
)
</pre>
<h4>
  <a name="996701"> </a>Parameters 
</h4>

<dl>
<dt><a name="996715"> </a><code>&rarr;  <i>track</i></code></dt>
<dd><a name="997772"> </a>A valid track ID for which a callback function has been registered by <a href="MM_TrackRef.html#996493"><code>MMTrackInsertCallbackFilter()</code></a>.</dd>

</dl>
<h4>
  <a name="996741"> </a>Returns 
</h4>

<p><a name="997776"> </a>The following result codes:</p>

<dl>
<dt><a name="997777"> </a><code>errNone</code></dt>
<dd><a name="997778"> </a>No error.</dd>

<dt><a name="997779"> </a><code>sysErrParamErr</code></dt>
<dd><a name="997780"> </a>The track is invalid.</dd>

<dt><a name="997781"> </a><code>sysErrBadData</code></dt>
<dd><a name="997782"> </a>The specified callback function was not found.</dd>

</dl>

<h2 class="haH2">
  <a name="996782"> </a>Application-Defined Functions <a href="#995984"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="996801"> </a>MMFilterCallbackFn Function <a href="#995984"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996812"> </a>Purpose 
</h4>

<p><a name="996818"> </a>Called when the track receives a buffer of data.</p>
<h4>
  <a name="996823"> </a>Declared In 
</h4>
<code>MMTrack.h<a name="996829"> </a></code><h4>
  <a name="996834"> </a>Prototype 
</h4>
<pre class="proto"><a name="996840"></a>void (
   *MMFilterCallbackFn
) (
    MMTrackID <code class="par">track</code>,
   void <code class="par">*buffer</code>,
   FilterCallbackInfo <code class="par">*info</code>,
   void <code class="par">*userdata</code>
)
</pre>
<h4>
  <a name="996845"> </a>Parameters 
</h4>

<dl>
<dt><a name="996851"> </a><code>&rarr;  <i>track</i></code></dt>
<dd><a name="997958"> </a>Track ID of the track for which the callback function is registered.</dd>

<dt><a name="996861"> </a><code>&harr;  <i>buffer</i></code></dt>
<dd><a name="996866"> </a>Pointer to a buffer of track data.</dd>

<dt><a name="996871"> </a><code>&rarr;  <i>info</i></code></dt>
<dd><a name="996876"> </a>Pointer to a <a href="MM_TrackRef.html#996006"><code>FilterCallbackInfo</code></a> structure.</dd>

<dt><a name="996881"> </a><code>&rarr;  <i>userdata</i></code></dt>
<dd><a name="998143"> </a>A pointer to the user data block passed to <a href="MM_TrackRef.html#996493"><code>MMTrackInsertCallbackFilter()</code></a> when the callback function was registered.</dd>

</dl>
<h4>
  <a name="996898"> </a>Returns 
</h4>

<p><a name="996907"> </a>Nothing.</p>
<h4>
  <a name="996918"> </a>Comments 
</h4>

<p><a name="998074"> </a>This function allows an application to customize functionality by processing track data somehow. </p>

<p><a name="998153"> </a>To register a filter callback function, call <code>MMTrackInsertCallbackFilter()</code>.</p>

<p><a name="995980"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="MM_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="MM_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MM_SessionRef.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MM_Glossary.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MM_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>