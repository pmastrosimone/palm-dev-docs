<html>
<head>
<title>(Protein) Loader | System Management</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:27:46">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="992934"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="SysMgt_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="HostControl.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Patch.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SysMgt_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">30 &nbsp;&nbsp;
Loader</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">System Management</p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="SysMgt_Part2.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="Loader.html">30  Loader</a></h1>

   <h2 class="SideTOC2"><a href="#992942">
   Loader Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#993002">
      SysModuleInfoType</a></h3>

      <h3 class="SideTOC3"><a href="#993042">
      SysPatchInfoType</a></h3>

   <h2 class="SideTOC2"><a href="#993326">
   Loader Constants</a></h2>

      <h3 class="SideTOC3"><a href="#993334">
      Miscellaneous Loader Constants</a></h3>

   <h2 class="SideTOC2"><a href="#1001171">
   Loader Launch Codes</a></h2>

      <h3 class="SideTOC3"><a href="#1022863">
      sysPatchLaunchCmdClearInfo</a></h3>

      <h3 class="SideTOC3"><a href="#1001451">
      sysPatchLaunchCmdSetInfo</a></h3>

   <h2 class="SideTOC2"><a href="#993414">
   Loader Functions and Macros</a></h2>

      <h3 class="SideTOC3"><a href="#993446">
      SysGetEntryAddresses</a></h3>

      <h3 class="SideTOC3"><a href="#993500">
      SysGetModuleDatabase</a></h3>

      <h3 class="SideTOC3"><a href="#993782">
      SysGetModuleGlobals</a></h3>

      <h3 class="SideTOC3"><a href="#993871">
      SysGetModuleInfo</a></h3>

      <h3 class="SideTOC3"><a href="#993933">
      SysGetModuleInfoByDatabaseID</a></h3>

      <h3 class="SideTOC3"><a href="#994041">
      SysGetRefNum</a></h3>

      <h3 class="SideTOC3"><a href="#1026808">
      SysLoadModule</a></h3>

      <h3 class="SideTOC3"><a href="#994673">
      SysLoadModuleByDatabaseID</a></h3>

      <h3 class="SideTOC3"><a href="#994809">
      SysRegisterPatch</a></h3>

      <h3 class="SideTOC3"><a href="#994859">
      SysUnloadModule</a></h3>

      <h3 class="SideTOC3"><a href="#995173">
      SysUnregisterPatch</a></h3>

   <h2 class="SideTOC2"><a href="#995223">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#995255">
      SysMainEntryPtrType</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="992936"> </a>The Program Loader is responsible for loading and unloading executable programs in the calling process. It also provides the means for retrieving information about executable modules and means for patching shared library entries. This chapter provides reference material for the loader as well as the dynamic linker, which links executables with shared libraries. The contents of this chapter are organized into the following sections:</p>
   <blockquote class = "bq"><a name="992948"> </a><a href="Loader.html#992942">Loader Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="993332"> </a><a href="Loader.html#993326">Loader Constants</a></blockquote>
   <blockquote class = "bq"><a name="1001570"> </a><a href="Loader.html#1001171">Loader Launch Codes</a></blockquote>
   <blockquote class = "bq"><a name="993420"> </a><a href="Loader.html#993414">Loader Functions and Macros</a></blockquote>
   <blockquote class = "bq"><a name="995229"> </a><a href="Loader.html#995223">Application-Defined Functions</a></blockquote>

<p><a name="992938"> </a>The header file <code>Loader.h</code> declares the API that this chapter describes.</p>

<p><a name="992940"> </a>See <a href="SharedLibraries.html#608590">Chapter 6, "Shared Libraries,"</a> for guidance on using, creating, and patching shared libraries.</p>

<h2 class="haH2">
  <a name="992942"> </a>Loader Structures and Types <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993002"> </a>SysModuleInfoType Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993007"> </a>Purpose 
</h4>

<p><a name="993010"> </a>Contains module information retrieved with <a href="Loader.html#993871"><code>SysGetModuleInfo()</code></a>.</p>
<h4>
  <a name="993012"> </a>Declared In 
</h4>
<code>Loader.h<a name="993015"> </a></code><h4>
  <a name="993017"> </a>Prototype 
</h4>
<pre class="proto"><a name="993020"></a>typedef struct SysModuleInfoType {
   uint32_t revision;
   uint32_t entries;
   uint32_t dataSize;
   uint32_t minArch;
   uint32_t minOS;
   uint32_t currArch;
   uint32_t currOS;
} SysModuleInfoType
</pre>
<h4>
  <a name="993022"> </a>Fields 
</h4>

<dl>
<dt><a name="993025"> </a><code>revision</code></dt>
<dd><a name="993027"> </a>The module revision number specified as a pslib command-line parameter when the module was built.</dd>

<dt><a name="993029"> </a><code>entries</code></dt>
<dd><a name="993031"> </a>The total number of entry points exported by this module.</dd>

<dt><a name="993033"> </a><code>dataSize</code></dt>
<dd><a name="993035"> </a>The amount of memory, in bytes, needed to hold the module's data segment.</dd>

<dt><a name="1019299"> </a><code>minArch</code></dt>
<dd><a name="1019324"> </a>The minimum required processor architecture.</dd>

<dt><a name="1019377"> </a><code>minOS</code></dt>
<dd><a name="1019402"> </a>The minimum required OS version.</dd>

<dt><a name="1019447"> </a><code>currArch</code></dt>
<dd><a name="1019460"> </a>The processor architecture of the device on which this is running.</dd>

<dt><a name="1019489"> </a><code>currOS</code></dt>
<dd><a name="1019498"> </a>The OS version of the device on which this is running.</dd>

</dl>

<h3 class="hbH3">
  <a name="993042"> </a>SysPatchInfoType Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993047"> </a>Purpose 
</h4>

<p><a name="993050"> </a>Accompanies a <a href="Loader.html#1001451"><code>sysPatchLaunchCmdSetInfo</code></a> launch code and identifies both the shared library being patched and the patch's location within the call chain.</p>
<h4>
  <a name="993052"> </a>Declared In 
</h4>
<code>Loader.h<a name="993055"> </a></code><h4>
  <a name="993057"> </a>Prototype 
</h4>
<pre class="proto"><a name="993060"></a>typedef struct SysPatchInfoType {
   uint32_t refNum;
   uint32_t type;
   uint32_t creator;
   uint16_t rsrcID;
   uint16_t reserved;
   uint32_t index;
   status_t (*sysGetNextPatchP) (uint32_t,
      uint32_t, uint32_t, void **);
} SysPatchInfoType
</pre>
<h4>
  <a name="993078"> </a>Fields 
</h4>

<dl>
<dt><a name="993131"> </a><code>refNum</code></dt>
<dd><a name="993187"> </a>Reference number identifying the patched shared library.</dd>

<dt><a name="993245"> </a><code>type</code></dt>
<dd><a name="1006610"> </a>The type of the database that contains the shared library.</dd>

<dt><a name="993305"> </a><code>creator</code></dt>
<dd><a name="1006606"> </a>The creator ID of the database that contains the shared library.</dd>

<dt><a name="993309"> </a><code>rsrcID</code></dt>
<dd><a name="993311"> </a>The resource ID of the shared library resource containing the code for the executable module being patched.</dd>

<dt><a name="993313"> </a><code>reserved</code></dt>
<dd><a name="993315"> </a>Reserved for future use.</dd>

<dt><a name="993317"> </a><code>index</code></dt>
<dd><a name="1005092"> </a>An index that identifies this patch's position within the call chain. The first patch in the call chain has index number zero.</dd>

<dt><a name="1014406"> </a><code>sysGetNextPatchP</code></dt>
<dd><a name="1014443"> </a>Pointer to a function that retrieves the address of the next patching procedure in a patched call chain.</dd>

</dl>
<h4>
  <a name="993321"> </a>Comments 
</h4>

<p><a name="993324"> </a>This structure accompanies a <a href="Loader.html#1001451"><code>sysPatchLaunchCmdSetInfo</code></a> launch code. Both are sent to a patch when the shared library that it patches is being loaded. Upon receipt of <code>sysPatchLaunchCmdSetInfo</code>, the patch will likely want to use the information in this structure to set aside pointers to functions in the next patch in the call chain. This allows the patch, after it has done its work, to invoke the next patch in the chain.</p>

<p><a name="1006031"> </a>For sample code showing how a patch can record function addresses from in the next patch in the chain, see <a href="SharedLibraries.html#997192">Listing 6.3</a>.</p>

<h2 class="haH2">
  <a name="993326"> </a>Loader Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993334"> </a>Miscellaneous Loader Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993336"> </a>Purpose 
</h4>

<p><a name="993339"> </a><code>Loader.h</code> declares these constants.</p>
<h4>
  <a name="993341"> </a>Declared In 
</h4>
<code>Loader.h<a name="993344"> </a></code><h4>
  <a name="993346"> </a>Constants 
</h4>

<dl>
<dt><a name="993349"> </a><code>#define sysDoNotVerifySignature ((uint32_t)0x00000001)</code></dt>
<dd><a name="1006390"> </a>A flag that can be passed to <a href="Loader.html#1026808"><code>SysLoadModule()</code></a> so that the program loader doesn't perform verification of the digital signature on the executable module even if the security property of the calling process requires that the digital signature be verified. This behavior is useful for certain type of applications&#8212;like web browsers&#8212;that have their own ways of verifying the integrity of downloaded programs.</dd>

<dt><a name="993357"> </a><code>#define sysEntryNumMain ((uint32_t)0xffffffff)</code></dt>
<dd><a name="993407"> </a>Pass this as the starting entry number parameter of <a href="Loader.html#993446"><code>SysGetEntryAddresses()</code></a> to retrieve only the address of the main entry point.</dd>

</dl>

<h2 class="haH2">
  <a name="1001171"> </a>Loader Launch Codes <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1022863"> </a>sysPatchLaunchCmdClearInfo <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1023270"> </a>Purpose 
</h4>

<p><a name="1023331"> </a>Informs a patch that a target shared library has been unloaded.</p>
<h4>
  <a name="1023426"> </a>Declared In 
</h4>
<code>CmnLaunchCodes.h<a name="1023485"> </a></code><h4>
  <a name="1023524"> </a>Prototype 
</h4>
<pre class="proto"><a name="1023583"></a>#define sysPatchLaunchCmdClearInfo 0x7ff3


</pre>
<h4>
  <a name="1023622"> </a>Parameters 
</h4>

<p><a name="1023930"> </a>The <code class="par">cmdPBP</code> parameter for this launch code is a pointer to a <a href="Loader.html#993042"><code>SysPatchInfoType</code></a> structure.</p>
<h4>
  <a name="1023981"> </a>Comments 
</h4>

<p><a name="1023985"> </a>A patch's <a href="../Programming_Basics/AppMgr.html#994755"><code>PilotMain()</code></a> function receives this launch code once for each of the shared libraries it patches. Thus, if a given patch patches multiple shared libraries, it will receive this launch code multiple times.</p>
<h4>
  <a name="1023738"> </a>See Also 
</h4>

<p><a name="1023837"> </a><a href="Loader.html#1001451"><code>sysPatchLaunchCmdSetInfo</code></a></p>

<h3 class="hbH3">
  <a name="1001451"> </a>sysPatchLaunchCmdSetInfo <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1001529"> </a>Purpose 
</h4>

<p><a name="1001552"> </a>Informs a patch that one of the shared libraries it wants to patch is being loaded.</p>
<h4>
  <a name="1001672"> </a>Declared In 
</h4>
<code>CmnLaunchCodes.h<a name="1001691"> </a></code><h4>
  <a name="1001704"> </a>Prototype 
</h4>
<pre class="proto"><a name="1001412"></a>#define sysPatchLaunchCmdSetInfo 0x7ffb


</pre>
<h4>
  <a name="1001731"> </a>Parameters 
</h4>

<p><a name="1001746"> </a>The <code class="par">cmdPBP</code> parameter for this launch code is a pointer to a <a href="Loader.html#993042"><code>SysPatchInfoType</code></a> structure.</p>
<h4>
  <a name="1005679"> </a>Comments 
</h4>

<p><a name="1005683"> </a>A patch's <a href="../Programming_Basics/AppMgr.html#994755"><code>PilotMain()</code></a> function receives this launch code once for each of the shared libraries it patches. Thus, if a given patch patches multiple shared libraries, it will receive this launch code multiple times.</p>

<p><a name="1005684"> </a>This launch code provides the patch with a good opportunity to retrieve and save addresses of functions in the next patch in the call chain.</p>

<p><a name="1021183"> </a>For sample code showing how a patch can record function addresses from in the next patch in the chain, see <a href="SharedLibraries.html#997192">Listing 6.3</a>.</p>
<h4>
  <a name="1002477"> </a>See Also 
</h4>

<p><a name="1002241"> </a><a href="Loader.html#993782"><code>SysGetModuleGlobals()</code></a>, <a href="Loader.html#1001451"><code>sysPatchLaunchCmdSetInfo</code></a></p>

<h2 class="haH2">
  <a name="993414"> </a>Loader Functions and Macros <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993446"> </a>SysGetEntryAddresses Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993451"> </a>Purpose 
</h4>

<p><a name="993454"> </a>Retrieve addresses of one or more entry points exported by a loaded executable module.</p>
<h4>
  <a name="993456"> </a>Declared In 
</h4>
<code>Loader.h<a name="993459"> </a></code><h4>
  <a name="993461"> </a>Prototype 
</h4>
<pre class="proto"><a name="993464"></a>status_t SysGetEntryAddresses (
   uint32_t <code class="par">refNum</code>,
   uint32_t <code class="par">startEntryNum</code>,
   uint32_t <code class="par">numEntries</code>,
   void <code class="par">**addressP</code>
)
</pre>
<h4>
  <a name="993466"> </a>Parameters 
</h4>

<dl>
<dt><a name="993469"> </a><code>&rarr;  <i>refNum</i></code></dt>
<dd><a name="993471"> </a>Reference number of the executable module as returned by a call to <a href="Loader.html#1026808"><code>SysLoadModule()</code></a>.</dd>

<dt><a name="993473"> </a><code>&rarr;  <i>startEntryNum</i></code></dt>
<dd><a name="1009987"> </a>Entry number of the first of <code class="par">numEntries</code> entry point addresses to be retrieved, or <code>sysEntryNumMain</code> to retrieve only the address of the main entry point. Exported entry point index values begin at zero.</dd>

<dt><a name="993477"> </a><code>&rarr;  <i>numEntries</i></code></dt>
<dd><a name="993479"> </a>Total number of entry point addresses to retrieve. If <code class="par">startEntryNum</code> is <code>sysEntryNumMain</code>, this parameter is ignored.</dd>

<dt><a name="993481"> </a><code>&larr;  <i>addressP</i></code></dt>
<dd><a name="993483"> </a>Pointer to a buffer that receives the returned addresses. The size of this buffer should be no less than <code class="par">numEntries</code>*4 bytes.</dd>

</dl>
<h4>
  <a name="993485"> </a>Returns 
</h4>

<p><a name="993488"> </a>Returns <code>errNone</code> if the operation succeeded, or one of the following otherwise:</p>

<dl>
<dt><a name="996927"> </a><code>sysErrParamErr</code></dt>
<dd><a name="997057"> </a><code class="par">refNum</code> doesn't reference a loaded shared library, <code class="par">addressP</code> is <code>NULL</code>, or either <code class="par">startEntryNum</code> or (<code class="par">startEntryNum</code> + <code class="par">numEntries</code> - 1) is outside the range of exported entry points.</dd>

</dl>
<h4>
  <a name="993490"> </a>Comments 
</h4>

<p><a name="993493"> </a>A shared library can have multiple exported entries, each identified by an entry number assigned when the shared library is built. Entry numbers are assigned in the shared library definition file (SLD), where the names of exported entries are listed in the order of increasing entry numbers starting from zero.</p>
<h4>
  <a name="993495"> </a>See Also 
</h4>

<p><a name="993498"> </a><a href="Loader.html#993782"><code>SysGetModuleGlobals()</code></a></p>

<h3 class="hbH3">
  <a name="993500"> </a>SysGetModuleDatabase Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993505"> </a>Purpose 
</h4>

<p><a name="993508"> </a>Retrieve the database ID, an open reference, or both for a database that contains a loaded executable module.</p>
<h4>
  <a name="993510"> </a>Declared In 
</h4>
<code>Loader.h<a name="993513"> </a></code><h4>
  <a name="993515"> </a>Prototype 
</h4>
<pre class="proto"><a name="993518"></a>status_t SysGetModuleDatabase (
   uint32_t <code class="par">refNum</code>,
   DatabaseID <code class="par">*dbIDP</code>,
   DmOpenRef <code class="par">*openRefP</code>
)
</pre>
<h4>
  <a name="993536"> </a>Parameters 
</h4>

<dl>
<dt><a name="993589"> </a><code>&rarr;  <i>refNum</i></code></dt>
<dd><a name="1010267"> </a>Reference number of the loaded executable module as returned by a call to <a href="Loader.html#1026808"><code>SysLoadModule()</code></a>.</dd>

<dt><a name="993703"> </a><code>&larr;  <i>dbIDP</i></code></dt>
<dd><a name="993761"> </a>Database ID of the database that contains the executable module. Pass <code>NULL</code> for this parameter if you don't need the database ID.</dd>

<dt><a name="993763"> </a><code>&larr;  <i>openRefP</i></code></dt>
<dd><a name="993765"> </a>Open reference of the database that contains the executable module. Pass <code>NULL</code> for this parameter if you don't need the reference.</dd>

</dl>
<h4>
  <a name="993767"> </a>Returns 
</h4>

<p><a name="998812"> </a>Returns <code>errNone</code> if the operation succeeded, or one of the following otherwise:</p>

<dl>
<dt><a name="998820"> </a><code>sysErrParamErr</code></dt>
<dd><a name="999271"> </a><code class="par">refNum</code> doesn't identify a loaded executable module.</dd>

<dt><a name="998821"> </a><code>sysErrNoFreeResource</code></dt>
<dd><a name="999321"> </a><code class="par">openRefP</code> is not <code>NULL</code> and the database that contains the executable module identified by <code class="par">refNum</code> could not be opened.</dd>

</dl>
<h4>
  <a name="1024037"> </a>Comments 
</h4>

<div><hr>
  <a name="1024077"> </a> <span class="warning">WARNING! </span> Do not call <code>DmCloseDatabase()</code> with the <code>DmOpenRef</code> you obtain from this function. The referenced database was opened by the system in read-only mode with overlays. It will be closed automatically when the module is unloaded.
<hr>
</div>
<h4>
  <a name="993777"> </a>See Also 
</h4>

<p><a name="993780"> </a><a href="Loader.html#993871"><code>SysGetModuleInfo()</code></a>, <a href="Loader.html#993933"><code>SysGetModuleInfoByDatabaseID()</code></a></p>

<h3 class="hbH3">
  <a name="993782"> </a>SysGetModuleGlobals Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993787"> </a>Purpose 
</h4>

<p><a name="993790"> </a>Retrieve the address of the C global structure or the address of the data segment of a loaded executable module.</p>
<h4>
  <a name="993792"> </a>Declared In 
</h4>
<code>Loader.h<a name="993795"> </a></code><h4>
  <a name="993797"> </a>Prototype 
</h4>
<pre class="proto"><a name="993800"></a>status_t SysGetModuleGlobals (
   uint32_t <code class="par">refNum</code>,
   Boolean <code class="par">wantStructure</code>,
   void <code class="par">**globalsP</code>
)
</pre>
<h4>
  <a name="993802"> </a>Parameters 
</h4>

<dl>
<dt><a name="993805"> </a><code>&rarr;  <i>refNum</i></code></dt>
<dd><a name="993807"> </a>Reference number of an executable module as returned by a call to <a href="Loader.html#1026808"><code>SysLoadModule()</code></a>.</dd>

<dt><a name="993809"> </a><code>&rarr;  <i>wantStructure</i></code></dt>
<dd><a name="993811"> </a>Pass <code>true</code> to retrieve the base address of the C global structure, <code>false</code> to retrieve the address of the executable module's data segment.</dd>

<dt><a name="993813"> </a><code>&larr;  <i>globalsP</i></code></dt>
<dd><a name="993815"> </a>Pointer to a memory location into which the address of the C global structure or data segment is to be written.</dd>

</dl>
<h4>
  <a name="993817"> </a>Returns 
</h4>

<p><a name="997933"> </a>Returns <code>errNone</code> if the operation succeeded. Returns one of the following otherwise:</p>

<dl>
<dt><a name="997934"> </a><code>sysErrNotSupported</code></dt>
<dd><a name="997991"> </a>The executable module specified by <code class="par">refNum</code> doesn't have a C global structure or doesn't allow it to be retrieved. In this case, the address of the module's data segment will returned in <code class="par">*globalsP</code>. This error can be returned only when <code class="par">wantStructure</code> is <code>true</code>.</dd>

<dt><a name="997935"> </a><code>sysErrParamErr</code></dt>
<dd><a name="997992"> </a><code class="par">refNum</code> doesn't reference a loaded shared library. The memory pointed to by <code class="par">addressP</code> is set to <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="993836"> </a>Comments 
</h4>

<p><a name="998005"> </a>This function provides an indirect way for an executable module to access another executable module's global data. Patches can utilize this function to gain access to the globals of the original shared library.</p>

<p><a name="998007"> </a>Whether <code>SysGetModuleGlobals()</code> is able to return the address of the globals structure depends on whether the module identified by <code class="par">refNum</code> defines such a structure and whether it returns the structure's address in response to the <a href="../Programming_Basics/CmnLaunchCodes.html#993873"><code>sysLaunchCmdGetGlobals</code></a> launch code. <code>SysGetModuleGlobals()</code> returns <code>sysErrNotSupported</code> if <code class="par">wantStructure</code> is <code>true</code> and the module doesn't allow the globals structure address to be retrieved.</p>

<p><a name="1007852"> </a>Note that if you retrieve the address of the executable module's data segment, you must possess sufficient knowledge of the memory map of the module's data segment in order to access data located at particular offsets.</p>

<p><a name="1008243"> </a>If <code class="par">*globalsP</code> is <code>NULL</code> after retrieving the base address of the module's data segment, the executable module has no static data.</p>
<h4>
  <a name="993850"> </a>See Also 
</h4>

<p><a name="993861"> </a><a href="Loader.html#993446"><code>SysGetEntryAddresses()</code></a></p>

<h3 class="hbH3">
  <a name="993871"> </a>SysGetModuleInfo Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993884"> </a>Purpose 
</h4>

<p><a name="993887"> </a>Retrieve information about an executable module, given the type and creator of the database containing the executable module.</p>
<h4>
  <a name="993889"> </a>Declared In 
</h4>
<code>Loader.h<a name="993892"> </a></code><h4>
  <a name="993894"> </a>Prototype 
</h4>
<pre class="proto"><a name="993897"></a>status_t SysGetModuleInfo (
   uint32_t <code class="par">dbType</code>,
   uint32_t <code class="par">dbCreator</code>,
   uint16_t <code class="par">rsrcID</code>,
   SysModuleInfoType <code class="par">*infoP</code>
)
</pre>
<h4>
  <a name="993899"> </a>Parameters 
</h4>

<dl>
<dt><a name="993902"> </a><code>&rarr;  <i>dbType</i></code></dt>
<dd><a name="993904"> </a>Type of the database that contains the executable module.</dd>

<dt><a name="993906"> </a><code>&rarr;  <i>dbCreator</i></code></dt>
<dd><a name="993908"> </a>Creator ID of the database that contains the executable module.</dd>

<dt><a name="993910"> </a><code>&rarr;  <i>rsrcID</i></code></dt>
<dd><a name="993912"> </a>ID number of the resources in the database that contain the code, data, and relocation information of the executable module.</dd>

<dt><a name="993914"> </a><code>&larr;  <i>infoP</i></code></dt>
<dd><a name="993916"> </a>Pointer to a <a href="Loader.html#993002"><code>SysModuleInfoType</code></a> structure into which the module information is written.</dd>

</dl>
<h4>
  <a name="993918"> </a>Returns 
</h4>

<p><a name="993921"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="998488"> </a><code>sysErrModuleNotFound</code></dt>
<dd><a name="998601"> </a>Module not found.</dd>

<dt><a name="998489"> </a><code>sysErrModuleInvalid</code></dt>
<dd><a name="998630"> </a>Code resource has an invalid or corrupted format.</dd>

</dl>
<h4>
  <a name="993923"> </a>Comments 
</h4>

<p><a name="993926"> </a>This function is usually called by a client to get information about an executable module before actually loading it. The information returned includes the module's revision number, the total number of exported entries, and the size of the module's data segment.</p>
<h4>
  <a name="993928"> </a>See Also 
</h4>

<p><a name="993931"> </a><a href="Loader.html#993500"><code>SysGetModuleDatabase()</code></a>, <a href="Loader.html#993933"><code>SysGetModuleInfoByDatabaseID()</code></a>, <a href="Loader.html#1026808"><code>SysLoadModule()</code></a></p>

<h3 class="hbH3">
  <a name="993933"> </a>SysGetModuleInfoByDatabaseID Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993938"> </a>Purpose 
</h4>

<p><a name="1000721"> </a>Retrieve information about an executable module, given the database ID of the database containing the executable module.</p>
<h4>
  <a name="993943"> </a>Declared In 
</h4>
<code>Loader.h<a name="993946"> </a></code><h4>
  <a name="993948"> </a>Prototype 
</h4>
<pre class="proto"><a name="993951"></a>status_t SysGetModuleInfoByDatabaseID (
   DatabaseID <code class="par">dbID</code>,
   uint16_t <code class="par">rsrcID</code>,
   SysModuleInfoType <code class="par">*infoP</code>
)
</pre>
<h4>
  <a name="993953"> </a>Parameters 
</h4>

<dl>
<dt><a name="993956"> </a><code>&rarr;  <i>dbID</i></code></dt>
<dd><a name="993958"> </a>Database ID of the database that contains the executable module.</dd>

<dt><a name="993964"> </a><code>&rarr;  <i>rsrcID</i></code></dt>
<dd><a name="1000879"> </a>ID number of the resources in the database that contain the code, data and relocation information of the executable module.</dd>

<dt><a name="1000880"> </a><code>&larr;  <i>infoP</i></code></dt>
<dd><a name="1010626"> </a>Pointer to a <a href="Loader.html#993002"><code>SysModuleInfoType</code></a> structure into which the module information is written.</dd>

</dl>
<h4>
  <a name="993972"> </a>Returns 
</h4>

<p><a name="1000933"> </a>Returns <code>errNone</code> if the operation completed successfully, or one of the following otherwise:</p>

<dl>
<dt><a name="1000934"> </a><code>sysErrModuleNotFound</code></dt>
<dd><a name="1000935"> </a>Module not found.</dd>

<dt><a name="1000936"> </a><code>sysErrModuleInvalid</code></dt>
<dd><a name="1010619"> </a>Code resource has an invalid or corrupted format.</dd>

</dl>
<h4>
  <a name="1000938"> </a>Comments 
</h4>

<p><a name="1010615"> </a>This function is usually called by a client to get information about an executable module before actually loading it. The information returned includes the module's revision number, the total number of exported entries, and the size of the module's data segment.</p>
<h4>
  <a name="993982"> </a>See Also 
</h4>

<p><a name="993985"> </a><a href="Loader.html#993500"><code>SysGetModuleDatabase()</code></a>, <a href="Loader.html#993871"><code>SysGetModuleInfo()</code></a>, <a href="Loader.html#994673"><code>SysLoadModuleByDatabaseID()</code></a></p>

<h3 class="hbH3">
  <a name="994041"> </a>SysGetRefNum Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994046"> </a>Purpose 
</h4>

<p><a name="994053"> </a>Retrieve the reference number of the calling module.</p>
<h4>
  <a name="994063"> </a>Declared In 
</h4>
<code>Loader.h<a name="994084"> </a></code><h4>
  <a name="994108"> </a>Prototype 
</h4>
<pre class="proto"><a name="994135"></a>uint32_t SysGetRefNum (
   void
)
</pre>
<h4>
  <a name="994161"> </a>Parameters 
</h4>

<p><a name="994188"> </a>None.</p>
<h4>
  <a name="994214"> </a>Returns 
</h4>

<p><a name="994241"> </a>Reference number of the calling module.</p>
<h4>
  <a name="994243"> </a>Comments 
</h4>

<p><a name="1026801"> </a>This function is often used along with <a href="Loader.html#993500"><code>SysGetModuleDatabase()</code></a> to retrieve information about the database that contains the calling module. The reference number returned by this function has the same value that was returned by <a href="Loader.html#1026808"><code>SysLoadModule()</code></a> when the module was loaded.</p>

<h3 class="hbH3">
  <a name="1026808"> </a>SysLoadModule Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994614"> </a>Purpose 
</h4>

<p><a name="994617"> </a>Load an executable module and make it ready for execution in the calling process, given the type and creator of the database that contains the executable module and the resource ID of the resource containing the executable module.</p>
<h4>
  <a name="994619"> </a>Declared In 
</h4>
<code>Loader.h<a name="994622"> </a></code><h4>
  <a name="994624"> </a>Prototype 
</h4>
<pre class="proto"><a name="994627"></a>status_t SysLoadModule (
   uint32_t <code class="par">dbType</code>,
   uint32_t <code class="par">dbCreator</code>,
   uint16_t <code class="par">rsrcID</code>,
   uint32_t <code class="par">flags</code>,
   uint32_t <code class="par">*refNumP</code>
)
</pre>
<h4>
  <a name="994629"> </a>Parameters 
</h4>

<dl>
<dt><a name="994632"> </a><code>&rarr;  <i>dbType</i></code></dt>
<dd><a name="994634"> </a>Type of the database that contains the executable module.</dd>

<dt><a name="994636"> </a><code>&rarr;  <i>dbCreator</i></code></dt>
<dd><a name="994638"> </a>Creator ID of the database that contains the executable module.</dd>

<dt><a name="994640"> </a><code>&rarr;  <i>rsrcID</i></code></dt>
<dd><a name="994642"> </a>ID number of the resources in the database that contain the code, data and relocation information for the executable module.</dd>

<dt><a name="994644"> </a><code>&rarr;  <i>flags</i></code></dt>
<dd><a name="995785"> </a>Bits set or cleared in this 32-bit word indicate specific requirements that must be met while loading the executable module. See the Comments section, below, for more information on this argument.</dd>

<dt><a name="994648"> </a><code>&larr;  <i>refNumP</i></code></dt>
<dd><a name="1007339"> </a>If the module is successfully loaded, the location to which this parameter points receives the reference number of the newly-loaded executable module.</dd>

</dl>
<h4>
  <a name="994652"> </a>Returns 
</h4>

<p><a name="994655"> </a>Returns <code>errNone</code> if the operation succeeded, or one of the following otherwise:</p>

<dl>
<dt><a name="996216"> </a><code>sysErrModuleNotFound</code></dt>
<dd><a name="996227"> </a>Module not found.</dd>

<dt><a name="996217"> </a><code>sysErrModuleInvalid</code></dt>
<dd><a name="996228"> </a>Code resource has an invalid or corrupted format.</dd>

<dt><a name="996218"> </a><code>sysErrInvalidSignature</code></dt>
<dd><a name="996229"> </a>Module found but has no valid signature.</dd>

<dt><a name="996219"> </a><code>sysErrNoFreeRAM</code></dt>
<dd><a name="1011429"> </a>There isn't enough free RAM to load the executable module.</dd>

<dt><a name="1020324"> </a><code>sysErrCPUArchitecture</code></dt>
<dd><a name="1020473"> </a>The program requires a different CPU architecture to run.</dd>

<dt><a name="1020350"> </a><code>sysErrOSVersion</code></dt>
<dd><a name="1020477"> </a>The program requires a higher version of the operating system in order to run.</dd>

<dt><a name="1020352"> </a><code>sysErrRAMModuleNotAllowed</code></dt>
<dd><a name="1020509"> </a>The program requires a higher version of the operating system in order to run.</dd>

<dt><a name="1020398"> </a><code>sysErrNoFreeResource</code></dt>
<dd><a name="1020448"> </a> </dd>

</dl>
<h4>
  <a name="994657"> </a>Comments 
</h4>

<p><a name="996234"> </a>A single resource database can contain multiple executable modules, each identified by a unique resource ID within that database. Each executable module is composed of several resources of different types, all of which have the same unique resource ID number within the containing database. The resource ID number is specified to pslib when the module is built. The same ID number should be specified when the executable is placed into the resource database (PRC file). By default, the resource ID number is zero.</p>

<p><a name="1006634"> </a>Set the <code class="par">flags</code> argument to 0 if the code has no special security requirements. A value of zero instructs the program loader to perform verification of digital signatures on the executable program according to the security property of the calling process.  If the digital signature verification fails, the program loader doesn't load the program; <code>sysErrInvalidSignature</code> is returned to the caller. </p>

<p><a name="1006743"> </a>Set the flags argument to <code>sysDoNotVerifySignature</code> to prevent the program loader from performing any verification of the executable module's digital signature, even if the security property of the calling process requires that the signature be verified. This is useful for certain type of applications&#8212;like web browsers&#8212;that have their own ways of verifying the integrity of downloaded programs. </p>

<div><hr>
  <a name="1020775"> </a> <b>NOTE: </b> If there are multiple versions of the same database, the newest will be loaded. 
<hr>
</div>

<p><a name="996236"> </a>If <code>SysLoadModule()</code> is successful, once the loaded module is no longer needed call <a href="Loader.html#994859"><code>SysUnloadModule()</code></a> to unload the executable module.</p>
<h4>
  <a name="994662"> </a>See Also 
</h4>

<p><a name="994671"> </a><a href="Loader.html#993446"><code>SysGetEntryAddresses()</code></a>, <a href="Loader.html#993871"><code>SysGetModuleInfo()</code></a>, <a href="Loader.html#994673"><code>SysLoadModuleByDatabaseID()</code></a>, <a href="Loader.html#994859"><code>SysUnloadModule()</code></a></p>

<h3 class="hbH3">
  <a name="994673"> </a>SysLoadModuleByDatabaseID Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994702"> </a>Purpose 
</h4>

<p><a name="996336"> </a>Load an executable module and make it ready for execution in the calling process, given the database ID of the database that contains the executable module.</p>
<h4>
  <a name="994707"> </a>Declared In 
</h4>
<code>Loader.h<a name="994710"> </a></code><h4>
  <a name="994712"> </a>Prototype 
</h4>
<pre class="proto"><a name="994715"></a>status_t SysLoadModuleByDatabaseID (
   DatabaseID <code class="par">dbID</code>,
   uint16_t <code class="par">rsrcID</code>,
   uint32_t <code class="par">flags</code>,
   uint32_t <code class="par">*refNumP</code>
)
</pre>
<h4>
  <a name="994717"> </a>Parameters 
</h4>

<dl>
<dt><a name="994720"> </a><code>&rarr;  <i>dbID</i></code></dt>
<dd><a name="994722"> </a>Database ID of database that contains the executable module.</dd>

<dt><a name="994724"> </a><code>&rarr;  <i>rsrcID</i></code></dt>
<dd><a name="996358"> </a>ID number of the resources in the database that contain the code, data and relocation information for the executable module.</dd>

<dt><a name="994728"> </a><code>&rarr;  <i>flags</i></code></dt>
<dd><a name="1007094"> </a>Bits set or cleared in this 32-bit word indicate specific requirements that must be met while loading the executable module. See the Comments section under <a href="Loader.html#1026808"><code>SysLoadModule()</code></a> for more information on this argument.</dd>

<dt><a name="994732"> </a><code>&larr;  <i>refNumP</i></code></dt>
<dd><a name="996507"> </a>If the module is successfully loaded, the location to which this parameter points receives the reference number of the newly-loaded executable module.</dd>

</dl>
<h4>
  <a name="994736"> </a>Returns 
</h4>

<p><a name="996523"> </a>Returns <code>errNone</code> if the operation succeeded, or one of the following otherwise:</p>

<dl>
<dt><a name="996524"> </a><code>sysErrModuleNotFound</code></dt>
<dd><a name="996525"> </a>Module not found.</dd>

<dt><a name="996526"> </a><code>sysErrModuleInvalid</code></dt>
<dd><a name="1011421"> </a>Code resource has an invalid or corrupted format.</dd>

<dt><a name="996528"> </a><code>sysErrInvalidSignature</code></dt>
<dd><a name="996529"> </a>Module found but has no valid signature.</dd>

<dt><a name="996530"> </a><code>sysErrNoFreeRAM</code></dt>
<dd><a name="996531"> </a>There isn't enough free RAM to load the executable module.</dd>

<dt><a name="1020821"> </a><code>sysErrCPUArchitecture</code></dt>
<dd><a name="1020822"> </a>The program requires a different CPU architecture to run.</dd>

<dt><a name="1020823"> </a><code>sysErrOSVersion</code></dt>
<dd><a name="1020824"> </a>The program requires a higher version of the operating system in order to run.</dd>

<dt><a name="1020825"> </a><code>sysErrRAMModuleNotAllowed</code></dt>
<dd><a name="1020826"> </a>The program requires a higher version of the operating system in order to run.</dd>

<dt><a name="1020827"> </a><code>sysErrNoFreeResource</code></dt>
<dd><a name="1020828"> </a> </dd>

</dl>
<h4>
  <a name="994741"> </a>Comments 
</h4>

<p><a name="994744"> </a>This function performs the same operation as <a href="Loader.html#1026808"><code>SysLoadModule()</code></a> except that it takes a database ID as input to identify the containing database of the executable module. This function is often used to load plug-ins. </p>

<p><a name="1020894"> </a>See the <code>SysLoadModule()</code> function's Comments section for additional information on the loading of executable modules.</p>
<h4>
  <a name="994746"> </a>See Also 
</h4>

<p><a name="994749"> </a><a href="Loader.html#993933"><code>SysGetModuleInfoByDatabaseID()</code></a>, <a href="Loader.html#1026808"><code>SysLoadModule()</code></a>, <a href="Loader.html#994859"><code>SysUnloadModule()</code></a></p>

<h3 class="hbH3">
  <a name="994809"> </a>SysRegisterPatch Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994814"> </a>Purpose 
</h4>

<p><a name="994817"> </a>Register a patch that is not packaged in a resource database of type <code>'apch'</code>.</p>
<h4>
  <a name="994819"> </a>Declared In 
</h4>
<code>Loader.h<a name="994822"> </a></code><h4>
  <a name="994824"> </a>Prototype 
</h4>
<pre class="proto"><a name="994827"></a>status_t SysRegisterPatch (
   uint32_t <code class="par">type</code>,
   uint32_t <code class="par">creator</code>,
   uint16_t <code class="par">rsrcID</code>
)
</pre>
<h4>
  <a name="994829"> </a>Parameters 
</h4>

<dl>
<dt><a name="994832"> </a><code>&rarr;  <i>type</i></code></dt>
<dd><a name="994834"> </a>Type of the database that contains the patch.</dd>

<dt><a name="994836"> </a><code>&rarr;  <i>creator</i></code></dt>
<dd><a name="994838"> </a>Creator ID of the database that contains the patch.</dd>

<dt><a name="994840"> </a><code>&rarr;  <i>rsrcID</i></code></dt>
<dd><a name="994842"> </a>ID number of the resource in the database that contains the patch. </dd>

</dl>
<h4>
  <a name="994844"> </a>Returns 
</h4>

<p><a name="997396"> </a>Returns <code>errNone</code> if the operation succeeded, or one of the following otherwise:</p>

<dl>
<dt><a name="997397"> </a><code>sysErrModuleNotFound</code></dt>
<dd><a name="997423"> </a>Patch not found.</dd>

<dt><a name="997398"> </a><code>sysErrModuleInvalid</code></dt>
<dd><a name="997424"> </a>Patch resources have invalid or corrupted format.</dd>

<dt><a name="997399"> </a><code>sysErrNoFreeRAM</code></dt>
<dd><a name="997425"> </a>There isn't enough free RAM to register the patch.</dd>

</dl>
<h4>
  <a name="994854"> </a>See Also 
</h4>

<p><a name="994857"> </a><a href="Loader.html#995173"><code>SysUnregisterPatch()</code></a></p>

<h3 class="hbH3">
  <a name="994859"> </a>SysUnloadModule Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994864"> </a>Purpose 
</h4>

<p><a name="994867"> </a>Unload an executable module and free resources that were allocated when it was loaded.</p>
<h4>
  <a name="994869"> </a>Declared In 
</h4>
<code>Loader.h<a name="994872"> </a></code><h4>
  <a name="994874"> </a>Prototype 
</h4>
<pre class="proto"><a name="994903"></a>status_t SysUnloadModule (
   uint32_t <code class="par">refNum</code>
)
</pre>
<h4>
  <a name="994935"> </a>Parameters 
</h4>

<dl>
<dt><a name="994988"> </a><code>&rarr;  <i>refNum</i></code></dt>
<dd><a name="995044"> </a>Reference number of the executable module returned by a former call to <a href="Loader.html#1026808"><code>SysLoadModule()</code></a>.</dd>

</dl>
<h4>
  <a name="995102"> </a>Returns 
</h4>

<p><a name="996745"> </a>Returns <code>errNone</code> if the operation succeeded, or <code>sysErrParamErr</code> if <code class="par">refNum</code> doesn't refer to a loaded shared library.</p>
<h4>
  <a name="995168"> </a>See Also 
</h4>

<p><a name="995171"> </a><a href="Loader.html#1026808"><code>SysLoadModule()</code></a>, <a href="Loader.html#994673"><code>SysLoadModuleByDatabaseID()</code></a></p>

<h3 class="hbH3">
  <a name="995173"> </a>SysUnregisterPatch Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995178"> </a>Purpose 
</h4>

<p><a name="1000388"> </a>Unregister a patch that was registered with <a href="Loader.html#994809"><code>SysRegisterPatch()</code></a>.</p>
<h4>
  <a name="995183"> </a>Declared In 
</h4>
<code>Loader.h<a name="995186"> </a></code><h4>
  <a name="995188"> </a>Prototype 
</h4>
<pre class="proto"><a name="995191"></a>status_t SysUnregisterPatch (
   uint32_t <code class="par">type</code>,
   uint32_t <code class="par">creator</code>,
   uint16_t <code class="par">rsrcID</code>
)
</pre>
<h4>
  <a name="995193"> </a>Parameters 
</h4>

<dl>
<dt><a name="1000375"> </a><code>&rarr;  <i>type</i></code></dt>
<dd><a name="1000376"> </a>Type of the database that contains the patch.</dd>

<dt><a name="1000377"> </a><code>&rarr;  <i>creator</i></code></dt>
<dd><a name="1000378"> </a>Creator ID of the database that contains the patch.</dd>

<dt><a name="1000379"> </a><code>&rarr;  <i>rsrcID</i></code></dt>
<dd><a name="1000380"> </a>ID number of the resource in the database that contains the patch. </dd>

</dl>
<h4>
  <a name="995208"> </a>Returns 
</h4>

<p><a name="1000415"> </a>Returns <code>errNone</code> if the operation succeeded, or one of the following otherwise:</p>

<dl>
<dt><a name="1000416"> </a><code>sysErrModuleNotFound</code></dt>
<dd><a name="1000417"> </a>Patch not found.</dd>

<dt><a name="1000420"> </a><code>sysErrNoFreeRAM</code></dt>
<dd><a name="1000421"> </a>Out of free RAM while unregistering the patch.</dd>

</dl>
<h4>
  <a name="995218"> </a>See Also 
</h4>

<p><a name="995221"> </a><a href="Loader.html#994809"><code>SysRegisterPatch()</code></a></p>

<h2 class="haH2">
  <a name="995223"> </a>Application-Defined Functions <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="995255"> </a>SysMainEntryPtrType Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995260"> </a>Purpose 
</h4>

<p><a name="995277"> </a>The prototype of the main entry point of any executable module.</p>
<h4>
  <a name="995298"> </a>Declared In 
</h4>
<code>Loader.h<a name="995335"> </a></code><h4>
  <a name="995375"> </a>Prototype 
</h4>
<pre class="proto"><a name="995418"></a>uint32_t (
   *SysMainEntryPtrType
) (
   uint16_t <code class="par">cmd</code>,
   MemPtr <code class="par">cmdPBP</code>,
   uint16_t <code class="par">launchFlags</code>
)
</pre>
<h4>
  <a name="995480"> </a>Parameters 
</h4>

<dl>
<dt><a name="995523"> </a><code>&rarr;  <i>cmd</i></code></dt>
<dd><a name="1000505"> </a>The launch code to which your executable module is to respond. See <a href="../Programming_Basics/AppStartAndStop.html#971704">Chapter 2, "Application Start and Stop,"</a> of <i>Exploring Palm OS: Programming Basics </i>for a list of predefined launch codes.</dd>

<dt><a name="995607"> </a><code>&rarr;  <i>cmdPBP</i></code></dt>
<dd><a name="1000466"> </a>A pointer to a structure containing any launch command-specific parameters, or <code>NULL</code> if the launch code has none. See the description of each launch code for a description of the parameter structure that accompanies it, if any.</dd>

<dt><a name="995651"> </a><code>&rarr;  <i>launchFlags</i></code></dt>
<dd><a name="1000482"> </a>Flags that indicate whether your application is now the active application, whether it already was the active application, and so on. See <a href="../Programming_Basics/CmnLaunchCodes.html#993791">"Launch Flags"</a> of <i>Exploring Palm OS: Programming Basics </i>for a list of launch flags.</dd>

</dl>
<h4>
  <a name="995655"> </a>Returns 
</h4>

<p><a name="1000609"> </a>Your executable module should return <code>errNone</code> if your application processed the launch code successfully of if the launch code is not recognized. Return an appropriate error code for recognized launch codes if there was a problem. When application invokes your executable module using <a href="../Programming_Basics/AppMgr.html#995070"><code>SysAppLaunch()</code></a>, the value you return from this function is returned to the caller.</p>
<h4>
  <a name="995660"> </a>Comments 
</h4>

<p><a name="1000655"> </a>See <a href="../Programming_Basics/AppStartAndStop.html#971704">Chapter 2, "Application Start and Stop,"</a> of <i>Exploring Palm OS: Programming Basics</i> for a discussion on how applications receive and handle launch codes, with examples.</p>

<p><a name="992930"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="SysMgt_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="SysMgt_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="HostControl.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Patch.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SysMgt_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>