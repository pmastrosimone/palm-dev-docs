<html>
<head>
<title>(Protein) Patch | System Management</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:27:47">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="992934"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="SysMgt_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Loader.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PerfDriver.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SysMgt_IX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">31 &nbsp;&nbsp;
Patch</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">System Management</p>
<p class="SubTitle">Exploring Palm OS&#174; </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="SysMgt_Part2.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="Patch.html">31  Patch</a></h1>

   <h2 class="SideTOC2"><a href="#992942">
   Patch Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#992950">
      SysPatchEntryNumType</a></h3>

      <h3 class="SideTOC3"><a href="#992975">
      SysPatchTargetHeaderType</a></h3>

   <h2 class="SideTOC2"><a href="#993071">
   Patch Constants</a></h2>

      <h3 class="SideTOC3"><a href="#993095">
      Patch Flags</a></h3>

      <h3 class="SideTOC3"><a href="#992930">
      Miscellaneous Patch Constants</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="992936"> </a>This chapter describes APIs that you use to create patches to augment or replace one or more shared library functions. The material in this chapter is organized into the following sections:</p>
   <blockquote class = "bq"><a name="992948"> </a><a href="Patch.html#992942">Patch Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="993077"> </a><a href="Patch.html#993071">Patch Constants</a></blockquote>

<p><a name="992938"> </a>The header file <code>Patch.h</code> declares the API that this chapter describes.</p>

<p><a name="992940"> </a>For instructions on using these APIs to patch a shared library, see <a href="SharedLibraries.html#608590">Chapter 6, "Shared Libraries."</a></p>

<h2 class="haH2">
  <a name="992942"> </a>Patch Structures and Types <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="992950"> </a>SysPatchEntryNumType Typedef <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="992955"> </a>Purpose 
</h4>

<p><a name="992958"> </a>Container for a shared library vector table entry number.</p>
<h4>
  <a name="992960"> </a>Declared In 
</h4>
<code>Patch.h<a name="992963"> </a></code><h4>
  <a name="992965"> </a>Prototype 
</h4>
<pre class="proto"><a name="992968"></a>typedef uint32_t SysPatchEntryNumType
</pre>
<h4>
  <a name="992970"> </a>Comments 
</h4>

<p><a name="992973"> </a>The <a href="Patch.html#992975"><code>SysPatchTargetHeaderType</code></a> structure is followed by one or more values of this type, indicating the shared library functions that are being patched.</p>

<h3 class="hbH3">
  <a name="992975"> </a>SysPatchTargetHeaderType Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="992980"> </a>Purpose 
</h4>

<p><a name="992983"> </a>Patch header, identifying the shared library being patched and the number of entry points in that shared library that are being patched.</p>
<h4>
  <a name="992985"> </a>Declared In 
</h4>
<code>Patch.h<a name="992988"> </a></code><h4>
  <a name="992990"> </a>Prototype 
</h4>
<pre class="proto"><a name="992993"></a>typedef struct SysPatchTargetHeaderType {
   uint32_t type;
   uint32_t creator;
   uint16_t rsrcID;
   uint16_t flags;
   uint32_t numEntries;
} SysPatchTargetHeaderType
</pre>
<h4>
  <a name="992995"> </a>Fields 
</h4>

<dl>
<dt><a name="992998"> </a><code>type</code></dt>
<dd><a name="993145"> </a>Type of the shared library to patch.</dd>

<dt><a name="993002"> </a><code>creator</code></dt>
<dd><a name="993052"> </a>Creator ID of the shared library to patch.</dd>

<dt><a name="993054"> </a><code>rsrcID</code></dt>
<dd><a name="993056"> </a>Resource ID of the shared library to patch.</dd>

<dt><a name="993058"> </a><code>flags</code></dt>
<dd><a name="993291"> </a>Zero&#8212;indicating that the patch can occur at any position within the patch call chain&#8212;or one of the <a href="Patch.html#993095">Patch Flags</a> to request that the patch be placed at the head or the tail of the patch call chain.</dd>

<dt><a name="993062"> </a><code>numEntries</code></dt>
<dd><a name="993284"> </a>Total number of entry points being patched.</dd>

</dl>
<h4>
  <a name="993443"> </a>Comments 
</h4>

<p><a name="993445"> </a>This structure should be followed immediately by one or more <a href="Patch.html#992950"><code>SysPatchEntryNumType</code></a> values (the number of values is specified in the <code>SysPatchTargetHeaderType</code> structure's <code>numEntries</code> field). Each value is an entry number in the shared library's vector table and indicates a function that is being patched. The order in which these vector table entry numbers occur must match the patch's exports as defined in the patch's Shared Library Definition (SLD) file, and the values must appear in the order of increasing entry numbers.</p>

<h2 class="haH2">
  <a name="993071"> </a>Patch Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="993095"> </a>Patch Flags <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993097"> </a>Purpose 
</h4>

<p><a name="993100"> </a>Indicate how the patch should be inserted into the patch chain.</p>
<h4>
  <a name="993102"> </a>Declared In 
</h4>
<code>Patch.h<a name="993105"> </a></code><h4>
  <a name="993107"> </a>Constants 
</h4>

<dl>
<dt><a name="993110"> </a><code>#define patchFlagHead ((uint16_t)0x0001)</code></dt>
<dd><a name="993112"> </a>The patch should be placed at the head of the patch call chain.</dd>

<dt><a name="993118"> </a><code>#define patchFlagTail ((uint16_t)0x0002)</code></dt>
<dd><a name="993124"> </a>The patch should be placed at the tail of the patch call chain.</dd>

</dl>
<h4>
  <a name="993613"> </a>Comments 
</h4>

<p><a name="993616"> </a>Note that just because you request that a patch be placed at the head or tail of the patch call chain, there is no guarantee that your patch will actually be placed there. The operating system provides no mechanism to arbitrate between two patches that patch the same shared library function and that both need to be at the head or tail of the patch call chain.</p>

<h3 class="hbH3">
  <a name="992930"> </a>Miscellaneous Patch Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993308"> </a>Purpose 
</h4>

<p><a name="993310"> </a><code>Patch.h</code> also defines the following constants.</p>
<h4>
  <a name="993314"> </a>Declared In 
</h4>
<code>Patch.h<a name="993316"> </a></code><h4>
  <a name="993318"> </a>Constants 
</h4>

<dl>
<dt><a name="993332"> </a><code>#define patchFlagReservedMask ((uint16_t)0xfffc)</code></dt>
<dd><a name="993333"> </a>A mask that isolates those <a href="Patch.html#992975"><code>SysPatchTargetHeaderType</code></a> flags that are reserved for system use.</dd>

<dt><a name="993320"> </a><code></code></dt>
</dl>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="SysMgt_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="SysMgt_TOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Loader.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="PerfDriver.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SysMgt_IX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>