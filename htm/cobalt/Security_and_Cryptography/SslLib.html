<html>
<head>
<title>(Protein) SSL Library | Security and Cryptography</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource_HTML_2003 20041101">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks AutoMap 2003 for FrameMaker 8.0.6.2138">
<META NAME="LASTUPDATED" CONTENT="11/22/04 11:25:07">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="992934"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="SecurityAndCryptographyTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SignVfy.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SslLibMac.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SecurityAndCryptographyIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">16 &nbsp;&nbsp;
SSL Library</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Security and Cryptography</p>
<p class="SubTitle">Exploring Palm OS </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="SecurityAndCrypto_Part2.html">Part II: Reference</a> </h1>
<h1 class="SideTOC1"><a href="SslLib.html">16  SSL Library</a></h1>

   <h2 class="SideTOC2"><a href="#1070552">
   SSL Library Structures and Types</a></h2>

      <h3 class="SideTOC3"><a href="#1070555">
      SslAttribute</a></h3>

      <h3 class="SideTOC3"><a href="#1070952">
      SslCallback</a></h3>

      <h3 class="SideTOC3"><a href="#1032140">
      SslCipherSuiteInfo</a></h3>

      <h3 class="SideTOC3"><a href="#993561">
      SslContext</a></h3>

      <h3 class="SideTOC3"><a href="#993591">
      SslIoBuf</a></h3>

      <h3 class="SideTOC3"><a href="#993651">
      SslLib</a></h3>

      <h3 class="SideTOC3"><a href="#993681">
      SslSession</a></h3>

      <h3 class="SideTOC3"><a href="#993753">
      SslSocket</a></h3>

   <h2 class="SideTOC2"><a href="#993809">
   SSL Library Constants</a></h2>

      <h3 class="SideTOC3"><a href="#1017733">
      SSL Open Mode Flags</a></h3>

      <h3 class="SideTOC3"><a href="#1024134">
      SSL Close Mode Flags</a></h3>

      <h3 class="SideTOC3"><a href="#1063983">
      Mode Attribute Values</a></h3>

      <h3 class="SideTOC3"><a href="#1064597">
      Protocol Versions</a></h3>

      <h3 class="SideTOC3"><a href="#1081281">
      Protocol Variants</a></h3>

      <h3 class="SideTOC3"><a href="#1063094">
      Compatibility Flags</a></h3>

      <h3 class="SideTOC3"><a href="#1033557">
      SSL Callback Commands</a></h3>

      <h3 class="SideTOC3"><a href="#1040638">
      Cipher Suite Info Constants</a></h3>

      <h3 class="SideTOC3"><a href="#1061544">
      Cipher Suites</a></h3>

      <h3 class="SideTOC3"><a href="#1082978">
      Ciphers</a></h3>

      <h3 class="SideTOC3"><a href="#1045420">
      Info Callbacks</a></h3>

      <h3 class="SideTOC3"><a href="#1053886">
      InfoInterest Values</a></h3>

      <h3 class="SideTOC3"><a href="#1056085">
      LastApi Attribute Values</a></h3>

      <h3 class="SideTOC3"><a href="#1056149">
      LastIO Attribute Values</a></h3>

      <h3 class="SideTOC3"><a href="#1049864">
      SSL Protocol States</a></h3>

      <h3 class="SideTOC3"><a href="#1043321">
      SSL Server Alerts</a></h3>

      <h3 class="SideTOC3"><a href="#1001053">
      SSL Library Errors</a></h3>

      <h3 class="SideTOC3"><a href="#1067085">
      Miscellaneous SSL Library Constants	</a></h3>

   <h2 class="SideTOC2"><a href="#994641">
   SSL Library Functions</a></h2>

      <h3 class="SideTOC3"><a href="#994649">
      SslClose</a></h3>

      <h3 class="SideTOC3"><a href="#994860">
      SslConsume</a></h3>

      <h3 class="SideTOC3"><a href="#994934">
      SslContextCreate</a></h3>

      <h3 class="SideTOC3"><a href="#995004">
      SslContextDestroy</a></h3>

      <h3 class="SideTOC3"><a href="#995046">
      SslContextGetLong</a></h3>

      <h3 class="SideTOC3"><a href="#995388">
      SslContextGetPtr</a></h3>

      <h3 class="SideTOC3"><a href="#995438">
      SslContextSetLong</a></h3>

      <h3 class="SideTOC3"><a href="#995492">
      SslContextSetPtr</a></h3>

      <h3 class="SideTOC3"><a href="#995570">
      SslFlush</a></h3>

      <h3 class="SideTOC3"><a href="#995640">
      SslLibClose</a></h3>

      <h3 class="SideTOC3"><a href="#995680">
      SslLibCreate</a></h3>

      <h3 class="SideTOC3"><a href="#995806">
      SslLibDestroy</a></h3>

      <h3 class="SideTOC3"><a href="#995848">
      SslLibGetLong</a></h3>

      <h3 class="SideTOC3"><a href="#995946">
      SslLibGetPtr</a></h3>

      <h3 class="SideTOC3"><a href="#995996">
      SslLibName</a></h3>

      <h3 class="SideTOC3"><a href="#996079">
      SslLibOpen</a></h3>

      <h3 class="SideTOC3"><a href="#996143">
      SslLibSetLong</a></h3>

      <h3 class="SideTOC3"><a href="#1004704">
      SslLibSetPtr</a></h3>

      <h3 class="SideTOC3"><a href="#996327">
      SslLibSleep</a></h3>

      <h3 class="SideTOC3"><a href="#996367">
      SslLibWake</a></h3>

      <h3 class="SideTOC3"><a href="#996623">
      SslOpen</a></h3>

      <h3 class="SideTOC3"><a href="#996673">
      SslPeek</a></h3>

      <h3 class="SideTOC3"><a href="#997001">
      SslRead</a></h3>

      <h3 class="SideTOC3"><a href="#997059">
      SslReceive</a></h3>

      <h3 class="SideTOC3"><a href="#997133">
      SslSend</a></h3>

      <h3 class="SideTOC3"><a href="#997207">
      SslWrite</a></h3>

   <h2 class="SideTOC2"><a href="#997261">
   Application-Defined Functions</a></h2>

      <h3 class="SideTOC3"><a href="#997269">
      SslCallbackFunc</a></h3>

</div>
</td>

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>

<!--END SIDETOC-->

<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="992936"> </a>This chapter contains reference documentation for the APIs defined in <code>SslLib.h</code>. The contents of this chapter are organized into the following sections:</p>
   <blockquote class = "bq"><a name="992948"> </a><a href="SslLib.html#1070552">SSL Library Structures and Types</a></blockquote>
   <blockquote class = "bq"><a name="993815"> </a><a href="SslLib.html#993809">SSL Library Constants</a></blockquote>
   <blockquote class = "bq"><a name="994647"> </a><a href="SslLib.html#994641">SSL Library Functions</a></blockquote>
   <blockquote class = "bq"><a name="997267"> </a><a href="SslLib.html#997261">Application-Defined Functions</a></blockquote>

<p><a name="1070543"> </a>The header file <code>SslLib.h</code> declares the API that this chapter describes.</p>

<p><a name="1070544"> </a>For information on making use of the APIs documented in this chapter, see <a href="SslConcepts.html#992934">Chapter 2, "SSL Concepts."</a> Much of what you do when working with the SSL library involves working with attributes; reference documentation for the macros that you use to set and get attribute values can be found in <a href="SslLibMac.html#992934">Chapter 17, "SSL Library Macros."</a></p>

<h2 class="haH2">
  <a name="1070552"> </a>SSL Library Structures and Types <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1070555"> </a>SslAttribute Typedef <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="992955"> </a>Purpose 
</h4>

<p><a name="992958"> </a>Container for an SslLib or SslContext attribute value.</p>
<h4>
  <a name="992960"> </a>Declared In 
</h4>
<code>SslLib.h<a name="992963"> </a></code><h4>
  <a name="992965"> </a>Prototype 
</h4>
<pre class="proto"><a name="992968"></a>typedef uint32_t SslAttribute
</pre>
<h4>
  <a name="1070942"> </a>Comments 
</h4>

<p><a name="1070945"> </a>Attribute values are listed in <a href="SslLibMac.html#1200049">"SSL Library Macro Constants."</a> Descriptions of each attribute can be found under <a href="SslConcepts.html#1068467">"Attributes."</a></p>

<h3 class="hbH3">
  <a name="1070952"> </a>SslCallback Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="992980"> </a>Purpose 
</h4>

<p><a name="992983"> </a>Structure used when the SSL library transfers control back to the application via a callback function.</p>
<h4>
  <a name="992985"> </a>Declared In 
</h4>
<code>SslLib.h<a name="992988"> </a></code><h4>
  <a name="992990"> </a>Prototype 
</h4>
<pre class="proto"><a name="1031684"></a>struct SslCallback_st {
   void *reserved;
   SslCallbackFunc callback;
   void *data;
   SslContext *ssl;
} 
</pre>
<pre class="proto"><a name="992993"></a>typedef struct SslCallback_st SslCallback
</pre>
<h4>
  <a name="1031956"> </a>Fields 
</h4>

<dl>
<dt><a name="1031957"> </a><code>reserved</code></dt>
<dd><a name="1031958"> </a>Reserved for internal use by SslLib. </dd>

<dt><a name="1031959"> </a><code>callback</code></dt>
<dd><a name="1031960"> </a>A function pointer of the function to be called. See <a href="SslLib.html#997269"><code>SslCallbackFunc()</code></a>.</dd>

<dt><a name="1031961"> </a><code>data</code></dt>
<dd><a name="1031962"> </a>Can be set to a value by the application, and will remain unchanged by SslLib. This value will then be available to the callback function. Use this field to communicate context information from the application to the callback. An example of its use is in a 'diagnostic' callback, in which the application could use this field to provide a handle to the logging routines to be used. </dd>

<dt><a name="1031963"> </a><code>ssl</code></dt>
<dd><a name="1031964"> </a>SslLib sets this field to be the <a href="SslLib.html#993561"><code>SslContext</code></a> if the callback is related to an SslContext. If it is not (due to being related to a SslLib), it is set to <code>NULL</code>.</dd>

</dl>
<h4>
  <a name="1032136"> </a>Comments 
</h4>

<p><a name="1032137"> </a>This structure is used when the SSL library transfers control back to the application via a callback. A callback is a function that the application supplies to SslLib that will be called when specific situations occur during the SSL protocol. The callbacks are specific to the particular SslContext or SslLib they are registered with. Examples of callbacks used by the SslLib are an 'information' callback and a 'certificate validation' callback.</p>

<h3 class="hbH3">
  <a name="1032140"> </a>SslCipherSuiteInfo Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993258"> </a>Purpose 
</h4>

<p><a name="993261"> </a>Encapsulates information about the current cipher suite.</p>
<h4>
  <a name="993263"> </a>Declared In 
</h4>
<code>SslLib.h<a name="993266"> </a></code><h4>
  <a name="993268"> </a>Prototype 
</h4>
<pre class="proto"><a name="993271"></a>typedef struct SslCipherSuiteInfo_st {
   uint8_t cipherSuite[2];
   uint16_t cipher;
   uint16_t digest;
   uint16_t keyExchange;
   uint16_t authentication;
   uint16_t version;
   uint16_t cipherBitLength;
   uint16_t cipherKeyLength;
   uint16_t keyExchangeLength;
   uint16_t authenticationLength;
   uint16_t exportCipher;
} SslCipherSuiteInfo
</pre>
<h4>
  <a name="993289"> </a>Fields 
</h4>

<dl>
<dt><a name="993342"> </a><code>cipherSuite</code></dt>
<dd><a name="993398"> </a>The two bye cipher suite value for the current cipher suite. See the <a href="SslConcepts.html#1072106"><code>CipherSuite</code></a> attribute for more details.</dd>

<dt><a name="993456"> </a><code>cipher</code></dt>
<dd><a name="1041279"> </a>A number indicating which cipher is being used for this connection. One of the <code>sslCsiCipher...</code> constants listed under <a href="SslLib.html#1040638">"Cipher Suite Info Constants."</a></dd>

<dt><a name="993516"> </a><code>digest</code></dt>
<dd><a name="993518"> </a>The digest value. One of the <code>sslCsiDigest...</code> constants listed under <a href="SslLib.html#1040638">"Cipher Suite Info Constants."</a></dd>

<dt><a name="993520"> </a><code>keyExchange</code></dt>
<dd><a name="993522"> </a>The key exchange type which was used. One of the <code>sslCsiKeyExch...</code> constants listed under <a href="SslLib.html#1040638">"Cipher Suite Info Constants."</a></dd>

<dt><a name="993524"> </a><code>authentication</code></dt>
<dd><a name="993526"> </a>The authentication type used. One of the <code>sslCsiAuth...</code> constants listed under <a href="SslLib.html#1040638">"Cipher Suite Info Constants."</a></dd>

<dt><a name="993528"> </a><code>version</code></dt>
<dd><a name="993530"> </a>The SSL version being used.</dd>

<dt><a name="993532"> </a><code>cipherBitLength</code></dt>
<dd><a name="993534"> </a>The number of bits of key material used for encryption key generation. For export ciphers this will be either 40 or 56 bits.</dd>

<dt><a name="993536"> </a><code>cipherKeyLength</code></dt>
<dd><a name="993538"> </a>The length of the key for the underlying cipher. For an export RC4 cipher, the <code>cipherBitLength</code> would be 40, but the <code>cipherKeyLength</code> would be 128. This is because while the SSL protocol would be using 128-bit keys to encrypt and decrypt with RC4, only 40 bits of random data would be used to generate the 128-bit key.</dd>

<dt><a name="993540"> </a><code>keyExchangeLength</code></dt>
<dd><a name="993542"> </a>The length in bits of the public key used to establish a shared secret.</dd>

<dt><a name="993544"> </a><code>authenticationLength</code></dt>
<dd><a name="993546"> </a>The length of the public key used to ensure the key exchange was not tampered with. For export ciphers, the <code>keyExchangeLength</code> is often shorter than the <code>authenticationLength</code>. </dd>

<dt><a name="993552"> </a><code>exportCipher</code></dt>
<dd><a name="993554"> </a>Set when an export cipher is being used.</dd>

</dl>
<h4>
  <a name="993556"> </a>Comments 
</h4>

<p><a name="993559"> </a>This structure differs from most others in that the application passes in a structure to be populated from the <a href="SslLib.html#993561"><code>SslContext</code></a>. Normally the <code>SslContext</code> returns a pointer to an internal data structure. </p>

<h3 class="hbH3">
  <a name="993561"> </a>SslContext Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993566"> </a>Purpose 
</h4>

<p><a name="993569"> </a>An opaque data structure that represents an SSL connection.</p>
<h4>
  <a name="993571"> </a>Declared In 
</h4>
<code>SslLib.h<a name="993574"> </a></code><h4>
  <a name="993576"> </a>Prototype 
</h4>
<pre class="proto"><a name="993579"></a>typedef struct SslContext_st SslContext
</pre>
<h4>
  <a name="993581"> </a>Fields 
</h4>

<p><a name="993584"> </a>None.</p>

<h3 class="hbH3">
  <a name="993591"> </a>SslIoBuf Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993596"> </a>Purpose 
</h4>

<p><a name="993599"> </a>Passed to the 'info' functions when I/O is being done.</p>
<h4>
  <a name="993601"> </a>Declared In 
</h4>
<code>SslLib.h<a name="993604"> </a></code><h4>
  <a name="993606"> </a>Prototype 
</h4>
<pre class="proto"><a name="993609"></a>typedef struct SslIoBuf_st {
   SslContext *ssl;
   uint8_t *ptr;
   uint32_t outNum;
   uint32_t inNum;
   uint32_t max;
   uint32_t err;
   uint32_t flags;
} SslIoBuf
</pre>
<h4>
  <a name="993611"> </a>Fields 
</h4>

<dl>
<dt><a name="993614"> </a><code>ssl</code></dt>
<dd><a name="993616"> </a>The SslContext for which this callback is being called from. It should be the same value that is held in the <a href="SslLib.html#1070952"><code>SslCallback</code></a> structure's <code>ssl</code> field.</dd>

<dt><a name="993618"> </a><code>ptr</code></dt>
<dd><a name="993620"> </a>The buffer being used to store the bytes. </dd>

<dt><a name="993622"> </a><code>outNum</code></dt>
<dd><a name="993624"> </a>The number of bytes read or written; it is 0 in the 'Before' states. </dd>

<dt><a name="993626"> </a><code>inNum</code></dt>
<dd><a name="993628"> </a>The number of bytes to be read or written. </dd>

<dt><a name="1035187"> </a><code>max</code></dt>
<dd><a name="1035217"> </a>The maximum read that could be performed.  <code>inNum</code> is the number of bytes that the SSL library needs right now, but <code>max</code> bytes could be read if they are available. Often the read operation will read more bytes than are needed, so the <code>outNum</code> field which returns the number of bytes read or written, can, for the read case, be larger than <code>inNum</code>. </dd>

<dt><a name="993638"> </a><code>err</code></dt>
<dd><a name="993640"> </a>In the 'After' <code class="par">argi</code> states, <code>err</code> will contain the error code from the I/O operation. If there was no error, it will be 0 (<code>errNone</code>). </dd>

<dt><a name="1035358"> </a><code>flags</code></dt>
<dd><a name="1035359"> </a>The flags field is not currently used and is set to zero.</dd>

</dl>
<h4>
  <a name="1035360"> </a>Comments 
</h4>

<p><a name="1035361"> </a>The 'Before' <code class="par">argi</code> values indicate that the passed <code>SslIoBuf</code> indicates the I/O operation about to be performed. The 'After' <code class="par">argi</code> values indicate that the <code>SslIoBuf</code> contains the results of the just-performed I/O operation. </p>

<h3 class="hbH3">
  <a name="993651"> </a>SslLib Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993656"> </a>Purpose 
</h4>

<p><a name="993659"> </a>An opaque data structure that represents the SSL library.</p>
<h4>
  <a name="993661"> </a>Declared In 
</h4>
<code>SslLib.h<a name="993664"> </a></code><h4>
  <a name="993666"> </a>Prototype 
</h4>
<pre class="proto"><a name="993669"></a>typedef struct SslLib_st SslLib
</pre>
<h4>
  <a name="993671"> </a>Fields 
</h4>

<p><a name="993674"> </a>None.</p>

<h3 class="hbH3">
  <a name="993681"> </a>SslSession Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993686"> </a>Purpose 
</h4>

<p><a name="993689"> </a>Holds all the security information associated with a particular SSL connection.</p>
<h4>
  <a name="993691"> </a>Declared In 
</h4>
<code>SslLib.h<a name="993694"> </a></code><h4>
  <a name="993696"> </a>Prototype 
</h4>
<pre class="proto"><a name="993699"></a>typedef struct SslSession_st {
   uint32_t length;
   uint16_t version;
   unsigned char cipherSuite[2];
   unsigned char compression;
   unsigned char sessionId[33];
   unsigned char masterSecret[48];
   unsigned char time[8];
   unsigned char timeout[4];
   uint16_t certificateOffset;
   uint16_t extraData;
} SslSession
</pre>
<h4>
  <a name="993701"> </a>Fields 
</h4>

<dl>
<dt><a name="993704"> </a><code>length</code></dt>
<dd><a name="993706"> </a></dd>

<dt><a name="993708"> </a><code>version</code></dt>
<dd><a name="993710"> </a></dd>

<dt><a name="993712"> </a><code>cipherSuite</code></dt>
<dd><a name="993718"> </a>The cipher suite. One of the values listed under <a href="SslLib.html#1061544">"Cipher Suites."</a></dd>

<dt><a name="993720"> </a><code>compression</code></dt>
<dd><a name="993722"> </a></dd>

<dt><a name="993724"> </a><code>sessionId</code></dt>
<dd><a name="993726"> </a>The session ID. The first byte is the length.</dd>

<dt><a name="993728"> </a><code>masterSecret</code></dt>
<dd><a name="993730"> </a>Master secret.</dd>

<dt><a name="993732"> </a><code>time</code></dt>
<dd><a name="993734"> </a>Host-specific start time.</dd>

<dt><a name="993736"> </a><code>timeout</code></dt>
<dd><a name="993738"> </a>Timeout, in seconds.</dd>

<dt><a name="993740"> </a><code>certificateOffset</code></dt>
<dd><a name="1038873"> </a>Optional Peer certificate; this is the offset from the front of the structure to a <code>SslExtendedItems</code> structure. If the offset if 0, it does not exist</dd>

<dt><a name="993744"> </a><code>extraData</code></dt>
<dd><a name="1038917"> </a>Can be used to store anything, such as the host name of the peer. Application defined.</dd>

</dl>

<h3 class="hbH3">
  <a name="993753"> </a>SslSocket Struct <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="993758"> </a>Purpose 
</h4>

<p><a name="993761"> </a>The structure used to hold the arguments to be passed to any <code>sys/socket</code> calls.</p>
<h4>
  <a name="993763"> </a>Declared In 
</h4>
<code>SslLib.h<a name="993766"> </a></code><h4>
  <a name="993768"> </a>Prototype 
</h4>
<pre class="proto"><a name="993771"></a>typedef struct SslSocket_st {
   int32_t socket;
   uint16_t flags;
   uint16_t addrLen;
   status_t err;
   int32_t timeout;
   unsigned char addr[8];
} SslSocket
</pre>
<h4>
  <a name="993804"> </a>Comments 
</h4>

<p><a name="993807"> </a>When setting this structure, the <code>socket</code> field will not be copied in. To set the socket to use for network connections, see the Socket attribute. The <code>socket</code>, <code>flags</code>, <code>addrLen</code>, <code>err</code>, and <code>addr</code> fields all correspond to the arguments passed to <code>sendto()</code> and <code>recvfrom()</code>. Read further on those functions for more details. The <code>SslSocket</code> passed into the <a href="SslLib.html#993561"><code>SslContext</code></a> will be copied into the <code>SslContext</code>'s <code>SslSocket</code> structure and the <code>SslSocket</code> pointer returned refers to an internal <code>SslContext</code> data structure. When the application calls a function such as <a href="SslLib.html#997059"><code>SslReceive()</code></a>, the arguments passed to that function will overwrite the internal <code>SslSocket</code> values, so a subsequent call to <a href="SslLibMac.html#994932"><code>SslContextGet_IoStruct()</code></a> will return the newly updated fields.</p>

<h2 class="haH2">
  <a name="993809"> </a>SSL Library Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="1017733"> </a>SSL Open Mode Flags <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1017753"> </a>Purpose 
</h4>

<p><a name="1017931"> </a>Flags used to specify how the connection should be started when calling <a href="SslLib.html#996623"><code>SslOpen()</code></a>.</p>
<h4>
  <a name="1017951"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1017954"> </a></code><h4>
  <a name="1018033"> </a>Constants 
</h4>

<dl>
<dt><a name="1018231"> </a><code>#define sslOpenBufferedReuse 0x0040</code></dt>
<dd><a name="1018232"> </a>This is the same as <code>SslContextSet_BufferedReuse(ssl,1);</code></dd>

<dt><a name="1018234"> </a><code>#define sslOpenDelayHandshake 0x0080</code></dt>
<dd><a name="1018235"> </a>Do not perform the handshake now</dd>

<dt><a name="1018237"> </a><code>#define sslOpenModeClear 0x0001</code></dt>
<dd><a name="1018238"> </a>Turn off the SSL protocol.</dd>

<dt><a name="1018240"> </a><code>#define sslOpenModeSsl 0x0002</code></dt>
<dd><a name="1018241"> </a>Turn on the SSL protocol.</dd>

<dt><a name="1018243"> </a><code>#define sslOpenNewConnection 0x0004</code></dt>
<dd><a name="1018244"> </a>Perform a new SSL handshake, clearing any previous <code>SslSession</code> value. This is the same as  <code>SslContextSet_SslSession(ssl,NULL)</code>.</dd>

<dt><a name="1018246"> </a><code>#define sslOpenNoAutoFlush 0x0008</code></dt>
<dd><a name="1018247"> </a>This is the same as <code>SslContextSet_AutoFlush(ssl,0);</code></dd>

<dt><a name="1018249"> </a><code>#define sslOpenUseDefaultTimeout 0x0020</code></dt>
<dd><a name="1018250"> </a>Use the <code>SslContext</code> timeout value instead of timeout parameter.</dd>

</dl>

<h3 class="hbH3">
  <a name="1024134"> </a>SSL Close Mode Flags <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1024307"> </a>Purpose 
</h4>

<p><a name="1024310"> </a>Flags that allow you to specify how to perform the SSL Protocol shutdown when calling <a href="SslLib.html#994649"><code>SslClose()</code></a>.</p>
<h4>
  <a name="1024467"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1024634"> </a></code><h4>
  <a name="1024779"> </a>Constants 
</h4>

<dl>
<dt><a name="1024940"> </a><code>#define sslCloseDontSendShutdown 0x0001</code></dt>
<dd><a name="1025083"> </a>Do not send the SSL shutdown message to the server.</dd>

<dd><a name="1025084"> </a><code>SslContextSet_DontSendShutdown(ssl,1);</code></dd>

<dt><a name="1024943"> </a><code>#define sslCloseDontWaitForShutdown 0x0002</code></dt>
<dd><a name="1025148"> </a>Don't wait for the server to send a shutdown message.</dd>

<dd><a name="1025149"> </a><code>SslContextSet_DontWaitForShutdown(ssl,1);</code></dd>

<dt><a name="1024946"> </a><code>#define sslCloseUseDefaultTimeout 0x0020</code></dt>
<dd><a name="1024947"> </a>Use the timeout value set against the SslContext, not the <code class="par">timeout</code> parameter.</dd>

</dl>

<h3 class="hbH3">
  <a name="1063983"> </a>Mode Attribute Values <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1063992"> </a>Purpose 
</h4>

<p><a name="1064003"> </a>Values that control the SslContext's operating mode.</p>
<h4>
  <a name="1064004"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1064007"> </a></code><h4>
  <a name="1064025"> </a>Constants 
</h4>

<dl>
<dt><a name="1064091"> </a><code>#define sslModeClear 0x0000</code></dt>
<dd><a name="1064092"> </a>Causes the SSL protocol to be bypassed.</dd>

<dt><a name="1064094"> </a><code>#define sslModeFlush 0x8000</code></dt>
<dd><a name="1064095"> </a>Causes any data in the internal data buffers to be cleared.</dd>

<dt><a name="1064097"> </a><code>#define sslModeSsl 0x0002</code></dt>
<dd><a name="1064098"> </a>A subset value of <code>sslModeSslClient</code></dd>

<dt><a name="1064100"> </a><code>#define sslModeSslClient 0x000A</code></dt>
</dl>
<h4>
  <a name="1064120"> </a>Comments 
</h4>

<p><a name="1064165"> </a><code>SslModeSsl</code> is a subset value of <code>sslModeSslClient</code>.  In a future release of SslLib, the server side of the SSL protocol may be supported in which case <code>sslModeSslServer</code> would be added.  The application can use code like the following to determine if the SSL protocol is being used:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
If (SslContextGet_Mode(ssl) &amp; sslModeSsl)<a name="1064166"> </a>
   /* SSL protocol enabled */<a name="1064167"> </a>
else<a name="1064168"> </a>
   /* Using cleartext */<a name="1064169"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1064503"> </a>A comparison with <code>sslModeSslClient</code> could be used to determine if the client or server side of the protocol is being used for that particular SslContext.</p>

<p><a name="1064171"> </a>The <code>sslModeFlush</code> flag is special. When used in <a href="SslLibMac.html#999256"><code>SslContextSet_Mode()</code></a>, it causes any data in the internal data buffers to be cleared. This is normally required when reusing a SslContext for a new connection. If an application is using a SslContext for cleartext, and then wants to enable SSL on the same connection, this flag should not be used.</p>

<h3 class="hbH3">
  <a name="1064597"> </a>Protocol Versions <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1064642"> </a>Purpose 
</h4>

<p><a name="1064689"> </a>The version of the SSL protocol to use.</p>
<h4>
  <a name="1064694"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1064733"> </a></code><h4>
  <a name="1064752"> </a>Constants 
</h4>

<dl>
<dt><a name="1064848"> </a><code>#define sslVersionSSLv3 0x0300</code></dt>
<dd><a name="1064849"> </a>Version SSLv3 of the SSL protocol.</dd>

<dt><a name="1064851"> </a><code>#define sslVersionTLSv1 0x0301</code></dt>
<dd><a name="1064852"> </a>Version TLSvs, or SSLv3.1 of the SSL protocol.</dd>

</dl>
<h4>
  <a name="1064959"> </a>Comments 
</h4>

<p><a name="1065040"> </a>SslLib sends a TLSv1 ClientHello message by default. Note that in Palm OS Cobalt version 6.0 an attempt to change this protocol version to SSLv3 via <a href="SslLibMac.html#999510"><code>SslContextSet_ProtocolVersion()</code></a> has no effect&#8212;SslLib continues to send a TLSv1 ClientHello message.</p>

<h3 class="hbH3">
  <a name="1081281"> </a>Protocol Variants <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1081282"> </a>Purpose 
</h4>

<p><a name="1081283"> </a>The protocol variants supported by the library.</p>
<h4>
  <a name="1081286"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1081287"> </a></code><h4>
  <a name="1081288"> </a>Constants 
</h4>

<dl>
<dt><a name="1081290"> </a><code>#define sslSupport_anonDHKeyExchange 0x0008</code></dt>
<dd><a name="1081291"> </a></dd>

<dt><a name="1081293"> </a><code>#define sslSupport_Both (sslSupport_SSLv3Protocol | sslSupport_TLSv1Protocol)</code></dt>
<dd><a name="1082649"> </a>Enables both the SSLv3 and TLSv1 protocols.</dd>

<dt><a name="1081296"> </a><code>#define sslSupport_DHKeyExchange 0x0002</code></dt>
<dd><a name="1081297"> </a></dd>

<dt><a name="1081299"> </a><code>#define sslSupport_DSASign 0x0010</code></dt>
<dd><a name="1081300"> </a></dd>

<dt><a name="1081302"> </a><code>#define sslSupport_Ex1024 0x0040</code></dt>
<dd><a name="1081303"> </a></dd>

<dt><a name="1081305"> </a><code>#define sslSupport_Ex512 0x0020</code></dt>
<dd><a name="1081306"> </a></dd>

<dt><a name="1081308"> </a><code>#define sslSupport_RSAKeyExchange 0x0001</code></dt>
<dd><a name="1081309"> </a></dd>

<dt><a name="1081311"> </a><code>#define sslSupport_RSASign 0x0004</code></dt>
<dd><a name="1081312"> </a></dd>

<dt><a name="1081314"> </a><code>#define sslSupport_SSLv2Header 0x0400</code></dt>
<dd><a name="1081315"> </a></dd>

<dt><a name="1081317"> </a><code>#define sslSupport_SSLv3 (_sslSupport_SslLib | sslSupport_SSLv3Protocol)</code></dt>
<dd><a name="1081318"> </a>Enables the SSLv3 protocol.</dd>

<dt><a name="1081320"> </a><code>#define sslSupport_SSLv3Protocol 0x0100</code></dt>
<dd><a name="1081321"> </a></dd>

<dt><a name="1081323"> </a><code>#define sslSupport_TLSv1 (_sslSupport_SslLib | sslSupport_TLSv1Protocol)</code></dt>
<dd><a name="1082643"> </a>Enables the TLSv1 protocol.</dd>

<dt><a name="1081326"> </a><code>#define sslSupport_TLSv1Protocol 0x0200</code></dt>
</dl>
<h4>
  <a name="1081959"> </a>Comments 
</h4>

<p><a name="1082440"> </a>The protocol variants differ from the protocol version. The ProtocolHello/ProtocolVersion is what you use to talk to the peer, while the protocol variants determine what sections of the library code are turned on or off. These values are used with the <code>ProtocolSupport</code> attribute; set this attribute with <a href="SslLibMac.html#999302"><code>SslContextSet_ProtocolSupport()</code></a> and get it with <a href="SslLibMac.html#995654"><code>SslContextGet_ProtocolSupport()</code></a>.</p>

<div><hr>
  <a name="1083068"> </a> <span class="warning">WARNING! </span> Do not disable things that you don't know anything about. Also, do not turn off the <code>Ex512</code>/<code>Ex1024</code> bits without also removing the relevant ciphers from the cipher suite list.
<hr>
</div>

<p><a name="1082606"> </a>Use <code>sslSupport_SSLv3</code>, <code>sslSupport_TLSv1</code>, or <code>sslSupport_Both</code> to enable SSLv3, TLSv1, or both protocols. The default is <code>sslSupport_Both</code>.</p>

<h3 class="hbH3">
  <a name="1063094"> </a>Compatibility Flags <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1063138"> </a>Purpose 
</h4>

<p><a name="1063318"> </a><a href="SslConcepts.html#1072197"><code>Compat</code></a> attribute flags that turn on compatibility with incorrect SSL protocol implementations.</p>
<h4>
  <a name="1063362"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1063542"> </a></code><h4>
  <a name="1063586"> </a>Constants 
</h4>

<dl>
<dt><a name="1063591"> </a><code>#define sslCompat1RecordPerMessage 0x0004</code></dt>
<dd><a name="1063592"> </a>Some servers do not like to receive SSL protocol messages separated into multiple SSL records. This option stops the write buffers being set to a size less than 1024 bytes which ensures this problem will not occur.</dd>

<dt><a name="1063594"> </a><code>#define sslCompatAll 0xffff</code></dt>
<dd><a name="1063595"> </a>This value enables all the bug compatibility flags.</dd>

<dt><a name="1063597"> </a><code>#define sslCompatBigRecords 0x0008</code></dt>
<dd><a name="1063598"> </a>Some old Microsoft servers would send data to the SSL Client in records larger than 16k bytes in size. This is not legal in the SSLv3 protocol. This flag makes SslLib tolerate these large records.</dd>

<dt><a name="1063600"> </a><code>#define sslCompatNetscapeCaDnBug 0x0002</code></dt>
<dd><a name="1063601"> </a>Enables support for some old versions of Netscape servers which encoded certificate requests Distinguished names wrongly. This is not currently a problem for SslLib since it does not support Client certificates.</dd>

<dt><a name="1063603"> </a><code>#define sslCompatReuseCipherBug 0x0001</code></dt>
<dd><a name="1063604"> </a>Enables support for servers that change cipher suites on session-reuse. They should not be doing this.</dd>

</dl>
<h4>
  <a name="1063825"> </a>Comments 
</h4>

<p><a name="1063852"> </a>These bugs will not normally be encountered while using the SSL protocol, but if desired, it is worth enabling the compatibility in case old buggy servers are being accessed.</p>

<h3 class="hbH3">
  <a name="1033557"> </a>SSL Callback Commands <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1033584"> </a>Purpose 
</h4>

<p><a name="1033587"> </a>General commands that all callbacks should expect to receive. There are normally related to creation and destruction of the structure that holds the callback. These commands are used in conjunction with <a href="SslLib.html#997269"><code>SslCallbackFunc()</code></a>.</p>
<h4>
  <a name="1033588"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1033591"> </a></code><h4>
  <a name="1033609"> </a>Constants 
</h4>

<dl>
<dt><a name="1033663"> </a><code>#define sslCmdFree 0x0002</code></dt>
<dd><a name="1033664"> </a>Called when the callback is 'destroyed', normally due to its parent SslLib or SslContext being destroyed.</dd>

<dt><a name="1033666"> </a><code>#define sslCmdGet 0x0004</code></dt>
<dd><a name="1033667"> </a>Called to return a value from the callback to SslLib. The <code class="par">argi</code> value for this callback is callback-specific.</dd>

<dt><a name="1033669"> </a><code>#define sslCmdInfo 0x0012</code></dt>
<dd><a name="1033670"> </a>An Info callback. See <a href="SslLib.html#1034819">"The Info Callback"</a> for more information.</dd>

<dt><a name="1033672"> </a><code>#define sslCmdNew 0x0001</code></dt>
<dd><a name="1033673"> </a>Called when the callback is 'copied' into an SslLib or SslContext.</dd>

<dt><a name="1033675"> </a><code>#define sslCmdRead 0x0010</code></dt>
<dd><a name="1033676"> </a></dd>

<dt><a name="1033678"> </a><code>#define sslCmdReset 0x0003</code></dt>
<dd><a name="1033679"> </a>Called when the SslContext has been reset, which occurs when a new connection is being started. It is called instead of <code>sslCmdNew</code>. <code>sslCmdNew</code> will be called only once; <code>sslCmdReset</code> will be called subsequently to 'reset' the state associated with the callback.</dd>

<dt><a name="1033681"> </a><code>#define sslCmdSet 0x0005</code></dt>
<dd><a name="1033682"> </a>Called to pass a value from SslLib to the callback. The <code class="par">argi</code> value would specify the <code class="par">argv</code> parameter. The <code class="par">argi</code> parameter would be callback-specific.</dd>

<dt><a name="1033684"> </a><code>#define sslCmdVerify 0x0013</code></dt>
<dd><a name="1070314"> </a>A Verify callback. See <a href="SslLib.html#1035556">"The Verify Callback"</a> for more information.</dd>

<dt><a name="1033687"> </a><code>#define sslCmdWrite 0x0011</code></dt>
</dl>

<h3 class="hbH3">
  <a name="1040638"> </a>Cipher Suite Info Constants <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1040649"> </a>Purpose 
</h4>

<p><a name="1040652"> </a>Constants used with various fields of the <a href="SslLib.html#1032140"><code>SslCipherSuiteInfo</code></a> structure.</p>
<h4>
  <a name="1040701"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1040941"> </a></code><h4>
  <a name="1040985"> </a>Constants 
</h4>

<dl>
<dt><a name="1041022"> </a><code>#define sslCsiAuthNULL 0x00</code></dt>
<dd><a name="1041023"> </a></dd>

<dt><a name="1041025"> </a><code>#define sslCsiAuthRsa 0x01</code></dt>
<dd><a name="1041026"> </a></dd>

<dt><a name="1041028"> </a><code>#define sslCsiCipherNull 0x00</code></dt>
<dd><a name="1041029"> </a></dd>

<dt><a name="1041031"> </a><code>#define sslCsiCipherRc4 0x01</code></dt>
<dd><a name="1041032"> </a></dd>

<dt><a name="1041034"> </a><code>#define sslCsiDigestMd2 0x03</code></dt>
<dd><a name="1041035"> </a></dd>

<dt><a name="1041037"> </a><code>#define sslCsiDigestMd5 0x01</code></dt>
<dd><a name="1041038"> </a></dd>

<dt><a name="1041040"> </a><code>#define sslCsiDigestNull 0x00</code></dt>
<dd><a name="1041041"> </a></dd>

<dt><a name="1041043"> </a><code>#define sslCsiDigestSha1 0x02</code></dt>
<dd><a name="1041044"> </a></dd>

<dt><a name="1041046"> </a><code>#define sslCsiKeyExchNull 0x00</code></dt>
<dd><a name="1041047"> </a></dd>

<dt><a name="1041049"> </a><code>#define sslCsiKeyExchRsa 0x01</code></dt>
</dl>

<h3 class="hbH3">
  <a name="1061544"> </a>Cipher Suites <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1061545"> </a>Purpose 
</h4>

<p><a name="1061546"> </a>SSL cipher suites that the SSL protocol can attempt to use.</p>
<h4>
  <a name="1061547"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1061548"> </a></code><h4>
  <a name="1061549"> </a>Constants 
</h4>

<dl>
<dt><a name="1061551"> </a><code>#define sslCs_RSA_3DES_168_SHA1 0x00, 0x0A</code></dt>
<dt><a name="1061554"> </a><code>#define sslCs_RSA_DES_40_SHA1 0x00, 0x08</code></dt>
<dt><a name="1061557"> </a><code>#define sslCs_RSA_DES_56_SHA1 0x00, 0x09</code></dt>
<dt><a name="1061560"> </a><code>#define sslCs_RSA_RC4_128_MD5 0x00,0x04</code></dt>
<dt><a name="1061563"> </a><code>#define sslCs_RSA_RC4_128_SHA1 0x00,0x05</code></dt>
<dt><a name="1061566"> </a><code>#define sslCs_RSA_RC4_40_MD5 0x00,0x03</code></dt>
<dt><a name="1061569"> </a><code>#define sslCs_RSA_RC4_56_SHA1 0x00,0x64</code></dt>
</dl>
<h4>
  <a name="1069908"> </a>Comments 
</h4>

<p><a name="1069965"> </a>Set the cipher suites using either <a href="SslLibMac.html#1002345"><code>SslLibSet_CipherSuites()</code></a> or <a href="SslLibMac.html#997214"><code>SslContextSet_CipherSuites()</code></a>.</p>

<h3 class="hbH3">
  <a name="1082978"> </a>Ciphers <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1082979"> </a>Purpose 
</h4>

<p><a name="1082980"> </a> </p>
<h4>
  <a name="1082981"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1082982"> </a></code><h4>
  <a name="1082983"> </a>Constants 
</h4>

<dl>
<dt><a name="1082985"> </a><code>#define sslCs_ExportCiphers "\x00\x06\x00\x64\x00\x03\x00\x08"</code></dt>
<dd><a name="1082986"> </a></dd>

<dt><a name="1082988"> </a><code>#define sslCs_StrongCiphers "\x00\x06\x00\x0A\x00\x05\x00\x04"</code></dt>
<dd><a name="1082989"> </a></dd>

<dt><a name="1082991"> </a><code>#define sslCs_WeakExportCiphers "\x00\x04\x00\x03\x00\x08"</code></dt>
<dd><a name="1082992"> </a></dd>

</dl>

<h3 class="hbH3">
  <a name="1045420"> </a>Info Callbacks <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1045452"> </a>Purpose 
</h4>

<p><a name="1045604"> </a>The <a href="SslLib.html#997269"><code>SslCallbackFunc()</code></a> callback is called when various situations occur during the usage of a SslContext. It is primarily intended for debugging and feedback purposes. If the callback returns a non-zero value, this error will be returned back out the SslLib API. The callback will be called with a command argument of <code>sslCmdInfo</code>. The constants listed in this section represent the possible <code class="par">argi</code> values.</p>
<h4>
  <a name="1045635"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1045643"> </a></code><h4>
  <a name="1045647"> </a>Constants 
</h4>

<dl>
<dt><a name="1045652"> </a><code>#define sslArgInfoAlert 0x0002</code></dt>
<dd><a name="1045653"> </a>Notification of an Alert in the SSL protocol. The <code>sslArgInfoAlert</code> notification is called with a <code>NULL</code> value for the <code class="par">argv</code> parameter. The application can get the <code>LastAlert</code> attribute from the <a href="SslLib.html#993561"><code>SslContext</code></a> to determine which alert was received.</dd>

<dt><a name="1045655"> </a><code>#define sslArgInfoCert 0x0003</code></dt>
<dd><a name="1045656"> </a>Notification of peer certificate. The <code>sslArgInfoCert</code> call is made after the server's certificate chain has been verified. The <code class="par">argv</code> parameter is a <code>SslExtendedItems</code> pointer, which points to the remote server's certificate.</dd>

<dt><a name="1045658"> </a><code>#define sslArgInfoHandshake 0x0001</code></dt>
<dd><a name="1045659"> </a>Notification of a state change in the SSL protocol. The <code>sslArgInfoHandshake</code> will be called upon each handshake state change. The <code class="par">argv</code> parameter will be <code>NULL</code>, but the <code>HsState</code> attribute can be interrogated to read the current state.</dd>

<dt><a name="1045661"> </a><code>#define sslArgInfoReadAfter (sslCmdRead | 0x8000)</code></dt>
<dd><a name="1045662"> </a>Notification after a <code>recvfrom()</code>, <code>recv()</code>, or <code>read()</code> <code>sys/socket</code> call. See the Comments section, below, for more information.</dd>

<dt><a name="1045664"> </a><code>#define sslArgInfoReadBefore sslCmdRead</code></dt>
<dd><a name="1045665"> </a>Notification before a <code>recvfrom()</code>, <code>recv()</code>, or <code>read()</code> <code>sys/socket</code> call. See the Comments section, below, for more information.</dd>

<dt><a name="1045667"> </a><code>#define sslArgInfoWriteAfter (sslCmdWrite | 0x8000)</code></dt>
<dd><a name="1045668"> </a>Notification after a <code>sendto()</code>, <code>send()</code>, or <code>write()</code> <code>sys/socket</code> call. See the Comments section, below, for more information.</dd>

<dt><a name="1045670"> </a><code>#define sslArgInfoWriteBefore sslCmdWrite</code></dt>
<dd><a name="1045671"> </a>Notification before a <code>sendto()</code>, <code>send()</code>, or <code>write()</code> <code>sys/socket</code> call. See the Comments section, below, for more information.</dd>

</dl>
<h4>
  <a name="1046162"> </a>Comments 
</h4>

<p><a name="1046213"> </a>The <code>sslArgInfo[Read | Write] [Before | After]</code> callback is called twice for each network I/O operation. The first call is made before the call to the underlying <code>sys/socket</code> send or receive function. The second is made after the call has completed. If the callback returns a non-zero value, this value will be returned by original SslLib call the application made.</p>

<p><a name="1046214"> </a>The <code class="par">argv</code> parameter is a <a href="SslLib.html#993591"><code>SslIoBuf</code></a> structure. This structure's <code>ssl</code> field is the SslContext that the I/O operation is being performed by. <code>ptr</code> points to the space used, or to be used, in the operation.  <code>outNum</code> is the number of bytes processed. It is only set in the After calls.  <code>inNum</code> is the number of bytes to be read or written in the call.  <code>max</code> is the maximum number of bytes that could be read. It can be larger than <code>inNum</code>. <code>err</code> is the error value, if any. This value is only set in the After calls. <code>flags</code> is currently not used and is set to 0.</p>

<h3 class="hbH3">
  <a name="1053886"> </a>InfoInterest Values <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1054194"> </a>Purpose 
</h4>

<p><a name="1054213"> </a>Values used to specify the events for which of the <a href="SslLib.html#1045420">Info Callbacks</a> will be called. The <code>InfoInterest</code> value is the logical OR of these values.</p>
<h4>
  <a name="1054222"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1054241"> </a></code><h4>
  <a name="1054283"> </a>Constants 
</h4>

<dl>
<dt><a name="1054622"> </a><code>#define sslFlgInfoAlert 0x0001</code></dt>
<dd><a name="1054623"> </a>The <code>sslArgInfoAlert</code> callback.</dd>

<dt><a name="1054625"> </a><code>#define sslFlgInfoCert 0x0008</code></dt>
<dd><a name="1054626"> </a>The <code>sslArgInfoCert</code> callback.</dd>

<dt><a name="1055220"> </a><code>#define sslFlgInfoHandshake 0x0002</code></dt>
<dd><a name="1055227"> </a>The <code>sslArgInfoHandshake</code> callback.</dd>

<dt><a name="1055223"> </a><code>#define sslFlgInfoIo 0x0004</code></dt>
<dd><a name="1054632"> </a>The <code>sslArgInfoReadAfter</code>, <code>sslArgInfoReadBefore</code>, <code>sslArgInfoWriteAfter</code>, and <code>sslArgInfoWriteBefore</code> callbacks.</dd>

</dl>

<h3 class="hbH3">
  <a name="1056085"> </a>LastApi Attribute Values <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056321"> </a>Purpose 
</h4>

<p><a name="1056324"> </a>The last SslLib API call made. This attribute can be useful in event-driven programs.</p>
<h4>
  <a name="1056329"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1056332"> </a></code>
<dl>
<dt><a name="1055766"> </a><code>#define sslLastApiFlush 0x04</code></dt>
<dd><a name="1055767"> </a></dd>

<dt><a name="1055769"> </a><code>#define sslLastApiNone 0x00</code></dt>
<dd><a name="1055770"> </a></dd>

<dt><a name="1055772"> </a><code>#define sslLastApiOpen 0x01</code></dt>
<dd><a name="1055773"> </a></dd>

<dt><a name="1055775"> </a><code>#define sslLastApiRead 0x02</code></dt>
<dd><a name="1055776"> </a>Set if <a href="SslLib.html#997001"><code>SslRead()</code></a>, <a href="SslLib.html#996673"><code>SslPeek()</code></a> or <a href="SslLib.html#997059"><code>SslReceive()</code></a> was last called.</dd>

<dt><a name="1055778"> </a><code>#define sslLastApiShutdown 0x05</code></dt>
<dd><a name="1055779"> </a></dd>

<dt><a name="1055781"> </a><code>#define sslLastApiWrite 0x03</code></dt>
<dd><a name="1055782"> </a>Set if <a href="SslLib.html#997207"><code>SslWrite()</code></a> or <a href="SslLib.html#997133"><code>SslSend()</code></a> was last called.</dd>

</dl>

<h3 class="hbH3">
  <a name="1056149"> </a>LastIO Attribute Values <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1056293"> </a>Purpose 
</h4>

<p><a name="1056296"> </a>The last network operation performed.</p>
<h4>
  <a name="1056317"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1056320"> </a></code>
<dl>
<dt><a name="1055784"> </a><code>#define sslLastIoNone 0x00</code></dt>
<dd><a name="1055785"> </a>No I/O operations have been performed since the context was last reset.</dd>

<dt><a name="1055787"> </a><code>#define sslLastIoRead 0x01</code></dt>
<dd><a name="1055788"> </a>A read operation.</dd>

<dt><a name="1055790"> </a><code>#define sslLastIoWrite 0x02</code></dt>
<dd><a name="1055791"> </a>A write operation.</dd>

</dl>
<h4>
  <a name="1056582"> </a>Comments 
</h4>

<p><a name="1057884"> </a>Since most of the SslLib API I/O functions can cause an SSL handshake to be performed, it is often not possible to know if the reason that a <a href="SslLib.html#997133"><code>SslSend()</code></a> returned <code>netErrWouldBlock</code> is because the Send operation failed or a Receive operation failed (because a SSL Handshake was being performed). This attribute allows the application to determine which I/O operation was being called if a network error is returned. If the application is using <code>select()</code>, this attribute is very important. Because this attribute returns the last network operation performed, <code>sslLastIoNone</code> will only be returned if the SslContext has not performed any I/O operations since its last reset.</p>

<h3 class="hbH3">
  <a name="1049864"> </a>SSL Protocol States <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1049957"> </a>Purpose 
</h4>

<p><a name="1049960"> </a>These constants indicate the state that the SSL protocol is currently in. See the SSL protocol specification for clarification on what the values mean.</p>
<h4>
  <a name="1049961"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1049964"> </a></code><h4>
  <a name="1049996"> </a>Constants 
</h4>

<dl>
<dt><a name="1050181"> </a><code>#define sslHsStateCert 7</code></dt>
<dt><a name="1050184"> </a><code>#define sslHsStateCertB 8</code></dt>
<dt><a name="1050187"> </a><code>#define sslHsStateCertReq 13</code></dt>
<dt><a name="1050190"> </a><code>#define sslHsStateCertReqB 14</code></dt>
<dt><a name="1050193"> </a><code>#define sslHsStateCkEx 17</code></dt>
<dt><a name="1050196"> </a><code>#define sslHsStateCleanup 25</code></dt>
<dt><a name="1050199"> </a><code>#define sslHsStateClientCert 16</code></dt>
<dt><a name="1050202"> </a><code>#define sslHsStateClientHello 2</code></dt>
<dt><a name="1050205"> </a><code>#define sslHsStateClosed 28</code></dt>
<dt><a name="1050208"> </a><code>#define sslHsStateDone 26</code></dt>
<dt><a name="1050211"> </a><code>#define sslHsStateFinished 19</code></dt>
<dt><a name="1050214"> </a><code>#define sslHsStateFlush 4</code></dt>
<dt><a name="1050217"> </a><code>#define sslHsStateGenerateKeys 21</code></dt>
<dt><a name="1050220"> </a><code>#define sslHsStateHelloRequest 29</code></dt>
<dt><a name="1050223"> </a><code>#define sslHsStateNone 0</code></dt>
<dt><a name="1050226"> </a><code>#define sslHsStateReadCcs 20</code></dt>
<dt><a name="1050229"> </a><code>#define sslHsStateReadFinished 22</code></dt>
<dt><a name="1050232"> </a><code>#define sslHsStateReadFinishedB 23</code></dt>
<dt><a name="1050235"> </a><code>#define sslHsStateReadFinishedC 24</code></dt>
<dt><a name="1050238"> </a><code>#define sslHsStateServerDone 15</code></dt>
<dt><a name="1050241"> </a><code>#define sslHsStateServerHello 3</code></dt>
<dt><a name="1050244"> </a><code>#define sslHsStateShutdown 27</code></dt>
<dt><a name="1050247"> </a><code>#define sslHsStateSkEx 9</code></dt>
<dt><a name="1050250"> </a><code>#define sslHsStateSkExAnonDh 12</code></dt>
<dt><a name="1050253"> </a><code>#define sslHsStateSkExDh 11</code></dt>
<dt><a name="1050256"> </a><code>#define sslHsStateSkExRsa 10</code></dt>
<dt><a name="1050259"> </a><code>#define sslHsStateStart 1</code></dt>
<dt><a name="1050262"> </a><code>#define sslHsStateWrite 6</code></dt>
<dt><a name="1050265"> </a><code>#define sslHsStateWriteCcs 18</code></dt>
<dt><a name="1050268"> </a><code>#define sslHsStateWriteClose 30</code></dt>
<dt><a name="1050271"> </a><code>#define sslHsStateWriteFlush 5</code></dt>
</dl>

<h3 class="hbH3">
  <a name="1043321"> </a>SSL Server Alerts <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1043438"> </a>Purpose 
</h4>

<p><a name="1076243"> </a>Alert values received from the server. These are the defined Sslv3/TLSv1 alerts as defined in the SSLv3 and TLSv1 specifications. For their meanings, refer to those specifications.</p>
<h4>
  <a name="1043660"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1043675"> </a></code><h4>
  <a name="1043712"> </a>Constants 
</h4>

<dl>
<dt><a name="1043901"> </a><code>#define sslAlertAccessDenied (0x0200+49)</code></dt>
<dt><a name="1043904"> </a><code>#define sslAlertBadCertificate (0x0100+42)</code></dt>
<dt><a name="1043907"> </a><code>#define sslAlertBadRecordMac (0x0200+20)</code></dt>
<dt><a name="1043910"> </a><code>#define sslAlertCertificateExpired (0x0100+45)</code></dt>
<dt><a name="1043913"> </a><code>#define sslAlertCertificateRevoked (0x0100+44)</code></dt>
<dt><a name="1043916"> </a><code>#define sslAlertCertificateUnknown (0x0100+46)</code></dt>
<dt><a name="1043919"> </a><code>#define sslAlertCloseNotify (0x0100+ 0)</code></dt>
<dt><a name="1043922"> </a><code>#define sslAlertDecodeError (0x0200+50)</code></dt>
<dt><a name="1043925"> </a><code>#define sslAlertDecompressionFailure (0x0200+30)</code></dt>
<dt><a name="1043928"> </a><code>#define sslAlertDecryptError (0x0200+51)</code></dt>
<dt><a name="1043931"> </a><code>#define sslAlertDecryptionFailed (0x0200+21)</code></dt>
<dt><a name="1043934"> </a><code>#define sslAlertExportRestricion (0x0200+60)</code></dt>
<dt><a name="1043937"> </a><code>#define sslAlertHandshakeFailure (0x0200+40)</code></dt>
<dt><a name="1043940"> </a><code>#define sslAlertIllegalParameter (0x0200+47)</code></dt>
<dt><a name="1043943"> </a><code>#define sslAlertInsufficientSecurity (0x0200+71)</code></dt>
<dt><a name="1043946"> </a><code>#define sslAlertInternalError (0x0200+80)</code></dt>
<dt><a name="1043949"> </a><code>#define sslAlertNoCertificate (0x0100+41)</code></dt>
<dt><a name="1043952"> </a><code>#define sslAlertNoRenegotiation (0x0100+100)</code></dt>
<dt><a name="1043955"> </a><code>#define sslAlertProtocolVersion (0x0200+70)</code></dt>
<dt><a name="1043958"> </a><code>#define sslAlertRecordOverflow (0x0200+22)</code></dt>
<dt><a name="1043961"> </a><code>#define sslAlertUnexpectedMessage (0x0200+10)</code></dt>
<dt><a name="1043964"> </a><code>#define sslAlertUnknownCa (0x0200+48)</code></dt>
<dt><a name="1043967"> </a><code>#define sslAlertUnsupportedCertificate (0x0100+43)</code></dt>
<dt><a name="1043970"> </a><code>#define sslAlertUserCancled (0x0100+90)</code></dt>
</dl>
<h4>
  <a name="1044212"> </a>Comments 
</h4>

<p><a name="1044229"> </a>The alert values are received from the server and are of two types, fatal and non-fatal.</p>

<p><a name="1044230"> </a>The non-fatal alerts have a value of the form <code>0x01</code><i>XX</i>, while fatal Alerts have the form <code>0x02</code><i>XX</i>. SslLib will fail on fatal alerts and continue on non-fatal alerts.</p>

<h3 class="hbH3">
  <a name="1001053"> </a>SSL Library Errors <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1001126"> </a>Purpose 
</h4>

<p><a name="1001128"> </a>Error codes returned by the various SSL library functions.</p>
<h4>
  <a name="1001295"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1001369"> </a></code><h4>
  <a name="1001443"> </a>Constants 
</h4>

<dl>
<dt><a name="1001675"> </a><code>#define sslErrBadArgument (sslErrorClass+17)</code></dt>
<dd><a name="1001676"> </a>An invalid argument was provided to the function.</dd>

<dt><a name="1001678"> </a><code>#define sslErrBadDecode (sslErrorClass+9)</code></dt>
<dd><a name="1001679"> </a>An error occurred while decoding values during certificate verification.</dd>

<dt><a name="1002387"> </a><code>#define sslErrBadLength (sslErrorClass+13)</code></dt>
<dd><a name="1002388"> </a>A length argument was invalid.</dd>

<dt><a name="1002390"> </a><code>#define sslErrBadOption (sslErrorClass+18)</code></dt>
<dd><a name="1002391"> </a>An invalid argument was provided to the function.</dd>

<dt><a name="1001687"> </a><code>#define sslErrBadPeerFinished (sslErrorClass+46)</code></dt>
<dd><a name="1001688"> </a>The final check of the SSL handshake failed. This indicates that there was a problem establishing a shared secret value. It could be caused by the server using a certificate that does not match its private key.</dd>

<dt><a name="1001690"> </a><code>#define sslErrBadSignature (sslErrorClass+47)</code></dt>
<dd><a name="1001691"> </a>An invalid signature was found on a ephemeral Cipher Suite message.</dd>

<dt><a name="1001693"> </a><code>#define sslErrBufferTooSmall (sslErrorClass+11)</code></dt>
<dd><a name="1001694"> </a>A supplied buffer was not large enough for the output data.</dd>

<dt><a name="1001696"> </a><code>#define sslErrCbAbort (sslErrorClass+4)</code></dt>
<dd><a name="1001697"> </a>This error code would be returned by an applications callback function to indicate a desire to exit. This error may not be fatal, depending on the callback that generated the error.</dd>

<dt><a name="1001699"> </a><code>#define sslErrCert (sslErrorClass+39)</code></dt>
<dd><a name="1001700"> </a>A generic error occurred inside the SslLib certificate library.</dd>

<dt><a name="1001702"> </a><code>#define sslErrCertDecodeError (sslErrorClass+51)</code></dt>
<dd><a name="1001703"> </a>The Servers certificate could not be decoded.</dd>

<dt><a name="1001705"> </a><code>#define sslErrCsp (sslErrorClass+38)</code></dt>
<dd><a name="1001706"> </a>A generic error occurred inside the SslLib cryptographic library.</dd>

<dt><a name="1001708"> </a><code>#define sslErrDivByZero (sslErrorClass+7)</code></dt>
<dd><a name="1001709"> </a>Something went wrong in the Math library. These error will normally only be generated by certificates which have invalid public keys.</dd>

<dt><a name="1001711"> </a><code>#define sslErrEof (sslErrorClass+2)</code></dt>
<dd><a name="1001712"> </a>Error returned by SslLib functions when either the SSL protocol has been closed or the underlying socket has been closed. This error indicates that the current SslContext is unable to read or write any more data bytes.</dd>

<dt><a name="1001714"> </a><code>#define sslErrExtraHandshakeData (sslErrorClass+43)</code></dt>
<dd><a name="1001715"> </a>Extra data was found in the SSL handshake messages that should not have been there.</dd>

<dt><a name="1001717"> </a><code>#define sslErrFailed (sslErrorClass+1)</code></dt>
<dd><a name="1001718"> </a>A generic error.</dd>

<dt><a name="1001720"> </a><code>#define sslErrFatalAlert (sslErrorClass+45)</code></dt>
<dd><a name="1001721"> </a>A fatal alert was received by the SSL protocol.</dd>

<dt><a name="1001723"> </a><code>#define sslErrHandshakeEncoding (sslErrorClass+40)</code></dt>
<dd><a name="1001724"> </a>An error occurred during decoding of SSL handshake messages.</dd>

<dt><a name="1001726"> </a><code>#define sslErrHandshakeProtocol (sslErrorClass+42)</code></dt>
<dd><a name="1001727"> </a>An error occurred while processing the decoded SSL handshake messages.</dd>

<dt><a name="1001729"> </a><code>#define sslErrInitNotCalled (sslErrorClass+10)</code></dt>
<dd><a name="1001730"> </a>An internal SslLib error.</dd>

<dt><a name="1001732"> </a><code>#define sslErrInternalError (sslErrorClass+21)</code></dt>
<dd><a name="1001733"> </a>An internal SslLib error.</dd>

<dt><a name="1001735"> </a><code>#define sslErrIo (sslErrorClass+5)</code></dt>
<dd><a name="1001736"> </a>This error code is returned when an underlying <code>sys/socket</code> function call returned an error that is not fatal. A timeout, or other such non-fatal network errors will be reclassified as this error type. A function that returns this error type can be re-called once the error condition has disappeared.</dd>

<dt><a name="1001738"> </a><code>#define sslErrMissingCipherSuite (sslErrorClass+80)</code></dt>
<dd><a name="1001739"> </a></dd>

<dt><a name="1001741"> </a><code>#define sslErrMissingProvider (sslErrorClass+41)</code></dt>
<dd><a name="1001742"> </a>An internal SslLib error.</dd>

<dt><a name="1001744"> </a><code>#define sslErrNoDmem (sslErrorClass+14)</code></dt>
<dd><a name="1001745"> </a>An internal SslLib error.</dd>

<dt><a name="1001747"> </a><code>#define sslErrNoMethodSet (sslErrorClass+15)</code></dt>
<dd><a name="1001748"> </a>An internal SslLib error.</dd>

<dt><a name="1001750"> </a><code>#define sslErrNoModInverse (sslErrorClass+8)</code></dt>
<dd><a name="1002135"> </a>Something went wrong in the Math library. These error will normally only be generated by certificates which have invalid public keys.</dd>

<dt><a name="1001753"> </a><code>#define sslErrNoRandom (sslErrorClass+16)</code></dt>
<dd><a name="1001754"> </a>A problem with the random number source.</dd>

<dt><a name="1001756"> </a><code>#define sslErrNotFound (sslErrorClass+6)</code></dt>
<dd><a name="1001757"> </a>Returned on an internal SslLib search that did not find a valid entry. Consider this an internal SslLib error.</dd>

<dt><a name="1001759"> </a><code>#define sslErrNotImplemented (sslErrorClass+19)</code></dt>
<dd><a name="1001760"> </a>An internal SslLib error.</dd>

<dt><a name="1002378"> </a><code>#define sslErrNullArg (sslErrorClass+12)</code></dt>
<dd><a name="1002379"> </a>An passed argument was <code>NULL</code> that should not have been <code>NULL</code>.</dd>

<dt><a name="1001765"> </a><code>#define sslErrOk (sslErrorClass+0)</code></dt>
<dd><a name="1001766"> </a>Not an error.</dd>

<dt><a name="1001768"> </a><code>#define sslErrOutOfMemory (sslErrorClass+3)</code></dt>
<dd><a name="1001769"> </a>Returned if a dynamic memory allocation failed. This is normally considered a very bad error.</dd>

<dt><a name="1001771"> </a><code>#define sslErrReadAppData (sslErrorClass+50)</code></dt>
<dd><a name="1001772"> </a>Application data was read by the SSL protocol when it was expecting handshake messages.</dd>

<dt><a name="1001774"> </a><code>#define sslErrReallocStaticData (sslErrorClass+20)</code></dt>
<dd><a name="1001775"> </a>An internal SslLib error</dd>

<dt><a name="1001777"> </a><code>#define sslErrRecordError (sslErrorClass+37)</code></dt>
<dd><a name="1001778"> </a>An invalid record was received in the SslContext.</dd>

<dt><a name="1001780"> </a><code>#define sslErrUnexpectedRecord (sslErrorClass+49)</code></dt>
<dd><a name="1001781"> </a>A record of the wrong was received inside the SSL protocol.</dd>

<dt><a name="1001783"> </a><code>#define sslErrUnsupportedCertType (sslErrorClass+52)</code></dt>
<dd><a name="1001784"> </a>The Servers certificate contains a public key we cannot decode.</dd>

<dt><a name="1001786"> </a><code>#define sslErrUnsupportedProtocol (sslErrorClass+54)</code></dt>
<dd><a name="1001787"> </a></dd>

<dt><a name="1001789"> </a><code>#define sslErrUnsupportedSignatureType (sslErrorClass+53)</code></dt>
<dd><a name="1001790"> </a>We have been send a certificate with a signature type we do not recognize. </dd>

<dt><a name="1001792"> </a><code>#define sslErrVerifyCallback (sslErrorClass+128)</code></dt>
<dd><a name="1001793"> </a></dd>

<dt><a name="1001795"> </a><code>#define sslErrWrongMessage (sslErrorClass+44)</code></dt>
<dd><a name="1001796"> </a>An invalid SSL message was received.</dd>

</dl>

<h3 class="hbH3">
  <a name="1067085"> </a>Miscellaneous SSL Library Constants	 <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="1067086"> </a>Purpose 
</h4>

<p><a name="1067087"> </a>These constants are also defined in <code>SslLib.h</code>.</p>
<h4>
  <a name="1067088"> </a>Declared In 
</h4>
<code>SslLib.h<a name="1067089"> </a></code><h4>
  <a name="1067090"> </a>Constants 
</h4>

<dl>
<dt><a name="1067092"> </a><code>#define kSslDBName "SslLib"</code></dt>
<dd><a name="1067093"> </a>The SSL library's database name.</dd>

<dt><a name="1067095"> </a><code>#define kSslLibCreator 'ssl0'</code></dt>
<dd><a name="1067096"> </a>The SSL library's creator ID.</dd>

<dt><a name="1067098"> </a><code>#define kSslLibType sysFileTLibrary</code></dt>
<dd><a name="1067099"> </a>The SSL library's type.</dd>

</dl>

<h2 class="haH2">
  <a name="994641"> </a>SSL Library Functions <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="994649"> </a>SslClose Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994654"> </a>Purpose 
</h4>

<p><a name="994657"> </a>Performs the shutdown part of the SSL protocol. </p>
<h4>
  <a name="994659"> </a>Declared In 
</h4>
<code>SslLib.h<a name="994662"> </a></code><h4>
  <a name="994664"> </a>Prototype 
</h4>
<pre class="proto"><a name="994667"></a>status_t SslClose (
   SslContext <code class="par">*ctx</code>,
   uint16_t <code class="par">mode</code>,
   uint32_t <code class="par">timeout</code>
)
</pre>
<h4>
  <a name="994669"> </a>Parameters 
</h4>

<dl>
<dt><a name="994672"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="994734"> </a>The context to query.</dd>

<dt><a name="994757"> </a><code>&rarr;  <i>mode</i></code></dt>
<dd><a name="994839"> </a>Flags that specify how to perform the SSL Protocol shutdown. A combination of the values listed under <a href="SslLib.html#1024134">"SSL Close Mode Flags."</a></dd>

<dt><a name="994841"> </a><code>&rarr;  <i>timeout</i></code></dt>
<dd><a name="994843"> </a>Timeout, in system ticks, to use for final message exchange</dd>

</dl>
<h4>
  <a name="1025454"> </a>Returns 
</h4>

<p><a name="1027115"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="1021074"> </a>Comments 
</h4>

<p><a name="1021075"> </a>This usually involves message exchanges. This function can be repeatedly called after a timeout until either a network error is reported or the final SSL shutdown message exchange has been completed. The mode values can be logically OR'ed together.</p>
<h4>
  <a name="1025505"> </a>Example 
</h4>

<p><a name="1025570"> </a>The following code excerpt show how you might use this function:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err err;<a name="1026342"> </a>
SslContext *ssl;<a name="1025571"> </a>
<a name="1025572"> </a>
err = SslOpen(ssl,0,20*SysTicksPerSecond());<a name="1025573"> </a>
/* Perform SSL IO */<a name="1025574"> </a>
/* Shutdown the protocol but don't linger waiting for a<a name="1025575"> </a>
 * response from the server */<a name="1025576"> </a>
err = SslClose(ssl,sslCloseDontWaitForshutdown,
   20*SysTicksPerSecond());<a name="1025577"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1021076"> </a>See Also 
</h4>

<p><a name="1021077"> </a><a href="SslLib.html#996623"><code>SslOpen()</code></a>, <a href="SslLib.html#995438"><code>SslContextSetLong()</code></a>, <a href="SslLib.html#995492"><code>SslContextSetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="994860"> </a>SslConsume Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994865"> </a>Purpose 
</h4>

<p><a name="994868"> </a>Removes up to a specified number of bytes from the buffered read bytes in the passed <code>SslContext</code>.</p>
<h4>
  <a name="994870"> </a>Declared In 
</h4>
<code>SslLib.h<a name="994873"> </a></code><h4>
  <a name="994875"> </a>Prototype 
</h4>
<pre class="proto"><a name="994878"></a>void SslConsume (
   SslContext <code class="par">*ctx</code>,
   int32_t <code class="par">number</code>
)
</pre>
<h4>
  <a name="994880"> </a>Parameters 
</h4>

<dl>
<dt><a name="994883"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="994885"> </a>The SslContext to operate on.</dd>

<dt><a name="994887"> </a><code>&rarr;  <i>number</i></code></dt>
<dd><a name="994889"> </a>The number of bytes to remove from the internal buffer.</dd>

</dl>
<h4>
  <a name="994891"> </a>Returns 
</h4>

<p><a name="994894"> </a>Nothing.</p>
<h4>
  <a name="994896"> </a>Comments 
</h4>

<p><a name="994899"> </a>This function is normally used in conjunction with <a href="SslLib.html#996673"><code>SslPeek()</code></a>. </p>
<h4>
  <a name="1029335"> </a>Example 
</h4>

<p><a name="1029344"> </a>The following code excerpt shows how this function might be used.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err err;<a name="1029483"> </a>
void *data;<a name="1029484"> </a>
Int32 *dataLen;<a name="1029485"> </a>
<a name="1029486"> </a>
err=SslPeek(ssl,&amp;data,*dataLen,16*1024);<a name="1029487"> </a>
/* Process the dataLen bytes located at data */<a name="1029488"> </a>
SslConsume(ssl,dataLen);<a name="1029489"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="994901"> </a>See Also 
</h4>

<p><a name="994910"> </a><a href="SslLib.html#996673"><code>SslPeek()</code></a>, <a href="SslLib.html#997001"><code>SslRead()</code></a>, <a href="SslLib.html#997059"><code>SslReceive()</code></a></p>

<h3 class="hbH3">
  <a name="994934"> </a>SslContextCreate Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="994963"> </a>Purpose 
</h4>

<p><a name="994966"> </a>Creates a new SSL Context.</p>
<h4>
  <a name="994968"> </a>Declared In 
</h4>
<code>SslLib.h<a name="994971"> </a></code><h4>
  <a name="994973"> </a>Prototype 
</h4>
<pre class="proto"><a name="994976"></a>status_t SslContextCreate (
   SslLib <code class="par">*lib</code>,
   SslContext <code class="par">**ctx</code>
)
</pre>
<h4>
  <a name="994978"> </a>Parameters 
</h4>

<dl>
<dt><a name="994981"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="994983"> </a>The SSL library structure.</dd>

<dt><a name="994985"> </a><code>&larr;  <i>ctx</i></code></dt>
<dd><a name="994987"> </a>Where to deposit the SslContext pointer.</dd>

</dl>
<h4>
  <a name="994989"> </a>Returns 
</h4>

<p><a name="1003888"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="994994"> </a>Comments 
</h4>

<p><a name="994997"> </a>A SslContext is the data structure used to encapsulates all aspects of a SSL connection. This routine will deposit a pointer to the newly created structure at the address given by the <code class="par">ctx</code> argument. Various default values will be inherited from the passed SslLib.</p>
<h4>
  <a name="994999"> </a>See Also 
</h4>

<p><a name="995002"> </a><a href="SslLib.html#996623"><code>SslOpen()</code></a>, <a href="SslLib.html#995004"><code>SslContextDestroy()</code></a>, <a href="SslLib.html#995438"><code>SslContextSetLong()</code></a>, <a href="SslLib.html#995492"><code>SslContextSetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="995004"> </a>SslContextDestroy Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995009"> </a>Purpose 
</h4>

<p><a name="995012"> </a>Destroys the SSL Context. </p>
<h4>
  <a name="995014"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995017"> </a></code><h4>
  <a name="995019"> </a>Prototype 
</h4>
<pre class="proto"><a name="995022"></a>void SslContextDestroy (
   SslContext <code class="par">*ctx</code>
)
</pre>
<h4>
  <a name="995024"> </a>Parameters 
</h4>

<dl>
<dt><a name="995027"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="995029"> </a>The SslContext to destroy.</dd>

</dl>
<h4>
  <a name="995031"> </a>Returns 
</h4>

<p><a name="995034"> </a>Nothing.</p>
<h4>
  <a name="995036"> </a>Comments 
</h4>

<p><a name="995039"> </a>This routine will free the memory associated with the passed SslContext. This function will not close the network connection or shutdown the SSL protocol. See <a href="SslLib.html#994649"><code>SslClose()</code></a> for information on shutting down the SSL Protocol.</p>
<h4>
  <a name="995041"> </a>See Also 
</h4>

<p><a name="995044"> </a><a href="SslLib.html#994934"><code>SslContextCreate()</code></a>, <a href="SslLib.html#994649"><code>SslClose()</code></a></p>

<h3 class="hbH3">
  <a name="995046"> </a>SslContextGetLong Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995051"> </a>Purpose 
</h4>

<p><a name="995054"> </a>Retrieve an integer attribute value from the passed SslContext structure. </p>
<h4>
  <a name="995056"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995059"> </a></code><h4>
  <a name="995061"> </a>Prototype 
</h4>
<pre class="proto"><a name="995090"></a>int32_t SslContextGetLong (
   SslContext <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>
)
</pre>
<h4>
  <a name="995146"> </a>Parameters 
</h4>

<dl>
<dt><a name="995197"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995247"> </a>The SslContext from which the value is to be retrieved.</dd>

<dt><a name="995321"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="995371"> </a>Attribute to retrieve.</dd>

</dl>
<h4>
  <a name="995373"> </a>Returns 
</h4>

<p><a name="995376"> </a>The value of the attribute is returned. If a non-existent attribute was requested, -1 is returned. This could give incorrect values so an application should make sure to call this routine with the correct arguments.</p>
<h4>
  <a name="995378"> </a>Comments 
</h4>

<p><a name="995381"> </a>This function is not normally used directly, but via pre-defined macros.</p>
<h4>
  <a name="1013431"> </a>Example 
</h4>

<p><a name="1014261"> </a>The following example shows the use of one of the macros that make use of this function:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
/* Is the SslContext configured to do ssl? */<a name="1013444"> </a>
if (!(SslContextGet_Mode(lib) &amp; sslModeSsl))<a name="1013445"> </a>
   return(WE_ARE_NOT_USING_SSL);<a name="1013446"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="995383"> </a>See Also 
</h4>

<p><a name="995386"> </a><a href="SslLib.html#995438"><code>SslContextSetLong()</code></a>, <a href="SslLib.html#995046"><code>SslContextGetLong()</code></a></p>

<h3 class="hbH3">
  <a name="995388"> </a>SslContextGetPtr Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995393"> </a>Purpose 
</h4>

<p><a name="995396"> </a>Retrieve a pointer to an attribute value from the passed SslContext structure.</p>
<h4>
  <a name="995398"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995401"> </a></code><h4>
  <a name="995403"> </a>Prototype 
</h4>
<pre class="proto"><a name="995406"></a>status_t SslContextGetPtr (
   SslContext <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>,
   void <code class="par">**value</code>
)
</pre>
<h4>
  <a name="995408"> </a>Parameters 
</h4>

<dl>
<dt><a name="995411"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995413"> </a>The SslContext to retrieve the attribute from.</dd>

<dt><a name="995415"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="995417"> </a>The attribute to retrieve</dd>

<dt><a name="995419"> </a><code>&larr;  <i>value</i></code></dt>
<dd><a name="995421"> </a>A pointer to an attribute specific pointer</dd>

</dl>
<h4>
  <a name="995423"> </a>Returns 
</h4>

<p><a name="1015413"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="995428"> </a>Comments 
</h4>

<p><a name="995431"> </a>This function is not normally used directly, but via pre-defined macros. The type of the pointer returned is specific to the attribute being requested.</p>
<h4>
  <a name="1015499"> </a>Example 
</h4>

<p><a name="1015901"> </a>The following example shows the use of one of the macros that makes use of this function:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslSession *session;<a name="1015720"> </a>
Err err;<a name="1015721"> </a>
<a name="1015722"> </a>
err = SslContextGet_SslSession(ssl,&amp;session);<a name="1015723"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="995433"> </a>See Also 
</h4>

<p><a name="995436"> </a><a href="SslLib.html#995492"><code>SslContextSetPtr()</code></a>, <a href="SslLib.html#995946"><code>SslLibGetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="995438"> </a>SslContextSetLong Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995447"> </a>Purpose 
</h4>

<p><a name="995450"> </a>Modify one of the numeric attributes of a SslContext structure. </p>
<h4>
  <a name="995452"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995455"> </a></code><h4>
  <a name="995457"> </a>Prototype 
</h4>
<pre class="proto"><a name="995460"></a>status_t SslContextSetLong (
   SslContext <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>,
   long <code class="par">value</code>
)
</pre>
<h4>
  <a name="995462"> </a>Parameters 
</h4>

<dl>
<dt><a name="995465"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995467"> </a>The SslContext on which to operate.</dd>

<dt><a name="995469"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="995471"> </a>The attribute to modify.</dd>

<dt><a name="995473"> </a><code>&rarr;  <i>value</i></code></dt>
<dd><a name="995475"> </a>The new value.</dd>

</dl>
<h4>
  <a name="995477"> </a>Returns 
</h4>

<p><a name="1010916"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="995482"> </a>Comments 
</h4>

<p><a name="1010377"> </a>This function is not normally used directly, rather it is used via pre-defined macros. The <code class="par">attr</code> parameter specifies the SslContext attribute that will be set to the value passed in <code class="par">value</code>.</p>
<h4>
  <a name="1010378"> </a>Example 
</h4>

<p><a name="1010971"> </a>The following code excerpt shows how this function is used.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslContext *ssl;<a name="1010647"> </a>
Err err;<a name="1010648"> </a>
<a name="1010649"> </a>
err = SslContextCreate(lib,&amp;ssl);<a name="1010650"> </a>
/*modify output buffer size */<a name="1010651"> </a>
err = SslContextSet_WbufSize(lib,8*1024);<a name="1010652"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1010379"> </a>See Also 
</h4>

<p><a name="995490"> </a><a href="SslLib.html#995492"><code>SslContextSetPtr()</code></a>, <a href="SslLib.html#995388"><code>SslContextGetPtr()</code></a>, <a href="SslLib.html#995046"><code>SslContextGetLong()</code></a></p>

<h3 class="hbH3">
  <a name="995492"> </a>SslContextSetPtr Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995497"> </a>Purpose 
</h4>

<p><a name="995500"> </a>Update one of the non-integer attributes of a SslContext. </p>
<h4>
  <a name="995502"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995505"> </a></code><h4>
  <a name="995507"> </a>Prototype 
</h4>
<pre class="proto"><a name="995510"></a>status_t SslContextSetPtr (
   SslContext <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>,
   void <code class="par">*value</code>
)
</pre>
<h4>
  <a name="995512"> </a>Parameters 
</h4>

<dl>
<dt><a name="995515"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995517"> </a>The SslContext to modify.</dd>

<dt><a name="995519"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="995521"> </a>The attribute to update.</dd>

<dt><a name="995523"> </a><code>&rarr;  <i>value</i></code></dt>
<dd><a name="995525"> </a>The value to update, specific to the SslAttribute.</dd>

</dl>
<h4>
  <a name="995527"> </a>Returns 
</h4>

<p><a name="1011015"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="995532"> </a>Comments 
</h4>

<p><a name="995535"> </a>The <code class="par">attr</code> value defines the type of the <code class="par">value</code> parameter. This function is not normally used directly, rather it is used via pre-defined macros.</p>
<h4>
  <a name="1011022"> </a>Example 
</h4>

<p><a name="1011023"> </a>The following code excerpt shows how this function is used.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslContext *ssl;<a name="1011278"> </a>
SslCallback cb;<a name="1011279"> </a>
Err err;<a name="1011280"> </a>
<a name="1011281"> </a>
err = SslContextCreate(lib,&amp;ssl);<a name="1011282"> </a>
<a name="1011283"> </a>
/* Configure to have 'debugCallbackFunction' called for each<a name="1011284"> </a>
 * SSL protocol handshake state change */<a name="1011285"> </a>
cb.callback = debugCallbackFunction;<a name="1011286"> </a>
cb.data = NULL;<a name="1011287"> </a>
err = SslContextSet_InfoInterest(lib, sslInfoHandshake);<a name="1011288"> </a>
err = SslContextSet_InfoCallback(lib,(void *)&amp;cb);<a name="1011289"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="995537"> </a>See Also 
</h4>

<p><a name="995546"> </a><a href="SslLib.html#995046"><code>SslContextGetLong()</code></a>, <a href="SslLib.html#995438"><code>SslContextSetLong()</code></a>, <a href="SslLib.html#995388"><code>SslContextGetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="995570"> </a>SslFlush Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995599"> </a>Purpose 
</h4>

<p><a name="995602"> </a>Cause an immediate write of any data buffered in the SslContext to the network.</p>
<h4>
  <a name="995604"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995607"> </a></code><h4>
  <a name="995609"> </a>Prototype 
</h4>
<pre class="proto"><a name="995612"></a>status_t SslFlush (
   SslContext <code class="par">*ctx</code>,
   int32_t <code class="par">*outstanding</code>
)
</pre>
<h4>
  <a name="995614"> </a>Parameters 
</h4>

<dl>
<dt><a name="995617"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="995619"> </a>The SslContext to operate on.</dd>

<dt><a name="995621"> </a><code>&larr;  <i>outstanding</i></code></dt>
<dd><a name="995623"> </a>The number of byte still unflushed after this call.</dd>

</dl>
<h4>
  <a name="995625"> </a>Returns 
</h4>

<p><a name="1029777"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="995630"> </a>Comments 
</h4>

<p><a name="995633"> </a>An SslContext can be set into "no AutoFlush" mode. This means that the <a href="SslLib.html#997133"><code>SslSend()</code></a> and <a href="SslLib.html#997207"><code>SslWrite()</code></a> operations will not cause an immediate write to the network. If this mode is enabled, then explicit <code>SslFlush</code> calls need to be made to ensure that the data buffered in the SslContext is sent to the network. The main use of "no AutoFlush" is to allow multiple <code>SslWrite()</code>/<code>SslSend()</code> commands to have their output buffered in the SslContext's output buffer. This improves the SSL Protocols efficiency and is generally a good policy if lots of small write operations are being performed by the application.   The number of bytes that can be written to the SslContext write buffer is a few tens of bytes less than the output buffer size. This means that if the application is writing less than this number of bytes, no network errors can occur until the <code>SslFlush()</code> call is made. The outstanding parameter will be updated to contain the number of buffered bytes that are still buffered in the SslContext. If this value is non-zero, the next <code>SslWrite()</code>, <code>SslSend()</code>, <code>SslFlush()</code> operation will attempt to write those bytes to the network.</p>
<h4>
  <a name="1029787"> </a>Example 
</h4>

<p><a name="1029788"> </a>The following code excerpt shows how this function can be used:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Err err;<a name="1029793"> </a>
<a name="1029794"> </a>
SslContextSet_AutoFlush(ssl,0);<a name="1029795"> </a>
SslWrite(ssl,"GET ",4);<a name="1029796"> </a>
SslWrite(ssl,url,StrLen(url));<a name="1029797"> </a>
SslWrite(ssl," HTTP/1.0\r\n\r\n",13);<a name="1029798"> </a>
<a name="1029799"> </a>
err=SslFlush(ssl,NULL);<a name="1029800"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="995635"> </a>See Also 
</h4>

<p><a name="995638"> </a><a href="SslLib.html#997207"><code>SslWrite()</code></a>, <a href="SslLib.html#997133"><code>SslSend()</code></a>, <a href="SslLib.html#995438"><code>SslContextSetLong()</code></a></p>

<h3 class="hbH3">
  <a name="995640"> </a>SslLibClose Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995645"> </a>Purpose 
</h4>

<p><a name="995648"> </a>SSL library's shared library close function.</p>
<h4>
  <a name="995650"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995653"> </a></code><h4>
  <a name="995655"> </a>Prototype 
</h4>
<pre class="proto"><a name="995658"></a>status_t SslLibClose (
   void
)
</pre>
<h4>
  <a name="995660"> </a>Parameters 
</h4>

<p><a name="995663"> </a>None.</p>
<h4>
  <a name="995665"> </a>Returns 
</h4>

<p><a name="995668"> </a></p>

<h3 class="hbH3">
  <a name="995680"> </a>SslLibCreate Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995685"> </a>Purpose 
</h4>

<p><a name="995688"> </a>Creates the SSL library context.</p>
<h4>
  <a name="995690"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995693"> </a></code><h4>
  <a name="995695"> </a>Prototype 
</h4>
<pre class="proto"><a name="995698"></a>status_t SslLibCreate (
   SslLib <code class="par">**lib</code>
)
</pre>
<h4>
  <a name="995700"> </a>Parameters 
</h4>

<dl>
<dt><a name="995703"> </a><code>&larr;  <i>lib</i></code></dt>
<dd><a name="995709"> </a>Where to deposit the SslLib pointer</dd>

</dl>
<h4>
  <a name="995727"> </a>Returns 
</h4>

<p><a name="995794"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="998194"> </a>Comments 
</h4>

<p><a name="998195"> </a>This routine will deposit the newly-created SslLib at the address given by the <code class="par">lib</code> argument. This routine is generally the first call made when performing SSL functionality. Various default configuration values can be set against this structure. These values will be inherited by SslContext structures created against the SslLib.</p>
<h4>
  <a name="998196"> </a>See Also 
</h4>

<p><a name="998197"> </a><a href="SslLib.html#995806"><code>SslLibDestroy()</code></a>, <a href="SslLib.html#994934"><code>SslContextCreate()</code></a>, <a href="SslLib.html#996143"><code>SslLibSetLong()</code></a>, <a href="SslLib.html#1004704"><code>SslLibSetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="995806"> </a>SslLibDestroy Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995811"> </a>Purpose 
</h4>

<p><a name="995814"> </a>Destroys the context represented by <code class="par">lib</code>.</p>
<h4>
  <a name="995816"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995819"> </a></code><h4>
  <a name="995821"> </a>Prototype 
</h4>
<pre class="proto"><a name="995824"></a>void SslLibDestroy (
   SslLib <code class="par">*lib</code>
)
</pre>
<h4>
  <a name="995826"> </a>Parameters 
</h4>

<dl>
<dt><a name="995829"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995831"> </a>SslLib structure to be destroyed.</dd>

</dl>
<h4>
  <a name="995833"> </a>Returns 
</h4>

<p><a name="995836"> </a>Nothing.</p>
<h4>
  <a name="995843"> </a>See Also 
</h4>

<p><a name="995846"> </a><a href="SslLib.html#995680"><code>SslLibCreate()</code></a></p>

<h3 class="hbH3">
  <a name="995848"> </a>SslLibGetLong Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995853"> </a>Purpose 
</h4>

<p><a name="995856"> </a>Retrieve an integer attribute value from the passed SslLib structure. </p>
<h4>
  <a name="995858"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995861"> </a></code><h4>
  <a name="995863"> </a>Prototype 
</h4>
<pre class="proto"><a name="995866"></a>int32_t SslLibGetLong (
   SslLib <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>
)
</pre>
<h4>
  <a name="995868"> </a>Parameters 
</h4>

<dl>
<dt><a name="995871"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995873"> </a>The SslLib from which the value is to be retrieved.</dd>

<dt><a name="995879"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="995929"> </a>Attribute to retrieve.</dd>

</dl>
<h4>
  <a name="995931"> </a>Returns 
</h4>

<p><a name="995934"> </a>The value of the attribute is returned. If a non-existent attribute was requested, -1 is returned.</p>
<h4>
  <a name="995936"> </a>Comments 
</h4>

<p><a name="995939"> </a>This function is not normally used directly, but via pre-defined macros.</p>
<h4>
  <a name="995941"> </a>See Also 
</h4>

<p><a name="995944"> </a><a href="SslLib.html#995388"><code>SslContextGetPtr()</code></a>, <a href="SslLib.html#996143"><code>SslLibSetLong()</code></a>, <a href="SslLib.html#995046"><code>SslContextGetLong()</code></a></p>

<h3 class="hbH3">
  <a name="995946"> </a>SslLibGetPtr Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995951"> </a>Purpose 
</h4>

<p><a name="995954"> </a>Retrieve an pointer attribute value from the passed SslLib structure. </p>
<h4>
  <a name="995956"> </a>Declared In 
</h4>
<code>SslLib.h<a name="995959"> </a></code><h4>
  <a name="995961"> </a>Prototype 
</h4>
<pre class="proto"><a name="995964"></a>status_t SslLibGetPtr (
   SslLib <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>,
   void <code class="par">**value</code>
)
</pre>
<h4>
  <a name="995966"> </a>Parameters 
</h4>

<dl>
<dt><a name="995969"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="995971"> </a>The SslLib to retrieve the attribute from.</dd>

<dt><a name="995973"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="995975"> </a>The attribute to retrieve.</dd>

<dt><a name="995977"> </a><code>&larr;  <i>value</i></code></dt>
<dd><a name="995979"> </a>A pointer to a attribute specific pointer</dd>

</dl>
<h4>
  <a name="995981"> </a>Returns 
</h4>

<p><a name="1009202"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="995986"> </a>Comments 
</h4>

<p><a name="995989"> </a>This function is not normally used directly, but via pre-defined macros. The type of the pointer returned is specific to the attribute being requested.</p>
<h4>
  <a name="1009308"> </a>Example 
</h4>

<p><a name="1009983"> </a>The following code excerpt shows how this function is used.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslCallback *cb;<a name="1009589"> </a>
Err err;<a name="1009590"> </a>
<a name="1009591"> </a>
err = SslLibGet_InfoCallback(lib,&amp;cb);<a name="1009592"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="995991"> </a>See Also 
</h4>

<p><a name="995994"> </a><a href="SslLib.html#1004704"><code>SslLibSetPtr()</code></a>, <a href="SslLib.html#995388"><code>SslContextGetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="995996"> </a>SslLibName Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996001"> </a>Purpose 
</h4>

<p><a name="996004"> </a></p>
<h4>
  <a name="996006"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996009"> </a></code><h4>
  <a name="996011"> </a>Prototype 
</h4>
<pre class="proto"><a name="996014"></a>status_t SslLibName (
   void
)
</pre>
<h4>
  <a name="996016"> </a>Parameters 
</h4>

<p><a name="996019"> </a>None.</p>
<h4>
  <a name="996021"> </a>Returns 
</h4>

<p><a name="996024"> </a></p>

<h3 class="hbH3">
  <a name="996079"> </a>SslLibOpen Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996108"> </a>Purpose 
</h4>

<p><a name="996111"> </a>SSL library's shared library open function.</p>
<h4>
  <a name="996113"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996116"> </a></code><h4>
  <a name="996118"> </a>Prototype 
</h4>
<pre class="proto"><a name="996121"></a>status_t SslLibOpen (
   void
)
</pre>
<h4>
  <a name="996123"> </a>Parameters 
</h4>

<p><a name="996126"> </a>None.</p>
<h4>
  <a name="996128"> </a>Returns 
</h4>

<p><a name="996131"> </a></p>

<h3 class="hbH3">
  <a name="996143"> </a>SslLibSetLong Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996148"> </a>Purpose 
</h4>

<p><a name="996151"> </a>Modify one of the numeric attributes of a SslLib structure. </p>
<h4>
  <a name="996153"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996156"> </a></code><h4>
  <a name="996158"> </a>Prototype 
</h4>
<pre class="proto"><a name="996161"></a>status_t SslLibSetLong (
   SslLib <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>,
   int32_t <code class="par">value</code>
)
</pre>
<h4>
  <a name="996163"> </a>Parameters 
</h4>

<dl>
<dt><a name="996166"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="996168"> </a>The SslLib on which to operate.</dd>

<dt><a name="996170"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="996172"> </a>The attribute to modify.</dd>

<dt><a name="996174"> </a><code>&rarr;  <i>value</i></code></dt>
<dd><a name="996176"> </a>The new value.</dd>

</dl>
<h4>
  <a name="996178"> </a>Returns 
</h4>

<p><a name="1004334"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="996183"> </a>Comments 
</h4>

<p><a name="996186"> </a>This function is not normally used directly, rather it is used via pre-defined macros. The <code class="par">attr</code> parameter specifies the SslLib attribute that will be set to the value passed in <code class="par">value</code>.</p>
<h4>
  <a name="1005115"> </a>Example 
</h4>

<p><a name="1005288"> </a>The following code excerpt shows how this function is used.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslLib *lib;<a name="1005289"> </a>
Err err;<a name="1005290"> </a>
<a name="1005291"> </a>
err = SslLibCreate(&amp;lib);<a name="1005292"> </a>
err = SslLibSet_AutoFlush(lib,0); /* Turn of auto flushing */<a name="1005293"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="1004700"> </a>See Also 
</h4>

<p><a name="1004701"> </a><a href="SslLib.html#995680"><code>SslLibCreate()</code></a>, <a href="SslLib.html#1004704"><code>SslLibSetPtr()</code></a>, <a href="SslLib.html#995946"><code>SslLibGetPtr()</code></a>, <a href="SslLib.html#995848"><code>SslLibGetLong()</code></a></p>

<h3 class="hbH3">
  <a name="1004704"> </a>SslLibSetPtr Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996202"> </a>Purpose 
</h4>

<p><a name="996207"> </a>Update one of the non-integer attributes of a SslLib.</p>
<h4>
  <a name="996215"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996226"> </a></code><h4>
  <a name="996236"> </a>Prototype 
</h4>
<pre class="proto"><a name="996247"></a>status_t SslLibSetPtr (
   SslLib <code class="par">*lib</code>,
   SslAttribute <code class="par">attr</code>,
   void <code class="par">*value</code>
)
</pre>
<h4>
  <a name="996261"> </a>Parameters 
</h4>

<dl>
<dt><a name="1005332"> </a><code>&rarr;  <i>lib</i></code></dt>
<dd><a name="1005333"> </a>The SslLib to operate on.</dd>

<dt><a name="1005334"> </a><code>&rarr;  <i>attr</i></code></dt>
<dd><a name="1005335"> </a>The attribute to update.</dd>

<dt><a name="996308"> </a><code>&rarr;  <i>value</i></code></dt>
<dd><a name="996310"> </a>The value to update, specific to the SslAttribute.</dd>

</dl>
<h4>
  <a name="996312"> </a>Returns 
</h4>

<p><a name="1005312"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="996317"> </a>Comments 
</h4>

<p><a name="996320"> </a>The <code class="par">attr</code> value defines the type of the <code class="par">value</code> parameter. This function is not normally used directly, rather it is used via pre-defined macros.</p>
<h4>
  <a name="1005525"> </a>Example 
</h4>

<p><a name="1005556"> </a>The following code excerpt shows how this function is used.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslLib *lib;<a name="1005564"> </a>
SslCallback cb;<a name="1005565"> </a>
Err err;<a name="1005566"> </a>
<a name="1005567"> </a>
err = SslLibCreate(&amp;lib);<a name="1005568"> </a>
<a name="1005569"> </a>
/* Configure to have 'debugCallbackFunction' called for each<a name="1005570"> </a>
 * SSL protocol handshake state change */<a name="1005571"> </a>
cb.callback = debugCallbackFunction;<a name="1005572"> </a>
cb.data = NULL;<a name="1005573"> </a>
err = SslLibSet_InfoInterest(lib, sslInfoHandshake);<a name="1005574"> </a>
err = SslLibSet_InfoCallback(lib,(void *)&amp;cb);<a name="1005575"> </a>
</pre><div class="CodeRule"><hr></div>

<h4>
  <a name="996322"> </a>See Also 
</h4>

<p><a name="996325"> </a><a href="SslLib.html#995848"><code>SslLibGetLong()</code></a>, <a href="SslLib.html#996143"><code>SslLibSetLong()</code></a>, <a href="SslLib.html#995946"><code>SslLibGetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="996327"> </a>SslLibSleep Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996332"> </a>Purpose 
</h4>

<p><a name="996335"> </a>SSL library's shared library sleep function.</p>
<h4>
  <a name="996337"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996340"> </a></code><h4>
  <a name="996342"> </a>Prototype 
</h4>
<pre class="proto"><a name="996345"></a>status_t SslLibSleep (
   void
)
</pre>
<h4>
  <a name="996347"> </a>Parameters 
</h4>

<p><a name="996350"> </a>None.</p>
<h4>
  <a name="996352"> </a>Returns 
</h4>

<p><a name="996355"> </a></p>

<h3 class="hbH3">
  <a name="996367"> </a>SslLibWake Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996372"> </a>Purpose 
</h4>

<p><a name="1036798"> </a>SSL library's shared library wake function.</p>
<h4>
  <a name="996377"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996380"> </a></code><h4>
  <a name="996382"> </a>Prototype 
</h4>
<pre class="proto"><a name="996411"></a>status_t SslLibWake (
   void
)
</pre>
<h4>
  <a name="996443"> </a>Parameters 
</h4>

<p><a name="996496"> </a>None.</p>
<h4>
  <a name="996552"> </a>Returns 
</h4>

<p><a name="996611"> </a></p>

<h3 class="hbH3">
  <a name="996623"> </a>SslOpen Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996628"> </a>Purpose 
</h4>

<p><a name="996631"> </a>Initializes the passed SslContext.</p>
<h4>
  <a name="996633"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996636"> </a></code><h4>
  <a name="996638"> </a>Prototype 
</h4>
<pre class="proto"><a name="996641"></a>status_t SslOpen (
   SslContext <code class="par">*ctx</code>,
   uint16_t <code class="par">mode</code>,
   uint32_t <code class="par">timeout</code>
)
</pre>
<h4>
  <a name="996643"> </a>Parameters 
</h4>

<dl>
<dt><a name="996646"> </a><code>&harr;  <i>ctx</i></code></dt>
<dd><a name="996648"> </a>The SslContext to start a SSL Handshake with.</dd>

<dt><a name="996650"> </a><code>&rarr;  <i>mode</i></code></dt>
<dd><a name="996652"> </a>How we should 'start' this connection. A combination of the values listed under <a href="SslLib.html#1017733">"SSL Open Mode Flags."</a></dd>

<dt><a name="996654"> </a><code>&rarr;  <i>timeout</i></code></dt>
<dd><a name="996656"> </a>Optional timeout (in system ticks).</dd>

</dl>
<h4>
  <a name="996658"> </a>Returns 
</h4>

<p><a name="1016239"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="996663"> </a>Comments 
</h4>

<p><a name="1016127"> </a>Depending on the mode, <code>SslOpen()</code> may or may not actually send the handshake messages during this function call, but may delay the handshake until the first <a href="SslLib.html#997133"><code>SslSend()</code></a>/<a href="SslLib.html#997059"><code>SslReceive()</code></a>. It may not even use the SSL protocol. The mode values can be logically OR'ed together, and their values affect the functionality of the <code>SslOpen()</code> call. If non-fatal network errors occur (timeouts), the function can be re-called. When the function finally returns <code>errNone</code>, the SSL handshake will have completed and any <code>SslContext</code> will be able to return a valid <code>SslSession</code> structure. If one re-calls <code>SslOpen()</code>, make sure to not have either of <code>sslOpenModeClear</code> or <code>SslOpenModeSsl</code> set or the connection will be reset.</p>

<p><a name="1069768"> </a>Quite a few of the mode parameters set flags against the <code>SslContext</code>.  </p>
<h4>
  <a name="996668"> </a>Returns 
</h4>

<p><a name="996671"> </a><a href="SslLib.html#994649"><code>SslClose()</code></a>, <a href="SslLib.html#995438"><code>SslContextSetLong()</code></a>, <a href="SslLib.html#995492"><code>SslContextSetPtr()</code></a></p>

<h3 class="hbH3">
  <a name="996673"> </a>SslPeek Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="996678"> </a>Purpose 
</h4>

<p><a name="996681"> </a>Obtains a pointer into the buffered data that is located in the SslContext.</p>
<h4>
  <a name="996683"> </a>Declared In 
</h4>
<code>SslLib.h<a name="996686"> </a></code><h4>
  <a name="996688"> </a>Prototype 
</h4>
<pre class="proto"><a name="996691"></a>status_t SslPeek (
   SslContext <code class="par">*ctx</code>,
   void <code class="par">**buffer_ptr</code>,
   int32_t <code class="par">*availableBytes</code>,
   int32_t <code class="par">readSize</code>
)
</pre>
<h4>
  <a name="996751"> </a>Parameters 
</h4>

<dl>
<dt><a name="996802"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="996852"> </a>The SslContext to operate on.</dd>

<dt><a name="996926"> </a><code>&larr;  <i>buffer_ptr</i></code></dt>
<dd><a name="996976"> </a>The location to place the data pointer.</dd>

<dt><a name="996978"> </a><code>&larr;  <i>availableBytes</i></code></dt>
<dd><a name="1028136"> </a>The location to place the number of bytes available in <code>*</code><code class="par">buffer_ptr</code>.</dd>

<dt><a name="996982"> </a><code>&rarr;  <i>readSize</i></code></dt>
<dd><a name="996984"> </a>The maximum number of bytes to return.</dd>

</dl>
<h4>
  <a name="996986"> </a>Returns 
</h4>

<p><a name="1028125"> </a>Returns <code>errNone</code> if the operation completed successfully. Otherwise, this function returns one of the error codes listed under <a href="SslLib.html#1001053">"SSL Library Errors."</a></p>
<h4>
  <a name="996991"> </a>Comments 
</h4>

<p><a name="1027796"> </a>This function returns a pointer to available data bytes and assigns the number available to <code class="par">availableBytes</code>. This function does not copy any data bytes from the <code>SslContext</code>, rather it returns a pointer into the buffered data that is located in the <code>SslContext</code>. If there were no data bytes in the <code>SslContext</code>, data will be read from the network until there are data bytes available. Repeated calls to <code>SslPeek()</code> will return the same <code class="par">buffer_ptr</code> value until a <a href="SslLib.html#994860"><code>SslConsume()</code></a> call is done to indicate that bytes no longer need to be buffered. <code class="par">readSize</code> is the maximum number of available bytes that will be reported as being available. </p>

<p><a name="1027797"> </a>This is a more advanced function but is used internally, along with <code>SslConsume()</code>, to build the <a href="SslLib.html#997001"><code>SslRead()</code></a> and <a href="SslLib.html#997059"><code>SslReceive()</code></a> functions. Its main use is for 'streaming' input data where the application does not need to allocate it's own data storage buffers since it can read directly from the <code>SslContext</code> buffers. Once a quantity of data is reported as available in <code>*</code><code class="par">availableBytes</code>, the total will not increase until that number of bytes has been 'consumed'.</p>
<h4>
  <a name="996996"> </a>See Also 
</h4>

<p><a name="996999"> </a><a href="SslLib.html#994860"><code>SslConsume()</code></a>, <a href="SslLib.html#997001"><code>SslRead()</code></a></p>

<h3 class="hbH3">
  <a name="997001"> </a>SslRead Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997006"> </a>Purpose 
</h4>

<p><a name="1027539"> </a>Receives data.</p>
<h4>
  <a name="997011"> </a>Declared In 
</h4>
<code>SslLib.h<a name="997014"> </a></code><h4>
  <a name="997016"> </a>Prototype 
</h4>
<pre class="proto"><a name="997019"></a>int32_t SslRead (
   SslContext <code class="par">*ctx</code>,
   void <code class="par">*buffer</code>,
   int32_t <code class="par">bufferLen</code>,
   status_t <code class="par">*errRet</code>
)
</pre>
<h4>
  <a name="997021"> </a>Parameters 
</h4>

<dl>
<dt><a name="997024"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="997026"> </a>The SslContext to read from.</dd>

<dt><a name="997028"> </a><code>&larr;  <i>buffer</i></code></dt>
<dd><a name="997030"> </a>Buffer into which read data will be placed.</dd>

<dt><a name="997032"> </a><code>&rarr;  <i>bufferLen</i></code></dt>
<dd><a name="997038"> </a>Size of buffer (max bytes read).</dd>

<dt><a name="1027567"> </a><code>&larr;  <i>errRet</i></code></dt>
<dd><a name="1027568"> </a>This will contain an error code if return is -1.</dd>

</dl>
<h4>
  <a name="997044"> </a>Returns 
</h4>

<p><a name="1027556"> </a>Returns the number of bytes successfully received, or -1 if an error occurred.</p>
<h4>
  <a name="997049"> </a>Comments 
</h4>

<p><a name="997052"> </a>Performs the same functionality as <a href="SslLib.html#997059"><code>SslReceive()</code></a>. This call will use the timeout set earlier against the <code>SslContext</code>. </p>
<h4>
  <a name="997054"> </a>See Also 
</h4>

<p><a name="997057"> </a><a href="SslLib.html#997207"><code>SslWrite()</code></a>, <a href="SslLib.html#997133"><code>SslSend()</code></a></p>

<h3 class="hbH3">
  <a name="997059"> </a>SslReceive Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997064"> </a>Purpose 
</h4>

<p><a name="997067"> </a>Receives data.</p>
<h4>
  <a name="997069"> </a>Declared In 
</h4>
<code>SslLib.h<a name="997072"> </a></code><h4>
  <a name="997074"> </a>Prototype 
</h4>
<pre class="proto"><a name="997077"></a>int16_t SslReceive (
   SslContext <code class="par">*ctx</code>,
   void <code class="par">*buffer</code>,
   uint16_t <code class="par">bufferLen</code>,
   uint16_t <code class="par">flags</code>,
   void <code class="par">*fromAddr</code>,
   uint16_t <code class="par">*fromLen</code>,
   int32_t <code class="par">timeout</code>,
   status_t <code class="par">*errRet</code>
)
</pre>
<h4>
  <a name="997079"> </a>Parameters 
</h4>

<dl>
<dt><a name="997082"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="997084"> </a>The SslContext to use.</dd>

<dt><a name="997086"> </a><code>&larr;  <i>buffer</i></code></dt>
<dd><a name="997088"> </a>Buffer into which received data will be placed.</dd>

<dt><a name="997090"> </a><code>&rarr;  <i>bufferLen</i></code></dt>
<dd><a name="997092"> </a>Size of buffer (max bytes received).</dd>

<dt><a name="997094"> </a><code>&rarr;  <i>flags</i></code></dt>
<dd><a name="1027468"> </a>One or more <code>MSG_</code><i>xxx</i> flags (defined in <code>sys/socket.h</code>).</dd>

<dt><a name="997098"> </a><code>&larr;  <i>fromAddr</i></code></dt>
<dd><a name="997100"> </a>Buffer to hold address of sender (<code>sockaddr</code>).</dd>

<dt><a name="997102"> </a><code>&harr;  <i>fromLen</i></code></dt>
<dd><a name="1027441"> </a>On entry, size of <code class="par">fromAddr</code> buffer. On exit, actual size of returned address in <code class="par">fromAddr</code> buffer</dd>

<dt><a name="997106"> </a><code>&rarr;  <i>timeout</i></code></dt>
<dd><a name="997112"> </a>Max timeout in system ticks. -1 means wait forever.</dd>

<dt><a name="997114"> </a><code>&larr;  <i>errRet</i></code></dt>
<dd><a name="1027429"> </a>This will contain an error code if return is -1.</dd>

</dl>

<div><hr>
  <a name="1084384"> </a> <b>NOTE: </b> In Palm OS Cobalt the <code class="par">flags</code> and <code class="par">timeout</code> parameter values are ignored.
<hr>
</div>
<h4>
  <a name="997118"> </a>Returns 
</h4>

<p><a name="1027423"> </a>Returns the number of bytes successfully received, or -1 if an error occurred.</p>
<h4>
  <a name="997123"> </a>Comments 
</h4>

<p><a name="997126"> </a>The function returns either the number of bytes successfully received or -1. If -1, there was an error. In that case, an error code will be deposited at the address given by <code class="par">errRet</code>.</p>
<h4>
  <a name="997128"> </a>See Also 
</h4>

<p><a name="997131"> </a><a href="SslLib.html#997133"><code>SslSend()</code></a>, <code>read()</code></p>

<h3 class="hbH3">
  <a name="997133"> </a>SslSend Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997138"> </a>Purpose 
</h4>

<p><a name="997141"> </a>Sends data over the network.</p>
<h4>
  <a name="997143"> </a>Declared In 
</h4>
<code>SslLib.h<a name="997146"> </a></code><h4>
  <a name="997148"> </a>Prototype 
</h4>
<pre class="proto"><a name="997151"></a>int16_t SslSend (
   SslContext <code class="par">*ctx</code>,
   const void <code class="par">*buffer</code>,
   uint16_t <code class="par">bufferLen</code>,
   uint16_t <code class="par">flags</code>,
   void <code class="par">*toAddr</code>,
   uint16_t <code class="par">toLen</code>,
   int32_t <code class="par">timeout</code>,
   status_t <code class="par">*errRet</code>
)
</pre>
<h4>
  <a name="997153"> </a>Parameters 
</h4>

<dl>
<dt><a name="997156"> </a><code>&rarr;  <i>ctx</i></code></dt>
<dd><a name="997158"> </a>The SslContext to use.</dd>

<dt><a name="997160"> </a><code>&rarr;  <i>buffer</i></code></dt>
<dd><a name="997162"> </a>Buffer containing data to send.</dd>

<dt><a name="997164"> </a><code>&rarr;  <i>bufferLen</i></code></dt>
<dd><a name="997166"> </a>Length, in bytes, of data to send.</dd>

<dt><a name="997168"> </a><code>&rarr;  <i>flags</i></code></dt>
<dd><a name="1084535"> </a>One or more <code>MSG_</code><i>xxx</i> flags (defined in <code>sys/socket.h</code>).</dd>

<dt><a name="997172"> </a><code>&rarr;  <i>toAddr</i></code></dt>
<dd><a name="997174"> </a>Address to send to. See the <code>sendto()</code> manpage.</dd>

<dt><a name="997176"> </a><code>&rarr;  <i>toLen</i></code></dt>
<dd><a name="997178"> </a>Size of <code class="par">toAddr</code> buffer</dd>

<dt><a name="997180"> </a><code>&rarr;  <i>timeout</i></code></dt>
<dd><a name="997182"> </a>Max timeout in system ticks. -1 means wait forever.</dd>

<dt><a name="997188"> </a><code>&larr;  <i>errRet</i></code></dt>
<dd><a name="997190"> </a>This will contain an error code if return is -1.</dd>

</dl>

<div><hr>
  <a name="1084542"> </a> <b>NOTE: </b> In Palm OS Cobalt the <code class="par">flags</code> and <code class="par">timeout</code> parameter values are ignored.
<hr>
</div>
<h4>
  <a name="997192"> </a>Returns 
</h4>

<p><a name="997195"> </a>Returns the number of bytes successfully sent, or -1 if an error occurred.</p>
<h4>
  <a name="997197"> </a>Comments 
</h4>

<p><a name="1027122"> </a>This function mirrors the <code>sendto()</code> function and has similar arguments and semantics.</p>

<p><a name="1027123"> </a>The function returns either the number of bytes successfully sent or -1. If -1, there was an error. In that case, an error code will be deposited at the address given by <code class="par">errRet</code>. The other parameters are the same as for <code>sendto()</code> and are used when the data bytes are written to the network.</p>
<h4>
  <a name="997202"> </a>See Also 
</h4>

<p><a name="997205"> </a><a href="SslLib.html#997059"><code>SslReceive()</code></a>, <code>sendto()</code></p>

<h3 class="hbH3">
  <a name="997207"> </a>SslWrite Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997212"> </a>Purpose 
</h4>

<p><a name="1027784"> </a>Sends data over the network.</p>
<h4>
  <a name="997217"> </a>Declared In 
</h4>
<code>SslLib.h<a name="997220"> </a></code><h4>
  <a name="997222"> </a>Prototype 
</h4>
<pre class="proto"><a name="997225"></a>int32_t SslWrite (
   SslContext <code class="par">*ctx</code>,
   const void <code class="par">*buffer</code>,
   int32_t <code class="par">bufferLen</code>,
   status_t <code class="par">*errRet</code>
)
</pre>
<h4>
  <a name="997227"> </a>Parameters 
</h4>

<dl>
<dt><a name="997230"> </a><code>&larr;  <i>ctx</i></code></dt>
<dd><a name="997232"> </a>The SslContext to write to.</dd>

<dt><a name="997234"> </a><code>&rarr;  <i>buffer</i></code></dt>
<dd><a name="997236"> </a>Buffer containing data to write.</dd>

<dt><a name="997238"> </a><code>&rarr;  <i>bufferLen</i></code></dt>
<dd><a name="997240"> </a>Length, in bytes, of data to write.</dd>

<dt><a name="1027719"> </a><code>&larr;  <i>errRet</i></code></dt>
<dd><a name="1027720"> </a>This will contain an error code if return is -1.</dd>

</dl>
<h4>
  <a name="997246"> </a>Returns 
</h4>

<p><a name="1027707"> </a>Returns the number of bytes successfully sent, or -1 if an error occurred.</p>
<h4>
  <a name="1027631"> </a>Comments 
</h4>

<p><a name="1027632"> </a>Performs the same functionality as <a href="SslLib.html#997133"><code>SslSend()</code></a>. This call will use the timeout set earlier against the <code>SslContext</code>.</p>
<h4>
  <a name="1027633"> </a>See Also 
</h4>

<p><a name="1027634"> </a><a href="SslLib.html#997001"><code>SslRead()</code></a>, <a href="SslLib.html#997133"><code>SslSend()</code></a></p>

<h2 class="haH2">
  <a name="997261"> </a>Application-Defined Functions <a href="#992934"><span class="nav">^TOP^</span></a>
</h2>


<h3 class="hbH3">
  <a name="997269"> </a>SslCallbackFunc Function <a href="#992934"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="997295"> </a>Purpose 
</h4>

<p><a name="997316"> </a>A function that the application supplies to SslLib that will be called when specific situations occur during the SSL protocol. The callbacks are specific to the particular SslContext or SslLib they are registered with.</p>
<h4>
  <a name="997340"> </a>Declared In 
</h4>
<code>SslLib.h<a name="997367"> </a></code><h4>
  <a name="997393"> </a>Prototype 
</h4>
<pre class="proto"><a name="997420"></a>int32_t (
   *SslCallbackFunc
) (
   SslCallback <code class="par">*cb</code>,
   int32_t <code class="par">command</code>,
   int32_t <code class="par">argi</code>,
   void <code class="par">*argv</code>
)
</pre>
<h4>
  <a name="997458"> </a>Parameters 
</h4>

<dl>
<dt><a name="997485"> </a><code>&rarr;  <i>cb</i></code></dt>
<dd><a name="997510"> </a>The <a href="SslLib.html#1070952"><code>SslCallback</code></a> structure itself. </dd>

<dt><a name="997548"> </a><code>&rarr;  <i>command</i></code></dt>
<dd><a name="997574"> </a>A command which specifies the reason for the callback. A single callback structure can be used to handle several different types of SslLib callbacks. In this case, the function must have conditional logic to distinguish between the different commands. The command is used to interpret the remaining two parameters, <code class="par">argi</code> and <code class="par">argv</code>. </dd>

<dt><a name="997576"> </a><code>&rarr;  <i>argi</i></code></dt>
<dd><a name="997578"> </a>A command-specific 32-bit integer, normally used to specify more information about the reason for the callback. </dd>

<dt><a name="997580"> </a><code>&harr;  <i>argv</i></code></dt>
<dd><a name="997581"> </a>Pointer to a value that is normally determined by the <code class="par">command</code> and/or the <code class="par">argi</code> arguments. </dd>

</dl>
<h4>
  <a name="997583"> </a>Returns 
</h4>

<p><a name="997586"> </a>Returns <code>errNone</code> if the callback command was process without error, or a command-specific error code value otherwise.</p>
<h4>
  <a name="997588"> </a>Comments 
</h4>

<p><a name="1036385"> </a>An application will supply an <a href="SslLib.html#1070952"><code>SslCallback</code></a> structure to the SslLib library. When SslLib needs to then invoke the callback, the callback function is called with four arguments. </p>

<p><a name="1036386"> </a>When an <code>SslCallback</code> is passed into SslLib, a copy is taken of the structure. This means that the structure passed in can be thought of as a template. It is important to remember that the data field will be copied, so if the object this element points to must be destroyed, additional logic will be required. When a SslContext is created, the <code>SslCallback</code> structures supplied to the SslLib are copied into the SslContext. This could cause problems if not handled correctly if the data pointed to by the data field is dynamic memory.</p>

<p><a name="1034702"> </a>There are several general 'commands' that all callbacks should expect to receive; these commands are listed under <a href="SslLib.html#1033557">"SSL Callback Commands."</a> There are normally related to creation and destruction of the structure that holds the callback. If the callback does need to perform any action due to these conditions, return 0.</p>
<h4>
  <a name="1034706"> </a>Example 
</h4>

<p><a name="1034727"> </a>If a callback returns a non-zero value, the SSL library will treat this as an error and return this value back out to the application. This can be used to implement abort functionality. While in the callback, any SslLib functions can be called to retrieve further information. If an <code>sslCmdInfoAlert</code> command is being processed, <a href="SslLibMac.html#995028"><code>SslContextGet_LastAlert()</code></a> can be called to retrieve the alert message that was received as shown here:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
alert=SslContextGet_LastAlert(cb-&gt;ssl);<a name="1034729"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1044378"> </a>The alert values that can be returned are listed under <a href="SslLib.html#1043321">"SSL Server Alerts."</a></p>

<p><a name="1034732"> </a>There are two defined callbacks currently used by SslLib: "Info" and "Verify."</p>

<h4 class="hcH4">
  <a name="1034819"> </a>The Info Callback
</h4>

<p><a name="1034821"> </a>For the Info callback, the <code class="par">command</code> parameter is set to <code>sslCmdInfo</code>. The <code class="par">argi</code>, and <code class="par">argv</code> values passed are as follows:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1034930"> </a><b><span style="color: #000000;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">argi</span></b></p>
    </th>
    <th><p class="tt"><a name="1034932"> </a><b>argv type</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034934"> </a><code>sslArgInfoHandshake</code></p>
    </td>
    <td><p class="tt"><a name="1034936"> </a><code>NULL</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034938"> </a><code>sslArgInfoAlert</code></p>
    </td>
    <td><p class="tt"><a name="1034940"> </a><code>NULL</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034942"> </a><code>sslArgInfoReadBefore</code></p>
    </td>
    <td><p class="tt"><a name="1034944"> </a><a href="SslLib.html#993591"><code>SslIoBuf</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034946"> </a><code>sslArgInfoReadAfter</code></p>
    </td>
    <td><p class="tt"><a name="1034948"> </a><a href="SslLib.html#993591"><code>SslIoBuf</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034950"> </a><code>sslArgInfoWriteBefore</code></p>
    </td>
    <td><p class="tt"><a name="1034952"> </a><a href="SslLib.html#993591"><code>SslIoBuf</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034954"> </a><code>sslArgInfoWriteAfter</code></p>
    </td>
    <td><p class="tt"><a name="1034956"> </a><a href="SslLib.html#993591"><code>SslIoBuf</code></a></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1034958"> </a><code>sslArgCert</code></p>
    </td>
    <td><p class="tt"><a name="1034960"> </a><code>SslExtendedItems - </code><span style="color: #000000;  font-style: normal; font-weight: normal; text-decoration: none; text-transform: none; vertical-align: baseline">the certificate sent by the server.</span></p>
    </td>
  </tr>
</table>

</div>


<p><a name="1035481"> </a>See <a href="SslLib.html#1045420">"Info Callbacks"</a> for more information on these <code class="par">argi</code> values.</p>

<p><a name="1048098"> </a>This wealth of information makes it possible for the application to receive notification of state changes in the SSL protocol, receive any SSL protocol alert messages, and track the I/O operation that the SSL protocol is performing. This callback is primarily intended to aid in debugging applications or to provide visual feedback to the progress of the SSL protocol.</p>

<h4 class="hcH4">
  <a name="1035556"> </a>The Verify Callback
</h4>

<p><a name="1035593"> </a>For the Verify callback, the <code class="par">command</code> parameter is set to <code>sslCmdVerify</code>. The <code class="par">argi</code>, and <code class="par">argv</code> values passed are as follows:</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1035628"> </a><b>argi</b></p>
    </th>
    <th><p class="tt"><a name="1035630"> </a><b>argv type</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035632"> </a><code>CertMgrVerifyFailSignature</code></p>
    </td>
    <td><p class="tt"><a name="1035634"> </a><code>SslVerify</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035636"> </a><code>CertMgrVerifyFailUnknownIssuer</code></p>
    </td>
    <td><p class="tt"><a name="1035638"> </a><code>SslVerify</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035640"> </a><code>CertMgrVerifyFailNotAfter</code></p>
    </td>
    <td><p class="tt"><a name="1035642"> </a><code>SslVerify</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035644"> </a><code>CertMgrVerifyFailNotBefore</code></p>
    </td>
    <td><p class="tt"><a name="1035646"> </a><code>SslVerify</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035648"> </a><code>CertMgrVerifyFailBasicConstraints</code> </p>
    </td>
    <td><p class="tt"><a name="1035650"> </a><code>SslVerify</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035652"> </a><code>CertMgrVerifyFailCriticalExtension</code> </p>
    </td>
    <td><p class="tt"><a name="1035654"> </a><code>SslVerify</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035656"> </a><code>errNone</code></p>
    </td>
    <td><p class="tt"><a name="1035658"> </a><code>SslVerify</code></p>
    </td>
  </tr>
</table>

</div>


<p><a name="1035689"> </a>During the SSL handshake the server side sends a certificate to the client. This certificate contains the server's public key. SslLib attempts to verify that the certificate is valid. During this certificate verification process, if there are any errors, the Verify callback is called.</p>

<p><a name="1035690"> </a>The application can, through this callback, override any of the error conditions reported during verification. If there is no Verify callback associated with an SslContext, any errors will immediately be returned to the application.</p>

<p><a name="1035691"> </a>The Verify callback will be called as each certificate in the certificate chain is verified with any error values encountered passed in <code class="par">argi</code> until the certificate is verified. If the certificate verifies ok, the 0 value is passed. This process is repeated for each certificate. This means that even if the certificate chain verifies without an error, the callback will be called once for each certificate (with a 0 <code class="par">argi</code> value). If an Info callback is also registered, it would be called once after the certificate chain has been verified with the server's certificate. If there is no verification callback, and an error occurs, the application can 'clear' the error and re-call the relevant SslLib function. The verification will proceed from where it was up to.</p>

<h5 class="hdH5">
  <a name="1035779"> </a>The SslVerify Structure
</h5>

<p><a name="1074048"> </a>The <code>SslVerify</code> structure is defined as follows:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
typedef struct SslVerify_st {
   SslExtendedItems *certificate;
   SslExtendedItems *fieldItems;   /* Problem field base */
   UInt32 field;                   /* Problem field */
   SslExtendedItems *ex;           /* Extension */
   UInt32 depth;                   /* Certificate depth */
   UInt32 state;                   /* Verification state */
} SslVerify;<a name="1074044"> </a>
</pre><div class="CodeRule"><hr></div>


<div><hr>
  <a name="1074004"> </a> <b>NOTE: </b> The <code>SslVerify</code> structure is not declared in the Palm OS header files. In order to use it you'll have to declare it yourself.
<hr>
</div>

<p><a name="1035710"> </a><code>certificate</code> is a pointer to a structure containing the certificate currently being processed.  <code>fieldItems</code>  is a pointer to a structure that contains the data element that is currently causing a problem. <code>field</code> is the index into <code>fieldItems</code> of the erroneous data element. The <code>ex</code> field, if there is an error in extension processing, contains the data element that makes up the X509 extension that just failed. <code>depth</code> is the level of the certificate being processed, where 0 is the server's certificate, and higher numbers are certificates being used to chain to a trusted root certificate.</p>

<p><a name="1074052"> </a>The following #defines represent the possible values of the <code>state</code> field. They indicate which section of the certificate verification failed. </p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
#define sslVerifyFindParent 1
#define sslVerifySignature 2
#define sslVerifyNotBefore 3
#define sslVerifyNotAfterFindParent 4
#define sslVerifyExtensions 5
#define sslVerifyDone 6<a name="1074053"> </a>
</pre><div class="CodeRule"><hr></div>


<div><hr>
  <a name="1074054"> </a> <b>NOTE: </b> The above #defines are not declared in the Palm OS header files. In order to use them you'll have to declare them yourself.
<hr>
</div>

<p><a name="1074068"> </a><code>fieldItems</code> will not always be the same pointer as <code>certificate</code>.  This is especially true during extension errors.  If we have an error in an extension, and the extension has been "decomposed," the "decomposed" elements will be in the <code>ex</code> field.  The object identifier that identifies the extension "decomposed" in <code>ex</code> would be <code>verify-&gt;fieldItems.item[verify-&gt;field]</code>.</p>

<p><a name="1036178"> </a>The following table lists the elements identified by the <code>fieldItems</code> and <code>field</code> values.</p>


<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <td><p class="tt"><a name="1036254"> </a><code>sslErrCertBadSignature</code></p>
    </td>
    <td><p class="tt"><a name="1036256"> </a>The server's certificate, which contains the public key entries.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036258"> </a><code>SslErrCertNoTrustedRoot</code></p>
    </td>
    <td><p class="tt"><a name="1036260"> </a><code>NULL</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036262"> </a><code>SslErrCertNotAfter</code></p>
    </td>
    <td><p class="tt"><a name="1036264"> </a><code>sslExItemTypeX509</code>, <code>asn1FldX509NotAfter</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036266"> </a><code>SslErrCertNotBefore</code></p>
    </td>
    <td><p class="tt"><a name="1036268"> </a><code>sslExItemTypeX509</code>, <code>asn1FldX509NotBefore</code></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036270"> </a><code>sslErrCertConstraintViolation</code> </p>
    </td>
    <td><p class="tt"><a name="1036272"> </a><code>asn1ExItemTypeX509Ex</code> start location</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036274"> </a><code>sslErrCertUnknownCriticalExtension</code> </p>
    </td>
    <td><p class="tt"><a name="1036276"> </a><code>asn1ExItemTypeX509Ex</code> start location</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036278"> </a><code>SslErrOk</code></p>
    </td>
    <td><p class="tt"><a name="1036280"> </a><code>NULL</code></p>
    </td>
  </tr>
</table>

</div>


<p><a name="1036122"> </a>See the following section, <a href="SslLib.html#1087883">"Extensions and Critical Extensions,"</a> for background on the cases of the returned field being the "<code>asn1ExItemTypeX509Ex</code> start location."</p>

<h5 class="hdH5">
  <a name="1087883"> </a>Extensions and Critical Extensions
</h5>

<p><a name="1036123"> </a>A certificate can have zero or more <b>extensions</b>. These extensions specify extra information to be used during evaluation of a certificate. Each extension consists of an "Object identifier," an optional Boolean "critical extension" flag, and the data bytes. The <code>fieldItems-&gt;item[field]</code> values in this case points to the <code>SslExtendedItem</code> that contains the "Object identifier" for that extension. <code> field+1</code> will reference either the optional Boolean field that flags the extension as critical or the data bytes.</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslVerify *verify;<a name="1036125"> </a>
SslExtendedItem *oid,*critical,*data;<a name="1036126"> </a>
<a name="1036127"> </a>
oid= &amp;(verify-&gt;fieldItems[verify-&gt;field]);<a name="1036128"> </a>
if (verify-&gt;fieldItems[verify-&gt;field+1].data_type == 
asn1Boolean)<a name="1036129"> </a>
   {<a name="1036130"> </a>
   critical=(verify-&gt;fieldItems[verify-&gt;field+1]);<a name="1036131"> </a>
   data=(verify-&gt;fieldItems[verify-&gt;field+2]);<a name="1036132"> </a>
   }<a name="1036133"> </a>
else<a name="1036134"> </a>
   {<a name="1036135"> </a>
   critical=NULL;<a name="1036136"> </a>
   data= &amp;(verify-&gt;fieldItems[verify-&gt;field+1]);<a name="1036137"> </a>
   }<a name="1036138"> </a>
/* The data bytes for the 'data' is located at<a name="1036139"> </a>
 * ((Uint8 *)verify-&gt;fieldItems)+data-&gt;offset;<a name="1036140"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1036142"> </a>SslLib attempts to interpret only critical extensions, so the critical field should always be present. If a critical extension is not understood, the certificate should be rejected. These callback values allow the application to accept a certificate with critical extensions that the application SslLib does not understand.</p>

<p><a name="1036143"> </a>SslLib recognizes three extensions at this point in time, taken from the X.509 standard:</p>


<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1036329"> </a>2.5.29.15</p>
    </td>
    <td><p class="tt"><a name="1036331"> </a><code>KeyUsage</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036333"> </a>2.5.29.37</p>
    </td>
    <td><p class="tt"><a name="1036335"> </a><code>ExtKeyUsage</code> </p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1036337"> </a>2.5.29.19</p>
    </td>
    <td><p class="tt"><a name="1036339"> </a><code>BasicConstraints</code></p>
    </td>
  </tr>
</table>

</div>


<p><a name="1036148"> </a>If any of these constraints are flagged as critical, an error will not occur (assuming they are valid).</p>

<div><hr>
  <a name="1087861"> </a> <b>IMPORTANT: </b> In Palm OS Cobalt version 6.1 and earlier, the SSL library does not process the <code>BasicConstraints</code> or <code>KeyUsage</code> extensions. If the SSL library finds a critical extension of any type, <code>CertMgrVerifyFailCriticalExtension</code> is returned to the application. For more information, see <a href="SslConcepts.html#1073799">"Critical Extensions."</a>
<hr>
</div>

<p><a name="1036149"> </a><code>BasicConstraints</code> is the only extension currently verified.  It specifies if a certificate can be used for signing other certificates.  If the certificate is being used incorrectly, an <code>sslErrCertConstraintViolation</code> error will be generated.  For this error, the <code>ex</code> field of the <code>SslVerify</code> structure will potentially contain</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
asn1ExItemTypeX509ExData, asn1FldX509ExBasicConstraintsCa<a name="1036150"> </a>
asn1ExItemTypeX509ExData, asn1FldX509ExBasicConstraintsPathLenConstraint<a name="1036151"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1036152"> </a>Note that if these optional fields are not in the certificate, they will not be present in the <code>SslExtendedItems</code>. The <code>PathLenConstraint</code> will also not contain any data bytes; rather,. the numeric value this field contains will be encoded in the <code>len</code> field of the <code>SslExtendedItem</code>. If this was not the case, the application would have to learn all about decoding ASN.1 integers. The depth field relates to this certificate. </p>

<p><a name="1036153"> </a>If this error occurs, the application should not override the error, due to its serious nature.</p>

<h5 class="hdH5">
  <a name="1035778"> </a>The SslExtendedItems Structure
</h5>

<p><a name="1035890"> </a>The <code>SslExtendedItems</code> structure is defined as follows:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
typedef struct SslExtendedItems_st {
   UInt32 length;
   UInt32 num;
   SslExtendedItem eitem[1];
} SslExtendedItems;<a name="1035794"> </a>
</pre><div class="CodeRule"><hr></div>


<div><hr>
  <a name="1074020"> </a> <b>NOTE: </b> The <code>SslExtendedItems</code> structure is not declared in the Palm OS header files. In order to use it you'll have to declare it yourself.
<hr>
</div>

<p><a name="1035792"> </a>The <code>SslExtendedItems</code> structure is used to hold a set of <code>SslExtendedItem</code> structures. The <code>eitem</code> field, while defined as a size of one, is actually large enough to hold <code>num</code> entries. The <code>length</code> field is the total size of the structure. The structure can be copied by allocating <code>length</code> bytes and then copying <code>length</code> bytes from the <code>SslExtendedItems</code> pointer into the new location. An <code>SslExtendedItems</code> structure is used to hold sets of related data elements. A set of such values may contain a RSA public key, a certificate, and a certificate extension all in the same <code>SslExtendedItems</code> structure. </p>

<h5 class="hdH5">
  <a name="1035816"> </a>The SslExtendedItem Structure
</h5>

<p><a name="1035840"> </a>Each <code>SslExtendedItem</code> belongs to a type that is predefined for each of these objects.</p>

Currently defined values are:<br>
<div class="tablediv"><table cellspacing="0" class="tTableNR">

  <tr valign="top">
    <td><p class="tt"><a name="1035949"> </a><code>sslExItemTypeX509</code></p>
    </td>
    <td><p class="tt"><a name="1035951"> </a>X.509 Certificate.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035953"> </a><code>SslExItemTypeRSA</code></p>
    </td>
    <td><p class="tt"><a name="1035955"> </a>RSA public key.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035957"> </a><code>sslExItemTypeRDN</code></p>
    </td>
    <td><p class="tt"><a name="1035959"> </a>An X.509 Relative Distinguished Name (RDN). This is a complex way of saying a certificate name. Each certificate contains two names, the Subject of the certificate and the Issuer of the certificate. Both are encoded as RDNs which contain multiple fields.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035961"> </a><code>sslExItemTypeX509Ex</code></p>
    </td>
    <td><p class="tt"><a name="1035963"> </a>X.509 certificates can contain what are called Extensions. A certificate can contain multiple extensions. This type is used to specify extensions.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="1035965"> </a><code>SslExItemTypeE509ExData</code></p>
    </td>
    <td><p class="tt"><a name="1035967"> </a>Used to group 'decomposed' X.509 extensions.</p>
    </td>
  </tr>
</table>

</div>


<p><a name="1035847"> </a>The <code>SslExtendedItem</code> structure is defined as follows:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
typedef struct SslExtendedItem_st {
   UInt16 type;
   UInt16 field;
   UInt16 dataType;
   UInt16 len;
   UInt32 offset;
} SslExtendedItem;<a name="1035848"> </a>
</pre><div class="CodeRule"><hr></div>


<div><hr>
  <a name="1074030"> </a> <b>NOTE: </b> The <code>SslExtendedItem</code> structure is not declared in the Palm OS header files. In order to use it you'll have to declare it yourself.
<hr>
</div>

<p><a name="1035856"> </a>An <code>SslExtendedItem</code> structure is a single data element. The <code>type</code> field values (as specified in the preceding table) are used to group related items. A single <code>SslExtendedItems</code> structure can contain multiple <code>SslExtendedItem</code> structures with different <code>type</code> values. In this way a single structure can contain elements referring to both a certificate and an RSA public key.</p>

<p><a name="1035857"> </a>The <code>field</code> field contains a type-specific value that is used to identify the <code>SslExtendedItem</code>. The values for this field are defined specifically for each type.</p>

<p><a name="1035858"> </a>The <code>dataType</code> field specifies the encoding type of the data. For the cases being used by SslLib, the value is the ASN.1 encoding type. These values are defined in the <code>SslLibAsn1.h</code>  header file. They are relevant primarily if the application is attempting to display the data bytes. </p>

<p><a name="1035859"> </a>The <code>len</code> field is the length of the data in the <code>SslExtendedItem</code> </p>

<p><a name="1035860"> </a>The <code>offset</code> field is the offset from the start of the parent <code>SslExtendedItems</code> to the data field.</p>

<p><a name="1035861"> </a>To access all the data bytes in an <code>SslExtendedItems</code> structure:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
SslExtendedItems *ei;<a name="1035863"> </a>
UInt16 i,j;<a name="1035864"> </a>
UInt8 *p;<a name="1035865"> </a>
<a name="1035866"> </a>
for (i=0; i&lt;ei-&gt;num; i++) {<a name="1035867"> </a>
   p=((Uint8 *)ei)+ei-&gt;eitem[i].offset;<a name="1035869"> </a>
<a name="1035870"> </a>
   for (j=0; j&lt;ei-&gt;eitem[i].len; j++)<a name="1036089"> </a>
      doSomething(p[j]);<a name="1036090"> </a>
}<a name="1036091"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="1035875"> </a>An <code>SslExtendedItems</code> structure will often contain multiple types. When SslLib returns an <code>SslExtendedItems</code> structure for a certificate, it will usually contain the types <code>sslExItemTypeX509</code>, <code>sslExItemTypeRSA</code>, and <code>sslExItemTypeRDN</code> (for the subject name).</p>
<h4>
  <a name="1035601"> </a>Example 
</h4>

<p><a name="1035595"> </a>Following is an example of usage from the SslLib, for the 'information' callback:</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
Int32 info_callback(SslCallback *cb,Int32 command,<a name="1032359"> </a>
   Int32 argi,void *argv);<a name="1032360"> </a>
<a name="1032361"> </a>
SslCallback infoCB;<a name="1032362"> </a>
<a name="1032363"> </a>
infoCB.callback=info_callback;<a name="1032364"> </a>
SslContextSet_InfoCallback(ssl,&amp;infoCB);<a name="1032365"> </a>
SslContextSet_InfoInteresrt(ssl,<a name="1032366"> </a>
   sslFlgInfoAlert|<a name="1032367"> </a>
   sslFlgInfoHandshake|<a name="1032368"> </a>
   sslFlgInfoIo);<a name="1032369"> </a>
<a name="1032370"> </a>
/* We have now configured the SslContext so that<a name="1032371"> </a>
 * info_callback will be called when 'interesting' events<a name="1032372"> </a>
 * occur. */<a name="1032373"> </a>
<a name="1032374"> </a>
Int32 info_callback(SslCallback *cb,Int32 command,<a name="1032375"> </a>
   Int32 argi, void *argv)<a name="1032376"> </a>
   {<a name="1032377"> </a>
   UInt32 alert;<a name="1032378"> </a>
<a name="1032379"> </a>
   switch (command){<a name="1032380"> </a>
   case sslCmdInfo:<a name="1032382"> </a>
      /* We have received an 'info' call */<a name="1032383"> </a>
      switch (argi){<a name="1032384"> </a>
      case sslArgInfoHandshake:<a name="1032386"> </a>
         /* The SslContext is in the handshake stage<a name="1032387"> </a>
            of connection establishment. */<a name="1032388"> </a>
         break;<a name="1032389"> </a>
      case sslArgInfoAlert:<a name="1032390"> </a>
         /* An Alert message was received by the SslContext*/<a name="1032391"> </a>
         alert=SslContextGet_LastAlert(cb-&gt;ssl);<a name="1032393"> </a>
         break;<a name="1032394"> </a>
      case sslArgInfoReadBefore:<a name="1032395"> </a>
      case sslArgInfoReadAfter:<a name="1032396"> </a>
      case sslArgInfoWriteBefore:<a name="1032397"> </a>
      case sslArgInfoWriteAfter:<a name="1032398"> </a>
         /* The SslContext is doing network operations */<a name="1032399"> </a>
         break;<a name="1032401"> </a>
      }<a name="1032402"> </a>
      break;<a name="1032403"> </a>
   case sslCmdNew:   /* Called when we are 'copied in' */<a name="1032404"> </a>
   case sslCmdFree:   /* Called when we are 'finished' */<a name="1032405"> </a>
   case sslCmdReset:   /* Called instead of 'sslCmdNew' to
      reset the settings */<a name="1032406"> </a>
   case sslCmdSet:   /* Set a value */<a name="1032407"> </a>
   case sslCmdGet:   /* Get a value */<a name="1032408"> </a>
      break;<a name="1032409"> </a>
   }<a name="1032410"> </a>
   return(0);<a name="1032411"> </a>
}<a name="1032412"> </a>
</pre><div class="CodeRule"><hr></div>


<p><a name="992930"> </a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1996&#8211;2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="SecurityAndCrypto_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="SecurityAndCryptographyTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SignVfy.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SslLibMac.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="SecurityAndCryptographyIX.html">Index</a>
</p>
</td>
</tr>
</table>
<!-- END FOOTER -->

</body>
</html>