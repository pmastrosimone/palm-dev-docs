<html>
<head>
<title>Password Library | C/C++ Sync Suite Reference</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="KEYWORDS" CONTENT="C, C++, C/C++ Sync Suite, Password Library, library, password, reference, API, CDK, conduit, conduits, Windows">
<META NAME="DESCRIPTION" CONTENT="Provides reference details on the Password Library in the C/C++ Sync Suite.">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource HTML 20040609">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="LASTUPDATED" CONTENT="06/28/04 08:30:20">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="995936"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="C++SyncReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CRef_UserData.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CRef_Notifier.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="C++SyncReferenceIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">17 &nbsp;&nbsp;
Password Library</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">C/C++ Sync Suite Reference</p>
<p class="SubTitle">Palm OS&#174; Conduit Development Kit for Windows, Version 6.0.1 </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1-PartTab"><a href="CRef_Part_Desktop.html">Part III: Desktop Support APIs</a> </h1>
<h1 class="SideTOC1"><a href="CRef_PwdLib.html">17  Password Library</a></h1>

   <h2 class="SideTOC2"><a href="#995954">
   Password Library Functions</a></h2>

      <h3 class="SideTOC3"><a href="#995961">
      PwdVerify</a></h3>

</div>
</td>
<!--END SIDETOC-->

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>
<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="995945"> </a>The Password Library enables external applications to verify whether a user-supplied, nonencrypted string matches the stored, encrypted password. </p>

<p><a name="995947"> </a>This function is provided as a library function in <code>PWD5.lib</code> and is declared in <code>password.h</code>. </p>
   <blockquote class = "bq"><a name="995952"> </a><a href="CRef_PwdLib.html#995954">Password Library Functions</a></blockquote>

<h2 class="haH2">
  <a name="995954"> </a>Password Library Functions <a href="#995936"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="995955"> </a>This section describes the one function in the Password Library, <a href="CRef_PwdLib.html#995961"><code>PwdVerify()</code></a>.</p>

<h3 class="hbH3">
  <a name="995961"> </a>PwdVerify Function <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>

<h4>
  <a name="995963"> </a>Purpose 
</h4>

<p><a name="995964"> </a>Verifies that a user-supplied, unencrypted string matches the stored, encrypted password.</p>
<h4>
  <a name="995965"> </a>Declared In 
</h4>
<code>password.h<a name="995966"> </a></code><h4>
  <a name="995967"> </a>Prototype 
</h4>
<pre class="proto"><a name="995968"></a>BOOL PwdVerify (
   char <code class="par">*sEncryptedPwd</code>,
   const char <code class="par">*sPassword</code>
)
</pre>
<h4>
  <a name="995969"> </a>Parameters 
</h4>

<dl>
<dt><a name="995970"> </a><code>&rarr;  <i>sEncryptedPwd</i></code></dt>
<dd><a name="995971"> </a>A pointer to a null-terminated character buffer containing the encrypted password to verify against.</dd>

<dt><a name="995972"> </a><code>&rarr;  <i>sPassword</i></code></dt>
<dd><a name="995973"> </a>A pointer to null-terminated character buffer containing the nonencrypted password to verify. </dd>

</dl>
<h4>
  <a name="995974"> </a>Returns 
</h4>

<p><a name="995975"> </a>If the <code class="par">sPassword</code> value (after <code>PwdVerify()</code> encrypts it) matches the <code class="par">sEncryptedPwd</code> value, returns <code>true</code>. </p>

<p><a name="995976"> </a>If the values do not match, returns <code>false</code>.</p>
<div class="NINoteImportant"><hr>
  <a name="995977"> </a> <b>NOTE: </b> <code>PwdVerify()</code> is case-sensitive. It detects a match only if the strings match, including case.
<hr>
</div>
<h4>
  <a name="995978"> </a>Comments 
</h4>

<p><a name="995979"> </a>The user can set a password on the device to control access to private records and to unlock the device. During a HotSync<sup>&#174;</sup> session, HotSync Manager compares the encrypted password on the device with the encrypted password stored in the users data file. If they do not match (or if the users data file contains no password for the user), HotSync Manager updates the file with the password on the device. On the desktop, an application can use the same password to control access to the user's data. </p>

<p><a name="995980"> </a>For example, if an application prompts the user to enter a password in a dialog box, it must call <a href="CRef_UserData.html#996925"><code>UmGetUserPassword()</code></a> to retrieve the user's encrypted password from the users data file. The application then calls <code>PwdVerify()</code> to verify that the user supplied the correct password. <code>PwdVerify()</code> encrypts the user-supplied, unencrypted string (<code class="par">sPassword</code>) and compares it to the stored, encrypted password (<code class="par">sEncryptedPwd</code>) retrieved by <a href="CRef_UserData.html#996925"><code>UmGetUserPassword()</code></a>. If <code>PwdVerify()</code> returns <code>true</code>, the user supplied the correct password. </p>
<h4>
  <a name="997797"> </a>Compatibility 
</h4>
<div class="NINoteImportant"><hr>
  <a name="997845"> </a> <b>NOTE: </b> Palm OS Cobalt does not allow the user's password on the device to be transferred the desktop as described above. Instead such users can set an independent password using the Palm OS<sup>&#174;</sup> Desktop software, which you can verify against using <code>PwdVerify()</code>.
<hr>
</div>

<p><a name="997798"> </a>In Palm OS 4.0 and later, passwords on the device are case-sensitive. Therefore <code>PwdVerify()</code> returns <code>true</code> only if the user-supplied string is identical, including case, to the stored password.</p>

<p><a name="995989"> </a>However, in Palm OS versions earlier than 4.0, the Security application on the device converts all uppercase characters in a password to lowercase characters when the user sets a password. Therefore for the desktop's <code>PwdVerify()</code> function to detect a match with the converted password, the caller must ensure that the user-supplied, unencrypted password it passes via the <code class="par">sPassword</code> parameter contains no uppercase characters. If <code class="par">sPassword</code> contains any uppercase characters, <code>PwdVerify()</code> always returns <code>false</code>.</p>

<p><a name="995990"> </a>To determine whether you must make the user-supplied, unencrypted string lowercase before calling <code>PwdVerify()</code>, you must know the version of Palm OS on the user's device. During HotSync operations, call <a href="CRef_SyncCommon.html#1000542"><code>SyncGetHHOSVersion()</code></a> to get the device's major Palm OS version number. To use <code>PwdVerify()</code> outside of a HotSync operation, you can store the user's Palm OS version on the desktop using the User Data API&#8212<a href="CRef_UserData.html#997330"><code>UmSetInteger()</code></a>, for example&#8212and then retrieve it later to determine whether you should convert the user-supplied string to lowercase before calling <code>PwdVerify()</code>.</p>
<h4>
  <a name="995997"> </a>See Also 
</h4>

<p><a name="996001"> </a><a href="CRef_UserData.html#996925"><code>UmGetUserPassword()</code></a></p>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 1998-2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="CRef_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="C++SyncReferenceTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CRef_UserData.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CRef_Notifier.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="C++SyncReferenceIX.html">Index</a>
</p>
</td>
</tr>
<!-- END FOOTER -->

</body>
</html>