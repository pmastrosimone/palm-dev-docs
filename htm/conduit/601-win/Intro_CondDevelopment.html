<html>
<head>
<title>Conduit Development | Introduction to Conduit Development</title> 
<link href="psi_devpubs.css" rel="stylesheet" type="text/css">

<!-- BEGIN META DATA -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="KEYWORDS" CONTENT="conduit, conduits, development, design, developer, start, Generic Conduit, suite, suites, comparison, features, CDK">
<META NAME="DESCRIPTION" CONTENT="Provides the background for deciding which development approach best meets your conduit's requirements and which of the available Palm CDK suites supports that approach.">
<META NAME="PSITEMPLATE" CONTENT="1006-007 PalmSource HTML 20040609">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="LASTUPDATED" CONTENT="06/28/04 08:30:39">
<!-- END META DATA -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="995936"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td><img src="images/shim.gif" width="7" height="75" border="0" alt=""></td>
<td align="left"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="25" height="75" border="0" alt=""></td>
<td valign="top"><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="15" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>

</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--BEGIN MASTHEAD-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<tr>
<td>
<!--BEGIN BOOK NAVIGATION-->
<span class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="IntroToConduitsTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Intro_Trust.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Intro_CfgEntries.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="IntroToConduitsIX.html">Index</a>
</span>
<!--END BOOK NAVIGATION-->
</tr>
<tr>
<td>
<!--BEGIN PAGE TITLE-->
<h2 class="PageTitle">10 &nbsp;&nbsp;
Conduit Development</h2></td>
<!--END PAGE TITLE-->
</tr>
<tr>
<td>
<!--BEGIN BOOK TITLE-->
<p class="BookTitle">Introduction to Conduit Development</p>
<p class="SubTitle">Palm OS&#174; Conduit Development Kit for Windows, Version 6.0.1 </p>
<!--END BOOK TITLE-->
</td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--END MASTHEAD-->
</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="5"><img name="index_x" src="images/shim.gif" width="5" height="33" border="0" alt=""></td>

<!--BEGIN SIDETOC-->
<td valign="top" width="175">
<div id="sidetoc" valign="bottom">
<h1 class="SideTOC1"><a href="Intro_CondDevelopment.html">10  Conduit Development</a></h1>

   <h2 class="SideTOC2"><a href="#995952">
   Choosing a Starting Point</a></h2>

      <h3 class="SideTOC3"><a href="#995964">
      First Decisions</a></h3>

      <h3 class="SideTOC3"><a href="#996053">
      Comparing Key Features</a></h3>

   <h2 class="SideTOC2"><a href="#996598">
   Generic Conduit Framework</a></h2>

   <h2 class="SideTOC2"><a href="#996718">
   Classic Sync Manager API</a></h2>

      <h3 class="SideTOC3"><a href="#996732">
      Registering Your Conduit with Sync Manager</a></h3>

      <h3 class="SideTOC3"><a href="#996744">
      Opening Your Database</a></h3>

      <h3 class="SideTOC3"><a href="#996848">
      Working with Databases</a></h3>

      <h3 class="SideTOC3"><a href="#997082">
      Deleting Records in Handheld Databases</a></h3>

      <h3 class="SideTOC3"><a href="#997172">
      Cleaning Up Records</a></h3>

      <h3 class="SideTOC3"><a href="#997198">
      Closing Your Database</a></h3>

</div>
</td>
<!--END SIDETOC-->

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif"><img src="images/shim.gif" width="2" height="75" border="0" alt=""></td>
<td width="5">&nbsp;&nbsp;</td>
<td valign="top">

<!--BEGIN CONTENT-->
<div id="content" valign="bottom">
<p><a name="995937"> </a>This chapter provides the background for deciding which development approach best meets your conduit's requirements and which of the available CDK suites supports that approach.</p>

<p><a name="1005231"> </a>This chapter describes the following topics: </p>
   <blockquote class = "bq"><a name="1005235"> </a><a href="Intro_CondDevelopment.html#995952">Choosing a Starting Point</a></blockquote>
   <blockquote class = "bq"><a name="1005239"> </a><a href="Intro_CondDevelopment.html#996598">Generic Conduit Framework</a></blockquote>
   <blockquote class = "bq"><a name="995950"> </a><a href="Intro_CondDevelopment.html#996718">Classic Sync Manager API</a></blockquote>

<h2 class="haH2">
  <a name="995952"> </a>Choosing a Starting Point <a href="#995936"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="995953"> </a>This section lays out the first decisions you need to make and then presents a feature comparison of the CDK's sync suites.</p>
<ul type="disc">
  <li><a name="995957"> </a><a href="Intro_CondDevelopment.html#995964">First Decisions</a> 
  <li><a name="995961"> </a><a href="Intro_CondDevelopment.html#996053">Comparing Key Features</a> 
</ul>
<h3 class="hbH3">
  <a name="995964"> </a>First Decisions <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="995965"> </a>This section outlines the issues you should consider when deciding which sync suite best meets your needs:</p>
<ol type="1">
  <li value="1"><a name="995968"> </a><b>Choose whether to use the low-level interface or the Generic Conduit Framework.</b> As shown in <a href="Intro_CondDevelopment.html#1001806">Table 10.2</a>, the C/C++ Sync Suite provides an implementation of the Generic Conduit Framework; all suites provide a lower-level interface that directly or indirectly corresponds to the C-based Sync Manager API. 
   <p><a name="995975"> </a>Use <a href="Intro_CondDevelopment.html#995980">Table 10.1</a> to help you compare these starting points based on your design requirements. </p>
</ol>

<p class="fineprint">
<p class="caption"><a name="995980"> </a><b>Table 10.1&nbsp;&nbsp;Comparison of Generic Conduit Framework and low-level API </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="995986"> </a><b>Conduit Design Requirement</b></p>
    </th>
    <th><p class="tt"><a name="995988"> </a><b>Low-level Sync Manager API<a href="#995992"><sup>1</sup></a></b></p>
    </th>
    <th><p class="tt"><a name="995994"> </a><b>Generic Conduit Framework<a href="#995997"><sup>2</sup></a></b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="995999"> </a>Interfacing to standard data sources (Access, ODBC, CSV, etc.)</p>
    </td>
    <td><p class="tt"><a name="996001"> </a></p>
    </td>
    <td><p class="tt"><a name="996003"> </a>Best</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996005"> </a>MFC-based application</p>
    </td>
    <td><p class="tt"><a name="996007"> </a></p>
    </td>
    <td><p class="tt"><a name="996009"> </a>Good</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996011"> </a>Cross-platform source code</p>
    </td>
    <td><p class="tt"><a name="996013"> </a></p>
    </td>
    <td><p class="tt"><a name="996015"> </a>Best</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996017"> </a>Fast prototype application development</p>
    </td>
    <td><p class="tt"><a name="996019"> </a>Good</p>
    </td>
    <td><p class="tt"><a name="996021"> </a>Good (use Conduit Wizard<a href="#996024"><sup>3</sup></a>)</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996026"> </a>Upload/download data transfer</p>
    </td>
    <td><p class="tt"><a name="996028"> </a>Best</p>
    </td>
    <td><p class="tt"><a name="996030"> </a>Good</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996032"> </a>Online/offline transaction processing</p>
    </td>
    <td><p class="tt"><a name="996034"> </a>Best</p>
    </td>
    <td><p class="tt"><a name="996036"> </a></p>
    </td>
  </tr>
</table>
<div class="tablediv"><table cellspacing="0" class="tTableNR">
   <tr>
     <td><div class="FNTFootnoteTable">
<a name="995992"> </a><a href="#995988">1</a>. 
In all suites, a lower-level interface is available. In the C/C++ Sync Suite, conduits can access the Sync Manager directly. In the COM Sync Suite, conduits can access the Sync Manager indirectly via the COM Sync module.</div>
<div class="FNTFootnoteTable">
<a name="995997"> </a><a href="#995994">2</a>. 
Available in the C/C++ Sync Suite.</div>
<div class="FNTFootnoteTable">
<a name="996024"> </a><a href="#996021">3</a>. 
Available only in the C/C++ Sync Suite.</div>
</td>
   </tr>
</table></div>

</div>

</p>
<ol type="1">
  <li value="2"><a name="996042"> </a><b>Choose a suite.</b> <a href="Intro_CondDevelopment.html#1001806">Table 10.2</a> provides a high-level comparison of the CDK's sync suites. Use this table and the <i>Companion</i> documents that come with each suite to help you decide which best meets your needs (see <a href="Intro_About.html#991618">"Related Documentation"</a>). 
   <p><a name="996046"> </a>The main advantages of the different suites are: </p>
  <ul type="disc">
    <li><a name="996047"> </a>The C/C++ Sync Suite provides a superset of all features, so that some developers must use it to meet all their requirements.
    <li><a name="996049"> </a>The COM Sync Suite enables you to develop a conduit in any COM-enabled language, including a procedural language like Visual Basic. The COM Sync Suite offers a simple COM interface for your conduit to access several of the underlying C APIs.
  </ul>
</ol>
<h3 class="hbH3">
  <a name="996053"> </a>Comparing Key Features <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996057"> </a><a href="Intro_CondDevelopment.html#1001806">Table 10.2</a> compares the key features of each sync suite. This table does not intend to be a comprehensive list of CDK features. To learn more about each suite, see <a href="Intro_About.html#991618">"Related Documentation."</a> </p>

<p><a name="996064"> </a><a href="Intro_CondDevelopment.html#1001806">Table 10.2</a> compares the following features:</p>
<ul type="disc">
  <li><a name="996065"> </a><span style="color: #333;;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Desktop Features Supported</span> lists features that are available via an API in each sync suite. Other features mentioned are important for developing desktop applications or conduit and handheld application installers.
  <li><a name="996066"> </a><b>IDEs and Development Platforms Supported</b> lists the integrated development environments that PalmSource, Inc. supports for each suite. 
  <li><a name="996067"> </a><span style="color: #333;;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">Deployment Platforms Supported</span> lists the platforms on which PalmSource, Inc. supports conduit deployment. 
</ul>

<p class="fineprint">
<p class="caption"><a name="1001806"> </a><b>Table 10.2&nbsp;&nbsp;Feature comparison of CDK sync suites </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="1001818"> </a><b>Suite</b></p>
    </th>
    <th><p class="tt"><a name="1001820"> </a><b>COM Sync Suite</b></p>
    </th>
    <th><p class="tt"><a name="1001822"> </a><b>C/C++ Sync Suite</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td colspan="3" rowspan="1"><p class="tt"><a name="1001839"> </a><b>Desktop Features Supported </b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001845"> </a>User Data (or User Manager) API&#8212to access information about HotSync Manager users and expansion cards in handhelds</p>
    </td>
    <td><p class="tts"><a name="1001847"> </a>Yes</p>
    </td>
    <td><p class="tts"><a name="1001849"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001851"> </a>Conduit Manager&#8212for an installer to register conduits with HotSync Manager</p>
    </td>
    <td><p class="tts"><a name="1001853"> </a>Yes</p>
    </td>
    <td><p class="tts"><a name="1001855"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001857"> </a>Notifier DLLs&#8212to tell desktop application when HotSync operation starts/stops</p>
    </td>
    <td><p class="tts"><a name="1001859"> </a>No</p>
    </td>
    <td><p class="tts"><a name="1001861"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001863"> </a>Notifier Install Manager&#8212for an installer to register notifiers with HotSync Manager</p>
    </td>
    <td><p class="tts"><a name="1001865"> </a>Yes</p>
    </td>
    <td><p class="tts"><a name="1001867"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001869"> </a>Install Conduit Manager&#8212for an installer to register an install conduit with HotSync Manager</p>
    </td>
    <td><p class="tts"><a name="1001871"> </a>Yes </p>
    </td>
    <td><p class="tts"><a name="1001873"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001875"> </a>Install Aide&#8212for an installer to install applications in handheld's primary memory or files on expansion cards</p>
    </td>
    <td><p class="tts"><a name="1001877"> </a>Yes </p>
    </td>
    <td><p class="tts"><a name="1001879"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="3" rowspan="1"><p class="tt"><a name="1001881"> </a><b>IDEs and Development Platforms Supported</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001887"> </a>Microsoft Visual Studio .NET (Visual C++ and Visual Basic) 2003<a href="#1006517"><sup>1</sup></a>:<br>   Windows 2000 and XP</p>
    </td>
    <td><p class="tts"><a name="1001889"> </a>Yes</p>
    </td>
    <td><p class="tts"><a name="1001891"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="3" rowspan="1"><p class="tt"><a name="1001920"> </a><b>Deployment Platforms Supported</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001926"> </a>Windows 98SE, ME, 2000, XP</p>
    </td>
    <td><p class="tts"><a name="1001928"> </a>Yes</p>
    </td>
    <td><p class="tts"><a name="1001930"> </a>Yes</p>
    </td>
  </tr>
  <tr valign="top">
    <td colspan="3" rowspan="1"><p class="tt"><a name="1001938"> </a><b>Extras</b></p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tts"><a name="1001944"> </a>Wizard to automatically generate project and starter code</p>
    </td>
    <td><p class="tts"><a name="1001946"> </a>No</p>
    </td>
    <td><p class="tts"><a name="1001948"> </a>Yes</p>
    </td>
  </tr>
</table>
<div class="tablediv"><table cellspacing="0" class="tTableNR">
   <tr>
     <td><div class="FNTFootnoteTable">
<a name="1006517"> </a><a href="#1001887">1</a>. 
Visual Studio .NET 2002 and Visual Basic 6 have been verified to work, but they are not officially supported. </div>
</td>
   </tr>
</table></div>

</div>

</p>

<h2 class="haH2">
  <a name="996598"> </a>Generic Conduit Framework <a href="#995936"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="996599"> </a>Creating a conduit using the Generic Conduit Framework is a matter of deriving certain classes and customizing them for the data formats you wish to use on the handheld or the desktop computer. </p>

<p><a name="996603"> </a><a href="Intro_CondDevelopment.html#996611">Figure 10.1</a> illustrates the structure of the Generic Conduit Framework. These class names are the C++ Generic Conduit class names. To see the Generic Conduit structure in other suites, refer to the documents for each suite described in <a href="Intro_About.html#991618">"Related Documentation."</a> </p>

<p class="FFigureCaption">
  <a name="996611"> </a><b>Figure 10.1&nbsp;&nbsp;Generic Conduit Framework </b>
</p>
<div align="left"><img src="images/Intro_CondDevelopmenta.gif" height="330" width="624" border="0" hspace="0" vspace="0">
</div>

<p><a name="996690"> </a>The Generic Conduit Framework consists of the following base classes: </p>
<ul type="disc">
  <li><a name="996691"> </a><b>Category</b> classes access and manage standard Palm OS<sup>&#174;</sup> category data.
  <li><a name="996692"> </a><b>Record</b> classes convert records between the format on the handheld and the format on the desktop computer.
  <li><a name="996693"> </a><b>Synchronization logic</b> classes divided into these groups:
  <ul type="disc">
    <li><a name="996694"> </a><b>Database Manager</b> classes store and retrieve records from the handheld or the desktop computer.
    <li><a name="996695"> </a><b>Synchronizer</b> classes synchronize records and the application info block from a database on the handheld. The core synchronization logic is implemented in these classes. 
  </ul>
  <li><a name="996696"> </a>The <b>Logging</b> class is used to print diagnostic information into a log file maintained by HotSync Manager.
</ul>

<p><a name="996697"> </a>The following steps summarize how to implement a conduit based on the Generic Conduit Framework and to customize it for your record format. </p>
<ul type="disc">
  <li><a name="996698"> </a>Step 1: Describe your record format.
  <li><a name="996699"> </a>Step 2: Implement the storage and retrieval of your records.
  <li><a name="996700"> </a>Step 3: Implement the storage and retrieval of a backup database or an archive database.
  <li><a name="996701"> </a>Step 4: Implement the conversion of records to/from the generic <code>CPalmRecord</code> format. 
  <li><a name="996702"> </a>Step 5: Implement any synchronization of <code>AppInfo</code> data. 
</ul>

<p><a name="996703"> </a>These basic steps are the same across all suites, but exact implementation varies. For more information, see the documentation for each suite. </p>

<p><a name="996704"> </a>The following steps outline the basic flow of control for a typical synchronization operation when the HotSync<sup>&#174;</sup> Manager passes control to a conduit based on the Generic Conduit Framework: </p>
<ol type="1">
  <li value="1"><a name="996705"> </a>HotSync Manager calls your <code>OpenConduit()</code> function (or in other suites, the method that starts your synchronization process), which must examine the synchronization properties passed to it to determine the type of synchronization (fast sync or slow sync). 
  <li value="2"><a name="996706"> </a>Your <code>OpenConduit()</code> function instantiates a <code>CSynchronizer</code> object and performs the following tasks:
  <ol type="a">
    <li><a name="996707"> </a>Registers the conduit (only in C API-based conduits).
    <li><a name="996708"> </a>Examines the synchronization properties passed to it to determine the type of synchronization, typically fast sync or slow sync.
    <li><a name="996709"> </a>Creates the Database Manager objects (handheld, desktop, archive, and backup). 
    <li><a name="996710"> </a>Synchronizes category information using the provided synchronization logic. 
    <li><a name="996711"> </a>Synchronizes application information (<code>AppInfo</code> block). 
    <li><a name="996712"> </a>Synchronizes records using the Fast Sync, Slow Sync, HH overwrites desktop, Desktop overwrites HH, or No Action. 
    <li><a name="996713"> </a>Deletes the Manager objects. 
    <li><a name="996714"> </a>Logs results to the HotSync log. 
  </ol>
</ol>

<p><a name="996715"> </a>See the sample conduits provided with each suite to follow the execution flow. </p>

<h2 class="haH2">
  <a name="996718"> </a>Classic Sync Manager API <a href="#995936"><span class="nav">^TOP^</span></a>
</h2>


<p><a name="996719"> </a>This section describes the flow of calls from a typical conduit to the classic Sync Manager in the C/C++ Sync Suite. These basic concepts are the same across all suites, but exact implementation varies. For more information, see the documentation for each suite described in <a href="Intro_About.html#991618">"Related Documentation."</a> </p>

<p><a name="996723"> </a>Calls to the classic Sync Manager fall into the following categories:</p>
<ul type="disc">
  <li><a name="996724"> </a>registering the conduit (only in C API-based conduits)
  <li><a name="996725"> </a>opening a database
  <li><a name="996726"> </a>reading and writing records
  <li><a name="996727"> </a>working with record categories
  <li><a name="996728"> </a>closing the database
  <li><a name="996729"> </a>uninstalling the conduit
</ul>

<p><a name="996730"> </a>The code snippets in this section help briefly demonstrate how a sample conduit, written with the C/C++ Sync Suite, uses classic Sync Manager calls. The usage and primary steps are analogous to those in the other suites. </p>
<h3 class="hbH3">
  <a name="996732"> </a>Registering Your Conduit with Sync Manager <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996733"> </a>You must register your conduit with the Sync Manager by calling the <a href="CRef_SyncCommon.html#1003249"><code>SyncRegisterConduit()</code></a> function. The Sync Manager returns a handle for your conduit, which you use in subsequent calls. When your conduit is done, you unregister it by calling the <a href="CRef_SyncCommon.html#1003946"><code>SyncUnRegisterConduit()</code></a> function. Most conduits make these calls in their <a href="CRef_CnAPI.html#996737"><code>OpenConduit()</code></a> functions. </p>
<div class="NINoteImportant"><hr>
  <a name="996743"> </a> <b>NOTE: </b> Be careful not to confuse registering with the Sync Manger and registering with HotSync Manager. Your conduit must register with the <i>Sync</i> Manager at run time. You must register your conduit with <i>HotSync</i> Manager at install time, otherwise HotSync Manager does not run your conduit (see "Writing an Installer" in each suite's <i>Companion</i> document). 
<hr>
</div>
<h3 class="hbH3">
  <a name="996744"> </a>Opening Your Database <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996748"> </a>You can use the <a href="CRef_SyncClassic.html#1070464"><code>SyncCreateDB()</code></a> function to create a new, opened database on the handheld, or you can use the <a href="CRef_SyncClassic.html#1070634"><code>SyncOpenDB()</code></a> function to open an existing handheld database. <a href="Intro_CondDevelopment.html#996757">Listing 10.1</a> shows a section of code from an example <code>OpenDataBase()</code> function. This function calls both the <code>SyncCreateDB()</code> and <code>SyncOpenDB()</code> functions.</p>
<p class="CCodeCaption">
  <a name="996757"> </a><b>Listing 10.1&nbsp;&nbsp;Opening a handheld database</b>
</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
BOOL OpenDataBase( CLogMgr&amp; theLog, const char * pName, DWORD dbCreator, <a name="1007005"> </a>
   DWORD dbType, BYTE&amp; hDataBase, WORD&amp; dbRecordCount, <a name="1007006"> </a>
   BOOL clearDB )<a name="1007007"> </a>
{<a name="1007008"> </a>
long retVal;<a name="1007009"> </a>
   // Open the remote database. <a name="1007010"> </a>
   retVal = <i>SyncOpenDB</i>( pName, 0, hDataBase );<a name="1007011"> </a>
   if ( retVal )<a name="1007012"> </a>
   {<a name="1007013"> </a>
      if ( retVal == SYNCERR_FILE_NOT_FOUND )<a name="1007014"> </a>
      {<a name="1007015"> </a>
         TRACE( "SyncOpenDB( %s ) failed [ %lX ], attempting to create DB.\n", <a name="1007016"> </a>
            pName, retVal );<a name="1007017"> </a>
<a name="1007018"> </a>
         // The database does not exist, so create it.<a name="1007019"> </a>
         CDbCreateDB  createInfo;<a name="1007020"> </a>
         memset( &amp;createInfo, 0, sizeof( CDbCreateDB ) ) ;<a name="1007021"> </a>
<a name="1007022"> </a>
         createInfo.m_Creator   = dbCreator; <a name="1007023"> </a>
         createInfo.m_Type      = dbType; <a name="1007024"> </a>
         createInfo.m_Flags     = eRecord;          // eRecord; <a name="1007025"> </a>
         createInfo.m_CardNo    = 0;                // Target card number <a name="1007026"> </a>
         createInfo.m_Version   = 0;<a name="1007027"> </a>
<a name="1007028"> </a>
         ASSERT( strlen( pName ) &lt;= DB_NAMELEN );<a name="1007029"> </a>
         strcpy( createInfo.m_Name, pName );<a name="1007030"> </a>
<a name="1007031"> </a>
         retVal = <i>SyncCreateDB</i>( createInfo );<a name="1007032"> </a>
         if ( retVal )<a name="1007033"> </a>
         {<a name="1007034"> </a>
            CString theDBName( pName );<a name="1007035"> </a>
            // fatal error<a name="1007036"> </a>
            theLog.Message( IDS_CANT_CREATE_DB, theDBName, TRUE ); <a name="1007037"> </a>
<a name="1007038"> </a>
<a name="1007039"> </a>
            TRACE( "SyncCreateDB( %s ) failed [ %lX ].\n", pName, retVal );<a name="1007040"> </a>
<a name="1007041"> </a>
            return FALSE;<a name="1007042"> </a>
         }<a name="1007043"> </a>
         else<a name="1007044"> </a>
         {<a name="1007045"> </a>
            // Database is open with handle createInfo.m_FileHandle. <a name="1007046"> </a>
            hDataBase = createInfo.m_FileHandle;<a name="1007047"> </a>
<a name="1007048"> </a>
            TRACE( "SyncCreateDB( %s ) succeeded.\n", pName );<a name="1007049"> </a>
         } <a name="1007050"> </a>
      }<a name="1007051"> </a>
      else<a name="1007052"> </a>
      {<a name="1007053"> </a>
         CString theDBName( pName );<a name="1007054"> </a>
         // fatal error <a name="1007055"> </a>
         theLog.Message( IDS_CANT_OPEN_DB, theDBName, TRUE );<a name="1007056"> </a>
<a name="1007057"> </a>
         TRACE( "SyncOpenDB( %s ) failed [ %lX ].\n", pName, retVal );<a name="1007058"> </a>
<a name="1007059"> </a>
         return FALSE;<a name="1007060"> </a>
      }<a name="1007061"> </a>
   }<a name="1007062"> </a>
   // If clearDB, then clear all the existing records in the database.<a name="1007063"> </a>
   if ( clearDB )<a name="1007064"> </a>
   {<a name="1007065"> </a>
      retVal = <i>SyncPurgeAllRecs</i>( hDataBase );<a name="1007066"> </a>
      if ( retVal )<a name="1007067"> </a>
      {<a name="1007068"> </a>
         CString theDBName( pName );<a name="1007069"> </a>
         // fatal error<a name="1007070"> </a>
         theLog.Message( IDS_CANT_PURGE_DB, theDBName, TRUE );<a name="1007071"> </a>
<a name="1007072"> </a>
         TRACE( "SyncPurgeAllRecs( %s ) failed [ %lX ].\n", pName, retVal );<a name="1007073"> </a>
<a name="1007074"> </a>
         return FALSE;<a name="1007075"> </a>
      }<a name="1007076"> </a>
      else<a name="1007077"> </a>
      {<a name="1007078"> </a>
         TRACE( "SyncPurgeAllRecs( %s ) succeeded.\n", pName );<a name="1007079"> </a>
      }<a name="1007080"> </a>
   }<a name="1007081"> </a>
<a name="1007082"> </a>
   // Determine how many records are in the remote database. <a name="1007083"> </a>
   retVal = <i>SyncGetDBRecordCount</i>( hDataBase, dbRecordCount );<a name="1007084"> </a>
   if ( retVal )<a name="1007085"> </a>
   {<a name="1007086"> </a>
      if ( hDataBase ) <i>SyncCloseDB</i>( hDataBase );<a name="1007087"> </a>
<a name="1007088"> </a>
      CString theDBName( pName );<a name="1007089"> </a>
      // fatal error<a name="1007090"> </a>
      theLog.Message( IDS_CANT_GET_DBRECCOUNT, theDBName, TRUE );<a name="1007091"> </a>
<a name="1007092"> </a>
      TRACE( "SyncGetDBRecordCount( %s ) failed [ %lX ].\n", pName, retVal );<a name="1007093"> </a>
<a name="1007094"> </a>
      return FALSE;<a name="1007095"> </a>
   }<a name="1007096"> </a>
<a name="1007097"> </a>
   return TRUE;<a name="1007098"> </a>
<a name="1007099"> </a>
} // OpenDataBase <a name="1007100"> </a>
</pre><div class="CodeRule"><hr></div>

<h3 class="hbH3">
  <a name="996848"> </a>Working with Databases <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="996849"> </a>Each database is a collection of records with the following characteristics:</p>
<ul type="disc">
  <li><a name="996850"> </a>Each record in a database has an ID that is unique within the database.
  <li><a name="996851"> </a>Each record in a database has flags that specify whether it has been marked as private, deleted, modified, archived, or busy.
  <li><a name="996852"> </a>Each record in a database belongs to a category.
  <li><a name="996853"> </a>The database contains an application information block that stores global information about the database. This block is typically used to store the names of categories for records in the database.
  <li><a name="996854"> </a>The database has a sort information block that stores ordering information for records in the database. This block is for use by the application; Palm OS<sup>&#174;</sup> does not use it.
</ul>

<h4 class="hcH4">
  <a name="996855"> </a>Reading Records from a Handheld Database
</h4>

<p><a name="996859"> </a>As shown in <a href="Intro_CondDevelopment.html#996867">Table 10.3</a>, the Sync Manager provides a number of functions for retrieving records and resources from a database on the handheld. Each of these functions reads the record or resource into an object of the <a href="CRef_SyncClassic.html#1070265"><code>CRawRecordInfo</code></a> class. </p>

<p><a name="996863"> </a>You must fill in certain of the raw record object fields before calling each function. The function retrieves the record from the handheld and fills in other fields with the record information. The fields required for each function are described in the documentation for each function.</p>

<p class="fineprint">
<p class="caption"><a name="996867"> </a><b>Table 10.3&nbsp;&nbsp;Functions for reading records from handheld databases </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="996874"> </a><b>Function</b></p>
    </th>
    <th><p class="tt"><a name="996876"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996882"> </a><a href="CRef_SyncClassic.html#1128645"><code>SyncReadNextModifiedRec()</code></a> </p>
    </td>
    <td><p class="tt"><a name="996884"> </a>An iterator function that retrieves the next modified, archived, or deleted record from an opened record database on the handheld. Each call retrieves the next modified record until all modified records have been returned.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996890"> </a><a href="CRef_SyncClassic.html#1070816"><code>SyncReadNextModifiedRecInCategory()</code></a> </p>
    </td>
    <td><p class="tt"><a name="996892"> </a>An iterator function that retrieves modified records, including deleted and archived records, in a category from an open database on the handheld. Each call retrieves the next modified record from the category, until all modified records have been retrieved.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996898"> </a><a href="CRef_SyncClassic.html#1070834"><code>SyncReadNextRecInCategory()</code></a> </p>
    </td>
    <td><p class="tt"><a name="996900"> </a>An iterator function that retrieves any record in a category from an open database on the handheld, including deleted, archived, and modified records. Each call retrieves the next record from the category, until all records have been retrieved.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996906"> </a><a href="CRef_SyncClassic.html#1070890"><code>SyncReadRecordById()</code></a> </p>
    </td>
    <td><p class="tt"><a name="996908"> </a>Retrieves a record, by ID, from an open database on the handheld.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996914"> </a><a href="CRef_SyncClassic.html#1070908"><code>SyncReadRecordByIndex()</code></a> </p>
    </td>
    <td><p class="tt"><a name="996916"> </a>Retrieves a record, by index, from an open database on the handheld.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="996922"> </a><a href="CRef_SyncClassic.html#1070926"><code>SyncReadResRecordByIndex()</code></a> </p>
    </td>
    <td><p class="tt"><a name="996924"> </a>Retrieves a resource record, by index, from an open resource database on the handheld.</p>
    </td>
  </tr>
</table>

</div>

</p>

<p><a name="996929"> </a><a href="Intro_CondDevelopment.html#996931">Listing 10.2</a> shows an example <code>ImportPrefs()</code> method that calls <code>SyncReadRecordByIndex()</code> to read records by index.</p>
<p class="CCodeCaption">
  <a name="996931"> </a><b>Listing 10.2&nbsp;&nbsp;Reading records from a handheld database</b>
</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
BOOL CNetPrefs::ImportPrefs( BYTE hHHDataBase, WORD recIndex )<a name="1007127"> </a>
{<a name="1007128"> </a>
   BYTE  readBuf[ READ_BUF_SIZE ];<a name="1007129"> </a>
   BOOL  importSuccess = TRUE;<a name="1007130"> </a>
<a name="1007131"> </a>
   fHDataBase = hHHDataBase;<a name="1007132"> </a>
<a name="1007133"> </a>
<a name="1007134"> </a>
   // Read from the HH database at index recIndex.<a name="1007135"> </a>
   CRawRecordInfo rrInfo;<a name="1007136"> </a>
<a name="1007137"> </a>
   ::memset( &amp;rrInfo, 0, sizeof( rrInfo ) );<a name="1007138"> </a>
<a name="1007139"> </a>
   rrInfo.m_FileHandle  = hHHDataBase;<a name="1007140"> </a>
   rrInfo.m_RecIndex    = recIndex;<a name="1007141"> </a>
   rrInfo.m_pBytes      = (BYTE *) &amp;readBuf[ 0 ];<a name="1007142"> </a>
   rrInfo.m_RecSize     = READ_BUF_SIZE;<a name="1007143"> </a>
   rrInfo.m_TotalBytes  = READ_BUF_SIZE;<a name="1007144"> </a>
<a name="1007145"> </a>
   long retVal = ::<i>SyncReadRecordByIndex</i>( rrInfo );<a name="1007146"> </a>
   if ( retVal )<a name="1007147"> </a>
   {<a name="1007148"> </a>
      importSuccess = FALSE;<a name="1007149"> </a>
      fPLogMgr-&gt;Message( IDS_CANT_READ_DB );<a name="1007150"> </a>
   }<a name="1007151"> </a>
   else<a name="1007152"> </a>
   {<a name="1007153"> </a>
      // The read succeeded, so copy the data onto fCompressedBuffer.<a name="1007154"> </a>
      fHHDBRecID = rrInfo.m_RecId;<a name="1007155"> </a>
<a name="1007156"> </a>
      ASSERT( rrInfo.m_RecSize != 0 );<a name="1007157"> </a>
<a name="1007158"> </a>
      if ( fCompressedBuffer != NULL ) delete fCompressedBuffer;<a name="1007159"> </a>
      fCompressedBuffer  = new BYTE[ rrInfo.m_RecSize ];<a name="1007160"> </a>
      fCompressedLength  = rrInfo.m_RecSize;<a name="1007161"> </a>
<a name="1007162"> </a>
      ::memcpy( (void *) fCompressedBuffer, (void *) rrInfo.m_pBytes, <a name="1007163"> </a>
         fCompressedLength );<a name="1007164"> </a>
   }<a name="1007165"> </a>
<a name="1007166"> </a>
   return importSuccess;<a name="1007167"> </a>
<a name="1007168"> </a>
} // CNetPrefs::ImportPrefs<a name="1007169"> </a>
</pre><div class="CodeRule"><hr></div>


<h4 class="hcH4">
  <a name="996978"> </a>Iterating Through a Database
</h4>

<p><a name="996979"> </a>The Sync Manager also provides functions that you can use to iterate through a database on the handheld. To iterate through records in a database, you first reset the current index into the database by calling the <a href="CRef_SyncClassic.html#1070946"><code>SyncResetRecordIndex()</code></a> function, and then repeatedly call one of the following retrieval functions:</p>
<ul type="disc">
  <li><a name="996983"> </a><code>SyncReadNextRecInCategory()</code> retrieves the next record in a certain record category.
  <li><a name="996984"> </a><code>SyncReadNextModifiedRec()</code> retrieves the next record that has been modified (since the last synchronization).
  <li><a name="996985"> </a><code>SyncReadNextModifiedRecInCategory()</code> retrieves the next record in a specific record category that has been modified.
</ul>

<p><a name="996986"> </a>The Sync Manager automatically resets the current database iteration index for a database upon opening the database. To reset the index for subsequent iterations, you must call the <a href="CRef_SyncClassic.html#1070946"><code>SyncResetRecordIndex()</code></a> function.</p>

<p><a name="996994"> </a><a href="Intro_CondDevelopment.html#997000">Listing 10.3</a> shows a section of code that uses <a href="CRef_SyncClassic.html#1128645"><code>SyncReadNextModifiedRec()</code></a> to retrieve each record that has been modified in the handheld database.</p>
<p class="CCodeCaption">
  <a name="997000"> </a><b>Listing 10.3&nbsp;&nbsp;Using an iterator function to read handheld records</b>
</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
CRawRecordInfo rawRecord;<a name="1007185"> </a>
<a name="1007186"> </a>
retval = AllocateRawRecordMemory(rawRecord, EXPENSE_RAW_REC_MEM);<a name="1007187"> </a>
   // Read in each modified remote record one at a time.<a name="1007188"> </a>
while (!err &amp;&amp; !retval)<a name="1007189"> </a>
{<a name="1007190"> </a>
   if (!(err = <i>SyncReadNextModifiedRec</i>(rawRecord)))<a name="1007191"> </a>
   {<a name="1007192"> </a>
      // Convert from raw record format to CExpenseRecord.<a name="1007193"> </a>
      if (!m_pDTConvert-&gt;ConvertFromRemote(remRecord, rawRecord))<a name="1007194"> </a>
      {<a name="1007195"> </a>
         // Synchronize the record obtained from the handheld.<a name="1007196"> </a>
         retval = SynchronizeRecord(remRecord, locRecord,<a name="1007197"> </a>
            backRecord);<a name="1007198"> </a>
      }<a name="1007199"> </a>
      else<a name="1007200"> </a>
         retval = CONDERR_CONVERT_FROM_REMOTE_REC; <a name="1007201"> </a>
   } <a name="1007202"> </a>
   memset(rawRecord.m_pBytes, 0, rawRecord.m_TotalBytes);<a name="1007203"> </a>
   }<a name="1007204"> </a>
if (err &amp;&amp; err != SYNCERR_FILE_NOT_FOUND)<a name="1007205"> </a>
   LogBadReadRecord(err);<a name="1007206"> </a>
</pre><div class="CodeRule"><hr></div>


<h4 class="hcH4">
  <a name="997024"> </a>Modifying a Database While Iterating
</h4>

<p><a name="997025"> </a>The Sync Manager does not support the interleaving of iterating through and modifying a database at the same time, which means that you need to structure your logic not to modify a database while iterating through it. Beginning with version 2.0 of Palm OS, you can safely delete records from a database while iterating through it, with the exception of the <a href="CRef_SyncClassic.html#1070676"><code>SyncPurgeAllRecsInCategory()</code></a> function. </p>

<h4 class="hcH4">
  <a name="997029"> </a>Writing Records to a Handheld Database
</h4>

<p><a name="997030"> </a>The Sync Manager provides several functions for writing records and resources to a database on the handheld. Each of these functions sends record information that you have stored in an object of the <a href="CRef_SyncClassic.html#1070265"><code>CRawRecordInfo</code></a> class. You can use these functions to modify an existing record or to add a new record to a database.</p>

<p><a name="997034"> </a>To write a record to a handheld database, fill in certain fields in the raw record object and then call one of the Sync Manager record-writing functions. The function sends the record to a database on the handheld. You can use the <a href="CRef_SyncClassic.html#1071040"><code>SyncWriteRec()</code></a> function to write a record to a handheld record database, and you can use <a href="CRef_SyncClassic.html#1071058"><code>SyncWriteResourceRec()</code></a> to write a resource to a resource database on the handheld. <a href="Intro_CondDevelopment.html#997047">Listing 10.4</a> shows an example <code>ExportPrefs()</code> method that calls the <code>SyncWriteRec()</code> function. </p>
<p class="CCodeCaption">
  <a name="997047"> </a><b>Listing 10.4&nbsp;&nbsp;Writing records to a handheld</b>
</p>

<div class="CodeRule"><hr></div><pre class="CodeBlock">
BOOL CNetPrefs::ExportPrefs( BYTE hHHDataBase )<a name="1007214"> </a>
{<a name="1007215"> </a>
   BOOL  exportSuccess = TRUE;<a name="1007216"> </a>
<a name="1007217"> </a>
   fHDataBase = hHHDataBase;<a name="1007218"> </a>
<a name="1007219"> </a>
   if ( fCompressedLength != 0 )<a name="1007220"> </a>
   {<a name="1007221"> </a>
      ASSERT( fCompressedBuffer != NULL );<a name="1007222"> </a>
<a name="1007223"> </a>
      // write to the HH database.<a name="1007224"> </a>
<a name="1007225"> </a>
      CRawRecordInfo  rrInfo;<a name="1007226"> </a>
      ::memset( &amp;rrInfo, 0, sizeof( rrInfo ) );<a name="1007227"> </a>
<a name="1007228"> </a>
      rrInfo.m_FileHandle   = hHHDataBase;<a name="1007229"> </a>
      rrInfo.m_RecId        = fHHDBRecID;<a name="1007230"> </a>
      rrInfo.m_pBytes       = fCompressedBuffer;<a name="1007231"> </a>
      rrInfo.m_RecSize      = fCompressedLength;<a name="1007232"> </a>
<a name="1007233"> </a>
      long retVal = ::<i>SyncWriteRec</i>( rrInfo );<a name="1007234"> </a>
      if ( retVal )<a name="1007235"> </a>
      {<a name="1007236"> </a>
         exportSuccess = FALSE;<a name="1007237"> </a>
         fPLogMgr-&gt;Message( IDS_CANT_WRITE_DB );<a name="1007238"> </a>
      }<a name="1007239"> </a>
<a name="1007240"> </a>
   }<a name="1007241"> </a>
<a name="1007242"> </a>
   return exportSuccess;<a name="1007243"> </a>
<a name="1007244"> </a>
} // CNetPrefs::ExportPrefs<a name="1007245"> </a>
</pre><div class="CodeRule"><hr></div>

<h3 class="hbH3">
  <a name="997082"> </a>Deleting Records in Handheld Databases <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997083"> </a>When you use a Sync Manager function to delete a record or resource from a database, the record or resource is immediately deleted and removed from the database. This is in contrast to some calls that applications on the handheld make to delete records, which only mark those records for deletion but do not remove them immediately. </p>
<div class="NINoteImportant"><hr>
  <a name="997084"> </a> <b>NOTE: </b> Classic Sync Manager functions that begin with <code>Delete</code> and <code>Purge</code> both delete objects <i>immediately</i>.
<hr>
</div>

<p><a name="997085"> </a>The Sync Manager provides several functions for deleting records or resources from databases. To use these functions, you assign data to specific fields in an object of the <a href="CRef_SyncClassic.html#1070265"><code>CRawRecordInfo</code></a> class. You then call one of the functions described in <a href="Intro_CondDevelopment.html#997098">Table 10.4</a>. </p>

<p class="fineprint">
<p class="caption"><a name="997098"> </a><b>Table 10.4&nbsp;&nbsp;Functions for deleting single records  </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="997102"> </a><b>Function</b></p>
    </th>
    <th><p class="tt"><a name="997104"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997110"> </a><a href="CRef_SyncClassic.html#1070520"><code>SyncDeleteRec()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997112"> </a>Deletes a record from a record database.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997118"> </a><a href="CRef_SyncClassic.html#1070538"><code>SyncDeleteResourceRec()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997120"> </a>Deletes a specific resource from a resource database.</p>
    </td>
  </tr>
</table>

</div>

</p>

<p><a name="997122"> </a>You can delete multiple records by calling one of the functions described in <a href="Intro_CondDevelopment.html#997132">Table 10.5</a>. </p>

<p class="fineprint">
<p class="caption"><a name="997132"> </a><b>Table 10.5&nbsp;&nbsp;Functions for deleting multiple records  </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="997136"> </a><b>Function</b></p>
    </th>
    <th><p class="tt"><a name="997138"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997144"> </a><a href="CRef_SyncClassic.html#1070696"><code>SyncPurgeDeletedRecs()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997146"> </a>Removes all of the records in a record database that have previously been marked as deleted or archived.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997152"> </a><a href="CRef_SyncClassic.html#1070658"><code>SyncPurgeAllRecs()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997154"> </a>Removes all records in a record database on the handheld.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997160"> </a><a href="CRef_SyncClassic.html#1070676"><code>SyncPurgeAllRecsInCategory()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997162"> </a>Removes all of the records in a specific category from a record database on the handheld.</p>
    </td>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997168"> </a><a href="CRef_SyncClassic.html#1070482"><code>SyncDeleteAllResourceRec()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997170"> </a>Removes all resources from a resource database.</p>
    </td>
  </tr>
</table>

</div>

</p>
<h3 class="hbH3">
  <a name="997172"> </a>Cleaning Up Records <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997176"> </a>You can use the function shown in <a href="Intro_CondDevelopment.html#997183">Table 10.6</a> at the end of your synchronization operations to clear the record status flags.</p>

<p class="fineprint">
<p class="caption"><a name="997183"> </a><b>Table 10.6&nbsp;&nbsp;Functions to clean up records  </b></p>
<div class="tablediv"><table cellspacing="0" class="tTable">

  <tr valign="top">
    <th><p class="tt"><a name="997187"> </a><b>Function</b></p>
    </th>
    <th><p class="tt"><a name="997189"> </a><b>Description</b></p>
    </th>
  </tr>
  <tr valign="top">
    <td><p class="tt"><a name="997194"> </a><a href="CRef_SyncClassic.html#1070964"><code>SyncResetSyncFlags()</code></a> </p>
    </td>
    <td><p class="tt"><a name="997196"> </a>Resets the modified flag of all records in the opened record database on the handheld. Resets the backup date for an opened record or resource database.</p>
    </td>
  </tr>
</table>

</div>

</p>
<h3 class="hbH3">
  <a name="997198"> </a>Closing Your Database <a href="#995936"><span class="nav">^TOP^</span></a>
</h3>


<p><a name="997199"> </a>After you have finished with a handheld database, you must call the <a href="CRef_SyncClassic.html#1070426"><code>SyncCloseDB()</code></a> function to close it, as shown in <a href="Intro_CondDevelopment.html#996757">Listing 10.1</a>. C API-based conduits allow only one non-schema database to be open at any time. COM-based conduits can open more than one database at once. </p>
<div class="NINoteImportant"><hr>
  <a name="997206"> </a> <b>IMPORTANT: </b> If you open a non-schema database in a C API-based conduit, you must close it before exiting your conduit; otherwise, other conduits will not be able to open their databases.
<hr>
</div>
&nbsp;<br>
</div>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="7" rowspan="2"><img name="index_x" src="images/shim.gif" width="7" height="33" border="0" alt=""></td>
<td align="left"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p class="footer">
Copyright © 2001-2004, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="Intro_Front.html" target="_blank">Legal</a></p>
<br>
<!--BEGIN BOOK NAVIGATION-->
<p class="nav">
<A href="http://www.palmos.com/dev/support/docs/">Documentation</a>&nbsp;&nbsp;|&nbsp;&nbsp;
<a href="IntroToConduitsTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Intro_Trust.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="Intro_CfgEntries.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="IntroToConduitsIX.html">Index</a>
</p>
</td>
</tr>
<!-- END FOOTER -->

</body>
</html>