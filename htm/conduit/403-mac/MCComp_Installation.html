<html>
<head>
<title>PalmSource | Installing Conduits</title> 
<link href="palmsource_styles.css" rel="stylesheet" type="text/css">
<link href="document.css" rel="stylesheet" type="text/css">

<!-- begin meta data -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PALMSOURCETEMPLATE" CONTENT="1006-006 PalmSource HTML 20030131">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="LASTUPDATED" CONTENT="03/03/03 11:18:31">
<!-- end meta data -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="978808"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="middle" bgcolor="#efefe4"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r1_c1" src="images/shim.gif" width="280" height="24" border="0" alt="" id="IMG1"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td align="middle"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="33" height="75" border="0" alt=""></td>
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="11" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>
<tr>
<td><img name="index_r6_c4" src="images/shim.gif" width="96" height="10" border="0" alt=""></td>
</tr>
</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--Begin masthead-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<!--Begin breadcrumbs-->
<tr>
<td><span class="nav">&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
&nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
&nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
&nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span></td>
</tr>
<!--End breadcrumbs-->
<tr>
<td><h2 class="HeadDocPage">9 &nbsp;&nbsp;Installing Conduits</h2></td>
</tr>
<tr>
<td><span class="nav">
<a href="C++SyncMacCompanionTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="CComp_Expansion.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MCComp_Debugging.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="C++SyncMacCompanionIX.html">Index</a>
</span></td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--End masthead-->

</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="10"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>

<!--BEGIN MINITOC-->
<td valign="top" width="175">
<p class="SideTitle"><a href="MCComp_Front.html">C/C++ Sync Suite Companion for Macintosh</a></p>
<p class="SideTOC1-PartTab">Palm OS® Conduit Development Kit for Macintosh, Version 4.03 </p>
<p class="SideTOC1"><a href="MCComp_Installation.html">9  Installing Conduits</a></p>


<p class="SideTOC2">
<a href="#978815">The Conduit Information Resource
</a></p>

<p class="SideTOC2">
<a href="#978893">Conduit Domains
</a></p>

<p class="SideTOC2">
<a href="#979630">Using the User Manager API
</a></p>

<p class="SideTOC3">
<a href="#979646">Installing Conduits
</a></p>

<p class="SideTOC3">
<a href="#979682">Installing Handheld Applications
</a></p>

<p class="SideTOC2">
<a href="#978901">Testing Your Conduit
</a></p>

<p class="SideTOC3">
<a href="#978906">Conduit Cautions
</a></p>

</td>
<!--END MINITOC-->

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif">&nbsp;</td>
<td width="5">&nbsp;&nbsp;</td>
<td valign="top">

<!--BEGIN CONTENT-->
<p class="Body">
  <a name="978813"> </a>For your conduit to run on a Macintosh computer, you need to create a conduit info ('<span style="font-family: monospace">Cinf'</span>) resource for your conduit. This resource provides the information about your conduit that the HotSync<sup>®</sup> Manager application needs to run it.
</p>

<h2 class="HaHeadA">
  <a name="978815"> </a>The Conduit Information Resource <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="978819"> </a><a href="MCComp_Installation.html#978822">Listing 9.1</a> shows the declaration for the conduit information resource.
</p>
<p class="Body">
  <a name="979742"> </a>The CDK includes a Resourceror template for the <span style="font-family: monospace">'CInf'</span> resource, in the Extras folder.
</p>
<p class="CCodeCaption">
  <a name="978822"> </a>Listing 9.1  The conduit information resource
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
type 'CInf' {<a name="978823"> </a>
        integer;                    // conduit type<a name="978824"> </a>
        longint;                    // conduit version number<a name="978825"> </a>
        literal longint;            // conduit creator ID<a name="978826"> </a>
        pstring;                    // conduit name shown to user<a name="978827"> </a>
        pstring;                    // conduit settings directory name<a name="978828"> </a>
        integer;                    // conduit priority<a name="978829"> </a>
        integer;                    // conduit has a user interface if nonzero<a name="978830"> </a>
        integer = $$Countof(Stringarray);<a name="978831"> </a>
        array StringArray{<a name="978832"> </a>
          pstring;                  // handheld database names<a name="978833"> </a>
        };<a name="978834"> </a>
        integer = $$Countof(Stringarray);<a name="978835"> </a>
        array StringArray{<a name="978836"> </a>
          pstring;                  // desktop computer database names<a name="978837"> </a>
        };<a name="978838"> </a>
};<a name="978839"> </a>
</pre><div class="CodeRule"><hr></div>
<p class="Body">
  <a name="978841"> </a>The fields of the resource are used as shown below.
</p>
<h5 class="P1"><a name="978843"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">conduit type</td>
<td valign="top">This is the type of conduit you are defining. Use one of the following values:</td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978844"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">nativeConduit = 1</span></td><td valign="top">This is a built-in conduit.</td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978845"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">nonNativeConduit = 1</span></td><td valign="top">This is a user-supplied conduit.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978847"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">version number</td>
<td valign="top">The long integer version number for your conduit. Pack your major version number into the high byte of the low word, and pack your minor version number into the low byte of the low word. <i>Note:</i> This must be 0x0300 or greater if your conduit is Carbonized.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978849"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">conduit name</td>
<td valign="top">A <span style="font-family: monospace">pstring</span> that provides the name of the conduit shown to the user during synchronization operations.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978851"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">creator ID</td>
<td valign="top">The <span style="font-family: monospace">long</span> integer ID associated with your conduit and with its companion application on the handheld.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978853"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">directory name</td>
<td valign="top">A <span style="font-family: monospace">pstring</span> that specifies the name of the folder inside the <span style="font-family: monospace">user</span> folder in which settings are stored for the conduit.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978855"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">priority</td>
<td valign="top">The priority of the conduit. The HotSync Manager application runs higher priority conduits before lower priority ones. Use one of the following values:</td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978856"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">lowestPriority = 0</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978857"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">lowPriority = 1</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978858"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">defaultPriority = 2</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978859"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">highPriority = 3</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978860"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">highestPriority = 4</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978862"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">user interface</td>
<td valign="top">Specifies whether your conduit provides a user interface (configuration) function. Use one of the following values:</td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978863"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">doesntWantUserInterface = 0</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P2"><a name="978864"> </a><div class="P2ParameterSub"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="100" valign="top"><span style="font-family: monospace">wantsUserInterface = 1</span></td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978866"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">handheld database names</td>
<td valign="top">An array of <span style="font-family: monospace">pstring</span>s; one string for the name of each database on the handheld that the conduit uses.</td>
  </tr>
</table>
</div></h5>
<h5 class="P1"><a name="978868"> </a><div class="P1Parameter"><table border="0" cellpadding="5" cellspacing="0">
  <tr>
    <td width="180" valign="top">desktop database names</td>
<td valign="top">An array of <span style="font-family: monospace">pstring</span>s; one string for the file name of each database on the desktop computer that the conduit uses.</td>
  </tr>
</table>
</div></h5>
<p class="Body">
  <a name="978872"> </a><a href="MCComp_Installation.html#978875">Listing 9.2</a> shows an example of a conduit information resource. The conduit that uses this resource definition provides a user interface, runs at the default priority, and uses the specified data source on the handheld and desktop computer.
</p>
<p class="CCodeCaption">
  <a name="978875"> </a>Listing 9.2  An example of a conduit information resource
</p>
<div class="CodeRule"><hr></div><pre class="CodeBlock">
      resource 'CInf' (0)<a name="978876"> </a>
      {<a name="978877"> </a>
        nonNativeConduit,<a name="978878"> </a>
        0x0300,                        // version number<a name="978879"> </a>
        'Samp',                        // creator ID<a name="978880"> </a>
        "Memo Conduit",                // user visible conduit name<a name="978881"> </a>
        "Memo",                        // settings directory<a name="978882"> </a>
        defaultPriority,               // conduit priority<a name="978883"> </a>
        WantsUserInterface,            // conduit does have an interface<a name="978884"> </a>
        {<a name="978885"> </a>
          "MemoDB",                    // remote (handheld) database names<a name="978886"> </a>
        },<a name="978887"> </a>
        {<a name="978888"> </a>
          "Memo.dat",                  // local (desktop) database names<a name="978889"> </a>
        },<a name="978890"> </a>
      };<a name="978891"> </a>
</pre><div class="CodeRule"><hr></div>

<h2 class="HaHeadA">
  <a name="978893"> </a>Conduit Domains <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="978894"> </a>HotSync<sup>®</sup> Manager supports the new concept of "domains" under Mac OS X and Mac OS 9. There are three domains:
</p>

  <a name="978895"> </a><p class="B1Bullet"> &#8226; the user domain</p>

  <a name="978896"> </a><p class="B1Bullet"> &#8226; the local domain</p>

  <a name="978897"> </a><p class="B1Bullet"> &#8226; the network domain</p>
<p class="Body">
  <a name="979704"> </a>Carbon defines constants for these three domains in <span style="font-family: monospace">Folders.h</span>:
</p>

  <a name="979705"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">kUserDomain</span></p>

  <a name="979706"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">kLocalDomain</span></p>

  <a name="979707"> </a><p class="B1Bullet"> &#8226; <span style="font-family: monospace">kNetworkDomain</span></p>
<p class="Body">
  <a name="979717"> </a>Currently, only the local domain is supported by HotSync Manager. Under Mac OS X, conduits are placed in <span style="font-family: monospace">/Library/Application Support/Palm HotSync/Conduits</span>. Under Mac OS 9, conduits are installed in <span style="font-family: monospace">&lt;Volume Name&gt;:System Folder:Application Support:Palm HotSync:Conduits</span>. However, you should use the <span style="font-family: monospace">UmGetGlobalConduitsDirectory</span> function to determine where conduits should be installed.
</p>
<div class="NINoteImportant"><hr>
  <a name="978899"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> As a side effect of this architecture, conduits installed under Mac OS X are in a different location than conduits installed under Mac OS 9, so they won't be available on both operating systems unless they're installed in both locations.
<hr>
</div>

<h2 class="HaHeadA">
  <a name="979630"> </a>Using the User Manager API <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="979631"> </a>The User Manager API is the preferred way to access information in the users data file on the desktop. The users data file stores name, synchronization preferences, directory, and password information about users who have synchronized Palm Powered<sup>&#8482;</sup> handhelds with the desktop computer. 
</p>
<div class="NINoteImportant"><hr>
  <a name="979654"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> The Install Aide API has been deprecated in favor of the User Manager API. The User Manager API is available beginning with Palm Desktop 4.0, while the Install Aide API is not available with Palm Desktop 4.0 or later.
<hr>
</div>

<h2 class="HBHeadB">
  <a name="979646"> </a>Installing Conduits <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="979681"> </a>To determine where to install your conduit, use the <span style="font-family: monospace">UmGetGlobalConduitsDirectory</span> function.
</p>

<h2 class="HBHeadB">
  <a name="979682"> </a>Installing Handheld Applications <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="979680"> </a>To determine where your installer should place handheld applications to be installed the next time the user performs a HotSync operation, use the <span style="font-family: monospace">UmGetFilesToInstallFolderSpec</span> function.
</p>
<p class="Body">
  <a name="979660"> </a>For details on the User Manager API functions, see <a href="MCRef_UserMgr.html#986249">Chapter 6, "User Manager API,"</a> in the <i>C/C++ Sync Suite Reference for Macintosh</i>.
</p>

<h2 class="HaHeadA">
  <a name="978901"> </a>Testing Your Conduit <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="978902"> </a>Since one of the most important goals of conduits is simplicity for users, you need to ensure that your conduit does not interfere with other conduits. PalmSource, Inc. strongly recommends that, at a minimum, you test the following conduit installation and removal conditions:
</p>

  <a name="978903"> </a><p class="B1Bullet"> &#8226; after installing your conduit, the user can press the HotSync button and have synchronization operations proceed correctly and without required intervention</p>

  <a name="978904"> </a><p class="B1Bullet"> &#8226; after removing (uninstalling) your conduit, the user can press the HotSync button and have synchronization operations proceed correctly and without required intervention</p>

<h2 class="HBHeadB">
  <a name="978906"> </a>Conduit Cautions <a href="#978808"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="978907"> </a>In addition to verifying that your conduit installation and removal operations leave the user's desktop computer in fully operational condition, you need to be aware of the following situations that can cause your conduit to generate unpleasant side effects for users of Palm Powered<sup>&#8482;</sup> handhelds:
</p>

  <a name="978908"> </a><p class="B1Bullet"> &#8226; If your conduit stores state information on the handheld, you must remember to clean up the state information upon removal of your conduit.</p>

  <a name="978909"> </a><p class="B1Bullet"> &#8226; If you create data for a creator ID that you do not own, your conduit can generate very unpleasant results. Do not use a creator ID that does not belong to you. </p>
&nbsp;<br>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="15" rowspan="2"><img name="index_x" src="images/shim.gif" width="15" height="33" border="0" alt=""></td>
<td align="middle"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p>&nbsp;</p>
<p class="footer">
Copyright © 1996 - 2002, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="MCComp_Front.html" target="_blank">Legal</a></p>
<p>&nbsp;</p>
</td>
</tr>
<!-- END FOOTER -->

</body>
</html>