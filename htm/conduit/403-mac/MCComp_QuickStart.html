<html>
<head>
<title>PalmSource | Conduit Quick Start</title> 
<link href="palmsource_styles.css" rel="stylesheet" type="text/css">
<link href="document.css" rel="stylesheet" type="text/css">

<!-- begin meta data -->
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<META NAME="PALMSOURCETEMPLATE" CONTENT="1006-006 PalmSource HTML 20030131">
<META NAME="GENERATOR" CONTENT="Quadralay WebWorks Publisher Professional Edition 6.0.7">
<META NAME="LASTUPDATED" CONTENT="03/03/03 11:18:24">
<!-- end meta data -->
</head>

<body bgcolor="#ffffff" text="#000000" leftmargin="0" topmargin="0" marginwidth="0" marginheight="0">
<a name="968318"></a>

<!-- BEGIN TOPNAV -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td align="middle" bgcolor="#efefe4"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r1_c1" src="images/shim.gif" width="280" height="24" border="0" alt="" id="IMG1"></td>
</tr>
</table>
</td>
</tr>
<tr>
<td align="middle"><table border="0" cellpadding="0" cellspacing="0" width="744">
<tr>
<td><img name="index_r2_c1" src="images/shim.gif" width="33" height="75" border="0" alt=""></td>
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_r2_c4" src="images/shim.gif" width="96" height="11" border="0" alt=""></td>
</tr>
<tr>
<td><a href="http://www.palmsource.com/"><img name="ps_logo" src="images/ps_logo.gif" width="96" height="54" border="0" alt=""></a></td>
</tr>
<tr>
<td><img name="index_r6_c4" src="images/shim.gif" width="96" height="10" border="0" alt=""></td>
</tr>
</table>
</td>

<td><table border="0" cellpadding="0" cellspacing="0" width="30">
<td><img name="index_x" src="images/shim.gif" width="30" height="75" border="0" alt=""></td>
</table></td>

<!--Begin masthead-->
<td><table border="0" cellpadding="0" cellspacing="0" width="96">
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
<!--Begin breadcrumbs-->
<tr>
<td><span class="nav">&lt;&nbsp;<A HREF="http://www.palmos.com/index.html">Home</a> 
&nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/">Developers</a> 
&nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/">Development Support</a>
&nbsp;&nbsp;&lt;&nbsp;<A HREF="http://www.palmos.com/dev/support/docs/">Documentation</a></span></td>
</tr>
<!--End breadcrumbs-->
<tr>
<td><h2 class="HeadDocPage">1 &nbsp;&nbsp;Conduit Quick Start</h2></td>
</tr>
<tr>
<td><span class="nav">
<a href="C++SyncMacCompanionTOC.html">Table of Contents</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MCComp_About.html">&lt;&nbsp;Previous</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="MCComp_Overview.html">Next&nbsp;&gt;</a>&nbsp;&nbsp;
             |&nbsp;&nbsp;<a href="C++SyncMacCompanionIX.html">Index</a>
</span></td>
</tr>
<tr>
<td><img name="index_x" src="images/shim.gif" width="615" height="5" border="0" alt=""></td>
</tr>
</table>
</td>
<!--End masthead-->

</tr>
</table>
<img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
</tr>
</table>
<!-- END TOPNAV -->

<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td valign="top" width="10"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>

<!--BEGIN MINITOC-->
<td valign="top" width="175">
<p class="SideTitle"><a href="MCComp_Front.html">C/C++ Sync Suite Companion for Macintosh</a></p>
<p class="SideTOC1-PartTab">Palm OS® Conduit Development Kit for Macintosh, Version 4.03 </p>
<p class="SideTOC1"><a href="MCComp_QuickStart.html">1  Conduit Quick Start</a></p>


<p class="SideTOC2">
<a href="#968325">Conduit Creation Fast Track Steps
</a></p>

<p class="SideTOC3">
<a href="#968328">A. Install Conduit Development Tools
</a></p>

<p class="SideTOC3">
<a href="#968334">B. Create a New Conduit Project
</a></p>

<p class="SideTOC3">
<a href="#968369">C. Take a Trial Run
</a></p>

<p class="SideTOC3">
<a href="#968375">D. Customize the Conduit Information Resource
</a></p>

<p class="SideTOC3">
<a href="#968390">E. Customize the Conduit Entry Points
</a></p>

<p class="SideTOC2">
<a href="#968423">Conduit Design Goals
</a></p>

</td>
<!--END MINITOC-->

<td width="5">&nbsp;&nbsp;</td>
<td width="2" background="images/index_r8_c10.gif">&nbsp;</td>
<td width="5">&nbsp;&nbsp;</td>
<td valign="top">

<!--BEGIN CONTENT-->
<p class="Body">
  <a name="968321"> </a>This chapter provides a quick start guide to developing conduits with the Conduit Development Kit, without attempting to explain the conceptual underpinnings. You can use this guide if you are already familiar with programming for the Palm OS<sup>®</sup> platform and how to use HotSync<sup>®</sup> technology. 
</p>
<p class="Body">
  <a name="968322"> </a>A conduit is a Code Fragment Manager plug-in module that provides a translation bridge between a Palm Powered<sup>&#8482;</sup> handheld application and a particular desktop application. You create conduits using the Metrowerks CodeWarrior development environment. You must also have a Palm Powered handheld available for testing your conduit.
</p>
<p class="Body">
  <a name="968323"> </a>For more information about developing a conduit, see the other chapters in this book. For information about the Sync Manager API and the conduit entry points, see the <i>Conduit Developer Reference</i>.
</p>

<h2 class="HaHeadA">
  <a name="968325"> </a>Conduit Creation Fast Track Steps <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968326"> </a>Follow the five steps listed here to quickly create a functional conduit.
</p>

<h2 class="HBHeadB">
  <a name="968328"> </a>A. Install Conduit Development Tools <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968329"> </a>You need to perform the following installations on your Macintosh desktop computer:
</p>
  <a name="968330"> </a><p class="N1NumList">1.	  Install Metrowerks CodeWarrior. You can use Metrowerks CodeWarrior Release 7.2 for Macintosh to develop conduits with this kit.</p>  <a name="968331"> </a><p class="N1NumList">2.	  Install the Conduit Development Kit (the CDK).</p><div class="NINoteImportant"><hr>
  <a name="968332"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">NOTE:  </span> You can use the CDK regardless of whether the Palm Desktop software is installed on your Macintosh.
<hr>
</div>

<h2 class="HBHeadB">
  <a name="968334"> </a>B. Create a New Conduit Project <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968335"> </a>When you install the Conduit Development Kit, the conduit stationery is added to your Metrowerks installation. To use the stationery, follow these steps:
</p>
  <a name="968336"> </a><p class="N1NumList">1.	  Select <b>New</b> from the File menu, click on the <b>Projects</b> tab, and select the <i>Palm Conduit</i> stationery, as shown in <a href="MCComp_QuickStart.html#968341">Figure 1.1</a>. </p>
<p class="FFigureCaption">
  <a name="968341"> </a>Figure 1.1	 Using the conduit stationery
</p>
<p class="FgFigure">
<div align="left"><img src="images/newproject.gif" border="0" hspace="20" vspace="0">
</div>
</p>
  <a name="968346"> </a><p class="N1NumList">2.	  Name your project and specify the folder in which you want it saved, as shown in <a href="MCComp_QuickStart.html#968352">Figure 1.2</a>.</p>
<p class="FFigureCaption">
  <a name="968352"> </a>Figure 1.2	 Naming your project
</p>
<p class="FgFigure">
<div align="left"><img src="images/myproject.gif" border="0" hspace="20" vspace="0">
</div>
</p>
  <a name="968357"> </a><p class="N1NumList">3.	  Press the <b>Save</b> button to create your project. Metrowerks displays the project window with your newly created conduit files, as shown in <a href="MCComp_QuickStart.html#968363">Figure 1.3</a>.</p>
<p class="FFigureCaption">
  <a name="968363"> </a>Figure 1.3	 The conduit project window
</p>
<p class="FgFigure">
<div align="left"><img src="images/codewindow.gif" border="0" hspace="20" vspace="0">
</div>
</p>

<h2 class="HBHeadB">
  <a name="968369"> </a>C. Take a Trial Run <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968370"> </a>Test drive your conduit shell to verify that you can build and install it, and that the HotSync Manager application can run it:
</p>
  <a name="968371"> </a><p class="N1NumList">1.	  Select <b>Make</b> from the CodeWarrior Project menu to build a release version of the conduit generated from the stationery without making any changes to the project or source files.</p>  <a name="968372"> </a><p class="N1NumList">2.	  You may need to drag your conduit executable into the <span style="font-family: monospace">Conduits</span> folder in the <span style="font-family: monospace">Palm</span> folder on your system, as described in the following note.</p><div class="NINoteImportant"><hr>
  <a name="969209"> </a> <span style="color: #333;  font-style: normal; font-weight: bold; text-decoration: none; text-transform: none; vertical-align: baseline">IMPORTANT:  </span> When the HotSync Manager application performs a synchronization, it runs each conduit in the Conduits folders under each of the supported domains. See <a href="MCComp_Installation.html#978893">"Conduit Domains"</a> for details.<br><br>When you build a conduit using one of the projects supplied with the CDK, your conduit executable is stored in the <span style="font-family: monospace">Conduits</span> folder contained within the CDK directory tree, not in the <span style="font-family: monospace">Conduits</span> folder of the Palm Desktop software, of the CDK's <span style="font-family: monospace">HotSync</span> folder. The conduits that you build will only run during a HotSync operation if they are located in the correct folder.<br><br>The CDK installer places an alias to the CDK target build folder into the system conduit folder, so that build conduits will be found by the HotSync Manager. This is a development configuration only.<br><br>If you have not installed the Palm Desktop software, this isn't an issue: your conduits will automatically run when you press the HotSync button on your cradle, provided that you have started the Transport Monitor.
<hr>
</div>
  <a name="968374"> </a><p class="N1NumList">3.	  Run your conduit by performing a standard synchronization operation. Check the log file to verify that your conduit ran properly.</p>
<h2 class="HBHeadB">
  <a name="968375"> </a>D. Customize the Conduit Information Resource <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968378"> </a>The conduit stationery provides a default version of the conduit information (<span style="font-family: monospace">'CInf'</span>) resource. You need to modify some of the fields in this resource for your conduit: 
</p>
  <a name="968379"> </a><p class="N1NumList">1.	  Change the name and version number of your conduit, if required.</p>  <a name="968380"> </a><p class="N1NumList">2.	  Change the creator ID for your conduit to the creator ID that you have obtained from PalmSource, Inc. The creator ID must be unique in order for synchronization to run properly.</p>  <a name="968381"> </a><p class="N1NumList">3.	  Change the user interface field to match your configuration code: </p>  <a name="968382"> </a><p class="B2BulletSub"> &#8211;	 if you provide a modal dialog box in your <span style="font-family: monospace">ConfigureConduit</span> function, set this field to <span style="font-family: monospace">wantsUserInterface</span>.</p>  <a name="968383"> </a><p class="B2BulletSub"> &#8211;	 if you do not provide a modal dialog box, set this field to <span style="font-family: monospace">doesntWantUserInterface</span>.</p>  <a name="968384"> </a><p class="N1NumList">4.	  Change the names of the handheld and desktop computer databases to the ones used by your conduit.</p><p class="Body">
  <a name="968385"> </a>For more information about the conduit information resource, see <a href="MCComp_Installation.html#978808">Chapter 9, "Installing Conduits."</a> 
</p>

<h2 class="HBHeadB">
  <a name="968390"> </a>E. Customize the Conduit Entry Points <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968391"> </a>The conduit stationery provides simple implementations of the conduit entry point functions. You need to add code to several of these functions:
</p>
  <a name="968392"> </a><p class="N1NumList">1.	  Add code to the <span style="font-family: monospace">GetActionString</span> function to return the string that the HotSync Manager application displays in the "Next HotSync action" field of the Actions dialog box.</p>  <a name="968393"> </a><p class="N1NumList">2.	  If your conduit provides a user interface, you need to add code that displays and handles a modal dialog box in your conduit's <span style="font-family: monospace">ConfigureConduit</span> function. The template conduit program includes a model implementation of the <span style="font-family: monospace">ConfigureConduit</span> function.</p><p class="Indented1"> <a name="968394"> </a>Note that you must change the user interface flag in your <span style="font-family: monospace">'CInf'</span> resource to <span style="font-family: monospace">doesntWantUserInterface</span> if you do not provide a dialog box and to <span style="font-family: monospace">wantsUserInterface</span> if you do provide a dialog box.</p>
  <a name="968395"> </a><p class="N1NumList">3.	  You need to add code to the <span style="font-family: monospace">OpenConduit</span> entry point, which is where the interesting work of your conduit is done. The HotSync Manager application calls this entry point to have your conduit exchange data between the desktop computer and handheld. </p><p class="Indented1"> <a name="968400"> </a>Use the Sync Manager API functions in your <span style="font-family: monospace">OpenConduit</span> implementation. Most conduits perform steps such as the following:</p>
  <a name="968401"> </a><p class="N2NumListSub">a.	  Open the database on the handheld and open the data source on the desktop computer.</p>  <a name="968402"> </a><p class="N2NumListSub">b.	  Use the Sync Manager API to read data from the handheld, and use the desktop application's native API to read data from the desktop data source.</p>  <a name="968403"> </a><p class="N2NumListSub">c.	  Exchange or synchronize the data as required.</p>  <a name="968404"> </a><p class="N2NumListSub">d.	  Write the resulting data back to the handheld database and desktop data source.</p>  <a name="968405"> </a><p class="N2NumListSub">e.	  Clear the handheld's record status flags.</p>  <a name="969182"> </a><p class="N2NumListSub">f.	  Close the handheld database and the desktop data source.</p><p class="Body">
  <a name="969183"> </a>The Generic Conduit test conduit source code included with the CDK includes multiple targets in its project file. You can choose to build either a bundled or non-bundled version of the conduit by simply choosing the appropriate target ("GenericConduit(bundle)" or "GenericConduit") before building.
</p>
<p class="Body">
  <a name="969226"> </a>The Generic Conduit provides an examples of <span style="font-family: monospace">OpenConduit</span> and <span style="font-family: monospace">OpenConduitCarbon</span> implementations that instantiates and passes control to a <span style="font-family: monospace">CSynchronizer</span> object. The template conduit program includes an example of the <span style="font-family: monospace">OpenConduit</span> function that calls Sync Manager API functions.
</p>
<p class="Body">
  <a name="969186"> </a>For debugging and troubleshooting assistance, see <a href="MCComp_Debugging.html#979588">Chapter 10, "Debugging Conduits."</a> 
</p>
<p class="Body">
  <a name="968414"> </a>For more information about the conduit entry points, see <a href="MCRef_CnAPI.html#985109">Chapter 1, "Conduit API,"</a> in the <i>C/C++ Sync Suite Reference for Macintosh</i>, or <a href="MCComp_EntryPoints.html#973649">Chapter 7, "Interfacing with the HotSync Manager Application."</a> 
</p>

<h2 class="HaHeadA">
  <a name="968423"> </a>Conduit Design Goals <a href="#968318"><span class="nav">^TOP^</span></a>
</h2>

<p class="Body">
  <a name="968428"> </a>HotSync technology has been a very important part of the success of the Palm OS platform. One of the reasons for this is that the conduits called by the HotSync Manager application run quickly and adhere to a strong set of design goals. You need to develop your conduit with these same goals in mind, as described in <a href="MCComp_QuickStart.html#968435">Table 1.1</a>. 
</p>

<h5 class="TgTable">


<table border="1" cellpadding="5" cellspacing="0">
  <caption><a name="968435"> </a><div class="TableTitle">Table 1.1  Conduit design goals </div></caption>
  <tr bgcolor="#CCCCCC" valign="top">
    <th><a name="968439"> </a><div class="CellHeading">Design goal</div></th>
    <th><a name="968441"> </a><div class="CellHeading">Description</div></th>
  </tr>
  <tr valign="top">
    <td><a name="968443"> </a><div class="CellBody">Fast execution</div></td>
    <td><a name="968445"> </a><div class="CellBody">The overarching goal for the HotSync process is that a complete synchronization happen very quickly. Conduits need to be designed for optimal processing speed and minimal data transfer.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="968447"> </a><div class="CellBody">Zero data loss</div></td>
    <td><a name="968449"> </a><div class="CellBody">Conduits must take measures required to prevent data loss under any circumstances, including loss of connection during a synchronization process.</div></td>
  </tr>
  <tr valign="top">
    <td><a name="968451"> </a><div class="CellBody">Good conflict handling</div></td>
    <td><a name="968453"> </a><div class="CellBody">Conduits that perform mirror image synchronizations must be able to gracefully handle conflicting modifications. This occurs when the user modifies a record on both the desktop computer and the handheld. In addition to managing the conflict, the conduit should add an entry to the log to notify the user of this situation. </div></td>
  </tr>
  <tr valign="top">
    <td><a name="968455"> </a><div class="CellBody">No user interaction</div></td>
    <td><a name="968457"> </a><div class="CellBody">The user expects to be able to press the HotSync button on the cradle and have synchronization proceed without any required interaction. Conduits need to be constructed to avoid the need for user interaction.</div></td>
  </tr>
</table>




</h5>
&nbsp;<br>
<!--END CONTENT-->

</td>
<td width="5">&nbsp;&nbsp;</td>
</tr>

</table>

<!-- BEGIN FOOTER -->
<table width="100%" border="0" cellspacing="0" cellpadding="0">
<tr>
<td width="15" rowspan="2"><img name="index_x" src="images/shim.gif" width="15" height="33" border="0" alt=""></td>
<td align="middle"><img name="dashes" src="images/dashes.gif" width="744" height="3" border="0" alt=""></td>
<td width="10" rowspan="2"><img name="index_x" src="images/shim.gif" width="10" height="33" border="0" alt=""></td>
</tr>
<tr>
<td align="center">
<p>&nbsp;</p>
<p class="footer">
Copyright © 1996 - 2002, PalmSource, Inc. and its affiliates. All rights reserved.<br>
<a href="http://www.palmsource.com/contact/">Write Us</a> | <a href="http://www.palmos.com/dev/training/">Training</a> | <a href="http://www.palmos.com/dev/support/kb/">Knowledge Base</a> | <a href="MCComp_Front.html" target="_blank">Legal</a></p>
<p>&nbsp;</p>
</td>
</tr>
<!-- END FOOTER -->

</body>
</html>